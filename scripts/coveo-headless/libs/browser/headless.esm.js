/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var eb=Object.create;var Hs=Object.defineProperty;var tb=Object.getOwnPropertyDescriptor;var rb=Object.getOwnPropertyNames;var ab=Object.getPrototypeOf,nb=Object.prototype.hasOwnProperty;var Sm=e=>Hs(e,"__esModule",{value:!0});var ob=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var de=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ym=(e,t)=>{Sm(e);for(var r in t)Hs(e,r,{get:t[r],enumerable:!0})},A=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of rb(t))!nb.call(e,a)&&a!=="default"&&Hs(e,a,{get:()=>t[a],enumerable:!(r=tb(t,a))||r.enumerable});return e},Ee=e=>A(Sm(Hs(e!=null?eb(ab(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Vd=de((nD,Ir)=>{function Dd(e){return Ir.exports=Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir.exports.__esModule=!0,Ir.exports.default=Ir.exports,Dd(e)}Ir.exports=Dd,Ir.exports.__esModule=!0,Ir.exports.default=Ir.exports});var Dm=de((oD,ki)=>{var Tm=Vd().default;function gb(e,t){if(Tm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Tm(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}ki.exports=gb,ki.exports.__esModule=!0,ki.exports.default=ki.exports});var Vm=de((iD,Oi)=>{var hb=Vd().default,Sb=Dm();function yb(e){var t=Sb(e,"string");return hb(t)==="symbol"?t:String(t)}Oi.exports=yb,Oi.exports.__esModule=!0,Oi.exports.default=Oi.exports});var Mm=de((sD,qi)=>{var Cb=Vm();function vb(e,t,r){return t=Cb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}qi.exports=vb,qi.exports.__esModule=!0,qi.exports.default=qi.exports});var Lm=de((cD,Ti)=>{var xb=Mm();function Nm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function bb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nm(Object(r),!0).forEach(function(a){xb(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nm(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}Ti.exports=bb,Ti.exports.__esModule=!0,Ti.exports.default=Ti.exports});var Vi=de(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});var Fb=Lm();function Rb(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Qm=Rb(Fb);function Qe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Bm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Md=function(){return Math.random().toString(36).substring(7).split("").join(".")},Di={INIT:"@@redux/INIT"+Md(),REPLACE:"@@redux/REPLACE"+Md(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Md()}};function Ab(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Nd(e,t,r){var a;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Qe(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(Qe(1));return r(Nd)(e,t)}if(typeof e!="function")throw new Error(Qe(2));var n=e,o=t,i=[],s=i,u=!1;function c(){s===i&&(s=i.slice())}function l(){if(u)throw new Error(Qe(3));return o}function d(g){if(typeof g!="function")throw new Error(Qe(4));if(u)throw new Error(Qe(5));var y=!0;return c(),s.push(g),function(){if(!!y){if(u)throw new Error(Qe(6));y=!1,c();var C=s.indexOf(g);s.splice(C,1),i=null}}}function f(g){if(!Ab(g))throw new Error(Qe(7));if(typeof g.type=="undefined")throw new Error(Qe(8));if(u)throw new Error(Qe(9));try{u=!0,o=n(o,g)}finally{u=!1}for(var y=i=s,S=0;S<y.length;S++){var C=y[S];C()}return g}function p(g){if(typeof g!="function")throw new Error(Qe(10));n=g,f({type:Di.REPLACE})}function m(){var g,y=d;return g={subscribe:function(C){if(typeof C!="object"||C===null)throw new Error(Qe(11));function R(){C.next&&C.next(l())}R();var P=y(R);return{unsubscribe:P}}},g[Bm]=function(){return this},g}return f({type:Di.INIT}),a={dispatch:f,subscribe:d,getState:l,replaceReducer:p},a[Bm]=m,a}var Pb=Nd;function wb(e){Object.keys(e).forEach(function(t){var r=e[t],a=r(void 0,{type:Di.INIT});if(typeof a=="undefined")throw new Error(Qe(12));if(typeof r(void 0,{type:Di.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Qe(13))})}function Eb(e){for(var t=Object.keys(e),r={},a=0;a<t.length;a++){var n=t[a];typeof e[n]=="function"&&(r[n]=e[n])}var o=Object.keys(r),i,s;try{wb(r)}catch(u){s=u}return function(c,l){if(c===void 0&&(c={}),s)throw s;if(!1)var d;for(var f=!1,p={},m=0;m<o.length;m++){var g=o[m],y=r[g],S=c[g],C=y(S,l);if(typeof C=="undefined"){var R=l&&l.type;throw new Error(Qe(14))}p[g]=C,f=f||C!==S}return f=f||o.length!==Object.keys(c).length,f?p:c}}function jm(e,t){return function(){return t(e.apply(this,arguments))}}function Ib(e,t){if(typeof e=="function")return jm(e,t);if(typeof e!="object"||e===null)throw new Error(Qe(16));var r={};for(var a in e){var n=e[a];typeof n=="function"&&(r[a]=jm(n,t))}return r}function Um(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return a}:t.length===1?t[0]:t.reduce(function(a,n){return function(){return a(n.apply(void 0,arguments))}})}function kb(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){return function(){var n=a.apply(void 0,arguments),o=function(){throw new Error(Qe(15))},i={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(u){return u(i)});return o=Um.apply(void 0,s)(n.dispatch),Qm.default(Qm.default({},n),{},{dispatch:o})}}}kr.__DO_NOT_USE__ActionTypes=Di;kr.applyMiddleware=kb;kr.bindActionCreators=Ib;kr.combineReducers=Eb;kr.compose=Um;kr.createStore=Nd;kr.legacy_createStore=Pb});var Vg=de((AD,Dg)=>{"use strict";function EF(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Dg.exports=IF;function IF(e,t,r){var a=r&&r.stringify||EF,n=1;if(typeof e=="object"&&e!==null){var o=t.length+n;if(o===1)return e;var i=new Array(o);i[0]=a(e);for(var s=1;s<o;s++)i[s]=a(t[s]);return i.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",l=1-n,d=-1,f=e&&e.length||0,p=0;p<f;){if(e.charCodeAt(p)===37&&p+1<f){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(l>=u||t[l]==null)break;d<p&&(c+=e.slice(d,p)),c+=Number(t[l]),d=p+2,p++;break;case 105:if(l>=u||t[l]==null)break;d<p&&(c+=e.slice(d,p)),c+=Math.floor(Number(t[l])),d=p+2,p++;break;case 79:case 111:case 106:if(l>=u||t[l]===void 0)break;d<p&&(c+=e.slice(d,p));var m=typeof t[l];if(m==="string"){c+="'"+t[l]+"'",d=p+2,p++;break}if(m==="function"){c+=t[l].name||"<anonymous>",d=p+2,p++;break}c+=a(t[l]),d=p+2,p++;break;case 115:if(l>=u)break;d<p&&(c+=e.slice(d,p)),c+=String(t[l]),d=p+2,p++;break;case 37:d<p&&(c+=e.slice(d,p)),c+="%",d=p+2,p++,l--;break}++l}++p}return d===-1?e:(d<f&&(c+=e.slice(d)),c)}});var zi=de((PD,ic)=>{"use strict";var Mg=Vg();ic.exports=qr;var $i=$F().console||{},kF={mapHttpRequest:oc,mapHttpResponse:oc,wrapRequestSerializer:rp,wrapResponseSerializer:rp,wrapErrorSerializer:rp,req:oc,res:oc,err:Lg,errWithCause:Lg};function ac(e,t){return e==="silent"?1/0:t.levels.values[e]}var Zd=Symbol("pino.logFuncs"),ep=Symbol("pino.hierarchy"),OF={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Ng(e,t){let r={logger:t,parent:e[ep]};t[ep]=r}function qF(e,t,r){let a={};t.forEach(n=>{a[n]=r[n]?r[n]:$i[n]||$i[OF[n]||"log"]||Hi}),e[Zd]=a}function TF(e,t){return Array.isArray(e)?e.filter(function(a){return a!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function qr(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||$i;e.browser.write&&(e.browser.asObject=!0);let a=e.serializers||{},n=TF(e.browser.serialize,a),o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let i=Object.keys(e.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(i);typeof r=="function"&&s.forEach(function(g){r[g]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let u=e.level||"info",c=Object.create(r);c.log||(c.log=Hi),qF(c,s,r),Ng({},c),Object.defineProperty(c,"levelVal",{get:d}),Object.defineProperty(c,"level",{get:f,set:p});let l={transmit:t,serialize:n,asObject:e.browser.asObject,levels:s,timestamp:jF(e)};c.levels=DF(e),c.level=u,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Hi,c.serializers=a,c._serialize=n,c._stdErrSerialize=o,c.child=m,t&&(c._logEvent=tp());function d(){return ac(this.level,this)}function f(){return this._level}function p(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,Na(this,l,c,"error"),Na(this,l,c,"fatal"),Na(this,l,c,"warn"),Na(this,l,c,"info"),Na(this,l,c,"debug"),Na(this,l,c,"trace"),i.forEach(y=>{Na(this,l,c,y)})}function m(g,y){if(!g)throw new Error("missing bindings for child Pino");y=y||{},n&&g.serializers&&(y.serializers=g.serializers);let S=y.serializers;if(n&&S){var C=Object.assign({},a,S),R=e.browser.serialize===!0?Object.keys(C):n;delete g.serializers,nc([g],R,C,this._stdErrSerialize)}function P(G){this._childLevel=(G._childLevel|0)+1,this.bindings=g,C&&(this.serializers=C,this._serialize=R),t&&(this._logEvent=tp([].concat(G._logEvent.bindings,g)))}P.prototype=this;let Q=new P(this);return Ng(this,Q),Q.level=this.level,Q}return c}function DF(e){let t=e.customLevels||{},r=Object.assign({},qr.levels.values,t),a=Object.assign({},qr.levels.labels,VF(t));return{values:r,labels:a}}function VF(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}qr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};qr.stdSerializers=kF;qr.stdTimeFunctions=Object.assign({},{nullTime:Qg,epochTime:Bg,unixTime:UF,isoTime:_F});function MF(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[ep];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function Na(e,t,r,a){if(e[a]=ac(e.level,r)>ac(a,r)?Hi:r[Zd][a],!t.transmit&&e[a]===Hi)return;e[a]=LF(e,t,r,a);let n=MF(e);n.length!==0&&(e[a]=NF(n,e[a]))}function NF(e,t){return function(){return t.apply(this,[...e,...arguments])}}function LF(e,t,r,a){return function(n){return function(){let i=t.timestamp(),s=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===$i?$i:this;for(var c=0;c<s.length;c++)s[c]=arguments[c];if(t.serialize&&!t.asObject&&nc(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(u,QF(this,a,s,i)):n.apply(u,s),t.transmit){let l=t.transmit.level||e._level,d=r.levels.values[l],f=r.levels.values[a];if(f<d)return;BF(this,{ts:i,methodLevel:a,methodValue:f,transmitLevel:l,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:ac(e._level,r)},s)}}}(e[Zd][a])}function QF(e,t,r,a){e._serialize&&nc(r,e._serialize,e.serializers,e._stdErrSerialize);let n=r.slice(),o=n[0],i={};a&&(i.time=a),i.level=e.levels.values[t];let s=(e._childLevel|0)+1;if(s<1&&(s=1),o!==null&&typeof o=="object"){for(;s--&&typeof n[0]=="object";)Object.assign(i,n.shift());o=n.length?Mg(n.shift(),n):void 0}else typeof o=="string"&&(o=Mg(n.shift(),n));return o!==void 0&&(i.msg=o),i}function nc(e,t,r,a){for(let n in e)if(a&&e[n]instanceof Error)e[n]=qr.stdSerializers.err(e[n]);else if(typeof e[n]=="object"&&!Array.isArray(e[n]))for(let o in e[n])t&&t.indexOf(o)>-1&&o in r&&(e[n][o]=r[o](e[n][o]))}function BF(e,t,r){let a=t.send,n=t.ts,o=t.methodLevel,i=t.methodValue,s=t.val,u=e._logEvent.bindings;nc(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(c){return u.indexOf(c)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=i,a(o,e._logEvent,s),e._logEvent=tp(u)}function tp(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Lg(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function jF(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Qg:Bg}function oc(){return{}}function rp(e){return e}function Hi(){}function Qg(){return!1}function Bg(){return Date.now()}function UF(){return Math.round(Date.now()/1e3)}function _F(){return new Date(Date.now()).toISOString()}function $F(){function e(t){return typeof t!="undefined"&&t}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}ic.exports.default=qr;ic.exports.pino=qr});var $g=de((wD,_g)=>{var HF="[object Object]";function zF(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function GF(e,t){return function(r){return e(t(r))}}var WF=Function.prototype,jg=Object.prototype,Ug=WF.toString,YF=jg.hasOwnProperty,KF=Ug.call(Object),JF=jg.toString,XF=GF(Object.getPrototypeOf,Object);function ZF(e){return!!e&&typeof e=="object"}function eR(e){if(!ZF(e)||JF.call(e)!=HF||zF(e))return!1;var t=XF(e);if(t===null)return!0;var r=YF.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Ug.call(r)==KF}_g.exports=eR});var Hg=de(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.default=iR;var tR=Vi(),rR=$g(),aR=nR(rR);function nR(e){return e&&e.__esModule?e:{default:e}}function oR(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else return Array.from(e)}var ap=function(t){return typeof t=="function"};function iR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function a(){var o=[],i=[],s={getState:function(){return ap(r)?r(o):r},getActions:function(){return o},dispatch:function(c){if(!(0,aR.default)(c))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof c.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(c));o.push(c);for(var l=0;l<i.length;l++)i[l]();return c},clearActions:function(){o=[]},subscribe:function(c){return ap(c)&&i.push(c),function(){var l=i.indexOf(c);l<0||i.splice(l,1)}},replaceReducer:function(c){if(!ap(c))throw new Error("Expected the nextReducer to be a function.")}};return s}var n=tR.applyMiddleware.apply(void 0,oR(e))(a);return n()}}});var dc=de((op,ip)=>{(function(e,t){typeof op=="object"&&typeof ip!="undefined"?ip.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs=t()})(op,function(){"use strict";var e=1e3,t=6e4,r=36e5,a="millisecond",n="second",o="minute",i="hour",s="day",u="week",c="month",l="quarter",d="year",f="date",p="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_){var N=["th","st","nd","rd"],B=_%100;return"["+_+(N[(B-20)%10]||N[B]||N[0])+"]"}},S=function(_,N,B){var Y=String(_);return!Y||Y.length>=N?_:""+Array(N+1-Y.length).join(B)+_},C={s:S,z:function(_){var N=-_.utcOffset(),B=Math.abs(N),Y=Math.floor(B/60),j=B%60;return(N<=0?"+":"-")+S(Y,2,"0")+":"+S(j,2,"0")},m:function _(N,B){if(N.date()<B.date())return-_(B,N);var Y=12*(B.year()-N.year())+(B.month()-N.month()),j=N.clone().add(Y,c),re=B-j<0,ne=N.clone().add(Y+(re?-1:1),c);return+(-(Y+(B-j)/(re?j-ne:ne-j))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:c,y:d,w:u,d:s,D:f,h:i,m:o,s:n,ms:a,Q:l}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},R="en",P={};P[R]=y;var Q="$isDayjsObject",G=function(_){return _ instanceof pe||!(!_||!_[Q])},Z=function _(N,B,Y){var j;if(!N)return R;if(typeof N=="string"){var re=N.toLowerCase();P[re]&&(j=re),B&&(P[re]=B,j=re);var ne=N.split("-");if(!j&&ne.length>1)return _(ne[0])}else{var le=N.name;P[le]=N,j=le}return!Y&&j&&(R=j),j||!Y&&R},$=function(_,N){if(G(_))return _.clone();var B=typeof N=="object"?N:{};return B.date=_,B.args=arguments,new pe(B)},H=C;H.l=Z,H.i=G,H.w=function(_,N){return $(_,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var pe=function(){function _(B){this.$L=Z(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[Q]=!0}var N=_.prototype;return N.parse=function(B){this.$d=function(Y){var j=Y.date,re=Y.utc;if(j===null)return new Date(NaN);if(H.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var ne=j.match(m);if(ne){var le=ne[2]-1||0,be=(ne[7]||"0").substring(0,3);return re?new Date(Date.UTC(ne[1],le,ne[3]||1,ne[4]||0,ne[5]||0,ne[6]||0,be)):new Date(ne[1],le,ne[3]||1,ne[4]||0,ne[5]||0,ne[6]||0,be)}}return new Date(j)}(B),this.init()},N.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},N.$utils=function(){return H},N.isValid=function(){return this.$d.toString()!==p},N.isSame=function(B,Y){var j=$(B);return this.startOf(Y)<=j&&j<=this.endOf(Y)},N.isAfter=function(B,Y){return $(B)<this.startOf(Y)},N.isBefore=function(B,Y){return this.endOf(Y)<$(B)},N.$g=function(B,Y,j){return H.u(B)?this[Y]:this.set(j,B)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(B,Y){var j=this,re=!!H.u(Y)||Y,ne=H.p(B),le=function(wt,Ve){var it=H.w(j.$u?Date.UTC(j.$y,Ve,wt):new Date(j.$y,Ve,wt),j);return re?it:it.endOf(s)},be=function(wt,Ve){return H.w(j.toDate()[wt].apply(j.toDate("s"),(re?[0,0,0,0]:[23,59,59,999]).slice(Ve)),j)},we=this.$W,De=this.$M,Xe=this.$D,Wr="set"+(this.$u?"UTC":"");switch(ne){case d:return re?le(1,0):le(31,11);case c:return re?le(1,De):le(0,De+1);case u:var Lt=this.$locale().weekStart||0,wr=(we<Lt?we+7:we)-Lt;return le(re?Xe-wr:Xe+(6-wr),De);case s:case f:return be(Wr+"Hours",0);case i:return be(Wr+"Minutes",1);case o:return be(Wr+"Seconds",2);case n:return be(Wr+"Milliseconds",3);default:return this.clone()}},N.endOf=function(B){return this.startOf(B,!1)},N.$set=function(B,Y){var j,re=H.p(B),ne="set"+(this.$u?"UTC":""),le=(j={},j[s]=ne+"Date",j[f]=ne+"Date",j[c]=ne+"Month",j[d]=ne+"FullYear",j[i]=ne+"Hours",j[o]=ne+"Minutes",j[n]=ne+"Seconds",j[a]=ne+"Milliseconds",j)[re],be=re===s?this.$D+(Y-this.$W):Y;if(re===c||re===d){var we=this.clone().set(f,1);we.$d[le](be),we.init(),this.$d=we.set(f,Math.min(this.$D,we.daysInMonth())).$d}else le&&this.$d[le](be);return this.init(),this},N.set=function(B,Y){return this.clone().$set(B,Y)},N.get=function(B){return this[H.p(B)]()},N.add=function(B,Y){var j,re=this;B=Number(B);var ne=H.p(Y),le=function(De){var Xe=$(re);return H.w(Xe.date(Xe.date()+Math.round(De*B)),re)};if(ne===c)return this.set(c,this.$M+B);if(ne===d)return this.set(d,this.$y+B);if(ne===s)return le(1);if(ne===u)return le(7);var be=(j={},j[o]=t,j[i]=r,j[n]=e,j)[ne]||1,we=this.$d.getTime()+B*be;return H.w(we,this)},N.subtract=function(B,Y){return this.add(-1*B,Y)},N.format=function(B){var Y=this,j=this.$locale();if(!this.isValid())return j.invalidDate||p;var re=B||"YYYY-MM-DDTHH:mm:ssZ",ne=H.z(this),le=this.$H,be=this.$m,we=this.$M,De=j.weekdays,Xe=j.months,Wr=j.meridiem,Lt=function(Ve,it,Er,Yr){return Ve&&(Ve[it]||Ve(Y,re))||Er[it].slice(0,Yr)},wr=function(Ve){return H.s(le%12||12,Ve,"0")},wt=Wr||function(Ve,it,Er){var Yr=Ve<12?"AM":"PM";return Er?Yr.toLowerCase():Yr};return re.replace(g,function(Ve,it){return it||function(Er){switch(Er){case"YY":return String(Y.$y).slice(-2);case"YYYY":return H.s(Y.$y,4,"0");case"M":return we+1;case"MM":return H.s(we+1,2,"0");case"MMM":return Lt(j.monthsShort,we,Xe,3);case"MMMM":return Lt(Xe,we);case"D":return Y.$D;case"DD":return H.s(Y.$D,2,"0");case"d":return String(Y.$W);case"dd":return Lt(j.weekdaysMin,Y.$W,De,2);case"ddd":return Lt(j.weekdaysShort,Y.$W,De,3);case"dddd":return De[Y.$W];case"H":return String(le);case"HH":return H.s(le,2,"0");case"h":return wr(1);case"hh":return wr(2);case"a":return wt(le,be,!0);case"A":return wt(le,be,!1);case"m":return String(be);case"mm":return H.s(be,2,"0");case"s":return String(Y.$s);case"ss":return H.s(Y.$s,2,"0");case"SSS":return H.s(Y.$ms,3,"0");case"Z":return ne}return null}(Ve)||ne.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(B,Y,j){var re,ne=this,le=H.p(Y),be=$(B),we=(be.utcOffset()-this.utcOffset())*t,De=this-be,Xe=function(){return H.m(ne,be)};switch(le){case d:re=Xe()/12;break;case c:re=Xe();break;case l:re=Xe()/3;break;case u:re=(De-we)/6048e5;break;case s:re=(De-we)/864e5;break;case i:re=De/r;break;case o:re=De/t;break;case n:re=De/e;break;default:re=De}return j?re:H.a(re)},N.daysInMonth=function(){return this.endOf(c).$D},N.$locale=function(){return P[this.$L]},N.locale=function(B,Y){if(!B)return this.$L;var j=this.clone(),re=Z(B,Y,!0);return re&&(j.$L=re),j},N.clone=function(){return H.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},_}(),he=pe.prototype;return $.prototype=he,[["$ms",a],["$s",n],["$m",o],["$H",i],["$W",s],["$M",c],["$y",d],["$D",f]].forEach(function(_){he[_[1]]=function(N){return this.$g(N,_[0],_[1])}}),$.extend=function(_,N){return _.$i||(_(N,pe,$),_.$i=!0),$},$.locale=Z,$.isDayjs=G,$.unix=function(_){return $(1e3*_)},$.en=P[R],$.Ls=P,$.p={},$})});var Kg=de((sp,cp)=>{(function(e,t){typeof sp=="object"&&typeof cp!="undefined"?cp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_timezone=t()})(sp,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,a,n){var o,i=function(l,d,f){f===void 0&&(f={});var p=new Date(l),m=function(g,y){y===void 0&&(y={});var S=y.timeZoneName||"short",C=g+"|"+S,R=t[C];return R||(R=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:S}),t[C]=R),R}(d,f);return m.formatToParts(p)},s=function(l,d){for(var f=i(l,d),p=[],m=0;m<f.length;m+=1){var g=f[m],y=g.type,S=g.value,C=e[y];C>=0&&(p[C]=parseInt(S,10))}var R=p[3],P=R===24?0:R,Q=p[0]+"-"+p[1]+"-"+p[2]+" "+P+":"+p[4]+":"+p[5]+":000",G=+l;return(n.utc(Q).valueOf()-(G-=G%1e3))/6e4},u=a.prototype;u.tz=function(l,d){l===void 0&&(l=o);var f=this.utcOffset(),p=this.toDate(),m=p.toLocaleString("en-US",{timeZone:l}),g=Math.round((p-new Date(m))/1e3/60),y=n(m,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(p.getTimezoneOffset()/15)-g,!0);if(d){var S=y.utcOffset();y=y.add(f-S,"minute")}return y.$x.$timezone=l,y},u.offsetName=function(l){var d=this.$x.$timezone||n.tz.guess(),f=i(this.valueOf(),d,{timeZoneName:l}).find(function(p){return p.type.toLowerCase()==="timezonename"});return f&&f.value};var c=u.startOf;u.startOf=function(l,d){if(!this.$x||!this.$x.$timezone)return c.call(this,l,d);var f=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(f,l,d).tz(this.$x.$timezone,!0)},n.tz=function(l,d,f){var p=f&&d,m=f||d||o,g=s(+n(),m);if(typeof l!="string")return n(l).tz(m);var y=function(P,Q,G){var Z=P-60*Q*1e3,$=s(Z,G);if(Q===$)return[Z,Q];var H=s(Z-=60*($-Q)*1e3,G);return $===H?[Z,$]:[P-60*Math.min($,H)*1e3,Math.max($,H)]}(n.utc(l,p).valueOf(),g,m),S=y[0],C=y[1],R=n(S).utcOffset(C);return R.$x.$timezone=m,R},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(l){o=l}}})});var Jg=de((up,lp)=>{(function(e,t){typeof up=="object"&&typeof lp!="undefined"?lp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_utc=t()})(up,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(a,n,o){var i=n.prototype;o.utc=function(p){var m={date:p,utc:!0,args:arguments};return new n(m)},i.utc=function(p){var m=o(this.toDate(),{locale:this.$L,utc:!0});return p?m.add(this.utcOffset(),e):m},i.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),s.call(this,p)};var u=i.init;i.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else u.call(this)};var c=i.utcOffset;i.utcOffset=function(p,m){var g=this.$utils().u;if(g(p))return this.$u?0:g(this.$offset)?c.call(this):this.$offset;if(typeof p=="string"&&(p=function(R){R===void 0&&(R="");var P=R.match(t);if(!P)return null;var Q=(""+P[0]).match(r)||["-",0,0],G=Q[0],Z=60*+Q[1]+ +Q[2];return Z===0?0:G==="+"?Z:-Z}(p),p===null))return this;var y=Math.abs(p)<=16?60*p:p,S=this;if(m)return S.$offset=y,S.$u=p===0,S;if(p!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(S=this.local().add(y+C,e)).$offset=y,S.$x.$localOffset=C}else S=this.utc();return S};var l=i.format;i.format=function(p){var m=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,m)},i.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(p){return p==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=i.diff;i.diff=function(p,m,g){if(p&&this.$u===p.$u)return f.call(this,p,m,g);var y=this.local(),S=o(p).local();return f.call(y,S,m,g)}}})});var Zg=de((BD,Xg)=>{Xg.exports=fetch});var eh=de(Wi=>{"use strict";var pc=Wi&&Wi.__assign||function(){return pc=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},pc.apply(this,arguments)};Object.defineProperty(Wi,"__esModule",{value:!0});var fR={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function mR(e){var t=pc(pc({},fR),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}Wi.getSanitizedOptions=mR});var th=de(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});function gR(e){var t=Math.random()*e;return Math.round(t)}dp.fullJitter=gR});var rh=de(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});function hR(e){return e}pp.noJitter=hR});var ah=de(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});var SR=th(),yR=rh();function CR(e){switch(e.jitter){case"full":return SR.fullJitter;case"none":default:return yR.noJitter}}fp.JitterFactory=CR});var gp=de(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});var vR=ah(),xR=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=vR.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,a=this.numOfDelayedAttempts,n=t*Math.pow(r,a);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();mp.Delay=xR});var nh=de(Dr=>{"use strict";var bR=Dr&&Dr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),FR=Dr&&Dr.__awaiter||function(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(e,t||[])).next())})},RR=Dr&&Dr.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Dr,"__esModule",{value:!0});var AR=gp(),PR=function(e){bR(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return FR(this,void 0,void 0,function(){return RR(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(AR.Delay);Dr.SkipFirstDelay=PR});var oh=de(Yi=>{"use strict";var wR=Yi&&Yi.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(Yi,"__esModule",{value:!0});var ER=gp(),IR=function(e){wR(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(ER.Delay);Yi.AlwaysDelay=IR});var ih=de(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});var kR=nh(),OR=oh();function qR(e,t){var r=TR(e);return r.setAttemptNumber(t),r}hp.DelayFactory=qR;function TR(e){return e.delayFirstAttempt?new OR.AlwaysDelay(e):new kR.SkipFirstDelay(e)}});var sh=de(La=>{"use strict";var Sp=La&&La.__awaiter||function(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(e,t||[])).next())})},yp=La&&La.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(La,"__esModule",{value:!0});var DR=eh(),VR=ih();function MR(e,t){return t===void 0&&(t={}),Sp(this,void 0,void 0,function(){var r,a;return yp(this,function(n){switch(n.label){case 0:return r=DR.getSanitizedOptions(t),a=new NR(e,r),[4,a.execute()];case 1:return[2,n.sent()]}})})}La.backOff=MR;var NR=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return Sp(this,void 0,void 0,function(){var t,r;return yp(this,function(a){switch(a.label){case 0:if(this.attemptLimitReached)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return a.sent(),[4,this.request()];case 3:return[2,a.sent()];case 4:return t=a.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=a.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return Sp(this,void 0,void 0,function(){var t;return yp(this,function(r){switch(r.label){case 0:return t=VR.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var uh=de((JD,ch)=>{"use strict";function LR(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,a=0;for(let n=0;n<e.length;n++)r<<=6,r|=BR(e[n]),a+=6,a===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=a=0);return a===12?(r>>=4,t+=String.fromCharCode(r)):a===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var QR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function BR(e){let t=QR.indexOf(e);return t<0?void 0:t}ch.exports=LR});var dh=de((XD,lh)=>{"use strict";function jR(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let a=[void 0,void 0,void 0,void 0];a[0]=e.charCodeAt(t)>>2,a[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(a[1]|=e.charCodeAt(t+1)>>4,a[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(a[2]|=e.charCodeAt(t+2)>>6,a[3]=e.charCodeAt(t+2)&63);for(let n=0;n<a.length;n++)typeof a[n]=="undefined"?r+="=":r+=_R(a[n])}return r}var UR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function _R(e){if(e>=0&&e<64)return UR[e]}lh.exports=jR});var Cp=de((ZD,ph)=>{"use strict";var $R=uh(),HR=dh();ph.exports={atob:$R,btoa:HR}});var wh=de((mM,Ph)=>{"use strict";var Fp=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!Fp)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!Fp.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');Ph.exports.AbortController=Fp.AbortController});var ly=de((pf,ff)=>{(function(e,t){typeof pf=="object"&&typeof ff!="undefined"?ff.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_quarterOfYear=t()})(pf,function(){"use strict";var e="month",t="quarter";return function(r,a){var n=a.prototype;n.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var o=n.add;n.add=function(s,u){return s=Number(s),this.$utils().p(u)===t?this.add(3*s,e):o.bind(this)(s,u)};var i=n.startOf;n.startOf=function(s,u){var c=this.$utils(),l=!!c.u(u)||u;if(c.p(s)===t){var d=this.quarter()-1;return l?this.month(3*d).startOf(e).startOf("day"):this.month(3*d+2).endOf(e).endOf("day")}return i.bind(this)(s,u)}}})});var dy=de((mf,gf)=>{(function(e,t){typeof mf=="object"&&typeof gf!="undefined"?gf.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_customParseFormat=t()})(mf,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,o={},i=function(p){return(p=+p)+(p>68?1900:2e3)},s=function(p){return function(m){this[p]=+m}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(m){if(!m||m==="Z")return 0;var g=m.match(/([+-]|\d\d)/g),y=60*g[1]+(+g[2]||0);return y===0?0:g[0]==="+"?-y:y}(p)}],c=function(p){var m=o[p];return m&&(m.indexOf?m:m.s.concat(m.f))},l=function(p,m){var g,y=o.meridiem;if(y){for(var S=1;S<=24;S+=1)if(p.indexOf(y(S,0,m))>-1){g=S>12;break}}else g=p===(m?"pm":"PM");return g},d={A:[n,function(p){this.afternoon=l(p,!1)}],a:[n,function(p){this.afternoon=l(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[a,s("seconds")],ss:[a,s("seconds")],m:[a,s("minutes")],mm:[a,s("minutes")],H:[a,s("hours")],h:[a,s("hours")],HH:[a,s("hours")],hh:[a,s("hours")],D:[a,s("day")],DD:[r,s("day")],Do:[n,function(p){var m=o.ordinal,g=p.match(/\d+/);if(this.day=g[0],m)for(var y=1;y<=31;y+=1)m(y).replace(/\[|\]/g,"")===p&&(this.day=y)}],M:[a,s("month")],MM:[r,s("month")],MMM:[n,function(p){var m=c("months"),g=(c("monthsShort")||m.map(function(y){return y.slice(0,3)})).indexOf(p)+1;if(g<1)throw new Error;this.month=g%12||g}],MMMM:[n,function(p){var m=c("months").indexOf(p)+1;if(m<1)throw new Error;this.month=m%12||m}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(p){this.year=i(p)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function f(p){var m,g;m=p,g=o&&o.formats;for(var y=(p=m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Z,$,H){var pe=H&&H.toUpperCase();return $||g[H]||e[H]||g[pe].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(he,_,N){return _||N.slice(1)})})).match(t),S=y.length,C=0;C<S;C+=1){var R=y[C],P=d[R],Q=P&&P[0],G=P&&P[1];y[C]=G?{regex:Q,parser:G}:R.replace(/^\[|\]$/g,"")}return function(Z){for(var $={},H=0,pe=0;H<S;H+=1){var he=y[H];if(typeof he=="string")pe+=he.length;else{var _=he.regex,N=he.parser,B=Z.slice(pe),Y=_.exec(B)[0];N.call($,Y),Z=Z.replace(Y,"")}}return function(j){var re=j.afternoon;if(re!==void 0){var ne=j.hours;re?ne<12&&(j.hours+=12):ne===12&&(j.hours=0),delete j.afternoon}}($),$}}return function(p,m,g){g.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(i=p.parseTwoDigitYear);var y=m.prototype,S=y.parse;y.parse=function(C){var R=C.date,P=C.utc,Q=C.args;this.$u=P;var G=Q[1];if(typeof G=="string"){var Z=Q[2]===!0,$=Q[3]===!0,H=Z||$,pe=Q[2];$&&(pe=Q[2]),o=this.$locale(),!Z&&pe&&(o=g.Ls[pe]),this.$d=function(B,Y,j){try{if(["x","X"].indexOf(Y)>-1)return new Date((Y==="X"?1e3:1)*B);var re=f(Y)(B),ne=re.year,le=re.month,be=re.day,we=re.hours,De=re.minutes,Xe=re.seconds,Wr=re.milliseconds,Lt=re.zone,wr=new Date,wt=be||(ne||le?1:wr.getDate()),Ve=ne||wr.getFullYear(),it=0;ne&&!le||(it=le>0?le-1:wr.getMonth());var Er=we||0,Yr=De||0,Cd=Xe||0,vd=Wr||0;return Lt?new Date(Date.UTC(Ve,it,wt,Er,Yr,Cd,vd+60*Lt.offset*1e3)):j?new Date(Date.UTC(Ve,it,wt,Er,Yr,Cd,vd)):new Date(Ve,it,wt,Er,Yr,Cd,vd)}catch{return new Date("")}}(R,G,P),this.init(),pe&&pe!==!0&&(this.$L=this.locale(pe).$L),H&&R!=this.format(G)&&(this.$d=new Date("")),o={}}else if(G instanceof Array)for(var he=G.length,_=1;_<=he;_+=1){Q[1]=G[_-1];var N=g.apply(this,Q);if(N.isValid()){this.$d=N.$d,this.$L=N.$L,this.init();break}_===he&&(this.$d=new Date(""))}else S.call(this,C)}}})});var Ly=de((pH,Ny)=>{var dE=/(^|; )Coveo-Pendragon=([^;]*)/;Ny.exports=()=>dE.exec(document.cookie)?.pop()||null});var Ri=()=>global.crypto,Cm=()=>{typeof window=="undefined"&&(Ri()||(global.crypto=ob("crypto")),!Ri().getRandomValues&&Ri().webcrypto&&(global.crypto.getRandomValues=Ri().webcrypto.getRandomValues.bind(Ri().webcrypto)))};var h={};ym(h,{EnhancerArray:()=>tg,MiddlewareArray:()=>eg,SHOULD_AUTOBATCH:()=>Xd,TaskAbortError:()=>Ui,addListener:()=>Ig,autoBatchEnhancer:()=>wF,clearAllListeners:()=>kg,configureStore:()=>$d,createAction:()=>v,createActionCreatorInvariantMiddleware:()=>Hb,createAsyncThunk:()=>ae,createDraftSafeSelector:()=>Or,createEntityAdapter:()=>cF,createImmutableStateInvariantMiddleware:()=>Kb,createListenerMiddleware:()=>FF,createNextState:()=>Xr,createReducer:()=>T,createSelector:()=>Ks,createSerializableStateInvariantMiddleware:()=>Jb,createSlice:()=>rF,current:()=>Pi,findNonSerializableValue:()=>Xs,freeze:()=>Ai,getDefaultMiddleware:()=>Zs,getType:()=>_b,isAction:()=>Bd,isActionCreator:()=>Jm,isAllOf:()=>Gd,isAnyOf:()=>Bi,isAsyncThunkAction:()=>yg,isDraft:()=>$e,isFluxStandardAction:()=>Xm,isFulfilled:()=>Sg,isImmutableDefault:()=>ng,isPending:()=>gg,isPlain:()=>Ud,isPlainObject:()=>Js,isRejected:()=>tc,isRejectedWithValue:()=>hg,miniSerializeError:()=>pg,nanoid:()=>Hd,original:()=>vm,prepareAutoBatched:()=>RF,removeListener:()=>Og,unwrapResult:()=>fg});function st(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!1)var n,o;throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function $e(e){return!!e&&!!e[ye]}function Et(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var n=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===pb}(e)||Array.isArray(e)||!!e[Om]||!!((t=e.constructor)===null||t===void 0?void 0:t[Om])||xd(e)||bd(e))}function vm(e){return $e(e)||st(23,e),e[ye].t}function Va(e,t,r){r===void 0&&(r=!1),xn(e)===0?(r?Object.keys:Fn)(e).forEach(function(a){r&&typeof a=="symbol"||t(a,e[a],e)}):e.forEach(function(a,n){return t(n,a,e)})}function xn(e){var t=e[ye];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:xd(e)?2:bd(e)?3:0}function bn(e,t){return xn(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ib(e,t){return xn(e)===2?e.get(t):e[t]}function xm(e,t,r){var a=xn(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function bm(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function xd(e){return lb&&e instanceof Map}function bd(e){return db&&e instanceof Set}function Kr(e){return e.o||e.t}function Fd(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=qm(e);delete t[ye];for(var r=Fn(t),a=0;a<r.length;a++){var n=r[a],o=t[n];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[n]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[n]})}return Object.create(Object.getPrototypeOf(e),t)}function Ai(e,t){return t===void 0&&(t=!1),Rd(e)||$e(e)||!Et(e)||(xn(e)>1&&(e.set=e.add=e.clear=e.delete=sb),Object.freeze(e),t&&Va(e,function(r,a){return Ai(a,!0)},!0)),e}function sb(){st(2)}function Rd(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Qt(e){var t=Td[e];return t||st(18,e),t}function cb(e,t){Td[e]||(Td[e]=t)}function Ad(){return wi}function Pd(e,t){t&&(Qt("Patches"),e.u=[],e.s=[],e.v=t)}function zs(e){wd(e),e.p.forEach(ub),e.p=null}function wd(e){e===wi&&(wi=e.l)}function Fm(e){return wi={p:[],l:wi,h:e,m:!0,_:0}}function ub(e){var t=e[ye];t.i===0||t.i===1?t.j():t.g=!0}function Ed(e,t){t._=t.p.length;var r=t.p[0],a=e!==void 0&&e!==r;return t.h.O||Qt("ES5").S(t,e,a),a?(r[ye].P&&(zs(t),st(4)),Et(e)&&(e=Gs(t,e),t.l||Ws(t,e)),t.u&&Qt("Patches").M(r[ye].t,e,t.u,t.s)):e=Gs(t,r,[]),zs(t),t.u&&t.v(t.u,t.s),e!==km?e:void 0}function Gs(e,t,r){if(Rd(t))return t;var a=t[ye];if(!a)return Va(t,function(s,u){return Rm(e,a,t,s,u,r)},!0),t;if(a.A!==e)return t;if(!a.P)return Ws(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var n=a.i===4||a.i===5?a.o=Fd(a.k):a.o,o=n,i=!1;a.i===3&&(o=new Set(n),n.clear(),i=!0),Va(o,function(s,u){return Rm(e,a,n,s,u,r,i)}),Ws(e,n,!1),r&&e.u&&Qt("Patches").N(a,r,e.u,e.s)}return a.o}function Rm(e,t,r,a,n,o,i){if($e(n)){var s=Gs(e,n,o&&t&&t.i!==3&&!bn(t.R,a)?o.concat(a):void 0);if(xm(r,a,s),!$e(s))return;e.m=!1}else i&&r.add(n);if(Et(n)&&!Rd(n)){if(!e.h.D&&e._<1)return;Gs(e,n),t&&t.A.l||Ws(e,n)}}function Ws(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Ai(t,r)}function Id(e,t){var r=e[ye];return(r?Kr(r):e)[t]}function Am(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Object.getPrototypeOf(r)}}function Jr(e){e.P||(e.P=!0,e.l&&Jr(e.l))}function kd(e){e.o||(e.o=Fd(e.t))}function Od(e,t,r){var a=xd(t)?Qt("MapSet").F(t,r):bd(t)?Qt("MapSet").T(t,r):e.O?function(n,o){var i=Array.isArray(n),s={i:i?1:0,A:o?o.A:Ad(),P:!1,I:!1,R:{},l:o,t:n,k:null,o:null,j:null,C:!1},u=s,c=Ei;i&&(u=[s],c=Ii);var l=Proxy.revocable(u,c),d=l.revoke,f=l.proxy;return s.k=f,s.j=d,f}(t,r):Qt("ES5").J(t,r);return(r?r.A:Ad()).p.push(a),a}function Pi(e){return $e(e)||st(22,e),function t(r){if(!Et(r))return r;var a,n=r[ye],o=xn(r);if(n){if(!n.P&&(n.i<4||!Qt("ES5").K(n)))return n.t;n.I=!0,a=Pm(r,o),n.I=!1}else a=Pm(r,o);return Va(a,function(i,s){n&&ib(n.t,i)===s||xm(a,i,t(s))}),o===3?new Set(a):a}(e)}function Pm(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Fd(e)}function wm(){function e(i,s){var u=o[i];return u?u.enumerable=s:o[i]=u={configurable:!0,enumerable:s,get:function(){var c=this[ye];return Ei.get(c,i)},set:function(c){var l=this[ye];Ei.set(l,i,c)}},u}function t(i){for(var s=i.length-1;s>=0;s--){var u=i[s][ye];if(!u.P)switch(u.i){case 5:a(u)&&Jr(u);break;case 4:r(u)&&Jr(u)}}}function r(i){for(var s=i.t,u=i.k,c=Fn(u),l=c.length-1;l>=0;l--){var d=c[l];if(d!==ye){var f=s[d];if(f===void 0&&!bn(s,d))return!0;var p=u[d],m=p&&p[ye];if(m?m.t!==f:!bm(p,f))return!0}}var g=!!s[ye];return c.length!==Fn(s).length+(g?0:1)}function a(i){var s=i.k;if(s.length!==i.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var c=0;c<s.length;c++)if(!s.hasOwnProperty(c))return!0;return!1}function n(i){i.g&&st(3,JSON.stringify(Kr(i)))}var o={};cb("ES5",{J:function(i,s){var u=Array.isArray(i),c=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,e(m,!0));return p}var g=qm(f);delete g[ye];for(var y=Fn(g),S=0;S<y.length;S++){var C=y[S];g[C]=e(C,d||!!g[C].enumerable)}return Object.create(Object.getPrototypeOf(f),g)}(u,i),l={i:u?5:4,A:s?s.A:Ad(),P:!1,I:!1,R:{},l:s,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,ye,{value:l,writable:!0}),c},S:function(i,s,u){u?$e(s)&&s[ye].A===i&&t(i.p):(i.u&&function c(l){if(l&&typeof l=="object"){var d=l[ye];if(d){var f=d.t,p=d.k,m=d.R,g=d.i;if(g===4)Va(p,function(P){P!==ye&&(f[P]!==void 0||bn(f,P)?m[P]||c(p[P]):(m[P]=!0,Jr(d)))}),Va(f,function(P){p[P]!==void 0||bn(p,P)||(m[P]=!1,Jr(d))});else if(g===5){if(a(d)&&(Jr(d),m.length=!0),p.length<f.length)for(var y=p.length;y<f.length;y++)m[y]=!1;else for(var S=f.length;S<p.length;S++)m[S]=!0;for(var C=Math.min(p.length,f.length),R=0;R<C;R++)p.hasOwnProperty(R)||(m[R]=!0),m[R]===void 0&&c(p[R])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var Em,wi,qd=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",lb=typeof Map!="undefined",db=typeof Set!="undefined",Im=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",km=qd?Symbol.for("immer-nothing"):((Em={})["immer-nothing"]=!0,Em),Om=qd?Symbol.for("immer-draftable"):"__$immer_draftable",ye=qd?Symbol.for("immer-state"):"__$immer_state",KT=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var pb=""+Object.prototype.constructor,Fn=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,qm=Object.getOwnPropertyDescriptors||function(e){var t={};return Fn(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Td={},Ei={get:function(e,t){if(t===ye)return e;var r=Kr(e);if(!bn(r,t))return function(n,o,i){var s,u=Am(o,i);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(n.k):void 0}(e,r,t);var a=r[t];return e.I||!Et(a)?a:a===Id(e.t,t)?(kd(e),e.o[t]=Od(e.A.h,a,e)):a},has:function(e,t){return t in Kr(e)},ownKeys:function(e){return Reflect.ownKeys(Kr(e))},set:function(e,t,r){var a=Am(Kr(e),t);if(a==null?void 0:a.set)return a.set.call(e.k,r),!0;if(!e.P){var n=Id(Kr(e),t),o=n==null?void 0:n[ye];if(o&&o.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(bm(r,n)&&(r!==void 0||bn(e.t,t)))return!0;kd(e),Jr(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return Id(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,kd(e),Jr(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Kr(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty:function(){st(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){st(12)}},Ii={};Va(Ei,function(e,t){Ii[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ii.deleteProperty=function(e,t){return Ii.set.call(this,e,t,void 0)},Ii.set=function(e,t,r){return Ei.set.call(this,e[0],t,r,e[0])};var fb=function(){function e(r){var a=this;this.O=Im,this.D=!0,this.produce=function(n,o,i){if(typeof n=="function"&&typeof o!="function"){var s=o;o=n;var u=a;return function(g){var y=this;g===void 0&&(g=s);for(var S=arguments.length,C=Array(S>1?S-1:0),R=1;R<S;R++)C[R-1]=arguments[R];return u.produce(g,function(P){var Q;return(Q=o).call.apply(Q,[y,P].concat(C))})}}var c;if(typeof o!="function"&&st(6),i!==void 0&&typeof i!="function"&&st(7),Et(n)){var l=Fm(a),d=Od(a,n,void 0),f=!0;try{c=o(d),f=!1}finally{f?zs(l):wd(l)}return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(g){return Pd(l,i),Ed(g,l)},function(g){throw zs(l),g}):(Pd(l,i),Ed(c,l))}if(!n||typeof n!="object"){if((c=o(n))===void 0&&(c=n),c===km&&(c=void 0),a.D&&Ai(c,!0),i){var p=[],m=[];Qt("Patches").M(n,c,p,m),i(p,m)}return c}st(21,n)},this.produceWithPatches=function(n,o){if(typeof n=="function")return function(c){for(var l=arguments.length,d=Array(l>1?l-1:0),f=1;f<l;f++)d[f-1]=arguments[f];return a.produceWithPatches(c,function(p){return n.apply(void 0,[p].concat(d))})};var i,s,u=a.produce(n,o,function(c,l){i=c,s=l});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(c){return[c,i,s]}):[u,i,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Et(r)||st(8),$e(r)&&(r=Pi(r));var a=Fm(this),n=Od(this,r,void 0);return n[ye].C=!0,wd(a),n},t.finishDraft=function(r,a){var n=r&&r[ye],o=n.A;return Pd(o,a),Ed(void 0,o)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!Im&&st(20),this.O=r},t.applyPatches=function(r,a){var n;for(n=a.length-1;n>=0;n--){var o=a[n];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}n>-1&&(a=a.slice(n+1));var i=Qt("Patches").$;return $e(r)?i(r,a):this.produce(r,function(s){return i(s,a)})},e}(),ct=new fb,mb=ct.produce,JT=ct.produceWithPatches.bind(ct),XT=ct.setAutoFreeze.bind(ct),ZT=ct.setUseProxies.bind(ct),eD=ct.applyPatches.bind(ct),tD=ct.createDraft.bind(ct),rD=ct.finishDraft.bind(ct),Xr=mb;A(h,Ee(Vi()));var Ys="NOT_FOUND";function Ob(e){var t;return{get:function(a){return t&&e(t.key,a)?t.value:Ys},put:function(a,n){t={key:a,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function qb(e,t){var r=[];function a(s){var u=r.findIndex(function(l){return t(s,l.key)});if(u>-1){var c=r[u];return u>0&&(r.splice(u,1),r.unshift(c)),c.value}return Ys}function n(s,u){a(s)===Ys&&(r.unshift({key:s,value:u}),r.length>e&&r.pop())}function o(){return r}function i(){r=[]}return{get:a,put:n,getEntries:o,clear:i}}var _m=function(t,r){return t===r};function Tb(e){return function(r,a){if(r===null||a===null||r.length!==a.length)return!1;for(var n=r.length,o=0;o<n;o++)if(!e(r[o],a[o]))return!1;return!0}}function $m(e,t){var r=typeof t=="object"?t:{equalityCheck:t},a=r.equalityCheck,n=a===void 0?_m:a,o=r.maxSize,i=o===void 0?1:o,s=r.resultEqualityCheck,u=Tb(n),c=i===1?Ob(u):qb(i,u);function l(){var d=c.get(arguments);if(d===Ys){if(d=e.apply(null,arguments),s){var f=c.getEntries(),p=f.find(function(m){return s(m.value,d)});p&&(d=p.value)}c.put(arguments,d)}return d}return l.clearCache=function(){return c.clear()},l}function Db(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(a){return typeof a=="function"})){var r=t.map(function(a){return typeof a=="function"?"function "+(a.name||"unnamed")+"()":typeof a}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}function Vb(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var n=function(){for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];var c=0,l,d={memoizeOptions:void 0},f=s.pop();if(typeof f=="object"&&(d=f,f=s.pop()),typeof f!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof f+"]");var p=d,m=p.memoizeOptions,g=m===void 0?r:m,y=Array.isArray(g)?g:[g],S=Db(s),C=e.apply(void 0,[function(){return c++,f.apply(null,arguments)}].concat(y)),R=e(function(){for(var Q=[],G=S.length,Z=0;Z<G;Z++)Q.push(S[Z].apply(null,arguments));return l=C.apply(null,Q),l});return Object.assign(R,{resultFunc:f,memoizedResultFunc:C,dependencies:S,lastResult:function(){return l},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),R};return n}var Ks=Vb($m);var ea=Ee(Vi()),Qd=Ee(Vi());function Hm(e){var t=function(a){var n=a.dispatch,o=a.getState;return function(i){return function(s){return typeof s=="function"?s(n,o,e):i(s)}}};return t}var zm=Hm();zm.withExtraArgument=Hm;var Mi=zm;var Gm=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),Ni=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Zr=function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e},Mb=Object.defineProperty,Nb=Object.defineProperties,Lb=Object.getOwnPropertyDescriptors,Wm=Object.getOwnPropertySymbols,Qb=Object.prototype.hasOwnProperty,Bb=Object.prototype.propertyIsEnumerable,Ym=function(e,t,r){return t in e?Mb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Ze=function(e,t){for(var r in t||(t={}))Qb.call(t,r)&&Ym(e,r,t[r]);if(Wm)for(var a=0,n=Wm(t);a<n.length;a++){var r=n[a];Bb.call(t,r)&&Ym(e,r,t[r])}return e},Ld=function(e,t){return Nb(e,Lb(t))},Li=function(e,t,r){return new Promise(function(a,n){var o=function(u){try{s(r.next(u))}catch(c){n(c)}},i=function(u){try{s(r.throw(u))}catch(c){n(c)}},s=function(u){return u.done?a(u.value):Promise.resolve(u.value).then(o,i)};s((r=r.apply(e,t)).next())})},Or=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ks.apply(void 0,e),a=function(n){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return r.apply(void 0,Zr([$e(n)?Pi(n):n],o))};return a},jb=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Qd.compose:Qd.compose.apply(null,arguments)},CD=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}};function Js(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var Km=function(e){return e&&typeof e.match=="function"};function v(e,t){function r(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(t){var o=t.apply(void 0,a);if(!o)throw new Error("prepareAction did not return an object");return Ze(Ze({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:a[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(a){return a.type===e},r}function Bd(e){return Js(e)&&"type"in e}function Jm(e){return typeof e=="function"&&"type"in e&&Km(e)}function Xm(e){return Bd(e)&&typeof e.type=="string"&&Object.keys(e).every(Ub)}function Ub(e){return["type","payload","error","meta"].indexOf(e)>-1}function _b(e){return""+e}function $b(e){var t=e?(""+e).split("/"):[],r=t[t.length-1]||"actionCreator";return'Detected an action creator with type "'+(e||"unknown")+`" being dispatched. 
Make sure you're calling the action creator before dispatching, i.e. \`dispatch(`+r+"())` instead of `dispatch("+r+")`. This is necessary even if the action has no payload."}function Hb(e){return e===void 0&&(e={}),function(){return function(a){return function(n){return a(n)}}};var t=e.isActionCreator,r=t===void 0?Jm:t;return function(){return function(a){return function(n){return r(n)&&console.warn($b(n.type)),a(n)}}}}function Zm(e,t){var r=0;return{measureTime:function(a){var n=Date.now();try{return a()}finally{var o=Date.now();r+=o-n}},warnIfExceeded:function(){r>e&&console.warn(t+" took "+r+"ms, which is more than the warning threshold of "+e+`ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var eg=function(e){Gm(t,e);function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Zr([void 0],r[0].concat(this)))):new(t.bind.apply(t,Zr([void 0],r.concat(this))))},t}(Array),tg=function(e){Gm(t,e);function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Zr([void 0],r[0].concat(this)))):new(t.bind.apply(t,Zr([void 0],r.concat(this))))},t}(Array);function jd(e){return Et(e)?Xr(e,function(){}):e}var zb=!0,rg="Invariant failed";function ag(e,t){if(!e)throw zb?new Error(rg):new Error(rg+": "+(t||""))}function Gb(e,t,r,a){return JSON.stringify(e,Wb(t,a),r)}function Wb(e,t){var r=[],a=[];return t||(t=function(n,o){return r[0]===o?"[Circular ~]":"[Circular ~."+a.slice(0,r.indexOf(o)).join(".")+"]"}),function(n,o){if(r.length>0){var i=r.indexOf(this);~i?r.splice(i+1):r.push(this),~i?a.splice(i,1/0,n):a.push(n),~r.indexOf(o)&&(o=t.call(this,n,o))}else r.push(o);return e==null?o:e.call(this,n,o)}}function ng(e){return typeof e!="object"||e==null||Object.isFrozen(e)}function Yb(e,t,r){var a=og(e,t,r);return{detectMutations:function(){return ig(e,t,a,r)}}}function og(e,t,r,a,n){t===void 0&&(t=[]),a===void 0&&(a=""),n===void 0&&(n=new Set);var o={value:r};if(!e(r)&&!n.has(r)){n.add(r),o.children={};for(var i in r){var s=a?a+"."+i:i;t.length&&t.indexOf(s)!==-1||(o.children[i]=og(e,t,r[i],s))}}return o}function ig(e,t,r,a,n,o){t===void 0&&(t=[]),n===void 0&&(n=!1),o===void 0&&(o="");var i=r?r.value:void 0,s=i===a;if(n&&!s&&!Number.isNaN(a))return{wasMutated:!0,path:o};if(e(i)||e(a))return{wasMutated:!1};var u={};for(var c in r.children)u[c]=!0;for(var c in a)u[c]=!0;var l=t.length>0,d=function(p){var m=o?o+"."+p:p;if(l){var g=t.some(function(S){return S instanceof RegExp?S.test(m):m===S});if(g)return"continue"}var y=ig(e,t,r.children[p],a[p],s,m);if(y.wasMutated)return{value:y}};for(var c in u){var f=d(c);if(typeof f=="object")return f.value}return{wasMutated:!1}}function Kb(e){return e===void 0&&(e={}),function(){return function(u){return function(c){return u(c)}}};var t=e.isImmutable,r=t===void 0?ng:t,a=e.ignoredPaths,n=e.warnAfter,o=n===void 0?32:n,i=e.ignore;a=a||i;var s=Yb.bind(null,r,a);return function(u){var c=u.getState,l=c(),d=s(l),f;return function(p){return function(m){var g=Zm(o,"ImmutableStateInvariantMiddleware");g.measureTime(function(){l=c(),f=d.detectMutations(),d=s(l),ag(!f.wasMutated,"A state mutation was detected between dispatches, in the path '"+(f.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")});var y=p(m);return g.measureTime(function(){l=c(),f=d.detectMutations(),d=s(l),f.wasMutated&&ag(!f.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(f.path||"")+". Take a look at the reducer(s) handling the action "+Gb(m)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}),g.warnIfExceeded(),y}}}}function Ud(e){var t=typeof e;return e==null||t==="string"||t==="boolean"||t==="number"||Array.isArray(e)||Js(e)}function Xs(e,t,r,a,n,o){t===void 0&&(t=""),r===void 0&&(r=Ud),n===void 0&&(n=[]);var i;if(!r(e))return{keyPath:t||"<root>",value:e};if(typeof e!="object"||e===null||(o==null?void 0:o.has(e)))return!1;for(var s=a!=null?a(e):Object.entries(e),u=n.length>0,c=function(y,S){var C=t?t+"."+y:y;if(u){var R=n.some(function(P){return P instanceof RegExp?P.test(C):C===P});if(R)return"continue"}if(!r(S))return{value:{keyPath:C,value:S}};if(typeof S=="object"&&(i=Xs(S,C,r,a,n,o),i))return{value:i}},l=0,d=s;l<d.length;l++){var f=d[l],p=f[0],m=f[1],g=c(p,m);if(typeof g=="object")return g.value}return o&&sg(e)&&o.add(e),!1}function sg(e){if(!Object.isFrozen(e))return!1;for(var t=0,r=Object.values(e);t<r.length;t++){var a=r[t];if(!(typeof a!="object"||a===null)&&!sg(a))return!1}return!0}function Jb(e){return e===void 0&&(e={}),function(){return function(R){return function(P){return R(P)}}};var t=e.isSerializable,r=t===void 0?Ud:t,a=e.getEntries,n=e.ignoredActions,o=n===void 0?[]:n,i=e.ignoredActionPaths,s=i===void 0?["meta.arg","meta.baseQueryMeta"]:i,u=e.ignoredPaths,c=u===void 0?[]:u,l=e.warnAfter,d=l===void 0?32:l,f=e.ignoreState,p=f===void 0?!1:f,m=e.ignoreActions,g=m===void 0?!1:m,y=e.disableCache,S=y===void 0?!1:y,C=!S&&WeakSet?new WeakSet:void 0;return function(R){return function(P){return function(Q){var G=P(Q),Z=Zm(d,"SerializableStateInvariantMiddleware");return!g&&!(o.length&&o.indexOf(Q.type)!==-1)&&Z.measureTime(function(){var $=Xs(Q,"",r,a,s,C);if($){var H=$.keyPath,pe=$.value;console.error("A non-serializable value was detected in an action, in the path: `"+H+"`. Value:",pe,`
Take a look at the logic that dispatched this action: `,Q,`
(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)`,`
(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)`)}}),p||(Z.measureTime(function(){var $=R.getState(),H=Xs($,"",r,a,c,C);if(H){var pe=H.keyPath,he=H.value;console.error("A non-serializable value was detected in the state, in the path: `"+pe+"`. Value:",he,`
Take a look at the reducer(s) handling this action type: `+Q.type+`.
(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`)}}),Z.warnIfExceeded()),G}}}}function Xb(e){return typeof e=="boolean"}function Zb(){return function(t){return Zs(t)}}function Zs(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t,a=e.immutableCheck,n=a===void 0?!0:a,o=e.serializableCheck,i=o===void 0?!0:o,s=e.actionCreatorCheck,u=s===void 0?!0:s,c=new eg;if(r&&(Xb(r)?c.push(Mi):c.push(Mi.withExtraArgument(r.extraArgument))),!1){if(n)var l;if(i)var d;if(u)var f}return c}var _d=!0;function $d(e){var t=Zb(),r=e||{},a=r.reducer,n=a===void 0?void 0:a,o=r.middleware,i=o===void 0?t():o,s=r.devTools,u=s===void 0?!0:s,c=r.preloadedState,l=c===void 0?void 0:c,d=r.enhancers,f=d===void 0?void 0:d,p;if(typeof n=="function")p=n;else if(Js(n))p=(0,ea.combineReducers)(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=i;if(typeof m=="function"&&(m=m(t),!_d&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!_d&&m.some(function(P){return typeof P!="function"}))throw new Error("each middleware provided to configureStore must be a function");var g=ea.applyMiddleware.apply(void 0,m),y=ea.compose;u&&(y=jb(Ze({trace:!_d},typeof u=="object"&&u)));var S=new tg(g),C=S;Array.isArray(f)?C=Zr([g],f):typeof f=="function"&&(C=f(S));var R=y.apply(void 0,C);return(0,ea.createStore)(p,l,R)}function cg(e){var t={},r=[],a,n={addCase:function(o,i){var s=typeof o=="string"?o:o.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[s]=i,n},addMatcher:function(o,i){return r.push({matcher:o,reducer:i}),n},addDefaultCase:function(o){return a=o,n}};return e(n),[t,r,a]}function eF(e){return typeof e=="function"}function T(e,t,r,a){r===void 0&&(r=[]);var n=typeof t=="function"?cg(t):[t,r,a],o=n[0],i=n[1],s=n[2],u;if(eF(e))u=function(){return jd(e())};else{var c=jd(e);u=function(){return c}}function l(d,f){d===void 0&&(d=u());var p=Zr([o[f.type]],i.filter(function(m){var g=m.matcher;return g(f)}).map(function(m){var g=m.reducer;return g}));return p.filter(function(m){return!!m}).length===0&&(p=[s]),p.reduce(function(m,g){if(g)if($e(m)){var y=m,S=g(y,f);return S===void 0?m:S}else{if(Et(m))return Xr(m,function(C){return g(C,f)});var S=g(m,f);if(S===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}return m},d)}return l.getInitialState=u,l}function tF(e,t){return e+"/"+t}function rF(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:jd(e.initialState),a=e.reducers||{},n=Object.keys(a),o={},i={},s={};n.forEach(function(l){var d=a[l],f=tF(t,l),p,m;"reducer"in d?(p=d.reducer,m=d.prepare):p=d,o[l]=p,i[f]=p,s[l]=m?v(f,m):v(f)});function u(){var l=typeof e.extraReducers=="function"?cg(e.extraReducers):[e.extraReducers],d=l[0],f=d===void 0?{}:d,p=l[1],m=p===void 0?[]:p,g=l[2],y=g===void 0?void 0:g,S=Ze(Ze({},f),i);return T(r,function(C){for(var R in S)C.addCase(R,S[R]);for(var P=0,Q=m;P<Q.length;P++){var G=Q[P];C.addMatcher(G.matcher,G.reducer)}y&&C.addDefaultCase(y)})}var c;return{name:t,reducer:function(l,d){return c||(c=u()),c(l,d)},actions:s,caseReducers:o,getInitialState:function(){return c||(c=u()),c.getInitialState()}}}function aF(){return{ids:[],entities:{}}}function nF(){function e(t){return t===void 0&&(t={}),Object.assign(aF(),t)}return{getInitialState:e}}function oF(){function e(t){var r=function(c){return c.ids},a=function(c){return c.entities},n=Or(r,a,function(c,l){return c.map(function(d){return l[d]})}),o=function(c,l){return l},i=function(c,l){return c[l]},s=Or(r,function(c){return c.length});if(!t)return{selectIds:r,selectEntities:a,selectAll:n,selectTotal:s,selectById:Or(a,o,i)};var u=Or(t,a);return{selectIds:Or(t,r),selectEntities:u,selectAll:Or(t,n),selectTotal:Or(t,s),selectById:Or(u,o,i)}}return{getSelectors:e}}function iF(e){var t=Ae(function(r,a){return e(a)});return function(a){return t(a,void 0)}}function Ae(e){return function(r,a){function n(i){return Xm(i)}var o=function(i){n(a)?e(a.payload,i):e(a,i)};return $e(r)?(o(r),r):Xr(r,o)}}function Qi(e,t){var r=t(e);return r}function Ma(e){return Array.isArray(e)||(e=Object.values(e)),e}function ug(e,t,r){e=Ma(e);for(var a=[],n=[],o=0,i=e;o<i.length;o++){var s=i[o],u=Qi(s,t);u in r.entities?n.push({id:u,changes:s}):a.push(s)}return[a,n]}function lg(e){function t(m,g){var y=Qi(m,e);y in g.entities||(g.ids.push(y),g.entities[y]=m)}function r(m,g){m=Ma(m);for(var y=0,S=m;y<S.length;y++){var C=S[y];t(C,g)}}function a(m,g){var y=Qi(m,e);y in g.entities||g.ids.push(y),g.entities[y]=m}function n(m,g){m=Ma(m);for(var y=0,S=m;y<S.length;y++){var C=S[y];a(C,g)}}function o(m,g){m=Ma(m),g.ids=[],g.entities={},r(m,g)}function i(m,g){return s([m],g)}function s(m,g){var y=!1;m.forEach(function(S){S in g.entities&&(delete g.entities[S],y=!0)}),y&&(g.ids=g.ids.filter(function(S){return S in g.entities}))}function u(m){Object.assign(m,{ids:[],entities:{}})}function c(m,g,y){var S=y.entities[g.id],C=Object.assign({},S,g.changes),R=Qi(C,e),P=R!==g.id;return P&&(m[g.id]=R,delete y.entities[g.id]),y.entities[R]=C,P}function l(m,g){return d([m],g)}function d(m,g){var y={},S={};m.forEach(function(P){P.id in g.entities&&(S[P.id]={id:P.id,changes:Ze(Ze({},S[P.id]?S[P.id].changes:null),P.changes)})}),m=Object.values(S);var C=m.length>0;if(C){var R=m.filter(function(P){return c(y,P,g)}).length>0;R&&(g.ids=Object.keys(g.entities))}}function f(m,g){return p([m],g)}function p(m,g){var y=ug(m,e,g),S=y[0],C=y[1];d(C,g),r(S,g)}return{removeAll:iF(u),addOne:Ae(t),addMany:Ae(r),setOne:Ae(a),setMany:Ae(n),setAll:Ae(o),updateOne:Ae(l),updateMany:Ae(d),upsertOne:Ae(f),upsertMany:Ae(p),removeOne:Ae(i),removeMany:Ae(s)}}function sF(e,t){var r=lg(e),a=r.removeOne,n=r.removeMany,o=r.removeAll;function i(C,R){return s([C],R)}function s(C,R){C=Ma(C);var P=C.filter(function(Q){return!(Qi(Q,e)in R.entities)});P.length!==0&&y(P,R)}function u(C,R){return c([C],R)}function c(C,R){C=Ma(C),C.length!==0&&y(C,R)}function l(C,R){C=Ma(C),R.entities={},R.ids=[],s(C,R)}function d(C,R){return f([C],R)}function f(C,R){for(var P=!1,Q=0,G=C;Q<G.length;Q++){var Z=G[Q],$=R.entities[Z.id];if(!!$){P=!0,Object.assign($,Z.changes);var H=e($);Z.id!==H&&(delete R.entities[Z.id],R.entities[H]=$)}}P&&S(R)}function p(C,R){return m([C],R)}function m(C,R){var P=ug(C,e,R),Q=P[0],G=P[1];f(G,R),s(Q,R)}function g(C,R){if(C.length!==R.length)return!1;for(var P=0;P<C.length&&P<R.length;P++)if(C[P]!==R[P])return!1;return!0}function y(C,R){C.forEach(function(P){R.entities[e(P)]=P}),S(R)}function S(C){var R=Object.values(C.entities);R.sort(t);var P=R.map(e),Q=C.ids;g(Q,P)||(C.ids=P)}return{removeOne:a,removeMany:n,removeAll:o,addOne:Ae(i),updateOne:Ae(d),upsertOne:Ae(p),setOne:Ae(u),setMany:Ae(c),setAll:Ae(l),addMany:Ae(s),updateMany:Ae(f),upsertMany:Ae(m)}}function cF(e){e===void 0&&(e={});var t=Ze({sortComparer:!1,selectId:function(s){return s.id}},e),r=t.selectId,a=t.sortComparer,n=nF(),o=oF(),i=a?sF(r,a):lg(r);return Ze(Ze(Ze({selectId:r,sortComparer:a},n),o),i)}var uF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Hd=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=uF[Math.random()*64|0];return t},lF=["name","message","stack","code"],zd=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),dg=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),pg=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,a=lF;r<a.length;r++){var n=a[r];typeof e[n]=="string"&&(t[n]=e[n])}return t}return{message:String(e)}},ae=function(){function e(t,r,a){var n=v(t+"/fulfilled",function(l,d,f,p){return{payload:l,meta:Ld(Ze({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),o=v(t+"/pending",function(l,d,f){return{payload:void 0,meta:Ld(Ze({},f||{}),{arg:d,requestId:l,requestStatus:"pending"})}}),i=v(t+"/rejected",function(l,d,f,p,m){return{payload:p,error:(a&&a.serializeError||pg)(l||"Rejected"),meta:Ld(Ze({},m||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=!1,u=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function c(l){return function(d,f,p){var m=(a==null?void 0:a.idGenerator)?a.idGenerator(l):Hd(),g=new u,y,S=!1;function C(P){y=P,g.abort()}var R=function(){return Li(this,null,function(){var P,Q,G,Z,$,H,pe;return Ni(this,function(he){switch(he.label){case 0:return he.trys.push([0,4,,5]),Z=(P=a==null?void 0:a.condition)==null?void 0:P.call(a,l,{getState:f,extra:p}),dF(Z)?[4,Z]:[3,2];case 1:Z=he.sent(),he.label=2;case 2:if(Z===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=!0,$=new Promise(function(_,N){return g.signal.addEventListener("abort",function(){return N({name:"AbortError",message:y||"Aborted"})})}),d(o(m,l,(Q=a==null?void 0:a.getPendingMeta)==null?void 0:Q.call(a,{requestId:m,arg:l},{getState:f,extra:p}))),[4,Promise.race([$,Promise.resolve(r(l,{dispatch:d,getState:f,extra:p,requestId:m,signal:g.signal,abort:C,rejectWithValue:function(_,N){return new zd(_,N)},fulfillWithValue:function(_,N){return new dg(_,N)}})).then(function(_){if(_ instanceof zd)throw _;return _ instanceof dg?n(_.payload,m,l,_.meta):n(_,m,l)})])];case 3:return G=he.sent(),[3,5];case 4:return H=he.sent(),G=H instanceof zd?i(null,m,l,H.payload,H.meta):i(H,m,l),[3,5];case 5:return pe=a&&!a.dispatchConditionRejection&&i.match(G)&&G.meta.condition,pe||d(G),[2,G]}})})}();return Object.assign(R,{abort:C,requestId:m,arg:l,unwrap:function(){return R.then(fg)}})}}return Object.assign(c,{pending:o,rejected:i,fulfilled:n,typePrefix:t})}return e.withTypes=function(){return e},e}();function fg(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function dF(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var mg=function(e,t){return Km(e)?e.match(t):e(t)};function Bi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.some(function(a){return mg(a,r)})}}function Gd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.every(function(a){return mg(a,r)})}}function ec(e,t){if(!e||!e.meta)return!1;var r=typeof e.meta.requestId=="string",a=t.indexOf(e.meta.requestStatus)>-1;return r&&a}function ji(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function gg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return ec(r,["pending"])}:ji(e)?function(r){var a=e.map(function(o){return o.pending}),n=Bi.apply(void 0,a);return n(r)}:gg()(e[0])}function tc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return ec(r,["rejected"])}:ji(e)?function(r){var a=e.map(function(o){return o.rejected}),n=Bi.apply(void 0,a);return n(r)}:tc()(e[0])}function hg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(a){return a&&a.meta&&a.meta.rejectedWithValue};return e.length===0?function(a){var n=Gd(tc.apply(void 0,e),r);return n(a)}:ji(e)?function(a){var n=Gd(tc.apply(void 0,e),r);return n(a)}:hg()(e[0])}function Sg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return ec(r,["fulfilled"])}:ji(e)?function(r){var a=e.map(function(o){return o.fulfilled}),n=Bi.apply(void 0,a);return n(r)}:Sg()(e[0])}function yg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return ec(r,["pending","fulfilled","rejected"])}:ji(e)?function(r){for(var a=[],n=0,o=e;n<o.length;n++){var i=o[n];a.push(i.pending,i.rejected,i.fulfilled)}var s=Bi.apply(void 0,a);return s(r)}:yg()(e[0])}var Wd=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Yd=function(){},Cg=function(e,t){return t===void 0&&(t=Yd),e.catch(t),e},vg=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Rn=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},pF="task",xg="listener",bg="completed",Kd="cancelled",fF="task-"+Kd,mF="task-"+bg,Fg=xg+"-"+Kd,gF=xg+"-"+bg,Ui=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=pF+" "+Kd+" (reason: "+t+")"}return e}(),An=function(e){if(e.aborted)throw new Ui(e.reason)};function Rg(e,t){var r=Yd;return new Promise(function(a,n){var o=function(){return n(new Ui(e.reason))};if(e.aborted){o();return}r=vg(e,o),t.finally(function(){return r()}).then(a,n)}).finally(function(){r=Yd})}var hF=function(e,t){return Li(void 0,null,function(){var r,a;return Ni(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return n.sent(),[4,e()];case 2:return r=n.sent(),[2,{status:"ok",value:r}];case 3:return a=n.sent(),[2,{status:a instanceof Ui?"cancelled":"rejected",error:a}];case 4:return t==null||t(),[7];case 5:return[2]}})})},rc=function(e){return function(t){return Cg(Rg(e,t).then(function(r){return An(e),r}))}},Ag=function(e){var t=rc(e);return function(r){return t(new Promise(function(a){return setTimeout(a,r)}))}},SF=Object.assign,Pg={},_i="listenerMiddleware",yF=function(e,t){var r=function(a){return vg(e,function(){return Rn(a,e.reason)})};return function(a,n){Wd(a,"taskExecutor");var o=new AbortController;r(o);var i=hF(function(){return Li(void 0,null,function(){var s;return Ni(this,function(u){switch(u.label){case 0:return An(e),An(o.signal),[4,a({pause:rc(o.signal),delay:Ag(o.signal),signal:o.signal})];case 1:return s=u.sent(),An(o.signal),[2,s]}})})},function(){return Rn(o,mF)});return(n==null?void 0:n.autoJoin)&&t.push(i),{result:rc(e)(i),cancel:function(){Rn(o,fF)}}}},CF=function(e,t){var r=function(a,n){return Li(void 0,null,function(){var o,i,s,u;return Ni(this,function(c){switch(c.label){case 0:An(t),o=function(){},i=new Promise(function(l,d){var f=e({predicate:a,effect:function(p,m){m.unsubscribe(),l([p,m.getState(),m.getOriginalState()])}});o=function(){f(),d()}}),s=[i],n!=null&&s.push(new Promise(function(l){return setTimeout(l,n,null)})),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,Rg(t,Promise.race(s))];case 2:return u=c.sent(),An(t),[2,u];case 3:return o(),[7];case 4:return[2]}})})};return function(a,n){return Cg(r(a,n))}},wg=function(e){var t=e.type,r=e.actionCreator,a=e.matcher,n=e.predicate,o=e.effect;if(t)n=v(t).match;else if(r)t=r.type,n=r.match;else if(a)n=a;else if(!n)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Wd(o,"options.listener"),{predicate:n,type:t,effect:o}},vF=function(e){var t=wg(e),r=t.type,a=t.predicate,n=t.effect,o=Hd(),i={id:o,effect:n,type:r,predicate:a,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return i},Jd=function(e){e.pending.forEach(function(t){Rn(t,Fg)})},xF=function(e){return function(){e.forEach(Jd),e.clear()}},Eg=function(e,t,r){try{e(t,r)}catch(a){setTimeout(function(){throw a},0)}},Ig=v(_i+"/add"),kg=v(_i+"/removeAll"),Og=v(_i+"/remove"),bF=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Zr([_i+"/error"],e))};function FF(e){var t=this;e===void 0&&(e={});var r=new Map,a=e.extra,n=e.onError,o=n===void 0?bF:n;Wd(o,"onError");var i=function(p){return p.unsubscribe=function(){return r.delete(p.id)},r.set(p.id,p),function(m){p.unsubscribe(),(m==null?void 0:m.cancelActive)&&Jd(p)}},s=function(p){for(var m=0,g=Array.from(r.values());m<g.length;m++){var y=g[m];if(p(y))return y}},u=function(p){var m=s(function(g){return g.effect===p.effect});return m||(m=vF(p)),i(m)},c=function(p){var m=wg(p),g=m.type,y=m.effect,S=m.predicate,C=s(function(R){var P=typeof g=="string"?R.type===g:R.predicate===S;return P&&R.effect===y});return C&&(C.unsubscribe(),p.cancelActive&&Jd(C)),!!C},l=function(p,m,g,y){return Li(t,null,function(){var S,C,R,P;return Ni(this,function(Q){switch(Q.label){case 0:S=new AbortController,C=CF(u,S.signal),R=[],Q.label=1;case 1:return Q.trys.push([1,3,4,6]),p.pending.add(S),[4,Promise.resolve(p.effect(m,SF({},g,{getOriginalState:y,condition:function(G,Z){return C(G,Z).then(Boolean)},take:C,delay:Ag(S.signal),pause:rc(S.signal),extra:a,signal:S.signal,fork:yF(S.signal,R),unsubscribe:p.unsubscribe,subscribe:function(){r.set(p.id,p)},cancelActiveListeners:function(){p.pending.forEach(function(G,Z,$){G!==S&&(Rn(G,Fg),$.delete(G))})}})))];case 2:return Q.sent(),[3,6];case 3:return P=Q.sent(),P instanceof Ui||Eg(o,P,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(R)];case 5:return Q.sent(),Rn(S,gF),p.pending.delete(S),[7];case 6:return[2]}})})},d=xF(r),f=function(p){return function(m){return function(g){if(!Bd(g))return m(g);if(Ig.match(g))return u(g.payload);if(kg.match(g)){d();return}if(Og.match(g))return c(g.payload);var y=p.getState(),S=function(){if(y===Pg)throw new Error(_i+": getOriginalState can only be called synchronously");return y},C;try{if(C=m(g),r.size>0)for(var R=p.getState(),P=Array.from(r.values()),Q=0,G=P;Q<G.length;Q++){var Z=G[Q],$=!1;try{$=Z.predicate(g,R,y)}catch(H){$=!1,Eg(o,H,{raisedBy:"predicate"})}!$||l(Z,g,p,S)}}finally{y=Pg}return C}}};return{middleware:f,startListening:u,stopListening:c,clearListeners:d}}var Xd="RTK_autoBatch",RF=function(){return function(e){var t;return{payload:e,meta:(t={},t[Xd]=!0,t)}}},qg,AF=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis):function(e){return(qg||(qg=Promise.resolve())).then(e).catch(function(t){return setTimeout(function(){throw t},0)})},Tg=function(e){return function(t){setTimeout(t,e)}},PF=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:Tg(10),wF=function(e){return e===void 0&&(e={type:"raf"}),function(t){return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(void 0,r),o=!0,i=!1,s=!1,u=new Set,c=e.type==="tick"?AF:e.type==="raf"?PF:e.type==="callback"?e.queueNotification:Tg(e.timeout),l=function(){s=!1,i&&(i=!1,u.forEach(function(d){return d()}))};return Object.assign({},n,{subscribe:function(d){var f=function(){return o&&d()},p=n.subscribe(f);return u.add(d),function(){p(),u.delete(d)}},dispatch:function(d){var f;try{return o=!((f=d==null?void 0:d.meta)==null?void 0:f[Xd]),i=!o,i&&(s||(s=!0,c(l))),n.dispatch(d)}finally{o=!0}}})}}};wm();var zh=Ee(zi()),Gh=Ee(Hg());var sc=e=>t=>r=>{var o,i;let a=(o=r.payload)==null?void 0:o.analyticsAction;a!==void 0&&((i=r.payload)==null||delete i.analyticsAction);let n=t(r);return r.type==="search/executeSearch/fullfilled"&&a===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with product recommendation:",r),a!==void 0&&e.dispatch(a),n};function sR(e){return e.instantlyCallable}var cc=()=>e=>t=>e(sR(t)?t():t);var uc=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let a=r.error;if(((n=r.payload)==null?void 0:n.ignored)||e.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return t(r)},lc=e=>t=>r=>a=>(e.debug({action:a,nextState:t.getState()},`Action dispatched: ${a.type}`),r(a));function cR(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Gi(r)}var Gi=class extends Error{constructor(e){super(e);this.name="SchemaValidationError"}},ee=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},a=[];for(let n in this.definition){let o=this.definition[n].validate(r[n]);o&&a.push(`${n}: ${o}`)}if(a.length)throw cR(a,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},fe=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&oe(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Ie(e){return e===void 0}function uR(e){return e===null}function oe(e){return Ie(e)||uR(e)}var D=class{constructor(e={}){this.config=e,this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t||(lR(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function lR(e){return Ie(e)||zg(e)}function zg(e){return typeof e=="number"&&!isNaN(e)}var K=class{constructor(e={}){this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t||(dR(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function dR(e){return Ie(e)||Gg(e)}function Gg(e){return typeof e=="boolean"}var pR=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,w=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new fe(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:a,constrainTo:n}=this.config,o=this.value.validate(e);return o||(Ie(e)?null:Pn(e)?!t&&!e.length?"value is an empty string.":r&&!pR.test(e)?"value is not a valid URL.":a&&!a.test(e)?`value did not match provided regex ${a}`:n&&!n.includes(e)?`value should be one of: ${n.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Pn(e){return Object.prototype.toString.call(e)==="[object String]"}var q=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(Ie(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Wg(e))return"value is not an object";for(let[r,a]of Object.entries(this.config.values))if(a.required&&oe(e[r]))return`value does not contain ${r}`;let t="";for(let[r,a]of Object.entries(this.config.values)){let n=e[r],o=a.validate(n);o!==null&&(t+=" "+o)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Wg(e){return e!==void 0&&typeof e=="object"}var X=class{constructor(e={}){this.config=e,this.value=new fe(this.config)}validate(e){if(!oe(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(oe(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(a=>{this.config.each.required&&oe(a)&&(r=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(a,this.config.each);n!==null&&(r+=" "+n)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Gg(e)||Pn(e)||zg(e)||Wg(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function wn(e){return Array.isArray(e)}var It=class{constructor(e){this.config=e,this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Ie(e)||Object.values(this.config.enum).find(a=>a===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var O=new w({required:!0,emptyAllowed:!1}),Se=new w({required:!1,emptyAllowed:!1}),me=new w({required:!0,emptyAllowed:!0}),Tr=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),et=(e,t)=>{if("required"in t)return{payload:new ee({value:t}).validate({value:e}).value};let n=new q({options:{required:!0},values:t}).validate(e);if(n)throw new Gi(n);return{payload:e}},b=(e,t)=>{try{return et(e,t)}catch(r){return{payload:e,error:Tr(r)}}},ke=(e,t,r,a)=>{let n=`Check the initialState of ${a}`;return Yg(e,t,r,n,"Controller initialization error")},ge=(e,t,r,a)=>{let n=`Check the options of ${a}`;return Yg(e,t,r,n,"Controller initialization error")},Yg=(e,t,r,a,n)=>{try{return t.validate(r,a)}catch(o){throw e.logger.error(o,n),o}};var yc=Ee(dc()),Fh=Ee(Kg()),Rh=Ee(Jg());var Ch=Ee(Zg()),vh=Ee(sh());var I=new Error("Failed to load reducers."),Ki=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},En=class extends Error{constructor(t,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${t}`,this.statusCode=r!=null?r:0}};var fh=Ee(Cp()),In=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function fc(e){return Array.isArray(e)}function mc(e){return e.trim()===""}function mh(e,t){return[...e.reduce((r,a)=>{let n=t(a);return r.has(n)||r.set(n,a),r},new Map).values()]}function zR(e){return(typeof btoa!="undefined"?btoa:fh.btoa)(encodeURI(e))}function gc(e,t){let{[e]:r,...a}=t;return a}function kn(e){return zR(JSON.stringify(e))}var GR=new Set(["1",1,"yes",!0]);function hc(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>GR.has(r))}function gh(e){let t={};for(let[r,a]of e)t[r]=a;return t}function hh(e,t,r){return clearTimeout(t),setTimeout(e,r)}function Ji(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function Sh(e){let t=[];for(let r in e){let a=encodeURIComponent(r),n=encodeURIComponent(e[r]);t.push(`${a}=${n}`)}return t.join("&")}function yh(e){return typeof e!="object"||!e?!1:Object.values(e).every(WR)}function WR(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function xh(e){return e===429}var tt=class{static async call(t){let r=YR(t),{logger:a}=t,n=await tt.preprocessRequest(r,t);a.info(n,"Platform request");let{url:o,...i}=n,s=async()=>{let u=await(0,Ch.default)(o,i);if(xh(u.status))throw u;return u};try{let u=await(0,vh.backOff)(s,{retry:c=>{let l=c&&xh(c.status);return l&&a.info("Platform retrying request"),l}});if(u.status===419)throw a.info("Platform renewing token"),new Ki;if(u.status===404)throw new En(o,u.status);return a.info({response:u,requestInfo:n},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new En(o):u}}static async preprocessRequest(t,r){let{origin:a,preprocessRequest:n,logger:o,requestMetadata:i}=r,{signal:s,...u}=t,c=Ji(u);try{let l=await n(t,a,i);return{...t,...l}}catch(l){o.error(l,"Platform request preprocessing failed. Returning default request options.")}return c}};function bh(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,a=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${a}.cloud.coveo.com`}function Xi(e,t="prod"){let r=t==="prod"?"":t,a=`https://${e}.org${r}.coveo.com`,n=`https://${e}.analytics.org${r}.coveo.com`,o=`${a}/rest/search/v2`,i=`https://${e}.admin.org${r}.coveo.com`;return{platform:a,analytics:n,search:o,admin:i}}function Sc(e){return(e==null?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:bh("platform",e)}function vp(e){return bh("analytics",e)}function YR(e){let{url:t,method:r,requestParams:a,contentType:n,accessToken:o,signal:i}=e,s=e.method==="POST"||e.method==="PUT",u=KR(a,n);return{url:t,method:r,headers:{"Content-Type":n,Authorization:`Bearer ${o}`,...e.headers},...s&&{body:u},signal:i}}function KR(e,t){return t==="application/x-www-form-urlencoded"?yh(e)?Sh(e):"":JSON.stringify(e)}yc.default.extend(Rh.default);yc.default.extend(Fh.default);var xp="/rest/search/v2",bp="/rest/ua",rt=()=>({organizationId:"",accessToken:"",platformUrl:Sc(),search:{apiBaseUrl:`${Sc()}${xp}`,locale:"en-US",timezone:yc.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${vp()}${bp}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}});var pt=()=>!1;function Qa(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var He=()=>"default";var kt=(r=>(r.Relevance="relevance",r.Fields="fields",r))(kt||{}),Cc=(r=>(r.Ascending="asc",r.Descending="desc",r))(Cc||{});var TV=new q({options:{required:!1},values:{by:new It({enum:kt,required:!0}),fields:new X({each:new q({values:{name:new w,direction:new It({enum:Cc})}})})}});var BV=new q({options:{required:!1},values:{by:new It({enum:kt,required:!0}),fields:new X({each:new q({values:{field:new w({required:!0}),direction:new It({enum:Cc}),displayName:new w}})})}});function ta(){return[]}var uA=Ee(zi());var Ba=e=>e;function On(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function qe(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:On(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:On(),extendedResults:{}}}function Bt(e){let{url:t,accessToken:r,organizationId:a,authentication:n,...o}=e;return o}var Vr=e=>{let{response:t}=e;return t.body?JR(e):XR(t)},JR=e=>eA(e)?tA(e):ZR(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},XR=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function ZR(e){return e.body.statusCode!==void 0}function eA(e){return e.body.exception!==void 0}var tA=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});function vc(){if(typeof window=="undefined"){let{AbortController:e}=wh();return new e}return typeof AbortController=="undefined"?null:new AbortController}var ja=class{constructor(){this.currentAbortController=null}async enqueue(t,r){var o;let a=this.currentAbortController,n=this.currentAbortController=vc();a&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),a.abort());try{return await t((o=n==null?void 0:n.signal)!=null?o:null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}};var Ua=class{constructor(t){this._params={};this._basePath=t}addParam(t,r){this._params={...this.params,[t]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},Eh=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),Ih=(e,t)=>{let r=Rp(e);return r&&r.organizationId===t?r:null},Rp=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(t==null?void 0:t.groups)?t.groups:null};function kh(e){return((e.headers.get("content-type")||"").split(";").find(a=>a.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var jt=(e,t,r,a)=>{let n=new Ua(`${e.url}${a}`);return n.addParam("organizationId",e.organizationId),e.authentication&&n.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:n.href,origin:"searchApiFetch"}};var Oh=(e,t)=>{let r=new Ua(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),e.visitorId!==void 0&&r.addParam("visitorId",`${e.visitorId}`),r.href},qh=async(e,t)=>{let r=await tt.call({...jt(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Bt(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let a=kh(r),n=await r.arrayBuffer(),i=new TextDecoder(a).decode(n);return rA(i)?{success:i}:{error:Vr({response:r,body:i})}};function rA(e){return typeof e=="string"}function aA(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function nA(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Zi(e,t){if(t&&e.name==="AbortError")return{error:nA(e)};if(e instanceof En)return{error:aA(e)};throw e}var es=class{constructor(t){this.options=t;this.apiCallsQueues={unknown:new ja,mainSearch:new ja,facetValues:new ja,foldingCollection:new ja,instantResults:new ja}}async plan(t){let r=await tt.call({...jt(t,"POST","application/json","/plan"),requestParams:Bt(t),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return Zi(r);let a=await r.json();return iA(a)?{success:a}:{error:Vr({response:r,body:a})}}async querySuggest(t){let r=await tt.call({...jt(t,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:Bt(t),...this.options});if(r instanceof Error)return Zi(r);let a=await r.json(),n={response:r,body:a};return oA(a)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:Vr(n)}}async search(t,r){var s;let a=(s=r==null?void 0:r.origin)!=null?s:"unknown",n=await this.apiCallsQueues[a].enqueue(u=>tt.call({...jt(t,"POST","application/json",""),requestParams:Bt(t),requestMetadata:{method:"search",origin:r==null?void 0:r.origin},...this.options,signal:u!=null?u:void 0}),{logger:this.options.logger,warnOnAbort:!(r==null?void 0:r.disableAbortWarning)});if(n instanceof Error)return Zi(n,r==null?void 0:r.disableAbortWarning);let o=await n.json(),i={response:n,body:o};return bc(o)?(i.body=Th(o),{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}):{error:Vr(i)}}async facetSearch(t){let r=await tt.call({...jt(t,"POST","application/json","/facet"),requestParams:Bt(t),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let a=await r.json(),n={response:r,body:a};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(t){let r=await tt.call({...jt(t,"POST","application/json",""),requestParams:Bt(t),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return bc(a)?{success:a}:{error:Vr({response:r,body:a})}}async html(t){return qh(t,{...this.options})}async productRecommendations(t){let r=await tt.call({...jt(t,"POST","application/json",""),requestParams:Bt(t),requestMetadata:{method:"productRecommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return bc(a)?{success:a}:{error:Vr({response:r,body:a})}}async fieldDescriptions(t){let r=await tt.call({...jt(t,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return sA(a)?{success:a}:{error:Vr({response:r,body:a})}}},xc=e=>e.success!==void 0,Fe=e=>e.error!==void 0;function bc(e){return e.results!==void 0}function Th(e){let t=On();return oe(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function oA(e){return e.completions!==void 0}function iA(e){return e.preprocessingOutput!==void 0}function sA(e){return e.fields!==void 0}var Fc=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function ts(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Fc(),originalQuery:"",automaticallyCorrectQuery:!0}}function qn(){return{enabled:!0}}function ra(){return{freezeFacetOrder:!1,facets:{}}}function Ut(){return{}}function Tn(){return{}}function Vh(e){return{request:e,hasBreadcrumbs:!0}}function _t(){return{}}function Mh(e){return{request:e}}function $t(){return{}}function Nh(e){return{request:e}}function Ht(){return{}}var Ap=["author","language","urihash","objecttype","collection","source","permanentid"],Lh=[...Ap,"date","filetype","parents"],lA=[...Lh,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Dn=()=>({fieldsToInclude:Ap,fetchAllFields:!1,fieldsDescription:[]});var _a=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function Vn(){return{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1,feedbackSubmitted:!1}}function Be(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function $a(){return{}}var Pp=()=>({});var Ce=()=>({q:"",enableQuerySyntax:!1});var Mn=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var aa=(r=>(r.Ascending="ascending",r.Descending="descending",r))(aa||{}),zt=(o=>(o.Relevancy="relevancy",o.QRE="qre",o.Date="date",o.Field="field",o.NoSort="nosort",o))(zt||{}),Mr=e=>{if(wn(e))return e.map(t=>Mr(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},rs=()=>({by:"relevancy"}),wp=e=>({by:"date",order:e}),Ep=(e,t)=>({by:"field",order:t,field:e}),Ip=()=>({by:"qre"}),kp=()=>({by:"nosort"}),Qh=new q({values:{by:new It({enum:zt,required:!0}),order:new It({enum:aa}),field:new w}});function Ke(){return Mr(rs())}function Ha(){return{}}function za(){return{}}function Nr(){return{contextValues:{}}}function as(){return{}}var ns=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});function na(){return{contextValues:{}}}var at=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var Ot=()=>"";var Bh=Ee(zi());var Rc=e=>e,Ac=e=>e,Pc=e=>e;function jh(e){return new es({logger:(0,Bh.default)({level:"silent"}),preprocessRequest:Ba,postprocessSearchResponseMiddleware:Rc,postprocessFacetSearchResponseMiddleware:Ac,postprocessQuerySuggestResponseMiddleware:Pc,...e})}var wc=e=>({past:[],present:e,future:[]}),dA=e=>{let{past:t,present:r,future:a}=e;if(!r||t.length===0)return e;let n=t[t.length-1];return{past:t.slice(0,t.length-1),present:n,future:[r,...a]}},pA=e=>{let{past:t,present:r,future:a}=e;if(!r||a.length===0)return e;let n=a[0],o=a.slice(1);return{past:[...t,r],present:n,future:o}},fA=e=>{let{action:t,state:r,reducer:a}=e,{past:n,present:o}=r,i=a(o,t);return o?o===i?r:{past:[...n,o],present:i,future:[]}:wc(i)},Uh=e=>{let{actionTypes:t,reducer:r}=e,a=wc();return(n=a,o)=>{switch(o.type){case t.undo:return dA(n);case t.redo:return pA(n);case t.snapshot:return fA({state:n,reducer:r,action:o});default:return n}}};function Ec(){return{length:void 0}}var _h=1,$h=10,Ic=5,Hh=1,kc=8;function oa(){return{desiredCount:Ic,numberOfValues:kc,set:{}}}function Nn(){return{}}function Oc(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}function qc(){return Lr({})}function Lr(e){var t,r,a;return{context:e.context||Nr(),dictionaryFieldContext:e.dictionaryFieldContext||na(),facetSet:e.facetSet||_t(),numericFacetSet:e.numericFacetSet||Ht(),dateFacetSet:e.dateFacetSet||$t(),categoryFacetSet:e.categoryFacetSet||Ut(),automaticFacetSet:(t=e.automaticFacetSet)!=null?t:oa(),pagination:e.pagination||Be(),query:e.query||Ce(),tabSet:e.tabSet||za(),advancedSearchQueries:e.advancedSearchQueries||at(),staticFilterSet:e.staticFilterSet||Ha(),querySet:e.querySet||$a(),instantResults:e.instantResults||Nn(),sortCriteria:e.sortCriteria||Ke(),pipeline:e.pipeline||Ot(),searchHub:e.searchHub||He(),facetOptions:e.facetOptions||ra(),facetOrder:(r=e.facetOrder)!=null?r:ta(),debug:(a=e.debug)!=null?a:pt()}}function Tc(){return{queries:[],maxLength:10}}function Dc(){return{results:[],maxLength:10}}function Vc(){return{}}var Mc=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});function os(e={}){return{configuration:rt(),advancedSearchQueries:at(),staticFilterSet:Ha(),facetSet:_t(),dateFacetSet:$t(),numericFacetSet:Ht(),categoryFacetSet:Ut(),facetSearchSet:Tn(),categoryFacetSearchSet:as(),facetOptions:ra(),pagination:Be(),query:Ce(),querySet:$a(),instantResults:Nn(),tabSet:za(),querySuggest:{},search:qe(),sortCriteria:Ke(),context:Nr(),dictionaryFieldContext:na(),didYouMean:ts(),fields:Dn(),history:wc(qc()),pipeline:Ot(),facetOrder:ta(),searchHub:He(),debug:pt(),resultPreview:Qa(),version:"unit-testing-version",folding:_a(),triggers:Mc(),questionAnswering:Mn(),standaloneSearchBoxSet:Vc(),recentResults:Dc(),recentQueries:Tc(),excerptLength:Ec(),automaticFacetSet:oa(),generatedAnswer:Vn(),...e}}function Op(e={}){let t=mA(e,os);return{...t,executeFirstSearch:jest.fn(),executeFirstSearchAfterStandaloneSearchBoxRedirect:jest.fn(),apiClient:t.apiClient}}function mA(e={},t,r=gA){let a=(0,zh.default)({level:"silent"}),n=Wh(e,t),{store:o,apiClient:i}=r(a,n),s=o(n),u=()=>{},{state:c,...l}=e;return{store:s,apiClient:i,state:Wh(e,t),subscribe:jest.fn(()=>u),get dispatch(){return s.dispatch},get actions(){return s.getActions()},findAsyncAction(d){let f=this.actions.find(p=>p.type===d.type);return hA(f)?f:void 0},logger:a,addReducers:jest.fn(),enableAnalytics:jest.fn(),disableAnalytics:jest.fn(),...l}}function Wh(e,t){let r=e.state||t();return r.configuration.analytics.enabled=!1,r}var gA=e=>{let t={apiClient:jh({logger:e}),validatePayload:et,logger:e};return{store:(0,Gh.default)([cc,uc(e),sc,Mi.withExtraArgument(t),...Zs(),lc(e)]),apiClient:t.apiClient}};function hA(e){return e?"meta"in e:!1}function Ln(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}function qp(e={}){return{title:"",uri:"",printableUri:"",clickUri:"",uniqueId:"",excerpt:"",firstSentences:"",summary:null,flags:"",hasHtmlVersion:!1,score:0,percentScore:0,rankingInfo:null,isTopResult:!1,isRecommendation:!1,titleHighlights:[],firstSentencesHighlights:[],excerptHighlights:[],printableUriHighlights:[],summaryHighlights:[],absentTerms:[],raw:Ln(),isUserActionView:!1,...e}}var cB={title:"example documentTitle",uri:"example documentUri",printableUri:"printable-uri",clickUri:"example documentUrl",uniqueId:"unique-id",excerpt:"excerpt",firstSentences:"first-sentences",flags:"flags",rankingModifier:"example rankingModifier",raw:Ln({urihash:"example documentUriHash",source:"example sourceName",collection:"example collectionName",permanentid:"example contentIDValue"})};var Yh={};ym(Yh,{escape:()=>Qn,getHighlightedSuggestion:()=>Tp,highlightString:()=>SA});function SA(e){if(mc(e.openingDelimiter)||mc(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(oe(e.content)||mc(e.content))return e.content;if(e.highlights.length===0)return Qn(e.content);let t=e.content.length,r="",a=0;for(let n=0;n<e.highlights.length;n++){let o=e.highlights[n],i=o.offset,s=i+o.length;if(s>t)break;r+=Qn(e.content.slice(a,i)),r+=e.openingDelimiter,r+=Qn(e.content.slice(i,s)),r+=e.closingDelimiter,a=s}return a!==t&&(r+=Qn(e.content.slice(a))),r}function Tp(e,t){return e=Qn(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,a,n,o)=>a?Dp(a,t.notMatchDelimiters):n?Dp(n,t.exactMatchDelimiters):o?Dp(o,t.correctionDelimiters):r)}function Dp(e,t){return t?t.open+e+t.close:e}function Qn(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",a=RegExp(r),n=RegExp(r,"g");return a.test(e)?e.replace(n,o=>t[o]):e}async function yA({config:e,environment:t,event:r,listenerManager:a}){let{url:n,token:o,mode:i}=e;i!=="disabled"&&(a.call(r),t.send(n,o,r))}var CA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function vA(e){return typeof e=="string"&&CA.test(e)}function xA(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),a=r.storage,n=a.getItem(t),o=n&&vA(n)?n:r.generateUUID();return a.setItem(t,o),o},clear:()=>{e.get().storage.removeItem(t)}}}var Kh="0.6.8";function bA(e){let{trackingId:t}=e;return{trackingId:t}}function FA(){return`relay@${Kh}`}function Jh(e,t,r,a){let{getReferrer:n,getLocation:o,getUserAgent:i}=r,s=bA(t),u=a.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:FA(),clientId:u,userAgent:i(),referrer:n(),location:o()})}function RA(e,t,r,a,n){return{...t,meta:Jh(e,r,a,n)}}var AA="*";function PA(){let e=[];function t({type:u,callback:c}){return e.findIndex(l=>l.type===u&&l.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function a(u){return t(u)<0&&e.push(u),()=>s(u.type,u.callback)}function n(u){e.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u)}catch(l){console.error(l)}})}function o(u){if(u===AA)e.length=0;else for(let c=e.length-1;c>=0;c--)e[c].type===u&&e.splice(c,1)}function i(u){let c=t(u);c>=0&&e.splice(c,1)}function s(u,c){c?i({type:u,callback:c}):o(u)}return{add:a,call:n,remove:s}}function Xh({url:e,token:t,trackingId:r,...a}){return Object.freeze({url:e,token:t,trackingId:r,...!!a.mode&&{mode:a.mode}})}function wA(e){let t=Xh(e);return{get:()=>t,update:r=>{t=Xh({...t,...r})}}}function EA(){let e=typeof window!="undefined";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var Vp=IA();function IA(){let e="coveo_",t=r=>{let a=r.split(".").slice(-2);return a.length==2?a.join("."):""};return{getItem(r){let a=`${e}${r}=`,n=document.cookie.split(";");for(let o of n){let i=o.replace(/^\s+/,"");if(i.lastIndexOf(a,0)===0)return i.substring(a.length,i.length)}return null},setItem(r,a,n){let o=t(window.location.hostname),i=`;expires=${new Date(new Date().getTime()+n).toUTCString()}`,s=o?`;domain=${o}`:"";document.cookie=`${e}${r}=${a}${i}${s};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function kA(){return{getItem(e){return Vp.getItem(e)||localStorage.getItem(e)},removeItem(e){Vp.removeItem(e),localStorage.removeItem(e)},setItem(e,t){let r=31556952e3;localStorage.setItem(e,t),Vp.setItem(e,t,r)}}}async function Mp(e,t){return fetch(e,t).catch(r=>{throw new Error(`${r.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:r})})}function OA(){let e=document.referrer;return e===""?null:e}function qA(){return{runtime:"browser",fetch:(e,t)=>Mp(e,t),send:async(e,t,r)=>{let a=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(EA().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!a)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>OA(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:kA()}}function Zh(){return{getItem(){return null},removeItem(){},setItem(){}}}function TA(){return{runtime:"node",fetch:(e,t)=>Mp(e,t),send:async(e,t,r)=>{let a={"Content-Type":"application/json",Authorization:`Bearer ${t}`};Mp(e,{method:"POST",body:JSON.stringify([r]),headers:a})},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:Zh()}}function DA(){return VA()?qA():TA()}function VA(){try{return typeof window=="object"}catch{return!1}}function MA(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:Zh()}}function NA(e){return e.get().mode=="disabled"?MA():DA()}function LA(e){return{get:()=>Object.freeze(NA(e))}}function eS(e){let t=wA(e),r=PA(),a=LA(t),n=xA(a);return{emit:(o,i)=>{let s=t.get(),u=a.get(),c=RA(o,i,s,u,n);return yA({config:s,environment:u,event:c,listenerManager:r})},getMeta:o=>Jh(o,t.get(),a.get(),n),on:(o,i)=>r.add({type:o,callback:i}),off:(o,i)=>r.remove(o,i),updateConfig:o=>t.update(o),version:Kh,clearStorage:()=>{n.clear()}}}function Gt(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}function F(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(e,t||[])).next())})}var se;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(se||(se={}));function QA(){return typeof window!="undefined"}function Np(){return typeof navigator!="undefined"}function Bn(){return typeof document!="undefined"}function Lp(){try{return typeof localStorage!="undefined"}catch{return!1}}function BA(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function tS(){return Np()&&navigator.cookieEnabled}var jA=[se.click,se.custom,se.search,se.view],UA=(e,t)=>jA.indexOf(e)!==-1?Object.assign({language:Bn()?document.documentElement.lang:"unknown",userAgent:Np()?navigator.userAgent:"unknown"},t):t,jn=class{static set(t,r,a){var n,o,i,s;a&&(o=new Date,o.setTime(o.getTime()+a)),s=window.location.hostname,s.indexOf(".")===-1?rS(t,r,o):(i=s.split("."),n=i[i.length-2]+"."+i[i.length-1],rS(t,r,o,n))}static get(t){for(var r=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(t){jn.set(t,"",-1)}};function rS(e,t,r,a){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(a?`;domain=${a}`:"")+";path=/;SameSite=Lax"}function _A(){return Lp()?localStorage:tS()?new ia:BA()?sessionStorage:new Un}var ia=class{getItem(t){return jn.get(`${ia.prefix}${t}`)}removeItem(t){jn.erase(`${ia.prefix}${t}`)}setItem(t,r,a){jn.set(`${ia.prefix}${t}`,r,a)}};ia.prefix="coveo_";var aS=class{constructor(){this.cookieStorage=new ia}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},Un=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},is="__coveo.analytics.history",nS=20,oS=1e3*60,iS=75,ss=class{constructor(t){this.store=t||_A()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return F(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return F(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(is);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return F(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(is);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(is,JSON.stringify(t.slice(0,nS)))}catch{}}clear(){try{this.store.removeItem(is)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((a,n)=>(n.internalTime||0)-(a.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,iS)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>oS:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:a,time:n,value:o}=r;return{name:a,time:n,value:o}}):[]}stripEmptyQuery(t){let{name:r,time:a,value:n}=t;return r&&typeof n=="string"&&r.toLowerCase()==="query"&&n.trim()===""?{name:r,time:a}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}},sS=Object.freeze({__proto__:null,HistoryStore:ss,MAX_NUMBER_OF_HISTORY_ELEMENTS:nS,MAX_VALUE_SIZE:iS,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:oS,STORE_KEY:is,default:ss}),$A=(e,t)=>F(void 0,void 0,void 0,function*(){return e===se.view?(yield HA(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),HA=e=>F(void 0,void 0,void 0,function*(){let t=new ss,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),Nc,zA=new Uint8Array(16);function GA(){if(!Nc&&(Nc=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Nc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nc(zA)}var WA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Lc(e){return typeof e=="string"&&WA.test(e)}var je=[];for(let e=0;e<256;++e)je.push((e+256).toString(16).slice(1));function cS(e,t=0){return(je[e[t+0]]+je[e[t+1]]+je[e[t+2]]+je[e[t+3]]+"-"+je[e[t+4]]+je[e[t+5]]+"-"+je[e[t+6]]+je[e[t+7]]+"-"+je[e[t+8]]+je[e[t+9]]+"-"+je[e[t+10]]+je[e[t+11]]+je[e[t+12]]+je[e[t+13]]+je[e[t+14]]+je[e[t+15]]).toLowerCase()}function YA(e){if(!Lc(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function KA(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var JA="6ba7b810-9dad-11d1-80b4-00c04fd430c8",XA="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ZA(e,t,r){function a(n,o,i,s){var u;if(typeof n=="string"&&(n=KA(n)),typeof o=="string"&&(o=YA(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+n.length);if(c.set(o),c.set(n,o.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=c[l];return i}return cS(c)}try{a.name=e}catch{}return a.DNS=JA,a.URL=XA,a}var eP=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),uS={randomUUID:eP};function Ga(e,t,r){if(uS.randomUUID&&!t&&!e)return uS.randomUUID();e=e||{};let a=e.random||(e.rng||GA)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=a[n];return t}return cS(a)}function tP(e,t,r,a){switch(e){case 0:return t&r^~t&a;case 1:return t^r^a;case 2:return t&r^t&a^r&a;case 3:return t^r^a}}function Qp(e,t){return e<<t|e>>>32-t}function rP(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let i=unescape(encodeURIComponent(e));e=[];for(let s=0;s<i.length;++s)e.push(i.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let a=e.length/4+2,n=Math.ceil(a/16),o=new Array(n);for(let i=0;i<n;++i){let s=new Uint32Array(16);for(let u=0;u<16;++u)s[u]=e[i*64+u*4]<<24|e[i*64+u*4+1]<<16|e[i*64+u*4+2]<<8|e[i*64+u*4+3];o[i]=s}o[n-1][14]=(e.length-1)*8/Math.pow(2,32),o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=(e.length-1)*8&4294967295;for(let i=0;i<n;++i){let s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=o[i][p];for(let p=16;p<80;++p)s[p]=Qp(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let u=r[0],c=r[1],l=r[2],d=r[3],f=r[4];for(let p=0;p<80;++p){let m=Math.floor(p/20),g=Qp(u,5)+tP(m,c,l,d)+f+t[m]+s[p]>>>0;f=d,d=l,l=Qp(c,30)>>>0,c=u,u=g}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var aP=ZA("v5",80,rP),lS=aP,dS="2.28.23",pS=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,cs={pageview:"pageview",event:"event"},Bp=class{constructor({client:t,uuidGenerator:r=Ga}){this.client=t,this.uuidGenerator=r}},fS=class extends Bp{constructor({client:t,uuidGenerator:r=Ga}){super({client:t,uuidGenerator:r});this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=pS(window.location),this.lastReferrer=Bn()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:Bn()?document.title:"",encoding:Bn()?document.characterSet:"UTF-8"},a={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},o={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},o),a),n),r)}updateLocationForNextPageView(t,r){let{pageViewId:a,referrer:n,location:o}=this.getNextValues(t,r);this.lastReferrer=n,this.pageViewId=a,this.currentLocation=o,t===cs.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===cs.pageview?this.nextPageViewId:this.pageViewId,referrer:t===cs.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===cs.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=n=>n.replace(/^\/?(.*)$/,"/$1");return`${(n=>n.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return pS(window.location)}},Wt=class{constructor(t,r){if(!Lc(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>Wt.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let a=new URL(t);return r.some(n=>new RegExp(n.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(a.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[a,n]=r;if(a.length!==32||isNaN(parseInt(n)))return null;let o=a.substring(0,8)+"-"+a.substring(8,12)+"-"+a.substring(12,16)+"-"+a.substring(16,20)+"-"+a.substring(20,32);return Lc(o)?new Wt(o,Number.parseInt(n)*1e3):null}};Wt.cvo_cid="cvo_cid";Wt.expirationTime=120;var mS=class extends Bp{constructor({client:t,uuidGenerator:r=Ga}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return F(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),a=yield this.client.getCurrentVisitorId();return r.searchParams.set(Wt.cvo_cid,new Wt(a,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};mS.Id="link";var ft=Object.keys;function Qc(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var jp={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},nP=ft(jp).map(e=>jp[e]),oP=[...nP].join("|"),iP=new RegExp(`^(${oP}$)`),sP={svcAction:"svc_action",svcActionData:"svc_action_data"},cP=e=>ft(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let a=jp[r]||r;return Object.assign(Object.assign({},t),{[a]:e[r]})},{}),uP=e=>iP.test(e),lP=[uP],gS={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},hS={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},ze={action:"pa",list:"pal",listSource:"pls"},Bc={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},dP=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Up={id:"quoteId",affiliation:"quoteAffiliation"},_p={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},pP={add:ze,bookmark_add:ze,bookmark_remove:ze,click:ze,checkout:ze,checkout_option:ze,detail:ze,impression:ze,remove:ze,refund:Object.assign(Object.assign({},ze),Bc),purchase:Object.assign(Object.assign({},ze),Bc),quickview:ze,quote:Object.assign(Object.assign({},ze),Up),review:Object.assign(Object.assign({},ze),_p)},fP=ft(gS).map(e=>gS[e]),mP=ft(hS).map(e=>hS[e]),gP=ft(ze).map(e=>ze[e]),hP=ft(Bc).map(e=>Bc[e]),SP=ft(_p).map(e=>_p[e]),yP=ft(Up).map(e=>Up[e]),CP=[...fP,"custom"].join("|"),vP=[...mP,"custom"].join("|"),SS="(pr[0-9]+)",yS="(il[0-9]+pi[0-9]+)",xP=new RegExp(`^${SS}(${CP})$`),bP=new RegExp(`^(${yS}(${vP}))|(il[0-9]+nm)$`),FP=new RegExp(`^(${gP.join("|")})$`),RP=new RegExp(`^(${hP.join("|")})$`),AP=new RegExp(`^${SS}custom$`),PP=new RegExp(`^${yS}custom$`),wP=new RegExp(`^(${[...dP,...SP,...yP].join("|")})$`),EP=e=>xP.test(e),IP=e=>bP.test(e),kP=e=>FP.test(e),OP=e=>RP.test(e),qP=e=>wP.test(e),TP=[IP,EP,kP,OP,qP],DP=[AP,PP],VP={anonymizeIp:"aip"},MP={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},NP={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},LP=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],QP=Object.assign(Object.assign(Object.assign(Object.assign({},VP),MP),NP),LP.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),$p=Object.assign(Object.assign({},QP),sP),BP=e=>{let t=!!e.action&&pP[e.action]||{};return ft(e).reduce((r,a)=>{let n=t[a]||$p[a]||a;return Object.assign(Object.assign({},r),{[n]:e[a]})},{})},jP=ft($p).map(e=>$p[e]),UP=e=>jP.indexOf(e)!==-1,_P=e=>e==="custom",$P=e=>[...TP,...lP,UP,_P].some(t=>t(e)),HP=e=>ft(e).reduce((t,r)=>{let a=zP(r);return a?Object.assign(Object.assign({},t),GP(a,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),zP=e=>{let t;return[...DP].every(r=>{var a;return t=(a=r.exec(e))===null||a===void 0?void 0:a[1],!Boolean(t)}),t},GP=(e,t)=>ft(t).reduce((r,a)=>Object.assign(Object.assign({},r),{[`${e}${a}`]:t[a]}),{}),CS=class{constructor(t){this.opts=t}sendEvent(t,r){return F(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:a,preprocessRequest:n}=this.opts,o=yield this.getQueryParamsForEventType(t),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${a}/analytics/${t}?${o}`,r,n),u=this.encodeForEventType(t,s),c=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,c)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,a){return F(this,void 0,void 0,function*(){let n=t,o=r;if(a){let i=yield a({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:u}=i;n=s||t;try{o=JSON.parse(u)}catch(c){console.error("Unable to process the request body as a JSON string",c)}}return{payload:o,url:n}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeForLegacyType(t,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(t){return F(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:a}=this.opts,n=yield a.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(o=>!!o).join("&")})}isEventTypeLegacy(t){return[se.click,se.custom,se.search,se.view].indexOf(t)!==-1}encodeForLegacyType(t,r){return`${t}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(t){return Object.keys(t).filter(r=>!!t[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(t[r]))}`).join("&")}encodeValue(t){return typeof t=="number"||typeof t=="string"||typeof t=="boolean"?t:JSON.stringify(t)}},vS=class{sendEvent(t,r){return F(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return F(this,void 0,void 0,function*(){return Promise.resolve()})}},xS=window.fetch,Hp=class{constructor(t){this.opts=t}sendEvent(t,r){return F(this,void 0,void 0,function*(){let{baseUrl:a,visitorIdProvider:n,preprocessRequest:o}=this.opts,i=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",s={url:`${a}/analytics/${t}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},s),o?yield o(s,"analyticsFetch"):{}),{url:c}=u,l=Gt(u,["url"]),d=yield xS(c,l);if(d.ok){let f=yield d.json();return f.visitorId&&n.setCurrentVisitorId(f.visitorId),f}else{try{d.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,d,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return F(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield xS(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[se.click,se.custom,se.search,se.view].indexOf(t)!==-1}getVisitorIdParam(){return F(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},bS=class{constructor(t,r){Lp()&&tS()?this.storage=new aS:Lp()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Un),this.client=new Hp(t),this.beaconClient=new CS(t),window.addEventListener("beforeunload",()=>{let a=r();for(let{eventType:n,payload:o}of a)this.beaconClient.sendEvent(n,o)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},FS=class{constructor(t,r){this.storage=r||new Un,this.client=new Hp(t)}getClientDependingOnEventType(t){return this.client}},RS=class{constructor(){this.storage=new Un,this.client=new vS}getClientDependingOnEventType(t){return this.client}},WP="xx",YP=e=>(e==null?void 0:e.startsWith(WP))||!1,KP=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function JP(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var XP=["1",1,"yes",!0];function us(){return Np()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>XP.indexOf(e)!==-1)}var AS="v15",PS={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function ZP(e=PS.default,t=AS,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let a=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${a?"":"/rest"}/${t}`}var ew="38824e1f-37f5-42d3-8372-a4b8fa9df946",Je=class{get defaultOptions(){return{endpoint:PS.default,isCustomEndpoint:!1,token:"",version:AS,beforeSendHooks:[],afterSendHooks:[]}}get version(){return dS}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[$A,UA].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),us()&&(this.clear(),this.runtime.storage=new Un),this.addEventTypeMapping(se.view,{newEventType:se.view,addClientIdParameter:!0}),this.addEventTypeMapping(se.click,{newEventType:se.click,addClientIdParameter:!0}),this.addEventTypeMapping(se.custom,{newEventType:se.custom,addClientIdParameter:!0}),this.addEventTypeMapping(se.search,{newEventType:se.search,addClientIdParameter:!0})}initRuntime(t){return QA()&&Bn()?new bS(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(JP()&&console.warn(KP),new FS(t))}get storage(){return this.runtime.storage}determineVisitorId(){return F(this,void 0,void 0,function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Ga()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),Ga()}})}getCurrentVisitorId(){return F(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return F(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return F(this,void 0,void 0,function*(){if(Lc(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(lS(t,lS(r,ew)))}})}getParameters(t,...r){return F(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return F(this,void 0,void 0,function*(){let a=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,a)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Ga()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(us())return null;try{let r=new URL(t).searchParams.get(Wt.cvo_cid);if(r==null)return null;let a=Wt.fromString(r);return!a||!Bn()||!a.validate(document.referrer,this.acceptedLinkReferrers)?null:a.clientId}catch{}return null}resolveParameters(t,...r){return F(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:a=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:o=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[t]||{};return yield[p=>a.length>0?this.parseVariableArgumentsPayload(a,p):p[0],p=>F(this,void 0,void 0,function*(){return Object.assign(Object.assign({},p),{visitorId:n?yield this.getCurrentVisitorId():""})}),p=>F(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},p),{clientId:yield this.getCurrentVisitorId()}):p}),p=>o?this.ensureAnonymousUserWhenUsingApiKey(p):p,p=>this.beforeSendHooks.reduce((m,g)=>F(this,void 0,void 0,function*(){let y=yield m;return yield g(t,y)}),p)].reduce((p,m)=>F(this,void 0,void 0,function*(){let g=yield p;return yield m(g)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return F(this,void 0,void 0,function*(){let{usesMeasurementProtocol:a=!1}=this.eventTypeMapping[t]||{};return yield[d=>this.setTrackingIdIfTrackingIdNotPresent(d),d=>this.removeEmptyPayloadValues(d,t),d=>this.validateParams(d,t),d=>a?BP(d):d,d=>a?this.removeUnknownParameters(d):d,d=>a?this.processCustomParameters(d):this.mapCustomParametersToCustomData(d)].reduce((d,f)=>F(this,void 0,void 0,function*(){let p=yield d;return yield f(p)}),Promise.resolve(r))})}makeEvent(t,...r){return F(this,void 0,void 0,function*(){let{newEventType:a=t}=this.eventTypeMapping[t]||{},n=yield this.resolveParameters(t,...r),o=yield this.resolvePayloadForParameters(t,n);return{eventType:a,payload:o,log:i=>F(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:a,payload:Object.assign(Object.assign({},o),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(t,Object.assign(Object.assign({},n),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return F(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return F(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:a}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,a)}})}clear(){this.storage.removeItem("visitorId"),new ss().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.search,t)})}sendSearchEvent(t){var{searchQueryUid:r}=t,a=Gt(t,["searchQueryUid"]);return F(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(a)).log({searchQueryUid:r})})}makeClickEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.click,t)})}sendClickEvent(t){var{searchQueryUid:r}=t,a=Gt(t,["searchQueryUid"]);return F(this,void 0,void 0,function*(){return(yield this.makeClickEvent(a)).log({searchQueryUid:r})})}makeCustomEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.custom,t)})}sendCustomEvent(t){var{lastSearchQueryUid:r}=t,a=Gt(t,["lastSearchQueryUid"]);return F(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(a)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.view,t)})}sendViewEvent(t){return F(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return F(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return F(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let a={};for(let n=0,o=r.length;n<o;n++){let i=r[n];if(typeof i=="string")a[t[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},a),i)}return a}isKeyAllowedEmpty(t,r){return({[se.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let a=n=>typeof n!="undefined"&&n!==null&&n!=="";return Object.keys(t).filter(n=>this.isKeyAllowedEmpty(r,n)||a(t[n])).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(a=>{if($P(a))return!0;console.log(a,"is not processed by coveoua")}).reduce((a,n)=>Object.assign(Object.assign({},a),{[n]:t[n]}),{})}processCustomParameters(t){let{custom:r}=t,a=Gt(t,["custom"]),n={};r&&Qc(r)&&(n=this.lowercaseKeys(r));let o=HP(a);return Object.assign(Object.assign({},n),o)}mapCustomParametersToCustomData(t){let{custom:r}=t,a=Gt(t,["custom"]);if(r&&Qc(r)){let n=this.lowercaseKeys(r);return Object.assign(Object.assign({},a),{customData:Object.assign(Object.assign({},n),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),a={};return r.forEach(n=>{a[n.toLowerCase()]=t[n]}),a}validateParams(t,r){let{anonymizeIp:a}=t,n=Gt(t,["anonymizeIp"]);return a!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${a}`.toLowerCase())==-1&&(n.anonymizeIp=1),(r==se.view||r==se.click||r==se.search||r==se.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),r==se.view&&(n.location=this.limit(n.location,128)),(r=="pageview"||r=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,a=Gt(t,["userId"]);return YP(this.options.token)&&!r?(a.userId="anonymous",a):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,a=Gt(t,["trackingId"]);return r?t:(a.hasOwnProperty("custom")&&Qc(a.custom)&&(a.custom.hasOwnProperty("context_website")||a.custom.hasOwnProperty("siteName"))&&(a.trackingId=a.custom.context_website||a.custom.siteName),a.hasOwnProperty("customData")&&Qc(a.customData)&&(a.customData.hasOwnProperty("context_website")||a.customData.hasOwnProperty("siteName"))&&(a.trackingId=a.customData.context_website||a.customData.siteName),a)}limit(t,r){return typeof t!="string"?t:t.substring(0,r)}get baseUrl(){return ZP(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Ue;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Ue||(Ue={}));var x;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(x||(x={}));var zp={[x.triggerNotify]:"queryPipelineTriggers",[x.triggerExecute]:"queryPipelineTriggers",[x.triggerQuery]:"queryPipelineTriggers",[x.triggerRedirect]:"queryPipelineTriggers",[x.queryError]:"errors",[x.queryErrorBack]:"errors",[x.queryErrorClear]:"errors",[x.queryErrorRetry]:"errors",[x.pagerNext]:"getMoreResults",[x.pagerPrevious]:"getMoreResults",[x.pagerNumber]:"getMoreResults",[x.pagerResize]:"getMoreResults",[x.pagerScrolling]:"getMoreResults",[x.facetSearch]:"facet",[x.facetShowLess]:"facet",[x.facetShowMore]:"facet",[x.recommendation]:"recommendation",[x.likeSmartSnippet]:"smartSnippet",[x.dislikeSmartSnippet]:"smartSnippet",[x.expandSmartSnippet]:"smartSnippet",[x.collapseSmartSnippet]:"smartSnippet",[x.openSmartSnippetFeedbackModal]:"smartSnippet",[x.closeSmartSnippetFeedbackModal]:"smartSnippet",[x.sendSmartSnippetReason]:"smartSnippet",[x.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[x.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[x.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[x.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[x.clearRecentQueries]:"recentQueries",[x.recentResultClick]:"recentlyClickedDocuments",[x.clearRecentResults]:"recentlyClickedDocuments",[x.showLessFoldedResults]:"folding",[x.caseDetach]:"case",[x.likeGeneratedAnswer]:"generatedAnswer",[x.dislikeGeneratedAnswer]:"generatedAnswer",[x.openGeneratedAnswerSource]:"generatedAnswer",[x.generatedAnswerStreamEnd]:"generatedAnswer",[x.generatedAnswerSourceHover]:"generatedAnswer",[x.generatedAnswerCopyToClipboard]:"generatedAnswer",[x.generatedAnswerHideAnswers]:"generatedAnswer",[x.generatedAnswerShowAnswers]:"generatedAnswer",[x.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Ue.expandToFullUI]:"interface",[Ue.openUserActions]:"User Actions",[Ue.showPrecedingSessions]:"User Actions",[Ue.showFollowingSessions]:"User Actions",[Ue.clickViewedDocument]:"User Actions",[Ue.clickPageView]:"User Actions",[Ue.createArticle]:"createArticle"},Wa=class{constructor(){this.runtime=new RS,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(se.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(se.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(se.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(se.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return dS}};function tw(e){let t="";return e.filter(r=>{let a=r!==t;return t=r,a})}function rw(e){return e.map(t=>t.replace(/;/g,""))}function wS(e){let t=256,r=e.join(";");return r.length<=t?r:wS(e.slice(1))}var ES=e=>{let t=rw(e),r=tw(t);return wS(r)};function IS(e){let t=typeof e.partialQueries=="string"?e.partialQueries:ES(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:ES(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Ya=class{constructor(t,r){this.opts=t,this.provider=r;let a=t.enableAnalytics===!1||us();this.coveoAnalyticsClient=a?new Wa:new Je(t)}disable(){this.coveoAnalyticsClient instanceof Je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Wa}enable(){this.coveoAnalyticsClient=new Je(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(x.interfaceLoad)}logInterfaceLoad(){return F(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(x.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return F(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(x.recommendation)}logRecommendation(){return F(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(x.recommendationOpen,t,r)}logRecommendationOpen(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(x.staticFilterClearAll,t)}logStaticFilterClearAll(t){return F(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(x.staticFilterSelect,t)}logStaticFilterSelect(t){return F(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(x.staticFilterDeselect,t)}logStaticFilterDeselect(t){return F(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(x.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return F(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(x.interfaceChange,t)}logInterfaceChange(t){return F(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(x.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return F(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(x.didyoumeanClick)}logDidYouMeanClick(){return F(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(x.resultsSort,t)}logResultsSort(t){return F(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(x.searchboxSubmit)}logSearchboxSubmit(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(x.searchboxClear)}logSearchboxClear(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(x.searchboxAsYouType)}logSearchboxAsYouType(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(x.breadcrumbFacet,t)}logBreadcrumbFacet(t){return F(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(x.breadcrumbResetAll)}logBreadcrumbResetAll(){return F(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(x.documentQuickview,t,r)}logDocumentQuickview(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(x.documentOpen,t,r)}logDocumentOpen(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(x.omniboxAnalytics,IS(t))}logOmniboxAnalytics(t){return F(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(x.omniboxFromLink,IS(t))}logOmniboxFromLink(t){return F(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(x.searchFromLink)}logSearchFromLink(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(x.triggerNotify,t)}logTriggerNotify(t){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(x.triggerExecute,t)}logTriggerExecute(t){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(x.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(x.undoTriggerQuery,t)}logUndoTriggerQuery(t){return F(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(x.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(x.pagerResize,t)}logPagerResize(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(x.pagerNumber,t)}logPagerNumber(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(x.pagerNext,t)}logPagerNext(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(x.pagerPrevious,t)}logPagerPrevious(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(x.pagerScrolling)}logPagerScrolling(){return F(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(x.facetClearAll,t)}logFacetClearAll(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(x.facetSearch,t)}logFacetSearch(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(x.facetSelect,t)}logFacetSelect(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(x.facetDeselect,t)}logFacetDeselect(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(x.facetExclude,t)}logFacetExclude(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(x.facetUnexclude,t)}logFacetUnexclude(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(x.facetSelectAll,t)}logFacetSelectAll(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(x.facetUpdateSort,t)}logFacetUpdateSort(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(x.facetShowMore,t)}logFacetShowMore(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(x.facetShowLess,t)}logFacetShowLess(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(x.queryError,t)}logQueryError(t){return F(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return F(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(x.queryErrorBack);return{description:t.description,log:()=>F(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(x.queryErrorBack)})}})}logQueryErrorBack(){return F(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return F(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(x.queryErrorRetry);return{description:t.description,log:()=>F(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(x.queryErrorRetry)})}})}logQueryErrorRetry(){return F(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return F(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(x.queryErrorClear);return{description:t.description,log:()=>F(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(x.queryErrorClear)})}})}logQueryErrorClear(){return F(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(x.likeSmartSnippet)}logLikeSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(x.dislikeSmartSnippet)}logDislikeSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(x.expandSmartSnippet)}logExpandSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(x.collapseSmartSnippet)}logCollapseSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(x.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(x.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return F(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(x.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(x.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(x.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(x.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(x.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(x.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(x.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(x.copyToClipboard,t,r)}logCopyToClipboard(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(x.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(x.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(x.recentQueryClick)}logRecentQueryClick(){return F(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(x.clearRecentQueries)}logClearRecentQueries(){return F(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(x.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(x.clearRecentResults)}logClearRecentResults(){return F(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(x.noResultsBack)}logNoResultsBack(){return F(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(x.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(x.showLessFoldedResults)}logShowLessFoldedResults(){return F(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var a;return{actionCause:r,customData:(a=t.payload)===null||a===void 0?void 0:a.customData}}makeCustomEvent(t,r,a=zp[t]){return F(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:a,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(t,r,a=zp[t]){return F(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(t,r,a)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,a){return F(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),a),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(t,r,a){return F(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,a)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return F(this,void 0,void 0,function*(){let a=yield this.getBaseSearchEventRequest(t,r),n=yield this.coveoAnalyticsClient.makeSearchEvent(a);return{description:this.makeEventDescription(n,t),log:({searchUID:o})=>n.log({searchQueryUid:o})}})}makeClickEvent(t,r,a,n){return F(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),i=yield this.coveoAnalyticsClient.makeClickEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(t,r,a,n){return F(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,a,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var a,n;return F(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return F(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Je?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(x.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return F(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(x.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return F(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(x.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return F(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(x.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(x.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(x.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(x.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(x.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(x.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return F(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(x.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return F(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(x.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},jc=Object.assign({},cs),kS=Object.keys(jc).map(e=>jc[e]),ls=class extends fS{constructor({client:t,uuidGenerator:r=Ga}){super({client:t,uuidGenerator:r});this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>kS.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(kS.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(jc.pageview,{newEventType:se.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(jc.event,{newEventType:se.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var a;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((a=this.actionData)!==null&&a!==void 0?a:{}).length>0?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},o),n),r)}getTicketPayload(){return cP(this.ticket)}};ls.Id="svc";var Uc;(function(e){e.click="click",e.flowStart="flowStart"})(Uc||(Uc={}));var qt;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(qt||(qt={}));var _c;(function(e){e.quit="Quit",e.solved="Solved"})(_c||(_c={}));var Gp=class{constructor(t,r){var a;this.options=t,this.provider=r;let n=((a=t.enableAnalytics)!==null&&a!==void 0?a:!0)&&!us();this.coveoAnalyticsClient=n?new Je(t):new Wa,this.svc=new ls({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof Je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Wa,this.svc=new ls({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Je(this.options),this.svc=new ls({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(qt.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(qt.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(qt.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.svc.setAction(qt.suggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logRateDocumentSuggestion(t){return this.svc.setAction(qt.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(qt.nextCaseStep,{stage:t==null?void 0:t.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(qt.caseCancelled,{reason:_c.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(qt.caseSolved,{reason:_c.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(qt.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Uc.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Uc.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},aw=e=>{let t={};return e.caseContext&&Object.keys(e.caseContext).forEach(r=>{var a;let n=(a=e.caseContext)===null||a===void 0?void 0:a[r];if(n){let o=`context_${r}`;t[o]=n}}),t},W=(e,t=!0)=>{let{caseContext:r,caseId:a,caseNumber:n}=e,o=Gt(e,["caseContext","caseId","caseNumber"]),i=aw(e);return Object.assign(Object.assign(Object.assign({CaseId:a,CaseNumber:n},o),!!i.context_Case_Subject&&{CaseSubject:i.context_Case_Subject}),t&&i)},Wp=class{constructor(t,r){this.opts=t,this.provider=r;let a=t.enableAnalytics===!1||us();this.coveoAnalyticsClient=a?new Wa:new Je(t)}disable(){this.coveoAnalyticsClient instanceof Je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Wa}enable(){this.coveoAnalyticsClient=new Je(this.opts)}logInterfaceLoad(t){if(t){let r=W(t);return this.logSearchEvent(x.interfaceLoad,r)}return this.logSearchEvent(x.interfaceLoad)}logInterfaceChange(t){let r=W(t);return this.logSearchEvent(x.interfaceChange,r)}logStaticFilterDeselect(t){let r=W(t);return this.logSearchEvent(x.staticFilterDeselect,r)}logFetchMoreResults(t){if(t){let r=W(t);return this.logCustomEvent(x.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(x.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(t){let r=W(t);return this.logSearchEvent(x.breadcrumbFacet,r)}logBreadcrumbResetAll(t){if(t){let r=W(t);return this.logSearchEvent(x.breadcrumbResetAll,r)}return this.logSearchEvent(x.breadcrumbResetAll)}logFacetSelect(t){let r=W(t);return this.logSearchEvent(x.facetSelect,r)}logFacetExclude(t){let r=W(t);return this.logSearchEvent(x.facetExclude,r)}logFacetDeselect(t){let r=W(t);return this.logSearchEvent(x.facetDeselect,r)}logFacetUpdateSort(t){let r=W(t);return this.logSearchEvent(x.facetUpdateSort,r)}logFacetClearAll(t){let r=W(t);return this.logSearchEvent(x.facetClearAll,r)}logFacetShowMore(t){let r=W(t,!1);return this.logCustomEvent(x.facetShowMore,r)}logFacetShowLess(t){let r=W(t,!1);return this.logCustomEvent(x.facetShowLess,r)}logQueryError(t){let r=W(t,!1);return this.logCustomEvent(x.queryError,r)}logPagerNumber(t){let r=W(t,!1);return this.logCustomEvent(x.pagerNumber,r)}logPagerNext(t){let r=W(t,!1);return this.logCustomEvent(x.pagerNext,r)}logPagerPrevious(t){let r=W(t,!1);return this.logCustomEvent(x.pagerPrevious,r)}logDidYouMeanAutomatic(t){if(t){let r=W(t);return this.logSearchEvent(x.didyoumeanAutomatic,r)}return this.logSearchEvent(x.didyoumeanAutomatic)}logDidYouMeanClick(t){if(t){let r=W(t);return this.logSearchEvent(x.didyoumeanClick,r)}return this.logSearchEvent(x.didyoumeanClick)}logResultsSort(t){let r=W(t);return this.logSearchEvent(x.resultsSort,r)}logSearchboxSubmit(t){if(t){let r=W(t);return this.logSearchEvent(x.searchboxSubmit,r)}return this.logSearchEvent(x.searchboxSubmit)}logContextChanged(t){let r=W(t);return this.logSearchEvent(Ue.contextChanged,r)}logExpandToFullUI(t){let r=W(t);return this.logCustomEvent(Ue.expandToFullUI,r)}logOpenUserActions(t){let r=W(t,!1);return this.logCustomEvent(Ue.openUserActions,r)}logShowPrecedingSessions(t){let r=W(t,!1);return this.logCustomEvent(Ue.showPrecedingSessions,r)}logShowFollowingSessions(t){let r=W(t,!1);return this.logCustomEvent(Ue.showFollowingSessions,r)}logViewedDocumentClick(t,r){return this.logCustomEvent(Ue.clickViewedDocument,Object.assign(Object.assign({},W(r,!1)),{document:t}))}logPageViewClick(t,r){return this.logCustomEvent(Ue.clickPageView,Object.assign(Object.assign({},W(r,!1)),{pageView:t}))}logCreateArticle(t,r){return this.logCustomEvent(Ue.createArticle,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logDocumentOpen(t,r,a){return this.logClickEvent(x.documentOpen,t,r,a?W(a,!1):void 0)}logCopyToClipboard(t,r,a){return this.logClickEvent(x.copyToClipboard,t,r,a?W(a,!1):void 0)}logCaseSendEmail(t,r,a){return this.logClickEvent(x.caseSendEmail,t,r,a?W(a,!1):void 0)}logFeedItemTextPost(t,r,a){return this.logClickEvent(x.feedItemTextPost,t,r,a?W(a,!1):void 0)}logDocumentQuickview(t,r,a){let n={documentTitle:t.documentTitle,documentURL:t.documentUrl};return this.logClickEvent(x.documentQuickview,t,r,a?Object.assign(Object.assign({},W(a,!1)),n):n)}logCaseAttach(t,r,a){let n={documentTitle:t.documentTitle,documentURL:t.documentUrl,resultUriHash:t.documentUriHash};return this.logClickEvent(x.caseAttach,t,r,a?Object.assign(Object.assign({},W(a,!1)),n):n)}logCaseDetach(t,r){return this.logCustomEvent(x.caseDetach,r?Object.assign(Object.assign({},W(r,!1)),{resultUriHash:t}):{resultUriHash:t})}logLikeSmartSnippet(t){return this.logCustomEvent(x.likeSmartSnippet,t?W(t,!1):void 0)}logDislikeSmartSnippet(t){return this.logCustomEvent(x.dislikeSmartSnippet,t?W(t,!1):void 0)}logExpandSmartSnippet(t){return this.logCustomEvent(x.expandSmartSnippet,t?W(t,!1):void 0)}logCollapseSmartSnippet(t){return this.logCustomEvent(x.collapseSmartSnippet,t?W(t,!1):void 0)}logOpenSmartSnippetFeedbackModal(t){return this.logCustomEvent(x.openSmartSnippetFeedbackModal,t?W(t,!1):void 0)}logCloseSmartSnippetFeedbackModal(t){return this.logCustomEvent(x.closeSmartSnippetFeedbackModal,t?W(t,!1):void 0)}logSmartSnippetFeedbackReason(t,r,a){return this.logCustomEvent(x.sendSmartSnippetReason,a?Object.assign(Object.assign({},W(a,!1)),{reason:t,details:r}):{reason:t,details:r})}logExpandSmartSnippetSuggestion(t,r){let a="documentId"in t?t:{documentId:t};return this.logCustomEvent(x.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},W(r,!1)),a):a)}logCollapseSmartSnippetSuggestion(t,r){let a="documentId"in t?t:{documentId:t};return this.logCustomEvent(x.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},W(r,!1)),a):a)}logOpenSmartSnippetSource(t,r,a){return this.logClickEvent(x.openSmartSnippetSource,t,r,a?W(a,!1):void 0)}logOpenSmartSnippetSuggestionSource(t,r,a){return this.logClickEvent(x.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},W(a,!1)),r):r)}logOpenSmartSnippetInlineLink(t,r,a){return this.logClickEvent(x.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},a?Object.assign(Object.assign({},W(a,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(t,r,a){return this.logClickEvent(x.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},W(a,!1)),r):r)}logLikeGeneratedAnswer(t,r){return this.logCustomEvent(x.likeGeneratedAnswer,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logDislikeGeneratedAnswer(t,r){return this.logCustomEvent(x.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logOpenGeneratedAnswerSource(t,r){return this.logCustomEvent(x.openGeneratedAnswerSource,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logGeneratedAnswerSourceHover(t,r){return this.logCustomEvent(x.generatedAnswerSourceHover,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logGeneratedAnswerCopyToClipboard(t,r){return this.logCustomEvent(x.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logGeneratedAnswerHideAnswers(t,r){return this.logCustomEvent(x.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logGeneratedAnswerShowAnswers(t,r){return this.logCustomEvent(x.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logGeneratedAnswerFeedbackSubmit(t,r){return this.logCustomEvent(x.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logRephraseGeneratedAnswer(t,r){return this.logSearchEvent(x.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logRetryGeneratedAnswer(t){return this.logSearchEvent(x.retryGeneratedAnswer,t?Object.assign({},W(t,!1)):{})}logGeneratedAnswerStreamEnd(t,r){return this.logCustomEvent(x.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logCustomEvent(t,r){return F(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(a)),{eventType:zp[t],eventValue:t});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logSearchEvent(t,r){return F(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(t,r))})}logClickEvent(t,r,a,n){return F(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(o)})}logShowMoreFoldedResults(t,r,a){return F(this,void 0,void 0,function*(){return this.logClickEvent(x.showMoreFoldedResults,t,r,a?W(a,!1):void 0)})}logShowLessFoldedResults(t){return F(this,void 0,void 0,function*(){return this.logCustomEvent(x.showLessFoldedResults,t?W(t,!1):void 0)})}getBaseCustomEventRequest(t){return F(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var a,n;return F(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return F(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Je?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};var Yt=(e,t)=>{let r=a=>a.facetId===t;if("productListing"in e&&e.productListing&&"facets"in e.productListing&&"results"in e.productListing.facets)return e.productListing.facets.results.find(r);if("search"in e&&e.search)return e.search.response.facets.find(r)},Yp=(e,t)=>{var r;return(r=e.facetSet[t])==null?void 0:r.request};function nw(e,t){return!!t&&t.facetId in e.facetSet}var ds=(e,t)=>{let r=Yt(e,t);if(nw(e,r))return r},ow=(e,t)=>{let r=ds(e,t);return r?r.values.filter(a=>a.state==="selected"):[]},OS=(e,t)=>{let r=ds(e,t);return r?r.values.filter(a=>a.state!=="idle"):[]},Kt=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function qS(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let a=r.find(n=>n.state==="selected");return a&&(t=[...t,a],r=[]),{parents:t,values:r}}function ut(e){let{activeValue:t,ancestryMap:r}=iw(e);return t?sw(t,r):[]}function iw(e){let t=[...e],r=new Map;for(;t.length>0;){let a=t.shift();if(a.state==="selected")return{activeValue:a,ancestryMap:r};if(r)for(let n of a.children)r.set(n,a);t.unshift(...a.children)}return{}}function sw(e,t){let r=[];if(!e)return[];let a=e;do r.unshift(a),a=t.get(a);while(a);return r}function cw(e,t){return!!t&&t.facetId in e.categoryFacetSet}var Kp=(e,t)=>{let r=Yt(e,t);if(cw(e,r))return r},Jp=(e,t)=>{var r;return(r=e.categoryFacetSet[t])==null?void 0:r.request},TS=(e,t)=>{var a;let r=Kp(e,t);return ut((a=r==null?void 0:r.values)!=null?a:[])},Xp=(e,t)=>{var a;let r=Jp(e,t);return ut((a=r==null?void 0:r.currentValues)!=null?a:[])};var _n=(e,t)=>{let r=NS(t,e),a=r?r.field:"",n=Zp(a,e);return{facetId:e,facetField:a,facetTitle:n}};function ps(e,t){let{facetId:r,facetValue:a}=e,n=_n(r,t),o=LS(t,r);return{...n,facetValue:o==="hierarchical"?MS(t,r):a}}function lt(e){var t,r,a,n,o;return{facetSet:(t=e.facetSet)!=null?t:_t(),categoryFacetSet:(r=e.categoryFacetSet)!=null?r:Ut(),dateFacetSet:(a=e.dateFacetSet)!=null?a:$t(),numericFacetSet:(n=e.numericFacetSet)!=null?n:Ht(),automaticFacetSet:(o=e.automaticFacetSet)!=null?o:oa()}}var $c=e=>{let t=[];return dw(e).forEach((r,a)=>{let n=LS(e,r.facetId),o=hw(r,a+1);if(lw(r)){if(!!!Xp(e,r.facetId).length)return;t.push({...o,...mw(e,r.facetId),facetType:n,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let u=DS(i,s+1,n),c=uw(r)?VS(i):fw(i);t.push({...o,...u,...c})})}),pw(e).forEach((r,a)=>{let n=gw(r,a+1);r.values.forEach((o,i)=>{if(o.state==="idle")return;let s=DS(o,i+1,"specific"),u=VS(o);t.push({...n,...s,...u})})}),t},uw=e=>e.type==="specific",lw=e=>e.type==="hierarchical",dw=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),pw=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),DS=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),fw=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),VS=e=>({displayValue:e.value,value:e.value}),MS=(e,t)=>Xp(e,t).map(a=>a.value).join(";"),mw=(e,t)=>{let r=1,a=MS(e,t);return{value:a,valuePosition:r,displayValue:a}},gw=(e,t)=>({title:Zp(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),hw=(e,t)=>({title:Zp(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Zp=(e,t)=>`${e}_${t}`,NS=(e,t)=>{var r,a,n,o,i;return((r=e.facetSet[t])==null?void 0:r.request)||((a=e.categoryFacetSet[t])==null?void 0:a.request)||((n=e.dateFacetSet[t])==null?void 0:n.request)||((o=e.numericFacetSet[t])==null?void 0:o.request)||((i=e.automaticFacetSet.set[t])==null?void 0:i.response)},LS=(e,t)=>{let r=NS(e,t);return r?r.type:"specific"};var fs="2.42.0";var Sw=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Qr=class{constructor(t){this.getState=t;this.state=t()}getLanguage(){return Sw(this.state)}getBaseMetadata(){let{context:t}=this.state,r=(t==null?void 0:t.contextValues)||{},a={};for(let[n,o]of Object.entries(r)){let i=`context_${n}`;a[i]=o}return a.coveoHeadlessVersion=fs,a}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||He()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var mt=e=>new Je(e).getCurrentVisitorId(),ef=e=>{let t=new Je(e);t.clear(),t.deleteHttpOnlyVisitorId()},Jt=new sS.HistoryStore,Xt=(e,t)=>typeof t=="function"?(...r)=>{let a=Ji(r[0]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics preprocessRequest. Returning original request."),a}}:void 0,Zt=(e,t)=>(...r)=>{let a=Ji(r[1]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics hook. Returning original request."),a}};var Hc=class extends Qr{constructor(){super(...arguments);this.getFacetRequest=t=>{var r,a,n,o,i,s,u,c,l,d;return((a=(r=this.state.facetSet)==null?void 0:r[t])==null?void 0:a.request)||((o=(n=this.state.categoryFacetSet)==null?void 0:n[t])==null?void 0:o.request)||((s=(i=this.state.dateFacetSet)==null?void 0:i[t])==null?void 0:s.request)||((c=(u=this.state.numericFacetSet)==null?void 0:u[t])==null?void 0:c.request)||((d=(l=this.state.automaticFacetSet)==null?void 0:l.set[t])==null?void 0:d.response)}}getFacetState(){return $c(lt(this.getState()))}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||Hc.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,a;let t=this.getState();return((r=t.search)==null?void 0:r.searchResponseId)||((a=t.search)==null?void 0:a.response.searchUid)||qe().response.searchUid}getSplitTestRunName(){var t;return(t=this.state.search)==null?void 0:t.response.splitTestRun}getSplitTestRunVersion(){var a;let t=!!this.getSplitTestRunName(),r=((a=this.state.search)==null?void 0:a.response.pipeline)||this.state.pipeline||Hc.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var n,o,i;let t=this.getState(),r=super.getBaseMetadata(),a=(i=(o=(n=t.search)==null?void 0:n.response)==null?void 0:o.extendedResults)==null?void 0:i.generativeQuestionAnsweringId;return a&&(r.generativeQuestionAnsweringId=a),r}getFacetMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:t,facetField:n,facetValue:r,facetTitle:`${n}_${t}`}}getFacetClearAllMetadata(t){var n;let r=this.getFacetRequest(t),a=(n=r==null?void 0:r.field)!=null?n:"";return{...this.getBaseMetadata(),facetId:t,facetField:a,facetTitle:`${a}_${t}`}}getFacetSortMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:t,facetField:n,criteria:r,facetTitle:`${n}_${t}`}}getRangeFacetBreadcrumbMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:t,facetField:n,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${n}_${t}`}}getResultSortMetadata(){var t;return{...this.getBaseMetadata(),resultsSortBy:(t=this.state.sortCriteria)!=null?t:Ke()}}getStaticFilterToggleMetadata(t,r){return{...this.getBaseMetadata(),staticFilterId:t,staticFilterValue:r}}getStaticFilterClearAllMetadata(t){return{...this.getBaseMetadata(),staticFilterId:t}}getUndoTriggerQueryMetadata(t){return{...this.getBaseMetadata(),undoneQuery:t}}getCategoryFacetBreadcrumbMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),categoryFacetId:t,categoryFacetField:n,categoryFacetPath:r,categoryFacetTitle:`${n}_${t}`}}getOmniboxAnalyticsMetadata(t,r){let a=this.state.querySuggest&&this.state.querySuggest[t],n=a.completions.map(u=>u.expression),o=a.partialQueries.length-1,i=a.partialQueries[o]||"",s=a.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(r),partialQuery:i,partialQueries:a.partialQueries.length>0?a.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:s}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(t){return{...this.getBaseMetadata(),...t}}getGeneratedAnswerMetadata(){var a;let t=this.getState(),r={};return((a=t.generatedAnswer)==null?void 0:a.isVisible)!==void 0&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var t;return(t=this.results)==null?void 0:t.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var t;return(t=this.state.search)==null?void 0:t.response.results}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||Ce().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||qe().duration}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.totalCountFiltered)||qe().response.totalCountFiltered}},U=Hc;U.fallbackPipelineName="default";var QS=e=>{let t=e.configuration.accessToken,r=e.configuration.analytics.trackingId,{emit:a}=eS({url:e.configuration.analytics.nextApiBaseUrl,token:t,trackingId:r});return a},BS=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new U(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ya({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Xt(e,a),beforeSendHooks:[Zt(e,r),(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l},tf=()=>{let t=Jt.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};async function jS(e,t){let r=e.getReader(),a;for(;!(a=await r.read()).done;)t(a.value)}function US(e){let t,r,a,n=!1;return function(i){t===void 0?(t=i,r=0,a=-1):t=yw(t,i);let s=t.length,u=0;for(;r<s;){n&&(t[r]===10&&(u=++r),n=!1);let c=-1;for(;r<s&&c===-1;++r)switch(t[r]){case 58:a===-1&&(a=r-u);break;case 13:n=!0;case 10:c=r;break}if(c===-1)break;e(t.subarray(u,c),a),u=r,a=-1}u===s?t=void 0:u!==0&&(t=t.subarray(u),r-=u)}}function _S(e,t,r){let a=$S(),n=new TextDecoder;return function(i,s){if(i.length===0)r==null||r(a),a=$S();else if(s>0){let u=n.decode(i.subarray(0,s)),c=s+(i[s+1]===32?2:1),l=n.decode(i.subarray(c));switch(u){case"data":a.data=a.data?a.data+`
`+l:l;break;case"event":a.event=l;break;case"id":e(a.id=l);break;case"retry":let d=parseInt(l,10);isNaN(d)||t(a.retry=d);break}}}}function yw(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function $S(){return{data:"",event:"",id:"",retry:void 0}}var Cw=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},zc="text/event-stream",vw=1e3,HS="last-event-id";function rf(e,t){var{signal:r,headers:a,onopen:n,onmessage:o,onclose:i,onerror:s,openWhenHidden:u,fetch:c}=t,l=Cw(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,f)=>{let p=Object.assign({},a);p.accept||(p.accept=zc);let m;function g(){m?.abort(),document.hidden||Q()}u||document.addEventListener("visibilitychange",g);let y=vw,S=0;function C(){document.removeEventListener("visibilitychange",g),window.clearTimeout(S),m?.abort()}r==null||r.addEventListener("abort",()=>{C(),d()});let R=c??window.fetch,P=n??xw;async function Q(){var G;m=typeof AbortController=="undefined"?null:new AbortController;try{let Z=await R(e,Object.assign(Object.assign({},l),{headers:p,signal:m?.signal}));await P(Z),await jS(Z.body,US(_S($=>{$?p[HS]=$:delete p[HS]},$=>{y=$},o))),i==null||i(),C(),d()}catch(Z){if(!m?.signal.aborted)try{let $=(G=s==null?void 0:s(Z))!==null&&G!==void 0?G:y;window.clearTimeout(S),S=window.setTimeout(Q,$)}catch($){C(),f($)}}}Q()})}function xw(e){let t=e.headers.get("content-type");if(!(t==null?void 0:t.startsWith(zc)))throw new Error(`Expected content-type to be ${zc}, Actual: ${t}`)}var bw=(e,t,r)=>new Ua(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,zS=3,Fw=5e3,Rw="text/event-stream",af=1,GS=class extends Error{},Gc=class extends Error{constructor(t){super(t.message);this.payload=t}},nf=class{constructor(t){this.logger=t.logger}streamGeneratedAnswer(t,r){let{url:a,organizationId:n,streamId:o,accessToken:i}=t,{write:s,abort:u,close:c,resetAnswer:l}=r;if(!o){this.logger.error("No stream ID found");return}let d=0,f,p=()=>{g==null||g.abort(),l(),y()},m=()=>{f=hh(p,f,Fw)},g=vc(),y=()=>rf(bw(a,n,o),{method:"GET",headers:{Authorization:`Bearer ${i}`,accept:"*/*"},signal:g==null?void 0:g.signal,async onopen(S){if(S.ok&&S.headers.get("content-type")===Rw)return;throw S.status>=400&&S.status<500&&S.status!==429?new Gc({message:"Error opening stream",code:S.status}):new GS},onmessage:S=>{let C=JSON.parse(S.data);if(C.finishReason==="ERROR"){clearTimeout(f),g==null||g.abort(),u({message:C.errorMessage,code:C.statusCode});return}s(C),d=0,C.finishReason==="COMPLETED"?(clearTimeout(f),c()):m()},onerror:S=>{if(clearTimeout(f),S instanceof Gc)throw g==null||g.abort(),u(S),S;if(++d>zS){this.logger.info("Maximum retry exceeded.");let C={message:"Failed to complete stream.",code:af};throw g==null||g.abort(),u(C),new Gc(C)}this.logger.info(`Retrying...(${d}/${zS})`),l()}});return y(),g}};var Wc=class{constructor(t){this.state=t()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||He()}},WS=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new Wc(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Gp({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Xt(e,a),beforeSendHooks:[Zt(e,r),(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};var $n=class extends Qr{constructor(){super(...arguments);this.initialState=ns()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var t;return(t=this.state.productListing)==null?void 0:t.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},YS=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new $n(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ya({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Xt(e,a),beforeSendHooks:[Zt(e,r),(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};var Yc=class extends Qr{getSearchUID(){var r,a;let t=this.getState();return((r=t.search)==null?void 0:r.searchResponseId)||((a=t.search)==null?void 0:a.response.searchUid)||qe().response.searchUid}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return $c(lt(this.state))}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||Ce().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||qe().duration}mapResultsToAnalyticsDocument(){var t;return(t=this.state.search)==null?void 0:t.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.results.length)||qe().response.results.length}},KS=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new Yc(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Wp({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Xt(e,a),beforeSendHooks:[Zt(e,r),(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};var Hn=class extends Qr{constructor(){super(...arguments);this.initialState=ns()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var t;return(t=this.state.productListing)==null?void 0:t.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},JS=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new Hn(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ya({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Xt(e,a),beforeSendHooks:[Zt(e,r),(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};function Kc(e){let t=XS(e),r=[e,...t].filter(n=>n.parentResult).map(n=>n.parentResult);return mh([e,...t,...r],n=>n.uniqueId)}function XS(e){return e.childResults?e.childResults.flatMap(t=>[t,...XS(t)]):[]}function zn(e,t){return{...new U(t).getBaseMetadata(),actionCause:e,type:e}}function Aw(e){return Object.assign(e,{instantlyCallable:!0})}function Pw(e,t){let r=o=>Aw(ae(e,o)),a=r(async(o,{getState:i,extra:s})=>{let{analyticsClientMiddleware:u,preprocessRequest:c,logger:l}=s;return await(await t({getState:i,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})).log({state:i(),extra:s})});return Object.assign(a,{prepare:async({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:u})=>{let{description:c,log:l}=await t({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:u});return{description:c,action:r(async(d,{getState:f,extra:p})=>await l({state:f(),extra:p}))}}}),a}var ms=(e,t,r)=>{function a(...n){let o=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return Iw(o)}return a},ww=e=>e.configuration.analytics.analyticsMode==="legacy",Ew=e=>e.configuration.analytics.analyticsMode==="next",Iw=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:a,analyticsType:n,analyticsConfigurator:o,providerClass:i})=>(r!=null||(r=s=>new i(s)),Pw(e,async({getState:s,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})=>{let d=[],f={log:async({state:S})=>{for(let C of d)await C(S)}},p=s(),m=o({getState:s,logger:l,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(s)}),g=await t(m,s());f.description=g==null?void 0:g.description,d.push(async S=>{ww(S)&&await kw(g,r,S,l,m.coveoAnalyticsClient)});let y=QS(p);return d.push(async S=>{if(Ew(S)&&n&&a){let C=a(S);await Nw(y,n,C)}}),f}));async function kw(e,t,r,a,n){t(()=>r);let o=await(e==null?void 0:e.log({searchUID:t(()=>r).getSearchUID()}));a.info({client:n,response:o},"Analytics response")}var ZS=e=>(t,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async a=>{e(t,r)}}),k=ms(BS,e=>e,U),cU=ms(WS,ZS,Wc),uU=ms(KS,ZS,Yc),ey=ms(YS,e=>e,$n),ty=ms(JS,e=>e,Hn);var Te=(e,t)=>{var o;let r=i=>{var s,u;return i+((u=(s=t.pagination)==null?void 0:s.firstResult)!=null?u:0)},a=-1,n=(o=t.search)==null?void 0:o.results;return a=ay(e,n),a<0&&(a=Mw(e,n)),a<0&&(a=0),Ow(e,r(a),t)};function Ow(e,t,r){let a=e.raw.collection;return{collectionName:typeof a=="string"?a:"default",documentAuthor:Dw(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:Vw(e),queryPipeline:r.pipeline||Ot()}}var _e=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),ry={urihash:new w,sourcetype:new w,permanentid:new w},Gn={uniqueId:O,raw:new q({values:ry}),title:O,uri:O,clickUri:O,rankingModifier:new w({required:!1,emptyAllowed:!0})};function qw(e){return Object.assign({},...Object.keys(ry).map(t=>({[t]:e[t]})))}function Tw(e){return Object.assign({},...Object.keys(Gn).map(t=>({[t]:e[t]})),{raw:qw(e.raw)})}function Dw(e){let t=e.raw.author;return oe(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function Vw(e){let t=e.raw.source;return oe(t)?"unknown":t}var nt=e=>new ee(Gn).validate(Tw(e));function Mw(e,t){for(let[r,a]of t.entries()){let n=Kc(a);if(ay(e,n)!==-1)return r}return-1}function ay(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}async function Nw(e,t,r){await e(t,r)}var of=e=>b(e,{evt:O,type:Se}),ny=e=>k("analytics/generic/search",t=>{of(e);let{evt:r,meta:a}=e;return t.makeSearchEvent(r,a)}),oy=e=>k("analytics/generic/click",(t,r)=>(nt(e.result),of(e),t.makeClickEvent(e.evt,Te(e.result,r),_e(e.result),e.meta))),iy=e=>k("analytics/generic/custom",t=>(of(e),t.makeCustomEventWithType(e.evt,e.type,e.meta))),Jc=()=>k("analytics/interface/load",e=>e.makeInterfaceLoad()),sa=()=>k("analytics/interface/change",(e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),Xc=()=>k("analytics/interface/searchFromLink",e=>e.makeSearchFromLink()),Zc=e=>k("analytics/interface/omniboxFromLink",t=>t.makeOmniboxFromLink(e));var L=(V=>(V.interfaceLoad="interfaceLoad",V.interfaceChange="interfaceChange",V.didyoumeanAutomatic="didyoumeanAutomatic",V.didyoumeanClick="didyoumeanClick",V.resultsSort="resultsSort",V.searchboxSubmit="searchboxSubmit",V.searchboxClear="searchboxClear",V.searchboxAsYouType="searchboxAsYouType",V.breadcrumbFacet="breadcrumbFacet",V.breadcrumbResetAll="breadcrumbResetAll",V.documentQuickview="documentQuickview",V.documentOpen="documentOpen",V.omniboxAnalytics="omniboxAnalytics",V.omniboxFromLink="omniboxFromLink",V.searchFromLink="searchFromLink",V.triggerNotify="notify",V.triggerExecute="execute",V.triggerQuery="query",V.undoTriggerQuery="undoQuery",V.triggerRedirect="redirect",V.pagerResize="pagerResize",V.pagerNumber="pagerNumber",V.pagerNext="pagerNext",V.pagerPrevious="pagerPrevious",V.pagerScrolling="pagerScrolling",V.staticFilterClearAll="staticFilterClearAll",V.staticFilterSelect="staticFilterSelect",V.staticFilterDeselect="staticFilterDeselect",V.facetClearAll="facetClearAll",V.facetSearch="facetSearch",V.facetSelect="facetSelect",V.facetSelectAll="facetSelectAll",V.facetDeselect="facetDeselect",V.facetExclude="facetExclude",V.facetUnexclude="facetUnexclude",V.facetUpdateSort="facetUpdateSort",V.facetShowMore="showMoreFacetResults",V.facetShowLess="showLessFacetResults",V.queryError="query",V.queryErrorBack="errorBack",V.queryErrorClear="errorClearQuery",V.queryErrorRetry="errorRetry",V.recommendation="recommendation",V.recommendationInterfaceLoad="recommendationInterfaceLoad",V.recommendationOpen="recommendationOpen",V.likeSmartSnippet="likeSmartSnippet",V.dislikeSmartSnippet="dislikeSmartSnippet",V.expandSmartSnippet="expandSmartSnippet",V.collapseSmartSnippet="collapseSmartSnippet",V.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",V.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",V.sendSmartSnippetReason="sendSmartSnippetReason",V.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",V.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",V.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",V.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",V.openSmartSnippetSource="openSmartSnippetSource",V.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",V.openSmartSnippetInlineLink="openSmartSnippetInlineLink",V.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",V.recentQueryClick="recentQueriesClick",V.clearRecentQueries="clearRecentQueries",V.recentResultClick="recentResultClick",V.clearRecentResults="clearRecentResults",V.noResultsBack="noResultsBack",V.showMoreFoldedResults="showMoreFoldedResults",V.showLessFoldedResults="showLessFoldedResults",V.copyToClipboard="copyToClipboard",V.caseSendEmail="Case.SendEmail",V.feedItemTextPost="FeedItem.TextPost",V.caseAttach="caseAttach",V.caseDetach="caseDetach",V.retryGeneratedAnswer="retryGeneratedAnswer",V.likeGeneratedAnswer="likeGeneratedAnswer",V.dislikeGeneratedAnswer="dislikeGeneratedAnswer",V.openGeneratedAnswerSource="openGeneratedAnswerSource",V.generatedAnswerStreamEnd="generatedAnswerStreamEnd",V.historyForward="historyForward",V.historyBackward="historyBackward",V))(L||{});var sf=()=>Se,sy=()=>O,er=v("configuration/updateBasicConfiguration",e=>b(e,{accessToken:Se,organizationId:Se,platformUrl:Se})),gt=v("configuration/updateSearchConfiguration",e=>b(e,{apiBaseUrl:Se,pipeline:new w({required:!1,emptyAllowed:!0}),searchHub:Se,timezone:Se,locale:Se,authenticationProviders:new X({required:!1,each:O})})),ca=v("configuration/updateAnalyticsConfiguration",e=>(hc()&&(e.enabled=!1),b(e,{enabled:new K({default:!0}),originContext:sf(),originLevel2:sf(),originLevel3:sf(),apiBaseUrl:Se,nextApiBaseUrl:Se,runtimeEnvironment:new fe,anonymous:new K({default:!1}),deviceId:Se,userDisplayName:Se,documentLocation:Se,trackingId:Se,analyticsMode:new w({constrainTo:["legacy","next"],required:!1,default:"legacy"})}))),Wn=v("configuration/analytics/disable"),Yn=v("configuration/analytics/enable"),eu=v("configuration/analytics/originlevel2",e=>b(e,{originLevel2:sy()})),tu=v("configuration/analytics/originlevel3",e=>b(e,{originLevel3:sy()}));var ru={q:new w,enableQuerySyntax:new K,aq:new w,cq:new w,firstResult:new D({min:0}),numberOfResults:new D({min:0}),sortCriteria:new w,f:new q,fExcluded:new q,cf:new q,nf:new q,df:new q,debug:new K,sf:new q,tab:new w,af:new q};var ue=v("searchParameters/restore",e=>b(e,ru));var ua=v("debug/enable"),Kn=v("debug/disable");var Jn=T(pt(),e=>{e.addCase(ua,()=>!0).addCase(Kn,()=>!1).addCase(ue,(t,r)=>{var a;return(a=r.payload.debug)!=null?a:t})});var cf=v("history/undo"),uf=v("history/redo"),Tt=v("history/snapshot"),gs=ae("history/back",async(e,{dispatch:t})=>{t(cf()),await t(ce())}),au=ae("history/forward",async(e,{dispatch:t})=>{t(uf()),await t(ce())}),ce=ae("history/change",async(e,{getState:t})=>t().history.present);var Xn=v("pipeline/set",e=>b(e,new w({required:!0,emptyAllowed:!0})));var Zn=T(Ot(),e=>{e.addCase(Xn,(t,r)=>r.payload).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.pipeline)!=null?n:t}).addCase(gt,(t,r)=>r.payload.pipeline||t)});var eo=v("searchHub/set",e=>b(e,new w({required:!0,emptyAllowed:!0})));var to=T(He(),e=>{e.addCase(eo,(t,r)=>r.payload).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.searchHub)!=null?n:t}).addCase(gt,(t,r)=>r.payload.searchHub||t)});var Re=v("breadcrumb/deselectAll"),la=v("breadcrumb/deselectAllNonBreadcrumbs");var ht=v("facet/updateFacetAutoSelection",e=>b(e,{allow:new K({required:!0})}));var lf={id:O},Lw={...lf,q:me},ro=v("instantResults/register",e=>b(e,lf)),tr=v("instantResults/updateQuery",e=>b(e,Lw)),ao=v("instantResults/clearExpired",e=>b(e,lf));var nu=new D({required:!0,min:0}),no=v("pagination/registerNumberOfResults",e=>b(e,nu)),oo=v("pagination/updateNumberOfResults",e=>b(e,nu)),io=v("pagination/registerPage",e=>b(e,nu)),St=v("pagination/updatePage",e=>b(e,nu)),so=v("pagination/nextPage"),co=v("pagination/previousPage");var Ge=v("query/updateQuery",e=>b(e,{q:new w,enableQuerySyntax:new K}));var uo=async(e,t)=>({analytics:{clientId:await mt(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...tf()&&{pageId:tf()},...e.analyticsMode&&e.trackingId&&{trackingId:e.trackingId},capture:e.analyticsMode==="next"}});var da=async(e,t)=>{var r,a,n,o;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await mt(e.configuration.analytics),actionsHistory:Jt.getHistory()},...((r=e.advancedSearchQueries)==null?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...((a=e.advancedSearchQueries)==null?void 0:a.cq)&&{cq:e.advancedSearchQueries.cq},...((n=e.advancedSearchQueries)==null?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...((o=e.advancedSearchQueries)==null?void 0:o.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await uo(e.configuration.analytics,t),...e.excerptLength&&!oe(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}};var ou=class extends U{constructor(t){super(t);this.getState=t}get activeInstantResultQuery(){let t=this.getState().instantResults;for(let r in t)for(let a in t[r].cache)if(t[r].cache[a].isActive)return t[r].q;return null}get activeInstantResultCache(){let t=this.getState().instantResults;for(let r in t)for(let a in t[r].cache)if(t[r].cache[a].isActive)return t[r].cache[a];return null}get results(){var t;return(t=this.activeInstantResultCache)==null?void 0:t.results}get queryText(){var t;return(t=this.activeInstantResultQuery)!=null?t:Ce().q}get responseTime(){var t,r;return(r=(t=this.activeInstantResultCache)==null?void 0:t.duration)!=null?r:qe().duration}get numberOfResults(){var t,r;return(r=(t=this.activeInstantResultCache)==null?void 0:t.totalCountFiltered)!=null?r:qe().response.totalCountFiltered}getSearchUID(){var r;return((r=this.activeInstantResultCache)==null?void 0:r.searchUid)||super.getSearchUID()}};var cy=e=>k({prefix:"analytics/instantResult/open",__legacy__getBuilder:(t,r)=>(nt(e),t.makeDocumentOpen(Te(e,r),_e(e))),__legacy__provider:t=>new ou(t),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{var n,o;let r=Te(e,t),a=_e(e);return{searchUid:(o=(n=t.search)==null?void 0:n.response.searchUid)!=null?o:"",position:r.documentPosition,itemMetadata:{uniqueFieldName:a.contentIDKey,uniqueFieldValue:a.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}}),uy=()=>k("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new ou(e));var df=()=>k("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),yt=e=>k("search/queryError",(t,r)=>{var a,n,o,i;return t.makeQueryError({query:((a=r.query)==null?void 0:a.q)||Ce().q,aq:((n=r.advancedSearchQueries)==null?void 0:n.aq)||at().aq,cq:((o=r.advancedSearchQueries)==null?void 0:o.cq)||at().cq,dq:((i=r.advancedSearchQueries)==null?void 0:i.dq)||at().dq,errorType:e.type,errorMessage:e.message})});var ys=Ee(dc()),my=Ee(ly());var iu=Ee(dc()),py=Ee(dy());iu.default.extend(py.default);var hs="YYYY/MM/DD@HH:mm:ss",Qw="1401-01-01";function Ka(e,t){let r=(0,iu.default)(e,t);return!r.isValid()&&!t?(0,iu.default)(e,hs):r}function Ss(e){return e.format(hs)}function fy(e){return Ss(Ka(e))===e}function su(e,t){let r=Ka(e,t);if(!r.isValid()){let a=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?n:a}`)}hf(r)}function hf(e){if(e.isBefore(Qw))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}ys.default.extend(my.default);var gy=["past","now","next"],hy=["minute","hour","day","week","month","quarter","year"],Bw=e=>{let t=e==="now";return{amount:new D({required:!t,min:1}),unit:new w({required:!t,constrainTo:hy}),period:new w({required:!0,constrainTo:gy})}};function Ja(e){if(typeof e=="string"&&!rr(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Sf(e):e;new ee(Bw(t.period)).validate(t);let r=yy(t),a=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${a}`);hf(r)}function Sy(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":case"next":return`${t}-${r}-${a}`;case"now":return t}}function yy(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":return(0,ys.default)().subtract(r,a);case"next":return(0,ys.default)().add(r,a);case"now":return(0,ys.default)()}}function Cs(e){return Ss(yy(Sf(e)))}function Cy(e){return e.toLocaleLowerCase().split("-")}function rr(e){let[t,r,a]=Cy(e);if(t==="now")return!0;if(!gy.includes(t)||!hy.includes(a))return!1;let n=parseInt(r);return!(isNaN(n)||n<=0)}function vy(e){return!!e&&typeof e=="object"&&"period"in e}function Sf(e){let[t,r,a]=Cy(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:a||void 0}}function jw(e){return Ja(e),Sf(e)}function xy(e){return e.type==="dateRange"}function by(e){return`start${e}`}function Fy(e){return`end${e}`}var Uw=()=>({dateFacetValueMap:{}});function _w(e,t,r){let a=e.start,n=e.end;return rr(a)&&(a=Cs(a),r.dateFacetValueMap[t][by(a)]=e.start),rr(n)&&(n=Cs(n),r.dateFacetValueMap[t][Fy(n)]=e.end),{...e,start:a,end:n}}function $w(e,t){if(xy(e)){let{facetId:r,currentValues:a}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:a.map(n=>_w(n,r,t))}}return e}function lo(e){var a;let t=Uw();return{request:{...e,facets:(a=e.facets)==null?void 0:a.map(n=>$w(n,t))},mappings:t}}function Hw(e,t,r){return{...e,start:r.dateFacetValueMap[t][by(e.start)]||e.start,end:r.dateFacetValueMap[t][Fy(e.end)]||e.end}}function zw(e,t){return e.facetId in t.dateFacetValueMap}function Gw(e,t){return zw(e,t)?{...e,values:e.values.map(r=>Hw(r,e.facetId,t))}:e}function cu(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(n=>Gw(n,t))}}:e}function po(e,t){let r={};e.forEach(o=>r[o.facetId]=o);let a=[];t.forEach(o=>{o in r&&(a.push(r[o]),delete r[o])});let n=Object.values(r);return[...a,...n]}function Br(e){return Object.values(e).map(t=>t.request)}var Xa=1,vs=5e3;var Oe=async(e,t)=>{var s,u;let r=eE(e),a=Ww(e),n=Yw(e),o=await da(e,t),i=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>vs?vs-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return lo({...o,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...r&&{cq:r},...a.length&&{facets:a},...e.pagination&&{numberOfResults:i(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((s=e.folding)==null?void 0:s.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:n}},...((u=e.generatedAnswer)==null?void 0:u.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat}}}})};function Ww(e){var t;return po(Jw(e),(t=e.facetOrder)!=null?t:[])}function Yw(e){var r;let t=(r=e.automaticFacetSet)==null?void 0:r.set;return t?Object.values(t).map(a=>a.response).map(Kw).filter(a=>a.currentValues.length>0):void 0}function Kw(e){let{field:t,label:r,values:a}=e,n=a.filter(o=>o.state==="selected");return{field:t,label:r,currentValues:n}}function Jw(e){return Xw(e).filter(({facetId:t})=>{var r,a,n;return(n=(a=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:a.enabled)!=null?n:!0})}function Xw(e){var t,r,a,n;return[...Zw((t=e.facetSet)!=null?t:{}),...Ry((r=e.numericFacetSet)!=null?r:{}),...Ry((a=e.dateFacetSet)!=null?a:{}),...Br((n=e.categoryFacetSet)!=null?n:{})]}function Zw(e){return Br(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function Ry(e){return Br(e).map(t=>{let a=t.currentValues.some(({state:n})=>n!=="idle");return t.generateAutomaticRanges&&!a?{...t,currentValues:[]}:t})}function eE(e){var o;let t=((o=e.advancedSearchQueries)==null?void 0:o.cq.trim())||"",r=Object.values(e.tabSet||{}).find(i=>i.isActive),a=(r==null?void 0:r.expression.trim())||"",n=tE(e);return[t,a,...n].filter(i=>!!i).join(" AND ")}function tE(e){return Object.values(e.staticFilterSet||{}).map(r=>{let a=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),n=a.map(o=>o.expression).join(" OR ");return a.length>1?`(${n})`:n})}var fo=v("didYouMean/enable"),uu=v("didYouMean/disable"),mo=v("didYouMean/automaticCorrections/disable"),lu=v("didYouMean/automaticCorrections/enable"),Ct=v("didYouMean/correction",e=>b(e,O));var du=()=>k("analytics/didyoumean/click",e=>e.makeDidYouMeanClick()),Ay=()=>k("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic());var rE=new q({values:{undoneQuery:me},options:{required:!0}}),pu=()=>k("analytics/trigger/query",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.queryModification.newQuery)?e.makeTriggerQuery():null}),fu=e=>k("analytics/trigger/query/undo",t=>(b(e,rE),t.makeUndoTriggerQuery(e))),mu=()=>k("analytics/trigger/notify",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.notifications.length)?e.makeTriggerNotify({notifications:t.triggers.notifications}):null}),gu=()=>k("analytics/trigger/redirect",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.redirectTo)?e.makeTriggerRedirect({redirectedTo:t.triggers.redirectTo}):null}),hu=()=>k("analytics/trigger/execute",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.executions.length)?e.makeTriggerExecute({executions:t.triggers.executions}):null});var pa=v("trigger/query/ignore",e=>b(e,new w({emptyAllowed:!0,required:!0}))),go=v("trigger/query/modification",e=>b(e,new q({values:{originalQuery:Se,modification:Se}})));var Za=class{constructor(t,r=a=>{this.dispatch(Ge({q:a}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},a){var u;let n=new Date().getTime(),o=cu(await this.extra.apiClient.search(r,a),t),i=new Date().getTime()-n,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(t))!=null?r:await this.processQueryCorrectionsOrContinue(t))!=null?a:await this.processQueryTriggersOrContinue(t))!=null?n:this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Fe(t.response)?(this.dispatch(yt(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),a=this.getSuccessResponse(t);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return Fe(d.response)?(this.dispatch(yt(d.response.error)),this.rejectWithValue(d.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,a),this.extra),this.dispatch(Tt(Lr(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:Ay()})}async processQueryTriggersOrContinue(t){var s,u;let r=this.getSuccessResponse(t);if(!r)return null;let a=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===a)return this.dispatch(pa("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return Fe(i.response)?(this.dispatch(yt(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Tt(Lr(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:pu()})}processSuccessResponse(t){return this.dispatch(Tt(Lr(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return xc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Oe(this.getState()),{origin:"mainSearch"});return this.dispatch(Ct(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(go({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Oe(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(t,r,a,n){var o,i;return{...a,query:{q:t,enableQuerySyntax:(i=(o=a.query)==null?void 0:o.enableQuerySyntax)!=null?i:Ce().enableQuerySyntax},search:{...qe(),duration:r,response:n,results:n.results}}}getCurrentQuery(){var r;let t=this.getState();return((r=t.query)==null?void 0:r.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var l$=ae("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;b(e,{q:new w,enableQuerySyntax:new K,clearFilters:new K}),e.clearFilters&&(r(Re()),r(la())),r(ht({allow:!0})),r(Ge({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(St(1))}),ho=ae("search/executeSearch",async(e,t)=>{let r=t.getState();return await yu(r,t,e)}),So=ae("search/fetchPage",async(e,t)=>{let r=t.getState();return await Cf(r,t,e)}),yo=ae("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await vf(t,r)}),Su=ae("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await iE(t,e,r)}),Py=ae("search/fetchInstantResults",async(e,t)=>yf(e,t)),aE=async(e,t)=>{var a,n,o,i;let r=await Oe(e,t);return r.request={...r.request,firstResult:((n=(a=e.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=e.search)==null?void 0:o.results.length)!=null?i:0)},r},nE=async(e,t,r)=>{let a=await da(e);return lo({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},oE=async(e,t)=>{let r=await Oe(e,t);return r.request.numberOfResults=0,r},wy=e=>{var t;e.configuration.analytics.enabled&&Jt.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})};async function yf(e,t){b(e,{id:O,q:O,maxResultsPerQuery:new D({required:!0,min:1}),cacheTimeout:new D});let{q:r,maxResultsPerQuery:a}=e,n=t.getState(),o=new Za({...t,analyticsAction:uy()},c=>{t.dispatch(tr({q:c,id:e.id}))}),i=await nE(n,r,a),s=await o.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),u=await o.process(s);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function Cf(e,t,r){wy(e);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Za({...t,analyticsAction:r}),u=await Oe(e,i),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}async function vf(e,t){let{analyticsClientMiddleware:r,preprocessRequest:a,logger:n}=e.extra,{description:o}=await df().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:a,logger:n}),i=new Za({...e,analyticsAction:df()}),s=await aE(t,o),u=await i.fetchFromAPI(s,{origin:"mainSearch"});return await i.process(u)}async function iE(e,t,r){let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=e.extra,{description:i}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Za({...e,analyticsAction:t}),u=await oE(r,i),c=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(c)}async function yu(e,t,r){wy(e);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=await Oe(e,i),u=new Za({...t,analyticsAction:r}),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}var en=class{constructor(t,r=a=>{this.dispatch(Ge({q:a}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},a){var u;let n=new Date().getTime(),o=cu(await this.extra.apiClient.search(r,a),t),i=new Date().getTime()-n,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(t))!=null?r:await this.processQueryCorrectionsOrContinue(t))!=null?a:await this.processQueryTriggersOrContinue(t))!=null?n:this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Fe(t.response)?(this.dispatch(yt(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),a=this.getSuccessResponse(t);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return Fe(d.response)?(this.dispatch(yt(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(Tt(Lr(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:zn(L.didyoumeanAutomatic,this.getState)})}async processQueryTriggersOrContinue(t){var s,u;let r=this.getSuccessResponse(t);if(!r)return null;let a=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===a)return this.dispatch(pa("")),null;let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return Fe(i.response)?(this.dispatch(yt(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Tt(Lr(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:zn(L.triggerQuery,this.getState)})}processSuccessResponse(t){return this.dispatch(Tt(Lr(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return xc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Oe(this.getState()),{origin:"mainSearch"});return this.dispatch(Ct(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(go({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Oe(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var r;let t=this.getState();return((r=t.query)==null?void 0:r.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var Cu=ae("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;b(e,{q:new w,enableQuerySyntax:new K,clearFilters:new K}),e.clearFilters&&(r(Re()),r(la())),r(ht({allow:!0})),r(Ge({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(St(1))}),E=ae("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return yu(r,t,e.legacy);Ey(r);let a=Iy(e.next,r),n=await Oe(r,a),o=new en({...t,analyticsAction:a}),i=await o.fetchFromAPI(n,{origin:"mainSearch"});return await o.process(i)}),ar=ae("search/fetchPage",async(e,t)=>{let r=t.getState();if(Ey(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Cf(r,t,e.legacy);let a=new en({...t,analyticsAction:e.next}),n=await Oe(r,e.next),o=await a.fetchFromAPI(n,{origin:"mainSearch"});return await a.process(o)}),fa=ae("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return vf(t,r);let a=zn(L.pagerScrolling,t.getState),n=new en({...t,analyticsAction:a}),o=await sE(r,a),i=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(i)}),nr=ae("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return yu(r,t,e.legacy);let a=Iy(e.next,r),n=new en({...t,analyticsAction:a}),o=await uE(r,a),i=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(i)}),Co=ae("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return yf(e,t);b(e,{id:O,q:O,maxResultsPerQuery:new D({required:!0,min:1}),cacheTimeout:new D});let{q:a,maxResultsPerQuery:n}=e,o=zn(L.searchboxAsYouType,t.getState),i=new en({...t,analyticsAction:o},l=>{t.dispatch(tr({q:l,id:e.id}))}),s=await cE(r,a,n),u=await i.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),c=await i.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,analyticsAction:c.analyticsAction,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}),sE=async(e,t)=>{var a,n,o,i;let r=await Oe(e,t);return r.request={...r.request,firstResult:((n=(a=e.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=e.search)==null?void 0:o.results.length)!=null?i:0)},r},cE=async(e,t,r)=>{let a=await da(e);return lo({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},uE=async(e,t)=>{let r=await Oe(e,t);return r.request.numberOfResults=0,r},Ey=e=>{var t;e.configuration.analytics.enabled&&Jt.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},Iy=(e,t)=>({customData:e.getEventExtraPayload(t),actionCause:e.actionCause,type:e.actionCause});var jr=(e,t)=>{let r=e;return oe(r[t])?oe(e.raw[t])?null:e.raw[t]:r[t]},ky=e=>t=>e.every(r=>!oe(jr(t,r))),Oy=e=>t=>e.every(r=>oe(jr(t,r))),qy=(e,t)=>r=>{let a=Dy(e,r);return t.some(n=>a.some(o=>`${o}`.toLowerCase()===n.toLowerCase()))},Ty=(e,t)=>r=>{let a=Dy(e,r);return t.every(n=>a.every(o=>`${o}`.toLowerCase()!==n.toLowerCase()))},Dy=(e,t)=>{let r=jr(t,e);return fc(r)?r:[r]};function xs(e){return e.search.response.searchUid!==""}function Vy(e,t,r){return e.search.results.find(a=>jr(a,t)===r)}function xf(e,t){var a;let r=(a=t.payload)!=null?a:null;r&&(e.response=qe().response,e.results=[],e.questionAnswer=On()),e.error=r,e.isLoading=!1}function bf(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function lE(e,t){bf(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function Ff(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var J=T(qe(),e=>{e.addCase(ho.rejected,(t,r)=>xf(t,r)),e.addCase(yo.rejected,(t,r)=>xf(t,r)),e.addCase(So.rejected,(t,r)=>xf(t,r)),e.addCase(ho.fulfilled,(t,r)=>{lE(t,r)}),e.addCase(yo.fulfilled,(t,r)=>{bf(t,r),t.results=[...t.results,...r.payload.response.results]}),e.addCase(So.fulfilled,(t,r)=>{bf(t,r),t.results=r.payload.response.results}),e.addCase(Su.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(ho.pending,Ff),e.addCase(yo.pending,Ff),e.addCase(So.pending,Ff)});var My=T(fs,e=>e);var Qy=Ee(Ly());var vo=v("tab/register",e=>{let t=new q({values:{id:O,expression:me}});return b(e,t)}),Dt=v("tab/updateActiveTab",e=>b(e,O));function pE(e,t){if(Eh(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+bp;let a=Ih(e,t);return a?Xi(t,a.environment).analytics:e}var vu=T(rt(),e=>e.addCase(er,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${xp}`,t.analytics.apiBaseUrl=pE(r.payload.platformUrl,t.organizationId))}).addCase(gt,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(ca,(t,r)=>{oe(r.payload.enabled)||(!r.payload.enabled&&t.analytics.enabled&&ef(t.analytics),t.analytics.enabled=r.payload.enabled),oe(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),oe(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),oe(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),oe(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),oe(r.payload.nextApiBaseUrl)||(t.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),oe(r.payload.trackingId)||(t.analytics.trackingId=r.payload.trackingId),oe(r.payload.analyticsMode)||(t.analytics.analyticsMode=r.payload.analyticsMode);let a=(0,Qy.default)();a&&(t.analytics.analyticsMode="next",t.analytics.trackingId=a),oe(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),oe(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),oe(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),oe(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),oe(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase(Wn,t=>{t.analytics.enabled=!1,ef(t.analytics)}).addCase(Yn,t=>{t.analytics.enabled=!0}).addCase(eu,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(tu,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(Dt,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(ue,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2}));var z=vu;function By(e,t){let r={...e},a,n=o=>(i,s)=>{let u=o(i,s);return a?a(u,s):u};return{get combinedReducer(){let o=gh(Object.entries(t).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return n((0,h.combineReducers)({...o,...r}))},containsAll(o){return Object.keys(o).every(s=>s in r)},add(o){Object.keys(o).filter(i=>!(i in r)).forEach(i=>r[i]=o[i])},addCrossReducer(o){a=o}}}function xu(e,t,r){var a,n,o;t===void 0&&(t=50),r===void 0&&(r={});var i=(a=r.isImmediate)!=null&&a,s=(n=r.callback)!=null&&n,u=r.maxWait,c=Date.now(),l=[];function d(){if(u!==void 0){var p=Date.now()-c;if(p+t>=u)return u-p}return t}var f=function(){var p=[].slice.call(arguments),m=this;return new Promise(function(g,y){var S=i&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,c=Date.now(),!i){var R=e.apply(m,p);s&&s(R),l.forEach(function(P){return(0,P.resolve)(R)}),l=[]}},d()),S){var C=e.apply(m,p);return s&&s(C),g(C)}l.push({resolve:g,reject:y})})};return f.cancel=function(p){o!==void 0&&clearTimeout(o),l.forEach(function(m){return(0,m.reject)(p)}),l=[]},f}function jy(e,t){let r=0,a=xu(()=>r=0,500);return n=>o=>async i=>{if(!(typeof i=="function"))return o(i);let u=await o(i);if(!fE(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,a();let c=await mE(t);n.dispatch(er({accessToken:c})),n.dispatch(i)}}function fE(e){var t;return((t=e==null?void 0:e.error)==null?void 0:t.name)===new Ki().name}async function mE(e){try{return await e()}catch(t){return""}}function Uy({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:a,name:n}){return $d({reducer:e,preloadedState:t,devTools:{stateSanitizer:o=>o.history?{...o,history:"<<OMIT>>"}:o,name:n,shouldHotReload:!1},middleware:o=>[...r,...o({thunk:{extraArgument:a}}),lc(a.logger)]})}var gE={configuration:z,version:My};function hE(e,t){var i,s;let r=((i=e.configuration.organizationEndpoints)==null?void 0:i.analytics)||void 0,{analyticsClientMiddleware:a,...n}=(s=e.configuration.analytics)!=null?s:{},o={...n,nextApiBaseUrl:`${r}/rest/organizations/${e.configuration.organizationId}/events/v1`,apiBaseUrl:r};return hc()?(t.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function _y(e,t){var u;let r=SE(e,t),{accessToken:a,organizationId:n}=e.configuration,{organizationEndpoints:o}=e.configuration,i=(o==null?void 0:o.platform)||e.configuration.platformUrl;xE(e)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),vE(e)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):bE(e)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(u=e.configuration.organizationEndpoints)==null?void 0:u.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(er({accessToken:a,organizationId:n,platformUrl:i}));let s=hE(e,r.logger);return s&&r.dispatch(ca(s)),r}function SE(e,t){var i;let{reducers:r}=e,a=By({...gE,...r},(i=e.preloadedState)!=null?i:{});e.crossReducer&&a.addCrossReducer(e.crossReducer);let n=t.logger,o=yE(e,t,a);return{addReducers(s){a.containsAll(s)||(a.add(s),o.replaceReducer(a.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(Yn())},disableAnalytics(){o.dispatch(Wn())},get state(){return o.getState()},logger:n,store:o}}function yE(e,t,r){let{preloadedState:a,configuration:n}=e,o=n.name||"coveo-headless",i=CE(e,t.logger);return Uy({preloadedState:a,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:t,name:o})}function CE(e,t){let{renewAccessToken:r}=e.configuration,a=jy(t,r);return[cc,a,uc(t),sc].concat(e.middlewares||[])}function vE(e){return Ie(e.configuration.organizationEndpoints)}function xE(e){var t;return!oe(e.configuration.platformUrl)||oe((t=e.configuration.organizationEndpoints)==null?void 0:t.platform)}function bE(e){let{platform:t}=e.configuration.organizationEndpoints;if(Ie(t))return!1;let r=Rp(t);return r&&r.organizationId!==e.configuration.organizationId}var $y=Ee(zi());function Hy(e){return(0,$y.default)({name:"@coveo/headless",level:(e==null?void 0:e.level)||"warn",formatters:{log:e==null?void 0:e.logFormatter}})}function zy(e,t){let r=FE(e),a=et,n=RE(e);return{analyticsClientMiddleware:r,validatePayload:a,preprocessRequest:n,logger:t}}function FE(e){let{analytics:t}=e,r=(a,n)=>n;return(t==null?void 0:t.analyticsClientMiddleware)||r}function RE(e){return e.preprocessRequest||Ba}var Gy=Ee(Cp());var Rf=(e,t,r,a,n,o)=>{let i=e[t];oe(i)||oe(n)||n!==i&&n!==a&&(o.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),o.warn(`To remove this warning, make sure that access token value [${i}] matches engine configuration value [${r}]`))},Af=(e,t)=>!(oe(e)||t===e),bs=e=>{try{let t=typeof atob!="undefined"?atob:Gy.atob,a=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=t(a);if(!n)return!1;let o=decodeURIComponent(n.split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(o)}catch(t){return!1}},Wy=(e,t)=>(Af(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),Yy=(e,t,r,a)=>(Rf(e,"searchHub",t.searchHub,He(),r,a),Wy(e,t)),Ky=(e,t)=>(Af(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),Jy=(e,t,r,a)=>(Rf(e,"pipeline",t.pipeline,Ot(),r,a),Ky(e,t)),Xy=(e,t)=>(Af(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),AE=(e,t,r,a)=>(Rf(e,"userDisplayName",t.configuration.analytics.userDisplayName,rt().analytics.userDisplayName,r,a),Xy(e,t)),Zy=e=>T({},t=>{t.addCase(eo,(r,a)=>{let n=bs(r.configuration.accessToken);return n?Yy(n,r,a.payload,e):r}).addCase(Xn,(r,a)=>{let n=bs(r.configuration.accessToken);return n?Jy(n,r,a.payload,e):r}).addCase(er,(r,a)=>{if(r.configuration.accessToken!==a.payload.accessToken)return r;let{accessToken:n}=a.payload;if(!n)return r;let o=bs(n);return o?[Ky,Wy,Xy].reduce((i,s)=>s(o,i),r):r}).addCase(gt,(r,a)=>{var s;let n=bs(r.configuration.accessToken);if(!n)return r;let o=Yy(n,r,a.payload.searchHub,e);return Jy(n,o,(s=a.payload)==null?void 0:s.pipeline,e)}).addCase(ca,(r,a)=>{let n=bs(r.configuration.accessToken);return n?AE(n,r,a.payload.userDisplayName,e):r})});var eC={organizationId:O,accessToken:O,platformUrl:new w({required:!1,emptyAllowed:!1}),name:new w({required:!1,emptyAllowed:!1}),analytics:new q({options:{required:!1},values:{enabled:new K({required:!1}),originContext:new w({required:!1}),originLevel2:new w({required:!1}),originLevel3:new w({required:!1}),analyticsMode:new w({constrainTo:["legacy","next"],required:!1})}})};function tC(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:Xi("searchuisamples")}}var rC=new ee({...eC,search:new q({options:{required:!1},values:{pipeline:new w({required:!1,emptyAllowed:!0}),searchHub:Se,locale:Se,timezone:Se,authenticationProviders:new X({required:!1,each:O})}})});function aC(){return{...tC(),search:{searchHub:"default"}}}var PE={debug:Jn,pipeline:Zn,searchHub:to,search:J};function wE(e){var n;let t=e.configuration.search,r=((n=e.configuration.organizationEndpoints)==null?void 0:n.search)||void 0;return{...t,apiBaseUrl:r}}function EE(e){let t=Hy(e.loggerOptions);IE(e.configuration,t);let r=kE(e.configuration,t),a=OE(t),n={...zy(e.configuration,t),apiClient:r,streamingClient:a},o={...e,reducers:PE,crossReducer:Zy(t)},i=_y(o,n),s=wE(e);return s&&i.dispatch(gt(s)),{...i,get state(){return i.state},executeFirstSearch(u=Jc()){if(xs(i.state))return;let c=E({legacy:u,next:{actionCause:L.interfaceLoad,getEventExtraPayload:l=>new U(()=>l).getBaseMetadata()}});i.dispatch(c)},executeFirstSearchAfterStandaloneSearchBoxRedirect(u){let{cause:c,metadata:l}=u;if(xs(i.state))return;let d=l&&c==="omniboxFromLink",f=E({legacy:d?Zc(l):Xc(),next:{actionCause:d?L.omniboxFromLink:L.searchFromLink,getEventExtraPayload:d?p=>new U(()=>p).getOmniboxFromLinkMetadata(l):p=>new U(()=>p).getBaseMetadata()}});i.dispatch(f)}}}function IE(e,t){try{rC.validate(e)}catch(r){throw t.error(r,"Search engine configuration error"),r}}function kE(e,t){let{search:r}=e;return new es({logger:t,preprocessRequest:e.preprocessRequest||Ba,postprocessSearchResponseMiddleware:(r==null?void 0:r.preprocessSearchResponseMiddleware)||Rc,postprocessFacetSearchResponseMiddleware:(r==null?void 0:r.preprocessFacetSearchResponseMiddleware)||Ac,postprocessQuerySuggestResponseMiddleware:(r==null?void 0:r.preprocessQuerySuggestResponseMiddleware)||Pc})}function OE(e){return new nf({logger:e})}function M(e){let t,r=new Map,a=()=>r.size===0,n=o=>{try{let i=JSON.stringify(o),s=t!==i;return t=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(o){o();let i=Symbol(),s;return a()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{n(this.state)&&r.forEach(u=>u())})),r.set(i,o),()=>{r.delete(i),a()&&s&&s()}},get state(){return{}}}}var nC=e=>{let t=/Document weights:\n((?:.)*?)\n+/g,r=/Terms weights:\n((?:.|\n)*)\n+/g,a=/Total weight: ([0-9]+)/g;if(!e)return null;let n=t.exec(e),o=r.exec(e),i=a.exec(e),s=TE(e),u=oC(n?n[1]:null),c=qE(o),l=i?Number(i[1]):null;return{documentWeights:u,termsWeight:c,totalWeight:l,qreWeights:s}},oC=e=>{let t=/(\w+(?:\s\w+)*): ([-0-9]+)/g,r=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let a=e.match(t);if(!a)return null;let n={};for(let o of a){let i=o.match(r);if(i){let s=i[1],u=i[2];n[s]=Number(u)}}return n},iC=(e,t)=>{let r=[],a;for(;(a=t.exec(e))!==null;)r.push(a);return r},qE=e=>{let t=/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g,r=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let a=iC(e[1],t);if(!a)return null;let n={};for(let o of a){let i=iC(o[1],r),s={};for(let c of i)s[c[1]]={Correlation:Number(c[2]),"TF-IDF":Number(c[3])};let u=oC(o[2]);n[Object.keys(s).join(", ")]={terms:s,Weights:u}}return n},TE=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=t.exec(e),a=[];for(;r;)a.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return a};function sC(e){return e.search.response.results.map(r=>{let a=nC(r.rankingInfo);return{result:r,ranking:a}})}var DE=new X({each:O,required:!0}),ma=v("fields/registerFieldsToInclude",e=>b(e,DE)),xo=v("fields/fetchall/enable"),tn=v("fields/fetchall/disable"),bo=ae("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let n=r(),{accessToken:o,organizationId:i}=n.configuration,{apiBaseUrl:s}=n.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:o,organizationId:i,url:s});return Fe(u)?a(u.error):u.success.fields});var Pf={collectionField:new w({emptyAllowed:!1,required:!1}),parentField:new w({emptyAllowed:!1,required:!1}),childField:new w({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new D({min:0,required:!1})},ga=v("folding/register",e=>b(e,Pf)),ha=ae("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a}})=>{let n=t(),o=await da(n),i=await a.search({...o,q:VE(n),enableQuerySyntax:!0,cq:`@${n.folding.fields.collection}="${e}"`,filterField:n.folding.fields.collection,childField:n.folding.fields.parent,parentField:n.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Fe(i)?r(i.error):{collectionId:e,results:i.success.results,rootResult:n.folding.collections[e].result}});function VE(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var Sa=T(Dn(),e=>e.addCase(ma,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(xo,t=>{t.fetchAllFields=!0}).addCase(tn,t=>{t.fetchAllFields=!1}).addCase(bo.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(ga,(t,{payload:r})=>{var n,o,i;let a=_a().fields;t.fieldsToInclude.push((n=r.collectionField)!=null?n:a.collection,(o=r.parentField)!=null?o:a.parent,(i=r.childField)!=null?i:a.child)}));var ME=new ee({enabled:new K({default:!1})});function NE(e,t={}){if(!LE(e))throw I;let r=M(e),{dispatch:a}=e,n=()=>e.state;ke(e,ME,t.initialState,"buildRelevanceInspector").enabled&&a(ua());let i=s=>{e.logger.warn(`Flag [ ${s} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let s=n(),u=s.debug;if(!s.debug)return{isEnabled:u};let{executionReport:c,basicExpression:l,advancedExpression:d,constantExpression:f,userIdentities:p,rankingExpressions:m}=s.search.response,{fieldsDescription:g,fetchAllFields:y}=s.fields;return{isEnabled:u,rankingInformation:sC(s),executionReport:c,expressions:{basicExpression:l,advancedExpression:d,constantExpression:f},userIdentities:p,rankingExpressions:m,fieldsDescription:g,fetchAllFields:y}},enable(){a(ua()),i("debug")},disable(){a(Kn()),a(tn())},enableFetchAllFields(){a(xo()),i("fetchAllFields")},disableFetchAllFields(){a(tn())},fetchFieldsDescription(){!this.state.isEnabled&&a(ua()),a(bo()),i("fieldsDescription"),e.logger.warn(`For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.
        
        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions
        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude`)}}}function LE(e){return e.addReducers({debug:Jn,search:J,configuration:z,fields:Sa}),!0}var QE=new X({each:O,required:!0}),cC=(e,t)=>(b(e,O),Pn(t)?b(t,O):b(t,QE),{payload:{contextKey:e,contextValue:t}}),rn=v("context/set",e=>{for(let[t,r]of Object.entries(e))cC(t,r);return{payload:e}}),an=v("context/add",e=>cC(e.contextKey,e.contextValue)),nn=v("context/remove",e=>b(e,O));var bu=T(Nr(),e=>{e.addCase(rn,(t,r)=>{t.contextValues=r.payload}).addCase(an,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(nn,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ce.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.context.contextValues)})});var BE=["caseId","caseNumber"],jE={caseId:"caseContext",caseNumber:"caseContext"},Fu=class extends Error{constructor(t){super(`The key "${t}" is reserved for internal use. Use ${jE[t]} to set this value.}`)}};function wf(e){return BE.includes(e)}var UE=new ee({values:new q({options:{required:!1}})});function uC(e,t={}){if(!HE(e))throw I;let r=M(e),{dispatch:a}=e,n=()=>e.state,o=ke(e,UE,t.initialState,"buildContext");return o.values&&a(rn(o.values)),{...r,get state(){return{values:n().context.contextValues}},set(i){a(rn(i))},...n().configuration.analytics.analyticsMode==="legacy"?_E(a):$E(a)}}var _E=e=>({add(t,r){e(an({contextKey:t,contextValue:r}))},remove(t){e(nn(t))}}),$E=e=>({add(t,r){if(wf(t))throw new Fu(t);e(an({contextKey:t,contextValue:r}))},remove(t){if(wf(t))throw new Fu(t);e(nn(t))}});function HE(e){return e.addReducers({context:bu}),!0}function zE(e,t){return uC(e,t)}var Fo=v("dictionaryFieldContext/set",e=>{let t=new q({options:{required:!0}}),r=b(e,t).error;if(r)return{payload:e,error:r};let a=Object.values(e),n=new X({each:me}),o=b(a,n).error;return o?{payload:e,error:o}:{payload:e}}),Ro=v("dictionaryFieldContext/add",e=>{let t=new q({options:{required:!0},values:{field:me,key:me}});return b(e,t)}),Ao=v("dictionaryFieldContext/remove",e=>b(e,me));var Ru=T(na(),e=>{e.addCase(Fo,(t,r)=>{t.contextValues=r.payload}).addCase(Ro,(t,r)=>{let{field:a,key:n}=r.payload;t.contextValues[a]=n}).addCase(Ao,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ce.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function GE(e){if(!WE(e))throw I;let t=M(e),{dispatch:r}=e,a=()=>e.state;return{...t,get state(){return{values:a().dictionaryFieldContext.contextValues}},set(n){r(Fo(n))},add(n,o){r(Ro({field:n,key:o}))},remove(n){r(Ao(n))}}}function WE(e){return e.addReducers({dictionaryFieldContext:Ru}),!0}var Au=T(ts(),e=>{e.addCase(fo,t=>{t.enableDidYouMean=!0}).addCase(uu,t=>{t.enableDidYouMean=!1}).addCase(lu,t=>{t.automaticallyCorrectQuery=!0}).addCase(mo,t=>{t.automaticallyCorrectQuery=!1}).addCase(E.pending,t=>{t.queryCorrection=Fc(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(E.fulfilled,(t,r)=>{t.queryCorrection=r.payload.response.queryCorrections[0]||Fc(),t.originalQuery=r.payload.originalQuery,t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(Ct,(t,r)=>{t.wasCorrectedTo=r.payload})});function lC(e,t={}){if(!YE(e))throw I;let r=M(e),{dispatch:a}=e;a(fo()),t.automaticallyCorrectQuery===!1&&a(mo());let n=()=>e.state;return{...r,get state(){let o=n();return{originalQuery:o.didYouMean.originalQuery,wasCorrectedTo:o.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:o.didYouMean.wasAutomaticallyCorrected,queryCorrection:o.didYouMean.queryCorrection,hasQueryCorrection:o.didYouMean.queryCorrection.correctedQuery!==""||o.didYouMean.wasCorrectedTo!==""}},applyCorrection(){a(Ct(this.state.queryCorrection.correctedQuery))}}}function YE(e){return e.addReducers({configuration:z,didYouMean:Au}),!0}function KE(e){let t=lC(e),{dispatch:r}=e;return{...t,get state(){return t.state},applyCorrection(){t.applyCorrection(),r(E({legacy:du(),next:{actionCause:L.didyoumeanClick,getEventExtraPayload:a=>new U(()=>a).getBaseMetadata()}}))}}}var te=O;var ie=v("facetOptions/update",(e={freezeFacetOrder:!0})=>b(e,{freezeFacetOrder:new K({required:!1})})),We=v("facetOptions/facet/enable",e=>b(e,te)),ve=v("facetOptions/facet/disable",e=>b(e,te));var Fs={facetId:te,captions:new q({options:{required:!1}}),numberOfValues:new D({required:!1,min:1}),query:new w({required:!1,emptyAllowed:!0})};var JE={path:new X({required:!0,each:O}),displayValue:me,rawValue:me,count:new D({required:!0,min:0})},Po=v("categoryFacet/selectSearchResult",e=>b(e,{facetId:te,value:new q({values:JE})})),wo=v("categoryFacetSearch/register",e=>b(e,Fs));function Eo(e,t){var o;let{facetId:r,criterion:a}=t,n=(o=e[r])==null?void 0:o.request;!n||(n.sortCriteria=a)}function Rs(e){!e||(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function Pu(e,t){!e||(e.numberOfValues=t)}function wu(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function Ef(e,t,r){e.currentValues=XE(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function XE(e,t){if(!e.length)return[];let r=dC(e[0],t),a=r;for(let n of e.splice(1)){let o=dC(n,t);a.children.push(o),a=o}return a.state="selected",a.retrieveChildren=!0,[r]}function dC(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var ZE={state:new fe({required:!0}),numberOfResults:new D({required:!0,min:0}),value:new w({required:!0,emptyAllowed:!0}),path:new X({required:!0,each:O}),moreValuesAvailable:new K({required:!1})};function If(e){e.children.forEach(t=>{If(t)}),et({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},ZE)}var Io={facetId:te,field:O,delimitingCharacter:new w({required:!1,emptyAllowed:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new fe({required:!1}),basePath:new X({required:!1,each:O}),filterByBasePath:new K({required:!1})},or=v("categoryFacet/register",e=>b(e,Io)),ya=v("categoryFacet/toggleSelectValue",e=>{try{return et(e.facetId,O),If(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Tr(t)}}}),ir=v("categoryFacet/deselectAll",e=>b(e,Io.facetId)),on=v("categoryFacet/updateNumberOfValues",e=>b(e,{facetId:Io.facetId,numberOfValues:Io.numberOfValues})),ko=v("categoryFacet/updateSortCriterion",e=>b(e,{facetId:Io.facetId,criterion:new fe})),Eu=v("categoryFacet/updateBasePath",e=>b(e,{facetId:Io.facetId,basePath:new X({each:O})}));var sr=T(Ut(),e=>{e.addCase(or,(t,r)=>{let a=r.payload,{facetId:n}=a;if(n in t)return;let o=tI(a),i=o.numberOfValues;t[n]={request:o,initialNumberOfValues:i}}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.categoryFacetSet)!=null?n:t}).addCase(ue,(t,r)=>{let a=r.payload.cf||{};Object.keys(t).forEach(n=>{let o=t[n].request,i=a[n]||[];(i.length||o.currentValues.length)&&Ef(o,i,t[n].initialNumberOfValues)})}).addCase(ko,(t,r)=>{var i;let{facetId:a,criterion:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.sortCriteria=n)}).addCase(Eu,(t,r)=>{var i;let{facetId:a,basePath:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.basePath=[...n])}).addCase(ya,(t,r)=>{var d;let{facetId:a,selection:n,retrieveCount:o}=r.payload,i=(d=t[a])==null?void 0:d.request;if(!i)return;let{path:s}=n,u=s.slice(0,s.length-1),c=eI(i,u,o);if(c.length){let f=c[0];f.retrieveChildren=!0,f.state="selected",f.children=[];return}let l=pC(n.value,o);l.state="selected",c.push(l),i.numberOfValues=1}).addCase(ir,(t,r)=>{let a=r.payload;wu(t,a)}).addCase(Re,t=>{Object.keys(t).forEach(r=>wu(t,r))}).addCase(ht,(t,r)=>Object.keys(t).forEach(a=>{t[a].request.preventAutoSelect=!r.payload.allow})).addCase(on,(t,r)=>{var i;let{facetId:a,numberOfValues:n}=r.payload,o=(i=t[a])==null?void 0:i.request;if(!!o){if(!o.currentValues.length)return Pu(o,n);rI(t,r.payload)}}).addCase(Po,(t,r)=>{let{facetId:a,value:n}=r.payload,o=t[a];if(!o)return;let i=[...n.path,n.rawValue];Ef(o.request,i,o.initialNumberOfValues)}).addCase(nr.fulfilled,(t,r)=>{fC(t,r.payload.response.facets)}).addCase(E.fulfilled,(t,r)=>{fC(t,r.payload.response.facets)}).addCase(ve,(t,r)=>{wu(t,r.payload)})}),As={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function eI(e,t,r){let a=e.currentValues;for(let n of t){let o=a[0];(!o||n!==o.value)&&(o=pC(n,r),a.length=0,a.push(o)),o.retrieveChildren=!1,o.state="idle",a=o.children}return a}function tI(e){return{...As,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function pC(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function fC(e,t){t.forEach(r=>{var i;if(!aI(e,r))return;let a=r.facetId,n=(i=e[a])==null?void 0:i.request;if(!n)return;let o=nI(n,r);n.currentValues=o?[]:n.currentValues,n.preventAutoSelect=!1})}function rI(e,t){var o;let{facetId:r,numberOfValues:a}=t,n=(o=e[r])==null?void 0:o.request.currentValues[0];if(!!n){for(;n.children.length&&(n==null?void 0:n.state)!=="selected";)n=n.children[0];n.retrieveCount=a}}function aI(e,t){return t.facetId in e}function nI(e,t){let r=ut(e.currentValues),a=ut(t.values);return r.length!==a.length}function Iu(e,t,r){let{facetId:a}=t;if(e[a])return;let n=!1,o={...cr,...t},i=r();e[a]={options:o,isLoading:n,response:i,initialNumberOfValues:o.numberOfValues,requestId:""}}function ku(e,t){let{facetId:r,...a}=t,n=e[r];!n||(n.options={...n.options,...a})}function Ou(e,t,r){let a=e[t];!a||(a.requestId=r,a.isLoading=!0)}function qu(e,t){let r=e[t];!r||(r.isLoading=!1)}function Tu(e,t,r){let{facetId:a,response:n}=t,o=e[a];!o||o.requestId===r&&(o.isLoading=!1,o.response=n)}function Ps(e,t,r){let{facetId:a}=t,n=e[a];!n||(n.requestId="",n.isLoading=!1,n.response=r(),n.options.numberOfValues=n.initialNumberOfValues,n.options.query=cr.query)}function Du(e,t){Object.keys(e).forEach(r=>Ps(e,{facetId:r},t))}var cr={captions:{},numberOfValues:10,query:""};var mC=async(e,t,r)=>{let a=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:o,query:i,numberOfValues:s}=a,{field:u,delimitingCharacter:c,basePath:l,filterFacetCount:d}=n,f=oI(n),p=f.length?[f]:[],m=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:l,captions:o,numberOfValues:s,query:m,field:u,delimitingCharacter:c,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await Oe(t)).request}}},oI=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var gC=async(e,t,r)=>{let{captions:a,query:n,numberOfValues:o}=t.facetSearchSet[e].options,{field:i,currentValues:s,filterFacetCount:u}=t.facetSet[e].request,c=s.filter(d=>d.state!=="idle").map(d=>d.value),l=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:o,query:l,field:i,ignoreValues:c,filterFacetCount:u,type:"specific",...r?{}:{searchContext:(await Oe(t)).request}}};var hC=e=>async(t,{getState:r,extra:{apiClient:a,validatePayload:n}})=>{let o=r(),i;n(t,O),iI(o,t)?i=await gC(t,o,e):i=await mC(t,o,e);let s=await a.facetSearch(i);return{facetId:t,response:s}},Vt=ae("facetSearch/executeSearch",hC(!1)),kf=ae("facetSearch/executeSearch",hC(!0)),Oo=v("facetSearch/clearResults",e=>b(e,{facetId:te})),iI=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;var SC={facetId:te,value:new q({values:{displayValue:me,rawValue:me,count:new D({required:!0,min:0})}})},Vu=v("facetSearch/register",e=>b(e,Fs)),Ca=v("facetSearch/update",e=>b(e,Fs)),sn=v("facetSearch/toggleSelectValue",e=>b(e,SC)),ws=v("facetSearch/toggleExcludeValue",e=>b(e,SC));var qo=T(as(),e=>{e.addCase(wo,(t,r)=>{let a=r.payload;Iu(t,a,Of)}).addCase(Ca,(t,r)=>{ku(t,r.payload)}).addCase(Vt.pending,(t,r)=>{let a=r.meta.arg;Ou(t,a,r.meta.requestId)}).addCase(Vt.rejected,(t,r)=>{let a=r.meta.arg;qu(t,a)}).addCase(Vt.fulfilled,(t,r)=>{Tu(t,r.payload,r.meta.requestId)}).addCase(Oo,(t,{payload:{facetId:r}})=>{Ps(t,{facetId:r},Of)}).addCase(E.fulfilled,t=>{Du(t,Of)})});function Of(){return{moreValuesAvailable:!1,values:[]}}var To=e=>k("analytics/facet/showMore",(t,r)=>{b(e,te);let a=_n(e,lt(r));return t.makeFacetShowMore(a)}),Do=e=>k("analytics/facet/showLess",(t,r)=>{b(e,te);let a=_n(e,lt(r));return t.makeFacetShowLess(a)}),ur=e=>k("analytics/facet/sortChange",(t,r)=>{b(e,{facetId:te,criterion:new fe({required:!0})});let{facetId:a,criterion:n}=e,o=lt(r),s={..._n(a,o),criteria:n};return t.makeFacetUpdateSort(s)}),Me=e=>k("analytics/facet/reset",(t,r)=>{b(e,te);let a=lt(r),n=_n(e,a);return t.makeFacetClearAll(n)}),Pe=e=>k("analytics/facet/select",(t,r)=>{b(e,{facetId:te,facetValue:O});let a=lt(r),n=ps(e,a);return t.makeFacetSelect(n)}),Mt=e=>k("analytics/facet/exclude",(t,r)=>{b(e,{facetId:te,facetValue:O});let a=lt(r),n=ps(e,a);return t.makeFacetExclude(n)}),dt=e=>k("analytics/facet/deselect",(t,r)=>{b(e,{facetId:te,facetValue:O});let a=lt(r),n=ps(e,a);return t.makeFacetDeselect(n)}),Vo=e=>k("analytics/facet/breadcrumb",(t,r)=>{b(e,{facetId:te,facetValue:O});let a=ps(e,lt(r));return t.makeBreadcrumbFacet(a)});var lr=(e,t)=>{var r,a;return(a=(r=e.facetOptions.facets[t])==null?void 0:r.enabled)!=null?a:!0};var dr=new w({regex:/^[a-zA-Z0-9-_]+$/}),pr=new w({required:!0}),yC=new X({each:new w}),CC=new w,vC=new K,fr=new K,mr=new D({min:0}),Nt=new D({min:1}),Mu=new K({required:!0}),sI=new q,cI=new w,uI={captions:sI,numberOfValues:Nt,query:cI},Mo=new q({values:uI}),Nu=new q({options:{required:!1},values:{type:new w({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new X({required:!0,max:25,each:new w({emptyAllowed:!1,required:!0})})}}),xC=new K,Lu=new X({min:1,max:25,required:!1,each:new w({emptyAllowed:!1,required:!0})});var cn={value:O,numberOfResults:new D({min:0}),state:O};var lI={facetId:te,field:new w({required:!0,emptyAllowed:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new fe({required:!1}),resultsMustMatch:new fe({required:!1}),allowedValues:Nu,customSort:Lu},gr=v("facet/register",e=>b(e,lI)),hr=v("facet/toggleSelectValue",e=>b(e,{facetId:te,selection:new q({values:cn})})),va=v("facet/toggleExcludeValue",e=>b(e,{facetId:te,selection:new q({values:cn})})),xe=v("facet/deselectAll",e=>b(e,te)),No=v("facet/updateSortCriterion",e=>b(e,{facetId:te,criterion:new fe({required:!0})})),un=v("facet/updateNumberOfValues",e=>b(e,{facetId:te,numberOfValues:new D({required:!0,min:1})})),ln=v("facet/updateIsFieldExpanded",e=>b(e,{facetId:te,isFieldExpanded:new K({required:!0})})),Ur=v("facet/updateFreezeCurrentValues",e=>b(e,{facetId:te,freezeCurrentValues:new K({required:!0})}));function dn(e){var o,i;let t=bC(e.start,e),r=bC(e.end,e),a=(o=e.endInclusive)!=null?o:!1,n=(i=e.state)!=null?i:"idle";return{start:t,end:r,endInclusive:a,state:n}}function bC(e,t){let{dateFormat:r}=t;return vy(e)?(Ja(e),Sy(e)):typeof e=="string"&&rr(e)?(Ja(e),e):(su(e,r),Ss(Ka(e,r)))}var Lo=v("rangeFacet/updateSortCriterion",e=>b(e,{facetId:te,criterion:new fe({required:!0})}));var pn={state:O,start:new D({required:!0}),end:new D({required:!0}),endInclusive:new K({required:!0}),numberOfResults:new D({required:!0,min:0})},fn={start:O,end:O,endInclusive:new K({required:!0}),state:O,numberOfResults:new D({required:!0,min:0})},mn=e=>({facetId:te,selection:typeof e.start=="string"?new q({values:fn}):new q({values:pn})});var dI={start:O,end:O,endInclusive:new K({required:!0}),state:O},pI={facetId:te,field:O,currentValues:new X({required:!1,each:new q({values:dI})}),generateAutomaticRanges:new K({required:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new fe({required:!1}),rangeAlgorithm:new fe({required:!1})};function FC(e){return rr(e)?Cs(e):e}function Qu(e){!e.currentValues||e.currentValues.forEach(t=>{let{start:r,end:a}=dn(t);if(Ka(FC(r)).isAfter(Ka(FC(a))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var Sr=v("dateFacet/register",e=>{try{return et(e,pI),Qu(e),{payload:e,error:null}}catch(t){return{payload:e,error:Tr(t)}}}),yr=v("dateFacet/toggleSelectValue",e=>b(e,{facetId:te,selection:new q({values:fn})})),xa=v("dateFacet/toggleExcludeValue",e=>b(e,{facetId:te,selection:new q({values:fn})})),_r=v("dateFacet/updateFacetValues",e=>{try{return et(e,{facetId:te,values:new X({each:new q({values:fn})})}),Qu({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Tr(t)}}}),Bu=Lo,ju=xe;var fI={state:O,start:new D({required:!0}),end:new D({required:!0}),endInclusive:new K({required:!0})},mI={facetId:te,field:O,currentValues:new X({required:!1,each:new q({values:fI})}),generateAutomaticRanges:new K({required:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new fe({required:!1}),rangeAlgorithm:new fe({required:!1})};function Uu(e){!e.currentValues||e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var Cr=v("numericFacet/register",e=>{try{return b(e,mI),Uu(e),{payload:e,error:null}}catch(t){return{payload:e,error:Tr(t)}}}),vr=v("numericFacet/toggleSelectValue",e=>b(e,{facetId:te,selection:new q({values:pn})})),ba=v("numericFacet/toggleExcludeValue",e=>b(e,{facetId:te,selection:new q({values:pn})})),$r=v("numericFacet/updateFacetValues",e=>{try{return et(e,{facetId:te,values:new X({each:new q({values:pn})})}),Uu({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Tr(t)}}}),_u=Lo,$u=xe;var Ne=T(ra(),e=>{e.addCase(ie,(t,r)=>({...t,...r.payload})).addCase(E.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(E.rejected,t=>{t.freezeFacetOrder=!1}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOptions)!=null?n:t}).addCase(or,(t,r)=>{t.facets[r.payload.facetId]=qn()}).addCase(gr,(t,r)=>{t.facets[r.payload.facetId]=qn()}).addCase(Sr,(t,r)=>{t.facets[r.payload.facetId]=qn()}).addCase(Cr,(t,r)=>{t.facets[r.payload.facetId]=qn()}).addCase(We,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(ve,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(ue,(t,r)=>{var a,n,o,i,s;[...Object.keys((a=r.payload.f)!=null?a:{}),...Object.keys((n=r.payload.fExcluded)!=null?n:{}),...Object.keys((o=r.payload.cf)!=null?o:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((s=r.payload.df)!=null?s:{})].forEach(u=>{u in t||(t.facets[u]=qn()),t.facets[u].enabled=!0})})});function RC(e,t){let{field:r,state:a}=e;if(!gI(e))return r;let n=`${r}_`,o=hI(n,a);return yI(r,t),`${n}${o}`}function gI(e){let{field:t,state:r}=e;return AC(r).some(n=>n&&t in n)}function hI(e,t){let a=AC(t).map(n=>Object.keys(n||{})).reduce((n,o)=>n.concat(o),[]);return SI(a,e)+1}function AC(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:a,categoryFacetSet:n}=e;return[t,r,a,n]}function SI(e,t){let r=0,n=e.map(o=>{let i=o.split(t)[1],s=parseInt(i,10);return Number.isNaN(s)?r:s}).sort().pop();return n!=null?n:r}function yI(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function Ye(e,t){let{state:r,logger:a}=e,{field:n,facetId:o}=t;return o||RC({field:n,state:r},a)}var PC=["alphanumeric","occurrences"];var wC=new ee({field:pr,basePath:yC,delimitingCharacter:CC,facetId:dr,facetSearch:Mo,filterByBasePath:vC,filterFacetCount:fr,injectionDepth:mr,numberOfValues:Nt,sortCriteria:new w({constrainTo:PC})});function EC(e,t){if(!CI(e))throw I;let r=M(e),{dispatch:a}=e,n=Ye(e,t.options),o={...As,...gc("facetSearch",t.options),field:t.options.field,facetId:n},i={facetSearch:{...cr,...t.options.facetSearch},...o};ge(e,wC,i,"buildCategoryFacet");let s=()=>Jp(e.state,n),u=()=>Kp(e.state,n),c=()=>Kt(e.state),l=()=>lr(e.state,n);return a(or(o)),{...r,toggleSelect(d){let f=i.numberOfValues;a(ya({facetId:n,selection:d,retrieveCount:f})),a(ie())},deselectAll(){a(ir(n)),a(ie())},sortBy(d){a(ko({facetId:n,criterion:d})),a(ie())},isSortedBy(d){return s().sortCriteria===d},showMoreValues(){var g;let{numberOfValues:d}=i,{activeValue:f,valuesAsTrees:p}=this.state,m=((g=f==null?void 0:f.children.length)!=null?g:p.length)+d;a(on({facetId:n,numberOfValues:m})),a(ie())},showLessValues(){let{numberOfValues:d}=i;a(on({facetId:n,numberOfValues:d})),a(ie())},enable(){a(We(n))},disable(){a(ve(n))},get state(){var $,H,pe,he;let d=s(),f=u(),p=c(),m=l(),g=($=f==null?void 0:f.values)!=null?$:[],y=(H=g.some(_=>_.children.length>0))!=null?H:!1,{parents:S,values:C}=qS(f==null?void 0:f.values),R=ut(g),P=R.length?R[R.length-1]:void 0,Q=!!P,G=(he=(pe=P==null?void 0:P.moreValuesAvailable)!=null?pe:f==null?void 0:f.moreValuesAvailable)!=null?he:!1,Z=P?P.children.length>i.numberOfValues:g.length>i.numberOfValues;return{facetId:n,parents:S,selectedValueAncestry:R,values:C,isHierarchical:y,valuesAsTrees:g,activeValue:P,isLoading:p,hasActiveValues:Q,canShowMoreValues:G,canShowLessValues:Z,sortCriteria:d.sortCriteria,enabled:m}}}}function CI(e){return e.addReducers({categoryFacetSet:sr,categoryFacetSearchSet:qo,facetOptions:Ne,configuration:z,search:J}),!0}function Qo(e,t){let r=e.dispatch,{options:a,getFacetSearch:n}=t,{facetId:o}=a;return{updateText(i){r(Ca({facetId:o,query:i,numberOfValues:n().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:i,options:s}=n();r(Ca({facetId:o,numberOfValues:s.numberOfValues+i})),r(t.isForFieldSuggestions?kf(o):Vt(o))},search(){r(t.isForFieldSuggestions?kf(o):Vt(o))},clear(){r(Oo({facetId:o}))},updateCaptions(i){r(Ca({facetId:o,captions:i}))},get state(){let{response:i,isLoading:s,options:u}=n(),{query:c}=u,l=i.values;return{...i,values:l,isLoading:s,query:c}}}}function IC(e,t){let{dispatch:r}=e,a={...cr,...t.options},{facetId:n}=a,o=()=>e.state.categoryFacetSearchSet[n];r(wo(a));let i=Qo(e,{options:a,getFacetSearch:o,isForFieldSuggestions:t.isForFieldSuggestions});return{...i,select(s){r(Po({facetId:n,value:s}))},get state(){return i.state}}}function Hu(e,t){let{dispatch:r}=e,a={...cr,...t.options},{facetId:n}=a,o=()=>e.state.categoryFacetSearchSet[n],i=IC(e,{options:{...a},isForFieldSuggestions:t.isForFieldSuggestions});r(wo(a));let s=Qo(e,{options:a,getFacetSearch:o,isForFieldSuggestions:t.isForFieldSuggestions});return{...s,...i,select:u=>{i.select(u),r(ie()),r(E({legacy:Pe({facetId:n,facetValue:u.rawValue}),next:{actionCause:L.facetSelect,getEventExtraPayload:c=>new U(()=>c).getFacetMetadata(n,u.rawValue)}}))},get state(){return{...s.state,...i.state}}}}function vI(e,t){if(!xI(e))throw I;let r=EC(e,t),{dispatch:a}=e,n=()=>r.state.facetId,o=Hu(e,{options:{facetId:n(),...t.options.facetSearch},isForFieldSuggestions:!1}),{state:i,...s}=o;return{...r,facetSearch:s,toggleSelect(u){r.toggleSelect(u),a(E({legacy:bI(n(),u),next:FI(n(),u)}))},deselectAll(){r.deselectAll(),a(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:u=>new U(()=>u).getFacetClearAllMetadata(n())}}))},sortBy(u){r.sortBy(u),a(E({legacy:ur({facetId:n(),criterion:u}),next:{actionCause:L.facetUpdateSort,getEventExtraPayload:c=>new U(()=>c).getFacetSortMetadata(n(),u)}}))},showMoreValues(){r.showMoreValues(),a(nr({legacy:To(n())}))},showLessValues(){r.showLessValues(),a(nr({legacy:Do(n())}))},get state(){return{...r.state,facetSearch:o.state}}}}function xI(e){return e.addReducers({categoryFacetSet:sr,categoryFacetSearchSet:qo,configuration:z,search:J}),!0}function bI(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?dt(r):Pe(r)}function FI(e,t){return{actionCause:t.state==="selected"?L.facetDeselect:L.facetSelect,getEventExtraPayload:a=>new U(()=>a).getFacetMetadata(e,t.value)}}var Bo=T(Tn(),e=>{e.addCase(Vu,(t,r)=>{let a=r.payload;Iu(t,a,qf)}).addCase(Ca,(t,r)=>{ku(t,r.payload)}).addCase(Vt.pending,(t,r)=>{let a=r.meta.arg;Ou(t,a,r.meta.requestId)}).addCase(Vt.rejected,(t,r)=>{let a=r.meta.arg;qu(t,a)}).addCase(Vt.fulfilled,(t,r)=>{Tu(t,r.payload,r.meta.requestId)}).addCase(Oo,(t,{payload:r})=>{Ps(t,r,qf)}).addCase(E.fulfilled,t=>{Du(t,qf)})});function qf(){return{moreValuesAvailable:!1,values:[]}}var kC=()=>ty("analytics/productListing/load",e=>e.makeInterfaceLoad(),e=>new Hn(e));var l4=v("productlisting/setUrl",e=>b(e,{url:new w({required:!0,url:!0})})),d4=v("productlisting/setAdditionalFields",e=>b(e,{additionalFields:new X({required:!0,each:new w({required:!0,emptyAllowed:!1})})})),Fa=ae("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let o=t(),{apiClient:i}=n,s=await i.getProducts(await RI(o));return Fe(s)?(r(yt(s.error)),a(s.error)):{response:s.success,analyticsAction:kC()}}),RI=async e=>{var a,n,o;let t=PI(e),r=await mt(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(a=e.productListing)==null?void 0:a.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...((n=e.productListing.additionalFields)==null?void 0:n.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&AI(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((o=e.sort)==null?void 0:o.by)||kt.Relevance)!==kt.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function AI(e){return e.debug}function PI(e){var t;return po(wI(e),(t=e.facetOrder)!=null?t:[])}function wI(e){var t,r,a,n;return[...Br((t=e.facetSet)!=null?t:{}),...Br((r=e.numericFacetSet)!=null?r:{}),...Br((a=e.dateFacetSet)!=null?a:{}),...Br((n=e.categoryFacetSet)!=null?n:{})]}var xr=T(_t(),e=>{e.addCase(gr,(t,r)=>{let{facetId:a}=r.payload;a in t||(t[a]=Vh(EI(r.payload)))}).addCase(ce.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(ue,(t,r)=>{let a=r.payload.f||{},n=r.payload.fExcluded||{};Object.keys(t).forEach(i=>{let{request:s}=t[i],u=a[i]||[],c=n[i]||[],l=s.currentValues.filter(d=>!u.includes(d.value)&&!c.includes(d.value));s.currentValues=[...u.map(OC),...c.map(qC),...l.map(kI)],s.preventAutoSelect=u.length>0,s.numberOfValues=Math.max(u.length+c.length,s.numberOfValues)})}).addCase(hr,(t,r)=>{var u;let{facetId:a,selection:n}=r.payload,o=(u=t[a])==null?void 0:u.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(c=>c.value===n.value);if(!i){zu(o,n);return}let s=i.state==="selected";i.state=s?"idle":"selected",o.freezeCurrentValues=!0}).addCase(va,(t,r)=>{var u;let{facetId:a,selection:n}=r.payload,o=(u=t[a])==null?void 0:u.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(c=>c.value===n.value);if(!i){zu(o,n);return}let s=i.state==="excluded";i.state=s?"idle":"excluded",o.freezeCurrentValues=!0}).addCase(Ur,(t,r)=>{var i;let{facetId:a,freezeCurrentValues:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.freezeCurrentValues=n)}).addCase(xe,(t,r)=>{var a;Rs((a=t[r.payload])==null?void 0:a.request)}).addCase(Re,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Rs(r))}).addCase(la,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Rs(r))}).addCase(ht,(t,r)=>Object.values(t).forEach(a=>{a.request.preventAutoSelect=!r.payload.allow})).addCase(No,(t,r)=>{Eo(t,r.payload)}).addCase(un,(t,r)=>{var o;let{facetId:a,numberOfValues:n}=r.payload;Pu((o=t[a])==null?void 0:o.request,n)}).addCase(ln,(t,r)=>{var i;let{facetId:a,isFieldExpanded:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.isFieldExpanded=n)}).addCase(E.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>{var o;return Tf((o=t[n.facetId])==null?void 0:o.request,n)})}).addCase(Fa.fulfilled,(t,r)=>{var n,o;(((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[]).forEach(i=>{var s;return Tf((s=t[i.facetId])==null?void 0:s.request,i)})}).addCase(nr.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>{var o;return Tf((o=t[n.facetId])==null?void 0:o.request,n)})}).addCase(sn,(t,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=t[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,u=s.find(d=>d.value===i);if(u){u.state="selected";return}let c=OC(i);zu(o,c),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(ws,(t,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=t[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,u=s.find(d=>d.value===i);if(u){u.state="excluded";return}let c=qC(i);zu(o,c),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(ve,(t,r)=>{if(!(r.payload in t))return;let{request:a}=t[r.payload];Rs(a)})});function zu(e,t){let{currentValues:r}=e,a=r.findIndex(s=>s.state==="idle"),n=a===-1?r.length:a,o=r.slice(0,n),i=r.slice(n+1);e.currentValues=[...o,t,...i],e.numberOfValues=e.currentValues.length}function Tf(e,t){!e||(e.currentValues=t.values.map(II),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var Es={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function EI(e){return{...Es,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function II(e){let{value:t,state:r}=e;return{value:t,state:r}}function OC(e){return{value:e,state:"selected"}}function qC(e){return{value:e,state:"excluded"}}function kI(e){return{...e,state:"idle"}}var Gu=e=>e.state==="selected",Wu=e=>e.state==="excluded",Yu=(e,t)=>{let r={facetId:e,facetValue:t.value};return Gu(t)?dt(r):Pe(r)},Ku=(e,t)=>({actionCause:Gu(t)?L.facetDeselect:L.facetSelect,getEventExtraPayload:r=>new U(()=>r).getFacetMetadata(e,t.value)}),TC=(e,t)=>{let r={facetId:e,facetValue:t.value};return Wu(t)?dt(r):Mt(r)},DC=(e,t)=>({actionCause:Wu(t)?L.facetUnexclude:L.facetExclude,getEventExtraPayload:r=>new U(()=>r).getFacetMetadata(e,t.value)});function Ju(e,t){let{dispatch:r}=e,{options:a,select:n,exclude:o,isForFieldSuggestions:i}=t,{facetId:s}=a,u=()=>e.state.facetSearchSet[s];r(Vu(a));let c=Qo(e,{options:a,getFacetSearch:u,isForFieldSuggestions:i});return{...c,select(l){r(sn({facetId:s,value:l})),n(l)},exclude(l){r(ws({facetId:s,value:l})),o(l)},singleSelect(l){r(xe(s)),r(sn({facetId:s,value:l})),n(l)},singleExclude(l){r(xe(s)),r(ws({facetId:s,value:l})),o(l)},get state(){let{values:l}=c.state;return{...c.state,values:l.map(({count:d,displayValue:f,rawValue:p})=>({count:d,displayValue:f,rawValue:p}))}}}}var VC={facetId:te,selection:new q({values:cn})},MC=ae("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:e,selection:t},VC),a(hr({facetId:e,selection:t})),a(ie())}),NC=ae("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:e,selection:t},VC),a(va({facetId:e,selection:t})),a(ie())});var jo=["allValues","atLeastOneValue"];var Xu=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var LC=new ee({facetId:dr,field:pr,filterFacetCount:fr,injectionDepth:mr,numberOfValues:Nt,sortCriteria:new w({constrainTo:Xu}),resultsMustMatch:new w({constrainTo:jo}),facetSearch:Mo});function QC(e,t,r=LC){if(!OI(e))throw I;let{dispatch:a}=e,n=M(e),o=Ye(e,t.options),i={...Es,...gc("facetSearch",t.options),field:t.options.field,facetId:o},s={facetSearch:{...cr,...t.options.facetSearch},...i};ge(e,r,s,"buildFacet");let u=()=>Yp(e.state,o),c=()=>ds(e.state,o),l=()=>Kt(e.state),d=()=>lr(e.state,o),f=()=>{let{currentValues:m}=u();return m.filter(g=>g.state!=="idle").length},p=()=>{let{currentValues:m}=u(),g=s.numberOfValues,y=!!m.find(S=>S.state==="idle");return g<m.length&&y};return a(gr(i)),{...n,toggleSelect:m=>a(MC({facetId:s.facetId,selection:m})),toggleExclude:m=>a(NC({facetId:s.facetId,selection:m})),toggleSingleSelect:function(m){m.state==="idle"&&a(xe(o)),this.toggleSelect(m)},toggleSingleExclude:function(m){m.state==="idle"&&a(xe(o)),this.toggleExclude(m)},isValueSelected:Gu,isValueExcluded:Wu,deselectAll(){a(xe(o)),a(ie())},sortBy(m){a(No({facetId:o,criterion:m})),a(ie())},isSortedBy(m){return this.state.sortCriterion===m},showMoreValues(){let m=u().numberOfValues,g=s.numberOfValues,y=g-m%g,S=m+y;a(un({facetId:o,numberOfValues:S})),a(ln({facetId:o,isFieldExpanded:!0})),a(ie())},showLessValues(){let m=s.numberOfValues,g=Math.max(m,f());a(un({facetId:o,numberOfValues:g})),a(ln({facetId:o,isFieldExpanded:!1})),a(ie())},enable(){a(We(o))},disable(){a(ve(o))},get state(){let m=u(),g=c(),y=l(),S=d(),C;typeof m.sortCriteria=="object"?C=m.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":C=m.sortCriteria;let R=g?g.values:[],P=R.some(Z=>Z.state!=="idle"),Q=g?g.moreValuesAvailable:!1,G=m.resultsMustMatch;return{facetId:o,values:R,sortCriterion:C,resultsMustMatch:G,isLoading:y,hasActiveValues:P,canShowMoreValues:Q,canShowLessValues:p(),enabled:S}}}}function OI(e){return e.addReducers({facetSet:xr,facetOptions:Ne,configuration:z,facetSearchSet:Bo}),!0}var BC=new ee({facetId:dr,field:pr,filterFacetCount:fr,injectionDepth:mr,numberOfValues:Nt,sortCriteria:new w({constrainTo:Xu}),resultsMustMatch:new w({constrainTo:jo}),facetSearch:Mo,allowedValues:Nu,hasBreadcrumbs:xC,customSort:Lu});function qI(e,t){if(!TI(e))throw I;let{dispatch:r}=e,a=QC(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},BC),n=()=>a.state.facetId,i=(()=>{let{facetSearch:c}=t.options;return Ju(e,{options:{facetId:n(),...c},select:l=>{r(ie()),r(E({legacy:Pe({facetId:n(),facetValue:l.rawValue}),next:{actionCause:L.facetSelect,getEventExtraPayload:d=>new U(()=>d).getFacetMetadata(n(),l.rawValue)}}))},exclude:l=>{r(ie()),r(E({legacy:Mt({facetId:n(),facetValue:l.rawValue}),next:{actionCause:L.facetExclude,getEventExtraPayload:d=>new U(()=>d).getFacetMetadata(n(),l.rawValue)}}))},isForFieldSuggestions:!1})})(),{state:s,...u}=i;return{...a,facetSearch:u,toggleSelect(c){a.toggleSelect(c),r(E({legacy:Yu(n(),c),next:Ku(n(),c)}))},toggleExclude(c){a.toggleExclude(c),r(E({legacy:TC(n(),c),next:DC(n(),c)}))},deselectAll(){a.deselectAll(),r(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:c=>new U(()=>c).getFacetClearAllMetadata(n())}}))},sortBy(c){a.sortBy(c),r(E({legacy:ur({facetId:n(),criterion:c}),next:{actionCause:L.facetUpdateSort,getEventExtraPayload:l=>new U(()=>l).getFacetSortMetadata(n(),c)}}))},isSortedBy(c){return this.state.sortCriterion===c},showMoreValues(){a.showMoreValues(),r(nr({legacy:To(n())}))},showLessValues(){a.showLessValues(),r(nr({legacy:Do(n())}))},get state(){return{...a.state,facetSearch:i.state}}}}function TI(e){return e.addReducers({facetSet:xr,configuration:z,facetSearchSet:Bo,search:J}),!0}var Zu=e=>e.state==="selected",Df=e=>e.state==="excluded",el=(e,t)=>{let r=`${t.start}..${t.end}`,a={facetId:e,facetValue:r};return Zu(t)?dt(a):Pe(a)},tl=(e,t)=>({actionCause:Zu(t)?L.facetSelect:L.facetDeselect,getEventExtraPayload:r=>new U(()=>r).getFacetMetadata(e,`${t.start}..${t.end}`)}),jC=(e,t)=>{let r=`${t.start}..${t.end}`,a={facetId:e,facetValue:r};return Df(t)?dt(a):Mt(a)};var rl=v("rangeFacet/executeToggleSelect",e=>b(e,mn(e.selection))),al=v("rangeFacet/executeToggleExclude",e=>b(e,mn(e.selection)));var UC={facetId:te,selection:new q({values:fn})},_C=ae("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,UC),t(yr(e)),t(rl(e)),t(ie())}),$C=ae("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,UC),t(xa(e)),t(al(e)),t(ie())});var nl={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function ol(e,t){let{request:r}=t,{facetId:a}=r;if(a in e)return;let n=HC(r);r.numberOfValues=n,e[a]=t}function il(e,t,r){var n;let a=(n=e[t])==null?void 0:n.request;!a||(a.currentValues=r,a.numberOfValues=HC(a))}function sl(e,t,r){var i;let a=(i=e[t])==null?void 0:i.request;if(!a)return;let n=ll(a.currentValues,r);if(!n)return;let o=n.state==="selected";n.state=o?"idle":"selected",a.preventAutoSelect=!0}function cl(e,t,r){var i;let a=(i=e[t])==null?void 0:i.request;if(!a)return;let n=ll(a.currentValues,r);if(!n)return;let o=n.state==="excluded";n.state=o?"idle":"excluded",a.preventAutoSelect=!0}function Ra(e,t){var a;let r=(a=e[t])==null?void 0:a.request;!r||r.currentValues.forEach(n=>n.state="idle")}function ul(e,t){Object.entries(e).forEach(([r,{request:a}])=>{let n=t[r]||[];a.currentValues.forEach(s=>{let u=!!ll(n,s);return s.state=u?"selected":"idle",s});let o=n.filter(s=>!ll(a.currentValues,s)),i=a.currentValues;i.push(...o),a.numberOfValues=Math.max(a.numberOfValues,i.length)})}function Uo(e,t,r){t.forEach(a=>{var s;let n=a.facetId,o=(s=e[n])==null?void 0:s.request;if(!o)return;let i=r(a.values);o.currentValues=i,o.preventAutoSelect=!1})}function ll(e,t){let{start:r,end:a}=t;return e.find(n=>n.start===r&&n.end===a)}function HC(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:a}=e;return t?Math.max(a,r.length):r.length}var br=T($t(),e=>{e.addCase(Sr,(t,r)=>{let{payload:a}=r,n=DI(a);ol(t,Mh(n))}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.dateFacetSet)!=null?n:t}).addCase(ue,(t,r)=>{let a=r.payload.df||{};ul(t,a)}).addCase(yr,(t,r)=>{let{facetId:a,selection:n}=r.payload;sl(t,a,n)}).addCase(xa,(t,r)=>{let{facetId:a,selection:n}=r.payload;cl(t,a,n)}).addCase(_r,(t,r)=>{let{facetId:a,values:n}=r.payload;il(t,a,n)}).addCase(ju,(t,r)=>{Ra(t,r.payload)}).addCase(Re,t=>{Object.keys(t).forEach(r=>{Ra(t,r)})}).addCase(Bu,(t,r)=>{Eo(t,r.payload)}).addCase(E.fulfilled,(t,r)=>{let a=r.payload.response.facets;Uo(t,a,zC)}).addCase(Fa.fulfilled,(t,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];Uo(t,a,zC)}).addCase(ve,(t,r)=>{Ra(t,r.payload)})});function DI(e){return{...nl,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function zC(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}function dl(e,t){let{facetId:r,getRequest:a}=t,n=M(e),o=e.dispatch,i=()=>lr(e.state,r);return{...n,isValueSelected:Zu,isValueExcluded:Df,deselectAll(){o(xe(r)),o(ie())},sortBy(s){o(Lo({facetId:r,criterion:s})),o(ie())},isSortedBy(s){return this.state.sortCriterion===s},enable(){o(We(r))},disable(){o(ve(r))},get state(){let s=a(),u=Yt(e.state,r),c=s.sortCriteria,l=s.resultsMustMatch,d=u?u.values:[],f=Kt(e.state),p=i(),m=d.some(g=>g.state!=="idle");return{facetId:r,values:d,sortCriterion:c,resultsMustMatch:l,hasActiveValues:m,isLoading:f,enabled:p}}}}function pl(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}var fl=["idle","selected","excluded"];var ml=["ascending","descending"],gl=["even","equiprobable"];var VI={start:new w,end:new w,endInclusive:new K,state:new w({constrainTo:fl})},MI=new ee({facetId:dr,field:pr,generateAutomaticRanges:Mu,filterFacetCount:fr,injectionDepth:mr,numberOfValues:Nt,currentValues:new X({each:new q({values:VI})}),sortCriteria:new w({constrainTo:ml}),rangeAlgorithm:new w({constrainTo:gl})});function hl(e,t){ge(e,MI,t,"buildDateFacet"),Qu(t)}function GC(e,t){if(!NI(e))throw I;pl(t.options,"buildDateFacet");let r=e.dispatch,a=Ye(e,t.options),n={currentValues:[],...t.options,facetId:a};hl(e,n),r(Sr(n));let o=dl(e,{facetId:a,getRequest:()=>e.state.dateFacetSet[a].request});return{...o,toggleSelect:i=>r(_C({facetId:a,selection:i})),toggleSingleSelect:function(i){i.state==="idle"&&r(xe(a)),this.toggleSelect(i)},toggleExclude:i=>r($C({facetId:a,selection:i})),toggleSingleExclude:function(i){i.state==="idle"&&r(xe(a)),this.toggleExclude(i)},get state(){return o.state}}}function NI(e){return e.addReducers({configuration:z,search:J,dateFacetSet:br,facetOptions:Ne}),!0}function LI(e,t){let r=GC(e,t),a=e.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:o=>new U(()=>o).getFacetClearAllMetadata(n())}}))},sortBy(o){r.sortBy(o),a(E({legacy:ur({facetId:n(),criterion:o}),next:{actionCause:L.facetUpdateSort,getEventExtraPayload:i=>new U(()=>i).getFacetSortMetadata(n(),o)}}))},toggleSelect:o=>{r.toggleSelect(o),a(E({legacy:el(n(),o),next:tl(n(),o)}))},toggleExclude:o=>{r.toggleExclude(o),a(E({legacy:jC(n(),o)}))},get state(){return r.state}}}var vt=T(Ht(),e=>{e.addCase(Cr,(t,r)=>{let{payload:a}=r,n=QI(a);ol(t,Nh(n))}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.numericFacetSet)!=null?n:t}).addCase(ue,(t,r)=>{let a=r.payload.nf||{};ul(t,a)}).addCase(vr,(t,r)=>{let{facetId:a,selection:n}=r.payload;sl(t,a,n)}).addCase(ba,(t,r)=>{let{facetId:a,selection:n}=r.payload;cl(t,a,n)}).addCase($r,(t,r)=>{let{facetId:a,values:n}=r.payload;il(t,a,n)}).addCase($u,(t,r)=>{Ra(t,r.payload)}).addCase(Re,t=>{Object.keys(t).forEach(r=>{Ra(t,r)})}).addCase(_u,(t,r)=>{Eo(t,r.payload)}).addCase(E.fulfilled,(t,r)=>{let a=r.payload.response.facets;Uo(t,a,WC)}).addCase(Fa.fulfilled,(t,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];Uo(t,a,WC)}).addCase(ve,(t,r)=>{Ra(t,r.payload)})});function QI(e){return{...nl,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function WC(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}var YC={facetId:te,selection:new q({values:pn})},KC=ae("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,YC),t(vr(e)),t(rl(e)),t(ie())}),_J=ae("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,YC),t(ba(e)),t(al(e)),t(ie())});var BI={start:new D,end:new D,endInclusive:new K,state:new w({constrainTo:fl})},jI=new ee({facetId:dr,field:pr,generateAutomaticRanges:Mu,filterFacetCount:fr,injectionDepth:mr,numberOfValues:Nt,currentValues:new X({each:new q({values:BI})}),sortCriteria:new w({constrainTo:ml}),resultsMustMatch:new w({constrainTo:jo}),rangeAlgorithm:new w({constrainTo:gl})});function Sl(e,t){ge(e,jI,t,"buildNumericFacet"),Uu(t)}function Is(e){return{endInclusive:!1,state:"idle",...e}}function JC(e,t){if(!UI(e))throw I;pl(t.options,"buildNumericFacet");let r=e.dispatch,a=Ye(e,t.options),n={currentValues:[],...t.options,facetId:a};Sl(e,n),r(Cr(n));let o=dl(e,{facetId:a,getRequest:()=>e.state.numericFacetSet[a].request});return{...o,toggleSelect:i=>r(KC({facetId:a,selection:i})),toggleSingleSelect(i){i.state==="idle"&&r(xe(a)),this.toggleSelect(i)},get state(){return o.state}}}function UI(e){return e.addReducers({numericFacetSet:vt,facetOptions:Ne,configuration:z,search:J}),!0}function _I(e,t){if(!$I(e))throw I;let r=JC(e,t),a=e.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:o=>new U(()=>o).getFacetClearAllMetadata(n())}}))},sortBy(o){r.sortBy(o),a(E({legacy:ur({facetId:n(),criterion:o}),next:{actionCause:L.facetUpdateSort,getEventExtraPayload:i=>new U(()=>i).getFacetSortMetadata(n(),o)}}))},toggleSelect:o=>{r.toggleSelect(o),a(E({legacy:el(n(),o),next:tl(n(),o)}))},get state(){return{...r.state}}}}function $I(e){return e.addReducers({numericFacetSet:vt,configuration:z,search:J}),!0}function HI(e,t){return!!t&&t.facetId in e.numericFacetSet}var XC=(e,t)=>{let r=Yt(e,t);if(HI(e,r))return r},ZC=(e,t)=>(XC(e,t)||{values:[]}).values.filter(a=>a.state!=="idle"),ev=(e,t)=>(XC(e,t)||{values:[]}).values.filter(a=>a.state==="selected");function tv(e,t){var u;if(!zI(e))throw I;let r=M(e),{dispatch:a}=e,n=()=>e.state,o=Ye(e,t.options),i={...t.options,currentValues:((u=t.initialState)==null?void 0:u.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Sl(e,i),a(Cr(i));let s=()=>lr(e.state,o);return{...r,clear:()=>{a($r({facetId:o,values:[]})),a(ie())},setRange:c=>{let l={...c,state:"selected",numberOfResults:0,endInclusive:!0},d=$r({facetId:o,values:[l]});return d.error?!1:(a(d),a(ie()),!0)},enable(){a(We(o))},disable(){a(ve(o))},get state(){let c=Kt(n()),l=s(),d=ev(n(),o),f=d.length?d[0]:void 0;return{facetId:o,isLoading:c,range:f,enabled:l}}}}function zI(e){return e.addReducers({numericFacetSet:vt,facetOptions:Ne,configuration:z,search:J}),!0}function GI(e,t){if(!WI(e))throw I;let r=tv(e,t),{dispatch:a}=e,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:o=>new U(()=>o).getFacetClearAllMetadata(n())}}))},setRange:o=>{let i=r.setRange(o);return i&&a(E({legacy:Pe({facetId:n(),facetValue:`${o.start}..${o.end}`}),next:{actionCause:L.facetSelect,getEventExtraPayload:s=>new U(()=>s).getFacetMetadata(n(),`${o.start}..${o.end}`)}})),i},get state(){return{...r.state}}}}function WI(e){return e.addReducers({numericFacetSet:vt,configuration:z,search:J}),!0}function YI(e,t){return!!t&&t.facetId in e.dateFacetSet}var rv=(e,t)=>{let r=Yt(e,t);if(YI(e,r))return r},av=(e,t)=>(rv(e,t)||{values:[]}).values.filter(a=>a.state==="selected"),nv=(e,t)=>(rv(e,t)||{values:[]}).values.filter(a=>a.state!=="idle");function ov(e,t){var u;if(!KI(e))throw I;let r=M(e),{dispatch:a}=e,n=()=>e.state,o=Ye(e,t.options),i={...t.options,currentValues:((u=t.initialState)==null?void 0:u.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};hl(e,i),a(Sr(i));let s=()=>lr(e.state,o);return{...r,clear:()=>{a(_r({facetId:o,values:[]})),a(ie())},setRange:c=>{let l={...c,state:"selected",numberOfResults:0,endInclusive:!0},d=_r({facetId:o,values:[l]});return d.error?!1:(a(d),a(ie()),!0)},enable(){a(We(o))},disable(){a(ve(o))},get state(){let c=Kt(n()),l=s(),d=av(n(),o),f=d.length?d[0]:void 0;return{facetId:o,isLoading:c,range:f,enabled:l}}}}function KI(e){return e.addReducers({dateFacetSet:br,facetOptions:Ne,configuration:z,search:J}),!0}function JI(e,t){if(!XI(e))throw I;let r=ov(e,t),{dispatch:a}=e,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:o=>new U(()=>o).getFacetClearAllMetadata(n())}}))},setRange:o=>{let i=r.setRange(o);return i&&a(E({legacy:Pe({facetId:n(),facetValue:`${o.start}..${o.end}`}),next:{actionCause:L.facetSelect,getEventExtraPayload:s=>new U(()=>s).getFacetMetadata(n(),`${o.start}..${o.end}`)}})),i},get state(){return{...r.state}}}}function XI(e){return e.addReducers({dateFacetSet:br,configuration:z,search:J}),!0}var iv=e=>{let t=ZI(e),{view:r,user:a,...n}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,...n,context:{user:a,view:r,cart:e.cart.cartItems.map(o=>e.cart.cart[o])},facets:t,...e.commercePagination&&{page:e.commercePagination.page},...e.commerceSort&&{sort:ek(e.commerceSort.appliedSort)}}};function ZI(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.map(t=>e.commerceFacetSet[t].request).filter(t=>t.values.length>0)}function ek(e){if(!!e)return e.by===kt.Relevance?{sortCriteria:kt.Relevance}:{sortCriteria:kt.Fields,fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}var sv=()=>ey("analytics/commerce/productListing/load",e=>e.makeInterfaceLoad(),e=>new $n(e));var cv=ae("commerce/productListing/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let o=t(),{apiClient:i}=n,s=await i.getProductListing(iv(o));return Fe(s)?(r(yt(s.error)),a(s.error)):{response:s.success,analyticsAction:sv()}});var yl=T(ta(),e=>{e.addCase(E.fulfilled,(t,r)=>r.payload.response.facets.map(a=>a.facetId)).addCase(cv.fulfilled,(t,r)=>{let a=n=>{var o;return(o=n.facetId)!=null?o:n.field};return r.payload.response.facets.map(a)}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOrder)!=null?n:t})});var Cl=()=>k("history/analytics/forward",e=>e.makeSearchEvent("historyForward")),vl=()=>k("history/analytics/backward",e=>e.makeSearchEvent("historyBackward")),xl=()=>k("history/analytics/noresultsback",e=>e.makeNoResultsBack());var tk=Object.getOwnPropertyNames,rk=Object.getOwnPropertySymbols,ak=Object.prototype.hasOwnProperty;function uv(e,t){return function(a,n,o){return e(a,n,o)&&t(a,n,o)}}function bl(e){return function(r,a,n){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,n);var o=n.cache,i=o.get(r),s=o.get(a);if(i&&s)return i===a&&s===r;o.set(r,a),o.set(a,r);var u=e(r,a,n);return o.delete(r),o.delete(a),u}}function lv(e){return tk(e).concat(rk(e))}var dv=Object.hasOwn||function(e,t){return ak.call(e,t)};function _o(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var pv="_owner",fv=Object.getOwnPropertyDescriptor,mv=Object.keys;function nk(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function ok(e,t){return _o(e.getTime(),t.getTime())}function gv(e,t,r){if(e.size!==t.size)return!1;for(var a={},n=e.entries(),o=0,i,s;(i=n.next())&&!i.done;){for(var u=t.entries(),c=!1,l=0;(s=u.next())&&!s.done;){var d=i.value,f=d[0],p=d[1],m=s.value,g=m[0],y=m[1];!c&&!a[l]&&(c=r.equals(f,g,o,l,e,t,r)&&r.equals(p,y,f,g,e,t,r))&&(a[l]=!0),l++}if(!c)return!1;o++}return!0}function ik(e,t,r){var a=mv(e),n=a.length;if(mv(t).length!==n)return!1;for(var o;n-- >0;)if(o=a[n],o===pv&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!dv(t,o)||!r.equals(e[o],t[o],o,o,e,t,r))return!1;return!0}function ks(e,t,r){var a=lv(e),n=a.length;if(lv(t).length!==n)return!1;for(var o,i,s;n-- >0;)if(o=a[n],o===pv&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!dv(t,o)||!r.equals(e[o],t[o],o,o,e,t,r)||(i=fv(e,o),s=fv(t,o),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function sk(e,t){return _o(e.valueOf(),t.valueOf())}function ck(e,t){return e.source===t.source&&e.flags===t.flags}function hv(e,t,r){if(e.size!==t.size)return!1;for(var a={},n=e.values(),o,i;(o=n.next())&&!o.done;){for(var s=t.values(),u=!1,c=0;(i=s.next())&&!i.done;)!u&&!a[c]&&(u=r.equals(o.value,i.value,o.value,i.value,e,t,r))&&(a[c]=!0),c++;if(!u)return!1}return!0}function uk(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var lk="[object Arguments]",dk="[object Boolean]",pk="[object Date]",fk="[object Map]",mk="[object Number]",gk="[object Object]",hk="[object RegExp]",Sk="[object Set]",yk="[object String]",Ck=Array.isArray,Sv=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,yv=Object.assign,vk=Object.prototype.toString.call.bind(Object.prototype.toString);function xk(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areMapsEqual,n=e.areObjectsEqual,o=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,s=e.areSetsEqual,u=e.areTypedArraysEqual;return function(l,d,f){if(l===d)return!0;if(l==null||d==null||typeof l!="object"||typeof d!="object")return l!==l&&d!==d;var p=l.constructor;if(p!==d.constructor)return!1;if(p===Object)return n(l,d,f);if(Ck(l))return t(l,d,f);if(Sv!=null&&Sv(l))return u(l,d,f);if(p===Date)return r(l,d,f);if(p===RegExp)return i(l,d,f);if(p===Map)return a(l,d,f);if(p===Set)return s(l,d,f);var m=vk(l);return m===pk?r(l,d,f):m===hk?i(l,d,f):m===fk?a(l,d,f):m===Sk?s(l,d,f):m===gk?typeof l.then!="function"&&typeof d.then!="function"&&n(l,d,f):m===lk?n(l,d,f):m===dk||m===mk||m===yk?o(l,d,f):!1}}function bk(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,n={areArraysEqual:a?ks:nk,areDatesEqual:ok,areMapsEqual:a?uv(gv,ks):gv,areObjectsEqual:a?ks:ik,arePrimitiveWrappersEqual:sk,areRegExpsEqual:ck,areSetsEqual:a?uv(hv,ks):hv,areTypedArraysEqual:a?ks:uk};if(r&&(n=yv({},n,r(n))),t){var o=bl(n.areArraysEqual),i=bl(n.areMapsEqual),s=bl(n.areObjectsEqual),u=bl(n.areSetsEqual);n=yv({},n,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:u})}return n}function Fk(e){return function(t,r,a,n,o,i,s){return e(t,r,s)}}function Rk(e){var t=e.circular,r=e.comparator,a=e.createState,n=e.equals,o=e.strict;if(a)return function(u,c){var l=a(),d=l.cache,f=d===void 0?t?new WeakMap:void 0:d,p=l.meta;return r(u,c,{cache:f,equals:n,meta:p,strict:o})};if(t)return function(u,c){return r(u,c,{cache:new WeakMap,equals:n,meta:void 0,strict:o})};var i={cache:void 0,equals:n,meta:void 0,strict:o};return function(u,c){return r(u,c,i)}}var xX=Fr(),bX=Fr({strict:!0}),FX=Fr({circular:!0}),RX=Fr({circular:!0,strict:!0}),AX=Fr({createInternalComparator:function(){return _o}}),PX=Fr({strict:!0,createInternalComparator:function(){return _o}}),wX=Fr({circular:!0,createInternalComparator:function(){return _o}}),EX=Fr({circular:!0,createInternalComparator:function(){return _o},strict:!0});function Fr(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,a=e.createInternalComparator,n=e.createState,o=e.strict,i=o===void 0?!1:o,s=bk(e),u=xk(s),c=a?a(u):Fk(u);return Rk({circular:r,comparator:u,createState:n,equals:c,strict:i})}function gn(e,t,r=(a,n)=>a===n){return e.length===t.length&&e.findIndex((a,n)=>!r(t[n],a))===-1}function Ak(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(a=>Os(r,a))!==-1)}var Os=Fr({createCustomConfig:e=>({...e,areArraysEqual:Ak})});var Pk=T(qc(),e=>{e.addCase(Tt,(t,r)=>wk(t,r.payload)?void 0:r.payload)}),wk=(e,t)=>Ek(e.context,t.context)&&Ik(e.dictionaryFieldContext,t.dictionaryFieldContext)&&Mk(e.advancedSearchQueries,t.advancedSearchQueries)&&kk(e.tabSet,t.tabSet)&&Ok(e.staticFilterSet,t.staticFilterSet)&&Vf(e.facetSet,t.facetSet)&&Vf(e.dateFacetSet,t.dateFacetSet)&&Vf(e.numericFacetSet,t.numericFacetSet)&&Tk(e.automaticFacetSet,t.automaticFacetSet)&&qk(e.categoryFacetSet,t.categoryFacetSet)&&Dk(e.pagination,t.pagination)&&Vk(e.query,t.query)&&Nk(e,t)&&Lk(e.pipeline,t.pipeline)&&Qk(e.searchHub,t.searchHub)&&Bk(e.facetOrder,t.facetOrder)&&jk(e.debug,t.debug),Ek=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Ik=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),kk=(e,t)=>{let r=Cv(e),a=Cv(t);return(r==null?void 0:r.id)===(a==null?void 0:a.id)},Cv=e=>Object.values(e).find(t=>t.isActive),Ok=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let n=vv(e[r]),o=vv(a);if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},vv=e=>e.values.filter(t=>t.state!=="idle"),Vf=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let n=e[r].request.currentValues.filter(i=>i.state!=="idle"),o=a.request.currentValues.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},qk=(e,t)=>{var r;for(let[a,n]of Object.entries(t)){if(!e[a])return!1;let o=ut((r=e[a])==null?void 0:r.request.currentValues).map(({value:s})=>s),i=ut(n==null?void 0:n.request.currentValues).map(({value:s})=>s);if(JSON.stringify(o)!==JSON.stringify(i))return!1}return!0},Tk=(e,t)=>{for(let[r,a]of Object.entries(t.set)){if(!e.set[r])return!1;let n=e.set[r].response.values.filter(i=>i.state!=="idle"),o=a.response.values.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},Dk=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,Vk=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Mk=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Nk=(e,t)=>e.sortCriteria===t.sortCriteria,Lk=(e,t)=>e===t,Qk=(e,t)=>e===t,Bk=(e,t)=>gn(e,t),jk=(e,t)=>e===t,Fl=Uh({actionTypes:{redo:uf.type,undo:cf.type,snapshot:Tt.type},reducer:Pk});function Uk(e){if(!_k(e))throw I;let t=M(e),{dispatch:r}=e,a=()=>e.state,n=o=>o.past.length>0&&!oe(o.present);return{...t,get state(){return a().history},async back(){!n(this.state)||(await r(gs()),r(E({legacy:vl(),next:{actionCause:L.historyBackward,getEventExtraPayload:o=>new U(()=>o).getBaseMetadata()}})))},async forward(){!this.state.future.length||!this.state.present||(await r(au()),r(E({legacy:Cl(),next:{actionCause:L.historyForward,getEventExtraPayload:o=>new U(()=>o).getBaseMetadata()}})))},async backOnNoResults(){!n(this.state)||(await r(gs()),r(E({legacy:xl(),next:{actionCause:L.noResultsBack,getEventExtraPayload:o=>new U(()=>o).getBaseMetadata()}})))}}}function _k(e){return e.addReducers({history:Fl,configuration:z,facetOrder:yl}),!0}var $k=new D({min:Hh,default:kc,required:!1}),Hk=new D({min:_h,max:$h,default:Ic,required:!1}),zk={desiredCount:Hk,numberOfValues:$k},Rl=v("automaticFacet/setOptions",e=>b(e,zk)),Al=v("automaticFacet/deselectAll",e=>b(e,te)),Gk=O,Aa=v("automaticFacet/toggleSelectValue",e=>b(e,{field:Gk,selection:new q({values:cn})}));var Rr=T(Be(),e=>{e.addCase(no,(t,r)=>{let a=Mf(t),n=r.payload;t.defaultNumberOfResults=t.numberOfResults=n,t.firstResult=qs(a,n)}).addCase(oo,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(Dt,t=>{t.firstResult=0}).addCase(io,(t,r)=>{let a=r.payload;t.firstResult=qs(a,t.numberOfResults)}).addCase(St,(t,r)=>{let a=r.payload;t.firstResult=qs(a,t.numberOfResults)}).addCase(co,t=>{let r=Mf(t),a=Math.max(r-1,Xa);t.firstResult=qs(a,t.numberOfResults)}).addCase(so,t=>{let r=Mf(t),a=Wk(t),n=Math.min(r+1,a);t.firstResult=qs(n,t.numberOfResults)}).addCase(ce.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(ue,(t,r)=>{var a,n;t.firstResult=(a=r.payload.firstResult)!=null?a:t.firstResult,t.numberOfResults=(n=r.payload.numberOfResults)!=null?n:t.defaultNumberOfResults}).addCase(E.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.totalCountFiltered}).addCase(Fa.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.pagination.totalCount}).addCase(xe,t=>{xt(t)}).addCase(hr,t=>{xt(t)}).addCase(ir,t=>{xt(t)}).addCase(ya,t=>{xt(t)}).addCase(Po,t=>{xt(t)}).addCase(yr,t=>{xt(t)}).addCase(vr,t=>{xt(t)}).addCase(Re,t=>{xt(t)}).addCase(_r,t=>{xt(t)}).addCase($r,t=>{xt(t)}).addCase(sn,t=>{xt(t)}).addCase(Aa,t=>{xt(t)})});function xt(e){e.firstResult=Be().firstResult}function Mf(e){let{firstResult:t,numberOfResults:r}=e;return Nf(t,r)}function Wk(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Lf(t,r)}function qs(e,t){return(e-1)*t}function Nf(e,t){return Math.round(e/t)+1}function Lf(e,t){let r=Math.min(e,vs);return Math.ceil(r/t)}function Yk(e){return e.pagination.firstResult}function xv(e){return e.pagination.numberOfResults}function Kk(e){return e.pagination.totalCountFiltered}var Pa=e=>{let t=Yk(e),r=xv(e);return Nf(t,r)},Pl=e=>{let t=Kk(e),r=xv(e);return Lf(t,r)},Qf=(e,t)=>{let r=Pa(e),a=Pl(e),n=Jk(r,t);return n=Xk(n),n=Zk(n,a),eO(n)};function Jk(e,t){let r=t%2==0,a=Math.floor(t/2),n=r?a-1:a,o=e-a,i=e+n;return{start:o,end:i}}function Xk(e){let t=Math.max(Xa-e.start,0),r=e.start+t,a=e.end+t;return{start:r,end:a}}function Zk(e,t){let r=Math.max(e.end-t,0),a=Math.max(e.start-r,Xa),n=e.end-r;return{start:a,end:n}}function eO(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var $o=()=>k("analytics/pager/resize",(e,t)=>{var r;return e.makePagerResize({currentResultsPerPage:((r=t.pagination)==null?void 0:r.numberOfResults)||Be().numberOfResults})}),Ho=()=>k("analytics/pager/number",(e,t)=>e.makePagerNumber({pagerNumber:Pa(t)})),wl=()=>k("analytics/pager/next",(e,t)=>e.makePagerNext({pagerNumber:Pa(t)})),El=()=>k("analytics/pager/previous",(e,t)=>e.makePagerPrevious({pagerNumber:Pa(t)}));var tO=new ee({numberOfPages:new D({default:5,min:0})}),rO=new ee({page:new D({min:1})});function bv(e,t={}){if(!aO(e))throw I;let r=M(e),{dispatch:a}=e,n=ge(e,tO,t.options,"buildPager"),i=ke(e,rO,t.initialState,"buildPager").page;i&&a(io(i));let s=()=>Pa(e.state),u=()=>{let{numberOfPages:l}=n;return Qf(e.state,l)},c=()=>Pl(e.state);return{...r,get state(){let l=s(),d=c(),f=l>Xa&&d>0,p=l<d;return{currentPage:l,currentPages:u(),maxPage:d,hasPreviousPage:f,hasNextPage:p}},selectPage(l){a(St(l))},nextPage(){a(so())},previousPage(){a(co())},isCurrentPage(l){return l===this.state.currentPage}}}function aO(e){return e.addReducers({configuration:z,pagination:Rr}),!0}function nO(e,t={}){let{dispatch:r}=e,a=bv(e,t);return{...a,get state(){return a.state},selectPage(n){a.selectPage(n),r(ar({legacy:Ho()}))},nextPage(){a.nextPage(),r(ar({legacy:wl()}))},previousPage(){a.previousPage(),r(ar({legacy:El()}))}}}function Fv(e){if(!oO(e))throw I;let t=M(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function oO(e){return e.addReducers({search:J}),!0}function iO(e){return Fv(e)}function zo(e){if(!sO(e))throw I;let t=M(e),r=()=>e.state;return{...t,get state(){let a=r();return{hasError:a.search.error!==null,isLoading:a.search.isLoading,hasResults:!!a.search.results.length,firstSearchExecuted:xs(a)}}}}function sO(e){return e.addReducers({search:J}),!0}function Rv(e){if(!cO(e))throw I;let t=M(e),r=zo(e),a=()=>e.state,n=()=>{let o=a().search.duration/1e3;return Math.round((o+Number.EPSILON)*100)/100};return{...t,get state(){return{...r.state,durationInMilliseconds:a().search.duration,durationInSeconds:n(),firstResult:a().pagination.firstResult+1,hasDuration:a().search.duration!==0,hasQuery:a().search.queryExecuted!=="",lastResult:a().pagination.firstResult+a().search.results.length,query:a().search.queryExecuted,total:a().pagination.totalCountFiltered}}}}function cO(e){return e.addReducers({search:J,pagination:Rr}),!0}function uO(e){return Rv(e)}var lO=new ee({fieldsToInclude:new X({required:!1,each:new w({required:!0,emptyAllowed:!1})})});function Il(e,t){if(!dO(e))throw I;let r=M(e),a=zo(e),{dispatch:n}=e,o=()=>e.state,i=ge(e,lO,t==null?void 0:t.options,"buildCoreResultList");i.fieldsToInclude&&n(ma(i.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,u=0,c=0,l=5,d=200,f=!1;return{...r,get state(){let m=o();return{...a.state,results:m.search.results,moreResultsAvailable:s(),searchResponseId:m.search.searchResponseId}},fetchMoreResults:()=>{if(e.state.search.isLoading)return;if(!s()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-u<d){if(c++,c>=l){u=Date.now(),!f&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${l} times, with little delay. Please verify the conditions under which the function is called.`),f=!0;return}}else c=0;f=!1,(t==null?void 0:t.fetchMoreResultsActionCreator)&&n(t==null?void 0:t.fetchMoreResultsActionCreator()).then(()=>u=Date.now())}}}function dO(e){return e.addReducers({search:J,configuration:z,fields:Sa}),!0}function pO(e,t){return Il(e,{...t,fetchMoreResultsActionCreator:fa})}var fO={results:new X({required:!0,each:new q({values:Gn})}),maxLength:new D({required:!0,min:1,default:10})},Go=v("recentResults/registerRecentResults",e=>b(e,fO)),bt=v("recentResults/pushRecentResult",e=>(nt(e),{payload:e})),Wo=v("recentResults/clearRecentResults");var kl=e=>k({prefix:"analytics/result/open",__legacy__getBuilder:(t,r)=>(nt(e),t.makeDocumentOpen(Te(e,r),_e(e))),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{var n,o;let r=Te(e,t),a=_e(e);return{searchUid:(o=(n=t.search)==null?void 0:n.response.searchUid)!=null?o:"",position:r.documentPosition,itemMetadata:{uniqueFieldName:a.contentIDKey,uniqueFieldValue:a.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});function ot(e,t,r){if(!mO(e))throw I;let a=1e3,n={selectionDelay:a,debounceWait:a,...t.options},o;return{select:xu(r,n.debounceWait,{isImmediate:!0}),beginDelayedSelect(){o=setTimeout(r,n.selectionDelay)},cancelPendingSelect(){o&&clearTimeout(o)}}}function mO(e){return e.addReducers({configuration:z}),!0}function gO(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch(kl(t.options.result)))};return ot(e,t,()=>{a(),e.dispatch(bt(t.options.result))})}function hO(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch(cy(t.options.result)))};return ot(e,t,()=>{a(),e.dispatch(bt(t.options.result))})}var SO=new ee({numberOfResults:new D({min:0})});function Av(e,t={}){if(!yO(e))throw I;let r=M(e),{dispatch:a}=e,n=()=>e.state,i=ke(e,SO,t.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&a(no(i)),{...r,get state(){return{numberOfResults:n().pagination.numberOfResults}},set(s){a(oo(s))},isSetTo(s){return s===this.state.numberOfResults}}}function yO(e){return e.addReducers({pagination:Rr,configuration:z}),!0}function CO(e,t={}){if(!vO(e))throw I;let r=Av(e,t),{dispatch:a}=e;return{...r,get state(){return{...r.state}},set(n){r.set(n),a(ar({legacy:$o()}))}}}function vO(e){return e.addReducers({pagination:Rr,configuration:z}),!0}var Ts={id:O},Yo=v("querySuggest/register",e=>b(e,{...Ts,count:new D({min:0})})),Pv=v("querySuggest/unregister",e=>b(e,Ts)),Ar=v("querySuggest/selectSuggestion",e=>b(e,{...Ts,expression:me})),wa=v("querySuggest/clear",e=>b(e,Ts)),Ea=ae("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(e,Ts);let o=e.id,i=await xO(o,t()),s=await a.querySuggest(i);return Fe(s)?r(s.error):{id:o,q:i.q,...s.success}}),xO=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Jt.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await mt(t.configuration.analytics),...t.configuration.analytics.enabled&&await uo(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var Ia=()=>k("analytics/searchbox/submit",e=>e.makeSearchboxSubmit());var wv={id:O,query:me},Ko=v("querySet/register",e=>b(e,wv)),hn=v("querySet/update",e=>b(e,wv));var Jo=T($a(),e=>{e.addCase(Ko,(t,r)=>{let{id:a,query:n}=r.payload;a in t||(t[a]=n)}).addCase(hn,(t,r)=>{let{id:a,query:n}=r.payload;Bf(t,a,n)}).addCase(Ar,(t,r)=>{let{id:a,expression:n}=r.payload;Bf(t,a,n)}).addCase(E.fulfilled,(t,r)=>{let{queryExecuted:a}=r.payload;Ev(t,a)}).addCase(ue,(t,r)=>{oe(r.payload.q)||Ev(t,r.payload.q)}).addCase(ce.fulfilled,(t,r)=>{if(!!r.payload)for(let[a,n]of Object.entries(r.payload.querySet))Bf(t,a,n)})});function Ev(e,t){Object.keys(e).forEach(r=>e[r]=t)}var Bf=(e,t,r)=>{t in e&&(e[t]=r)};var Ol=e=>k("analytics/querySuggest",(t,r)=>{let a=jf(r,e);return t.makeOmniboxAnalytics(a)});function jf(e,t){let{id:r,suggestion:a}=t,n=e.querySuggest&&e.querySuggest[r];if(!n)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let o=n.completions.map(c=>c.expression),i=n.partialQueries.length-1,s=n.partialQueries[i]||"",u=n.responseId;return{suggestionRanking:o.indexOf(a),partialQuery:s,partialQueries:n.partialQueries,suggestions:o,querySuggestResponseId:u}}var Xo=T(Pp(),e=>e.addCase(Yo,(t,r)=>{let a=r.payload.id;a in t||(t[a]=bO(r.payload))}).addCase(Pv,(t,r)=>{delete t[r.payload.id]}).addCase(Ea.pending,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.currentRequestId=r.meta.requestId,a.isLoading=!0)}).addCase(Ea.fulfilled,(t,r)=>{let a=t[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{q:n}=r.payload;n&&a.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions,a.isLoading=!1,a.error=null}).addCase(Ea.rejected,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.error=r.payload||null,a.isLoading=!1)}).addCase(wa,(t,r)=>{let a=t[r.payload.id];!a||(a.responseId="",a.completions=[],a.partialQueries=[])}));function bO(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}var Ft=T(Ce(),e=>e.addCase(Ge,(t,r)=>({...t,...r.payload})).addCase(Ct,(t,r)=>{t.q=r.payload}).addCase(Ar,(t,r)=>{t.q=r.payload.expression}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.query)!=null?n:t}).addCase(ue,(t,r)=>{var a,n;t.q=(a=r.payload.q)!=null?a:t.q,t.enableQuerySyntax=(n=r.payload.enableQuerySyntax)!=null?n:t.enableQuerySyntax}));var ql={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},Uf={open:new w,close:new w},_f={id:O,numberOfSuggestions:new D({min:0}),enableQuerySyntax:new K,highlightOptions:new q({values:{notMatchDelimiters:new q({values:Uf}),exactMatchDelimiters:new q({values:Uf}),correctionDelimiters:new q({values:Uf})}}),clearFilters:new K},Iv=new ee(_f);function kv(e,t){var c,l;if(!RO(e))throw I;let r=M(e),{dispatch:a}=e,n=()=>e.state,o=((c=t.options)==null?void 0:c.id)||In("search_box"),i={id:o,highlightOptions:{...(l=t.options)==null?void 0:l.highlightOptions},...ql,...t.options};ge(e,Iv,i,"buildSearchBox"),a(Ko({id:o,query:e.state.query.q})),i.numberOfSuggestions&&a(Yo({id:o,count:i.numberOfSuggestions}));let s=()=>e.state.querySet[i.id],u=async d=>{let{enableQuerySyntax:f,clearFilters:p}=i;a(Cu({q:s(),enableQuerySyntax:f,clearFilters:p})),t.isNextAnalyticsReady?a(t.executeSearchActionCreator(d)):a(t.executeSearchActionCreator(d.legacy))};return{...r,updateText(d){a(hn({id:o,query:d})),this.showSuggestions()},clear(){a(hn({id:o,query:""})),a(wa({id:o}))},showSuggestions(){i.numberOfSuggestions&&a(t.fetchQuerySuggestionsActionCreator({id:o}))},selectSuggestion(d){a(Ar({id:o,expression:d})),u({legacy:Ol({id:o,suggestion:d}),next:{actionCause:L.omniboxAnalytics,getEventExtraPayload:f=>new U(()=>f).getOmniboxAnalyticsMetadata(o,d)}}).then(()=>{a(wa({id:o}))})},submit(d=Ia()){u({legacy:d}),a(wa({id:o}))},get state(){let d=n(),f=d.querySuggest[i.id],p=FO(f,i.highlightOptions),m=f?f.isLoading:!1;return{value:s(),suggestions:p,isLoading:d.search.isLoading,isLoadingSuggestions:m}}}}function FO(e,t){return e?e.completions.map(r=>({highlightedValue:Tp(r.highlighted,t),rawValue:r.expression})):[]}function RO(e){return e.addReducers({query:Ft,querySuggest:Xo,configuration:z,querySet:Jo,search:J}),!0}function $f(e,t={}){let r=kv(e,{...t,executeSearchActionCreator:E,fetchQuerySuggestionsActionCreator:Ea,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(Ia())},get state(){return r.state}}}var Tl=T(Nn(),e=>{e.addCase(ro,(t,r)=>{let{id:a}=r.payload;t[a]||(t[a]={q:"",cache:{}})}),e.addCase(tr,(t,r)=>{let{q:a,id:n}=r.payload;!a||(t[n].q=a)}),e.addCase(ao,(t,r)=>{let{id:a}=r.payload;Object.entries(t[a].cache).forEach(([n,o])=>{Oc(o)&&delete t[a].cache[n]})}),e.addCase(Co.pending,(t,r)=>{for(let n in t)for(let o in t[n].cache)t[n].cache[o].isActive=!1;if(!Dl(t,r.meta)){AO(t,r.meta);return}let a=Dl(t,r.meta);a.isLoading=!0,a.isActive=!0,a.error=null}),e.addCase(Co.fulfilled,(t,r)=>{let{results:a,searchUid:n,totalCountFiltered:o,duration:i}=r.payload,{cacheTimeout:s}=r.meta.arg,u=Dl(t,r.meta);u.isActive=!0,u.searchUid=n,u.isLoading=!1,u.error=null,u.results=a,u.expiresAt=s?s+Date.now():0,u.totalCountFiltered=o,u.duration=i}),e.addCase(Co.rejected,(t,r)=>{let a=Dl(t,r.meta);a.error=r.error||null,a.isLoading=!1,a.isActive=!1})}),AO=(e,t)=>{let{q:r,id:a}=t.arg;e[a].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},Dl=(e,t)=>{let{q:r,id:a}=t.arg;return e[a].cache[r]||null};var PO={searchBoxId:Se,maxResultsPerQuery:new D({required:!0,min:1}),cacheTimeout:new D},Ov=new ee(PO);function wO(e,t){if(!EO(e))throw I;let r=M(e),{dispatch:a}=e,n=()=>e.state,o={searchBoxId:t.options.searchBoxId||In("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};ge(e,Ov,o,"buildInstantResults");let i=o.searchBoxId;a(ro({id:i}));let s=()=>n().instantResults[i],u=d=>s().cache[d],c=()=>s().q,l=()=>{let d=u(c());return d?d.isLoading?[]:d.results:[]};return{...r,updateQuery(d){if(!d)return;let f=u(d);(!f||!f.isLoading&&(f.error||Oc(f)))&&a(Co({id:i,q:d,maxResultsPerQuery:o.maxResultsPerQuery,cacheTimeout:o.cacheTimeout})),a(tr({id:i,q:d}))},clearExpired(){a(ao({id:i}))},get state(){let d=c(),f=u(d);return{q:d,isLoading:(f==null?void 0:f.isLoading)||!1,error:(f==null?void 0:f.error)||null,results:l()}}}}function EO(e){return e.addReducers({instantResults:Tl}),!0}var Zo=()=>k("analytics/sort/results",(e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||Ke()}));var qv={by:new It({enum:zt,required:!0})},ei=v("sortCriteria/register",e=>Tv(e)),ti=v("sortCriteria/update",e=>Tv(e)),Tv=e=>wn(e)?(e.forEach(t=>b(t,qv)),{payload:e}):b(e,qv);var Vl=T(Ke(),e=>{e.addCase(ei,(t,r)=>Mr(r.payload)).addCase(ti,(t,r)=>Mr(r.payload)).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.sortCriteria)!=null?n:t}).addCase(ue,(t,r)=>{var a;return(a=r.payload.sortCriteria)!=null?a:t})});function IO(e,t){if(!t)return;let r=new ee({criterion:new X({each:Qh})}),a=kO(t),n={...t,criterion:a};ke(e,r,n,"buildSort")}function kO(e){return e.criterion?wn(e.criterion)?e.criterion:[e.criterion]:[]}function Dv(e,t){var i;if(!OO(e))throw I;let r=M(e),{dispatch:a}=e,n=()=>e.state;IO(e,t.initialState);let o=(i=t.initialState)==null?void 0:i.criterion;return o&&a(ei(o)),{...r,sortBy(s){a(ti(s)),a(St(1))},isSortedBy(s){return this.state.sortCriteria===Mr(s)},get state(){return{sortCriteria:n().sortCriteria}}}}function OO(e){return e.addReducers({configuration:z,sortCriteria:Vl}),!0}function qO(e,t={}){let{dispatch:r}=e,a=Dv(e,t),n=()=>r(E({legacy:Zo(),next:{actionCause:L.resultsSort,getEventExtraPayload:o=>new U(()=>o).getResultSortMetadata()}}));return{...a,get state(){return a.state},sortBy(o){a.sortBy(o),n()}}}var Sn=O,Ml=new q({options:{required:!0},values:{caption:me,expression:me,state:new w({constrainTo:["idle","selected","excluded"]})}}),Nl=new X({required:!0,each:Ml});var ri=v("staticFilter/register",e=>b(e,{id:Sn,values:Nl})),Hr=v("staticFilter/toggleSelect",e=>b(e,{id:Sn,value:Ml})),zr=v("staticFilter/toggleExclude",e=>b(e,{id:Sn,value:Ml})),ka=v("staticFilter/deselectAllFilterValues",e=>b(e,Sn)),Ll=e=>k("analytics/staticFilter/select",t=>t.makeStaticFilterSelect(e)),ai=e=>k("analytics/staticFilter/deselect",t=>t.makeStaticFilterDeselect(e)),Ql=e=>k("analytics/staticFilter/clearAll",t=>t.makeStaticFilterClearAll(e));var Bl=T(Ha(),e=>e.addCase(ri,(t,r)=>{let a=r.payload,{id:n}=a;n in t||(t[n]=a)}).addCase(Hr,(t,r)=>{let{id:a,value:n}=r.payload,o=t[a];if(!o)return;let i=o.values.find(u=>u.caption===n.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(zr,(t,r)=>{let{id:a,value:n}=r.payload,o=t[a];if(!o)return;let i=o.values.find(u=>u.caption===n.caption);if(!i)return;let s=i.state==="excluded";i.state=s?"idle":"excluded"}).addCase(ka,(t,r)=>{let a=r.payload,n=t[a];!n||n.values.forEach(o=>o.state="idle")}).addCase(Re,t=>{Object.values(t).forEach(r=>{r.values.forEach(a=>a.state="idle")})}).addCase(ue,(t,r)=>{let a=r.payload.sf||{};Object.entries(t).forEach(([n,o])=>{let i=a[n]||[];o.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));function Vv(e){return{state:"idle",...e}}var TO=new ee({id:Sn,values:Nl});function DO(e,t){if(!VO(e))throw I;ge(e,TO,t.options,"buildStaticFilter");let r=M(e),{dispatch:a}=e,n=()=>e.state,{id:o}=t.options;return a(ri(t.options)),{...r,toggleSelect(i){a(Hr({id:o,value:i})),a(E({legacy:jl(o,i),next:Ul(o,i)}))},toggleSingleSelect(i){i.state==="idle"&&a(ka(o)),a(Hr({id:o,value:i})),a(E({legacy:jl(o,i),next:Ul(o,i)}))},toggleExclude(i){a(zr({id:o,value:i})),a(E({legacy:jl(o,i),next:Ul(o,i)}))},toggleSingleExclude(i){i.state==="idle"&&a(ka(o)),a(zr({id:o,value:i})),a(E({legacy:jl(o,i),next:Ul(o,i)}))},deselectAll(){a(ka(o)),a(E({legacy:Ql({staticFilterId:o}),next:{actionCause:L.staticFilterClearAll,getEventExtraPayload:i=>new U(()=>i).getStaticFilterClearAllMetadata(o)}}))},isValueSelected(i){return i.state==="selected"},isValueExcluded(i){return i.state==="excluded"},get state(){var u;let i=((u=n().staticFilterSet[o])==null?void 0:u.values)||[],s=i.some(c=>c.state!=="idle");return{id:o,values:i,hasActiveValues:s}}}}function VO(e){return e.addReducers({staticFilterSet:Bl}),!0}function jl(e,t){let{caption:r,expression:a,state:n}=t;return(n==="idle"?Ll:ai)({staticFilterId:e,staticFilterValue:{caption:r,expression:a}})}function Ul(e,t){return{actionCause:t.state==="selected"?L.staticFilterDeselect:L.staticFilterSelect,getEventExtraPayload:a=>new U(()=>a).getStaticFilterToggleMetadata(e,t)}}var _l=T(za(),e=>{e.addCase(vo,(t,r)=>{let a=r.payload,{id:n}=a;n in t||(t[n]={...a,isActive:!1})}).addCase(Dt,(t,r)=>{let a=r.payload;Mv(t,a)}).addCase(ue,(t,r)=>{let a=r.payload.tab||"";Mv(t,a)}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.tabSet)!=null?n:t})});function Mv(e,t){t in e&&Object.keys(e).forEach(a=>{e[a].isActive=a===t})}var MO=new ee({expression:me,id:O}),NO=new ee({isActive:new K});function Nv(e,t){if(QO(t.options.id),!LO(e))throw I;let r=M(e),{dispatch:a}=e;ge(e,MO,t.options,"buildTab");let n=ke(e,NO,t.initialState,"buildTab"),{id:o,expression:i}=t.options;return a(vo({id:o,expression:i})),n.isActive&&a(Dt(o)),{...r,select(){a(Dt(o))},get state(){var u;return{isActive:(u=e.state.tabSet[o])==null?void 0:u.isActive}}}}function LO(e){return e.addReducers({configuration:z,tabSet:_l}),!0}function QO(e){let t=rt().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function BO(e,t){let{dispatch:r}=e,a=Nv(e,t),n=()=>r(E({legacy:sa(),next:{actionCause:L.interfaceChange,getEventExtraPayload:o=>new U(()=>o).getInterfaceChangeMetadata()}}));return{...a,get state(){return a.state},select(){a.select(),n()}}}function Lv(e){if(!jO(e))throw I;let t=M(e),r=()=>e.state;return{...t,sort(a){return po(a,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(o=>o.facetId)}}}}function jO(e){return e.addReducers({search:J,facetOptions:Ne}),!0}function UO(e){return Lv(e)}var _O={categoryFacetId:te,categoryFacetPath:new X({required:!0,each:O})},$O=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let a=e.categoryFacetSet[t],n=a==null?void 0:a.request.field,o=`${n}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:n,categoryFacetTitle:o}},$l=e=>k("analytics/categoryFacet/breadcrumb",(t,r)=>(b(e,_O),t.makeBreadcrumbFacet($O(r,e))));var Hl=()=>k("analytics/facet/deselectAllBreadcrumbs",e=>e.makeBreadcrumbResetAll());var zl=(e,{facetId:t,selection:r})=>{let n=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,o=`${n}_${t}`;return{facetId:t,facetField:n,facetTitle:o,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var Ds=e=>k("analytics/dateFacet/breadcrumb",(t,r)=>{b(e,mn(e.selection));let a=zl(r,e);return t.makeBreadcrumbFacet(a)});var Vs=e=>k("analytics/numericFacet/breadcrumb",(t,r)=>{b(e,mn(e.selection));let a=zl(r,e);return t.makeBreadcrumbFacet(a)});var Gl=e=>Object.keys(e.facetSet).map(t=>{let r=e.facetValuesSelector(e.engine.state,t).map(a=>({value:a,deselect:()=>{a.state==="selected"?e.executeToggleSelect({facetId:t,selection:a}):a.state==="excluded"&&e.executeToggleExclude({facetId:t,selection:a})}}));return{facetId:t,field:e.facetSet[t].request.field,values:r}}).filter(t=>t.values.length);function Qv(e){let t=M(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(Re())},deselectBreadcrumb(a){a.deselect()}}}function HO(e){if(!zO(e))throw I;let t=Qv(e),{dispatch:r}=e,a=()=>e.state,n=()=>{let y={engine:e,facetSet:a().facetSet,executeToggleSelect:({facetId:S,selection:C})=>{r(hr({facetId:S,selection:C})),r(Ur({facetId:S,freezeCurrentValues:!1})),r(E({legacy:Vo({facetId:S,facetValue:C.value}),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:R=>new U(()=>R).getFacetMetadata(S,C.value)}}))},executeToggleExclude:({facetId:S,selection:C})=>{r(va({facetId:S,selection:C})),r(Ur({facetId:S,freezeCurrentValues:!1})),r(E({legacy:Vo({facetId:S,facetValue:C.value}),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:R=>new U(()=>R).getFacetMetadata(S,C.value)}}))},facetValuesSelector:OS};return Gl(y)},o=()=>{let y={engine:e,facetSet:a().numericFacetSet,executeToggleSelect:S=>{r(vr(S)),r(E({legacy:Vs(S),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getRangeFacetBreadcrumbMetadata(S.facetId,S.selection)}}))},executeToggleExclude:S=>{r(ba(S)),r(E({legacy:Vs(S),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getRangeFacetBreadcrumbMetadata(S.facetId,S.selection)}}))},facetValuesSelector:ZC};return Gl(y)},i=()=>{let y={engine:e,facetSet:a().dateFacetSet,executeToggleSelect:S=>{r(yr(S)),r(E({legacy:Ds(S),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getRangeFacetBreadcrumbMetadata(S.facetId,S.selection)}}))},executeToggleExclude:S=>{r(xa(S)),r(E({legacy:Ds(S),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getRangeFacetBreadcrumbMetadata(S.facetId,S.selection)}}))},facetValuesSelector:nv};return Gl(y)},s=()=>Object.keys(a().categoryFacetSet).map(u).filter(y=>y.path.length),u=y=>{let S=TS(a(),y);return{facetId:y,field:a().categoryFacetSet[y].request.field,path:S,deselect:()=>{r(ir(y)),r(E({legacy:$l({categoryFacetPath:S.map(C=>C.value),categoryFacetId:y}),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getCategoryFacetBreadcrumbMetadata(y,S.map(R=>R.value))}}))}}},c=()=>{var S;let y=(S=a().staticFilterSet)!=null?S:{};return Object.values(y).map(l)},l=y=>{let{id:S,values:C}=y,R=C.filter(P=>P.state!=="idle").map(P=>d(S,P));return{id:S,values:R}},d=(y,S)=>({value:S,deselect:()=>{let{caption:C,expression:R}=S,P=ai({staticFilterId:y,staticFilterValue:{caption:C,expression:R}});S.state==="selected"?r(Hr({id:y,value:S})):S.state==="excluded"&&r(zr({id:y,value:S})),r(E({legacy:P}))}}),f=()=>{var S,C;let y=(C=(S=a().automaticFacetSet)==null?void 0:S.set)!=null?C:{};return Object.values(y).map(R=>p(R.response))},p=y=>{let{field:S,label:C}=y,R=y.values.filter(P=>P.state==="selected").map(P=>m(S,P));return{facetId:S,field:S,label:C,values:R}},m=(y,S)=>({value:S,deselect:()=>{r(Aa({field:y,selection:S})),r(E({legacy:Vo({facetId:y,facetValue:S.value}),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getFacetMetadata(y,S.value)}}))}});function g(){return!![...n(),...o(),...i(),...s(),...c(),...f()].length}return{...t,get state(){return{facetBreadcrumbs:n(),categoryFacetBreadcrumbs:s(),numericFacetBreadcrumbs:o(),dateFacetBreadcrumbs:i(),staticFilterBreadcrumbs:c(),automaticFacetBreadcrumbs:f(),hasBreadcrumbs:g()}},deselectAll:()=>{t.deselectAll(),r(E({legacy:Hl(),next:{actionCause:L.breadcrumbResetAll,getEventExtraPayload:y=>new U(()=>y).getBaseMetadata()}}))}}}function zO(e){return e.addReducers({configuration:z,search:J,facetSet:xr,numericFacetSet:vt,dateFacetSet:br,categoryFacetSet:sr}),!0}function Bv(e){return e.type==="redirect"}var Hf=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(Bv);return t.length?t[0].content:null}};var ni=v("standaloneSearchBox/register",e=>b(e,{id:O,redirectionUrl:O})),oi=v("standaloneSearchBox/reset",e=>b(e,{id:O})),ii=v("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>b(e,{id:O})),si=v("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Oa=ae("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:a,extra:{apiClient:n,validatePayload:o}})=>{o(e,{id:new w({emptyAllowed:!1})});let i=await WO(r()),s=await n.plan(i);if(Fe(s))return a(s.error);let{redirectionUrl:u}=new Hf(s.success);return u&&t(GO(u)),u||""}),GO=e=>k("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),WO=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await mt(e.configuration.analytics)},...e.configuration.analytics.enabled&&await uo(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var Wl=T(Vc(),e=>e.addCase(ni,(t,r)=>{let{id:a,redirectionUrl:n}=r.payload;a in t||(t[a]=jv(n))}).addCase(oi,(t,r)=>{let{id:a}=r.payload,n=t[a];if(n){t[a]=jv(n.defaultRedirectionUrl);return}}).addCase(Oa.pending,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.isLoading=!0)}).addCase(Oa.fulfilled,(t,r)=>{let a=r.payload,n=t[r.meta.arg.id];!n||(n.redirectTo=a||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(Oa.rejected,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.isLoading=!1)}).addCase(ii,(t,r)=>{let a=t[r.payload.id];!a||(a.analytics.cause="searchFromLink")}).addCase(si,(t,r)=>{let a=t[r.payload.id];!a||(a.analytics.cause="omniboxFromLink",a.analytics.metadata=r.payload.metadata)}));function jv(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var Uv=new ee({..._f,redirectionUrl:new w({required:!0,emptyAllowed:!1})});function YO(e,t){if(!KO(e))throw I;let{dispatch:r}=e,a=()=>e.state,n=t.options.id||In("standalone_search_box"),o={id:n,highlightOptions:{...t.options.highlightOptions},...ql,...t.options};ge(e,Uv,o,"buildStandaloneSearchBox");let i=$f(e,{options:o});return r(ni({id:n,redirectionUrl:o.redirectionUrl})),{...i,updateText(s){i.updateText(s),r(ii({id:n}))},selectSuggestion(s){let u=jf(a(),{id:n,suggestion:s});r(Ar({id:n,expression:s})),r(si({id:n,metadata:u})),this.submit()},afterRedirection(){r(oi({id:n}))},submit(){r(Ge({q:this.state.value,enableQuerySyntax:o.enableQuerySyntax})),r(Oa({id:n}))},get state(){let u=a().standaloneSearchBoxSet[n];return{...i.state,isLoading:u.isLoading,redirectTo:u.redirectTo,analytics:u.analytics}}}}function KO(e){return e.addReducers({standaloneSearchBoxSet:Wl,configuration:z,query:Ft,querySuggest:Xo}),!0}function _v(e,t){return e.q!==t.q?Ia():e.sortCriteria!==t.sortCriteria?Zo():e.firstResult!==t.firstResult?Ho():e.numberOfResults!==t.numberOfResults?$o():ci(e.f,t.f)?Ms(e.f,t.f):ci(e.fExcluded,t.fExcluded)?Ms(e.fExcluded,t.fExcluded,!0):ci(e.cf,t.cf)?Ms(e.cf,t.cf):ci(e.af,t.af)?Ms(e.af,t.af):ci(e.nf,t.nf)?Hv(e.nf,t.nf):ci(e.df,t.df)?Hv(e.df,t.df):sa()}function ci(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function $v(e){let t={};return Object.keys(e).forEach(r=>t[r]=e[r].map(a=>`${a.start}..${a.end}`)),t}function Ms(e={},t={},r=!1){let a=Object.keys(e),n=Object.keys(t),o=a.filter(f=>!n.includes(f));if(o.length){let f=o[0];return e[f].length>1?Me(f):dt({facetId:f,facetValue:e[f][0]})}let i=n.filter(f=>!a.includes(f));if(i.length){let f=i[0];return r?Mt({facetId:f,facetValue:t[f][0]}):Pe({facetId:f,facetValue:t[f][0]})}let s=n.find(f=>t[f].filter(p=>e[f].includes(p)));if(!s)return sa();let u=e[s],c=t[s],l=c.filter(f=>!u.includes(f));if(l.length)return r?Mt({facetId:s,facetValue:l[0]}):Pe({facetId:s,facetValue:l[0]});let d=u.filter(f=>!c.includes(f));return d.length?dt({facetId:s,facetValue:d[0]}):sa()}function Hv(e={},t={}){return Ms($v(e),$v(t))}function zv(e){var t,r,a,n,o,i;return{q:Ce().q,enableQuerySyntax:Ce().enableQuerySyntax,aq:(r=(t=e.advancedSearchQueries)==null?void 0:t.defaultFilters.aq)!=null?r:at().defaultFilters.aq,cq:(n=(a=e.advancedSearchQueries)==null?void 0:a.defaultFilters.cq)!=null?n:at().defaultFilters.cq,firstResult:Be().firstResult,numberOfResults:(i=(o=e.pagination)==null?void 0:o.defaultNumberOfResults)!=null?i:Be().defaultNumberOfResults,sortCriteria:Ke(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:pt(),sf:{},tab:"",af:{}}}var JO=new ee({parameters:new q({options:{required:!0},values:ru})});function Gv(e,t){let{dispatch:r}=e,a=M(e);return ke(e,JO,t.initialState,"buildSearchParameterManager"),r(ue(t.initialState.parameters)),{...a,synchronize(n){let o=Yl(e,n);r(ue(o))},get state(){return{parameters:zf(e)}}}}function Yl(e,t){return{...zv(e.state),...t}}function Wv(e,t){return eq(e,t)}function zf(e){let t=e.state;return{...XO(t),...ZO(t),...tq(t),...Yv(t,Kv,"f"),...Yv(t,rq,"fExcluded"),...aq(t),...nq(t),...oq(t),...iq(t)}}function XO(e){if(e.query===void 0)return{};let t=e.query.q;return t!==Ce().q?{q:t}:{}}function ZO(e){var r;let t=Object.values((r=e.tabSet)!=null?r:{}).find(a=>a.isActive);return t?{tab:t.id}:{}}function eq(e,t){let r=e.state.tabSet,a=t.tab;if(!r||!Object.entries(r).length||!a)return!0;let n=a in r;return n||e.logger.warn(`The tab search parameter "${a}" is invalid. Ignoring change.`),n}function tq(e){if(e.sortCriteria===void 0)return{};let t=e.sortCriteria;return t!==Ke()?{sortCriteria:t}:{}}function Yv(e,t,r){if(e.facetSet===void 0)return{};let a=Object.entries(e.facetSet).filter(([n])=>{var o,i,s;return(s=(i=(o=e.facetOptions)==null?void 0:o.facets[n])==null?void 0:i.enabled)!=null?s:!0}).map(([n,{request:o}])=>{let i=t(o.currentValues);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(a).length?{[r]:a}:{}}function Kv(e){return e.filter(t=>t.state==="selected").map(t=>t.value)}function rq(e){return e.filter(t=>t.state==="excluded").map(t=>t.value)}function aq(e){if(e.categoryFacetSet===void 0)return{};let t=Object.entries(e.categoryFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,a])=>{let o=ut(a.request.currentValues).map(i=>i.value);return o.length?{[r]:o}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{cf:t}:{}}function nq(e){if(e.numericFacetSet===void 0)return{};let t=Object.entries(e.numericFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=Jv(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{nf:t}:{}}function oq(e){if(e.dateFacetSet===void 0)return{};let t=Object.entries(e.dateFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=Jv(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{df:t}:{}}function Jv(e){return e.filter(t=>t.state==="selected")}function iq(e){var a;let t=(a=e.automaticFacetSet)==null?void 0:a.set;if(t===void 0)return{};let r=Object.entries(t).map(([n,{response:o}])=>{let i=Kv(o.values);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(r).length?{af:r}:{}}function Gf(e,t){let{dispatch:r}=e,a=Gv(e,t);return{...a,synchronize(n){let o=Xv(e),i=Yl(e,o),s=Yl(e,n);Os(i,s)||!Wv(e,s)||(a.synchronize(n),r(E({legacy:_v(i,s)})))},get state(){return{parameters:Xv(e)}}}}function Xv(e){let t=e.state;return{...zf(e),...sq(t),...cq(t),...uq(t),...lq(t),...dq(t),...mq(t),...pq(t)}}function sq(e){if(e.query===void 0)return{};let t=e.query.enableQuerySyntax;return t!==void 0&&t!==Ce().enableQuerySyntax?{enableQuerySyntax:t}:{}}function cq(e){if(e.advancedSearchQueries===void 0)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function uq(e){if(e.advancedSearchQueries===void 0)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function lq(e){if(e.pagination===void 0)return{};let t=e.pagination.firstResult;return t!==Be().firstResult?{firstResult:t}:{}}function dq(e){if(e.pagination===void 0)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function pq(e){if(e.staticFilterSet===void 0)return{};let t=Object.entries(e.staticFilterSet).map(([r,a])=>{let n=fq(a.values);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{sf:t}:{}}function fq(e){return e.filter(t=>t.state==="selected").map(t=>t.caption)}function mq(e){if(e.debug===void 0)return{};let t=e.debug;return t!==pt()?{debug:t}:{}}var Kl="&",Ns="=",Zv="..",Wf="...";function Jl(){return{serialize:gq,deserialize:xq}}function gq(e){return Object.entries(e).map(hq).filter(t=>t).join(Kl)}function hq(e){let[t,r]=e;return rx(t)?kq(t)?Sq(r)?Cq(t,r):"":t==="nf"||t==="df"?yq(r)?vq(t,r):"":`${t}${Ns}${encodeURIComponent(r)}`:""}function Sq(e){return Yf(e)?ex(e,r=>typeof r=="string"):!1}function yq(e){return Yf(e)?ex(e,r=>Yf(r)&&"start"in r&&"end"in r):!1}function Yf(e){return!!(e&&typeof e=="object")}function ex(e,t){return Object.entries(e).filter(a=>{let n=a[1];return!Array.isArray(n)||!n.every(t)}).length===0}function Cq(e,t){return Object.entries(t).map(([r,a])=>`${e}-${r}${Ns}${a.map(n=>encodeURIComponent(n)).join(",")}`).join(Kl)}function vq(e,t){return Object.entries(t).map(([r,a])=>{let n=a.map(({start:o,end:i,endInclusive:s})=>`${o}${s?Wf:Zv}${i}`).join(",");return`${e}-${r}${Ns}${n}`}).join(Kl)}function xq(e){return e.split(Kl).map(a=>bq(a)).map(Fq).filter(wq).map(Eq).reduce((a,n)=>{let[o,i]=n;if(ax(o)){let s={...a[o],...i};return{...a,[o]:s}}return{...a,[o]:i}},{})}function bq(e){let[t,...r]=e.split(Ns),a=r.join(Ns);return[t,a]}function Fq(e){let[t,r]=e,n=/^(f|fExcluded|cf|nf|df|sf|af)-(.+)$/.exec(t);if(!n)return e;let o=n[1],i=n[2],s=r.split(","),u=Rq(o,s),c={[i]:u};return[o,JSON.stringify(c)]}function Rq(e,t){return e==="nf"?Aq(t):e==="df"?Pq(t):t}function Aq(e){return e.map(t=>{let{startAsString:r,endAsString:a,isEndInclusive:n}=nx(t);return{start:parseFloat(r),end:parseFloat(a),endInclusive:n}}).filter(({start:t,end:r})=>Number.isFinite(t)&&Number.isFinite(r)).map(({start:t,end:r,endInclusive:a})=>Is({start:t,end:r,state:"selected",endInclusive:a}))}function tx(e){try{return fy(e)?(su(e,hs),!0):rr(e)?(Ja(e),!0):!1}catch(t){return!1}}function Pq(e){return e.map(t=>{let{isEndInclusive:r,startAsString:a,endAsString:n}=nx(t);return{start:a,end:n,endInclusive:r}}).filter(({start:t,end:r})=>tx(t)&&tx(r)).map(({start:t,end:r,endInclusive:a})=>dn({start:t,end:r,state:"selected",endInclusive:a}))}function wq(e){let t=rx(e[0]),r=e.length===2;return t&&r}function rx(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,fExcluded:!0,cf:!0,nf:!0,df:!0,debug:!0,sf:!0,tab:!0,af:!0}}function Eq(e){let[t,r]=e;return t==="enableQuerySyntax"?[t,r==="true"]:t==="debug"?[t,r==="true"]:t==="firstResult"?[t,parseInt(r)]:t==="numberOfResults"?[t,parseInt(r)]:ax(t)?[t,Iq(r)]:[t,decodeURIComponent(r)]}function Iq(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(a=>{let[n,o]=a;r[n]=o.map(i=>Pn(i)?decodeURIComponent(i):i)}),r}function ax(e){return["f","fExcluded","cf","nf","df","sf","af"].includes(e)}function kq(e){return["f","af","cf","sf","fExcluded"].includes(e)}function nx(e){let t=e.indexOf(Wf)!==-1,[r,a]=e.split(t?Wf:Zv);return{isEndInclusive:t,startAsString:r,endAsString:a}}var Oq=new ee({fragment:new w});function qq(e,t){let r;function a(){r=e.state.search.requestId}function n(){return r!==e.state.search.requestId}if(!Dq(e))throw I;ke(e,Oq,t.initialState,"buildUrlManager");let o=M(e),i=t.initialState.fragment;a();let s=Gf(e,{initialState:{parameters:Xl(i)}});return{...o,subscribe(u){let c=()=>{let l=this.state.fragment;!Tq(i,l)&&n()&&(i=l,u()),a()};return c(),e.subscribe(c)},get state(){return{fragment:Jl().serialize(s.state.parameters)}},synchronize(u){i=u;let c=Xl(u);s.synchronize(c)}}}function Tq(e,t){if(e===t)return!0;let r=Xl(e),a=Xl(t);return Os(r,a)}function Xl(e){return Jl().deserialize(e)}function Dq(e){return e.addReducers({configuration:z}),!0}function Vq(e){return zo(e)}async function Zl(e,t){var s;let{search:r,accessToken:a,organizationId:n,analytics:o}=e.configuration,i=((s=e.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:a,organizationId:n,enableNavigation:!1,...o.enabled&&{visitorId:await mt(e.configuration.analytics)},q:i,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var yn=ae("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let n=r(),o=await Zl(n,e),i=await t.apiClient.html(o);return Fe(i)?a(i.error):{content:i.success,uniqueId:e.uniqueId}}),ui=v("resultPreview/next"),li=v("resultPreview/previous"),di=v("resultPreview/prepare",e=>b(e,{results:new X({required:!0})})),ox=2048,pi=ae("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let a=t(),n=Oh(await e.buildResultPreviewRequest(a,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return(n==null?void 0:n.length)>ox&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${ox} characters.`),{contentURL:n}});var ix=e=>k("analytics/resultPreview/open",(t,r)=>{nt(e);let a=Te(e,r),n=_e(e);return t.makeDocumentQuickview(a,n)});var Kf=e=>{let{content:t,isLoading:r,uniqueId:a,contentURL:n}=Qa();e.content=t,e.isLoading=r,e.uniqueId=a,e.contentURL=n},Jf=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId),ed=T(Qa(),e=>{e.addCase(yn.pending,t=>{t.isLoading=!0}).addCase(yn.fulfilled,(t,r)=>{let{content:a,uniqueId:n}=r.payload;t.position=t.resultsWithPreview.indexOf(n),t.content=a,t.uniqueId=n,t.isLoading=!1}).addCase(E.fulfilled,(t,r)=>{Kf(t),t.resultsWithPreview=Jf(r.payload.response.results)}).addCase(fa.fulfilled,(t,r)=>{Kf(t),t.resultsWithPreview=t.resultsWithPreview.concat(Jf(r.payload.response.results))}).addCase(ar.fulfilled,Kf).addCase(di,(t,r)=>{t.resultsWithPreview=Jf(r.payload.results)}).addCase(ui,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r}).addCase(li,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r}).addCase(pi.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL})});function sx(e,t,r,a,n){if(!Mq(e))throw I;let{dispatch:o}=e,i=()=>e.state,s=M(e),{result:u,maximumPreviewSize:c}=t.options,l=()=>{let{resultsWithPreview:f,position:p}=i().resultPreview;return f[p]},d=f=>{o(pi({uniqueId:f,requestedOutputSize:c,buildResultPreviewRequest:r,path:a})),t.options.onlyContentURL||o(yn({uniqueId:f,requestedOutputSize:c})),n&&n()};return{...s,fetchResultContent(){d(u.uniqueId)},next(){o(ui()),d(l())},previous(){o(li()),d(l())},get state(){let f=i(),p=u.hasHtmlVersion,m=f.resultPreview,g=u.uniqueId===m.uniqueId?m.content:"",y=m.isLoading,S=m.contentURL,C=l();return{content:g,resultHasPreview:p,isLoading:y,contentURL:S,currentResultUniqueId:C}}}}function Mq(e){return e.addReducers({configuration:z,resultPreview:ed}),!0}function Nq(e,t){if(!Lq(e))throw I;let{dispatch:r}=e,a=()=>e.state,n=()=>a().search.results,s=sx(e,t,Zl,"/html",()=>{e.dispatch(ix(t.options.result))});return r(di({results:n()})),{...s,get state(){return{...s.state,currentResult:n().findIndex(u=>u.uniqueId===s.state.currentResultUniqueId)+1,totalResults:n().length}}}}function Lq(e){return e.addReducers({search:J}),!0}var Qq=e=>k("analytics/folding/showMore",(t,r)=>(nt(e),t.makeShowMoreFoldedResults(Te(e,r),_e(e)))),Bq=()=>k("analytics/folding/showLess",e=>e.makeShowLessFoldedResults()),cx={logShowMoreFoldedResults:Qq,logShowLessFoldedResults:Bq};function jq(e,t){return e.raw[t.collection]}function Xf(e,t){return e.raw[t.parent]}function Ls(e,t){let r=e.raw[t.child];return fc(r)?r[0]:r}function Uq(e,t){return(e||t)!==void 0&&e===t}function ux(e,t,r,a=[]){let n=Ls(e,r);return n?a.indexOf(n)!==-1?[]:t.filter(o=>{let i=Ls(o,r)===Ls(e,r);return Xf(o,r)===n&&!i}).map(o=>({result:o,children:ux(o,t,r,[...a,n])})):[]}function _q(e,t){return e.find(r=>{let a=Xf(r,t)===void 0,n=Uq(Xf(r,t),Ls(r,t));return a||n})}function lx(e){return e.parentResult?lx(e.parentResult):e}function $q(e,t,r){var o;let a=Kc(e),n=(o=r!=null?r:_q(a,t))!=null?o:lx(e);return{result:n,children:ux(n,a,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function td(e,t,r){let a={};return e.forEach(n=>{let o=jq(n,t);!o||!Ls(n,t)&&!n.parentResult||(a[o]=$q(n,t,r))}),a}function dx(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var rd=T(_a(),e=>e.addCase(E.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?td(r.response.results,t.fields):{}}).addCase(ar.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?td(r.response.results,t.fields):{}}).addCase(fa.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...td(r.response.results,t.fields)}:{}}).addCase(ga,(t,{payload:r})=>{var a,n,o,i;return t.enabled?t:{enabled:!0,collections:{},fields:{collection:(a=r.collectionField)!=null?a:t.fields.collection,parent:(n=r.parentField)!=null?n:t.fields.parent,child:(o=r.childField)!=null?o:t.fields.child},filterFieldRange:(i=r.numberOfFoldedResults)!=null?i:t.filterFieldRange}}).addCase(ha.pending,(t,{meta:r})=>{let a=r.arg;dx(t,a).isLoadingMoreResults=!0}).addCase(ha.rejected,(t,{meta:r})=>{let a=r.arg;dx(t,a).isLoadingMoreResults=!1}).addCase(ha.fulfilled,(t,{payload:{collectionId:r,results:a,rootResult:n}})=>{let o=td(a,t.fields,n);if(!o||!o[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(a)}. Folding most probably in an invalid state... `);t.collections[r]=o[r],t.collections[r].moreResultsAvailable=!1}));var Hq=new ee(Pf);function px(e,t,r){var s;if(!zq(e))throw I;let a=Il(e,t),{dispatch:n}=e,o=()=>e.state,i=((s=t.options)==null?void 0:s.folding)?ge(e,Hq,t.options.folding,"buildFoldedResultList"):{};return n(ga({...i})),{...a,loadCollection:u=>{n(t.loadCollectionActionCreator(u.result.raw[e.state.folding.fields.collection])),n(r.logShowMoreFoldedResults(u.result))},logShowMoreFoldedResults:u=>{n(r.logShowMoreFoldedResults(u))},logShowLessFoldedResults:()=>{n(r.logShowLessFoldedResults())},findResultById(u){return Zf(this.state.results,c=>c.result.uniqueId===u.result.uniqueId)},findResultByCollection(u){return Zf(this.state.results,c=>c.result.raw.foldingcollection===u.result.raw.foldingcollection)},get state(){let u=o();return{...a.state,results:a.state.results.map(c=>{let l=c.raw[u.folding.fields.collection];return!l||!u.folding.collections[l]?{result:c,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:u.folding.collections[l]})}}}}function zq(e){return e.addReducers({search:J,configuration:vu,folding:rd,query:Ft}),!0}function Zf(e,t){for(let r=0;r<e.length;r++){let a=e[r];if(t(a))return a;if(a.children.length){let n=Zf(a.children,t);if(n)return n}}return null}function Gq(e,t={}){let r=px(e,{...t,loadCollectionActionCreator:ha,fetchMoreResultsActionCreator:fa},cx);return{...r,get state(){return r.state}}}var qa=T(Mc(),e=>e.addCase(E.pending,t=>{t.query="",t.queryModification={originalQuery:"",newQuery:"",queryToIgnore:t.queryModification.queryToIgnore}}).addCase(E.fulfilled,(t,r)=>{var s;let a=[],n=[],o=[],i=[];r.payload.response.triggers.forEach(u=>{switch(u.type){case"redirect":a.push(u.content);break;case"query":n.push(u.content);break;case"execute":o.push({functionName:u.content.name,params:u.content.params});break;case"notify":i.push(u.content);break}}),t.redirectTo=(s=a[0])!=null?s:"",t.query=t.queryModification.newQuery,t.executions=o,t.notifications=i}).addCase(go,(t,r)=>{t.queryModification={...r.payload,queryToIgnore:""}}).addCase(pa,(t,r)=>{t.queryModification.queryToIgnore=r.payload}));function Wq(e){if(!Yq(e))throw I;let t=M(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.redirectTo;return{...t,subscribe(o){let i=()=>{let s=n!==this.state.redirectTo;n=this.state.redirectTo,s&&this.state.redirectTo&&(o(),r(gu()))};return i(),e.subscribe(i)},get state(){return{redirectTo:a().triggers.redirectTo}}}}function Yq(e){return e.addReducers({triggers:qa}),!0}function Kq(e){if(!Jq(e))throw I;let t=M(e),{dispatch:r}=e,a=()=>e.state,n=()=>a().triggers.queryModification.newQuery,o=()=>a().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:n(),originalQuery:o(),wasQueryModified:n()!==""}},undo(){r(pa(n())),r(Ge({q:o()})),r(E({legacy:fu({undoneQuery:n()}),next:{actionCause:L.undoTriggerQuery,getEventExtraPayload:()=>new U(a).getUndoTriggerQueryMetadata(n())}}))}}}function Jq(e){return e.addReducers({triggers:qa,query:Ft}),!0}function Xq(e){if(!Zq(e))throw I;let t=M(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.executions;return{...t,subscribe(o){let i=()=>{let s=!gn(this.state.executions,n,(u,c)=>u.functionName===c.functionName&&gn(u.params,c.params));n=this.state.executions,s&&this.state.executions.length&&(o(),r(hu()))};return i(),e.subscribe(i)},get state(){return{executions:a().triggers.executions}}}}function Zq(e){return e.addReducers({triggers:qa}),!0}function eT(e){if(!tT(e))throw I;let t=M(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.notifications;return{...t,subscribe(o){let i=()=>{let s=!gn(n,this.state.notifications);n=this.state.notifications,s&&(o(),r(mu()))};return i(),e.subscribe(i)},get state(){return{notifications:a().triggers.notifications}}}}function tT(e){return e.addReducers({triggers:qa}),!0}var ad=()=>new q({values:{questionAnswerId:O},options:{required:!0}}),em=()=>new q({values:{linkText:me,linkURL:me},options:{required:!0}});function fi(e){return b(e,ad())}function Gr(e,t){var a,n;let r=t!=null?t:(n=(a=e.search)==null?void 0:a.questionAnswer)==null?void 0:n.documentId;return r&&e.search&&Vy(e,r.contentIdKey,r.contentIdValue)}function Cn(e,t){var n,o,i,s,u;let r=(o=(n=e.questionAnswering)==null?void 0:n.relatedQuestions.findIndex(c=>c.questionAnswerId===t))!=null?o:-1;if(r===-1)return null;let a=(u=(s=(i=e.search)==null?void 0:i.questionAnswer)==null?void 0:s.relatedQuestions)==null?void 0:u[r];return a!=null?a:null}var tm=()=>k("analytics/smartSnippet/expand",e=>e.makeExpandSmartSnippet()),rm=()=>k("analytics/smartSnippet/collapse",e=>e.makeCollapseSmartSnippet()),am=()=>k("analytics/smartSnippet/like",e=>e.makeLikeSmartSnippet()),nm=()=>k("analytics/smartSnippet/dislike",e=>e.makeDislikeSmartSnippet());function om(){return k("analytics/smartSnippet/source/open",(e,t)=>{let r=Gr(t);return e.makeOpenSmartSnippetSource(Te(r,t),_e(r))})}var Qs=e=>k("analytics/smartSnippet/source/open",(t,r)=>{b(e,em());let a=Gr(r);return t.makeOpenSmartSnippetInlineLink(Te(a,r),{..._e(a),...e})}),im=()=>k("analytics/smartSnippet/feedbackModal/open",e=>e.makeOpenSmartSnippetFeedbackModal()),sm=()=>k("analytics/smartSnippet/feedbackModal/close",e=>e.makeCloseSmartSnippetFeedbackModal()),cm=e=>k("analytics/smartSnippet/sendFeedback",t=>t.makeSmartSnippetFeedbackReason(e)),um=e=>k("analytics/smartSnippet/sendFeedback",t=>t.makeSmartSnippetFeedbackReason("other",e)),lm=e=>k("analytics/smartSnippetSuggestion/expand",(t,r)=>{fi(e);let a=Cn(r,e.questionAnswerId);return a?t.makeExpandSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),dm=e=>k("analytics/smartSnippetSuggestion/expand",(t,r)=>{fi(e);let a=Cn(r,e.questionAnswerId);return a?t.makeCollapseSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),Bs=e=>k("analytics/smartSnippet/source/open",(t,r)=>{b(e,ad());let a=Cn(r,e.questionAnswerId);if(!a)return null;let n=Gr(r,a.documentId);return n?t.makeOpenSmartSnippetSuggestionSource(Te(n,r),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),nd=(e,t)=>k("analytics/smartSnippet/source/open",(r,a)=>{b(e,ad()),b(t,em());let n=Cn(a,e.questionAnswerId);if(!n)return null;let o=Gr(a,n.documentId);return o?r.makeOpenSmartSnippetSuggestionInlineLink(Te(o,a),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId,linkText:t.linkText,linkURL:t.linkURL}):null}),od={logExpandSmartSnippet:tm,logCollapseSmartSnippet:rm,logLikeSmartSnippet:am,logDislikeSmartSnippet:nm,logOpenSmartSnippetSource:om,logOpenSmartSnippetInlineLink:Qs,logOpenSmartSnippetFeedbackModal:im,logCloseSmartSnippetFeedbackModal:sm,logSmartSnippetFeedback:cm,logSmartSnippetDetailedFeedback:um,logExpandSmartSnippetSuggestion:lm,logCollapseSmartSnippetSuggestion:dm,logOpenSmartSnippetSuggestionSource:Bs};var mi=v("smartSnippet/expand"),gi=v("smartSnippet/collapse"),hi=v("smartSnippet/like"),Si=v("smartSnippet/dislike"),yi=v("smartSnippet/feedbackModal/open"),Ta=v("smartSnippet/feedbackModal/close"),Ci=v("smartSnippet/related/expand",e=>fi(e)),vi=v("smartSnippet/related/collapse",e=>fi(e));var fx=(e,t)=>e.findIndex(r=>r.questionAnswerId===t.questionAnswerId);function mx({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:a}}){return kn({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:a})}function rT(e,t){let r=mx(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var Pr=T(Mn(),e=>e.addCase(mi,t=>{t.expanded=!0}).addCase(gi,t=>{t.expanded=!1}).addCase(hi,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(Si,t=>{t.liked=!1,t.disliked=!0}).addCase(yi,t=>{t.feedbackModalOpen=!0}).addCase(Ta,t=>{t.feedbackModalOpen=!1}).addCase(E.fulfilled,(t,r)=>{let a=r.payload.response.questionAnswer.relatedQuestions.map((o,i)=>rT(o,t.relatedQuestions[i])),n=mx(r.payload.response.questionAnswer);return t.questionAnswerId===n?{...t,relatedQuestions:a}:{...Mn(),relatedQuestions:a,questionAnswerId:n}}).addCase(Ci,(t,r)=>{let a=fx(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!0)}).addCase(vi,(t,r)=>{let a=fx(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!1)}));function gx(e,t,r){var u;if(!aT(e))throw I;let a=M(e),n=()=>e.state,o=()=>Gr(n()),i=null,s=ot(e,{options:{selectionDelay:(u=r==null?void 0:r.options)==null?void 0:u.selectionDelay}},()=>{let c=o();if(!c){i=null;return}let{searchResponseId:l}=n().search;i!==l&&(i=l,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(bt(c)))});return{...a,get state(){let c=n();return{question:c.search.questionAnswer.question,answer:c.search.questionAnswer.answerSnippet,documentId:c.search.questionAnswer.documentId,expanded:c.questionAnswering.expanded,answerFound:c.search.questionAnswer.answerSnippet!=="",liked:c.questionAnswering.liked,disliked:c.questionAnswering.disliked,feedbackModalOpen:c.questionAnswering.feedbackModalOpen,source:o()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(mi())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(gi())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(hi())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(Si())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(yi())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(Ta())},sendFeedback(c){e.dispatch(t.logSmartSnippetFeedback(c)),e.dispatch(Ta())},sendDetailedFeedback(c){e.dispatch(t.logSmartSnippetDetailedFeedback(c)),e.dispatch(Ta())},selectSource(){s.select()},beginDelayedSelectSource(){s.beginDelayedSelect()},cancelPendingSelectSource(){s.cancelPendingSelect()}}}function aT(e){return e.addReducers({search:J,questionAnswering:Pr}),!0}function id(e,t){if(!nT(e))throw I;let r=()=>e.state,a=new Set,n=l=>a.has(l)?!0:(a.add(l),!1),o=null,i=l=>{o!==l&&(o=l,u={},a.clear())},s=(l,d,f)=>{var p;return ot(e,{options:{selectionDelay:(p=t==null?void 0:t.options)==null?void 0:p.selectionDelay}},()=>{n(d)||e.dispatch(f?nd({questionAnswerId:f},l):Qs(l))})},u={},c=(l,d)=>{let{searchResponseId:f}=r().search;i(f);let p=kn({...l,questionAnswerId:d});return p in u||(u[p]=s(l,p,d)),u[p]};return{selectInlineLink(l,d){var f;(f=c(l,d))==null||f.select()},beginDelayedSelectInlineLink(l,d){var f;(f=c(l,d))==null||f.beginDelayedSelect()},cancelPendingSelectInlineLink(l,d){var f;(f=c(l,d))==null||f.cancelPendingSelect()}}}function nT(e){return e.addReducers({search:J,questionAnswering:Pr}),!0}function oT(e,t){var n;let r=gx(e,od,t),a=id(e,{options:{selectionDelay:(n=t==null?void 0:t.options)==null?void 0:n.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(o){a.selectInlineLink(o)},beginDelayedSelectInlineLink(o){a.beginDelayedSelectInlineLink(o)},cancelPendingSelectInlineLink(o){a.cancelPendingSelectInlineLink(o)}}}function hx(e,t){if(!iT(e))throw I;let r=M(e),a=()=>e.state,n=o=>{let{contentIdKey:i,contentIdValue:s}=o;return e.state.search.results.find(u=>jr(u,i)===s)};return{...r,get state(){let o=a();return{questions:o.search.questionAnswer.relatedQuestions.map((i,s)=>({question:i.question,answer:i.answerSnippet,documentId:i.documentId,questionAnswerId:o.questionAnswering.relatedQuestions[s].questionAnswerId,expanded:o.questionAnswering.relatedQuestions[s].expanded,source:n(i.documentId)}))}},expand(o){let i={questionAnswerId:o};e.dispatch(t.logExpandSmartSnippetSuggestion(i)),e.dispatch(Ci(i))},collapse(o){let i={questionAnswerId:o};e.dispatch(t.logCollapseSmartSnippetSuggestion(i)),e.dispatch(vi(i))}}}function iT(e){return e.addReducers({search:J,questionAnswering:Pr}),!0}function Sx(e,t){if(!sT(e))throw I;let r=()=>e.state,a=d=>{let f=r(),p=Cn(f,d);return p?Gr(f,p.documentId):null},n=new Set,o=d=>n.has(d)?!0:(n.add(d),!1),i=null,s=d=>{i!==d&&(i=d,c={},n.clear())},u=(d,f)=>{var p;return ot(e,{options:{selectionDelay:(p=t==null?void 0:t.options)==null?void 0:p.selectionDelay}},()=>{o(f)||(e.dispatch(Bs({questionAnswerId:f})),e.dispatch(bt(d)))})},c={},l=d=>{let{searchResponseId:f}=r().search;s(f);let p=a(d);return p?(d in c||(c[d]=u(p,d)),c[d]):null};return{selectSource(d){var f;(f=l(d))==null||f.select()},beginDelayedSelectSource(d){var f;(f=l(d))==null||f.beginDelayedSelect()},cancelPendingSelectSource(d){var f;(f=l(d))==null||f.cancelPendingSelect()}}}function sT(e){return e.addReducers({search:J,questionAnswering:Pr}),!0}function cT(e,t){var o,i;let r=hx(e,od),a=id(e,{options:{selectionDelay:(o=t==null?void 0:t.options)==null?void 0:o.selectionDelay}}),n=Sx(e,{options:{selectionDelay:(i=t==null?void 0:t.options)==null?void 0:i.selectionDelay}});return{...r,get state(){return r.state},selectSource(s){n.selectSource(s)},beginDelayedSelectSource(s){n.beginDelayedSelectSource(s)},cancelPendingSelectSource(s){n.cancelPendingSelectSource(s)},selectInlineLink(s,u){a.selectInlineLink(u,s)},beginDelayedSelectInlineLink(s,u){a.beginDelayedSelectInlineLink(u,s)},cancelPendingSelectInlineLink(s,u){a.cancelPendingSelectInlineLink(u,s)}}}var uT={queries:new X({required:!0,each:new w({emptyAllowed:!1})}),maxLength:new D({required:!0,min:1,default:10})},xi=v("recentQueries/registerRecentQueries",e=>b(e,uT)),bi=v("recentQueries/clearRecentQueries");var yx=()=>k("analytics/recentQueries/clear",e=>e.makeClearRecentQueries()),Cx=()=>k("analytics/recentQueries/click",e=>e.makeRecentQueryClick());var sd=T(Tc(),e=>{e.addCase(xi,(t,r)=>{t.queries=r.payload.queries.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(bi,t=>{t.queries=[]}).addCase(E.fulfilled,(t,r)=>{let a=r.payload.queryExecuted.trim(),n=r.payload.response.results;if(!a.length||!n.length)return;t.queries=t.queries.filter(i=>i!==a);let o=t.queries.slice(0,t.maxLength-1);t.queries=[a,...o]})});var lT={queries:[]},dT={maxLength:10,clearFilters:!0},pT=new ee({queries:new X({required:!0})}),fT=new ee({maxLength:new D({required:!0,min:1}),clearFilters:new K});function mT(e,t){ge(e,fT,t==null?void 0:t.options,"buildRecentQueriesList"),ke(e,pT,t==null?void 0:t.initialState,"buildRecentQueriesList")}function gT(e,t){if(!hT(e))throw I;let r=M(e),{dispatch:a}=e,n=()=>e.state,o={...dT,...t==null?void 0:t.options},i={...lT,...t==null?void 0:t.initialState};mT(e,{options:o,initialState:i});let s={queries:i.queries,maxLength:o.maxLength};return a(xi(s)),{...r,get state(){let u=n();return{...u.recentQueries,analyticsEnabled:u.configuration.analytics.enabled}},clear(){a(yx()),a(bi())},executeRecentQuery(u){let c=new D({required:!0,min:0,max:this.state.queries.length}).validate(u);if(c)throw new Error(c);a(Cu({q:this.state.queries[u],clearFilters:o.clearFilters})),a(E({legacy:Cx(),next:{actionCause:L.recentQueryClick,getEventExtraPayload:l=>new U(()=>l).getBaseMetadata()}}))}}}function hT(e){return e.addReducers({search:J,recentQueries:sd}),!0}var vx=e=>k("analytics/recentResults/click",(t,r)=>(nt(e),t.makeRecentResultClick(Te(e,r),_e(e)))),xx=()=>k("analytics/recentResults/clear",e=>e.makeClearRecentResults());var cd=T(Dc(),e=>{e.addCase(Go,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Wo,t=>{t.results=[]}).addCase(bt,(t,r)=>{let a=r.payload;t.results=t.results.filter(o=>o.uniqueId!==a.uniqueId);let n=t.results.slice(0,t.maxLength-1);t.results=[a,...n]})});var ST={initialState:{results:[]},options:{maxLength:10}},yT=new ee({results:new X({required:!0})}),CT=new ee({maxLength:new D({required:!0,min:1})});function vT(e,t){ge(e,CT,t==null?void 0:t.options,"buildRecentResultsList"),ke(e,yT,t==null?void 0:t.initialState,"buildRecentResultsList")}function xT(e,t){if(!bT(e))throw I;let r=M(e),{dispatch:a}=e,n=()=>e.state,o={...ST,...t};vT(e,o);let i={results:o.initialState.results,maxLength:o.options.maxLength};return a(Go(i)),{...r,get state(){return n().recentResults},clear(){a(xx()),a(Wo())}}}function bT(e){return e.addReducers({recentResults:cd}),!0}function FT(e,t){return ot(e,t,()=>e.dispatch(vx(t.options.result)))}function RT(e,t){if(!AT(e))throw I;let r=f=>{var p,m;return(m=(p=e.state.facetOptions.facets[f])==null?void 0:p.enabled)!=null?m:!1},a=f=>{var p,m,g,y,S,C,R,P,Q,G,Z,$,H,pe,he,_;return(_=(he=(Z=(R=(g=(m=(p=e.state.facetSet)==null?void 0:p[f])==null?void 0:m.request)==null?void 0:g.currentValues)!=null?R:(C=(S=(y=e.state.categoryFacetSet)==null?void 0:y[f])==null?void 0:S.request)==null?void 0:C.currentValues)!=null?Z:(G=(Q=(P=e.state.numericFacetSet)==null?void 0:P[f])==null?void 0:Q.request)==null?void 0:G.currentValues)!=null?he:(pe=(H=($=e.state.dateFacetSet)==null?void 0:$[f])==null?void 0:H.request)==null?void 0:pe.currentValues)!=null?_:null},n=f=>f in e.state.facetOptions.facets,o=()=>kn({isFacetRegistered:n(t.facetId),parentFacets:t.conditions.map(({parentFacetId:f})=>n(f)?{enabled:r(f),values:a(f)}:null)}),i=()=>{let f=o();return f===l?!1:(l=f,!0)},s=()=>t.conditions.some(f=>{if(!r(f.parentFacetId))return!1;let p=a(f.parentFacetId);return p===null?!1:f.condition(p)}),u=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([f,p])=>p.request.freezeCurrentValues&&e.dispatch(Ur({facetId:f,freezeCurrentValues:!1})))},c=()=>{if(!n(t.facetId))return;let f=r(t.facetId),p=s();f!==p&&(e.dispatch(p?We(t.facetId):ve(t.facetId)),u())};if(!t.conditions.length)return{stopWatching(){}};let l=o(),d=e.subscribe(()=>{i()&&c()});return c(),{stopWatching(){d()}}}function AT(e){return e.addReducers({facetOptions:Ne}),!0}function PT(e,t){if(!wT(e))throw I;let{facetSearch:r,allowedValues:a,...n}=t.options.facet,o=Ye(e,n);e.dispatch(gr({...Es,...n,facetId:o,...a&&{allowedValues:{type:"simple",values:a}}}));let i=Ju(e,{options:{...r,facetId:o},select:u=>{e.dispatch(ie()),e.dispatch(E({legacy:Pe({facetId:o,facetValue:u.rawValue}),next:{actionCause:L.facetSelect,getEventExtraPayload:c=>new U(()=>c).getFacetMetadata(o,u.rawValue)}}))},exclude:u=>{e.dispatch(ie()),e.dispatch(E({legacy:Mt({facetId:o,facetValue:u.rawValue}),next:{actionCause:L.facetExclude,getEventExtraPayload:c=>new U(()=>c).getFacetMetadata(o,u.rawValue)}}))},isForFieldSuggestions:!0});return{...M(e),...i,updateText:function(u){i.updateText(u),i.search()},get state(){return i.state}}}function wT(e){return e.addReducers({facetSet:xr,configuration:z,facetSearchSet:Bo,search:J}),!0}function ET(e,t){if(!IT(e))throw I;let{facetSearch:r,...a}=t.options.facet,n=Ye(e,a);e.dispatch(or({...As,...a,facetId:n}));let o=Hu(e,{options:{...r,facetId:n},isForFieldSuggestions:!0});return{...M(e),...o,updateText:function(s){o.updateText(s),o.search()},get state(){return o.state}}}function IT(e){return e.addReducers({categoryFacetSet:sr,configuration:z,categoryFacetSearchSet:qo,search:J}),!0}var bx=T(oa(),e=>{e.addCase(E.fulfilled,(t,r)=>{var n;t.set={};let a=(n=r.payload.response.generateAutomaticFacets)==null?void 0:n.facets;a==null||a.forEach(o=>{t.set[o.field]={response:o}})}).addCase(Rl,(t,r)=>{r.payload.desiredCount&&(t.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(t.numberOfValues=r.payload.numberOfValues)}).addCase(Aa,(t,r)=>{var u;let{field:a,selection:n}=r.payload,o=(u=t.set[a])==null?void 0:u.response;if(!o)return;let i=o.values.find(c=>c.value===n.value);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Al,(t,r)=>{var o;let a=r.payload,n=(o=t.set[a])==null?void 0:o.response;if(!!n)for(let i of n.values)i.state="idle"}).addCase(ue,(t,r)=>{var o,i,s;let a=(o=r.payload.af)!=null?o:{},n=Object.keys(t.set);for(let u in a)if(!t.set[u]){let c=kT(u),l=a[u].map(d=>OT(d));c.values.push(...l),t.set[u]={response:c}}for(let u of n)if(!(u in a)){let c=(i=t.set[u])==null?void 0:i.response;for(let l of c.values)l.state="idle"}for(let u in a){let c=(s=t.set[u])==null?void 0:s.response;if(c){let l=c.values;for(let d of l)a[u].includes(d.value)?d.state==="idle"&&(d.state="selected"):d.state="idle"}}}).addCase(ce.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(Re,t=>{Object.values(t.set).forEach(({response:r})=>{r.values.forEach(a=>a.state="idle")})})});function kT(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function OT(e){return{value:e,state:"selected",numberOfResults:0}}function Fx(e,t){let{dispatch:r}=e,a=M(e),{field:n}=t;return{...a,toggleSelect(o){r(Aa({field:n,selection:o})),r(E({legacy:Yu(n,o),next:Ku(n,o)}))},deselectAll(){r(Al(n)),r(E({legacy:Me(n),next:{actionCause:L.facetClearAll,getEventExtraPayload:o=>new U(()=>o).getFacetClearAllMetadata(n)}}))},get state(){var s,u;let o=(u=(s=e.state.automaticFacetSet)==null?void 0:s.set[n])==null?void 0:u.response;return o?{field:o.field,label:o.label,values:o.values}:{field:"",values:[],label:""}}}}function Rx(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}function qT(e,t){if(!TT(e))throw I;let{dispatch:r}=e,a=Rx(t.options);return r(Rl(a)),{...M(e),get state(){var i,s;return{automaticFacets:(s=(i=e.state.search.response.generateAutomaticFacets)==null?void 0:i.facets.map(u=>Fx(e,{field:u.field})))!=null?s:[]}}}}function TT(e){return e.addReducers({automaticFacetSet:bx,configuration:z,search:J}),!0}function pm(e,t){var r,a;return(a=(r=e.generatedAnswer)==null?void 0:r.citations)==null?void 0:a.find(n=>n.id===t)}function Rt(e){var t,r,a;return(a=(r=(t=e.search)==null?void 0:t.response)==null?void 0:r.extendedResults)==null?void 0:a.generativeQuestionAnsweringId}var Ax=()=>k("analytics/generatedAnswer/retry",e=>e.makeRetryGeneratedAnswer()),Px=e=>k("analytics/generatedAnswer/rephrase",(t,r)=>{let a=Rt(r);return a?t.makeRephraseGeneratedAnswer({generativeQuestionAnsweringId:a,rephraseFormat:e.answerStyle}):null}),ud=e=>k("analytics/generatedAnswer/openAnswerSource",(t,r)=>{let a=Rt(r),n=pm(r,e);return!a||!n?null:t.makeOpenGeneratedAnswerSource({generativeQuestionAnsweringId:a,permanentId:n.permanentid,citationId:n.id})}),wx=(e,t)=>k("analytics/generatedAnswer/hoverCitation",(r,a)=>{let n=Rt(a),o=pm(a,e);return!n||!o?null:r.makeGeneratedAnswerSourceHover({generativeQuestionAnsweringId:n,permanentId:o.permanentid,citationId:o.id,citationHoverTimeMs:t})}),Ex=()=>k("analytics/generatedAnswer/like",(e,t)=>{let r=Rt(t);return r?e.makeLikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null}),Ix=()=>k("analytics/generatedAnswer/dislike",(e,t)=>{let r=Rt(t);return r?e.makeDislikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null}),kx=e=>k("analytics/generatedAnswer/sendFeedback",(t,r)=>{let a=Rt(r);return a?t.makeGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:a,reason:e}):null}),Ox=e=>k("analytics/generatedAnswer/sendFeedback",(t,r)=>{let a=Rt(r);return a?t.makeGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:a,reason:"other",details:e}):null}),qx=e=>k("analytics/generatedAnswer/streamEnd",(t,r)=>{let a=Rt(r);return a?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:a,answerGenerated:e}):null}),Tx=()=>k("analytics/generatedAnswer/show",(e,t)=>{let r=Rt(t);return r?e.makeGeneratedAnswerShowAnswers({generativeQuestionAnsweringId:r}):null}),Dx=()=>k("analytics/generatedAnswer/hide",(e,t)=>{let r=Rt(t);return r?e.makeGeneratedAnswerHideAnswers({generativeQuestionAnsweringId:r}):null}),Vx=()=>k("analytics/generatedAnswer/copy",(e,t)=>{let r=Rt(t);return r?e.makeGeneratedAnswerCopyToClipboard({generativeQuestionAnsweringId:r}):null});var Mx=async e=>{var t;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:(t=e.search.extendedResults)==null?void 0:t.generativeQuestionAnsweringId}};var Nx=["default","bullet","step","concise"];var js=new w({required:!0}),Lx=new w,fm=new K({required:!0}),DT={id:js,title:js,uri:js,permanentid:js,clickUri:Lx},Fi=v("generatedAnswer/setIsVisible",e=>b(e,fm)),mm=v("generatedAnswer/updateMessage",e=>b(e,{textDelta:js})),gm=v("generatedAnswer/updateCitations",e=>b(e,{citations:new X({required:!0,each:new q({values:DT})})})),hm=v("generatedAnswer/updateError",e=>b(e,{message:Lx,code:new D({min:0})})),vn=v("generatedAnswer/resetAnswer"),ld=v("generatedAnswer/like"),dd=v("generatedAnswer/dislike"),pd=v("generatedAnswer/feedbackModal/open"),fd=v("generatedAnswer/feedbackModal/close"),Us=v("generatedAnswer/sendFeedback"),_s=v("generatedAnswer/setIsLoading",e=>b(e,fm)),md=v("generatedAnswer/setIsStreaming",e=>b(e,fm)),$s=v("generatedAnswer/updateResponseFormat",e=>b(e,{answerStyle:new w({required:!0,constrainTo:Nx})})),Qx=ae("generatedAnswer/streamAnswer",async(e,t)=>{var l;let r=t.getState(),{dispatch:a,extra:n}=t,{setAbortControllerRef:o}=e,i=await Mx(r),s=(d,f)=>{switch(d){case"genqa.messageType":a(mm(JSON.parse(f)));break;case"genqa.citationsType":a(gm(JSON.parse(f)));break;case"genqa.endOfStreamType":a(md(!1)),a(qx(JSON.parse(f).answerGenerated));break;default:r.debug&&n.logger.warn(`Unknown payloadType: "${d}"`)}};a(_s(!0));let u=d=>d.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,c=(l=n.streamingClient)==null?void 0:l.streamGeneratedAnswer(i,{write:d=>{u(i)&&(a(_s(!1)),d.payload&&d.payloadType&&s(d.payloadType,d.payload))},abort:d=>{u(i)&&a(hm(d))},close:()=>{u(i)&&a(md(!1))},resetAnswer:()=>{u(i)&&a(vn())}});c?o(c):a(_s(!1))});var gd=T(Vn(),e=>e.addCase(Fi,(t,{payload:r})=>{t.isVisible=r}).addCase(mm,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.answer||(t.answer=""),t.answer+=r.textDelta,delete t.error}).addCase(gm,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.citations=t.citations.concat(r.citations),delete t.error}).addCase(hm,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!1,t.error={...r,isRetryable:r.code===af},t.citations=[],delete t.answer}).addCase(ld,t=>{t.liked=!0,t.disliked=!1}).addCase(dd,t=>{t.liked=!1,t.disliked=!0}).addCase(pd,t=>{t.feedbackModalOpen=!0}).addCase(fd,t=>{t.feedbackModalOpen=!1}).addCase(Us,t=>{t.feedbackSubmitted=!0}).addCase(vn,t=>({...Vn(),responseFormat:t.responseFormat,isVisible:t.isVisible})).addCase(_s,(t,{payload:r})=>{t.isLoading=r}).addCase(md,(t,{payload:r})=>{t.isStreaming=r}).addCase($s,(t,{payload:r})=>{t.responseFormat=r}));var At={abortController:void 0,lastRequestId:"",lastStreamId:"",setAbortControllerRef:e=>{At.abortController=e},getIsStreamInProgress:()=>{var e;return!At.abortController||((e=At.abortController)==null?void 0:e.signal.aborted)?(At.abortController=void 0,!1):!0},subscribeToSearchRequests:e=>{let t=()=>{var i;let r=e.state,a=r.search.requestId,n=r.search.extendedResults.generativeQuestionAnsweringId;At.lastRequestId!==a&&(At.lastRequestId=a,(i=At.abortController)==null||i.abort(),e.dispatch(vn())),!At.getIsStreamInProgress()&&n&&n!==At.lastStreamId&&(At.lastStreamId=n,e.dispatch(Qx({setAbortControllerRef:At.setAbortControllerRef})))};return e.subscribe(t)}};function VT(e,t={}){var s,u;if(!MT(e))throw I;let{dispatch:r}=e,a=M(e),n=()=>e.state,o=(s=t.initialState)==null?void 0:s.isVisible;o!==void 0&&r(Fi(o));let i=(u=t.initialState)==null?void 0:u.responseFormat;return i&&r($s(i)),At.subscribeToSearchRequests(e),{...a,get state(){return n().generatedAnswer},retry(){r(E({legacy:Ax()}))},like(){this.state.liked||(r(ld()),r(Ex()))},dislike(){this.state.disliked||(r(dd()),r(Ix()))},openFeedbackModal(){r(pd())},closeFeedbackModal(){r(fd())},sendFeedback(c){r(kx(c)),r(Us())},sendDetailedFeedback(c){r(Ox(c)),r(Us())},logCitationClick(c){r(ud(c))},logCitationHover(c,l){r(wx(c,l))},rephrase(c){r($s(c)),r(E({legacy:Px(c)}))},show(){this.state.isVisible||(r(Fi(!0)),r(Tx()))},hide(){this.state.isVisible&&(r(Fi(!1)),r(Dx()))},logCopyToClipboard(){r(Vx())}}}function MT(e){return e.addReducers({generatedAnswer:gd}),!0}function NT(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch(ud(t.options.citation.id)))};return ot(e,t,()=>{a()})}var Da=()=>new w({required:!1,emptyAllowed:!0}),hd=v("advancedSearchQueries/update",e=>b(e,{aq:Da(),cq:Da(),lq:Da(),dq:Da()})),Sd=v("advancedSearchQueries/register",e=>b(e,{aq:Da(),cq:Da(),lq:Da(),dq:Da()}));var Bx=T(at(),e=>{e.addCase(hd,(t,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;Ie(a)||(t.aq=a,t.aqWasSet=!0),Ie(n)||(t.cq=n,t.cqWasSet=!0),Ie(o)||(t.lq=o,t.lqWasSet=!0),Ie(i)||(t.dq=i,t.dqWasSet=!0)}).addCase(Sd,(t,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;Ie(a)||(t.defaultFilters.aq=a,t.aqWasSet||(t.aq=a)),Ie(n)||(t.defaultFilters.cq=n,t.cqWasSet||(t.cq=n)),Ie(o)||(t.defaultFilters.lq=o,t.lqWasSet||(t.lq=o)),Ie(i)||(t.defaultFilters.dq=i,t.dqWasSet||(t.dq=i))}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.advancedSearchQueries)!=null?n:t}).addCase(ue,(t,r)=>{let{aq:a,cq:n}=r.payload;Ie(a)||(t.aq=a,t.aqWasSet=!0),Ie(n)||(t.cq=n,t.cqWasSet=!0)})});function Xme(e){return e.addReducers({advancedSearchQueries:Bx}),{updateAdvancedSearchQueries:hd,registerAdvancedSearchQueries:Sd}}function uge(e){return e.addReducers({categoryFacetSet:sr}),{deselectAllCategoryFacetValues:ir,registerCategoryFacet:or,toggleSelectCategoryFacetValue:ya,updateCategoryFacetNumberOfValues:on,updateCategoryFacetSortCriterion:ko,updateFacetAutoSelection:ht,updateCategoryFacetBasePath:Eu}}function xge(e){return e.addReducers({facetSet:xr}),{deselectAllFacetValues:xe,registerFacet:gr,toggleSelectFacetValue:hr,toggleExcludeFacetValue:va,updateFacetIsFieldExpanded:ln,updateFacetNumberOfValues:un,updateFacetSortCriterion:No,updateFreezeCurrentValues:Ur,updateFacetAutoSelection:ht}}function kge(e){return e.addReducers({configuration:z}),{disableAnalytics:Wn,enableAnalytics:Yn,setOriginLevel2:eu,setOriginLevel3:tu,updateAnalyticsConfiguration:ca,updateBasicConfiguration:er}}function Nge(e){return e.addReducers({configuration:z,pipeline:Zn,searchHub:to}),{updateSearchConfiguration:gt}}function Uge(e){return e.addReducers({context:bu}),{addContext:an,removeContext:nn,setContext:rn}}function Gge(e){return e.addReducers({dictionaryFieldContext:Ru}),{addContext:Ro,removeContext:Ao,setContext:Fo}}function Jge(e){return e.addReducers({debug:Jn}),{disableDebug:Kn,enableDebug:ua}}function ohe(e){return e.addReducers({dateFacetSet:br}),{deselectAllDateFacetValues:ju,registerDateFacet:Sr,toggleSelectDateFacetValue:yr,toggleExcludeDateFacetValue:xa,updateDateFacetSortCriterion:Bu,updateDateFacetValues:_r}}function phe(e){return e.addReducers({facetOptions:Ne}),{updateFacetOptions:ie,enableFacet:We,disableFacet:ve}}function She(e){return e.addReducers({didYouMean:Au,query:Ft}),{applyDidYouMeanCorrection:Ct,disableDidYouMean:uu,enableDidYouMean:fo,enableAutomaticQueryCorrection:lu,disableAutomaticQueryCorrection:mo}}function xhe(e){return e.addReducers({fields:Sa}),{registerFieldsToInclude:ma,enableFetchAllFields:xo,disableFetchAllFields:tn,fetchFieldsDescription:bo}}function Phe(e){return e.addReducers({history:Fl,facetOrder:yl}),{back:gs,forward:au}}function Dhe(e){return e.addReducers({numericFacetSet:vt}),{deselectAllNumericFacetValues:$u,registerNumericFacet:Cr,toggleSelectNumericFacetValue:vr,toggleExcludeNumericFacetValue:ba,updateNumericFacetSortCriterion:_u,updateNumericFacetValues:$r}}function jhe(e){return e.addReducers({folding:rd}),{registerFolding:ga,loadCollection:ha}}function Hhe(e){return e.addReducers({pagination:Rr}),{nextPage:so,previousPage:co,registerNumberOfResults:no,registerPage:io,updateNumberOfResults:oo,updatePage:St}}function Yhe(e){return e.addReducers({pipeline:Zn}),{setPipeline:Xn}}function eSe(e){return e.addReducers({query:Ft}),{updateQuery:Ge}}function iSe(e){return e.addReducers({querySet:Jo}),{registerQuerySetQuery:Ko,updateQuerySetQuery:hn}}function gSe(e){return e.addReducers({instantResults:Tl}),{registerInstantResults:ro,updateInstantResultsQuery:tr,clearExpiredResults:ao}}function PSe(e){return e.addReducers({querySuggest:Xo,querySet:Jo}),{clearQuerySuggest:wa,fetchQuerySuggestions:Ea,registerQuerySuggest:Yo,selectQuerySuggestion:Ar}}function qSe(e){return e.addReducers({search:J}),{executeSearch:ho,fetchMoreResults:yo,fetchFacetValues:Su,fetchPage:So,fetchInstantResults:Py}}function MSe(e){return e.addReducers({searchHub:to}),{setSearchHub:eo}}function BSe(e){return e.addReducers({sortCriteria:Vl}),{registerSortCriterion:ei,updateSortCriterion:ti}}function KSe(e){return e.addReducers({standaloneSearchBoxSet:Wl}),{registerStandaloneSearchBox:ni,fetchRedirectUrl:Oa,updateAnalyticsToSearchFromLink:ii,updateAnalyticsToOmniboxFromLink:si,resetStandaloneSearchBox:oi}}function rye(e){return e.addReducers({staticFilterSet:Bl}),{registerStaticFilter:ri,toggleSelectStaticFilterValue:Hr,toggleExcludeStaticFilterValue:zr,deselectAllStaticFilterValues:ka}}function sye(e){return e.addReducers({tabSet:_l}),{registerTab:vo,updateActiveTab:Dt}}function dye(e){return e.addReducers({questionAnswering:Pr}),{collapseSmartSnippet:gi,expandSmartSnippet:mi,dislikeSmartSnippet:Si,likeSmartSnippet:hi,openFeedbackModal:yi,closeFeedbackModal:Ta,expandSmartSnippetRelatedQuestion:Ci,collapseSmartSnippetRelatedQuestion:vi}}function mye(e){return e.addReducers({}),{deselectAllBreadcrumbs:Re,deselectAllNonBreadcrumbs:la}}function Cye(e){return e.addReducers({recentQueries:sd}),{registerRecentQueries:xi,clearRecentQueries:bi}}function Rye(e){return e.addReducers({recentResults:cd}),{registerRecentResults:Go,clearRecentResults:Wo,pushRecentResult:bt}}var yd=v("excerptLength/set",e=>b(e,new D({min:0,required:!0})));var jx=T(Ec(),e=>{e.addCase(yd,(t,r)=>{t.length=r.payload})});function Mye(e){return e.addReducers({excerptLength:jx}),{setExcerptLength:yd}}function Hye(e){return e.addReducers({resultPreview:ed}),{fetchResultContent:yn,updateContentURL:pi,nextPreview:ui,previousPreview:li,preparePreviewPagination:di}}function Yye(e){return e.addReducers({generatedAnswer:gd}),{resetAnswer:vn}}var LT=new ee({content:new fe({required:!0}),conditions:new fe({required:!0}),priority:new D({required:!1,default:0,min:0}),fields:new X({required:!1,each:O})});function QT(e){if(!BT(e))throw I;let t=[],r=a=>{a.forEach(n=>{if(LT.validate(n),!n.conditions.every(i=>i instanceof Function))throw new Gi("Each result template conditions should be a function that takes a result as an argument and returns a boolean")})};return{registerTemplates(...a){let n=[];r(a),a.forEach(o=>{let i={...o,priority:o.priority||0,fields:o.fields||[]};t.push(i),n.push(...i.fields)}),t.sort((o,i)=>i.priority-o.priority),n.length&&e.dispatch(ma(n))},selectTemplate(a){let n=t.find(o=>o.conditions.every(i=>i(a)));return n?n.content:null}}}function BT(e){return e.addReducers({fields:Sa}),!0}var Ux;(o=>{o.getResultProperty=jr,o.fieldsMustBeDefined=ky,o.fieldsMustNotBeDefined=Oy,o.fieldMustMatch=qy,o.fieldMustNotMatch=Ty})(Ux||(Ux={}));function gve(e){return e.addReducers({}),{logClearBreadcrumbs:Hl,logInterfaceLoad:Jc,logSearchFromLink:Xc,logOmniboxFromLink:Zc,logInterfaceChange:sa,logDidYouMeanClick:du,logCategoryFacetBreadcrumb:$l,logFacetBreadcrumb:Vo,logFacetClearAll:Me,logFacetDeselect:dt,logFacetSelect:Pe,logFacetShowLess:Do,logFacetShowMore:To,logFacetUpdateSort:ur,logDateFacetBreadcrumb:Ds,logNumericFacetBreadcrumb:Vs,logNavigateBackward:vl,logNavigateForward:Cl,logPageNext:wl,logPageNumber:Ho,logPagePrevious:El,logPagerResize:$o,logSearchboxSubmit:Ia,logQuerySuggestionClick:Ol,logResultsSort:Zo,logDislikeSmartSnippet:nm,logLikeSmartSnippet:am,logOpenSmartSnippetFeedbackModal:im,logCloseSmartSnippetFeedbackModal:sm,logSmartSnippetFeedback:cm,logSmartSnippetDetailedFeedback:um,logExpandSmartSnippet:tm,logCollapseSmartSnippet:rm,logExpandSmartSnippetSuggestion:lm,logCollapseSmartSnippetSuggestion:dm,logNoResultsBack:xl,logStaticFilterSelect:Ll,logStaticFilterDeselect:ai,logStaticFilterClearAll:Ql,logTriggerQuery:pu,logUndoTriggerQuery:fu,logNotifyTrigger:mu,logTriggerRedirect:gu,logTriggerExecute:hu}}function Cve(e){return e.addReducers({}),{logDocumentOpen:kl,logOpenSmartSnippetSource:om,logOpenSmartSnippetSuggestionSource:Bs,logOpenSmartSnippetInlineLink:Qs,logOpenSmartSnippetSuggestionInlineLink:nd}}function Ave(e){return e.addReducers({}),{logSearchEvent:ny,logClickEvent:oy,logCustomEvent:iy}}function jT(e){let{by:t,order:r}=e;switch(t){case zt.Relevancy:return rs();case zt.QRE:return Ip();case zt.NoSort:return kp();case zt.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return wp(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return Ep(t,r)}}function UT(e){return e===void 0||e===aa.Ascending||e===aa.Descending}function _T(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map(a=>{let n=a.trim().split(" "),o=n[0].toLowerCase(),i=n[1]&&n[1].toLowerCase();if(n.length>2||o==="")throw r;if(!UT(i))throw new Error(`Wrong criterion sort order "${i}" in expression "${e}". Order should either be "${aa.Ascending}" or "${aa.Descending}"`);return jT({by:o,order:i})})}function Le(e){return e.negate?"NOT ":""}function Pt(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function _x(e){return{toQuerySyntax(){let{field:t,value:r}=e,a=Pt(e.operator);return`${Le(e)}@${t}${a}${r}`}}}function $x(e){return{toQuerySyntax(){let t=Le(e),{field:r,from:a,to:n}=e,o=Pt("isExactly");return`${t}@${r}${o}${a}..${n}`}}}function Hx(e){return{toQuerySyntax(){let t=Le(e),{expression:r}=e;return`${t}"${r}"`}}}function zx(e){return{toQuerySyntax(){let t=Le(e),{field:r}=e;return`${t}@${r}`}}}function Gx(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}function Wx(e){return{toQuerySyntax(){let t=Le(e),{startTerm:r,otherTerms:a}=e,n=$T(a),o=`${r} ${n}`;return e.negate?`${t}(${o})`:o}}}function $T(e){return e.map(t=>{let{endTerm:r,maxKeywordsBetween:a}=t;return`near:${a} ${r}`}).join(" ")}function Yx(e){return{toQuerySyntax(){let{field:t,value:r}=e,a=Le(e),n=Pt(e.operator);return`${a}@${t}${n}${r}`}}}function Kx(e){return{toQuerySyntax(){let t=Le(e),{field:r,from:a,to:n}=e,o=Pt("isExactly");return`${t}@${r}${o}${a}..${n}`}}}function Jx(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,a=HT(r);return`$${t}(${a})`}}}function HT(e){return Object.entries(e).map(t=>{let[r,a]=t,n=typeof a=="string"?a:a.toQuerySyntax();return`${r}: ${n}`}).join(", ")}function Xx(e){return{toQuerySyntax(){let t=Le(e),{field:r,operator:a,value:n}=e,o=Pt(a),i=a==="fuzzyMatch"?` $quoteVar(value: ${n})`:`("${n}")`;return`${t}@${r}${o}${i}`}}}function Zx(e){return{toQuerySyntax(){let{field:t}=e,r=Le(e),a=Pt(e.operator),n=e.values.map(i=>`"${i}"`),o=n.length===1?n[0]:`(${n.join(",")})`;return`${r}@${t}${a}${o}`}}}function $xe(){let e=[],t="and";return{addExpression(r){return e.push(r),this},addKeyword(r){return e.push(Gx(r)),this},addNear(r){return e.push(Wx(r)),this},addExactMatch(r){return e.push(Hx(r)),this},addFieldExists(r){return e.push(zx(r)),this},addStringField(r){return e.push(Zx(r)),this},addStringFacetField(r){return e.push(Xx(r)),this},addNumericField(r){return e.push(Yx(r)),this},addNumericRangeField(r){return e.push(Kx(r)),this},addDateField(r){return e.push(_x(r)),this},addDateRangeField(r){return e.push($x(r)),this},addQueryExtension(r){return e.push(Jx(r)),this},joinUsing(r){return t=r,this},toQuerySyntax(){let r=zT(t),a=e.map(n=>n.toQuerySyntax()).join(`) ${r} (`);return e.length<=1?a:`(${a})`}}}function zT(e){return e==="and"?"AND":"OR"}var Wxe={buildMockRaw:Ln,buildMockSearchAppEngine:Op,buildMockResult:qp,createMockState:os};Cm();export{hs as API_DATE_FORMAT,Lh as DefaultFieldsToInclude,lA as EcommerceDefaultFieldsToInclude,Yh as HighlightUtils,Ap as MinimumFieldsToInclude,Ux as ResultTemplatesHelpers,zt as SortBy,aa as SortOrder,Wxe as TestUtils,fs as VERSION,vp as analyticsUrl,Yt as baseFacetResponseSelector,qT as buildAutomaticFacetGenerator,HO as buildBreadcrumbManager,vI as buildCategoryFacet,ET as buildCategoryFieldSuggestions,zE as buildContext,M as buildController,Mr as buildCriterionExpression,LI as buildDateFacet,JI as buildDateFilter,dn as buildDateRange,wp as buildDateSortCriterion,GE as buildDictionaryFieldContext,KE as buildDidYouMean,Xq as buildExecuteTrigger,qI as buildFacet,RT as buildFacetConditionsManager,UO as buildFacetManager,Ep as buildFieldSortCriterion,PT as buildFieldSuggestions,Gq as buildFoldedResultList,VT as buildGeneratedAnswer,Uk as buildHistoryManager,wO as buildInstantResults,NT as buildInteractiveCitation,hO as buildInteractiveInstantResult,FT as buildInteractiveRecentResult,gO as buildInteractiveResult,kp as buildNoSortCriterion,eT as buildNotifyTrigger,_I as buildNumericFacet,GI as buildNumericFilter,Is as buildNumericRange,nO as buildPager,iO as buildQueryError,$xe as buildQueryExpression,Ip as buildQueryRankingExpressionSortCriterion,uO as buildQuerySummary,Kq as buildQueryTrigger,Nq as buildQuickview,gT as buildRecentQueriesList,xT as buildRecentResultsList,Wq as buildRedirectionTrigger,NE as buildRelevanceInspector,rs as buildRelevanceSortCriterion,pO as buildResultList,QT as buildResultTemplatesManager,CO as buildResultsPerPage,$f as buildSearchBox,EE as buildSearchEngine,Gf as buildSearchParameterManager,Jl as buildSearchParameterSerializer,Vq as buildSearchStatus,oT as buildSmartSnippet,cT as buildSmartSnippetQuestionsList,qO as buildSort,YO as buildStandaloneSearchBox,DO as buildStaticFilter,Vv as buildStaticFilterValue,BO as buildTab,qq as buildUrlManager,v as createAction,ae as createAsyncThunk,T as createReducer,Pa as currentPageSelector,Qf as currentPagesSelector,jw as deserializeRelativeDate,Yp as facetRequestSelector,ow as facetResponseSelectedValuesSelector,ds as facetResponseSelector,Xi as getOrganizationEndpoints,aC as getSampleSearchEngineConfiguration,Xme as loadAdvancedSearchQueryActions,mye as loadBreadcrumbActions,uge as loadCategoryFacetSetActions,Cve as loadClickAnalyticsActions,kge as loadConfigurationActions,Uge as loadContextActions,ohe as loadDateFacetSetActions,Jge as loadDebugActions,Gge as loadDictionaryFieldContextActions,She as loadDidYouMeanActions,Mye as loadExcerptLengthActions,phe as loadFacetOptionsActions,xge as loadFacetSetActions,xhe as loadFieldActions,jhe as loadFoldingActions,Yye as loadGeneratedAnswerActions,Ave as loadGenericAnalyticsActions,Phe as loadHistoryActions,gSe as loadInstantResultsActions,Dhe as loadNumericFacetSetActions,Hhe as loadPaginationActions,Yhe as loadPipelineActions,eSe as loadQueryActions,iSe as loadQuerySetActions,PSe as loadQuerySuggestActions,dye as loadQuestionAnsweringActions,Cye as loadRecentQueriesActions,Rye as loadRecentResultsActions,Hye as loadResultPreviewActions,qSe as loadSearchActions,gve as loadSearchAnalyticsActions,Nge as loadSearchConfigurationActions,MSe as loadSearchHubActions,BSe as loadSortCriteriaActions,KSe as loadStandaloneSearchBoxSetActions,rye as loadStaticFilterSetActions,sye as loadTabSetActions,Pl as maxPageSelector,_T as parseCriterionExpression,Sc as platformUrl,Ja as validateRelativeDate};
/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=headless.esm.js.map
