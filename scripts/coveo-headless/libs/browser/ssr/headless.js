/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function (global, factory) {
    const isCommonjs = typeof exports === 'object' && typeof module !== 'undefined';
    
    if (isCommonjs) {
      return factory(exports);
    }
    
    const isAmd = typeof define === 'function' && define.amd;

    if (isAmd) {
      return define(['exports'], factory);
    }

    global = typeof globalThis !== 'undefined' ? globalThis : global || self;
    factory(global.CoveoHeadlessSSR = {});
  })(this, (function (exports) { 'use strict';
var wv=Object.create;var Ji=Object.defineProperty;var Ev=Object.getOwnPropertyDescriptor;var Iv=Object.getOwnPropertyNames;var kv=Object.getPrototypeOf,Ov=Object.prototype.hasOwnProperty;var ef=t=>Ji(t,"__esModule",{value:!0});var Se=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),qv=(t,e)=>{ef(t);for(var r in e)Ji(t,r,{get:e[r],enumerable:!0})},Tv=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Iv(e))!Ov.call(t,a)&&a!=="default"&&Ji(t,a,{get:()=>e[a],enumerable:!(r=Ev(e,a))||r.enumerable});return t},Ge=t=>Tv(ef(Ji(t!=null?wv(kv(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var kf=Se((Yq,If)=>{"use strict";function hF(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(t=`${t}`,t=t.replace(/[ \t\n\f\r]/g,""),t.length%4==0&&(t=t.replace(/==?$/,"")),t.length%4==1||/[^+/0-9A-Za-z]/.test(t))return null;let e="",r=0,a=0;for(let n=0;n<t.length;n++)r<<=6,r|=yF(t[n]),a+=6,a===24&&(e+=String.fromCharCode((r&16711680)>>16),e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255),r=a=0);return a===12?(r>>=4,e+=String.fromCharCode(r)):a===18&&(r>>=2,e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255)),e}var SF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function yF(t){let e=SF.indexOf(t);return e<0?void 0:e}If.exports=hF});var qf=Se((Kq,Of)=>{"use strict";function CF(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let e;for(t=`${t}`,e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return null;let r="";for(e=0;e<t.length;e+=3){let a=[void 0,void 0,void 0,void 0];a[0]=t.charCodeAt(e)>>2,a[1]=(t.charCodeAt(e)&3)<<4,t.length>e+1&&(a[1]|=t.charCodeAt(e+1)>>4,a[2]=(t.charCodeAt(e+1)&15)<<2),t.length>e+2&&(a[2]|=t.charCodeAt(e+2)>>6,a[3]=t.charCodeAt(e+2)&63);for(let n=0;n<a.length;n++)typeof a[n]=="undefined"?r+="=":r+=vF(a[n])}return r}var xF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function vF(t){if(t>=0&&t<64)return xF[t]}Of.exports=CF});var _l=Se((Jq,Tf)=>{"use strict";var FF=kf(),bF=qf();Tf.exports={atob:FF,btoa:bF}});var Ym=Se((rD,Gm)=>{"use strict";var fd=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!fd)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!fd.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');Gm.exports.AbortController=fd.AbortController});var tg=Se((pD,eg)=>{eg.exports=fetch});var rg=Se(gi=>{"use strict";var Is=gi&&gi.__assign||function(){return Is=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Is.apply(this,arguments)};Object.defineProperty(gi,"__esModule",{value:!0});var $R={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function WR(t){var e=Is(Is({},$R),t);return e.numOfAttempts<1&&(e.numOfAttempts=1),e}gi.getSanitizedOptions=WR});var ag=Se(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});function HR(t){var e=Math.random()*t;return Math.round(e)}Sd.fullJitter=HR});var ng=Se(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});function zR(t){return t}yd.noJitter=zR});var og=Se(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var GR=ag(),YR=ng();function KR(t){switch(t.jitter){case"full":return GR.fullJitter;case"none":default:return YR.noJitter}}Cd.JitterFactory=KR});var vd=Se(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});var JR=og(),XR=function(){function t(e){this.options=e,this.attempt=0}return t.prototype.apply=function(){var e=this;return new Promise(function(r){return setTimeout(r,e.jitteredDelay)})},t.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(t.prototype,"jitteredDelay",{get:function(){var e=JR.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){var e=this.options.startingDelay,r=this.options.timeMultiple,a=this.numOfDelayedAttempts,n=e*Math.pow(r,a);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),t}();xd.Delay=XR});var ig=Se(yr=>{"use strict";var ZR=yr&&yr.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},t(e,r)};return function(e,r){t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),eA=yr&&yr.__awaiter||function(t,e,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?o(l.value):n(l.value).then(s,c)}u((a=a.apply(t,e||[])).next())})},tA=yr&&yr.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],n=0}finally{a=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(yr,"__esModule",{value:!0});var rA=vd(),aA=function(t){ZR(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.apply=function(){return eA(this,void 0,void 0,function(){return tA(this,function(r){return[2,this.isFirstAttempt?!0:t.prototype.apply.call(this)]})})},Object.defineProperty(e.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),e}(rA.Delay);yr.SkipFirstDelay=aA});var sg=Se(hi=>{"use strict";var nA=hi&&hi.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},t(e,r)};return function(e,r){t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(hi,"__esModule",{value:!0});var oA=vd(),iA=function(t){nA(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(oA.Delay);hi.AlwaysDelay=iA});var cg=Se(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});var sA=ig(),cA=sg();function uA(t,e){var r=lA(t);return r.setAttemptNumber(e),r}Fd.DelayFactory=uA;function lA(t){return t.delayFirstAttempt?new cA.AlwaysDelay(t):new sA.SkipFirstDelay(t)}});var ug=Se(va=>{"use strict";var bd=va&&va.__awaiter||function(t,e,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?o(l.value):n(l.value).then(s,c)}u((a=a.apply(t,e||[])).next())})},Rd=va&&va.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],n=0}finally{a=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(va,"__esModule",{value:!0});var dA=rg(),pA=cg();function fA(t,e){return e===void 0&&(e={}),bd(this,void 0,void 0,function(){var r,a;return Rd(this,function(n){switch(n.label){case 0:return r=dA.getSanitizedOptions(e),a=new mA(t,r),[4,a.execute()];case 1:return[2,n.sent()]}})})}va.backOff=fA;var mA=function(){function t(e,r){this.request=e,this.options=r,this.attemptNumber=0}return t.prototype.execute=function(){return bd(this,void 0,void 0,function(){var e,r;return Rd(this,function(a){switch(a.label){case 0:if(this.attemptLimitReached)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return a.sent(),[4,this.request()];case 3:return[2,a.sent()];case 4:return e=a.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(r=a.sent(),!r||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(t.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),t.prototype.applyDelay=function(){return bd(this,void 0,void 0,function(){var e;return Rd(this,function(r){switch(r.label){case 0:return e=pA.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return r.sent(),[2]}})})},t}()});var Ws=Se((Dd,Vd)=>{(function(t,e){typeof Dd=="object"&&typeof Vd!="undefined"?Vd.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs=e()})(Dd,function(){"use strict";var t=1e3,e=6e4,r=36e5,a="millisecond",n="second",o="minute",i="hour",s="day",c="week",u="month",l="quarter",d="year",f="date",p="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var q=["th","st","nd","rd"],V=B%100;return"["+B+(q[(V-20)%10]||q[V]||q[0])+"]"}},C=function(B,q,V){var _=String(B);return!_||_.length>=q?B:""+Array(q+1-_.length).join(V)+B},F={s:C,z:function(B){var q=-B.utcOffset(),V=Math.abs(q),_=Math.floor(V/60),M=V%60;return(q<=0?"+":"-")+C(_,2,"0")+":"+C(M,2,"0")},m:function B(q,V){if(q.date()<V.date())return-B(V,q);var _=12*(V.year()-q.year())+(V.month()-q.month()),M=q.clone().add(_,u),Y=V-M<0,Z=q.clone().add(_+(Y?-1:1),u);return+(-(_+(V-M)/(Y?M-Z:Z-M))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:u,y:d,w:c,d:s,D:f,h:i,m:o,s:n,ms:a,Q:l}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},D="en",Q={};Q[D]=v;var te="$isDayjsObject",ae=function(B){return B instanceof he||!(!B||!B[te])},oe=function B(q,V,_){var M;if(!q)return D;if(typeof q=="string"){var Y=q.toLowerCase();Q[Y]&&(M=Y),V&&(Q[Y]=V,M=Y);var Z=q.split("-");if(!M&&Z.length>1)return B(Z[0])}else{var ce=q.name;Q[ce]=q,M=ce}return!_&&M&&(D=M),M||!_&&D},X=function(B,q){if(ae(B))return B.clone();var V=typeof q=="object"?q:{};return V.date=B,V.args=arguments,new he(V)},K=F;K.l=oe,K.i=ae,K.w=function(B,q){return X(B,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var he=function(){function B(V){this.$L=oe(V.locale,null,!0),this.parse(V),this.$x=this.$x||V.x||{},this[te]=!0}var q=B.prototype;return q.parse=function(V){this.$d=function(_){var M=_.date,Y=_.utc;if(M===null)return new Date(NaN);if(K.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var Z=M.match(m);if(Z){var ce=Z[2]-1||0,ge=(Z[7]||"0").substring(0,3);return Y?new Date(Date.UTC(Z[1],ce,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ge)):new Date(Z[1],ce,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ge)}}return new Date(M)}(V),this.init()},q.init=function(){var V=this.$d;this.$y=V.getFullYear(),this.$M=V.getMonth(),this.$D=V.getDate(),this.$W=V.getDay(),this.$H=V.getHours(),this.$m=V.getMinutes(),this.$s=V.getSeconds(),this.$ms=V.getMilliseconds()},q.$utils=function(){return K},q.isValid=function(){return this.$d.toString()!==p},q.isSame=function(V,_){var M=X(V);return this.startOf(_)<=M&&M<=this.endOf(_)},q.isAfter=function(V,_){return X(V)<this.startOf(_)},q.isBefore=function(V,_){return this.endOf(_)<X(V)},q.$g=function(V,_,M){return K.u(V)?this[_]:this.set(M,V)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(V,_){var M=this,Y=!!K.u(_)||_,Z=K.p(V),ce=function(yt,Ie){var ze=K.w(M.$u?Date.UTC(M.$y,Ie,yt):new Date(M.$y,Ie,yt),M);return Y?ze:ze.endOf(s)},ge=function(yt,Ie){return K.w(M.toDate()[yt].apply(M.toDate("s"),(Y?[0,0,0,0]:[23,59,59,999]).slice(Ie)),M)},Re=this.$W,Ee=this.$M,Ue=this.$D,Or="set"+(this.$u?"UTC":"");switch(Z){case d:return Y?ce(1,0):ce(31,11);case u:return Y?ce(1,Ee):ce(0,Ee+1);case c:var Ot=this.$locale().weekStart||0,dr=(Re<Ot?Re+7:Re)-Ot;return ce(Y?Ue-dr:Ue+(6-dr),Ee);case s:case f:return ge(Or+"Hours",0);case i:return ge(Or+"Minutes",1);case o:return ge(Or+"Seconds",2);case n:return ge(Or+"Milliseconds",3);default:return this.clone()}},q.endOf=function(V){return this.startOf(V,!1)},q.$set=function(V,_){var M,Y=K.p(V),Z="set"+(this.$u?"UTC":""),ce=(M={},M[s]=Z+"Date",M[f]=Z+"Date",M[u]=Z+"Month",M[d]=Z+"FullYear",M[i]=Z+"Hours",M[o]=Z+"Minutes",M[n]=Z+"Seconds",M[a]=Z+"Milliseconds",M)[Y],ge=Y===s?this.$D+(_-this.$W):_;if(Y===u||Y===d){var Re=this.clone().set(f,1);Re.$d[ce](ge),Re.init(),this.$d=Re.set(f,Math.min(this.$D,Re.daysInMonth())).$d}else ce&&this.$d[ce](ge);return this.init(),this},q.set=function(V,_){return this.clone().$set(V,_)},q.get=function(V){return this[K.p(V)]()},q.add=function(V,_){var M,Y=this;V=Number(V);var Z=K.p(_),ce=function(Ee){var Ue=X(Y);return K.w(Ue.date(Ue.date()+Math.round(Ee*V)),Y)};if(Z===u)return this.set(u,this.$M+V);if(Z===d)return this.set(d,this.$y+V);if(Z===s)return ce(1);if(Z===c)return ce(7);var ge=(M={},M[o]=e,M[i]=r,M[n]=t,M)[Z]||1,Re=this.$d.getTime()+V*ge;return K.w(Re,this)},q.subtract=function(V,_){return this.add(-1*V,_)},q.format=function(V){var _=this,M=this.$locale();if(!this.isValid())return M.invalidDate||p;var Y=V||"YYYY-MM-DDTHH:mm:ssZ",Z=K.z(this),ce=this.$H,ge=this.$m,Re=this.$M,Ee=M.weekdays,Ue=M.months,Or=M.meridiem,Ot=function(Ie,ze,pr,qr){return Ie&&(Ie[ze]||Ie(_,Y))||pr[ze].slice(0,qr)},dr=function(Ie){return K.s(ce%12||12,Ie,"0")},yt=Or||function(Ie,ze,pr){var qr=Ie<12?"AM":"PM";return pr?qr.toLowerCase():qr};return Y.replace(S,function(Ie,ze){return ze||function(pr){switch(pr){case"YY":return String(_.$y).slice(-2);case"YYYY":return K.s(_.$y,4,"0");case"M":return Re+1;case"MM":return K.s(Re+1,2,"0");case"MMM":return Ot(M.monthsShort,Re,Ue,3);case"MMMM":return Ot(Ue,Re);case"D":return _.$D;case"DD":return K.s(_.$D,2,"0");case"d":return String(_.$W);case"dd":return Ot(M.weekdaysMin,_.$W,Ee,2);case"ddd":return Ot(M.weekdaysShort,_.$W,Ee,3);case"dddd":return Ee[_.$W];case"H":return String(ce);case"HH":return K.s(ce,2,"0");case"h":return dr(1);case"hh":return dr(2);case"a":return yt(ce,ge,!0);case"A":return yt(ce,ge,!1);case"m":return String(ge);case"mm":return K.s(ge,2,"0");case"s":return String(_.$s);case"ss":return K.s(_.$s,2,"0");case"SSS":return K.s(_.$ms,3,"0");case"Z":return Z}return null}(Ie)||Z.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(V,_,M){var Y,Z=this,ce=K.p(_),ge=X(V),Re=(ge.utcOffset()-this.utcOffset())*e,Ee=this-ge,Ue=function(){return K.m(Z,ge)};switch(ce){case d:Y=Ue()/12;break;case u:Y=Ue();break;case l:Y=Ue()/3;break;case c:Y=(Ee-Re)/6048e5;break;case s:Y=(Ee-Re)/864e5;break;case i:Y=Ee/r;break;case o:Y=Ee/e;break;case n:Y=Ee/t;break;default:Y=Ee}return M?Y:K.a(Y)},q.daysInMonth=function(){return this.endOf(u).$D},q.$locale=function(){return Q[this.$L]},q.locale=function(V,_){if(!V)return this.$L;var M=this.clone(),Y=oe(V,_,!0);return Y&&(M.$L=Y),M},q.clone=function(){return K.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},B}(),ve=he.prototype;return X.prototype=ve,[["$ms",a],["$s",n],["$m",o],["$H",i],["$W",s],["$M",u],["$y",d],["$D",f]].forEach(function(B){ve[B[1]]=function(q){return this.$g(q,B[0],B[1])}}),X.extend=function(B,q){return B.$i||(B(q,he,X),B.$i=!0),X},X.locale=oe,X.isDayjs=ae,X.unix=function(B){return X(1e3*B)},X.en=Q[D],X.Ls=Q,X.p={},X})});var Lg=Se((Nd,Md)=>{(function(t,e){typeof Nd=="object"&&typeof Md!="undefined"?Md.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_quarterOfYear=e()})(Nd,function(){"use strict";var t="month",e="quarter";return function(r,a){var n=a.prototype;n.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var o=n.add;n.add=function(s,c){return s=Number(s),this.$utils().p(c)===e?this.add(3*s,t):o.bind(this)(s,c)};var i=n.startOf;n.startOf=function(s,c){var u=this.$utils(),l=!!u.u(c)||c;if(u.p(s)===e){var d=this.quarter()-1;return l?this.month(3*d).startOf(t).startOf("day"):this.month(3*d+2).endOf(t).endOf("day")}return i.bind(this)(s,c)}}})});var Qg=Se((Ld,Qd)=>{(function(t,e){typeof Ld=="object"&&typeof Qd!="undefined"?Qd.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_customParseFormat=e()})(Ld,function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,o={},i=function(p){return(p=+p)+(p>68?1900:2e3)},s=function(p){return function(m){this[p]=+m}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(m){if(!m||m==="Z")return 0;var S=m.match(/([+-]|\d\d)/g),v=60*S[1]+(+S[2]||0);return v===0?0:S[0]==="+"?-v:v}(p)}],u=function(p){var m=o[p];return m&&(m.indexOf?m:m.s.concat(m.f))},l=function(p,m){var S,v=o.meridiem;if(v){for(var C=1;C<=24;C+=1)if(p.indexOf(v(C,0,m))>-1){S=C>12;break}}else S=p===(m?"pm":"PM");return S},d={A:[n,function(p){this.afternoon=l(p,!1)}],a:[n,function(p){this.afternoon=l(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[a,s("seconds")],ss:[a,s("seconds")],m:[a,s("minutes")],mm:[a,s("minutes")],H:[a,s("hours")],h:[a,s("hours")],HH:[a,s("hours")],hh:[a,s("hours")],D:[a,s("day")],DD:[r,s("day")],Do:[n,function(p){var m=o.ordinal,S=p.match(/\d+/);if(this.day=S[0],m)for(var v=1;v<=31;v+=1)m(v).replace(/\[|\]/g,"")===p&&(this.day=v)}],M:[a,s("month")],MM:[r,s("month")],MMM:[n,function(p){var m=u("months"),S=(u("monthsShort")||m.map(function(v){return v.slice(0,3)})).indexOf(p)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[n,function(p){var m=u("months").indexOf(p)+1;if(m<1)throw new Error;this.month=m%12||m}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(p){this.year=i(p)}],YYYY:[/\d{4}/,s("year")],Z:c,ZZ:c};function f(p){var m,S;m=p,S=o&&o.formats;for(var v=(p=m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(oe,X,K){var he=K&&K.toUpperCase();return X||S[K]||t[K]||S[he].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ve,B,q){return B||q.slice(1)})})).match(e),C=v.length,F=0;F<C;F+=1){var D=v[F],Q=d[D],te=Q&&Q[0],ae=Q&&Q[1];v[F]=ae?{regex:te,parser:ae}:D.replace(/^\[|\]$/g,"")}return function(oe){for(var X={},K=0,he=0;K<C;K+=1){var ve=v[K];if(typeof ve=="string")he+=ve.length;else{var B=ve.regex,q=ve.parser,V=oe.slice(he),_=B.exec(V)[0];q.call(X,_),oe=oe.replace(_,"")}}return function(M){var Y=M.afternoon;if(Y!==void 0){var Z=M.hours;Y?Z<12&&(M.hours+=12):Z===12&&(M.hours=0),delete M.afternoon}}(X),X}}return function(p,m,S){S.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(i=p.parseTwoDigitYear);var v=m.prototype,C=v.parse;v.parse=function(F){var D=F.date,Q=F.utc,te=F.args;this.$u=Q;var ae=te[1];if(typeof ae=="string"){var oe=te[2]===!0,X=te[3]===!0,K=oe||X,he=te[2];X&&(he=te[2]),o=this.$locale(),!oe&&he&&(o=S.Ls[he]),this.$d=function(V,_,M){try{if(["x","X"].indexOf(_)>-1)return new Date((_==="X"?1e3:1)*V);var Y=f(_)(V),Z=Y.year,ce=Y.month,ge=Y.day,Re=Y.hours,Ee=Y.minutes,Ue=Y.seconds,Or=Y.milliseconds,Ot=Y.zone,dr=new Date,yt=ge||(Z||ce?1:dr.getDate()),Ie=Z||dr.getFullYear(),ze=0;Z&&!ce||(ze=ce>0?ce-1:dr.getMonth());var pr=Re||0,qr=Ee||0,hl=Ue||0,Sl=Or||0;return Ot?new Date(Date.UTC(Ie,ze,yt,pr,qr,hl,Sl+60*Ot.offset*1e3)):M?new Date(Date.UTC(Ie,ze,yt,pr,qr,hl,Sl)):new Date(Ie,ze,yt,pr,qr,hl,Sl)}catch{return new Date("")}}(D,ae,Q),this.init(),he&&he!==!0&&(this.$L=this.locale(he).$L),K&&D!=this.format(ae)&&(this.$d=new Date("")),o={}}else if(ae instanceof Array)for(var ve=ae.length,B=1;B<=ve;B+=1){te[1]=ae[B-1];var q=S.apply(this,te);if(q.isValid()){this.$d=q.$d,this.$L=q.$L,this.init();break}B===ve&&(this.$d=new Date(""))}else C.call(this,F)}}})});var gh=Se((MQ,mh)=>{var lP=/(^|; )Coveo-Pendragon=([^;]*)/;mh.exports=()=>lP.exec(document.cookie)?.pop()||null});var hh=Se((Gd,Yd)=>{(function(t,e){typeof Gd=="object"&&typeof Yd!="undefined"?Yd.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_timezone=e()})(Gd,function(){"use strict";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(r,a,n){var o,i=function(l,d,f){f===void 0&&(f={});var p=new Date(l),m=function(S,v){v===void 0&&(v={});var C=v.timeZoneName||"short",F=S+"|"+C,D=e[F];return D||(D=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:S,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:C}),e[F]=D),D}(d,f);return m.formatToParts(p)},s=function(l,d){for(var f=i(l,d),p=[],m=0;m<f.length;m+=1){var S=f[m],v=S.type,C=S.value,F=t[v];F>=0&&(p[F]=parseInt(C,10))}var D=p[3],Q=D===24?0:D,te=p[0]+"-"+p[1]+"-"+p[2]+" "+Q+":"+p[4]+":"+p[5]+":000",ae=+l;return(n.utc(te).valueOf()-(ae-=ae%1e3))/6e4},c=a.prototype;c.tz=function(l,d){l===void 0&&(l=o);var f=this.utcOffset(),p=this.toDate(),m=p.toLocaleString("en-US",{timeZone:l}),S=Math.round((p-new Date(m))/1e3/60),v=n(m,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(p.getTimezoneOffset()/15)-S,!0);if(d){var C=v.utcOffset();v=v.add(f-C,"minute")}return v.$x.$timezone=l,v},c.offsetName=function(l){var d=this.$x.$timezone||n.tz.guess(),f=i(this.valueOf(),d,{timeZoneName:l}).find(function(p){return p.type.toLowerCase()==="timezonename"});return f&&f.value};var u=c.startOf;c.startOf=function(l,d){if(!this.$x||!this.$x.$timezone)return u.call(this,l,d);var f=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return u.call(f,l,d).tz(this.$x.$timezone,!0)},n.tz=function(l,d,f){var p=f&&d,m=f||d||o,S=s(+n(),m);if(typeof l!="string")return n(l).tz(m);var v=function(Q,te,ae){var oe=Q-60*te*1e3,X=s(oe,ae);if(te===X)return[oe,te];var K=s(oe-=60*(X-te)*1e3,ae);return X===K?[oe,X]:[Q-60*Math.min(X,K)*1e3,Math.max(X,K)]}(n.utc(l,p).valueOf(),S,m),C=v[0],F=v[1],D=n(C).utcOffset(F);return D.$x.$timezone=m,D},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(l){o=l}}})});var Sh=Se((Kd,Jd)=>{(function(t,e){typeof Kd=="object"&&typeof Jd!="undefined"?Jd.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_utc=e()})(Kd,function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(a,n,o){var i=n.prototype;o.utc=function(p){var m={date:p,utc:!0,args:arguments};return new n(m)},i.utc=function(p){var m=o(this.toDate(),{locale:this.$L,utc:!0});return p?m.add(this.utcOffset(),t):m},i.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),s.call(this,p)};var c=i.init;i.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else c.call(this)};var u=i.utcOffset;i.utcOffset=function(p,m){var S=this.$utils().u;if(S(p))return this.$u?0:S(this.$offset)?u.call(this):this.$offset;if(typeof p=="string"&&(p=function(D){D===void 0&&(D="");var Q=D.match(e);if(!Q)return null;var te=(""+Q[0]).match(r)||["-",0,0],ae=te[0],oe=60*+te[1]+ +te[2];return oe===0?0:ae==="+"?oe:-oe}(p),p===null))return this;var v=Math.abs(p)<=16?60*p:p,C=this;if(m)return C.$offset=v,C.$u=p===0,C;if(p!==0){var F=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(C=this.local().add(v+F,t)).$offset=v,C.$x.$localOffset=F}else C=this.utc();return C};var l=i.format;i.format=function(p){var m=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,m)},i.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(p){return p==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=i.diff;i.diff=function(p,m,S){if(p&&this.$u===p.$u)return f.call(this,p,m,S);var v=this.local(),C=o(p).local();return f.call(v,C,m,S)}}})});var Ih=Se((QB,Eh)=>{"use strict";function bP(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Eh.exports=RP;function RP(t,e,r){var a=r&&r.stringify||bP,n=1;if(typeof t=="object"&&t!==null){var o=e.length+n;if(o===1)return t;var i=new Array(o);i[0]=a(t);for(var s=1;s<o;s++)i[s]=a(e[s]);return i.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var u="",l=1-n,d=-1,f=t&&t.length||0,p=0;p<f;){if(t.charCodeAt(p)===37&&p+1<f){switch(d=d>-1?d:0,t.charCodeAt(p+1)){case 100:case 102:if(l>=c||e[l]==null)break;d<p&&(u+=t.slice(d,p)),u+=Number(e[l]),d=p+2,p++;break;case 105:if(l>=c||e[l]==null)break;d<p&&(u+=t.slice(d,p)),u+=Math.floor(Number(e[l])),d=p+2,p++;break;case 79:case 111:case 106:if(l>=c||e[l]===void 0)break;d<p&&(u+=t.slice(d,p));var m=typeof e[l];if(m==="string"){u+="'"+e[l]+"'",d=p+2,p++;break}if(m==="function"){u+=e[l].name||"<anonymous>",d=p+2,p++;break}u+=a(e[l]),d=p+2,p++;break;case 115:if(l>=c)break;d<p&&(u+=t.slice(d,p)),u+=String(e[l]),d=p+2,p++;break;case 37:d<p&&(u+=t.slice(d,p)),u+="%",d=p+2,p++,l--;break}++l}++p}return d===-1?t:(d<f&&(u+=t.slice(d)),u)}});var Vh=Se((BB,xc)=>{"use strict";var kh=Ih();xc.exports=br;var Pi=QP().console||{},AP={mapHttpRequest:Cc,mapHttpResponse:Cc,wrapRequestSerializer:ap,wrapResponseSerializer:ap,wrapErrorSerializer:ap,req:Cc,res:Cc,err:qh,errWithCause:qh};function Sc(t,e){return t==="silent"?1/0:e.levels.values[t]}var ep=Symbol("pino.logFuncs"),tp=Symbol("pino.hierarchy"),PP={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Oh(t,e){let r={logger:e,parent:t[tp]};e[tp]=r}function wP(t,e,r){let a={};e.forEach(n=>{a[n]=r[n]?r[n]:Pi[n]||Pi[PP[n]||"log"]||wi}),t[ep]=a}function EP(t,e){return Array.isArray(t)?t.filter(function(a){return a!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function br(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||Pi;t.browser.write&&(t.browser.asObject=!0);let a=t.serializers||{},n=EP(t.browser.serialize,a),o=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let i=Object.keys(t.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(i);typeof r=="function"&&s.forEach(function(S){r[S]=r}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");let c=t.level||"info",u=Object.create(r);u.log||(u.log=wi),wP(u,s,r),Oh({},u),Object.defineProperty(u,"levelVal",{get:d}),Object.defineProperty(u,"level",{get:f,set:p});let l={transmit:e,serialize:n,asObject:t.browser.asObject,levels:s,timestamp:NP(t)};u.levels=IP(t),u.level=c,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=wi,u.serializers=a,u._serialize=n,u._stdErrSerialize=o,u.child=m,e&&(u._logEvent=rp());function d(){return Sc(this.level,this)}function f(){return this._level}function p(S){if(S!=="silent"&&!this.levels.values[S])throw Error("unknown level "+S);this._level=S,wa(this,l,u,"error"),wa(this,l,u,"fatal"),wa(this,l,u,"warn"),wa(this,l,u,"info"),wa(this,l,u,"debug"),wa(this,l,u,"trace"),i.forEach(v=>{wa(this,l,u,v)})}function m(S,v){if(!S)throw new Error("missing bindings for child Pino");v=v||{},n&&S.serializers&&(v.serializers=S.serializers);let C=v.serializers;if(n&&C){var F=Object.assign({},a,C),D=t.browser.serialize===!0?Object.keys(F):n;delete S.serializers,yc([S],D,F,this._stdErrSerialize)}function Q(ae){this._childLevel=(ae._childLevel|0)+1,this.bindings=S,F&&(this.serializers=F,this._serialize=D),e&&(this._logEvent=rp([].concat(ae._logEvent.bindings,S)))}Q.prototype=this;let te=new Q(this);return Oh(this,te),te.level=this.level,te}return u}function IP(t){let e=t.customLevels||{},r=Object.assign({},br.levels.values,e),a=Object.assign({},br.levels.labels,kP(e));return{values:r,labels:a}}function kP(t){let e={};return Object.keys(t).forEach(function(r){e[t[r]]=r}),e}br.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};br.stdSerializers=AP;br.stdTimeFunctions=Object.assign({},{nullTime:Th,epochTime:Dh,unixTime:MP,isoTime:LP});function OP(t){let e=[];t.bindings&&e.push(t.bindings);let r=t[tp];for(;r.parent;)r=r.parent,r.logger.bindings&&e.push(r.logger.bindings);return e.reverse()}function wa(t,e,r,a){if(t[a]=Sc(t.level,r)>Sc(a,r)?wi:r[ep][a],!e.transmit&&t[a]===wi)return;t[a]=TP(t,e,r,a);let n=OP(t);n.length!==0&&(t[a]=qP(n,t[a]))}function qP(t,e){return function(){return e.apply(this,[...t,...arguments])}}function TP(t,e,r,a){return function(n){return function(){let i=e.timestamp(),s=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Pi?Pi:this;for(var u=0;u<s.length;u++)s[u]=arguments[u];if(e.serialize&&!e.asObject&&yc(s,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(c,DP(this,a,s,i)):n.apply(c,s),e.transmit){let l=e.transmit.level||t._level,d=r.levels.values[l],f=r.levels.values[a];if(f<d)return;VP(this,{ts:i,methodLevel:a,methodValue:f,transmitLevel:l,transmitValue:r.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:Sc(t._level,r)},s)}}}(t[ep][a])}function DP(t,e,r,a){t._serialize&&yc(r,t._serialize,t.serializers,t._stdErrSerialize);let n=r.slice(),o=n[0],i={};a&&(i.time=a),i.level=t.levels.values[e];let s=(t._childLevel|0)+1;if(s<1&&(s=1),o!==null&&typeof o=="object"){for(;s--&&typeof n[0]=="object";)Object.assign(i,n.shift());o=n.length?kh(n.shift(),n):void 0}else typeof o=="string"&&(o=kh(n.shift(),n));return o!==void 0&&(i.msg=o),i}function yc(t,e,r,a){for(let n in t)if(a&&t[n]instanceof Error)t[n]=br.stdSerializers.err(t[n]);else if(typeof t[n]=="object"&&!Array.isArray(t[n]))for(let o in t[n])e&&e.indexOf(o)>-1&&o in r&&(t[n][o]=r[o](t[n][o]))}function VP(t,e,r){let a=e.send,n=e.ts,o=e.methodLevel,i=e.methodValue,s=e.val,c=t._logEvent.bindings;yc(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=n,t._logEvent.messages=r.filter(function(u){return c.indexOf(u)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=i,a(o,t._logEvent,s),t._logEvent=rp(c)}function rp(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function qh(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function NP(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Th:Dh}function Cc(){return{}}function ap(t){return t}function wi(){}function Th(){return!1}function Dh(){return Date.now()}function MP(){return Math.round(Date.now()/1e3)}function LP(){return new Date(Date.now()).toISOString()}function QP(){function t(e){return typeof e!="undefined"&&e}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}xc.exports.default=br;xc.exports.pino=br});qv(exports,{API_DATE_FORMAT:()=>Mn,DefaultFieldsToInclude:()=>cp,EcommerceDefaultFieldsToInclude:()=>tS,MinimumFieldsToInclude:()=>Fc,ResultTemplatesHelpers:()=>Zp,SortBy:()=>bt,SortOrder:()=>mr,VERSION:()=>gn,analyticsUrl:()=>ks,baseFacetResponseSelector:()=>vt,buildCriterionExpression:()=>Nt,buildDateRange:()=>Rr,buildDateSortCriterion:()=>xs,buildFieldSortCriterion:()=>vs,buildNoSortCriterion:()=>bs,buildNumericRange:()=>ja,buildQueryExpression:()=>nq,buildQueryRankingExpressionSortCriterion:()=>Fs,buildRelevanceSortCriterion:()=>mn,buildResultTemplatesManager:()=>fv,buildSearchParameterSerializer:()=>$i,buildStaticFilterValue:()=>Uu,createAction:()=>h,createAsyncThunk:()=>J,createReducer:()=>k,currentPageSelector:()=>wr,currentPagesSelector:()=>Iu,defineAutomaticFacetGenerator:()=>Jx,defineBreadcrumbManager:()=>OC,defineCategoryFacet:()=>NS,defineCategoryFieldSuggestions:()=>zx,defineContext:()=>cS,defineDateFacet:()=>oy,defineDateFilter:()=>by,defineDictionaryFieldContext:()=>lS,defineDidYouMean:()=>mS,defineExecuteTrigger:()=>bx,defineFacet:()=>KS,defineFacetManager:()=>EC,defineFieldSuggestions:()=>Wx,defineFoldedResultList:()=>hx,defineHistoryManager:()=>Uy,defineInstantResults:()=>mC,defineNotifyTrigger:()=>Ax,defineNumericFacet:()=>dy,defineNumericFilter:()=>Sy,definePager:()=>Hy,defineQueryError:()=>Yy,defineQuerySummary:()=>Xy,defineQueryTrigger:()=>vx,defineQuickview:()=>ux,defineRecentQueriesList:()=>Qx,defineRecentResultsList:()=>_x,defineRedirectionTrigger:()=>Cx,defineRelevanceInspector:()=>nS,defineResultList:()=>eC,defineResultsPerPage:()=>aC,defineSearchBox:()=>dC,defineSearchEngine:()=>Kh,defineSearchParameterManager:()=>GC,defineSearchStatus:()=>nx,defineSmartSnippet:()=>kx,defineSmartSnippetQuestionsList:()=>Dx,defineSort:()=>CC,defineStandaloneSearchBox:()=>MC,defineStaticFilter:()=>vC,defineTab:()=>AC,defineUrlManager:()=>rx,deserializeRelativeDate:()=>Yg,facetRequestSelector:()=>ys,facetResponseSelectedValuesSelector:()=>Am,facetResponseSelector:()=>nn,getOrganizationEndpoints:()=>Sn,getSampleSearchEngineConfiguration:()=>ip,loadAdvancedSearchQueryActions:()=>mO,loadBreadcrumbActions:()=>UO,loadCategoryFacetSetActions:()=>gO,loadClickAnalyticsActions:()=>XO,loadConfigurationActions:()=>SO,loadContextActions:()=>CO,loadDateFacetSetActions:()=>FO,loadDebugActions:()=>vO,loadDictionaryFieldContextActions:()=>xO,loadDidYouMeanActions:()=>RO,loadExcerptLengthActions:()=>WO,loadFacetOptionsActions:()=>bO,loadFacetSetActions:()=>hO,loadFieldActions:()=>AO,loadFoldingActions:()=>EO,loadGeneratedAnswerActions:()=>GO,loadGenericAnalyticsActions:()=>ZO,loadHistoryActions:()=>PO,loadInstantResultsActions:()=>TO,loadNumericFacetSetActions:()=>wO,loadPaginationActions:()=>IO,loadPipelineActions:()=>kO,loadQueryActions:()=>OO,loadQuerySetActions:()=>qO,loadQuerySuggestActions:()=>DO,loadQuestionAnsweringActions:()=>jO,loadRecentQueriesActions:()=>_O,loadRecentResultsActions:()=>$O,loadResultPreviewActions:()=>HO,loadSearchActions:()=>VO,loadSearchAnalyticsActions:()=>JO,loadSearchConfigurationActions:()=>yO,loadSearchHubActions:()=>NO,loadSortCriteriaActions:()=>MO,loadStandaloneSearchBoxSetActions:()=>LO,loadStaticFilterSetActions:()=>QO,loadTabSetActions:()=>BO,maxPageSelector:()=>Li,parseCriterionExpression:()=>gv,platformUrl:()=>yi,validateRelativeDate:()=>Hr});var ni=()=>global.crypto,tf=()=>{typeof window=="undefined"&&(ni()||(global.crypto=require("crypto")),!ni().getRandomValues&&ni().webcrypto&&(global.crypto.getRandomValues=ni().webcrypto.getRandomValues.bind(ni().webcrypto)))};function et(t){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];if(!1)var n,o;throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function fr(t){return!!t&&!!t[fe]}function Ct(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var n=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===jv}(t)||Array.isArray(t)||!!t[ff]||!!((e=t.constructor)===null||e===void 0?void 0:e[ff])||yl(t)||Cl(t))}function ha(t,e,r){r===void 0&&(r=!1),za(t)===0?(r?Object.keys:Ya)(t).forEach(function(a){r&&typeof a=="symbol"||e(a,t[a],t)}):t.forEach(function(a,n){return e(n,a,t)})}function za(t){var e=t[fe];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:yl(t)?2:Cl(t)?3:0}function Ga(t,e){return za(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Dv(t,e){return za(t)===2?t.get(e):t[e]}function rf(t,e,r){var a=za(t);a===2?t.set(e,r):a===3?t.add(r):t[e]=r}function af(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function yl(t){return Qv&&t instanceof Map}function Cl(t){return Bv&&t instanceof Set}function Tr(t){return t.o||t.t}function xl(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=mf(t);delete e[fe];for(var r=Ya(e),a=0;a<r.length;a++){var n=r[a],o=e[n];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[n]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[n]})}return Object.create(Object.getPrototypeOf(t),e)}function vl(t,e){return e===void 0&&(e=!1),Fl(t)||fr(t)||!Ct(t)||(za(t)>1&&(t.set=t.add=t.clear=t.delete=Vv),Object.freeze(t),e&&ha(t,function(r,a){return vl(a,!0)},!0)),t}function Vv(){et(2)}function Fl(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function qt(t){var e=Ol[t];return e||et(18,t),e}function Nv(t,e){Ol[t]||(Ol[t]=e)}function bl(){return oi}function Rl(t,e){e&&(qt("Patches"),t.u=[],t.s=[],t.v=e)}function Xi(t){Al(t),t.p.forEach(Mv),t.p=null}function Al(t){t===oi&&(oi=t.l)}function nf(t){return oi={p:[],l:oi,h:t,m:!0,_:0}}function Mv(t){var e=t[fe];e.i===0||e.i===1?e.j():e.g=!0}function Pl(t,e){e._=e.p.length;var r=e.p[0],a=t!==void 0&&t!==r;return e.h.O||qt("ES5").S(e,t,a),a?(r[fe].P&&(Xi(e),et(4)),Ct(t)&&(t=Zi(e,t),e.l||es(e,t)),e.u&&qt("Patches").M(r[fe].t,t,e.u,e.s)):t=Zi(e,r,[]),Xi(e),e.u&&e.v(e.u,e.s),t!==pf?t:void 0}function Zi(t,e,r){if(Fl(e))return e;var a=e[fe];if(!a)return ha(e,function(s,c){return of(t,a,e,s,c,r)},!0),e;if(a.A!==t)return e;if(!a.P)return es(t,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var n=a.i===4||a.i===5?a.o=xl(a.k):a.o,o=n,i=!1;a.i===3&&(o=new Set(n),n.clear(),i=!0),ha(o,function(s,c){return of(t,a,n,s,c,r,i)}),es(t,n,!1),r&&t.u&&qt("Patches").N(a,r,t.u,t.s)}return a.o}function of(t,e,r,a,n,o,i){if(fr(n)){var s=Zi(t,n,o&&e&&e.i!==3&&!Ga(e.R,a)?o.concat(a):void 0);if(rf(r,a,s),!fr(s))return;t.m=!1}else i&&r.add(n);if(Ct(n)&&!Fl(n)){if(!t.h.D&&t._<1)return;Zi(t,n),e&&e.A.l||es(t,n)}}function es(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&vl(e,r)}function wl(t,e){var r=t[fe];return(r?Tr(r):t)[e]}function sf(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var a=Object.getOwnPropertyDescriptor(r,e);if(a)return a;r=Object.getPrototypeOf(r)}}function Dr(t){t.P||(t.P=!0,t.l&&Dr(t.l))}function El(t){t.o||(t.o=xl(t.t))}function Il(t,e,r){var a=yl(e)?qt("MapSet").F(e,r):Cl(e)?qt("MapSet").T(e,r):t.O?function(n,o){var i=Array.isArray(n),s={i:i?1:0,A:o?o.A:bl(),P:!1,I:!1,R:{},l:o,t:n,k:null,o:null,j:null,C:!1},c=s,u=ii;i&&(c=[s],u=si);var l=Proxy.revocable(c,u),d=l.revoke,f=l.proxy;return s.k=f,s.j=d,f}(e,r):qt("ES5").J(e,r);return(r?r.A:bl()).p.push(a),a}function Lv(t){return fr(t)||et(22,t),function e(r){if(!Ct(r))return r;var a,n=r[fe],o=za(r);if(n){if(!n.P&&(n.i<4||!qt("ES5").K(n)))return n.t;n.I=!0,a=cf(r,o),n.I=!1}else a=cf(r,o);return ha(a,function(i,s){n&&Dv(n.t,i)===s||rf(a,i,e(s))}),o===3?new Set(a):a}(t)}function cf(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return xl(t)}function uf(){function t(i,s){var c=o[i];return c?c.enumerable=s:o[i]=c={configurable:!0,enumerable:s,get:function(){var u=this[fe];return ii.get(u,i)},set:function(u){var l=this[fe];ii.set(l,i,u)}},c}function e(i){for(var s=i.length-1;s>=0;s--){var c=i[s][fe];if(!c.P)switch(c.i){case 5:a(c)&&Dr(c);break;case 4:r(c)&&Dr(c)}}}function r(i){for(var s=i.t,c=i.k,u=Ya(c),l=u.length-1;l>=0;l--){var d=u[l];if(d!==fe){var f=s[d];if(f===void 0&&!Ga(s,d))return!0;var p=c[d],m=p&&p[fe];if(m?m.t!==f:!af(p,f))return!0}}var S=!!s[fe];return u.length!==Ya(s).length+(S?0:1)}function a(i){var s=i.k;if(s.length!==i.t.length)return!0;var c=Object.getOwnPropertyDescriptor(s,s.length-1);if(c&&!c.get)return!0;for(var u=0;u<s.length;u++)if(!s.hasOwnProperty(u))return!0;return!1}function n(i){i.g&&et(3,JSON.stringify(Tr(i)))}var o={};Nv("ES5",{J:function(i,s){var c=Array.isArray(i),u=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var S=mf(f);delete S[fe];for(var v=Ya(S),C=0;C<v.length;C++){var F=v[C];S[F]=t(F,d||!!S[F].enumerable)}return Object.create(Object.getPrototypeOf(f),S)}(c,i),l={i:c?5:4,A:s?s.A:bl(),P:!1,I:!1,R:{},l:s,t:i,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,fe,{value:l,writable:!0}),u},S:function(i,s,c){c?fr(s)&&s[fe].A===i&&e(i.p):(i.u&&function u(l){if(l&&typeof l=="object"){var d=l[fe];if(d){var f=d.t,p=d.k,m=d.R,S=d.i;if(S===4)ha(p,function(Q){Q!==fe&&(f[Q]!==void 0||Ga(f,Q)?m[Q]||u(p[Q]):(m[Q]=!0,Dr(d)))}),ha(f,function(Q){p[Q]!==void 0||Ga(p,Q)||(m[Q]=!1,Dr(d))});else if(S===5){if(a(d)&&(Dr(d),m.length=!0),p.length<f.length)for(var v=p.length;v<f.length;v++)m[v]=!1;else for(var C=f.length;C<p.length;C++)m[C]=!0;for(var F=Math.min(p.length,f.length),D=0;D<F;D++)p.hasOwnProperty(D)||(m[D]=!0),m[D]===void 0&&u(p[D])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var lf,oi,kl=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",Qv=typeof Map!="undefined",Bv=typeof Set!="undefined",df=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",pf=kl?Symbol.for("immer-nothing"):((lf={})["immer-nothing"]=!0,lf),ff=kl?Symbol.for("immer-draftable"):"__$immer_draftable",fe=kl?Symbol.for("immer-state"):"__$immer_state",uq=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var jv=""+Object.prototype.constructor,Ya=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,mf=Object.getOwnPropertyDescriptors||function(t){var e={};return Ya(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},Ol={},ii={get:function(t,e){if(e===fe)return t;var r=Tr(t);if(!Ga(r,e))return function(n,o,i){var s,c=sf(o,i);return c?"value"in c?c.value:(s=c.get)===null||s===void 0?void 0:s.call(n.k):void 0}(t,r,e);var a=r[e];return t.I||!Ct(a)?a:a===wl(t.t,e)?(El(t),t.o[e]=Il(t.A.h,a,t)):a},has:function(t,e){return e in Tr(t)},ownKeys:function(t){return Reflect.ownKeys(Tr(t))},set:function(t,e,r){var a=sf(Tr(t),e);if(a==null?void 0:a.set)return a.set.call(t.k,r),!0;if(!t.P){var n=wl(Tr(t),e),o=n==null?void 0:n[fe];if(o&&o.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(af(r,n)&&(r!==void 0||Ga(t.t,e)))return!0;El(t),Dr(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return wl(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,El(t),Dr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=Tr(t),a=Reflect.getOwnPropertyDescriptor(r,e);return a&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:a.enumerable,value:r[e]}},defineProperty:function(){et(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){et(12)}},si={};ha(ii,function(t,e){si[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),si.deleteProperty=function(t,e){return si.set.call(this,t,e,void 0)},si.set=function(t,e,r){return ii.set.call(this,t[0],e,r,t[0])};var Uv=function(){function t(r){var a=this;this.O=df,this.D=!0,this.produce=function(n,o,i){if(typeof n=="function"&&typeof o!="function"){var s=o;o=n;var c=a;return function(S){var v=this;S===void 0&&(S=s);for(var C=arguments.length,F=Array(C>1?C-1:0),D=1;D<C;D++)F[D-1]=arguments[D];return c.produce(S,function(Q){var te;return(te=o).call.apply(te,[v,Q].concat(F))})}}var u;if(typeof o!="function"&&et(6),i!==void 0&&typeof i!="function"&&et(7),Ct(n)){var l=nf(a),d=Il(a,n,void 0),f=!0;try{u=o(d),f=!1}finally{f?Xi(l):Al(l)}return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(S){return Rl(l,i),Pl(S,l)},function(S){throw Xi(l),S}):(Rl(l,i),Pl(u,l))}if(!n||typeof n!="object"){if((u=o(n))===void 0&&(u=n),u===pf&&(u=void 0),a.D&&vl(u,!0),i){var p=[],m=[];qt("Patches").M(n,u,p,m),i(p,m)}return u}et(21,n)},this.produceWithPatches=function(n,o){if(typeof n=="function")return function(u){for(var l=arguments.length,d=Array(l>1?l-1:0),f=1;f<l;f++)d[f-1]=arguments[f];return a.produceWithPatches(u,function(p){return n.apply(void 0,[p].concat(d))})};var i,s,c=a.produce(n,o,function(u,l){i=u,s=l});return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(u){return[u,i,s]}):[c,i,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){Ct(r)||et(8),fr(r)&&(r=Lv(r));var a=nf(this),n=Il(this,r,void 0);return n[fe].C=!0,Al(a),n},e.finishDraft=function(r,a){var n=r&&r[fe],o=n.A;return Rl(o,a),Pl(void 0,o)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!df&&et(20),this.O=r},e.applyPatches=function(r,a){var n;for(n=a.length-1;n>=0;n--){var o=a[n];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}n>-1&&(a=a.slice(n+1));var i=qt("Patches").$;return fr(r)?i(r,a):this.produce(r,function(s){return i(s,a)})},t}(),Ye=new Uv,_v=Ye.produce,lq=Ye.produceWithPatches.bind(Ye),dq=Ye.setAutoFreeze.bind(Ye),pq=Ye.setUseProxies.bind(Ye),fq=Ye.applyPatches.bind(Ye),mq=Ye.createDraft.bind(Ye),gq=Ye.finishDraft.bind(Ye),ts=_v;function Vr(t){return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vr(t)}function ql(t,e){if(Vr(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e||"default");if(Vr(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tl(t){var e=ql(t,"string");return Vr(e)==="symbol"?e:String(e)}function Dl(t,e,r){return e=Tl(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function rs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gf(Object(r),!0).forEach(function(a){Dl(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Ve(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var hf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Vl=function(){return Math.random().toString(36).substring(7).split("").join(".")},as={INIT:"@@redux/INIT"+Vl(),REPLACE:"@@redux/REPLACE"+Vl(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Vl()}};function $v(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Nl(t,e,r){var a;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ve(0));if(typeof e=="function"&&typeof r=="undefined"&&(r=e,e=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(Ve(1));return r(Nl)(t,e)}if(typeof t!="function")throw new Error(Ve(2));var n=t,o=e,i=[],s=i,c=!1;function u(){s===i&&(s=i.slice())}function l(){if(c)throw new Error(Ve(3));return o}function d(S){if(typeof S!="function")throw new Error(Ve(4));if(c)throw new Error(Ve(5));var v=!0;return u(),s.push(S),function(){if(!!v){if(c)throw new Error(Ve(6));v=!1,u();var F=s.indexOf(S);s.splice(F,1),i=null}}}function f(S){if(!$v(S))throw new Error(Ve(7));if(typeof S.type=="undefined")throw new Error(Ve(8));if(c)throw new Error(Ve(9));try{c=!0,o=n(o,S)}finally{c=!1}for(var v=i=s,C=0;C<v.length;C++){var F=v[C];F()}return S}function p(S){if(typeof S!="function")throw new Error(Ve(10));n=S,f({type:as.REPLACE})}function m(){var S,v=d;return S={subscribe:function(F){if(typeof F!="object"||F===null)throw new Error(Ve(11));function D(){F.next&&F.next(l())}D();var Q=v(D);return{unsubscribe:Q}}},S[hf]=function(){return this},S}return f({type:as.INIT}),a={dispatch:f,subscribe:d,getState:l,replaceReducer:p},a[hf]=m,a}function Wv(t){Object.keys(t).forEach(function(e){var r=t[e],a=r(void 0,{type:as.INIT});if(typeof a=="undefined")throw new Error(Ve(12));if(typeof r(void 0,{type:as.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Ve(13))})}function ns(t){for(var e=Object.keys(t),r={},a=0;a<e.length;a++){var n=e[a];typeof t[n]=="function"&&(r[n]=t[n])}var o=Object.keys(r),i,s;try{Wv(r)}catch(c){s=c}return function(u,l){if(u===void 0&&(u={}),s)throw s;if(!1)var d;for(var f=!1,p={},m=0;m<o.length;m++){var S=o[m],v=r[S],C=u[S],F=v(C,l);if(typeof F=="undefined"){var D=l&&l.type;throw new Error(Ve(14))}p[S]=F,f=f||F!==C}return f=f||o.length!==Object.keys(u).length,f?p:u}}function Ka(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(a){return a}:e.length===1?e[0]:e.reduce(function(a,n){return function(){return a(n.apply(void 0,arguments))}})}function Sf(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(a){return function(){var n=a.apply(void 0,arguments),o=function(){throw new Error(Ve(15))},i={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=e.map(function(c){return c(i)});return o=Ka.apply(void 0,s)(n.dispatch),rs(rs({},n),{},{dispatch:o})}}}function yf(t){var e=function(a){var n=a.dispatch,o=a.getState;return function(i){return function(s){return typeof s=="function"?s(n,o,t):i(s)}}};return e}var Cf=yf();Cf.withExtraArgument=yf;var Ml=Cf;var xf=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),Hv=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],n=0}finally{a=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ja=function(t,e){for(var r=0,a=e.length,n=t.length;r<a;r++,n++)t[n]=e[r];return t},zv=Object.defineProperty,Gv=Object.defineProperties,Yv=Object.getOwnPropertyDescriptors,vf=Object.getOwnPropertySymbols,Kv=Object.prototype.hasOwnProperty,Jv=Object.prototype.propertyIsEnumerable,Ff=function(t,e,r){return e in t?zv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},Xa=function(t,e){for(var r in e||(e={}))Kv.call(e,r)&&Ff(t,r,e[r]);if(vf)for(var a=0,n=vf(e);a<n.length;a++){var r=n[a];Jv.call(e,r)&&Ff(t,r,e[r])}return t},Ll=function(t,e){return Gv(t,Yv(e))},Xv=function(t,e,r){return new Promise(function(a,n){var o=function(c){try{s(r.next(c))}catch(u){n(u)}},i=function(c){try{s(r.throw(c))}catch(u){n(u)}},s=function(c){return c.done?a(c.value):Promise.resolve(c.value).then(o,i)};s((r=r.apply(t,e)).next())})};var Zv=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ka:Ka.apply(null,arguments)},Tq=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(t){return t}};function eF(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}function h(t,e){function r(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(e){var o=e.apply(void 0,a);if(!o)throw new Error("prepareAction did not return an object");return Xa(Xa({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:a[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(a){return a.type===t},r}var tF=function(t){xf(e,t);function e(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Ja([void 0],r[0].concat(this)))):new(e.bind.apply(e,Ja([void 0],r.concat(this))))},e}(Array),rF=function(t){xf(e,t);function e(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Ja([void 0],r[0].concat(this)))):new(e.bind.apply(e,Ja([void 0],r.concat(this))))},e}(Array);function bf(t){return Ct(t)?ts(t,function(){}):t}function aF(t){return typeof t=="boolean"}function nF(){return function(e){return oF(e)}}function oF(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e,a=t.immutableCheck,n=a===void 0?!0:a,o=t.serializableCheck,i=o===void 0?!0:o,s=t.actionCreatorCheck,c=s===void 0?!0:s,u=new tF;if(r&&(aF(r)?u.push(Ml):u.push(Ml.withExtraArgument(r.extraArgument))),!1){if(n)var l;if(i)var d;if(c)var f}return u}var Ql=!0;function Rf(t){var e=nF(),r=t||{},a=r.reducer,n=a===void 0?void 0:a,o=r.middleware,i=o===void 0?e():o,s=r.devTools,c=s===void 0?!0:s,u=r.preloadedState,l=u===void 0?void 0:u,d=r.enhancers,f=d===void 0?void 0:d,p;if(typeof n=="function")p=n;else if(eF(n))p=ns(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=i;if(typeof m=="function"&&(m=m(e),!Ql&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!Ql&&m.some(function(Q){return typeof Q!="function"}))throw new Error("each middleware provided to configureStore must be a function");var S=Sf.apply(void 0,m),v=Ka;c&&(v=Zv(Xa({trace:!Ql},typeof c=="object"&&c)));var C=new rF(S),F=C;Array.isArray(f)?F=Ja([S],f):typeof f=="function"&&(F=f(C));var D=v.apply(void 0,F);return Nl(p,l,D)}function iF(t){var e={},r=[],a,n={addCase:function(o,i){var s=typeof o=="string"?o:o.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[s]=i,n},addMatcher:function(o,i){return r.push({matcher:o,reducer:i}),n},addDefaultCase:function(o){return a=o,n}};return t(n),[e,r,a]}function sF(t){return typeof t=="function"}function k(t,e,r,a){r===void 0&&(r=[]);var n=typeof e=="function"?iF(e):[e,r,a],o=n[0],i=n[1],s=n[2],c;if(sF(t))c=function(){return bf(t())};else{var u=bf(t);c=function(){return u}}function l(d,f){d===void 0&&(d=c());var p=Ja([o[f.type]],i.filter(function(m){var S=m.matcher;return S(f)}).map(function(m){var S=m.reducer;return S}));return p.filter(function(m){return!!m}).length===0&&(p=[s]),p.reduce(function(m,S){if(S)if(fr(m)){var v=m,C=S(v,f);return C===void 0?m:C}else{if(Ct(m))return ts(m,function(F){return S(F,f)});var C=S(m,f);if(C===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return C}return m},d)}return l.getInitialState=c,l}var cF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",uF=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=cF[Math.random()*64|0];return e},lF=["name","message","stack","code"],Bl=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),Af=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),dF=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,a=lF;r<a.length;r++){var n=a[r];typeof t[n]=="string"&&(e[n]=t[n])}return e}return{message:String(t)}},J=function(){function t(e,r,a){var n=h(e+"/fulfilled",function(l,d,f,p){return{payload:l,meta:Ll(Xa({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),o=h(e+"/pending",function(l,d,f){return{payload:void 0,meta:Ll(Xa({},f||{}),{arg:d,requestId:l,requestStatus:"pending"})}}),i=h(e+"/rejected",function(l,d,f,p,m){return{payload:p,error:(a&&a.serializeError||dF)(l||"Rejected"),meta:Ll(Xa({},m||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=!1,c=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(d,f,p){var m=(a==null?void 0:a.idGenerator)?a.idGenerator(l):uF(),S=new c,v,C=!1;function F(Q){v=Q,S.abort()}var D=function(){return Xv(this,null,function(){var Q,te,ae,oe,X,K,he;return Hv(this,function(ve){switch(ve.label){case 0:return ve.trys.push([0,4,,5]),oe=(Q=a==null?void 0:a.condition)==null?void 0:Q.call(a,l,{getState:f,extra:p}),fF(oe)?[4,oe]:[3,2];case 1:oe=ve.sent(),ve.label=2;case 2:if(oe===!1||S.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=!0,X=new Promise(function(B,q){return S.signal.addEventListener("abort",function(){return q({name:"AbortError",message:v||"Aborted"})})}),d(o(m,l,(te=a==null?void 0:a.getPendingMeta)==null?void 0:te.call(a,{requestId:m,arg:l},{getState:f,extra:p}))),[4,Promise.race([X,Promise.resolve(r(l,{dispatch:d,getState:f,extra:p,requestId:m,signal:S.signal,abort:F,rejectWithValue:function(B,q){return new Bl(B,q)},fulfillWithValue:function(B,q){return new Af(B,q)}})).then(function(B){if(B instanceof Bl)throw B;return B instanceof Af?n(B.payload,m,l,B.meta):n(B,m,l)})])];case 3:return ae=ve.sent(),[3,5];case 4:return K=ve.sent(),ae=K instanceof Bl?i(null,m,l,K.payload,K.meta):i(K,m,l),[3,5];case 5:return he=a&&!a.dispatchConditionRejection&&i.match(ae)&&ae.meta.condition,he||d(ae),[2,ae]}})})}();return Object.assign(D,{abort:F,requestId:m,arg:l,unwrap:function(){return D.then(pF)}})}}return Object.assign(u,{pending:o,rejected:i,fulfilled:n,typePrefix:e})}return t.withTypes=function(){return t},t}();function pF(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function fF(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var mF="task",Pf="listener",wf="completed",jl="cancelled",Mq="task-"+jl,Lq="task-"+wf,Qq=Pf+"-"+jl,Bq=Pf+"-"+wf,jq=function(){function t(e){this.code=e,this.name="TaskAbortError",this.message=mF+" "+jl+" (reason: "+e+")"}return t}();var Ul="listenerMiddleware";var Uq=h(Ul+"/add"),_q=h(Ul+"/removeAll"),$q=h(Ul+"/remove");var Ef,Wq=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis):function(t){return(Ef||(Ef=Promise.resolve())).then(t).catch(function(e){return setTimeout(function(){throw e},0)})},gF=function(t){return function(e){setTimeout(e,t)}},Hq=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:gF(10);uf();var Df=Ge(_l()),Za=(t,e=5)=>t+Math.random().toString(36).substring(2,2+e);function os(t){return Array.isArray(t)}function Vf(t,e){return[...t.reduce((r,a)=>{let n=e(a);return r.has(n)||r.set(n,a),r},new Map).values()]}function RF(t){return(typeof btoa!="undefined"?btoa:Df.btoa)(encodeURI(t))}function is(t,e){let{[t]:r,...a}=e;return a}function ss(t){return RF(JSON.stringify(t))}var AF=new Set(["1",1,"yes",!0]);function cs(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;let t=navigator,e=window;return[t.globalPrivacyControl,t.doNotTrack,t.msDoNotTrack,e.doNotTrack].some(r=>AF.has(r))}function Nf(t){let e={};for(let[r,a]of t)e[r]=a;return e}function Mf(t,e,r){return clearTimeout(e),setTimeout(t,r)}function $l(t,e){return Object.fromEntries(Object.entries(t).map(([r,a])=>[r,e(a,r)]))}function Nr(t){if(typeof t!="object"||!t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}function PF(){let t=null,e=null;return{promise:new Promise((a,n)=>{t=a,e=n}),resolve:t,reject:e}}function Lf(t){let{promise:e,resolve:r}=PF();return{promise:e,middleware:()=>n=>o=>{n(o),t(o)&&r(o)}}}function wF({definition:t,engine:e,props:r}){return"build"in t?t.build(e):t.buildWithProps(e,r)}function Qf({definitionsMap:t,engine:e,propsMap:r}){return $l(t,(a,n)=>wF({definition:a,engine:e,props:r==null?void 0:r[n]}))}function Bf({searchAction:t,controllers:e}){return{controllers:$l(e,r=>({state:Nr(r.state)})),searchAction:Nr(t)}}function Wl(t,e){let r=function(...a){return t(...a)};for(let[a,n]of Object.entries(e))r[a]=n;return r}async function EF({config:t,environment:e,event:r,listenerManager:a}){let{url:n,token:o,mode:i}=t;i!=="disabled"&&(a.call(r),e.send(n,o,r))}var IF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function kF(t){return typeof t=="string"&&IF.test(t)}function OF(t){let e="visitorId";return{getClientId:()=>{let r=t.get(),a=r.storage,n=a.getItem(e),o=n&&kF(n)?n:r.generateUUID();return a.setItem(e,o),o},clear:()=>{t.get().storage.removeItem(e)}}}var jf="0.6.8";function qF(t){let{trackingId:e}=t;return{trackingId:e}}function TF(){return`relay@${jf}`}function Uf(t,e,r,a){let{getReferrer:n,getLocation:o,getUserAgent:i}=r,s=qF(e),c=a.getClientId();return Object.freeze({type:t,config:s,ts:Date.now(),source:TF(),clientId:c,userAgent:i(),referrer:n(),location:o()})}function DF(t,e,r,a,n){return{...e,meta:Uf(t,r,a,n)}}var VF="*";function NF(){let t=[];function e({type:c,callback:u}){return t.findIndex(l=>l.type===c&&l.callback===u)}function r(c,u){return c.type==="*"||u===c.type}function a(c){return e(c)<0&&t.push(c),()=>s(c.type,c.callback)}function n(c){t.forEach(u=>{if(r(u,c.meta.type))try{u.callback(c)}catch(l){console.error(l)}})}function o(c){if(c===VF)t.length=0;else for(let u=t.length-1;u>=0;u--)t[u].type===c&&t.splice(u,1)}function i(c){let u=e(c);u>=0&&t.splice(u,1)}function s(c,u){u?i({type:c,callback:u}):o(c)}return{add:a,call:n,remove:s}}function _f({url:t,token:e,trackingId:r,...a}){return Object.freeze({url:t,token:e,trackingId:r,...!!a.mode&&{mode:a.mode}})}function MF(t){let e=_f(t);return{get:()=>e,update:r=>{e=_f({...e,...r})}}}function LF(){let t=typeof window!="undefined";return{sendMessage(e){t&&window.postMessage(e,"*")}}}var Hl=QF();function QF(){let t="coveo_",e=r=>{let a=r.split(".").slice(-2);return a.length==2?a.join("."):""};return{getItem(r){let a=`${t}${r}=`,n=document.cookie.split(";");for(let o of n){let i=o.replace(/^\s+/,"");if(i.lastIndexOf(a,0)===0)return i.substring(a.length,i.length)}return null},setItem(r,a,n){let o=e(window.location.hostname),i=`;expires=${new Date(new Date().getTime()+n).toUTCString()}`,s=o?`;domain=${o}`:"";document.cookie=`${t}${r}=${a}${i}${s};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function BF(){return{getItem(t){return Hl.getItem(t)||localStorage.getItem(t)},removeItem(t){Hl.removeItem(t),localStorage.removeItem(t)},setItem(t,e){let r=31556952e3;localStorage.setItem(t,e),Hl.setItem(t,e,r)}}}async function zl(t,e){return fetch(t,e).catch(r=>{throw new Error(`${r.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:r})})}function jF(){let t=document.referrer;return t===""?null:t}function UF(){return{runtime:"browser",fetch:(t,e)=>zl(t,e),send:async(t,e,r)=>{let a=navigator.sendBeacon(`${t}?access_token=${e}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(LF().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:t,token:e}),!a)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>jF(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:BF()}}function $f(){return{getItem(){return null},removeItem(){},setItem(){}}}function _F(){return{runtime:"node",fetch:(t,e)=>zl(t,e),send:async(t,e,r)=>{let a={"Content-Type":"application/json",Authorization:`Bearer ${e}`};zl(t,{method:"POST",body:JSON.stringify([r]),headers:a})},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:$f()}}function $F(){return WF()?UF():_F()}function WF(){try{return typeof window=="object"}catch{return!1}}function HF(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:$f()}}function zF(t){return t.get().mode=="disabled"?HF():$F()}function GF(t){return{get:()=>Object.freeze(zF(t))}}function Wf(t){let e=MF(t),r=NF(),a=GF(e),n=OF(a);return{emit:(o,i)=>{let s=e.get(),c=a.get(),u=DF(o,i,s,c,n);return EF({config:s,environment:c,event:u,listenerManager:r})},getMeta:o=>Uf(o,e.get(),a.get(),n),on:(o,i)=>r.add({type:o,callback:i}),off:(o,i)=>r.remove(o,i),updateConfig:o=>e.update(o),version:jf,clearStorage:()=>{n.clear()}}}function Tt(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r}function x(t,e,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?o(l.value):n(l.value).then(s,c)}u((a=a.apply(t,e||[])).next())})}var ne;(function(t){t.search="search",t.click="click",t.custom="custom",t.view="view",t.collect="collect"})(ne||(ne={}));function YF(){return typeof window!="undefined"}function Gl(){return typeof navigator!="undefined"}function en(){return typeof document!="undefined"}function Yl(){try{return typeof localStorage!="undefined"}catch{return!1}}function KF(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function Hf(){return Gl()&&navigator.cookieEnabled}var JF=[ne.click,ne.custom,ne.search,ne.view],XF=(t,e)=>JF.indexOf(t)!==-1?Object.assign({language:en()?document.documentElement.lang:"unknown",userAgent:Gl()?navigator.userAgent:"unknown"},e):e,tn=class{static set(e,r,a){var n,o,i,s;a&&(o=new Date,o.setTime(o.getTime()+a)),s=window.location.hostname,s.indexOf(".")===-1?zf(e,r,o):(i=s.split("."),n=i[i.length-2]+"."+i[i.length-1],zf(e,r,o,n))}static get(e){for(var r=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(e){tn.set(e,"",-1)}};function zf(t,e,r,a){document.cookie=`${t}=${e}`+(r?`;expires=${r.toUTCString()}`:"")+(a?`;domain=${a}`:"")+";path=/;SameSite=Lax"}function ZF(){return Yl()?localStorage:Hf()?new Mr:KF()?sessionStorage:new rn}var Mr=class{getItem(e){return tn.get(`${Mr.prefix}${e}`)}removeItem(e){tn.erase(`${Mr.prefix}${e}`)}setItem(e,r,a){tn.set(`${Mr.prefix}${e}`,r,a)}};Mr.prefix="coveo_";var Gf=class{constructor(){this.cookieStorage=new Mr}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,r){localStorage.setItem(e,r),this.cookieStorage.setItem(e,r,31556926e3)}},rn=class{getItem(e){return null}removeItem(e){}setItem(e,r){}},ci="__coveo.analytics.history",Yf=20,Kf=1e3*60,Jf=75,ui=class{constructor(e){this.store=e||ZF()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])}addElementAsync(e){return x(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return x(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(ci);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return x(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(ci);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(ci,JSON.stringify(e.slice(0,Yf)))}catch{}}clear(){try{this.store.removeItem(ci)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((a,n)=>(n.internalTime||0)-(a.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Jf)),e}isValidEntry(e){let r=this.getMostRecentElement();return r&&r.value==e.value?(e.internalTime||0)-(r.internalTime||0)>Kf:!0}stripInternalTime(e){return Array.isArray(e)?e.map(r=>{let{name:a,time:n,value:o}=r;return{name:a,time:n,value:o}}):[]}stripEmptyQuery(e){let{name:r,time:a,value:n}=e;return r&&typeof n=="string"&&r.toLowerCase()==="query"&&n.trim()===""?{name:r,time:a}:e}stripEmptyQueries(e){return e.map(r=>this.stripEmptyQuery(r))}},Xf=Object.freeze({__proto__:null,HistoryStore:ui,MAX_NUMBER_OF_HISTORY_ELEMENTS:Yf,MAX_VALUE_SIZE:Jf,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Kf,STORE_KEY:ci,default:ui}),eb=(t,e)=>x(void 0,void 0,void 0,function*(){return t===ne.view?(yield tb(e.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},e)):e}),tb=t=>x(void 0,void 0,void 0,function*(){let e=new ui,r={name:"PageView",value:t,time:new Date().toISOString()};yield e.addElementAsync(r)}),us,rb=new Uint8Array(16);function ab(){if(!us&&(us=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!us))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return us(rb)}var nb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ls(t){return typeof t=="string"&&nb.test(t)}var Te=[];for(let t=0;t<256;++t)Te.push((t+256).toString(16).slice(1));function Zf(t,e=0){return(Te[t[e+0]]+Te[t[e+1]]+Te[t[e+2]]+Te[t[e+3]]+"-"+Te[t[e+4]]+Te[t[e+5]]+"-"+Te[t[e+6]]+Te[t[e+7]]+"-"+Te[t[e+8]]+Te[t[e+9]]+"-"+Te[t[e+10]]+Te[t[e+11]]+Te[t[e+12]]+Te[t[e+13]]+Te[t[e+14]]+Te[t[e+15]]).toLowerCase()}function ob(t){if(!ls(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function ib(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var sb="6ba7b810-9dad-11d1-80b4-00c04fd430c8",cb="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ub(t,e,r){function a(n,o,i,s){var c;if(typeof n=="string"&&(n=ib(n)),typeof o=="string"&&(o=ob(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+n.length);if(u.set(o),u.set(n,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=u[l];return i}return Zf(u)}try{a.name=t}catch{}return a.DNS=sb,a.URL=cb,a}var lb=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),em={randomUUID:lb};function Sa(t,e,r){if(em.randomUUID&&!e&&!t)return em.randomUUID();t=t||{};let a=t.random||(t.rng||ab)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){r=r||0;for(let n=0;n<16;++n)e[r+n]=a[n];return e}return Zf(a)}function db(t,e,r,a){switch(t){case 0:return e&r^~e&a;case 1:return e^r^a;case 2:return e&r^e&a^r&a;case 3:return e^r^a}}function Kl(t,e){return t<<e|t>>>32-e}function pb(t){let e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){let i=unescape(encodeURIComponent(t));t=[];for(let s=0;s<i.length;++s)t.push(i.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);let a=t.length/4+2,n=Math.ceil(a/16),o=new Array(n);for(let i=0;i<n;++i){let s=new Uint32Array(16);for(let c=0;c<16;++c)s[c]=t[i*64+c*4]<<24|t[i*64+c*4+1]<<16|t[i*64+c*4+2]<<8|t[i*64+c*4+3];o[i]=s}o[n-1][14]=(t.length-1)*8/Math.pow(2,32),o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=(t.length-1)*8&4294967295;for(let i=0;i<n;++i){let s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=o[i][p];for(let p=16;p<80;++p)s[p]=Kl(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let c=r[0],u=r[1],l=r[2],d=r[3],f=r[4];for(let p=0;p<80;++p){let m=Math.floor(p/20),S=Kl(c,5)+db(m,u,l,d)+f+e[m]+s[p]>>>0;f=d,d=l,l=Kl(u,30)>>>0,u=c,c=S}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var fb=ub("v5",80,pb),tm=fb,rm="2.28.23",am=t=>`${t.protocol}//${t.hostname}${t.pathname.indexOf("/")===0?t.pathname:`/${t.pathname}`}${t.search}`,li={pageview:"pageview",event:"event"},Jl=class{constructor({client:e,uuidGenerator:r=Sa}){this.client=e,this.uuidGenerator=r}},nm=class extends Jl{constructor({client:e,uuidGenerator:r=Sa}){super({client:e,uuidGenerator:r});this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=am(window.location),this.lastReferrer=en()?document.referrer:"",this.addHooks()}getApi(e){switch(e){case"setAction":return this.setAction;default:return null}}setAction(e,r){this.action=e,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,r){return Object.assign({hitType:e},this.getNextValues(e,r))}updateLocationInformation(e,r){this.updateLocationForNextPageView(e,r)}getDefaultContextInformation(e){let r={title:en()?document.title:"",encoding:en()?document.characterSet:"UTF-8"},a={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},o={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},o),a),n),r)}updateLocationForNextPageView(e,r){let{pageViewId:a,referrer:n,location:o}=this.getNextValues(e,r);this.lastReferrer=n,this.pageViewId=a,this.currentLocation=o,e===li.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,r){return{pageViewId:e===li.pageview?this.nextPageViewId:this.pageViewId,referrer:e===li.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===li.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(e){if(e.page){let r=n=>n.replace(/^\/?(.*)$/,"/$1");return`${(n=>n.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(e.page)}`}else return am(window.location)}},Dt=class{constructor(e,r){if(!ls(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>Dt.expirationTime}validate(e,r){return!this.expired&&this.matchReferrer(e,r)}matchReferrer(e,r){try{let a=new URL(e);return r.some(n=>new RegExp(n.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(a.host))}catch{return!1}}static fromString(e){let r=e.split(".");if(r.length!==2)return null;let[a,n]=r;if(a.length!==32||isNaN(parseInt(n)))return null;let o=a.substring(0,8)+"-"+a.substring(8,12)+"-"+a.substring(12,16)+"-"+a.substring(16,20)+"-"+a.substring(20,32);return ls(o)?new Dt(o,Number.parseInt(n)*1e3):null}};Dt.cvo_cid="cvo_cid";Dt.expirationTime=120;var om=class extends Jl{constructor({client:e,uuidGenerator:r=Sa}){super({client:e,uuidGenerator:r})}getApi(e){switch(e){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(e){return x(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(e),a=yield this.client.getCurrentVisitorId();return r.searchParams.set(Dt.cvo_cid,new Dt(a,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(e){this.client.setAcceptedLinkReferrers(e)}};om.Id="link";var tt=Object.keys;function ds(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}var Xl={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},mb=tt(Xl).map(t=>Xl[t]),gb=[...mb].join("|"),hb=new RegExp(`^(${gb}$)`),Sb={svcAction:"svc_action",svcActionData:"svc_action_data"},yb=t=>tt(t).filter(e=>t[e]!==void 0).reduce((e,r)=>{let a=Xl[r]||r;return Object.assign(Object.assign({},e),{[a]:t[r]})},{}),Cb=t=>hb.test(t),xb=[Cb],im={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},sm={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Ne={action:"pa",list:"pal",listSource:"pls"},ps={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},vb=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Zl={id:"quoteId",affiliation:"quoteAffiliation"},ed={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Fb={add:Ne,bookmark_add:Ne,bookmark_remove:Ne,click:Ne,checkout:Ne,checkout_option:Ne,detail:Ne,impression:Ne,remove:Ne,refund:Object.assign(Object.assign({},Ne),ps),purchase:Object.assign(Object.assign({},Ne),ps),quickview:Ne,quote:Object.assign(Object.assign({},Ne),Zl),review:Object.assign(Object.assign({},Ne),ed)},bb=tt(im).map(t=>im[t]),Rb=tt(sm).map(t=>sm[t]),Ab=tt(Ne).map(t=>Ne[t]),Pb=tt(ps).map(t=>ps[t]),wb=tt(ed).map(t=>ed[t]),Eb=tt(Zl).map(t=>Zl[t]),Ib=[...bb,"custom"].join("|"),kb=[...Rb,"custom"].join("|"),cm="(pr[0-9]+)",um="(il[0-9]+pi[0-9]+)",Ob=new RegExp(`^${cm}(${Ib})$`),qb=new RegExp(`^(${um}(${kb}))|(il[0-9]+nm)$`),Tb=new RegExp(`^(${Ab.join("|")})$`),Db=new RegExp(`^(${Pb.join("|")})$`),Vb=new RegExp(`^${cm}custom$`),Nb=new RegExp(`^${um}custom$`),Mb=new RegExp(`^(${[...vb,...wb,...Eb].join("|")})$`),Lb=t=>Ob.test(t),Qb=t=>qb.test(t),Bb=t=>Tb.test(t),jb=t=>Db.test(t),Ub=t=>Mb.test(t),_b=[Qb,Lb,Bb,jb,Ub],$b=[Vb,Nb],Wb={anonymizeIp:"aip"},Hb={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},zb={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},Gb=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],Yb=Object.assign(Object.assign(Object.assign(Object.assign({},Wb),Hb),zb),Gb.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:e}),{})),td=Object.assign(Object.assign({},Yb),Sb),Kb=t=>{let e=!!t.action&&Fb[t.action]||{};return tt(t).reduce((r,a)=>{let n=e[a]||td[a]||a;return Object.assign(Object.assign({},r),{[n]:t[a]})},{})},Jb=tt(td).map(t=>td[t]),Xb=t=>Jb.indexOf(t)!==-1,Zb=t=>t==="custom",eR=t=>[..._b,...xb,Xb,Zb].some(e=>e(t)),tR=t=>tt(t).reduce((e,r)=>{let a=rR(r);return a?Object.assign(Object.assign({},e),aR(a,t[r])):Object.assign(Object.assign({},e),{[r]:t[r]})},{}),rR=t=>{let e;return[...$b].every(r=>{var a;return e=(a=r.exec(t))===null||a===void 0?void 0:a[1],!Boolean(e)}),e},aR=(t,e)=>tt(e).reduce((r,a)=>Object.assign(Object.assign({},r),{[`${t}${a}`]:e[a]}),{}),lm=class{constructor(e){this.opts=e}sendEvent(e,r){return x(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:a,preprocessRequest:n}=this.opts,o=yield this.getQueryParamsForEventType(e),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${a}/analytics/${e}?${o}`,r,n),c=this.encodeForEventType(e,s),u=new Blob([c],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,u)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,r,a){return x(this,void 0,void 0,function*(){let n=e,o=r;if(a){let i=yield a({url:e,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:c}=i;n=s||e;try{o=JSON.parse(c)}catch(u){console.error("Unable to process the request body as a JSON string",u)}}return{payload:o,url:n}})}encodeForEventType(e,r){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(e){return x(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:a}=this.opts,n=yield a.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(e)?`access_token=${r}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(o=>!!o).join("&")})}isEventTypeLegacy(e){return[ne.click,ne.custom,ne.search,ne.view].indexOf(e)!==-1}encodeForLegacyType(e,r){return`${e}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter(r=>!!e[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(e[r]))}`).join("&")}encodeValue(e){return typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:JSON.stringify(e)}},dm=class{sendEvent(e,r){return x(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return x(this,void 0,void 0,function*(){return Promise.resolve()})}},pm=window.fetch,rd=class{constructor(e){this.opts=e}sendEvent(e,r){return x(this,void 0,void 0,function*(){let{baseUrl:a,visitorIdProvider:n,preprocessRequest:o}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",s={url:`${a}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},c=Object.assign(Object.assign({},s),o?yield o(s,"analyticsFetch"):{}),{url:u}=c,l=Tt(c,["url"]),d=yield pm(u,l);if(d.ok){let f=yield d.json();return f.visitorId&&n.setCurrentVisitorId(f.visitorId),f}else{try{d.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,d,r),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return x(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts,r=`${e}/analytics/visit`;yield pm(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return[ne.click,ne.custom,ne.search,ne.view].indexOf(e)!==-1}getVisitorIdParam(){return x(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,r=yield e.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},fm=class{constructor(e,r){Yl()&&Hf()?this.storage=new Gf:Yl()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new rn),this.client=new rd(e),this.beaconClient=new lm(e),window.addEventListener("beforeunload",()=>{let a=r();for(let{eventType:n,payload:o}of a)this.beaconClient.sendEvent(n,o)})}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},mm=class{constructor(e,r){this.storage=r||new rn,this.client=new rd(e)}getClientDependingOnEventType(e){return this.client}},gm=class{constructor(){this.storage=new rn,this.client=new dm}getClientDependingOnEventType(e){return this.client}},nR="xx",oR=t=>(t==null?void 0:t.startsWith(nR))||!1,iR=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function sR(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var cR=["1",1,"yes",!0];function di(){return Gl()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(t=>cR.indexOf(t)!==-1)}var hm="v15",Sm={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function uR(t=Sm.default,e=hm,r=!1){if(t=t.replace(/\/$/,""),r)return`${t}/${e}`;let a=t.endsWith("/rest")||t.endsWith("/rest/ua");return`${t}${a?"":"/rest"}/${e}`}var lR="38824e1f-37f5-42d3-8372-a4b8fa9df946",je=class{get defaultOptions(){return{endpoint:Sm.default,isCustomEndpoint:!1,token:"",version:hm,beforeSendHooks:[],afterSendHooks:[]}}get version(){return rm}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[eb,XF].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),di()&&(this.clear(),this.runtime.storage=new rn),this.addEventTypeMapping(ne.view,{newEventType:ne.view,addClientIdParameter:!0}),this.addEventTypeMapping(ne.click,{newEventType:ne.click,addClientIdParameter:!0}),this.addEventTypeMapping(ne.custom,{newEventType:ne.custom,addClientIdParameter:!0}),this.addEventTypeMapping(ne.search,{newEventType:ne.search,addClientIdParameter:!0})}initRuntime(e){return YF()&&en()?new fm(e,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(sR()&&console.warn(iR),new mm(e))}get storage(){return this.runtime.storage}determineVisitorId(){return x(this,void 0,void 0,function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Sa()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),Sa()}})}getCurrentVisitorId(){return x(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return x(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,r){return x(this,void 0,void 0,function*(){if(ls(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(tm(e,tm(r,lR)))}})}getParameters(e,...r){return x(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...r)})}getPayload(e,...r){return x(this,void 0,void 0,function*(){let a=yield this.resolveParameters(e,...r);return yield this.resolvePayloadForParameters(e,a)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Sa()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(di())return null;try{let r=new URL(e).searchParams.get(Dt.cvo_cid);if(r==null)return null;let a=Dt.fromString(r);return!a||!en()||!a.validate(document.referrer,this.acceptedLinkReferrers)?null:a.clientId}catch{}return null}resolveParameters(e,...r){return x(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:a=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:o=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[e]||{};return yield[p=>a.length>0?this.parseVariableArgumentsPayload(a,p):p[0],p=>x(this,void 0,void 0,function*(){return Object.assign(Object.assign({},p),{visitorId:n?yield this.getCurrentVisitorId():""})}),p=>x(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},p),{clientId:yield this.getCurrentVisitorId()}):p}),p=>o?this.ensureAnonymousUserWhenUsingApiKey(p):p,p=>this.beforeSendHooks.reduce((m,S)=>x(this,void 0,void 0,function*(){let v=yield m;return yield S(e,v)}),p)].reduce((p,m)=>x(this,void 0,void 0,function*(){let S=yield p;return yield m(S)}),Promise.resolve(r))})}resolvePayloadForParameters(e,r){return x(this,void 0,void 0,function*(){let{usesMeasurementProtocol:a=!1}=this.eventTypeMapping[e]||{};return yield[d=>this.setTrackingIdIfTrackingIdNotPresent(d),d=>this.removeEmptyPayloadValues(d,e),d=>this.validateParams(d,e),d=>a?Kb(d):d,d=>a?this.removeUnknownParameters(d):d,d=>a?this.processCustomParameters(d):this.mapCustomParametersToCustomData(d)].reduce((d,f)=>x(this,void 0,void 0,function*(){let p=yield d;return yield f(p)}),Promise.resolve(r))})}makeEvent(e,...r){return x(this,void 0,void 0,function*(){let{newEventType:a=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...r),o=yield this.resolvePayloadForParameters(e,n);return{eventType:a,payload:o,log:i=>x(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:a,payload:Object.assign(Object.assign({},o),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(e,Object.assign(Object.assign({},n),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e,...r){return x(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...r)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return x(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:r,payload:a}=e;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,a)}})}clear(){this.storage.removeItem("visitorId"),new ui().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return x(this,void 0,void 0,function*(){return this.makeEvent(ne.search,e)})}sendSearchEvent(e){var{searchQueryUid:r}=e,a=Tt(e,["searchQueryUid"]);return x(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(a)).log({searchQueryUid:r})})}makeClickEvent(e){return x(this,void 0,void 0,function*(){return this.makeEvent(ne.click,e)})}sendClickEvent(e){var{searchQueryUid:r}=e,a=Tt(e,["searchQueryUid"]);return x(this,void 0,void 0,function*(){return(yield this.makeClickEvent(a)).log({searchQueryUid:r})})}makeCustomEvent(e){return x(this,void 0,void 0,function*(){return this.makeEvent(ne.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:r}=e,a=Tt(e,["lastSearchQueryUid"]);return x(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(a)).log({lastSearchQueryUid:r})})}makeViewEvent(e){return x(this,void 0,void 0,function*(){return this.makeEvent(ne.view,e)})}sendViewEvent(e){return x(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return x(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return x(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,r){this.eventTypeMapping[e]=r}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(r=>typeof r=="string"))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,r){let a={};for(let n=0,o=r.length;n<o;n++){let i=r[n];if(typeof i=="string")a[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},a),i)}return a}isKeyAllowedEmpty(e,r){return({[ne.search]:["queryText"]}[e]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(e,r){let a=n=>typeof n!="undefined"&&n!==null&&n!=="";return Object.keys(e).filter(n=>this.isKeyAllowedEmpty(r,n)||a(e[n])).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:e[o]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(a=>{if(eR(a))return!0;console.log(a,"is not processed by coveoua")}).reduce((a,n)=>Object.assign(Object.assign({},a),{[n]:e[n]}),{})}processCustomParameters(e){let{custom:r}=e,a=Tt(e,["custom"]),n={};r&&ds(r)&&(n=this.lowercaseKeys(r));let o=tR(a);return Object.assign(Object.assign({},n),o)}mapCustomParametersToCustomData(e){let{custom:r}=e,a=Tt(e,["custom"]);if(r&&ds(r)){let n=this.lowercaseKeys(r);return Object.assign(Object.assign({},a),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let r=Object.keys(e),a={};return r.forEach(n=>{a[n.toLowerCase()]=e[n]}),a}validateParams(e,r){let{anonymizeIp:a}=e,n=Tt(e,["anonymizeIp"]);return a!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${a}`.toLowerCase())==-1&&(n.anonymizeIp=1),(r==ne.view||r==ne.click||r==ne.search||r==ne.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),r==ne.view&&(n.location=this.limit(n.location,128)),(r=="pageview"||r=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:r}=e,a=Tt(e,["userId"]);return oR(this.options.token)&&!r?(a.userId="anonymous",a):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:r}=e,a=Tt(e,["trackingId"]);return r?e:(a.hasOwnProperty("custom")&&ds(a.custom)&&(a.custom.hasOwnProperty("context_website")||a.custom.hasOwnProperty("siteName"))&&(a.trackingId=a.custom.context_website||a.custom.siteName),a.hasOwnProperty("customData")&&ds(a.customData)&&(a.customData.hasOwnProperty("context_website")||a.customData.hasOwnProperty("siteName"))&&(a.trackingId=a.customData.context_website||a.customData.siteName),a)}limit(e,r){return typeof e!="string"?e:e.substring(0,r)}get baseUrl(){return uR(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},De;(function(t){t.contextChanged="contextChanged",t.expandToFullUI="expandToFullUI",t.openUserActions="openUserActions",t.showPrecedingSessions="showPrecedingSessions",t.showFollowingSessions="showFollowingSessions",t.clickViewedDocument="clickViewedDocument",t.clickPageView="clickPageView",t.createArticle="createArticle"})(De||(De={}));var g;(function(t){t.interfaceLoad="interfaceLoad",t.interfaceChange="interfaceChange",t.didyoumeanAutomatic="didyoumeanAutomatic",t.didyoumeanClick="didyoumeanClick",t.resultsSort="resultsSort",t.searchboxSubmit="searchboxSubmit",t.searchboxClear="searchboxClear",t.searchboxAsYouType="searchboxAsYouType",t.breadcrumbFacet="breadcrumbFacet",t.breadcrumbResetAll="breadcrumbResetAll",t.documentQuickview="documentQuickview",t.documentOpen="documentOpen",t.omniboxAnalytics="omniboxAnalytics",t.omniboxFromLink="omniboxFromLink",t.searchFromLink="searchFromLink",t.triggerNotify="notify",t.triggerExecute="execute",t.triggerQuery="query",t.undoTriggerQuery="undoQuery",t.triggerRedirect="redirect",t.pagerResize="pagerResize",t.pagerNumber="pagerNumber",t.pagerNext="pagerNext",t.pagerPrevious="pagerPrevious",t.pagerScrolling="pagerScrolling",t.staticFilterClearAll="staticFilterClearAll",t.staticFilterSelect="staticFilterSelect",t.staticFilterDeselect="staticFilterDeselect",t.facetClearAll="facetClearAll",t.facetSearch="facetSearch",t.facetSelect="facetSelect",t.facetSelectAll="facetSelectAll",t.facetDeselect="facetDeselect",t.facetExclude="facetExclude",t.facetUnexclude="facetUnexclude",t.facetUpdateSort="facetUpdateSort",t.facetShowMore="showMoreFacetResults",t.facetShowLess="showLessFacetResults",t.queryError="query",t.queryErrorBack="errorBack",t.queryErrorClear="errorClearQuery",t.queryErrorRetry="errorRetry",t.recommendation="recommendation",t.recommendationInterfaceLoad="recommendationInterfaceLoad",t.recommendationOpen="recommendationOpen",t.likeSmartSnippet="likeSmartSnippet",t.dislikeSmartSnippet="dislikeSmartSnippet",t.expandSmartSnippet="expandSmartSnippet",t.collapseSmartSnippet="collapseSmartSnippet",t.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",t.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",t.sendSmartSnippetReason="sendSmartSnippetReason",t.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",t.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",t.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",t.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",t.openSmartSnippetSource="openSmartSnippetSource",t.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",t.openSmartSnippetInlineLink="openSmartSnippetInlineLink",t.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",t.recentQueryClick="recentQueriesClick",t.clearRecentQueries="clearRecentQueries",t.recentResultClick="recentResultClick",t.clearRecentResults="clearRecentResults",t.noResultsBack="noResultsBack",t.showMoreFoldedResults="showMoreFoldedResults",t.showLessFoldedResults="showLessFoldedResults",t.copyToClipboard="copyToClipboard",t.caseSendEmail="Case.SendEmail",t.feedItemTextPost="FeedItem.TextPost",t.caseAttach="caseAttach",t.caseDetach="caseDetach",t.retryGeneratedAnswer="retryGeneratedAnswer",t.likeGeneratedAnswer="likeGeneratedAnswer",t.dislikeGeneratedAnswer="dislikeGeneratedAnswer",t.openGeneratedAnswerSource="openGeneratedAnswerSource",t.generatedAnswerStreamEnd="generatedAnswerStreamEnd",t.generatedAnswerSourceHover="generatedAnswerSourceHover",t.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",t.generatedAnswerHideAnswers="generatedAnswerHideAnswers",t.generatedAnswerShowAnswers="generatedAnswerShowAnswers",t.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",t.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(g||(g={}));var ad={[g.triggerNotify]:"queryPipelineTriggers",[g.triggerExecute]:"queryPipelineTriggers",[g.triggerQuery]:"queryPipelineTriggers",[g.triggerRedirect]:"queryPipelineTriggers",[g.queryError]:"errors",[g.queryErrorBack]:"errors",[g.queryErrorClear]:"errors",[g.queryErrorRetry]:"errors",[g.pagerNext]:"getMoreResults",[g.pagerPrevious]:"getMoreResults",[g.pagerNumber]:"getMoreResults",[g.pagerResize]:"getMoreResults",[g.pagerScrolling]:"getMoreResults",[g.facetSearch]:"facet",[g.facetShowLess]:"facet",[g.facetShowMore]:"facet",[g.recommendation]:"recommendation",[g.likeSmartSnippet]:"smartSnippet",[g.dislikeSmartSnippet]:"smartSnippet",[g.expandSmartSnippet]:"smartSnippet",[g.collapseSmartSnippet]:"smartSnippet",[g.openSmartSnippetFeedbackModal]:"smartSnippet",[g.closeSmartSnippetFeedbackModal]:"smartSnippet",[g.sendSmartSnippetReason]:"smartSnippet",[g.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[g.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[g.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[g.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[g.clearRecentQueries]:"recentQueries",[g.recentResultClick]:"recentlyClickedDocuments",[g.clearRecentResults]:"recentlyClickedDocuments",[g.showLessFoldedResults]:"folding",[g.caseDetach]:"case",[g.likeGeneratedAnswer]:"generatedAnswer",[g.dislikeGeneratedAnswer]:"generatedAnswer",[g.openGeneratedAnswerSource]:"generatedAnswer",[g.generatedAnswerStreamEnd]:"generatedAnswer",[g.generatedAnswerSourceHover]:"generatedAnswer",[g.generatedAnswerCopyToClipboard]:"generatedAnswer",[g.generatedAnswerHideAnswers]:"generatedAnswer",[g.generatedAnswerShowAnswers]:"generatedAnswer",[g.generatedAnswerFeedbackSubmit]:"generatedAnswer",[De.expandToFullUI]:"interface",[De.openUserActions]:"User Actions",[De.showPrecedingSessions]:"User Actions",[De.showFollowingSessions]:"User Actions",[De.clickViewedDocument]:"User Actions",[De.clickPageView]:"User Actions",[De.createArticle]:"createArticle"},ya=class{constructor(){this.runtime=new gm,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(ne.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(ne.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(ne.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(ne.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return rm}};function dR(t){let e="";return t.filter(r=>{let a=r!==e;return e=r,a})}function pR(t){return t.map(e=>e.replace(/;/g,""))}function ym(t){let e=256,r=t.join(";");return r.length<=e?r:ym(t.slice(1))}var Cm=t=>{let e=pR(t),r=dR(e);return ym(r)};function xm(t){let e=typeof t.partialQueries=="string"?t.partialQueries:Cm(t.partialQueries),r=typeof t.suggestions=="string"?t.suggestions:Cm(t.suggestions);return Object.assign(Object.assign({},t),{partialQueries:e,suggestions:r})}var Ca=class{constructor(e,r){this.opts=e,this.provider=r;let a=e.enableAnalytics===!1||di();this.coveoAnalyticsClient=a?new ya:new je(e)}disable(){this.coveoAnalyticsClient instanceof je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new ya}enable(){this.coveoAnalyticsClient=new je(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(g.interfaceLoad)}logInterfaceLoad(){return x(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(g.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return x(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(g.recommendation)}logRecommendation(){return x(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,r){return this.makeClickEvent(g.recommendationOpen,e,r)}logRecommendationOpen(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(g.staticFilterClearAll,e)}logStaticFilterClearAll(e){return x(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(g.staticFilterSelect,e)}logStaticFilterSelect(e){return x(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(g.staticFilterDeselect,e)}logStaticFilterDeselect(e){return x(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(g.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return x(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(g.interfaceChange,e)}logInterfaceChange(e){return x(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(g.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return x(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(g.didyoumeanClick)}logDidYouMeanClick(){return x(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(g.resultsSort,e)}logResultsSort(e){return x(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(g.searchboxSubmit)}logSearchboxSubmit(){return x(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(g.searchboxClear)}logSearchboxClear(){return x(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(g.searchboxAsYouType)}logSearchboxAsYouType(){return x(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(g.breadcrumbFacet,e)}logBreadcrumbFacet(e){return x(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(g.breadcrumbResetAll)}logBreadcrumbResetAll(){return x(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,r){return this.makeClickEvent(g.documentQuickview,e,r)}logDocumentQuickview(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,r){return this.makeClickEvent(g.documentOpen,e,r)}logDocumentOpen(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(g.omniboxAnalytics,xm(e))}logOmniboxAnalytics(e){return x(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(g.omniboxFromLink,xm(e))}logOmniboxFromLink(e){return x(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(g.searchFromLink)}logSearchFromLink(){return x(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(g.triggerNotify,e)}logTriggerNotify(e){return x(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(g.triggerExecute,e)}logTriggerExecute(e){return x(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(g.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return x(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(g.undoTriggerQuery,e)}logUndoTriggerQuery(e){return x(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(g.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return x(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(g.pagerResize,e)}logPagerResize(e){return x(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(g.pagerNumber,e)}logPagerNumber(e){return x(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(g.pagerNext,e)}logPagerNext(e){return x(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(g.pagerPrevious,e)}logPagerPrevious(e){return x(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(g.pagerScrolling)}logPagerScrolling(){return x(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(g.facetClearAll,e)}logFacetClearAll(e){return x(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(g.facetSearch,e)}logFacetSearch(e){return x(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(g.facetSelect,e)}logFacetSelect(e){return x(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(g.facetDeselect,e)}logFacetDeselect(e){return x(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(g.facetExclude,e)}logFacetExclude(e){return x(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(g.facetUnexclude,e)}logFacetUnexclude(e){return x(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(g.facetSelectAll,e)}logFacetSelectAll(e){return x(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(g.facetUpdateSort,e)}logFacetUpdateSort(e){return x(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(g.facetShowMore,e)}logFacetShowMore(e){return x(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(g.facetShowLess,e)}logFacetShowLess(e){return x(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(g.queryError,e)}logQueryError(e){return x(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return x(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(g.queryErrorBack);return{description:e.description,log:()=>x(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(g.queryErrorBack)})}})}logQueryErrorBack(){return x(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return x(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(g.queryErrorRetry);return{description:e.description,log:()=>x(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(g.queryErrorRetry)})}})}logQueryErrorRetry(){return x(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return x(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(g.queryErrorClear);return{description:e.description,log:()=>x(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(g.queryErrorClear)})}})}logQueryErrorClear(){return x(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(g.likeSmartSnippet)}logLikeSmartSnippet(){return x(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(g.dislikeSmartSnippet)}logDislikeSmartSnippet(){return x(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(g.expandSmartSnippet)}logExpandSmartSnippet(){return x(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(g.collapseSmartSnippet)}logCollapseSmartSnippet(){return x(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(g.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return x(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(g.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return x(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,r){return this.makeCustomEvent(g.sendSmartSnippetReason,{reason:e,details:r})}logSmartSnippetFeedbackReason(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(g.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return x(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(g.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return x(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(g.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return x(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(g.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return x(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,r){return this.makeClickEvent(g.openSmartSnippetSource,e,r)}logOpenSmartSnippetSource(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,r){return this.makeClickEvent(g.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(e,r){return this.makeClickEvent(g.copyToClipboard,e,r)}logCopyToClipboard(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,r){return this.makeClickEvent(g.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,r){return this.makeClickEvent(g.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(g.recentQueryClick)}logRecentQueryClick(){return x(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(g.clearRecentQueries)}logClearRecentQueries(){return x(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,r){return this.makeCustomEvent(g.recentResultClick,{info:e,identifier:r})}logRecentResultClick(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(g.clearRecentResults)}logClearRecentResults(){return x(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(g.noResultsBack)}logNoResultsBack(){return x(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,r){return this.makeClickEvent(g.showMoreFoldedResults,e,r)}logShowMoreFoldedResults(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(g.showLessFoldedResults)}logShowLessFoldedResults(){return x(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,r){var a;return{actionCause:r,customData:(a=e.payload)===null||a===void 0?void 0:a.customData}}makeCustomEvent(e,r,a=ad[e]){return x(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:a,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(e,r,a=ad[e]){return x(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,r,a)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,r,a){return x(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),a),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(e,r,a){return x(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,r,a)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,r){return x(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,r){return x(this,void 0,void 0,function*(){let a=yield this.getBaseSearchEventRequest(e,r),n=yield this.coveoAnalyticsClient.makeSearchEvent(a);return{description:this.makeEventDescription(n,e),log:({searchUID:o})=>n.log({searchQueryUid:o})}})}makeClickEvent(e,r,a,n){return x(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),i=yield this.coveoAnalyticsClient.makeClickEvent(o);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(e,r,a,n){return x(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,r,a,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var a,n;return x(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return x(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof je?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(g.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return x(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(g.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return x(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(g.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return x(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(g.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return x(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(g.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return x(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(g.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return x(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(g.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return x(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(g.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return x(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(g.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return x(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(g.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return x(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(g.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return x(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}},fs=Object.assign({},li),vm=Object.keys(fs).map(t=>fs[t]),pi=class extends nm{constructor({client:e,uuidGenerator:r=Sa}){super({client:e,uuidGenerator:r});this.ticket={}}getApi(e){let r=super.getApi(e);if(r!==null)return r;switch(e){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((e,...[r])=>vm.indexOf(e)!==-1?this.addSVCDataToPayload(e,r):r),this.client.registerAfterSendEventHook((e,...[r])=>(vm.indexOf(e)!==-1&&this.updateLocationInformation(e,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(fs.pageview,{newEventType:ne.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(fs.event,{newEventType:ne.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,r){var a;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,r)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys((a=this.actionData)!==null&&a!==void 0?a:{}).length>0?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},o),n),r)}getTicketPayload(){return yb(this.ticket)}};pi.Id="svc";var ms;(function(t){t.click="click",t.flowStart="flowStart"})(ms||(ms={}));var xt;(function(t){t.enterInterface="ticket_create_start",t.fieldUpdate="ticket_field_update",t.fieldSuggestionClick="ticket_classification_click",t.suggestionClick="suggestion_click",t.suggestionRate="suggestion_rate",t.nextCaseStep="ticket_next_stage",t.caseCancelled="ticket_cancel",t.caseSolved="ticket_cancel",t.caseCreated="ticket_create"})(xt||(xt={}));var gs;(function(t){t.quit="Quit",t.solved="Solved"})(gs||(gs={}));var nd=class{constructor(e,r){var a;this.options=e,this.provider=r;let n=((a=e.enableAnalytics)!==null&&a!==void 0?a:!0)&&!di();this.coveoAnalyticsClient=n?new je(e):new ya,this.svc=new pi({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new ya,this.svc=new pi({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new je(this.options),this.svc=new pi({client:this.coveoAnalyticsClient})}logEnterInterface(e){return this.svc.setAction(xt.enterInterface),this.svc.setTicket(e.ticket),this.sendFlowStartEvent()}logUpdateCaseField(e){return this.svc.setAction(xt.fieldUpdate,{fieldName:e.fieldName}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectFieldSuggestion(e){return this.svc.setAction(xt.fieldSuggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(e){return this.svc.setAction(xt.suggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logRateDocumentSuggestion(e){return this.svc.setAction(xt.suggestionRate,Object.assign({rate:e.rating},e.suggestion)),this.svc.setTicket(e.ticket),this.sendClickEvent()}logMoveToNextCaseStep(e){return this.svc.setAction(xt.nextCaseStep,{stage:e==null?void 0:e.stage}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCancelled(e){return this.svc.setAction(xt.caseCancelled,{reason:gs.quit}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseSolved(e){return this.svc.setAction(xt.caseSolved,{reason:gs.solved}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCreated(e){return this.svc.setAction(xt.caseCreated),this.svc.setTicket(e.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ms.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ms.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},fR=t=>{let e={};return t.caseContext&&Object.keys(t.caseContext).forEach(r=>{var a;let n=(a=t.caseContext)===null||a===void 0?void 0:a[r];if(n){let o=`context_${r}`;e[o]=n}}),e},U=(t,e=!0)=>{let{caseContext:r,caseId:a,caseNumber:n}=t,o=Tt(t,["caseContext","caseId","caseNumber"]),i=fR(t);return Object.assign(Object.assign(Object.assign({CaseId:a,CaseNumber:n},o),!!i.context_Case_Subject&&{CaseSubject:i.context_Case_Subject}),e&&i)},od=class{constructor(e,r){this.opts=e,this.provider=r;let a=e.enableAnalytics===!1||di();this.coveoAnalyticsClient=a?new ya:new je(e)}disable(){this.coveoAnalyticsClient instanceof je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new ya}enable(){this.coveoAnalyticsClient=new je(this.opts)}logInterfaceLoad(e){if(e){let r=U(e);return this.logSearchEvent(g.interfaceLoad,r)}return this.logSearchEvent(g.interfaceLoad)}logInterfaceChange(e){let r=U(e);return this.logSearchEvent(g.interfaceChange,r)}logStaticFilterDeselect(e){let r=U(e);return this.logSearchEvent(g.staticFilterDeselect,r)}logFetchMoreResults(e){if(e){let r=U(e);return this.logCustomEvent(g.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(g.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(e){let r=U(e);return this.logSearchEvent(g.breadcrumbFacet,r)}logBreadcrumbResetAll(e){if(e){let r=U(e);return this.logSearchEvent(g.breadcrumbResetAll,r)}return this.logSearchEvent(g.breadcrumbResetAll)}logFacetSelect(e){let r=U(e);return this.logSearchEvent(g.facetSelect,r)}logFacetExclude(e){let r=U(e);return this.logSearchEvent(g.facetExclude,r)}logFacetDeselect(e){let r=U(e);return this.logSearchEvent(g.facetDeselect,r)}logFacetUpdateSort(e){let r=U(e);return this.logSearchEvent(g.facetUpdateSort,r)}logFacetClearAll(e){let r=U(e);return this.logSearchEvent(g.facetClearAll,r)}logFacetShowMore(e){let r=U(e,!1);return this.logCustomEvent(g.facetShowMore,r)}logFacetShowLess(e){let r=U(e,!1);return this.logCustomEvent(g.facetShowLess,r)}logQueryError(e){let r=U(e,!1);return this.logCustomEvent(g.queryError,r)}logPagerNumber(e){let r=U(e,!1);return this.logCustomEvent(g.pagerNumber,r)}logPagerNext(e){let r=U(e,!1);return this.logCustomEvent(g.pagerNext,r)}logPagerPrevious(e){let r=U(e,!1);return this.logCustomEvent(g.pagerPrevious,r)}logDidYouMeanAutomatic(e){if(e){let r=U(e);return this.logSearchEvent(g.didyoumeanAutomatic,r)}return this.logSearchEvent(g.didyoumeanAutomatic)}logDidYouMeanClick(e){if(e){let r=U(e);return this.logSearchEvent(g.didyoumeanClick,r)}return this.logSearchEvent(g.didyoumeanClick)}logResultsSort(e){let r=U(e);return this.logSearchEvent(g.resultsSort,r)}logSearchboxSubmit(e){if(e){let r=U(e);return this.logSearchEvent(g.searchboxSubmit,r)}return this.logSearchEvent(g.searchboxSubmit)}logContextChanged(e){let r=U(e);return this.logSearchEvent(De.contextChanged,r)}logExpandToFullUI(e){let r=U(e);return this.logCustomEvent(De.expandToFullUI,r)}logOpenUserActions(e){let r=U(e,!1);return this.logCustomEvent(De.openUserActions,r)}logShowPrecedingSessions(e){let r=U(e,!1);return this.logCustomEvent(De.showPrecedingSessions,r)}logShowFollowingSessions(e){let r=U(e,!1);return this.logCustomEvent(De.showFollowingSessions,r)}logViewedDocumentClick(e,r){return this.logCustomEvent(De.clickViewedDocument,Object.assign(Object.assign({},U(r,!1)),{document:e}))}logPageViewClick(e,r){return this.logCustomEvent(De.clickPageView,Object.assign(Object.assign({},U(r,!1)),{pageView:e}))}logCreateArticle(e,r){return this.logCustomEvent(De.createArticle,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logDocumentOpen(e,r,a){return this.logClickEvent(g.documentOpen,e,r,a?U(a,!1):void 0)}logCopyToClipboard(e,r,a){return this.logClickEvent(g.copyToClipboard,e,r,a?U(a,!1):void 0)}logCaseSendEmail(e,r,a){return this.logClickEvent(g.caseSendEmail,e,r,a?U(a,!1):void 0)}logFeedItemTextPost(e,r,a){return this.logClickEvent(g.feedItemTextPost,e,r,a?U(a,!1):void 0)}logDocumentQuickview(e,r,a){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl};return this.logClickEvent(g.documentQuickview,e,r,a?Object.assign(Object.assign({},U(a,!1)),n):n)}logCaseAttach(e,r,a){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl,resultUriHash:e.documentUriHash};return this.logClickEvent(g.caseAttach,e,r,a?Object.assign(Object.assign({},U(a,!1)),n):n)}logCaseDetach(e,r){return this.logCustomEvent(g.caseDetach,r?Object.assign(Object.assign({},U(r,!1)),{resultUriHash:e}):{resultUriHash:e})}logLikeSmartSnippet(e){return this.logCustomEvent(g.likeSmartSnippet,e?U(e,!1):void 0)}logDislikeSmartSnippet(e){return this.logCustomEvent(g.dislikeSmartSnippet,e?U(e,!1):void 0)}logExpandSmartSnippet(e){return this.logCustomEvent(g.expandSmartSnippet,e?U(e,!1):void 0)}logCollapseSmartSnippet(e){return this.logCustomEvent(g.collapseSmartSnippet,e?U(e,!1):void 0)}logOpenSmartSnippetFeedbackModal(e){return this.logCustomEvent(g.openSmartSnippetFeedbackModal,e?U(e,!1):void 0)}logCloseSmartSnippetFeedbackModal(e){return this.logCustomEvent(g.closeSmartSnippetFeedbackModal,e?U(e,!1):void 0)}logSmartSnippetFeedbackReason(e,r,a){return this.logCustomEvent(g.sendSmartSnippetReason,a?Object.assign(Object.assign({},U(a,!1)),{reason:e,details:r}):{reason:e,details:r})}logExpandSmartSnippetSuggestion(e,r){let a="documentId"in e?e:{documentId:e};return this.logCustomEvent(g.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},U(r,!1)),a):a)}logCollapseSmartSnippetSuggestion(e,r){let a="documentId"in e?e:{documentId:e};return this.logCustomEvent(g.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},U(r,!1)),a):a)}logOpenSmartSnippetSource(e,r,a){return this.logClickEvent(g.openSmartSnippetSource,e,r,a?U(a,!1):void 0)}logOpenSmartSnippetSuggestionSource(e,r,a){return this.logClickEvent(g.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},U(a,!1)),r):r)}logOpenSmartSnippetInlineLink(e,r,a){return this.logClickEvent(g.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},a?Object.assign(Object.assign({},U(a,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(e,r,a){return this.logClickEvent(g.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},U(a,!1)),r):r)}logLikeGeneratedAnswer(e,r){return this.logCustomEvent(g.likeGeneratedAnswer,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logDislikeGeneratedAnswer(e,r){return this.logCustomEvent(g.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logOpenGeneratedAnswerSource(e,r){return this.logCustomEvent(g.openGeneratedAnswerSource,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logGeneratedAnswerSourceHover(e,r){return this.logCustomEvent(g.generatedAnswerSourceHover,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logGeneratedAnswerCopyToClipboard(e,r){return this.logCustomEvent(g.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logGeneratedAnswerHideAnswers(e,r){return this.logCustomEvent(g.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logGeneratedAnswerShowAnswers(e,r){return this.logCustomEvent(g.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logGeneratedAnswerFeedbackSubmit(e,r){return this.logCustomEvent(g.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logRephraseGeneratedAnswer(e,r){return this.logSearchEvent(g.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logRetryGeneratedAnswer(e){return this.logSearchEvent(g.retryGeneratedAnswer,e?Object.assign({},U(e,!1)):{})}logGeneratedAnswerStreamEnd(e,r){return this.logCustomEvent(g.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logCustomEvent(e,r){return x(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(a)),{eventType:ad[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logSearchEvent(e,r){return x(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,r))})}logClickEvent(e,r,a,n){return x(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(o)})}logShowMoreFoldedResults(e,r,a){return x(this,void 0,void 0,function*(){return this.logClickEvent(g.showMoreFoldedResults,e,r,a?U(a,!1):void 0)})}logShowLessFoldedResults(e){return x(this,void 0,void 0,function*(){return this.logCustomEvent(g.showLessFoldedResults,e?U(e,!1):void 0)})}getBaseCustomEventRequest(e){return x(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var a,n;return x(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return x(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof je?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};var Fm=1,bm=10,hs=5,Rm=1,Ss=8;function an(){return{desiredCount:hs,numberOfValues:Ss,set:{}}}var vt=(t,e)=>{let r=a=>a.facetId===e;if("productListing"in t&&t.productListing&&"facets"in t.productListing&&"results"in t.productListing.facets)return t.productListing.facets.results.find(r);if("search"in t&&t.search)return t.search.response.facets.find(r)},ys=(t,e)=>{var r;return(r=t.facetSet[e])==null?void 0:r.request};function mR(t,e){return!!e&&e.facetId in t.facetSet}var nn=(t,e)=>{let r=vt(t,e);if(mR(t,r))return r},Am=(t,e)=>{let r=nn(t,e);return r?r.values.filter(a=>a.state==="selected"):[]},Pm=(t,e)=>{let r=nn(t,e);return r?r.values.filter(a=>a.state!=="idle"):[]},Vt=t=>"productListing"in t?t.productListing.isLoading:t.search.isLoading;function wm(t){if(!t)return{parents:[],values:[]};let e=[],r=t;for(;r.length&&r[0].children.length;)e=[...e,...r],r=r[0].children;let a=r.find(n=>n.state==="selected");return a&&(e=[...e,a],r=[]),{parents:e,values:r}}function Ke(t){let{activeValue:e,ancestryMap:r}=gR(t);return e?hR(e,r):[]}function gR(t){let e=[...t],r=new Map;for(;e.length>0;){let a=e.shift();if(a.state==="selected")return{activeValue:a,ancestryMap:r};if(r)for(let n of a.children)r.set(n,a);e.unshift(...a.children)}return{}}function hR(t,e){let r=[];if(!t)return[];let a=t;do r.unshift(a),a=e.get(a);while(a);return r}function SR(t,e){return!!e&&e.facetId in t.categoryFacetSet}var id=(t,e)=>{let r=vt(t,e);if(SR(t,r))return r},sd=(t,e)=>{var r;return(r=t.categoryFacetSet[e])==null?void 0:r.request},Em=(t,e)=>{var a;let r=id(t,e);return Ke((a=r==null?void 0:r.values)!=null?a:[])},cd=(t,e)=>{var a;let r=sd(t,e);return Ke((a=r==null?void 0:r.currentValues)!=null?a:[])};function on(){return{}}function Im(t){return{request:t}}function sn(){return{}}function km(t){return{request:t}}function cn(){return{}}function Om(t){return{request:t,hasBreadcrumbs:!0}}function un(){return{}}var ln=(t,e)=>{let r=Vm(e,t),a=r?r.field:"",n=ud(a,t);return{facetId:t,facetField:a,facetTitle:n}};function fi(t,e){let{facetId:r,facetValue:a}=t,n=ln(r,e),o=Nm(e,r);return{...n,facetValue:o==="hierarchical"?Dm(e,r):a}}function Je(t){var e,r,a,n,o;return{facetSet:(e=t.facetSet)!=null?e:un(),categoryFacetSet:(r=t.categoryFacetSet)!=null?r:on(),dateFacetSet:(a=t.dateFacetSet)!=null?a:sn(),numericFacetSet:(n=t.numericFacetSet)!=null?n:cn(),automaticFacetSet:(o=t.automaticFacetSet)!=null?o:an()}}var Cs=t=>{let e=[];return xR(t).forEach((r,a)=>{let n=Nm(t,r.facetId),o=AR(r,a+1);if(CR(r)){if(!!!cd(t,r.facetId).length)return;e.push({...o,...bR(t,r.facetId),facetType:n,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let c=qm(i,s+1,n),u=yR(r)?Tm(i):FR(i);e.push({...o,...c,...u})})}),vR(t).forEach((r,a)=>{let n=RR(r,a+1);r.values.forEach((o,i)=>{if(o.state==="idle")return;let s=qm(o,i+1,"specific"),c=Tm(o);e.push({...n,...s,...c})})}),e},yR=t=>t.type==="specific",CR=t=>t.type==="hierarchical",xR=t=>[...Object.values(t.facetSet),...Object.values(t.categoryFacetSet),...Object.values(t.dateFacetSet),...Object.values(t.numericFacetSet)].map(e=>e.request),vR=t=>[...Object.values(t.automaticFacetSet.set)].map(e=>e.response),qm=(t,e,r)=>({state:t.state,valuePosition:e,facetType:r}),FR=t=>({displayValue:`${t.start}..${t.end}`,value:`${t.start}..${t.end}`,start:t.start,end:t.end,endInclusive:t.endInclusive}),Tm=t=>({displayValue:t.value,value:t.value}),Dm=(t,e)=>cd(t,e).map(a=>a.value).join(";"),bR=(t,e)=>{let r=1,a=Dm(t,e);return{value:a,valuePosition:r,displayValue:a}},RR=(t,e)=>({title:ud(t.field,t.field),field:t.field,id:t.field,facetPosition:e}),AR=(t,e)=>({title:ud(t.field,t.facetId),field:t.field,id:t.facetId,facetPosition:e}),ud=(t,e)=>`${t}_${e}`,Vm=(t,e)=>{var r,a,n,o,i;return((r=t.facetSet[e])==null?void 0:r.request)||((a=t.categoryFacetSet[e])==null?void 0:a.request)||((n=t.dateFacetSet[e])==null?void 0:n.request)||((o=t.numericFacetSet[e])==null?void 0:o.request)||((i=t.automaticFacetSet.set[e])==null?void 0:i.response)},Nm=(t,e)=>{let r=Vm(t,e);return r?r.type:"specific"};var Fe=()=>({q:"",enableQuerySyntax:!1});function dn(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Me(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:dn(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:dn(),extendedResults:{}}}function PR(t,e){let r=`
  The following properties are invalid:

    ${t.join(`
	`)}
  
  ${e}
  `;return new mi(r)}var mi=class extends Error{constructor(t){super(t);this.name="SchemaValidationError"}},z=class{constructor(t){this.definition=t}validate(t={},e=""){let r={...this.default,...t},a=[];for(let n in this.definition){let o=this.definition[n].validate(r[n]);o&&a.push(`${n}: ${o}`)}if(a.length)throw PR(a,e);return r}get default(){let t={};for(let e in this.definition){let r=this.definition[e].default;r!==void 0&&(t[e]=r)}return t}},ue=class{constructor(t={}){this.baseConfig=t}validate(t){return this.baseConfig.required&&ee(t)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Ae(t){return t===void 0}function wR(t){return t===null}function ee(t){return Ae(t)||wR(t)}var I=class{constructor(t={}){this.config=t,this.value=new ue(t)}validate(t){let e=this.value.validate(t);return e||(ER(t)?t<this.config.min?`minimum value of ${this.config.min} not respected.`:t>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function ER(t){return Ae(t)||Mm(t)}function Mm(t){return typeof t=="number"&&!isNaN(t)}var $=class{constructor(t={}){this.value=new ue(t)}validate(t){let e=this.value.validate(t);return e||(IR(t)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function IR(t){return Ae(t)||Lm(t)}function Lm(t){return typeof t=="boolean"}var kR=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,b=class{constructor(t={}){this.config={emptyAllowed:!0,url:!1,...t},this.value=new ue(this.config)}validate(t){let{emptyAllowed:e,url:r,regex:a,constrainTo:n}=this.config,o=this.value.validate(t);return o||(Ae(t)?null:pn(t)?!e&&!t.length?"value is an empty string.":r&&!kR.test(t)?"value is not a valid URL.":a&&!a.test(t)?`value did not match provided regex ${a}`:n&&!n.includes(t)?`value should be one of: ${n.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function pn(t){return Object.prototype.toString.call(t)==="[object String]"}var E=class{constructor(t={}){this.config={options:{required:!1},values:{},...t}}validate(t){if(Ae(t))return this.config.options.required?"value is required and is currently undefined":null;if(!Qm(t))return"value is not an object";for(let[r,a]of Object.entries(this.config.values))if(a.required&&ee(t[r]))return`value does not contain ${r}`;let e="";for(let[r,a]of Object.entries(this.config.values)){let n=t[r],o=a.validate(n);o!==null&&(e+=" "+o)}return e===""?null:e}get default(){}get required(){return!!this.config.options.required}};function Qm(t){return t!==void 0&&typeof t=="object"}var H=class{constructor(t={}){this.config=t,this.value=new ue(this.config)}validate(t){if(!ee(t)&&!Array.isArray(t))return"value is not an array";let e=this.value.validate(t);if(e!==null)return e;if(ee(t))return null;if(this.config.max!==void 0&&t.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&t.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return t.forEach(a=>{this.config.each.required&&ee(a)&&(r=`value is null or undefined: ${t.join(",")}`);let n=this.validatePrimitiveValue(a,this.config.each);n!==null&&(r+=" "+n)}),r===""?null:r}return null}validatePrimitiveValue(t,e){return Lm(t)||pn(t)||Mm(t)||Qm(t)?e.validate(t):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function fn(t){return Array.isArray(t)}var Ft=class{constructor(t){this.config=t,this.value=new ue(t)}validate(t){let e=this.value.validate(t);return e!==null?e:Ae(t)||Object.values(this.config.enum).find(a=>a===t)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var mr=(r=>(r.Ascending="ascending",r.Descending="descending",r))(mr||{}),bt=(o=>(o.Relevancy="relevancy",o.QRE="qre",o.Date="date",o.Field="field",o.NoSort="nosort",o))(bt||{}),Nt=t=>{if(fn(t))return t.map(e=>Nt(e)).join(",");switch(t.by){case"relevancy":case"qre":case"nosort":return t.by;case"date":return`date ${t.order}`;case"field":return`@${t.field} ${t.order}`;default:return""}},mn=()=>({by:"relevancy"}),xs=t=>({by:"date",order:t}),vs=(t,e)=>({by:"field",order:e,field:t}),Fs=()=>({by:"qre"}),bs=()=>({by:"nosort"}),Bm=new E({values:{by:new Ft({enum:bt,required:!0}),order:new Ft({enum:mr}),field:new b}});function rt(){return Nt(mn())}var Mt=()=>"default";var gn="2.42.0";var OR=t=>{let e=t.configuration.search.locale.split("-")[0];return!e||e.length!==2?"en":e},gr=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return OR(this.state)}getBaseMetadata(){let{context:e}=this.state,r=(e==null?void 0:e.contextValues)||{},a={};for(let[n,o]of Object.entries(r)){let i=`context_${n}`;a[i]=o}return a.coveoHeadlessVersion=gn,a}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Mt()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var at=t=>new je(t).getCurrentVisitorId(),ld=t=>{let e=new je(t);e.clear(),e.deleteHttpOnlyVisitorId()},Lt=new Xf.HistoryStore,Qt=(t,e)=>typeof e=="function"?(...r)=>{let a=Nr(r[0]);try{return e.apply(e,r)}catch(n){return t.error(n,"Error in analytics preprocessRequest. Returning original request."),a}}:void 0,Bt=(t,e)=>(...r)=>{let a=Nr(r[1]);try{return e.apply(e,r)}catch(n){return t.error(n,"Error in analytics hook. Returning original request."),a}};var Rs=class extends gr{constructor(){super(...arguments);this.getFacetRequest=e=>{var r,a,n,o,i,s,c,u,l,d;return((a=(r=this.state.facetSet)==null?void 0:r[e])==null?void 0:a.request)||((o=(n=this.state.categoryFacetSet)==null?void 0:n[e])==null?void 0:o.request)||((s=(i=this.state.dateFacetSet)==null?void 0:i[e])==null?void 0:s.request)||((u=(c=this.state.numericFacetSet)==null?void 0:c[e])==null?void 0:u.request)||((d=(l=this.state.automaticFacetSet)==null?void 0:l.set[e])==null?void 0:d.response)}}getFacetState(){return Cs(Je(this.getState()))}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||Rs.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,a;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((a=e.search)==null?void 0:a.response.searchUid)||Me().response.searchUid}getSplitTestRunName(){var e;return(e=this.state.search)==null?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var a;let e=!!this.getSplitTestRunName(),r=((a=this.state.search)==null?void 0:a.response.pipeline)||this.state.pipeline||Rs.fallbackPipelineName;return e?r:void 0}getBaseMetadata(){var n,o,i;let e=this.getState(),r=super.getBaseMetadata(),a=(i=(o=(n=e.search)==null?void 0:n.response)==null?void 0:o.extendedResults)==null?void 0:i.generativeQuestionAnsweringId;return a&&(r.generativeQuestionAnsweringId=a),r}getFacetMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,facetValue:r,facetTitle:`${n}_${e}`}}getFacetClearAllMetadata(e){var n;let r=this.getFacetRequest(e),a=(n=r==null?void 0:r.field)!=null?n:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,facetTitle:`${a}_${e}`}}getFacetSortMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,criteria:r,facetTitle:`${n}_${e}`}}getRangeFacetBreadcrumbMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${n}_${e}`}}getResultSortMetadata(){var e;return{...this.getBaseMetadata(),resultsSortBy:(e=this.state.sortCriteria)!=null?e:rt()}}getStaticFilterToggleMetadata(e,r){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:r}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryFacetBreadcrumbMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:n,categoryFacetPath:r,categoryFacetTitle:`${n}_${e}`}}getOmniboxAnalyticsMetadata(e,r){let a=this.state.querySuggest&&this.state.querySuggest[e],n=a.completions.map(c=>c.expression),o=a.partialQueries.length-1,i=a.partialQueries[o]||"",s=a.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(r),partialQuery:i,partialQueries:a.partialQueries.length>0?a.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:s}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){var a;let e=this.getState(),r={};return((a=e.generatedAnswer)==null?void 0:a.isVisible)!==void 0&&(r.showGeneratedAnswer=e.generatedAnswer.isVisible),r}get resultURIs(){var e;return(e=this.results)==null?void 0:e.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var e;return(e=this.state.search)==null?void 0:e.response.results}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||Fe().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Me().duration}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.totalCountFiltered)||Me().response.totalCountFiltered}},L=Rs;L.fallbackPipelineName="default";var jm=t=>{let e=t.configuration.accessToken,r=t.configuration.analytics.trackingId,{emit:a}=Wf({url:t.configuration.analytics.nextApiBaseUrl,token:e,trackingId:r});return a},Um=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new L(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new Ca({token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:Qt(t,a),beforeSendHooks:[Bt(t,r),(d,f)=>(t.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return u||l.disable(),l},dd=()=>{let e=Lt.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return e?e.value:""};async function _m(t,e){let r=t.getReader(),a;for(;!(a=await r.read()).done;)e(a.value)}function $m(t){let e,r,a,n=!1;return function(i){e===void 0?(e=i,r=0,a=-1):e=qR(e,i);let s=e.length,c=0;for(;r<s;){n&&(e[r]===10&&(c=++r),n=!1);let u=-1;for(;r<s&&u===-1;++r)switch(e[r]){case 58:a===-1&&(a=r-c);break;case 13:n=!0;case 10:u=r;break}if(u===-1)break;t(e.subarray(c,u),a),c=r,a=-1}c===s?e=void 0:c!==0&&(e=e.subarray(c),r-=c)}}function Wm(t,e,r){let a=Hm(),n=new TextDecoder;return function(i,s){if(i.length===0)r==null||r(a),a=Hm();else if(s>0){let c=n.decode(i.subarray(0,s)),u=s+(i[s+1]===32?2:1),l=n.decode(i.subarray(u));switch(c){case"data":a.data=a.data?a.data+`
`+l:l;break;case"event":a.event=l;break;case"id":t(a.id=l);break;case"retry":let d=parseInt(l,10);isNaN(d)||e(a.retry=d);break}}}}function qR(t,e){let r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function Hm(){return{data:"",event:"",id:"",retry:void 0}}var TR=function(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r},As="text/event-stream",DR=1e3,zm="last-event-id";function pd(t,e){var{signal:r,headers:a,onopen:n,onmessage:o,onclose:i,onerror:s,openWhenHidden:c,fetch:u}=e,l=TR(e,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,f)=>{let p=Object.assign({},a);p.accept||(p.accept=As);let m;function S(){m?.abort(),document.hidden||te()}c||document.addEventListener("visibilitychange",S);let v=DR,C=0;function F(){document.removeEventListener("visibilitychange",S),window.clearTimeout(C),m?.abort()}r==null||r.addEventListener("abort",()=>{F(),d()});let D=u??window.fetch,Q=n??VR;async function te(){var ae;m=typeof AbortController=="undefined"?null:new AbortController;try{let oe=await D(t,Object.assign(Object.assign({},l),{headers:p,signal:m?.signal}));await Q(oe),await _m(oe.body,$m(Wm(X=>{X?p[zm]=X:delete p[zm]},X=>{v=X},o))),i==null||i(),F(),d()}catch(oe){if(!m?.signal.aborted)try{let X=(ae=s==null?void 0:s(oe))!==null&&ae!==void 0?ae:v;window.clearTimeout(C),C=window.setTimeout(te,X)}catch(X){F(),f(X)}}}te()})}function VR(t){let e=t.headers.get("content-type");if(!(e==null?void 0:e.startsWith(As)))throw new Error(`Expected content-type to be ${As}, Actual: ${e}`)}function Ps(){if(typeof window=="undefined"){let{AbortController:t}=Ym();return new t}return typeof AbortController=="undefined"?null:new AbortController}var xa=class{constructor(e){this._params={};this._basePath=e}addParam(e,r){this._params={...this.params,[e]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([e,r])=>`${e}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},Km=t=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(t),Jm=(t,e)=>{let r=md(t);return r&&r.organizationId===e?r:null},md=t=>{let e=t.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(e==null?void 0:e.groups)?e.groups:null};var NR=(t,e,r)=>new xa(`${t}/rest/organizations/${e}/machinelearning/streaming/${r}`).href,Xm=3,MR=5e3,LR="text/event-stream",gd=1,Zm=class extends Error{},ws=class extends Error{constructor(e){super(e.message);this.payload=e}},hd=class{constructor(e){this.logger=e.logger}streamGeneratedAnswer(e,r){let{url:a,organizationId:n,streamId:o,accessToken:i}=e,{write:s,abort:c,close:u,resetAnswer:l}=r;if(!o){this.logger.error("No stream ID found");return}let d=0,f,p=()=>{S==null||S.abort(),l(),v()},m=()=>{f=Mf(p,f,MR)},S=Ps(),v=()=>pd(NR(a,n,o),{method:"GET",headers:{Authorization:`Bearer ${i}`,accept:"*/*"},signal:S==null?void 0:S.signal,async onopen(C){if(C.ok&&C.headers.get("content-type")===LR)return;throw C.status>=400&&C.status<500&&C.status!==429?new ws({message:"Error opening stream",code:C.status}):new Zm},onmessage:C=>{let F=JSON.parse(C.data);if(F.finishReason==="ERROR"){clearTimeout(f),S==null||S.abort(),c({message:F.errorMessage,code:F.statusCode});return}s(F),d=0,F.finishReason==="COMPLETED"?(clearTimeout(f),u()):m()},onerror:C=>{if(clearTimeout(f),C instanceof ws)throw S==null||S.abort(),c(C),C;if(++d>Xm){this.logger.info("Maximum retry exceeded.");let F={message:"Failed to complete stream.",code:gd};throw S==null||S.abort(),c(F),new ws(F)}this.logger.info(`Retrying...(${d}/${Xm})`),l()}});return v(),S}};var Es=t=>t;function hr(t){let{url:e,accessToken:r,organizationId:a,authentication:n,...o}=t;return o}var Sr=t=>{let{response:e}=t;return e.body?QR(t):BR(e)},QR=t=>UR(t)?_R(t):jR(t)?t.body:{message:"unknown",statusCode:0,type:"unknown"},BR=t=>{let e=JSON.parse(JSON.stringify(t,Object.getOwnPropertyNames(t)));return{...e,message:`Client side error: ${e.message||""}`,statusCode:400,type:"ClientError"}};function jR(t){return t.body.statusCode!==void 0}function UR(t){return t.body.exception!==void 0}var _R=t=>({message:t.body.exception.code,statusCode:t.response.status,type:t.body.exception.code});var pg=Ge(tg()),fg=Ge(ug());var A=new Error("Failed to load reducers."),Si=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},hn=class extends Error{constructor(e,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=r!=null?r:0}};function lg(t){let e=[];for(let r in t){let a=encodeURIComponent(r),n=encodeURIComponent(t[r]);e.push(`${a}=${n}`)}return e.join("&")}function dg(t){return typeof t!="object"||!t?!1:Object.values(t).every(gA)}function gA(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function mg(t){return t===429}var Xe=class{static async call(e){let r=hA(e),{logger:a}=e,n=await Xe.preprocessRequest(r,e);a.info(n,"Platform request");let{url:o,...i}=n,s=async()=>{let c=await(0,pg.default)(o,i);if(mg(c.status))throw c;return c};try{let c=await(0,fg.backOff)(s,{retry:u=>{let l=u&&mg(u.status);return l&&a.info("Platform retrying request"),l}});if(c.status===419)throw a.info("Platform renewing token"),new Si;if(c.status===404)throw new hn(o,c.status);return a.info({response:c,requestInfo:n},"Platform response"),c}catch(c){return c.message==="Failed to fetch"?new hn(o):c}}static async preprocessRequest(e,r){let{origin:a,preprocessRequest:n,logger:o,requestMetadata:i}=r,{signal:s,...c}=e,u=Nr(c);try{let l=await n(e,a,i);return{...e,...l}}catch(l){o.error(l,"Platform request preprocessing failed. Returning default request options.")}return u}};function gg(t,e){let r=!e||!e.environment||e.environment==="prod"?"":e.environment,a=!e||!e.region||e.region==="us"?"":`-${e.region}`;return`https://${t}${r}${a}.cloud.coveo.com`}function Sn(t,e="prod"){let r=e==="prod"?"":e,a=`https://${t}.org${r}.coveo.com`,n=`https://${t}.analytics.org${r}.coveo.com`,o=`${a}/rest/search/v2`,i=`https://${t}.admin.org${r}.coveo.com`;return{platform:a,analytics:n,search:o,admin:i}}function yi(t){return(t==null?void 0:t.multiRegionSubDomain)?`https://${t.multiRegionSubDomain}.org.coveo.com`:gg("platform",t)}function ks(t){return gg("analytics",t)}function hA(t){let{url:e,method:r,requestParams:a,contentType:n,accessToken:o,signal:i}=t,s=t.method==="POST"||t.method==="PUT",c=SA(a,n);return{url:e,method:r,headers:{"Content-Type":n,Authorization:`Bearer ${o}`,...t.headers},...s&&{body:c},signal:i}}function SA(t,e){return e==="application/x-www-form-urlencoded"?dg(t)?lg(t):"":JSON.stringify(t)}var Fa=class{constructor(){this.currentAbortController=null}async enqueue(e,r){var o;let a=this.currentAbortController,n=this.currentAbortController=Ps();a&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),a.abort());try{return await e((o=n==null?void 0:n.signal)!=null?o:null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}};function hg(t){return((t.headers.get("content-type")||"").split(";").find(a=>a.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var jt=(t,e,r,a)=>{let n=new xa(`${t.url}${a}`);return n.addParam("organizationId",t.organizationId),t.authentication&&n.addParam("authentication",t.authentication),{accessToken:t.accessToken,method:e,contentType:r,url:n.href,origin:"searchApiFetch"}};var Sg=(t,e)=>{let r=new xa(`${t.url}${e}`);return r.addParam("access_token",t.accessToken),r.addParam("organizationId",t.organizationId),r.addParam("uniqueId",t.uniqueId),t.q!==void 0&&r.addParam("q",t.q),t.enableNavigation!==void 0&&r.addParam("enableNavigation",`${t.enableNavigation}`),t.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${t.requestedOutputSize}`),t.visitorId!==void 0&&r.addParam("visitorId",`${t.visitorId}`),r.href},yg=async(t,e)=>{let r=await Xe.call({...jt(t,"POST","application/x-www-form-urlencoded","/html"),requestParams:hr(t),requestMetadata:{method:"html"},...e});if(r instanceof Error)throw r;let a=hg(r),n=await r.arrayBuffer(),i=new TextDecoder(a).decode(n);return yA(i)?{success:i}:{error:Sr({response:r,body:i})}};function yA(t){return typeof t=="string"}function CA(t){return{statusCode:t.statusCode,type:t.name,message:t.message}}function xA(t){return{statusCode:t.code,type:t.name,message:t.message,ignored:!0}}function Os(t,e){if(e&&t.name==="AbortError")return{error:xA(t)};if(t instanceof hn)return{error:CA(t)};throw t}var Ad=class{constructor(e){this.options=e;this.apiCallsQueues={unknown:new Fa,mainSearch:new Fa,facetValues:new Fa,foldingCollection:new Fa,instantResults:new Fa}}async plan(e){let r=await Xe.call({...jt(e,"POST","application/json","/plan"),requestParams:hr(e),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return Os(r);let a=await r.json();return bA(a)?{success:a}:{error:Sr({response:r,body:a})}}async querySuggest(e){let r=await Xe.call({...jt(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:hr(e),...this.options});if(r instanceof Error)return Os(r);let a=await r.json(),n={response:r,body:a};return FA(a)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:Sr(n)}}async search(e,r){var s;let a=(s=r==null?void 0:r.origin)!=null?s:"unknown",n=await this.apiCallsQueues[a].enqueue(c=>Xe.call({...jt(e,"POST","application/json",""),requestParams:hr(e),requestMetadata:{method:"search",origin:r==null?void 0:r.origin},...this.options,signal:c!=null?c:void 0}),{logger:this.options.logger,warnOnAbort:!(r==null?void 0:r.disableAbortWarning)});if(n instanceof Error)return Os(n,r==null?void 0:r.disableAbortWarning);let o=await n.json(),i={response:n,body:o};return Pd(o)?(i.body=vA(o),{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}):{error:Sr(i)}}async facetSearch(e){let r=await Xe.call({...jt(e,"POST","application/json","/facet"),requestParams:hr(e),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let a=await r.json(),n={response:r,body:a};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let r=await Xe.call({...jt(e,"POST","application/json",""),requestParams:hr(e),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return Pd(a)?{success:a}:{error:Sr({response:r,body:a})}}async html(e){return yg(e,{...this.options})}async productRecommendations(e){let r=await Xe.call({...jt(e,"POST","application/json",""),requestParams:hr(e),requestMetadata:{method:"productRecommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return Pd(a)?{success:a}:{error:Sr({response:r,body:a})}}async fieldDescriptions(e){let r=await Xe.call({...jt(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return RA(a)?{success:a}:{error:Sr({response:r,body:a})}}},qs=t=>t.success!==void 0,ye=t=>t.error!==void 0;function Pd(t){return t.results!==void 0}function vA(t){let e=dn();return ee(t.questionAnswer)?(t.questionAnswer=e,t):(t.questionAnswer={...e,...t.questionAnswer},t)}function FA(t){return t.completions!==void 0}function bA(t){return t.preprocessingOutput!==void 0}function RA(t){return t.fields!==void 0}var Cg=t=>t,xg=t=>t,vg=t=>t;var P=new b({required:!0,emptyAllowed:!1}),pe=new b({required:!1,emptyAllowed:!1}),le=new b({required:!0,emptyAllowed:!0}),Cr=({message:t,name:e,stack:r})=>({message:t,name:e,stack:r}),nt=(t,e)=>{if("required"in e)return{payload:new z({value:e}).validate({value:t}).value};let n=new E({options:{required:!0},values:e}).validate(t);if(n)throw new mi(n);return{payload:t}},y=(t,e)=>{try{return nt(t,e)}catch(r){return{payload:t,error:Cr(r)}}},Pe=(t,e,r,a)=>{let n=`Check the initialState of ${a}`;return Fg(t,e,r,n,"Controller initialization error")},de=(t,e,r,a)=>{let n=`Check the options of ${a}`;return Fg(t,e,r,n,"Controller initialization error")},Fg=(t,e,r,a,n)=>{try{return e.validate(r,a)}catch(o){throw t.logger.error(o,n),o}};var Ts=class{constructor(e){this.state=e()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||Mt()}},bg=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new Ts(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new nd({enableAnalytics:u,token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:Qt(t,a),beforeSendHooks:[Bt(t,r),(d,f)=>(t.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return u||l.disable(),l};var Ds=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var yn=class extends gr{constructor(){super(...arguments);this.initialState=Ds()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Rg=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new yn(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new Ca({token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:Qt(t,a),beforeSendHooks:[Bt(t,r),(d,f)=>(t.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return u||l.disable(),l};var Vs=class extends gr{getSearchUID(){var r,a;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((a=e.search)==null?void 0:a.response.searchUid)||Me().response.searchUid}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return Cs(Je(this.state))}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||Fe().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Me().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.search)==null?void 0:e.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.results.length)||Me().response.results.length}},Ag=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new Vs(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new od({enableAnalytics:u,token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:Qt(t,a),beforeSendHooks:[Bt(t,r),(d,f)=>(t.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return u||l.disable(),l};var Cn=class extends gr{constructor(){super(...arguments);this.initialState=Ds()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Pg=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new Cn(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new Ca({token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:Qt(t,a),beforeSendHooks:[Bt(t,r),(d,f)=>(t.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return u||l.disable(),l};function Ns(t){let e=wg(t),r=[t,...e].filter(n=>n.parentResult).map(n=>n.parentResult);return Vf([t,...e,...r],n=>n.uniqueId)}function wg(t){return t.childResults?t.childResults.flatMap(e=>[e,...wg(e)]):[]}var Lr=()=>"";function xn(t,e){return{...new L(e).getBaseMetadata(),actionCause:t,type:t}}function AA(t){return Object.assign(t,{instantlyCallable:!0})}function PA(t,e){let r=o=>AA(J(t,o)),a=r(async(o,{getState:i,extra:s})=>{let{analyticsClientMiddleware:c,preprocessRequest:u,logger:l}=s;return await(await e({getState:i,analyticsClientMiddleware:c,preprocessRequest:u,logger:l})).log({state:i(),extra:s})});return Object.assign(a,{prepare:async({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:c})=>{let{description:u,log:l}=await e({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:c});return{description:u,action:r(async(d,{getState:f,extra:p})=>await l({state:f(),extra:p}))}}}),a}var Ci=(t,e,r)=>{function a(...n){let o=n.length===1?{...n[0],__legacy__getBuilder:e(n[0].__legacy__getBuilder),analyticsConfigurator:t,providerClass:r}:{prefix:n[0],__legacy__getBuilder:e(n[1]),__legacy__provider:n[2],analyticsConfigurator:t,providerClass:r};return IA(o)}return a},wA=t=>t.configuration.analytics.analyticsMode==="legacy",EA=t=>t.configuration.analytics.analyticsMode==="next",IA=({prefix:t,__legacy__getBuilder:e,__legacy__provider:r,analyticsPayloadBuilder:a,analyticsType:n,analyticsConfigurator:o,providerClass:i})=>(r!=null||(r=s=>new i(s)),PA(t,async({getState:s,analyticsClientMiddleware:c,preprocessRequest:u,logger:l})=>{let d=[],f={log:async({state:C})=>{for(let F of d)await F(C)}},p=s(),m=o({getState:s,logger:l,analyticsClientMiddleware:c,preprocessRequest:u,provider:r(s)}),S=await e(m,s());f.description=S==null?void 0:S.description,d.push(async C=>{wA(C)&&await kA(S,r,C,l,m.coveoAnalyticsClient)});let v=jm(p);return d.push(async C=>{if(EA(C)&&n&&a){let F=a(C);await MA(v,n,F)}}),f}));async function kA(t,e,r,a,n){e(()=>r);let o=await(t==null?void 0:t.log({searchUID:e(()=>r).getSearchUID()}));a.info({client:n,response:o},"Analytics response")}var Eg=t=>(e,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async a=>{t(e,r)}}),w=Ci(Um,t=>t,L),e0=Ci(bg,Eg,Ts),t0=Ci(Ag,Eg,Vs),Ig=Ci(Rg,t=>t,yn),kg=Ci(Pg,t=>t,Cn);var Le=(t,e)=>{var o;let r=i=>{var s,c;return i+((c=(s=e.pagination)==null?void 0:s.firstResult)!=null?c:0)},a=-1,n=(o=e.search)==null?void 0:o.results;return a=qg(t,n),a<0&&(a=NA(t,n)),a<0&&(a=0),OA(t,r(a),e)};function OA(t,e,r){let a=t.raw.collection;return{collectionName:typeof a=="string"?a:"default",documentAuthor:DA(t),documentPosition:e+1,documentTitle:t.title,documentUri:t.uri,documentUriHash:t.raw.urihash,documentUrl:t.clickUri,rankingModifier:t.rankingModifier||"",sourceName:VA(t),queryPipeline:r.pipeline||Lr()}}var _e=t=>(t.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",t),{contentIDKey:"permanentid",contentIDValue:t.raw.permanentid||""}),Og={urihash:new b,sourcetype:new b,permanentid:new b},vn={uniqueId:P,raw:new E({values:Og}),title:P,uri:P,clickUri:P,rankingModifier:new b({required:!1,emptyAllowed:!0})};function qA(t){return Object.assign({},...Object.keys(Og).map(e=>({[e]:t[e]})))}function TA(t){return Object.assign({},...Object.keys(vn).map(e=>({[e]:t[e]})),{raw:qA(t.raw)})}function DA(t){let e=t.raw.author;return ee(e)?"unknown":Array.isArray(e)?e.join(";"):`${e}`}function VA(t){let e=t.raw.source;return ee(e)?"unknown":e}var ot=t=>new z(vn).validate(TA(t));function NA(t,e){for(let[r,a]of e.entries()){let n=Ns(a);if(qg(t,n)!==-1)return r}return-1}function qg(t,e=[]){return e.findIndex(({uniqueId:r})=>r===t.uniqueId)}async function MA(t,e,r){await t(e,r)}var wd=t=>y(t,{evt:P,type:pe}),Tg=t=>w("analytics/generic/search",e=>{wd(t);let{evt:r,meta:a}=t;return e.makeSearchEvent(r,a)}),Dg=t=>w("analytics/generic/click",(e,r)=>(ot(t.result),wd(t),e.makeClickEvent(t.evt,Le(t.result,r),_e(t.result),t.meta))),Vg=t=>w("analytics/generic/custom",e=>(wd(t),e.makeCustomEventWithType(t.evt,t.type,t.meta))),Ms=()=>w("analytics/interface/load",t=>t.makeInterfaceLoad()),Qr=()=>w("analytics/interface/change",(t,e)=>t.makeInterfaceChange({interfaceChangeTo:e.configuration.analytics.originLevel2})),Ls=()=>w("analytics/interface/searchFromLink",t=>t.makeSearchFromLink()),Qs=t=>w("analytics/interface/omniboxFromLink",e=>e.makeOmniboxFromLink(t));var T=(O=>(O.interfaceLoad="interfaceLoad",O.interfaceChange="interfaceChange",O.didyoumeanAutomatic="didyoumeanAutomatic",O.didyoumeanClick="didyoumeanClick",O.resultsSort="resultsSort",O.searchboxSubmit="searchboxSubmit",O.searchboxClear="searchboxClear",O.searchboxAsYouType="searchboxAsYouType",O.breadcrumbFacet="breadcrumbFacet",O.breadcrumbResetAll="breadcrumbResetAll",O.documentQuickview="documentQuickview",O.documentOpen="documentOpen",O.omniboxAnalytics="omniboxAnalytics",O.omniboxFromLink="omniboxFromLink",O.searchFromLink="searchFromLink",O.triggerNotify="notify",O.triggerExecute="execute",O.triggerQuery="query",O.undoTriggerQuery="undoQuery",O.triggerRedirect="redirect",O.pagerResize="pagerResize",O.pagerNumber="pagerNumber",O.pagerNext="pagerNext",O.pagerPrevious="pagerPrevious",O.pagerScrolling="pagerScrolling",O.staticFilterClearAll="staticFilterClearAll",O.staticFilterSelect="staticFilterSelect",O.staticFilterDeselect="staticFilterDeselect",O.facetClearAll="facetClearAll",O.facetSearch="facetSearch",O.facetSelect="facetSelect",O.facetSelectAll="facetSelectAll",O.facetDeselect="facetDeselect",O.facetExclude="facetExclude",O.facetUnexclude="facetUnexclude",O.facetUpdateSort="facetUpdateSort",O.facetShowMore="showMoreFacetResults",O.facetShowLess="showLessFacetResults",O.queryError="query",O.queryErrorBack="errorBack",O.queryErrorClear="errorClearQuery",O.queryErrorRetry="errorRetry",O.recommendation="recommendation",O.recommendationInterfaceLoad="recommendationInterfaceLoad",O.recommendationOpen="recommendationOpen",O.likeSmartSnippet="likeSmartSnippet",O.dislikeSmartSnippet="dislikeSmartSnippet",O.expandSmartSnippet="expandSmartSnippet",O.collapseSmartSnippet="collapseSmartSnippet",O.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",O.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",O.sendSmartSnippetReason="sendSmartSnippetReason",O.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",O.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",O.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",O.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",O.openSmartSnippetSource="openSmartSnippetSource",O.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",O.openSmartSnippetInlineLink="openSmartSnippetInlineLink",O.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",O.recentQueryClick="recentQueriesClick",O.clearRecentQueries="clearRecentQueries",O.recentResultClick="recentResultClick",O.clearRecentResults="clearRecentResults",O.noResultsBack="noResultsBack",O.showMoreFoldedResults="showMoreFoldedResults",O.showLessFoldedResults="showLessFoldedResults",O.copyToClipboard="copyToClipboard",O.caseSendEmail="Case.SendEmail",O.feedItemTextPost="FeedItem.TextPost",O.caseAttach="caseAttach",O.caseDetach="caseDetach",O.retryGeneratedAnswer="retryGeneratedAnswer",O.likeGeneratedAnswer="likeGeneratedAnswer",O.dislikeGeneratedAnswer="dislikeGeneratedAnswer",O.openGeneratedAnswerSource="openGeneratedAnswerSource",O.generatedAnswerStreamEnd="generatedAnswerStreamEnd",O.historyForward="historyForward",O.historyBackward="historyBackward",O))(T||{});var Ed=()=>pe,Ng=()=>P,Ut=h("configuration/updateBasicConfiguration",t=>y(t,{accessToken:pe,organizationId:pe,platformUrl:pe})),it=h("configuration/updateSearchConfiguration",t=>y(t,{apiBaseUrl:pe,pipeline:new b({required:!1,emptyAllowed:!0}),searchHub:pe,timezone:pe,locale:pe,authenticationProviders:new H({required:!1,each:P})})),Br=h("configuration/updateAnalyticsConfiguration",t=>(cs()&&(t.enabled=!1),y(t,{enabled:new $({default:!0}),originContext:Ed(),originLevel2:Ed(),originLevel3:Ed(),apiBaseUrl:pe,nextApiBaseUrl:pe,runtimeEnvironment:new ue,anonymous:new $({default:!1}),deviceId:pe,userDisplayName:pe,documentLocation:pe,trackingId:pe,analyticsMode:new b({constrainTo:["legacy","next"],required:!1,default:"legacy"})}))),Fn=h("configuration/analytics/disable"),bn=h("configuration/analytics/enable"),Bs=h("configuration/analytics/originlevel2",t=>y(t,{originLevel2:Ng()})),js=h("configuration/analytics/originlevel3",t=>y(t,{originLevel3:Ng()}));var Us={q:new b,enableQuerySyntax:new $,aq:new b,cq:new b,firstResult:new I({min:0}),numberOfResults:new I({min:0}),sortCriteria:new b,f:new E,fExcluded:new E,cf:new E,nf:new E,df:new E,debug:new $,sf:new E,tab:new b,af:new E};var se=h("searchParameters/restore",t=>y(t,Us));var jr=h("debug/enable"),Rn=h("debug/disable");var Ur=()=>!1;var _r=k(Ur(),t=>{t.addCase(jr,()=>!0).addCase(Rn,()=>!1).addCase(se,(e,r)=>{var a;return(a=r.payload.debug)!=null?a:e})});var Id=h("history/undo"),kd=h("history/redo"),Rt=h("history/snapshot"),xi=J("history/back",async(t,{dispatch:e})=>{e(Id()),await e(ie())}),_s=J("history/forward",async(t,{dispatch:e})=>{e(kd()),await e(ie())}),ie=J("history/change",async(t,{getState:e})=>e().history.present);var An=h("pipeline/set",t=>y(t,new b({required:!0,emptyAllowed:!0})));var Pn=k(Lr(),t=>{t.addCase(An,(e,r)=>r.payload).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.pipeline)!=null?n:e}).addCase(it,(e,r)=>r.payload.pipeline||e)});var wn=h("searchHub/set",t=>y(t,new b({required:!0,emptyAllowed:!0})));var En=k(Mt(),t=>{t.addCase(wn,(e,r)=>r.payload).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.searchHub)!=null?n:e}).addCase(it,(e,r)=>r.payload.searchHub||e)});var Ce=h("breadcrumb/deselectAll"),$r=h("breadcrumb/deselectAllNonBreadcrumbs");var st=h("facet/updateFacetAutoSelection",t=>y(t,{allow:new $({required:!0})}));var Od={id:P},LA={...Od,q:le},In=h("instantResults/register",t=>y(t,Od)),_t=h("instantResults/updateQuery",t=>y(t,LA)),kn=h("instantResults/clearExpired",t=>y(t,Od));var $s=new I({required:!0,min:0}),On=h("pagination/registerNumberOfResults",t=>y(t,$s)),qn=h("pagination/updateNumberOfResults",t=>y(t,$s)),Tn=h("pagination/registerPage",t=>y(t,$s)),ct=h("pagination/updatePage",t=>y(t,$s)),Dn=h("pagination/nextPage"),Vn=h("pagination/previousPage");var Qe=h("query/updateQuery",t=>y(t,{q:new b,enableQuerySyntax:new $}));var Nn=async(t,e)=>({analytics:{clientId:await at(t),clientTimestamp:new Date().toISOString(),documentReferrer:t.originLevel3,originContext:t.originContext,...e&&{actionCause:e.actionCause,customData:e.customData},...t.userDisplayName&&{userDisplayName:t.userDisplayName},...t.documentLocation&&{documentLocation:t.documentLocation},...t.deviceId&&{deviceId:t.deviceId},...dd()&&{pageId:dd()},...t.analyticsMode&&t.trackingId&&{trackingId:t.trackingId},capture:t.analyticsMode==="next"}});var Wr=async(t,e)=>{var r,a,n,o;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,debug:t.debug,tab:t.configuration.analytics.originLevel2,referrer:t.configuration.analytics.originLevel3,timezone:t.configuration.search.timezone,...t.configuration.analytics.enabled&&{visitorId:await at(t.configuration.analytics),actionsHistory:Lt.getHistory()},...((r=t.advancedSearchQueries)==null?void 0:r.aq)&&{aq:t.advancedSearchQueries.aq},...((a=t.advancedSearchQueries)==null?void 0:a.cq)&&{cq:t.advancedSearchQueries.cq},...((n=t.advancedSearchQueries)==null?void 0:n.lq)&&{lq:t.advancedSearchQueries.lq},...((o=t.advancedSearchQueries)==null?void 0:o.dq)&&{dq:t.advancedSearchQueries.dq},...t.context&&{context:t.context.contextValues},...t.fields&&!t.fields.fetchAllFields&&{fieldsToInclude:t.fields.fieldsToInclude},...t.dictionaryFieldContext&&{dictionaryFieldContext:t.dictionaryFieldContext.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.query&&{q:t.query.q,enableQuerySyntax:t.query.enableQuerySyntax},...t.searchHub&&{searchHub:t.searchHub},...t.sortCriteria&&{sortCriteria:t.sortCriteria},...t.configuration.analytics.enabled&&await Nn(t.configuration.analytics,e),...t.excerptLength&&!ee(t.excerptLength.length)&&{excerptLength:t.excerptLength.length},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}};var qd=class extends L{constructor(e){super(e);this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let r in e)for(let a in e[r].cache)if(e[r].cache[a].isActive)return e[r].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let r in e)for(let a in e[r].cache)if(e[r].cache[a].isActive)return e[r].cache[a];return null}get results(){var e;return(e=this.activeInstantResultCache)==null?void 0:e.results}get queryText(){var e;return(e=this.activeInstantResultQuery)!=null?e:Fe().q}get responseTime(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.duration)!=null?r:Me().duration}get numberOfResults(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.totalCountFiltered)!=null?r:Me().response.totalCountFiltered}getSearchUID(){var r;return((r=this.activeInstantResultCache)==null?void 0:r.searchUid)||super.getSearchUID()}};var Mg=()=>w("analytics/instantResult/searchboxAsYouType",t=>t.makeSearchboxAsYouType(),t=>new qd(t));var At=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var Td=()=>w("search/logFetchMoreResults",t=>t.makeFetchMoreResults()),ut=t=>w("search/queryError",(e,r)=>{var a,n,o,i;return e.makeQueryError({query:((a=r.query)==null?void 0:a.q)||Fe().q,aq:((n=r.advancedSearchQueries)==null?void 0:n.aq)||At().aq,cq:((o=r.advancedSearchQueries)==null?void 0:o.cq)||At().cq,dq:((i=r.advancedSearchQueries)==null?void 0:i.dq)||At().dq,errorType:t.type,errorMessage:t.message})});var Fi=Ge(Ws()),Ug=Ge(Lg());var Hs=Ge(Ws()),Bg=Ge(Qg());Hs.default.extend(Bg.default);var Mn="YYYY/MM/DD@HH:mm:ss",QA="1401-01-01";function ba(t,e){let r=(0,Hs.default)(t,e);return!r.isValid()&&!e?(0,Hs.default)(t,Mn):r}function vi(t){return t.format(Mn)}function jg(t){return vi(ba(t))===t}function zs(t,e){let r=ba(t,e);if(!r.isValid()){let a=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${e}""`;throw new Error(`Could not parse the provided date "${t}"${e?n:a}`)}Bd(r)}function Bd(t){if(t.isBefore(QA))throw new Error(`Date is before year 1401, which is unsupported by the API: ${t}`)}Fi.default.extend(Ug.default);var _g=["past","now","next"],$g=["minute","hour","day","week","month","quarter","year"],BA=t=>{let e=t==="now";return{amount:new I({required:!e,min:1}),unit:new b({required:!e,constrainTo:$g}),period:new b({required:!0,constrainTo:_g})}};function Hr(t){if(typeof t=="string"&&!$t(t))throw new Error(`The value "${t}" is not respecting the relative date format "period-amount-unit"`);let e=typeof t=="string"?jd(t):t;new z(BA(e.period)).validate(e);let r=Hg(e),a=JSON.stringify(e);if(!r.isValid())throw new Error(`Date is invalid: ${a}`);Bd(r)}function Wg(t){let{period:e,amount:r,unit:a}=t;switch(e){case"past":case"next":return`${e}-${r}-${a}`;case"now":return e}}function Hg(t){let{period:e,amount:r,unit:a}=t;switch(e){case"past":return(0,Fi.default)().subtract(r,a);case"next":return(0,Fi.default)().add(r,a);case"now":return(0,Fi.default)()}}function bi(t){return vi(Hg(jd(t)))}function zg(t){return t.toLocaleLowerCase().split("-")}function $t(t){let[e,r,a]=zg(t);if(e==="now")return!0;if(!_g.includes(e)||!$g.includes(a))return!1;let n=parseInt(r);return!(isNaN(n)||n<=0)}function Gg(t){return!!t&&typeof t=="object"&&"period"in t}function jd(t){let[e,r,a]=zg(t);return e==="now"?{period:"now"}:{period:e,amount:r?parseInt(r):void 0,unit:a||void 0}}function Yg(t){return Hr(t),jd(t)}function Kg(t){return t.type==="dateRange"}function Jg(t){return`start${t}`}function Xg(t){return`end${t}`}var jA=()=>({dateFacetValueMap:{}});function UA(t,e,r){let a=t.start,n=t.end;return $t(a)&&(a=bi(a),r.dateFacetValueMap[e][Jg(a)]=t.start),$t(n)&&(n=bi(n),r.dateFacetValueMap[e][Xg(n)]=t.end),{...t,start:a,end:n}}function _A(t,e){if(Kg(t)){let{facetId:r,currentValues:a}=t;return e.dateFacetValueMap[r]={},{...t,currentValues:a.map(n=>UA(n,r,e))}}return t}function Ln(t){var a;let e=jA();return{request:{...t,facets:(a=t.facets)==null?void 0:a.map(n=>_A(n,e))},mappings:e}}function $A(t,e,r){return{...t,start:r.dateFacetValueMap[e][Jg(t.start)]||t.start,end:r.dateFacetValueMap[e][Xg(t.end)]||t.end}}function WA(t,e){return t.facetId in e.dateFacetValueMap}function HA(t,e){return WA(t,e)?{...t,values:t.values.map(r=>$A(r,t.facetId,e))}:t}function Gs(t,e){var r;return"success"in t?{success:{...t.success,facets:(r=t.success.facets)==null?void 0:r.map(n=>HA(n,e))}}:t}function Qn(t,e){let r={};t.forEach(o=>r[o.facetId]=o);let a=[];e.forEach(o=>{o in r&&(a.push(r[o]),delete r[o])});let n=Object.values(r);return[...a,...n]}function xr(t){return Object.values(t).map(e=>e.request)}var Ra=1,Ri=5e3;var we=async(t,e)=>{var s,c;let r=ZA(t),a=zA(t),n=GA(t),o=await Wr(t,e),i=()=>t.pagination?t.pagination.firstResult+t.pagination.numberOfResults>Ri?Ri-t.pagination.firstResult:t.pagination.numberOfResults:void 0;return Ln({...o,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},...r&&{cq:r},...a.length&&{facets:a},...t.pagination&&{numberOfResults:i(),firstResult:t.pagination.firstResult},...t.facetOptions&&{facetOptions:{freezeFacetOrder:t.facetOptions.freezeFacetOrder}},...((s=t.folding)==null?void 0:s.enabled)&&{filterField:t.folding.fields.collection,childField:t.folding.fields.parent,parentField:t.folding.fields.child,filterFieldRange:t.folding.filterFieldRange},...t.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:t.automaticFacetSet.desiredCount,numberOfValues:t.automaticFacetSet.numberOfValues,currentFacets:n}},...((c=t.generatedAnswer)==null?void 0:c.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:t.generatedAnswer.responseFormat}}}})};function zA(t){var e;return Qn(KA(t),(e=t.facetOrder)!=null?e:[])}function GA(t){var r;let e=(r=t.automaticFacetSet)==null?void 0:r.set;return e?Object.values(e).map(a=>a.response).map(YA).filter(a=>a.currentValues.length>0):void 0}function YA(t){let{field:e,label:r,values:a}=t,n=a.filter(o=>o.state==="selected");return{field:e,label:r,currentValues:n}}function KA(t){return JA(t).filter(({facetId:e})=>{var r,a,n;return(n=(a=(r=t.facetOptions)==null?void 0:r.facets[e])==null?void 0:a.enabled)!=null?n:!0})}function JA(t){var e,r,a,n;return[...XA((e=t.facetSet)!=null?e:{}),...Zg((r=t.numericFacetSet)!=null?r:{}),...Zg((a=t.dateFacetSet)!=null?a:{}),...xr((n=t.categoryFacetSet)!=null?n:{})]}function XA(t){return xr(t).map(e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e)}function Zg(t){return xr(t).map(e=>{let a=e.currentValues.some(({state:n})=>n!=="idle");return e.generateAutomaticRanges&&!a?{...e,currentValues:[]}:e})}function ZA(t){var o;let e=((o=t.advancedSearchQueries)==null?void 0:o.cq.trim())||"",r=Object.values(t.tabSet||{}).find(i=>i.isActive),a=(r==null?void 0:r.expression.trim())||"",n=eP(t);return[e,a,...n].filter(i=>!!i).join(" AND ")}function eP(t){return Object.values(t.staticFilterSet||{}).map(r=>{let a=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),n=a.map(o=>o.expression).join(" OR ");return a.length>1?`(${n})`:n})}var Bn=h("didYouMean/enable"),Ys=h("didYouMean/disable"),jn=h("didYouMean/automaticCorrections/disable"),Ks=h("didYouMean/automaticCorrections/enable"),lt=h("didYouMean/correction",t=>y(t,P));var Js=()=>w("analytics/didyoumean/click",t=>t.makeDidYouMeanClick()),eh=()=>w("analytics/didyoumean/automatic",t=>t.makeDidYouMeanAutomatic());function Xs(){return{contextValues:{}}}function Zs(){return{contextValues:{}}}function Un(){return{enabled:!0}}function ec(){return{freezeFacetOrder:!1,facets:{}}}function tc(){return[]}function rc(){return{}}function ac(t){return t?t.expiresAt&&Date.now()>=t.expiresAt:!1}function dt(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function nc(){return{}}function oc(){return{}}function ic(){return{}}function th(){return vr({})}function vr(t){var e,r,a;return{context:t.context||Xs(),dictionaryFieldContext:t.dictionaryFieldContext||Zs(),facetSet:t.facetSet||un(),numericFacetSet:t.numericFacetSet||cn(),dateFacetSet:t.dateFacetSet||sn(),categoryFacetSet:t.categoryFacetSet||on(),automaticFacetSet:(e=t.automaticFacetSet)!=null?e:an(),pagination:t.pagination||dt(),query:t.query||Fe(),tabSet:t.tabSet||ic(),advancedSearchQueries:t.advancedSearchQueries||At(),staticFilterSet:t.staticFilterSet||oc(),querySet:t.querySet||nc(),instantResults:t.instantResults||rc(),sortCriteria:t.sortCriteria||rt(),pipeline:t.pipeline||Lr(),searchHub:t.searchHub||Mt(),facetOptions:t.facetOptions||ec(),facetOrder:(r=t.facetOrder)!=null?r:tc(),debug:(a=t.debug)!=null?a:Ur()}}var tP=new E({values:{undoneQuery:le},options:{required:!0}}),sc=()=>w("analytics/trigger/query",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.queryModification.newQuery)?t.makeTriggerQuery():null}),cc=t=>w("analytics/trigger/query/undo",e=>(y(t,tP),e.makeUndoTriggerQuery(t))),uc=()=>w("analytics/trigger/notify",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.notifications.length)?t.makeTriggerNotify({notifications:e.triggers.notifications}):null}),lc=()=>w("analytics/trigger/redirect",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.redirectTo)?t.makeTriggerRedirect({redirectedTo:e.triggers.redirectTo}):null}),dc=()=>w("analytics/trigger/execute",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.executions.length)?t.makeTriggerExecute({executions:e.triggers.executions}):null});var zr=h("trigger/query/ignore",t=>y(t,new b({emptyAllowed:!0,required:!0}))),_n=h("trigger/query/modification",t=>y(t,new E({values:{originalQuery:pe,modification:pe}})));var Aa=class{constructor(e,r=a=>{this.dispatch(Qe({q:a}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},a){var c;let n=new Date().getTime(),o=Gs(await this.extra.apiClient.search(r,a),e),i=new Date().getTime()-n,s=((c=this.getState().query)==null?void 0:c.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(e){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?a:await this.processQueryTriggersOrContinue(e))!=null?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return ye(e.response)?(this.dispatch(ut(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),a=this.getSuccessResponse(e);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let u=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return ye(d.response)?(this.dispatch(ut(d.response.error)),this.rejectWithValue(d.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(e.queryExecuted,e.duration,r,a),this.extra),this.dispatch(Rt(vr(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:u,analyticsAction:eh()})}async processQueryTriggersOrContinue(e){var s,c;let r=this.getSuccessResponse(e);if(!r)return null;let a=((s=r.triggers.find(u=>u.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((c=this.getState().triggers)==null?void 0:c.queryModification.queryToIgnore)===a)return this.dispatch(zr("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return ye(i.response)?(this.dispatch(ut(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Rt(vr(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:sc()})}processSuccessResponse(e){return this.dispatch(Rt(vr(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return qs(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await we(this.getState()),{origin:"mainSearch"});return this.dispatch(lt(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(_n({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await we(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(e,r,a,n){var o,i;return{...a,query:{q:e,enableQuerySyntax:(i=(o=a.query)==null?void 0:o.enableQuerySyntax)!=null?i:Fe().enableQuerySyntax},search:{...Me(),duration:r,response:n,results:n.results}}}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var DL=J("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;y(t,{q:new b,enableQuerySyntax:new $,clearFilters:new $}),t.clearFilters&&(r(Ce()),r($r())),r(st({allow:!0})),r(Qe({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(ct(1))}),$n=J("search/executeSearch",async(t,e)=>{let r=e.getState();return await fc(r,e,t)}),Wn=J("search/fetchPage",async(t,e)=>{let r=e.getState();return await _d(r,e,t)}),Hn=J("search/fetchMoreResults",async(t,e)=>{let r=e.getState();return await $d(e,r)}),pc=J("search/fetchFacetValues",async(t,e)=>{let r=e.getState();return await oP(e,t,r)}),rh=J("search/fetchInstantResults",async(t,e)=>Ud(t,e)),rP=async(t,e)=>{var a,n,o,i;let r=await we(t,e);return r.request={...r.request,firstResult:((n=(a=t.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=t.search)==null?void 0:o.results.length)!=null?i:0)},r},aP=async(t,e,r)=>{let a=await Wr(t);return Ln({...a,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},nP=async(t,e)=>{let r=await we(t,e);return r.request.numberOfResults=0,r},ah=t=>{var e;t.configuration.analytics.enabled&&Lt.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})};async function Ud(t,e){y(t,{id:P,q:P,maxResultsPerQuery:new I({required:!0,min:1}),cacheTimeout:new I});let{q:r,maxResultsPerQuery:a}=t,n=e.getState(),o=new Aa({...e,analyticsAction:Mg()},u=>{e.dispatch(_t({q:u,id:t.id}))}),i=await aP(n,r,a),s=await o.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),c=await o.process(s);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,analyticsAction:c.analyticsAction,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}async function _d(t,e,r){ah(t);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=e.extra,{description:i}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Aa({...e,analyticsAction:r}),c=await we(t,i),u=await s.fetchFromAPI(c,{origin:"mainSearch"});return await s.process(u)}async function $d(t,e){let{analyticsClientMiddleware:r,preprocessRequest:a,logger:n}=t.extra,{description:o}=await Td().prepare({getState:()=>t.getState(),analyticsClientMiddleware:r,preprocessRequest:a,logger:n}),i=new Aa({...t,analyticsAction:Td()}),s=await rP(e,o),c=await i.fetchFromAPI(s,{origin:"mainSearch"});return await i.process(c)}async function oP(t,e,r){let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Aa({...t,analyticsAction:e}),c=await nP(r,i),u=await s.fetchFromAPI(c,{origin:"facetValues"});return await s.process(u)}async function fc(t,e,r){ah(t);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=e.extra,{description:i}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=await we(t,i),c=new Aa({...e,analyticsAction:r}),u=await c.fetchFromAPI(s,{origin:"mainSearch"});return await c.process(u)}var Pa=class{constructor(e,r=a=>{this.dispatch(Qe({q:a}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},a){var c;let n=new Date().getTime(),o=Gs(await this.extra.apiClient.search(r,a),e),i=new Date().getTime()-n,s=((c=this.getState().query)==null?void 0:c.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(e){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?a:await this.processQueryTriggersOrContinue(e))!=null?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return ye(e.response)?(this.dispatch(ut(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),a=this.getSuccessResponse(e);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let u=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return ye(d.response)?(this.dispatch(ut(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(Rt(vr(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:u,analyticsAction:xn(T.didyoumeanAutomatic,this.getState)})}async processQueryTriggersOrContinue(e){var s,c;let r=this.getSuccessResponse(e);if(!r)return null;let a=((s=r.triggers.find(u=>u.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((c=this.getState().triggers)==null?void 0:c.queryModification.queryToIgnore)===a)return this.dispatch(zr("")),null;let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return ye(i.response)?(this.dispatch(ut(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Rt(vr(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:xn(T.triggerQuery,this.getState)})}processSuccessResponse(e){return this.dispatch(Rt(vr(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return qs(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await we(this.getState()),{origin:"mainSearch"});return this.dispatch(lt(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(_n({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await we(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var mc=J("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;y(t,{q:new b,enableQuerySyntax:new $,clearFilters:new $}),t.clearFilters&&(r(Ce()),r($r())),r(st({allow:!0})),r(Qe({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(ct(1))}),R=J("search/executeSearch",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return fc(r,e,t.legacy);nh(r);let a=oh(t.next,r),n=await we(r,a),o=new Pa({...e,analyticsAction:a}),i=await o.fetchFromAPI(n,{origin:"mainSearch"});return await o.process(i)}),Wt=J("search/fetchPage",async(t,e)=>{let r=e.getState();if(nh(r),r.configuration.analytics.analyticsMode==="legacy"||!t.next)return _d(r,e,t.legacy);let a=new Pa({...e,analyticsAction:t.next}),n=await we(r,t.next),o=await a.fetchFromAPI(n,{origin:"mainSearch"});return await a.process(o)}),Gr=J("search/fetchMoreResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return $d(e,r);let a=xn(T.pagerScrolling,e.getState),n=new Pa({...e,analyticsAction:a}),o=await iP(r,a),i=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(i)}),Ht=J("search/fetchFacetValues",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return fc(r,e,t.legacy);let a=oh(t.next,r),n=new Pa({...e,analyticsAction:a}),o=await cP(r,a),i=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(i)}),zn=J("search/fetchInstantResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Ud(t,e);y(t,{id:P,q:P,maxResultsPerQuery:new I({required:!0,min:1}),cacheTimeout:new I});let{q:a,maxResultsPerQuery:n}=t,o=xn(T.searchboxAsYouType,e.getState),i=new Pa({...e,analyticsAction:o},l=>{e.dispatch(_t({q:l,id:t.id}))}),s=await sP(r,a,n),c=await i.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),u=await i.process(c);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}),iP=async(t,e)=>{var a,n,o,i;let r=await we(t,e);return r.request={...r.request,firstResult:((n=(a=t.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=t.search)==null?void 0:o.results.length)!=null?i:0)},r},sP=async(t,e,r)=>{let a=await Wr(t);return Ln({...a,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},cP=async(t,e)=>{let r=await we(t,e);return r.request.numberOfResults=0,r},nh=t=>{var e;t.configuration.analytics.enabled&&Lt.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})},oh=(t,e)=>({customData:t.getEventExtraPayload(e),actionCause:t.actionCause,type:t.actionCause});var Fr=(t,e)=>{let r=t;return ee(r[e])?ee(t.raw[e])?null:t.raw[e]:r[e]},ih=t=>e=>t.every(r=>!ee(Fr(e,r))),sh=t=>e=>t.every(r=>ee(Fr(e,r))),ch=(t,e)=>r=>{let a=lh(t,r);return e.some(n=>a.some(o=>`${o}`.toLowerCase()===n.toLowerCase()))},uh=(t,e)=>r=>{let a=lh(t,r);return e.every(n=>a.every(o=>`${o}`.toLowerCase()!==n.toLowerCase()))},lh=(t,e)=>{let r=Fr(e,t);return os(r)?r:[r]};function Ai(t){return t.search.response.searchUid!==""}function dh(t,e,r){return t.search.results.find(a=>Fr(a,e)===r)}function Wd(t,e){var a;let r=(a=e.payload)!=null?a:null;r&&(t.response=Me().response,t.results=[],t.questionAnswer=dn()),t.error=r,t.isLoading=!1}function Hd(t,e){t.error=null,t.response=e.payload.response,t.queryExecuted=e.payload.queryExecuted,t.duration=e.payload.duration,t.isLoading=!1}function uP(t,e){Hd(t,e),t.results=e.payload.response.results,t.searchResponseId=e.payload.response.searchUid,t.questionAnswer=e.payload.response.questionAnswer,t.extendedResults=e.payload.response.extendedResults}function zd(t,e){t.isLoading=!0,t.requestId=e.meta.requestId}var W=k(Me(),t=>{t.addCase($n.rejected,(e,r)=>Wd(e,r)),t.addCase(Hn.rejected,(e,r)=>Wd(e,r)),t.addCase(Wn.rejected,(e,r)=>Wd(e,r)),t.addCase($n.fulfilled,(e,r)=>{uP(e,r)}),t.addCase(Hn.fulfilled,(e,r)=>{Hd(e,r),e.results=[...e.results,...r.payload.response.results]}),t.addCase(Wn.fulfilled,(e,r)=>{Hd(e,r),e.results=r.payload.response.results}),t.addCase(pc.fulfilled,(e,r)=>{e.response.facets=r.payload.response.facets,e.response.searchUid=r.payload.response.searchUid}),t.addCase($n.pending,zd),t.addCase(Hn.pending,zd),t.addCase(Wn.pending,zd)});var ph=k(gn,t=>t);var fh=t=>e=>r=>{var o,i;let a=(o=r.payload)==null?void 0:o.analyticsAction;a!==void 0&&((i=r.payload)==null||delete i.analyticsAction);let n=e(r);return r.type==="search/executeSearch/fullfilled"&&a===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with product recommendation:",r),a!==void 0&&t.dispatch(a),n};var xh=Ge(gh());var Gn=h("tab/register",t=>{let e=new E({values:{id:P,expression:le}});return y(t,e)}),Pt=h("tab/updateActiveTab",t=>y(t,P));var gc=Ge(Ws()),yh=Ge(hh()),Ch=Ge(Sh());gc.default.extend(Ch.default);gc.default.extend(yh.default);var Xd="/rest/search/v2",Zd="/rest/ua",Yn=()=>({organizationId:"",accessToken:"",platformUrl:yi(),search:{apiBaseUrl:`${yi()}${Xd}`,locale:"en-US",timezone:gc.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${ks()}${Zd}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}});function dP(t,e){if(Km(t))return t.replace(/^(https:\/\/)platform/,"$1analytics")+Zd;let a=Jm(t,e);return a?Sn(e,a.environment).analytics:t}var Kn=k(Yn(),t=>t.addCase(Ut,(e,r)=>{r.payload.accessToken&&(e.accessToken=r.payload.accessToken),r.payload.organizationId&&(e.organizationId=r.payload.organizationId),r.payload.platformUrl&&(e.platformUrl=r.payload.platformUrl,e.search.apiBaseUrl=`${r.payload.platformUrl}${Xd}`,e.analytics.apiBaseUrl=dP(r.payload.platformUrl,e.organizationId))}).addCase(it,(e,r)=>{r.payload.apiBaseUrl&&(e.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(e.search.locale=r.payload.locale),r.payload.timezone&&(e.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(e.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(Br,(e,r)=>{ee(r.payload.enabled)||(!r.payload.enabled&&e.analytics.enabled&&ld(e.analytics),e.analytics.enabled=r.payload.enabled),ee(r.payload.originContext)||(e.analytics.originContext=r.payload.originContext),ee(r.payload.originLevel2)||(e.analytics.originLevel2=r.payload.originLevel2),ee(r.payload.originLevel3)||(e.analytics.originLevel3=r.payload.originLevel3),ee(r.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=r.payload.apiBaseUrl),ee(r.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),ee(r.payload.trackingId)||(e.analytics.trackingId=r.payload.trackingId),ee(r.payload.analyticsMode)||(e.analytics.analyticsMode=r.payload.analyticsMode);let a=(0,xh.default)();a&&(e.analytics.analyticsMode="next",e.analytics.trackingId=a),ee(r.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),ee(r.payload.anonymous)||(e.analytics.anonymous=r.payload.anonymous),ee(r.payload.deviceId)||(e.analytics.deviceId=r.payload.deviceId),ee(r.payload.userDisplayName)||(e.analytics.userDisplayName=r.payload.userDisplayName),ee(r.payload.documentLocation)||(e.analytics.documentLocation=r.payload.documentLocation)}).addCase(Fn,e=>{e.analytics.enabled=!1,ld(e.analytics)}).addCase(bn,e=>{e.analytics.enabled=!0}).addCase(Bs,(e,r)=>{e.analytics.originLevel2=r.payload.originLevel2}).addCase(js,(e,r)=>{e.analytics.originLevel3=r.payload.originLevel3}).addCase(Pt,(e,r)=>{e.analytics.originLevel2=r.payload}).addCase(se,(e,r)=>{e.analytics.originLevel2=r.payload.tab||e.analytics.originLevel2}));var j=Kn;function pP(t){return t.instantlyCallable}var vh=()=>t=>e=>t(pP(e)?e():e);var Fh=t=>()=>e=>r=>{var n;if(!r.error)return e(r);let a=r.error;if(((n=r.payload)==null?void 0:n.ignored)||t.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return e(r)},bh=t=>e=>r=>a=>(t.debug({action:a,nextState:e.getState()},`Action dispatched: ${a.type}`),r(a));function Rh(t,e){let r={...t},a,n=o=>(i,s)=>{let c=o(i,s);return a?a(c,s):c};return{get combinedReducer(){let o=Nf(Object.entries(e).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return n(ns({...o,...r}))},containsAll(o){return Object.keys(o).every(s=>s in r)},add(o){Object.keys(o).filter(i=>!(i in r)).forEach(i=>r[i]=o[i])},addCrossReducer(o){a=o}}}function hc(t,e,r){var a,n,o;e===void 0&&(e=50),r===void 0&&(r={});var i=(a=r.isImmediate)!=null&&a,s=(n=r.callback)!=null&&n,c=r.maxWait,u=Date.now(),l=[];function d(){if(c!==void 0){var p=Date.now()-u;if(p+e>=c)return c-p}return e}var f=function(){var p=[].slice.call(arguments),m=this;return new Promise(function(S,v){var C=i&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,u=Date.now(),!i){var D=t.apply(m,p);s&&s(D),l.forEach(function(Q){return(0,Q.resolve)(D)}),l=[]}},d()),C){var F=t.apply(m,p);return s&&s(F),S(F)}l.push({resolve:S,reject:v})})};return f.cancel=function(p){o!==void 0&&clearTimeout(o),l.forEach(function(m){return(0,m.reject)(p)}),l=[]},f}function Ah(t,e){let r=0,a=hc(()=>r=0,500);return n=>o=>async i=>{if(!(typeof i=="function"))return o(i);let c=await o(i);if(!fP(c))return c;if(typeof e!="function")return t.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),c;if(r>=5)return t.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),c;r++,a();let u=await mP(e);n.dispatch(Ut({accessToken:u})),n.dispatch(i)}}function fP(t){var e;return((e=t==null?void 0:t.error)==null?void 0:e.name)===new Si().name}async function mP(t){try{return await t()}catch(e){return""}}function Ph({reducer:t,preloadedState:e,middlewares:r=[],thunkExtraArguments:a,name:n}){return Rf({reducer:t,preloadedState:e,devTools:{stateSanitizer:o=>o.history?{...o,history:"<<OMIT>>"}:o,name:n,shouldHotReload:!1},middleware:o=>[...r,...o({thunk:{extraArgument:a}}),bh(a.logger)]})}var gP={configuration:j,version:ph};function hP(t,e){var i,s;let r=((i=t.configuration.organizationEndpoints)==null?void 0:i.analytics)||void 0,{analyticsClientMiddleware:a,...n}=(s=t.configuration.analytics)!=null?s:{},o={...n,nextApiBaseUrl:`${r}/rest/organizations/${t.configuration.organizationId}/events/v1`,apiBaseUrl:r};return cs()?(e.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function wh(t,e){var c;let r=SP(t,e),{accessToken:a,organizationId:n}=t.configuration,{organizationEndpoints:o}=t.configuration,i=(o==null?void 0:o.platform)||t.configuration.platformUrl;vP(t)&&r.logger.warn(`The \`platformUrl\` (${t.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),xP(t)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):FP(t)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${t.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(c=t.configuration.organizationEndpoints)==null?void 0:c.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(Ut({accessToken:a,organizationId:n,platformUrl:i}));let s=hP(t,r.logger);return s&&r.dispatch(Br(s)),r}function SP(t,e){var i;let{reducers:r}=t,a=Rh({...gP,...r},(i=t.preloadedState)!=null?i:{});t.crossReducer&&a.addCrossReducer(t.crossReducer);let n=e.logger,o=yP(t,e,a);return{addReducers(s){a.containsAll(s)||(a.add(s),o.replaceReducer(a.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(bn())},disableAnalytics(){o.dispatch(Fn())},get state(){return o.getState()},logger:n,store:o}}function yP(t,e,r){let{preloadedState:a,configuration:n}=t,o=n.name||"coveo-headless",i=CP(t,e.logger);return Ph({preloadedState:a,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:e,name:o})}function CP(t,e){let{renewAccessToken:r}=t.configuration,a=Ah(e,r);return[vh,a,Fh(e),fh].concat(t.middlewares||[])}function xP(t){return Ae(t.configuration.organizationEndpoints)}function vP(t){var e;return!ee(t.configuration.platformUrl)||ee((e=t.configuration.organizationEndpoints)==null?void 0:e.platform)}function FP(t){let{platform:e}=t.configuration.organizationEndpoints;if(Ae(e))return!1;let r=md(e);return r&&r.organizationId!==t.configuration.organizationId}var Nh=Ge(Vh());function Mh(t){return(0,Nh.default)({name:"@coveo/headless",level:(t==null?void 0:t.level)||"warn",formatters:{log:t==null?void 0:t.logFormatter}})}function Lh(t,e){let r=BP(t),a=nt,n=jP(t);return{analyticsClientMiddleware:r,validatePayload:a,preprocessRequest:n,logger:e}}function BP(t){let{analytics:e}=t,r=(a,n)=>n;return(e==null?void 0:e.analyticsClientMiddleware)||r}function jP(t){return t.preprocessRequest||Es}var Qh=Ge(_l());var np=(t,e,r,a,n,o)=>{let i=t[e];ee(i)||ee(n)||n!==i&&n!==a&&(o.warn(`Mismatch on access token (JWT Token) ${e} and engine configuration.`),o.warn(`To remove this warning, make sure that access token value [${i}] matches engine configuration value [${r}]`))},op=(t,e)=>!(ee(t)||e===t),Ei=t=>{try{let e=typeof atob!="undefined"?atob:Qh.atob,a=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=e(a);if(!n)return!1;let o=decodeURIComponent(n.split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(o)}catch(e){return!1}},Bh=(t,e)=>(op(t.searchHub,e.searchHub)&&(e.searchHub=t.searchHub),e),jh=(t,e,r,a)=>(np(t,"searchHub",e.searchHub,Mt(),r,a),Bh(t,e)),Uh=(t,e)=>(op(t.pipeline,e.pipeline)&&(e.pipeline=t.pipeline),e),_h=(t,e,r,a)=>(np(t,"pipeline",e.pipeline,Lr(),r,a),Uh(t,e)),$h=(t,e)=>(op(t.userDisplayName,e.configuration.analytics.userDisplayName)&&(e.configuration.analytics.userDisplayName=t.userDisplayName),e),UP=(t,e,r,a)=>(np(t,"userDisplayName",e.configuration.analytics.userDisplayName,Yn().analytics.userDisplayName,r,a),$h(t,e)),Wh=t=>k({},e=>{e.addCase(wn,(r,a)=>{let n=Ei(r.configuration.accessToken);return n?jh(n,r,a.payload,t):r}).addCase(An,(r,a)=>{let n=Ei(r.configuration.accessToken);return n?_h(n,r,a.payload,t):r}).addCase(Ut,(r,a)=>{if(r.configuration.accessToken!==a.payload.accessToken)return r;let{accessToken:n}=a.payload;if(!n)return r;let o=Ei(n);return o?[Uh,Bh,$h].reduce((i,s)=>s(o,i),r):r}).addCase(it,(r,a)=>{var s;let n=Ei(r.configuration.accessToken);if(!n)return r;let o=jh(n,r,a.payload.searchHub,t);return _h(n,o,(s=a.payload)==null?void 0:s.pipeline,t)}).addCase(Br,(r,a)=>{let n=Ei(r.configuration.accessToken);return n?UP(n,r,a.payload.userDisplayName,t):r})});var Hh={organizationId:P,accessToken:P,platformUrl:new b({required:!1,emptyAllowed:!1}),name:new b({required:!1,emptyAllowed:!1}),analytics:new E({options:{required:!1},values:{enabled:new $({required:!1}),originContext:new b({required:!1}),originLevel2:new b({required:!1}),originLevel3:new b({required:!1}),analyticsMode:new b({constrainTo:["legacy","next"],required:!1})}})};function zh(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:Sn("searchuisamples")}}var Gh=new z({...Hh,search:new E({options:{required:!1},values:{pipeline:new b({required:!1,emptyAllowed:!0}),searchHub:pe,locale:pe,timezone:pe,authenticationProviders:new H({required:!1,each:P})}})});function ip(){return{...zh(),search:{searchHub:"default"}}}var _P={debug:_r,pipeline:Pn,searchHub:En,search:W};function $P(t){var n;let e=t.configuration.search,r=((n=t.configuration.organizationEndpoints)==null?void 0:n.search)||void 0;return{...e,apiBaseUrl:r}}function Yh(t){let e=Mh(t.loggerOptions);WP(t.configuration,e);let r=HP(t.configuration,e),a=zP(e),n={...Lh(t.configuration,e),apiClient:r,streamingClient:a},o={...t,reducers:_P,crossReducer:Wh(e)},i=wh(o,n),s=$P(t);return s&&i.dispatch(it(s)),{...i,get state(){return i.state},executeFirstSearch(c=Ms()){if(Ai(i.state))return;let u=R({legacy:c,next:{actionCause:T.interfaceLoad,getEventExtraPayload:l=>new L(()=>l).getBaseMetadata()}});i.dispatch(u)},executeFirstSearchAfterStandaloneSearchBoxRedirect(c){let{cause:u,metadata:l}=c;if(Ai(i.state))return;let d=l&&u==="omniboxFromLink",f=R({legacy:d?Qs(l):Ls(),next:{actionCause:d?T.omniboxFromLink:T.searchFromLink,getEventExtraPayload:d?p=>new L(()=>p).getOmniboxFromLinkMetadata(l):p=>new L(()=>p).getBaseMetadata()}});i.dispatch(f)}}}function WP(t,e){try{Gh.validate(t)}catch(r){throw e.error(r,"Search engine configuration error"),r}}function HP(t,e){let{search:r}=t;return new Ad({logger:e,preprocessRequest:t.preprocessRequest||Es,postprocessSearchResponseMiddleware:(r==null?void 0:r.preprocessSearchResponseMiddleware)||Cg,postprocessFacetSearchResponseMiddleware:(r==null?void 0:r.preprocessFacetSearchResponseMiddleware)||xg,postprocessQuerySuggestResponseMiddleware:(r==null?void 0:r.preprocessQuerySuggestResponseMiddleware)||vg})}function zP(t){return new hd({logger:t})}function GP(t){return/^search\/executeSearch\/(fulfilled|rejected)$/.test(t.type)}function YP(t){var n;let{middleware:e,promise:r}=Lf(GP),a=Yh({...t,middlewares:[...(n=t.middlewares)!=null?n:[],e]});return{...a,get state(){return a.state},waitForSearchCompletedAction(){return r}}}function Kh({controllers:t,...e}){let r=async(...[o])=>{let i=YP((o==null?void 0:o.extend)?await o.extend(e):e),s=Qf({definitionsMap:t!=null?t:{},engine:i,propsMap:o&&"controllers"in o?o.controllers:{}});return{engine:i,controllers:s}},a=Wl(async(...o)=>{let i=await r(...o);return await a.fromBuildResult({buildResult:i})},{fromBuildResult:async(...o)=>{let[{buildResult:{engine:i,controllers:s}}]=o;return i.executeFirstSearch(),Bf({searchAction:await i.waitForSearchCompletedAction(),controllers:s})}}),n=Wl(async(...o)=>{let i=await r(...o);return await n.fromBuildResult({buildResult:i,searchAction:o[0].searchAction})},{fromBuildResult:async(...o)=>{let[{buildResult:{engine:i,controllers:s},searchAction:c}]=o;return i.dispatch(c),await i.waitForSearchCompletedAction(),{engine:i,controllers:s}}});return{build:r,fetchStaticState:a,hydrateStaticState:n}}var Jh=t=>{let e=/Document weights:\n((?:.)*?)\n+/g,r=/Terms weights:\n((?:.|\n)*)\n+/g,a=/Total weight: ([0-9]+)/g;if(!t)return null;let n=e.exec(t),o=r.exec(t),i=a.exec(t),s=JP(t),c=Xh(n?n[1]:null),u=KP(o),l=i?Number(i[1]):null;return{documentWeights:c,termsWeight:u,totalWeight:l,qreWeights:s}},Xh=t=>{let e=/(\w+(?:\s\w+)*): ([-0-9]+)/g,r=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!t)return null;let a=t.match(e);if(!a)return null;let n={};for(let o of a){let i=o.match(r);if(i){let s=i[1],c=i[2];n[s]=Number(c)}}return n},Zh=(t,e)=>{let r=[],a;for(;(a=e.exec(t))!==null;)r.push(a);return r},KP=t=>{let e=/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g,r=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!t||!t[1])return null;let a=Zh(t[1],e);if(!a)return null;let n={};for(let o of a){let i=Zh(o[1],r),s={};for(let u of i)s[u[1]]={Correlation:Number(u[2]),"TF-IDF":Number(u[3])};let c=Xh(o[2]);n[Object.keys(s).join(", ")]={terms:s,Weights:c}}return n},JP=t=>{let e=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=e.exec(t),a=[];for(;r;)a.push({expression:r[1],score:parseInt(r[2],10)}),r=e.exec(t);return a};function eS(t){return t.search.response.results.map(r=>{let a=Jh(r.rankingInfo);return{result:r,ranking:a}})}var XP=new H({each:P,required:!0}),Yr=h("fields/registerFieldsToInclude",t=>y(t,XP)),Jn=h("fields/fetchall/enable"),Ea=h("fields/fetchall/disable"),Xn=J("fields/fetchDescription",async(t,{extra:e,getState:r,rejectWithValue:a})=>{let n=r(),{accessToken:o,organizationId:i}=n.configuration,{apiBaseUrl:s}=n.configuration.search,c=await e.apiClient.fieldDescriptions({accessToken:o,organizationId:i,url:s});return ye(c)?a(c.error):c.success.fields});var sp={collectionField:new b({emptyAllowed:!1,required:!1}),parentField:new b({emptyAllowed:!1,required:!1}),childField:new b({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new I({min:0,required:!1})},Kr=h("folding/register",t=>y(t,sp)),Jr=J("folding/loadCollection",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:a}})=>{let n=e(),o=await Wr(n),i=await a.search({...o,q:ZP(n),enableQuerySyntax:!0,cq:`@${n.folding.fields.collection}="${t}"`,filterField:n.folding.fields.collection,childField:n.folding.fields.parent,parentField:n.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return ye(i)?r(i.error):{collectionId:t,results:i.success.results,rootResult:n.folding.collections[t].result}});function ZP(t){return t.query.q===""?"":t.query.enableQuerySyntax?`${t.query.q} OR @uri`:`( <@- ${t.query.q} -@> ) OR @uri`}var vc=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});var Fc=["author","language","urihash","objecttype","collection","source","permanentid"],cp=[...Fc,"date","filetype","parents"],tS=[...cp,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],rS=()=>({fieldsToInclude:Fc,fetchAllFields:!1,fieldsDescription:[]});var Xr=k(rS(),t=>t.addCase(Yr,(e,r)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(r.payload))]}).addCase(Jn,e=>{e.fetchAllFields=!0}).addCase(Ea,e=>{e.fetchAllFields=!1}).addCase(Xn.fulfilled,(e,{payload:r})=>{e.fieldsDescription=r}).addCase(Kr,(e,{payload:r})=>{var n,o,i;let a=vc().fields;e.fieldsToInclude.push((n=r.collectionField)!=null?n:a.collection,(o=r.parentField)!=null?o:a.parent,(i=r.childField)!=null?i:a.child)}));function N(t){let e,r=new Map,a=()=>r.size===0,n=o=>{try{let i=JSON.stringify(o),s=e!==i;return e=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(o){o();let i=Symbol(),s;return a()&&(e=JSON.stringify(this.state),s=t.subscribe(()=>{n(this.state)&&r.forEach(c=>c())})),r.set(i,o),()=>{r.delete(i),a()&&s&&s()}},get state(){return{}}}}var ew=new z({enabled:new $({default:!1})});function aS(t,e={}){if(!tw(t))throw A;let r=N(t),{dispatch:a}=t,n=()=>t.state;Pe(t,ew,e.initialState,"buildRelevanceInspector").enabled&&a(jr());let i=s=>{t.logger.warn(`Flag [ ${s} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let s=n(),c=s.debug;if(!s.debug)return{isEnabled:c};let{executionReport:u,basicExpression:l,advancedExpression:d,constantExpression:f,userIdentities:p,rankingExpressions:m}=s.search.response,{fieldsDescription:S,fetchAllFields:v}=s.fields;return{isEnabled:c,rankingInformation:eS(s),executionReport:u,expressions:{basicExpression:l,advancedExpression:d,constantExpression:f},userIdentities:p,rankingExpressions:m,fieldsDescription:S,fetchAllFields:v}},enable(){a(jr()),i("debug")},disable(){a(Rn()),a(Ea())},enableFetchAllFields(){a(Jn()),i("fetchAllFields")},disableFetchAllFields(){a(Ea())},fetchFieldsDescription(){!this.state.isEnabled&&a(jr()),a(Xn()),i("fieldsDescription"),t.logger.warn(`For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.
        
        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions
        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude`)}}}function tw(t){return t.addReducers({debug:_r,search:W,configuration:j,fields:Xr}),!0}var nS=t=>({build:e=>aS(e,t)});var rw=new H({each:P,required:!0}),oS=(t,e)=>(y(t,P),pn(e)?y(e,P):y(e,rw),{payload:{contextKey:t,contextValue:e}}),Ia=h("context/set",t=>{for(let[e,r]of Object.entries(t))oS(e,r);return{payload:t}}),ka=h("context/add",t=>oS(t.contextKey,t.contextValue)),Oa=h("context/remove",t=>y(t,P));var bc=k(Xs(),t=>{t.addCase(Ia,(e,r)=>{e.contextValues=r.payload}).addCase(ka,(e,r)=>{e.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Oa,(e,r)=>{delete e.contextValues[r.payload]}).addCase(ie.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.context.contextValues)})});var aw=["caseId","caseNumber"],nw={caseId:"caseContext",caseNumber:"caseContext"},Rc=class extends Error{constructor(e){super(`The key "${e}" is reserved for internal use. Use ${nw[e]} to set this value.}`)}};function up(t){return aw.includes(t)}var ow=new z({values:new E({options:{required:!1}})});function iS(t,e={}){if(!cw(t))throw A;let r=N(t),{dispatch:a}=t,n=()=>t.state,o=Pe(t,ow,e.initialState,"buildContext");return o.values&&a(Ia(o.values)),{...r,get state(){return{values:n().context.contextValues}},set(i){a(Ia(i))},...n().configuration.analytics.analyticsMode==="legacy"?iw(a):sw(a)}}var iw=t=>({add(e,r){t(ka({contextKey:e,contextValue:r}))},remove(e){t(Oa(e))}}),sw=t=>({add(e,r){if(up(e))throw new Rc(e);t(ka({contextKey:e,contextValue:r}))},remove(e){if(up(e))throw new Rc(e);t(Oa(e))}});function cw(t){return t.addReducers({context:bc}),!0}function sS(t,e){return iS(t,e)}var cS=()=>({buildWithProps:(t,e)=>sS(t,{initialState:e.initialState})});var Zn=h("dictionaryFieldContext/set",t=>{let e=new E({options:{required:!0}}),r=y(t,e).error;if(r)return{payload:t,error:r};let a=Object.values(t),n=new H({each:le}),o=y(a,n).error;return o?{payload:t,error:o}:{payload:t}}),eo=h("dictionaryFieldContext/add",t=>{let e=new E({options:{required:!0},values:{field:le,key:le}});return y(t,e)}),to=h("dictionaryFieldContext/remove",t=>y(t,le));var Ac=k(Zs(),t=>{t.addCase(Zn,(e,r)=>{e.contextValues=r.payload}).addCase(eo,(e,r)=>{let{field:a,key:n}=r.payload;e.contextValues[a]=n}).addCase(to,(e,r)=>{delete e.contextValues[r.payload]}).addCase(ie.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function uS(t){if(!uw(t))throw A;let e=N(t),{dispatch:r}=t,a=()=>t.state;return{...e,get state(){return{values:a().dictionaryFieldContext.contextValues}},set(n){r(Zn(n))},add(n,o){r(eo({field:n,key:o}))},remove(n){r(to(n))}}}function uw(t){return t.addReducers({dictionaryFieldContext:Ac}),!0}var lS=()=>({build:t=>uS(t)});var Pc=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function dS(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Pc(),originalQuery:"",automaticallyCorrectQuery:!0}}var wc=k(dS(),t=>{t.addCase(Bn,e=>{e.enableDidYouMean=!0}).addCase(Ys,e=>{e.enableDidYouMean=!1}).addCase(Ks,e=>{e.automaticallyCorrectQuery=!0}).addCase(jn,e=>{e.automaticallyCorrectQuery=!1}).addCase(R.pending,e=>{e.queryCorrection=Pc(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""}).addCase(R.fulfilled,(e,r)=>{e.queryCorrection=r.payload.response.queryCorrections[0]||Pc(),e.originalQuery=r.payload.originalQuery,e.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(lt,(e,r)=>{e.wasCorrectedTo=r.payload})});function pS(t,e={}){if(!lw(t))throw A;let r=N(t),{dispatch:a}=t;a(Bn()),e.automaticallyCorrectQuery===!1&&a(jn());let n=()=>t.state;return{...r,get state(){let o=n();return{originalQuery:o.didYouMean.originalQuery,wasCorrectedTo:o.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:o.didYouMean.wasAutomaticallyCorrected,queryCorrection:o.didYouMean.queryCorrection,hasQueryCorrection:o.didYouMean.queryCorrection.correctedQuery!==""||o.didYouMean.wasCorrectedTo!==""}},applyCorrection(){a(lt(this.state.queryCorrection.correctedQuery))}}}function lw(t){return t.addReducers({configuration:j,didYouMean:wc}),!0}function fS(t){let e=pS(t),{dispatch:r}=t;return{...e,get state(){return e.state},applyCorrection(){e.applyCorrection(),r(R({legacy:Js(),next:{actionCause:T.didyoumeanClick,getEventExtraPayload:a=>new L(()=>a).getBaseMetadata()}}))}}}var mS=()=>({build:t=>fS(t)});var G=P;var re=h("facetOptions/update",(t={freezeFacetOrder:!0})=>y(t,{freezeFacetOrder:new $({required:!1})})),$e=h("facetOptions/facet/enable",t=>y(t,G)),xe=h("facetOptions/facet/disable",t=>y(t,G));var Ii={facetId:G,captions:new E({options:{required:!1}}),numberOfValues:new I({required:!1,min:1}),query:new b({required:!1,emptyAllowed:!0})};var dw={path:new H({required:!0,each:P}),displayValue:le,rawValue:le,count:new I({required:!0,min:0})},ro=h("categoryFacet/selectSearchResult",t=>y(t,{facetId:G,value:new E({values:dw})})),ao=h("categoryFacetSearch/register",t=>y(t,Ii));function no(t,e){var o;let{facetId:r,criterion:a}=e,n=(o=t[r])==null?void 0:o.request;!n||(n.sortCriteria=a)}function ki(t){!t||(t.currentValues=t.currentValues.map(e=>({...e,state:"idle"})),t.preventAutoSelect=!0)}function Ec(t,e){!t||(t.numberOfValues=e)}function Ic(t,e){let r=t[e];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function lp(t,e,r){t.currentValues=pw(e,r),t.numberOfValues=e.length?1:r,t.preventAutoSelect=!0}function pw(t,e){if(!t.length)return[];let r=gS(t[0],e),a=r;for(let n of t.splice(1)){let o=gS(n,e);a.children.push(o),a=o}return a.state="selected",a.retrieveChildren=!0,[r]}function gS(t,e){return{value:t,retrieveCount:e,children:[],state:"idle",retrieveChildren:!1}}var fw={state:new ue({required:!0}),numberOfResults:new I({required:!0,min:0}),value:new b({required:!0,emptyAllowed:!0}),path:new H({required:!0,each:P}),moreValuesAvailable:new $({required:!1})};function dp(t){t.children.forEach(e=>{dp(e)}),nt({state:t.state,numberOfResults:t.numberOfResults,value:t.value,path:t.path,moreValuesAvailable:t.moreValuesAvailable},fw)}var oo={facetId:G,field:P,delimitingCharacter:new b({required:!1,emptyAllowed:!0}),filterFacetCount:new $({required:!1}),injectionDepth:new I({required:!1,min:0}),numberOfValues:new I({required:!1,min:1}),sortCriteria:new ue({required:!1}),basePath:new H({required:!1,each:P}),filterByBasePath:new $({required:!1})},zt=h("categoryFacet/register",t=>y(t,oo)),Zr=h("categoryFacet/toggleSelectValue",t=>{try{return nt(t.facetId,P),dp(t.selection),{payload:t,error:null}}catch(e){return{payload:t,error:Cr(e)}}}),Gt=h("categoryFacet/deselectAll",t=>y(t,oo.facetId)),qa=h("categoryFacet/updateNumberOfValues",t=>y(t,{facetId:oo.facetId,numberOfValues:oo.numberOfValues})),io=h("categoryFacet/updateSortCriterion",t=>y(t,{facetId:oo.facetId,criterion:new ue})),kc=h("categoryFacet/updateBasePath",t=>y(t,{facetId:oo.facetId,basePath:new H({each:P})}));var pt=k(on(),t=>{t.addCase(zt,(e,r)=>{let a=r.payload,{facetId:n}=a;if(n in e)return;let o=gw(a),i=o.numberOfValues;e[n]={request:o,initialNumberOfValues:i}}).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.categoryFacetSet)!=null?n:e}).addCase(se,(e,r)=>{let a=r.payload.cf||{};Object.keys(e).forEach(n=>{let o=e[n].request,i=a[n]||[];(i.length||o.currentValues.length)&&lp(o,i,e[n].initialNumberOfValues)})}).addCase(io,(e,r)=>{var i;let{facetId:a,criterion:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.sortCriteria=n)}).addCase(kc,(e,r)=>{var i;let{facetId:a,basePath:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.basePath=[...n])}).addCase(Zr,(e,r)=>{var d;let{facetId:a,selection:n,retrieveCount:o}=r.payload,i=(d=e[a])==null?void 0:d.request;if(!i)return;let{path:s}=n,c=s.slice(0,s.length-1),u=mw(i,c,o);if(u.length){let f=u[0];f.retrieveChildren=!0,f.state="selected",f.children=[];return}let l=hS(n.value,o);l.state="selected",u.push(l),i.numberOfValues=1}).addCase(Gt,(e,r)=>{let a=r.payload;Ic(e,a)}).addCase(Ce,e=>{Object.keys(e).forEach(r=>Ic(e,r))}).addCase(st,(e,r)=>Object.keys(e).forEach(a=>{e[a].request.preventAutoSelect=!r.payload.allow})).addCase(qa,(e,r)=>{var i;let{facetId:a,numberOfValues:n}=r.payload,o=(i=e[a])==null?void 0:i.request;if(!!o){if(!o.currentValues.length)return Ec(o,n);hw(e,r.payload)}}).addCase(ro,(e,r)=>{let{facetId:a,value:n}=r.payload,o=e[a];if(!o)return;let i=[...n.path,n.rawValue];lp(o.request,i,o.initialNumberOfValues)}).addCase(Ht.fulfilled,(e,r)=>{SS(e,r.payload.response.facets)}).addCase(R.fulfilled,(e,r)=>{SS(e,r.payload.response.facets)}).addCase(xe,(e,r)=>{Ic(e,r.payload)})}),Oi={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function mw(t,e,r){let a=t.currentValues;for(let n of e){let o=a[0];(!o||n!==o.value)&&(o=hS(n,r),a.length=0,a.push(o)),o.retrieveChildren=!1,o.state="idle",a=o.children}return a}function gw(t){return{...Oi,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...t}}function hS(t,e){return{value:t,state:"idle",children:[],retrieveChildren:!0,retrieveCount:e}}function SS(t,e){e.forEach(r=>{var i;if(!Sw(t,r))return;let a=r.facetId,n=(i=t[a])==null?void 0:i.request;if(!n)return;let o=yw(n,r);n.currentValues=o?[]:n.currentValues,n.preventAutoSelect=!1})}function hw(t,e){var o;let{facetId:r,numberOfValues:a}=e,n=(o=t[r])==null?void 0:o.request.currentValues[0];if(!!n){for(;n.children.length&&(n==null?void 0:n.state)!=="selected";)n=n.children[0];n.retrieveCount=a}}function Sw(t,e){return e.facetId in t}function yw(t,e){let r=Ke(t.currentValues),a=Ke(e.values);return r.length!==a.length}function Oc(t,e,r){let{facetId:a}=e;if(t[a])return;let n=!1,o={...Yt,...e},i=r();t[a]={options:o,isLoading:n,response:i,initialNumberOfValues:o.numberOfValues,requestId:""}}function qc(t,e){let{facetId:r,...a}=e,n=t[r];!n||(n.options={...n.options,...a})}function Tc(t,e,r){let a=t[e];!a||(a.requestId=r,a.isLoading=!0)}function Dc(t,e){let r=t[e];!r||(r.isLoading=!1)}function Vc(t,e,r){let{facetId:a,response:n}=e,o=t[a];!o||o.requestId===r&&(o.isLoading=!1,o.response=n)}function qi(t,e,r){let{facetId:a}=e,n=t[a];!n||(n.requestId="",n.isLoading=!1,n.response=r(),n.options.numberOfValues=n.initialNumberOfValues,n.options.query=Yt.query)}function Nc(t,e){Object.keys(t).forEach(r=>qi(t,{facetId:r},e))}var Yt={captions:{},numberOfValues:10,query:""};var yS=async(t,e,r)=>{let a=e.categoryFacetSearchSet[t].options,n=e.categoryFacetSet[t].request,{captions:o,query:i,numberOfValues:s}=a,{field:c,delimitingCharacter:u,basePath:l,filterFacetCount:d}=n,f=Cw(n),p=f.length?[f]:[],m=`*${i}*`;return{url:e.configuration.search.apiBaseUrl,accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")},basePath:l,captions:o,numberOfValues:s,query:m,field:c,delimitingCharacter:u,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await we(e)).request}}},Cw=t=>{let e=[],r=t.currentValues[0];for(;r;)e.push(r.value),r=r.children[0];return e};var CS=async(t,e,r)=>{let{captions:a,query:n,numberOfValues:o}=e.facetSearchSet[t].options,{field:i,currentValues:s,filterFacetCount:c}=e.facetSet[t].request,u=s.filter(d=>d.state!=="idle").map(d=>d.value),l=`*${n}*`;return{url:e.configuration.search.apiBaseUrl,accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,...e.configuration.search.authenticationProviders&&{authentication:e.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:o,query:l,field:i,ignoreValues:u,filterFacetCount:c,type:"specific",...r?{}:{searchContext:(await we(e)).request}}};var xS=t=>async(e,{getState:r,extra:{apiClient:a,validatePayload:n}})=>{let o=r(),i;n(e,P),xw(o,e)?i=await CS(e,o,t):i=await yS(e,o,t);let s=await a.facetSearch(i);return{facetId:e,response:s}},wt=J("facetSearch/executeSearch",xS(!1)),pp=J("facetSearch/executeSearch",xS(!0)),so=h("facetSearch/clearResults",t=>y(t,{facetId:G})),xw=(t,e)=>t.facetSearchSet!==void 0&&t.facetSet!==void 0&&t.facetSet[e]!==void 0;var vS={facetId:G,value:new E({values:{displayValue:le,rawValue:le,count:new I({required:!0,min:0})}})},Mc=h("facetSearch/register",t=>y(t,Ii)),ea=h("facetSearch/update",t=>y(t,Ii)),Ta=h("facetSearch/toggleSelectValue",t=>y(t,vS)),Ti=h("facetSearch/toggleExcludeValue",t=>y(t,vS));function FS(){return{}}var co=k(FS(),t=>{t.addCase(ao,(e,r)=>{let a=r.payload;Oc(e,a,fp)}).addCase(ea,(e,r)=>{qc(e,r.payload)}).addCase(wt.pending,(e,r)=>{let a=r.meta.arg;Tc(e,a,r.meta.requestId)}).addCase(wt.rejected,(e,r)=>{let a=r.meta.arg;Dc(e,a)}).addCase(wt.fulfilled,(e,r)=>{Vc(e,r.payload,r.meta.requestId)}).addCase(so,(e,{payload:{facetId:r}})=>{qi(e,{facetId:r},fp)}).addCase(R.fulfilled,e=>{Nc(e,fp)})});function fp(){return{moreValuesAvailable:!1,values:[]}}var uo=t=>w("analytics/facet/showMore",(e,r)=>{y(t,G);let a=ln(t,Je(r));return e.makeFacetShowMore(a)}),lo=t=>w("analytics/facet/showLess",(e,r)=>{y(t,G);let a=ln(t,Je(r));return e.makeFacetShowLess(a)}),Kt=t=>w("analytics/facet/sortChange",(e,r)=>{y(t,{facetId:G,criterion:new ue({required:!0})});let{facetId:a,criterion:n}=t,o=Je(r),s={...ln(a,o),criteria:n};return e.makeFacetUpdateSort(s)}),ke=t=>w("analytics/facet/reset",(e,r)=>{y(t,G);let a=Je(r),n=ln(t,a);return e.makeFacetClearAll(n)}),be=t=>w("analytics/facet/select",(e,r)=>{y(t,{facetId:G,facetValue:P});let a=Je(r),n=fi(t,a);return e.makeFacetSelect(n)}),Et=t=>w("analytics/facet/exclude",(e,r)=>{y(t,{facetId:G,facetValue:P});let a=Je(r),n=fi(t,a);return e.makeFacetExclude(n)}),Ze=t=>w("analytics/facet/deselect",(e,r)=>{y(t,{facetId:G,facetValue:P});let a=Je(r),n=fi(t,a);return e.makeFacetDeselect(n)}),po=t=>w("analytics/facet/breadcrumb",(e,r)=>{y(t,{facetId:G,facetValue:P});let a=fi(t,Je(r));return e.makeBreadcrumbFacet(a)});var Jt=(t,e)=>{var r,a;return(a=(r=t.facetOptions.facets[e])==null?void 0:r.enabled)!=null?a:!0};var Xt=new b({regex:/^[a-zA-Z0-9-_]+$/}),Zt=new b({required:!0}),bS=new H({each:new b}),RS=new b,AS=new $,er=new $,tr=new I({min:0}),It=new I({min:1}),Lc=new $({required:!0}),vw=new E,Fw=new b,bw={captions:vw,numberOfValues:It,query:Fw},fo=new E({values:bw}),Qc=new E({options:{required:!1},values:{type:new b({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new H({required:!0,max:25,each:new b({emptyAllowed:!1,required:!0})})}}),PS=new $,Bc=new H({min:1,max:25,required:!1,each:new b({emptyAllowed:!1,required:!0})});var Da={value:P,numberOfResults:new I({min:0}),state:P};var Rw={facetId:G,field:new b({required:!0,emptyAllowed:!0}),filterFacetCount:new $({required:!1}),injectionDepth:new I({required:!1,min:0}),numberOfValues:new I({required:!1,min:1}),sortCriteria:new ue({required:!1}),resultsMustMatch:new ue({required:!1}),allowedValues:Qc,customSort:Bc},rr=h("facet/register",t=>y(t,Rw)),ar=h("facet/toggleSelectValue",t=>y(t,{facetId:G,selection:new E({values:Da})})),ta=h("facet/toggleExcludeValue",t=>y(t,{facetId:G,selection:new E({values:Da})})),me=h("facet/deselectAll",t=>y(t,G)),mo=h("facet/updateSortCriterion",t=>y(t,{facetId:G,criterion:new ue({required:!0})})),Va=h("facet/updateNumberOfValues",t=>y(t,{facetId:G,numberOfValues:new I({required:!0,min:1})})),Na=h("facet/updateIsFieldExpanded",t=>y(t,{facetId:G,isFieldExpanded:new $({required:!0})})),Ma=h("facet/updateFreezeCurrentValues",t=>y(t,{facetId:G,freezeCurrentValues:new $({required:!0})}));function Rr(t){var o,i;let e=wS(t.start,t),r=wS(t.end,t),a=(o=t.endInclusive)!=null?o:!1,n=(i=t.state)!=null?i:"idle";return{start:e,end:r,endInclusive:a,state:n}}function wS(t,e){let{dateFormat:r}=e;return Gg(t)?(Hr(t),Wg(t)):typeof t=="string"&&$t(t)?(Hr(t),t):(zs(t,r),vi(ba(t,r)))}var go=h("rangeFacet/updateSortCriterion",t=>y(t,{facetId:G,criterion:new ue({required:!0})}));var La={state:P,start:new I({required:!0}),end:new I({required:!0}),endInclusive:new $({required:!0}),numberOfResults:new I({required:!0,min:0})},Qa={start:P,end:P,endInclusive:new $({required:!0}),state:P,numberOfResults:new I({required:!0,min:0})},Ba=t=>({facetId:G,selection:typeof t.start=="string"?new E({values:Qa}):new E({values:La})});var Aw={start:P,end:P,endInclusive:new $({required:!0}),state:P},Pw={facetId:G,field:P,currentValues:new H({required:!1,each:new E({values:Aw})}),generateAutomaticRanges:new $({required:!0}),filterFacetCount:new $({required:!1}),injectionDepth:new I({required:!1,min:0}),numberOfValues:new I({required:!1,min:1}),sortCriteria:new ue({required:!1}),rangeAlgorithm:new ue({required:!1})};function ES(t){return $t(t)?bi(t):t}function jc(t){!t.currentValues||t.currentValues.forEach(e=>{let{start:r,end:a}=Rr(e);if(ba(ES(r)).isAfter(ba(ES(a))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)})}var nr=h("dateFacet/register",t=>{try{return nt(t,Pw),jc(t),{payload:t,error:null}}catch(e){return{payload:t,error:Cr(e)}}}),or=h("dateFacet/toggleSelectValue",t=>y(t,{facetId:G,selection:new E({values:Qa})})),ra=h("dateFacet/toggleExcludeValue",t=>y(t,{facetId:G,selection:new E({values:Qa})})),Ar=h("dateFacet/updateFacetValues",t=>{try{return nt(t,{facetId:G,values:new H({each:new E({values:Qa})})}),jc({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:Cr(e)}}}),Uc=go,_c=me;var ww={state:P,start:new I({required:!0}),end:new I({required:!0}),endInclusive:new $({required:!0})},Ew={facetId:G,field:P,currentValues:new H({required:!1,each:new E({values:ww})}),generateAutomaticRanges:new $({required:!0}),filterFacetCount:new $({required:!1}),injectionDepth:new I({required:!1,min:0}),numberOfValues:new I({required:!1,min:1}),sortCriteria:new ue({required:!1}),rangeAlgorithm:new ue({required:!1})};function $c(t){!t.currentValues||t.currentValues.forEach(({start:e,end:r})=>{if(e>r)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${r}`)})}var ir=h("numericFacet/register",t=>{try{return y(t,Ew),$c(t),{payload:t,error:null}}catch(e){return{payload:t,error:Cr(e)}}}),sr=h("numericFacet/toggleSelectValue",t=>y(t,{facetId:G,selection:new E({values:La})})),aa=h("numericFacet/toggleExcludeValue",t=>y(t,{facetId:G,selection:new E({values:La})})),Pr=h("numericFacet/updateFacetValues",t=>{try{return nt(t,{facetId:G,values:new H({each:new E({values:La})})}),$c({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:Cr(e)}}}),Wc=go,Hc=me;var Oe=k(ec(),t=>{t.addCase(re,(e,r)=>({...e,...r.payload})).addCase(R.fulfilled,e=>{e.freezeFacetOrder=!1}).addCase(R.rejected,e=>{e.freezeFacetOrder=!1}).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOptions)!=null?n:e}).addCase(zt,(e,r)=>{e.facets[r.payload.facetId]=Un()}).addCase(rr,(e,r)=>{e.facets[r.payload.facetId]=Un()}).addCase(nr,(e,r)=>{e.facets[r.payload.facetId]=Un()}).addCase(ir,(e,r)=>{e.facets[r.payload.facetId]=Un()}).addCase($e,(e,r)=>{e.facets[r.payload].enabled=!0}).addCase(xe,(e,r)=>{e.facets[r.payload].enabled=!1}).addCase(se,(e,r)=>{var a,n,o,i,s;[...Object.keys((a=r.payload.f)!=null?a:{}),...Object.keys((n=r.payload.fExcluded)!=null?n:{}),...Object.keys((o=r.payload.cf)!=null?o:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((s=r.payload.df)!=null?s:{})].forEach(c=>{c in e||(e.facets[c]=Un()),e.facets[c].enabled=!0})})});function IS(t,e){let{field:r,state:a}=t;if(!Iw(t))return r;let n=`${r}_`,o=kw(n,a);return qw(r,e),`${n}${o}`}function Iw(t){let{field:e,state:r}=t;return kS(r).some(n=>n&&e in n)}function kw(t,e){let a=kS(e).map(n=>Object.keys(n||{})).reduce((n,o)=>n.concat(o),[]);return Ow(a,t)+1}function kS(t){let{facetSet:e,numericFacetSet:r,dateFacetSet:a,categoryFacetSet:n}=t;return[e,r,a,n]}function Ow(t,e){let r=0,n=t.map(o=>{let i=o.split(e)[1],s=parseInt(i,10);return Number.isNaN(s)?r:s}).sort().pop();return n!=null?n:r}function qw(t,e){let r=`A facet with field "${t}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;e.warn(r)}function Be(t,e){let{state:r,logger:a}=t,{field:n,facetId:o}=e;return o||IS({field:n,state:r},a)}var OS=["alphanumeric","occurrences"];var qS=new z({field:Zt,basePath:bS,delimitingCharacter:RS,facetId:Xt,facetSearch:fo,filterByBasePath:AS,filterFacetCount:er,injectionDepth:tr,numberOfValues:It,sortCriteria:new b({constrainTo:OS})});function TS(t,e){if(!Tw(t))throw A;let r=N(t),{dispatch:a}=t,n=Be(t,e.options),o={...Oi,...is("facetSearch",e.options),field:e.options.field,facetId:n},i={facetSearch:{...Yt,...e.options.facetSearch},...o};de(t,qS,i,"buildCategoryFacet");let s=()=>sd(t.state,n),c=()=>id(t.state,n),u=()=>Vt(t.state),l=()=>Jt(t.state,n);return a(zt(o)),{...r,toggleSelect(d){let f=i.numberOfValues;a(Zr({facetId:n,selection:d,retrieveCount:f})),a(re())},deselectAll(){a(Gt(n)),a(re())},sortBy(d){a(io({facetId:n,criterion:d})),a(re())},isSortedBy(d){return s().sortCriteria===d},showMoreValues(){var S;let{numberOfValues:d}=i,{activeValue:f,valuesAsTrees:p}=this.state,m=((S=f==null?void 0:f.children.length)!=null?S:p.length)+d;a(qa({facetId:n,numberOfValues:m})),a(re())},showLessValues(){let{numberOfValues:d}=i;a(qa({facetId:n,numberOfValues:d})),a(re())},enable(){a($e(n))},disable(){a(xe(n))},get state(){var X,K,he,ve;let d=s(),f=c(),p=u(),m=l(),S=(X=f==null?void 0:f.values)!=null?X:[],v=(K=S.some(B=>B.children.length>0))!=null?K:!1,{parents:C,values:F}=wm(f==null?void 0:f.values),D=Ke(S),Q=D.length?D[D.length-1]:void 0,te=!!Q,ae=(ve=(he=Q==null?void 0:Q.moreValuesAvailable)!=null?he:f==null?void 0:f.moreValuesAvailable)!=null?ve:!1,oe=Q?Q.children.length>i.numberOfValues:S.length>i.numberOfValues;return{facetId:n,parents:C,selectedValueAncestry:D,values:F,isHierarchical:v,valuesAsTrees:S,activeValue:Q,isLoading:p,hasActiveValues:te,canShowMoreValues:ae,canShowLessValues:oe,sortCriteria:d.sortCriteria,enabled:m}}}}function Tw(t){return t.addReducers({categoryFacetSet:pt,categoryFacetSearchSet:co,facetOptions:Oe,configuration:j,search:W}),!0}function ho(t,e){let r=t.dispatch,{options:a,getFacetSearch:n}=e,{facetId:o}=a;return{updateText(i){r(ea({facetId:o,query:i,numberOfValues:n().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:i,options:s}=n();r(ea({facetId:o,numberOfValues:s.numberOfValues+i})),r(e.isForFieldSuggestions?pp(o):wt(o))},search(){r(e.isForFieldSuggestions?pp(o):wt(o))},clear(){r(so({facetId:o}))},updateCaptions(i){r(ea({facetId:o,captions:i}))},get state(){let{response:i,isLoading:s,options:c}=n(),{query:u}=c,l=i.values;return{...i,values:l,isLoading:s,query:u}}}}function DS(t,e){let{dispatch:r}=t,a={...Yt,...e.options},{facetId:n}=a,o=()=>t.state.categoryFacetSearchSet[n];r(ao(a));let i=ho(t,{options:a,getFacetSearch:o,isForFieldSuggestions:e.isForFieldSuggestions});return{...i,select(s){r(ro({facetId:n,value:s}))},get state(){return i.state}}}function zc(t,e){let{dispatch:r}=t,a={...Yt,...e.options},{facetId:n}=a,o=()=>t.state.categoryFacetSearchSet[n],i=DS(t,{options:{...a},isForFieldSuggestions:e.isForFieldSuggestions});r(ao(a));let s=ho(t,{options:a,getFacetSearch:o,isForFieldSuggestions:e.isForFieldSuggestions});return{...s,...i,select:c=>{i.select(c),r(re()),r(R({legacy:be({facetId:n,facetValue:c.rawValue}),next:{actionCause:T.facetSelect,getEventExtraPayload:u=>new L(()=>u).getFacetMetadata(n,c.rawValue)}}))},get state(){return{...s.state,...i.state}}}}function VS(t,e){if(!Dw(t))throw A;let r=TS(t,e),{dispatch:a}=t,n=()=>r.state.facetId,o=zc(t,{options:{facetId:n(),...e.options.facetSearch},isForFieldSuggestions:!1}),{state:i,...s}=o;return{...r,facetSearch:s,toggleSelect(c){r.toggleSelect(c),a(R({legacy:Vw(n(),c),next:Nw(n(),c)}))},deselectAll(){r.deselectAll(),a(R({legacy:ke(n()),next:{actionCause:T.facetClearAll,getEventExtraPayload:c=>new L(()=>c).getFacetClearAllMetadata(n())}}))},sortBy(c){r.sortBy(c),a(R({legacy:Kt({facetId:n(),criterion:c}),next:{actionCause:T.facetUpdateSort,getEventExtraPayload:u=>new L(()=>u).getFacetSortMetadata(n(),c)}}))},showMoreValues(){r.showMoreValues(),a(Ht({legacy:uo(n())}))},showLessValues(){r.showLessValues(),a(Ht({legacy:lo(n())}))},get state(){return{...r.state,facetSearch:o.state}}}}function Dw(t){return t.addReducers({categoryFacetSet:pt,categoryFacetSearchSet:co,configuration:j,search:W}),!0}function Vw(t,e){let r={facetId:t,facetValue:e.value};return e.state==="selected"?Ze(r):be(r)}function Nw(t,e){return{actionCause:e.state==="selected"?T.facetDeselect:T.facetSelect,getEventExtraPayload:a=>new L(()=>a).getFacetMetadata(t,e.value)}}var NS=t=>({build:e=>VS(e,t)});function MS(){return{}}var So=k(MS(),t=>{t.addCase(Mc,(e,r)=>{let a=r.payload;Oc(e,a,mp)}).addCase(ea,(e,r)=>{qc(e,r.payload)}).addCase(wt.pending,(e,r)=>{let a=r.meta.arg;Tc(e,a,r.meta.requestId)}).addCase(wt.rejected,(e,r)=>{let a=r.meta.arg;Dc(e,a)}).addCase(wt.fulfilled,(e,r)=>{Vc(e,r.payload,r.meta.requestId)}).addCase(so,(e,{payload:r})=>{qi(e,r,mp)}).addCase(R.fulfilled,e=>{Nc(e,mp)})});function mp(){return{moreValuesAvailable:!1,values:[]}}var kt=(r=>(r.Relevance="relevance",r.Fields="fields",r))(kt||{}),Gc=(r=>(r.Ascending="asc",r.Descending="desc",r))(Gc||{});var iz=new E({options:{required:!1},values:{by:new Ft({enum:kt,required:!0}),fields:new H({each:new E({values:{name:new b,direction:new Ft({enum:Gc})}})})}});var LS=()=>kg("analytics/productListing/load",t=>t.makeInterfaceLoad(),t=>new Cn(t));var bz=h("productlisting/setUrl",t=>y(t,{url:new b({required:!0,url:!0})})),Rz=h("productlisting/setAdditionalFields",t=>y(t,{additionalFields:new H({required:!0,each:new b({required:!0,emptyAllowed:!1})})})),na=J("productlisting/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:n})=>{let o=e(),{apiClient:i}=n,s=await i.getProducts(await Mw(o));return ye(s)?(r(ut(s.error)),a(s.error)):{response:s.success,analyticsAction:LS()}}),Mw=async t=>{var a,n,o;let e=Qw(t),r=await at(t.configuration.analytics);return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,platformUrl:t.configuration.platformUrl,url:(a=t.productListing)==null?void 0:a.url,...t.configuration.analytics.enabled&&r?{clientId:r}:{},...((n=t.productListing.additionalFields)==null?void 0:n.length)?{additionalFields:t.productListing.additionalFields}:{},...t.productListing.advancedParameters&&Lw(t.productListing.advancedParameters)?{advancedParameters:t.productListing.advancedParameters||{}}:{},...e.length&&{facets:{requests:e}},...t.pagination&&{pagination:{numberOfValues:t.pagination.numberOfResults,page:Math.ceil(t.pagination.firstResult/(t.pagination.numberOfResults||1))+1}},...(((o=t.sort)==null?void 0:o.by)||kt.Relevance)!==kt.Relevance&&{sort:t.sort},...t.context&&{userContext:t.context.contextValues}}};function Lw(t){return t.debug}function Qw(t){var e;return Qn(Bw(t),(e=t.facetOrder)!=null?e:[])}function Bw(t){var e,r,a,n;return[...xr((e=t.facetSet)!=null?e:{}),...xr((r=t.numericFacetSet)!=null?r:{}),...xr((a=t.dateFacetSet)!=null?a:{}),...xr((n=t.categoryFacetSet)!=null?n:{})]}var ft=k(un(),t=>{t.addCase(rr,(e,r)=>{let{facetId:a}=r.payload;a in e||(e[a]=Om(jw(r.payload)))}).addCase(ie.fulfilled,(e,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(se,(e,r)=>{let a=r.payload.f||{},n=r.payload.fExcluded||{};Object.keys(e).forEach(i=>{let{request:s}=e[i],c=a[i]||[],u=n[i]||[],l=s.currentValues.filter(d=>!c.includes(d.value)&&!u.includes(d.value));s.currentValues=[...c.map(QS),...u.map(BS),...l.map(_w)],s.preventAutoSelect=c.length>0,s.numberOfValues=Math.max(c.length+u.length,s.numberOfValues)})}).addCase(ar,(e,r)=>{var c;let{facetId:a,selection:n}=r.payload,o=(c=e[a])==null?void 0:c.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(u=>u.value===n.value);if(!i){Yc(o,n);return}let s=i.state==="selected";i.state=s?"idle":"selected",o.freezeCurrentValues=!0}).addCase(ta,(e,r)=>{var c;let{facetId:a,selection:n}=r.payload,o=(c=e[a])==null?void 0:c.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(u=>u.value===n.value);if(!i){Yc(o,n);return}let s=i.state==="excluded";i.state=s?"idle":"excluded",o.freezeCurrentValues=!0}).addCase(Ma,(e,r)=>{var i;let{facetId:a,freezeCurrentValues:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.freezeCurrentValues=n)}).addCase(me,(e,r)=>{var a;ki((a=e[r.payload])==null?void 0:a.request)}).addCase(Ce,e=>{Object.values(e).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>ki(r))}).addCase($r,e=>{Object.values(e).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>ki(r))}).addCase(st,(e,r)=>Object.values(e).forEach(a=>{a.request.preventAutoSelect=!r.payload.allow})).addCase(mo,(e,r)=>{no(e,r.payload)}).addCase(Va,(e,r)=>{var o;let{facetId:a,numberOfValues:n}=r.payload;Ec((o=e[a])==null?void 0:o.request,n)}).addCase(Na,(e,r)=>{var i;let{facetId:a,isFieldExpanded:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.isFieldExpanded=n)}).addCase(R.fulfilled,(e,r)=>{r.payload.response.facets.forEach(n=>{var o;return gp((o=e[n.facetId])==null?void 0:o.request,n)})}).addCase(na.fulfilled,(e,r)=>{var n,o;(((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[]).forEach(i=>{var s;return gp((s=e[i.facetId])==null?void 0:s.request,i)})}).addCase(Ht.fulfilled,(e,r)=>{r.payload.response.facets.forEach(n=>{var o;return gp((o=e[n.facetId])==null?void 0:o.request,n)})}).addCase(Ta,(e,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=e[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,c=s.find(d=>d.value===i);if(c){c.state="selected";return}let u=QS(i);Yc(o,u),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(Ti,(e,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=e[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,c=s.find(d=>d.value===i);if(c){c.state="excluded";return}let u=BS(i);Yc(o,u),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(xe,(e,r)=>{if(!(r.payload in e))return;let{request:a}=e[r.payload];ki(a)})});function Yc(t,e){let{currentValues:r}=t,a=r.findIndex(s=>s.state==="idle"),n=a===-1?r.length:a,o=r.slice(0,n),i=r.slice(n+1);t.currentValues=[...o,e,...i],t.numberOfValues=t.currentValues.length}function gp(t,e){!t||(t.currentValues=e.values.map(Uw),t.freezeCurrentValues=!1,t.preventAutoSelect=!1)}var Di={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function jw(t){return{...Di,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...t}}function Uw(t){let{value:e,state:r}=t;return{value:e,state:r}}function QS(t){return{value:t,state:"selected"}}function BS(t){return{value:t,state:"excluded"}}function _w(t){return{...t,state:"idle"}}var Kc=t=>t.state==="selected",Jc=t=>t.state==="excluded",Xc=(t,e)=>{let r={facetId:t,facetValue:e.value};return Kc(e)?Ze(r):be(r)},Zc=(t,e)=>({actionCause:Kc(e)?T.facetDeselect:T.facetSelect,getEventExtraPayload:r=>new L(()=>r).getFacetMetadata(t,e.value)}),jS=(t,e)=>{let r={facetId:t,facetValue:e.value};return Jc(e)?Ze(r):Et(r)},US=(t,e)=>({actionCause:Jc(e)?T.facetUnexclude:T.facetExclude,getEventExtraPayload:r=>new L(()=>r).getFacetMetadata(t,e.value)});function eu(t,e){let{dispatch:r}=t,{options:a,select:n,exclude:o,isForFieldSuggestions:i}=e,{facetId:s}=a,c=()=>t.state.facetSearchSet[s];r(Mc(a));let u=ho(t,{options:a,getFacetSearch:c,isForFieldSuggestions:i});return{...u,select(l){r(Ta({facetId:s,value:l})),n(l)},exclude(l){r(Ti({facetId:s,value:l})),o(l)},singleSelect(l){r(me(s)),r(Ta({facetId:s,value:l})),n(l)},singleExclude(l){r(me(s)),r(Ti({facetId:s,value:l})),o(l)},get state(){let{values:l}=u.state;return{...u.state,values:l.map(({count:d,displayValue:f,rawValue:p})=>({count:d,displayValue:f,rawValue:p}))}}}}var _S={facetId:G,selection:new E({values:Da})},$S=J("facet/executeToggleSelect",({facetId:t,selection:e},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:t,selection:e},_S),a(ar({facetId:t,selection:e})),a(re())}),WS=J("facet/executeToggleExclude",({facetId:t,selection:e},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:t,selection:e},_S),a(ta({facetId:t,selection:e})),a(re())});var yo=["allValues","atLeastOneValue"];var tu=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var HS=new z({facetId:Xt,field:Zt,filterFacetCount:er,injectionDepth:tr,numberOfValues:It,sortCriteria:new b({constrainTo:tu}),resultsMustMatch:new b({constrainTo:yo}),facetSearch:fo});function zS(t,e,r=HS){if(!$w(t))throw A;let{dispatch:a}=t,n=N(t),o=Be(t,e.options),i={...Di,...is("facetSearch",e.options),field:e.options.field,facetId:o},s={facetSearch:{...Yt,...e.options.facetSearch},...i};de(t,r,s,"buildFacet");let c=()=>ys(t.state,o),u=()=>nn(t.state,o),l=()=>Vt(t.state),d=()=>Jt(t.state,o),f=()=>{let{currentValues:m}=c();return m.filter(S=>S.state!=="idle").length},p=()=>{let{currentValues:m}=c(),S=s.numberOfValues,v=!!m.find(C=>C.state==="idle");return S<m.length&&v};return a(rr(i)),{...n,toggleSelect:m=>a($S({facetId:s.facetId,selection:m})),toggleExclude:m=>a(WS({facetId:s.facetId,selection:m})),toggleSingleSelect:function(m){m.state==="idle"&&a(me(o)),this.toggleSelect(m)},toggleSingleExclude:function(m){m.state==="idle"&&a(me(o)),this.toggleExclude(m)},isValueSelected:Kc,isValueExcluded:Jc,deselectAll(){a(me(o)),a(re())},sortBy(m){a(mo({facetId:o,criterion:m})),a(re())},isSortedBy(m){return this.state.sortCriterion===m},showMoreValues(){let m=c().numberOfValues,S=s.numberOfValues,v=S-m%S,C=m+v;a(Va({facetId:o,numberOfValues:C})),a(Na({facetId:o,isFieldExpanded:!0})),a(re())},showLessValues(){let m=s.numberOfValues,S=Math.max(m,f());a(Va({facetId:o,numberOfValues:S})),a(Na({facetId:o,isFieldExpanded:!1})),a(re())},enable(){a($e(o))},disable(){a(xe(o))},get state(){let m=c(),S=u(),v=l(),C=d(),F;typeof m.sortCriteria=="object"?F=m.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":F=m.sortCriteria;let D=S?S.values:[],Q=D.some(oe=>oe.state!=="idle"),te=S?S.moreValuesAvailable:!1,ae=m.resultsMustMatch;return{facetId:o,values:D,sortCriterion:F,resultsMustMatch:ae,isLoading:v,hasActiveValues:Q,canShowMoreValues:te,canShowLessValues:p(),enabled:C}}}}function $w(t){return t.addReducers({facetSet:ft,facetOptions:Oe,configuration:j,facetSearchSet:So}),!0}var GS=new z({facetId:Xt,field:Zt,filterFacetCount:er,injectionDepth:tr,numberOfValues:It,sortCriteria:new b({constrainTo:tu}),resultsMustMatch:new b({constrainTo:yo}),facetSearch:fo,allowedValues:Qc,hasBreadcrumbs:PS,customSort:Bc});function YS(t,e){if(!Ww(t))throw A;let{dispatch:r}=t,a=zS(t,{...e,options:{...e.options,...e.options.allowedValues&&{allowedValues:{type:"simple",values:e.options.allowedValues}}}},GS),n=()=>a.state.facetId,i=(()=>{let{facetSearch:u}=e.options;return eu(t,{options:{facetId:n(),...u},select:l=>{r(re()),r(R({legacy:be({facetId:n(),facetValue:l.rawValue}),next:{actionCause:T.facetSelect,getEventExtraPayload:d=>new L(()=>d).getFacetMetadata(n(),l.rawValue)}}))},exclude:l=>{r(re()),r(R({legacy:Et({facetId:n(),facetValue:l.rawValue}),next:{actionCause:T.facetExclude,getEventExtraPayload:d=>new L(()=>d).getFacetMetadata(n(),l.rawValue)}}))},isForFieldSuggestions:!1})})(),{state:s,...c}=i;return{...a,facetSearch:c,toggleSelect(u){a.toggleSelect(u),r(R({legacy:Xc(n(),u),next:Zc(n(),u)}))},toggleExclude(u){a.toggleExclude(u),r(R({legacy:jS(n(),u),next:US(n(),u)}))},deselectAll(){a.deselectAll(),r(R({legacy:ke(n()),next:{actionCause:T.facetClearAll,getEventExtraPayload:u=>new L(()=>u).getFacetClearAllMetadata(n())}}))},sortBy(u){a.sortBy(u),r(R({legacy:Kt({facetId:n(),criterion:u}),next:{actionCause:T.facetUpdateSort,getEventExtraPayload:l=>new L(()=>l).getFacetSortMetadata(n(),u)}}))},isSortedBy(u){return this.state.sortCriterion===u},showMoreValues(){a.showMoreValues(),r(Ht({legacy:uo(n())}))},showLessValues(){a.showLessValues(),r(Ht({legacy:lo(n())}))},get state(){return{...a.state,facetSearch:i.state}}}}function Ww(t){return t.addReducers({facetSet:ft,configuration:j,facetSearchSet:So,search:W}),!0}var KS=t=>({build:e=>YS(e,t)});var ru=t=>t.state==="selected",hp=t=>t.state==="excluded",au=(t,e)=>{let r=`${e.start}..${e.end}`,a={facetId:t,facetValue:r};return ru(e)?Ze(a):be(a)},nu=(t,e)=>({actionCause:ru(e)?T.facetSelect:T.facetDeselect,getEventExtraPayload:r=>new L(()=>r).getFacetMetadata(t,`${e.start}..${e.end}`)}),JS=(t,e)=>{let r=`${e.start}..${e.end}`,a={facetId:t,facetValue:r};return hp(e)?Ze(a):Et(a)};var ou=h("rangeFacet/executeToggleSelect",t=>y(t,Ba(t.selection))),iu=h("rangeFacet/executeToggleExclude",t=>y(t,Ba(t.selection)));var XS={facetId:G,selection:new E({values:Qa})},ZS=J("dateFacet/executeToggleSelect",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,XS),e(or(t)),e(ou(t)),e(re())}),ey=J("dateFacet/executeToggleExclude",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,XS),e(ra(t)),e(iu(t)),e(re())});var su={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function cu(t,e){let{request:r}=e,{facetId:a}=r;if(a in t)return;let n=ty(r);r.numberOfValues=n,t[a]=e}function uu(t,e,r){var n;let a=(n=t[e])==null?void 0:n.request;!a||(a.currentValues=r,a.numberOfValues=ty(a))}function lu(t,e,r){var i;let a=(i=t[e])==null?void 0:i.request;if(!a)return;let n=fu(a.currentValues,r);if(!n)return;let o=n.state==="selected";n.state=o?"idle":"selected",a.preventAutoSelect=!0}function du(t,e,r){var i;let a=(i=t[e])==null?void 0:i.request;if(!a)return;let n=fu(a.currentValues,r);if(!n)return;let o=n.state==="excluded";n.state=o?"idle":"excluded",a.preventAutoSelect=!0}function oa(t,e){var a;let r=(a=t[e])==null?void 0:a.request;!r||r.currentValues.forEach(n=>n.state="idle")}function pu(t,e){Object.entries(t).forEach(([r,{request:a}])=>{let n=e[r]||[];a.currentValues.forEach(s=>{let c=!!fu(n,s);return s.state=c?"selected":"idle",s});let o=n.filter(s=>!fu(a.currentValues,s)),i=a.currentValues;i.push(...o),a.numberOfValues=Math.max(a.numberOfValues,i.length)})}function Co(t,e,r){e.forEach(a=>{var s;let n=a.facetId,o=(s=t[n])==null?void 0:s.request;if(!o)return;let i=r(a.values);o.currentValues=i,o.preventAutoSelect=!1})}function fu(t,e){let{start:r,end:a}=e;return t.find(n=>n.start===r&&n.end===a)}function ty(t){let{generateAutomaticRanges:e,currentValues:r,numberOfValues:a}=t;return e?Math.max(a,r.length):r.length}var mt=k(sn(),t=>{t.addCase(nr,(e,r)=>{let{payload:a}=r,n=Hw(a);cu(e,Im(n))}).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.dateFacetSet)!=null?n:e}).addCase(se,(e,r)=>{let a=r.payload.df||{};pu(e,a)}).addCase(or,(e,r)=>{let{facetId:a,selection:n}=r.payload;lu(e,a,n)}).addCase(ra,(e,r)=>{let{facetId:a,selection:n}=r.payload;du(e,a,n)}).addCase(Ar,(e,r)=>{let{facetId:a,values:n}=r.payload;uu(e,a,n)}).addCase(_c,(e,r)=>{oa(e,r.payload)}).addCase(Ce,e=>{Object.keys(e).forEach(r=>{oa(e,r)})}).addCase(Uc,(e,r)=>{no(e,r.payload)}).addCase(R.fulfilled,(e,r)=>{let a=r.payload.response.facets;Co(e,a,ry)}).addCase(na.fulfilled,(e,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];Co(e,a,ry)}).addCase(xe,(e,r)=>{oa(e,r.payload)})});function Hw(t){return{...su,currentValues:[],preventAutoSelect:!1,type:"dateRange",...t}}function ry(t){return t.map(e=>{let{numberOfResults:r,...a}=e;return a})}function mu(t,e){let{facetId:r,getRequest:a}=e,n=N(t),o=t.dispatch,i=()=>Jt(t.state,r);return{...n,isValueSelected:ru,isValueExcluded:hp,deselectAll(){o(me(r)),o(re())},sortBy(s){o(go({facetId:r,criterion:s})),o(re())},isSortedBy(s){return this.state.sortCriterion===s},enable(){o($e(r))},disable(){o(xe(r))},get state(){let s=a(),c=vt(t.state,r),u=s.sortCriteria,l=s.resultsMustMatch,d=c?c.values:[],f=Vt(t.state),p=i(),m=d.some(S=>S.state!=="idle");return{facetId:r,values:d,sortCriterion:u,resultsMustMatch:l,hasActiveValues:m,isLoading:f,enabled:p}}}}function gu(t,e){if(!t.generateAutomaticRanges&&t.currentValues===void 0){let r=`currentValues should be specified for ${e} when generateAutomaticRanges is false.`;throw new Error(r)}}var hu=["idle","selected","excluded"];var Su=["ascending","descending"],yu=["even","equiprobable"];var zw={start:new b,end:new b,endInclusive:new $,state:new b({constrainTo:hu})},Gw=new z({facetId:Xt,field:Zt,generateAutomaticRanges:Lc,filterFacetCount:er,injectionDepth:tr,numberOfValues:It,currentValues:new H({each:new E({values:zw})}),sortCriteria:new b({constrainTo:Su}),rangeAlgorithm:new b({constrainTo:yu})});function Cu(t,e){de(t,Gw,e,"buildDateFacet"),jc(e)}function ay(t,e){if(!Yw(t))throw A;gu(e.options,"buildDateFacet");let r=t.dispatch,a=Be(t,e.options),n={currentValues:[],...e.options,facetId:a};Cu(t,n),r(nr(n));let o=mu(t,{facetId:a,getRequest:()=>t.state.dateFacetSet[a].request});return{...o,toggleSelect:i=>r(ZS({facetId:a,selection:i})),toggleSingleSelect:function(i){i.state==="idle"&&r(me(a)),this.toggleSelect(i)},toggleExclude:i=>r(ey({facetId:a,selection:i})),toggleSingleExclude:function(i){i.state==="idle"&&r(me(a)),this.toggleExclude(i)},get state(){return o.state}}}function Yw(t){return t.addReducers({configuration:j,search:W,dateFacetSet:mt,facetOptions:Oe}),!0}function ny(t,e){let r=ay(t,e),a=t.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(R({legacy:ke(n()),next:{actionCause:T.facetClearAll,getEventExtraPayload:o=>new L(()=>o).getFacetClearAllMetadata(n())}}))},sortBy(o){r.sortBy(o),a(R({legacy:Kt({facetId:n(),criterion:o}),next:{actionCause:T.facetUpdateSort,getEventExtraPayload:i=>new L(()=>i).getFacetSortMetadata(n(),o)}}))},toggleSelect:o=>{r.toggleSelect(o),a(R({legacy:au(n(),o),next:nu(n(),o)}))},toggleExclude:o=>{r.toggleExclude(o),a(R({legacy:JS(n(),o)}))},get state(){return r.state}}}var oy=t=>({build:e=>ny(e,t)});var We=k(cn(),t=>{t.addCase(ir,(e,r)=>{let{payload:a}=r,n=Kw(a);cu(e,km(n))}).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.numericFacetSet)!=null?n:e}).addCase(se,(e,r)=>{let a=r.payload.nf||{};pu(e,a)}).addCase(sr,(e,r)=>{let{facetId:a,selection:n}=r.payload;lu(e,a,n)}).addCase(aa,(e,r)=>{let{facetId:a,selection:n}=r.payload;du(e,a,n)}).addCase(Pr,(e,r)=>{let{facetId:a,values:n}=r.payload;uu(e,a,n)}).addCase(Hc,(e,r)=>{oa(e,r.payload)}).addCase(Ce,e=>{Object.keys(e).forEach(r=>{oa(e,r)})}).addCase(Wc,(e,r)=>{no(e,r.payload)}).addCase(R.fulfilled,(e,r)=>{let a=r.payload.response.facets;Co(e,a,iy)}).addCase(na.fulfilled,(e,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];Co(e,a,iy)}).addCase(xe,(e,r)=>{oa(e,r.payload)})});function Kw(t){return{...su,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...t}}function iy(t){return t.map(e=>{let{numberOfResults:r,...a}=e;return a})}var sy={facetId:G,selection:new E({values:La})},cy=J("numericFacet/executeToggleSelect",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,sy),e(sr(t)),e(ou(t)),e(re())}),f3=J("numericFacet/executeToggleExclude",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,sy),e(aa(t)),e(iu(t)),e(re())});var Jw={start:new I,end:new I,endInclusive:new $,state:new b({constrainTo:hu})},Xw=new z({facetId:Xt,field:Zt,generateAutomaticRanges:Lc,filterFacetCount:er,injectionDepth:tr,numberOfValues:It,currentValues:new H({each:new E({values:Jw})}),sortCriteria:new b({constrainTo:Su}),resultsMustMatch:new b({constrainTo:yo}),rangeAlgorithm:new b({constrainTo:yu})});function xu(t,e){de(t,Xw,e,"buildNumericFacet"),$c(e)}function ja(t){return{endInclusive:!1,state:"idle",...t}}function uy(t,e){if(!Zw(t))throw A;gu(e.options,"buildNumericFacet");let r=t.dispatch,a=Be(t,e.options),n={currentValues:[],...e.options,facetId:a};xu(t,n),r(ir(n));let o=mu(t,{facetId:a,getRequest:()=>t.state.numericFacetSet[a].request});return{...o,toggleSelect:i=>r(cy({facetId:a,selection:i})),toggleSingleSelect(i){i.state==="idle"&&r(me(a)),this.toggleSelect(i)},get state(){return o.state}}}function Zw(t){return t.addReducers({numericFacetSet:We,facetOptions:Oe,configuration:j,search:W}),!0}function ly(t,e){if(!eE(t))throw A;let r=uy(t,e),a=t.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(R({legacy:ke(n()),next:{actionCause:T.facetClearAll,getEventExtraPayload:o=>new L(()=>o).getFacetClearAllMetadata(n())}}))},sortBy(o){r.sortBy(o),a(R({legacy:Kt({facetId:n(),criterion:o}),next:{actionCause:T.facetUpdateSort,getEventExtraPayload:i=>new L(()=>i).getFacetSortMetadata(n(),o)}}))},toggleSelect:o=>{r.toggleSelect(o),a(R({legacy:au(n(),o),next:nu(n(),o)}))},get state(){return{...r.state}}}}function eE(t){return t.addReducers({numericFacetSet:We,configuration:j,search:W}),!0}var dy=t=>({build:e=>ly(e,t)});function tE(t,e){return!!e&&e.facetId in t.numericFacetSet}var py=(t,e)=>{let r=vt(t,e);if(tE(t,r))return r},fy=(t,e)=>(py(t,e)||{values:[]}).values.filter(a=>a.state!=="idle"),my=(t,e)=>(py(t,e)||{values:[]}).values.filter(a=>a.state==="selected");function gy(t,e){var c;if(!rE(t))throw A;let r=N(t),{dispatch:a}=t,n=()=>t.state,o=Be(t,e.options),i={...e.options,currentValues:((c=e.initialState)==null?void 0:c.range)?[{...e.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};xu(t,i),a(ir(i));let s=()=>Jt(t.state,o);return{...r,clear:()=>{a(Pr({facetId:o,values:[]})),a(re())},setRange:u=>{let l={...u,state:"selected",numberOfResults:0,endInclusive:!0},d=Pr({facetId:o,values:[l]});return d.error?!1:(a(d),a(re()),!0)},enable(){a($e(o))},disable(){a(xe(o))},get state(){let u=Vt(n()),l=s(),d=my(n(),o),f=d.length?d[0]:void 0;return{facetId:o,isLoading:u,range:f,enabled:l}}}}function rE(t){return t.addReducers({numericFacetSet:We,facetOptions:Oe,configuration:j,search:W}),!0}function hy(t,e){if(!aE(t))throw A;let r=gy(t,e),{dispatch:a}=t,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(R({legacy:ke(n()),next:{actionCause:T.facetClearAll,getEventExtraPayload:o=>new L(()=>o).getFacetClearAllMetadata(n())}}))},setRange:o=>{let i=r.setRange(o);return i&&a(R({legacy:be({facetId:n(),facetValue:`${o.start}..${o.end}`}),next:{actionCause:T.facetSelect,getEventExtraPayload:s=>new L(()=>s).getFacetMetadata(n(),`${o.start}..${o.end}`)}})),i},get state(){return{...r.state}}}}function aE(t){return t.addReducers({numericFacetSet:We,configuration:j,search:W}),!0}var Sy=t=>({build:e=>hy(e,t)});function nE(t,e){return!!e&&e.facetId in t.dateFacetSet}var yy=(t,e)=>{let r=vt(t,e);if(nE(t,r))return r},Cy=(t,e)=>(yy(t,e)||{values:[]}).values.filter(a=>a.state==="selected"),xy=(t,e)=>(yy(t,e)||{values:[]}).values.filter(a=>a.state!=="idle");function vy(t,e){var c;if(!oE(t))throw A;let r=N(t),{dispatch:a}=t,n=()=>t.state,o=Be(t,e.options),i={...e.options,currentValues:((c=e.initialState)==null?void 0:c.range)?[{...e.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Cu(t,i),a(nr(i));let s=()=>Jt(t.state,o);return{...r,clear:()=>{a(Ar({facetId:o,values:[]})),a(re())},setRange:u=>{let l={...u,state:"selected",numberOfResults:0,endInclusive:!0},d=Ar({facetId:o,values:[l]});return d.error?!1:(a(d),a(re()),!0)},enable(){a($e(o))},disable(){a(xe(o))},get state(){let u=Vt(n()),l=s(),d=Cy(n(),o),f=d.length?d[0]:void 0;return{facetId:o,isLoading:u,range:f,enabled:l}}}}function oE(t){return t.addReducers({dateFacetSet:mt,facetOptions:Oe,configuration:j,search:W}),!0}function Fy(t,e){if(!iE(t))throw A;let r=vy(t,e),{dispatch:a}=t,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(R({legacy:ke(n()),next:{actionCause:T.facetClearAll,getEventExtraPayload:o=>new L(()=>o).getFacetClearAllMetadata(n())}}))},setRange:o=>{let i=r.setRange(o);return i&&a(R({legacy:be({facetId:n(),facetValue:`${o.start}..${o.end}`}),next:{actionCause:T.facetSelect,getEventExtraPayload:s=>new L(()=>s).getFacetMetadata(n(),`${o.start}..${o.end}`)}})),i},get state(){return{...r.state}}}}function iE(t){return t.addReducers({dateFacetSet:mt,configuration:j,search:W}),!0}var by=t=>({build:e=>Fy(e,t)});var U4=new E({options:{required:!1},values:{by:new Ft({enum:kt,required:!0}),fields:new H({each:new E({values:{field:new b({required:!0}),direction:new Ft({enum:Gc}),displayName:new b}})})}});var Ry=t=>{let e=sE(t),{view:r,user:a,...n}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,...n,context:{user:a,view:r,cart:t.cart.cartItems.map(o=>t.cart.cart[o])},facets:e,...t.commercePagination&&{page:t.commercePagination.page},...t.commerceSort&&{sort:cE(t.commerceSort.appliedSort)}}};function sE(t){return!t.facetOrder||!t.commerceFacetSet?[]:t.facetOrder.map(e=>t.commerceFacetSet[e].request).filter(e=>e.values.length>0)}function cE(t){if(!!t)return t.by===kt.Relevance?{sortCriteria:kt.Relevance}:{sortCriteria:kt.Fields,fields:t.fields.map(({name:e,direction:r})=>({field:e,direction:r}))}}var Ay=()=>Ig("analytics/commerce/productListing/load",t=>t.makeInterfaceLoad(),t=>new yn(t));var Py=J("commerce/productListing/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:n})=>{let o=e(),{apiClient:i}=n,s=await i.getProductListing(Ry(o));return ye(s)?(r(ut(s.error)),a(s.error)):{response:s.success,analyticsAction:Ay()}});var vu=k(tc(),t=>{t.addCase(R.fulfilled,(e,r)=>r.payload.response.facets.map(a=>a.facetId)).addCase(Py.fulfilled,(e,r)=>{let a=n=>{var o;return(o=n.facetId)!=null?o:n.field};return r.payload.response.facets.map(a)}).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOrder)!=null?n:e})});var Fu=()=>w("history/analytics/forward",t=>t.makeSearchEvent("historyForward")),bu=()=>w("history/analytics/backward",t=>t.makeSearchEvent("historyBackward")),Ru=()=>w("history/analytics/noresultsback",t=>t.makeNoResultsBack());var wy=t=>({past:[],present:t,future:[]}),uE=t=>{let{past:e,present:r,future:a}=t;if(!r||e.length===0)return t;let n=e[e.length-1];return{past:e.slice(0,e.length-1),present:n,future:[r,...a]}},lE=t=>{let{past:e,present:r,future:a}=t;if(!r||a.length===0)return t;let n=a[0],o=a.slice(1);return{past:[...e,r],present:n,future:o}},dE=t=>{let{action:e,state:r,reducer:a}=t,{past:n,present:o}=r,i=a(o,e);return o?o===i?r:{past:[...n,o],present:i,future:[]}:wy(i)},Ey=t=>{let{actionTypes:e,reducer:r}=t,a=wy();return(n=a,o)=>{switch(o.type){case e.undo:return uE(n);case e.redo:return lE(n);case e.snapshot:return dE({state:n,reducer:r,action:o});default:return n}}};var pE=Object.getOwnPropertyNames,fE=Object.getOwnPropertySymbols,mE=Object.prototype.hasOwnProperty;function Iy(t,e){return function(a,n,o){return t(a,n,o)&&e(a,n,o)}}function Au(t){return function(r,a,n){if(!r||!a||typeof r!="object"||typeof a!="object")return t(r,a,n);var o=n.cache,i=o.get(r),s=o.get(a);if(i&&s)return i===a&&s===r;o.set(r,a),o.set(a,r);var c=t(r,a,n);return o.delete(r),o.delete(a),c}}function ky(t){return pE(t).concat(fE(t))}var Oy=Object.hasOwn||function(t,e){return mE.call(t,e)};function xo(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var qy="_owner",Ty=Object.getOwnPropertyDescriptor,Dy=Object.keys;function gE(t,e,r){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(!r.equals(t[a],e[a],a,a,t,e,r))return!1;return!0}function hE(t,e){return xo(t.getTime(),e.getTime())}function Vy(t,e,r){if(t.size!==e.size)return!1;for(var a={},n=t.entries(),o=0,i,s;(i=n.next())&&!i.done;){for(var c=e.entries(),u=!1,l=0;(s=c.next())&&!s.done;){var d=i.value,f=d[0],p=d[1],m=s.value,S=m[0],v=m[1];!u&&!a[l]&&(u=r.equals(f,S,o,l,t,e,r)&&r.equals(p,v,f,S,t,e,r))&&(a[l]=!0),l++}if(!u)return!1;o++}return!0}function SE(t,e,r){var a=Dy(t),n=a.length;if(Dy(e).length!==n)return!1;for(var o;n-- >0;)if(o=a[n],o===qy&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Oy(e,o)||!r.equals(t[o],e[o],o,o,t,e,r))return!1;return!0}function Vi(t,e,r){var a=ky(t),n=a.length;if(ky(e).length!==n)return!1;for(var o,i,s;n-- >0;)if(o=a[n],o===qy&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Oy(e,o)||!r.equals(t[o],e[o],o,o,t,e,r)||(i=Ty(t,o),s=Ty(e,o),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function yE(t,e){return xo(t.valueOf(),e.valueOf())}function CE(t,e){return t.source===e.source&&t.flags===e.flags}function Ny(t,e,r){if(t.size!==e.size)return!1;for(var a={},n=t.values(),o,i;(o=n.next())&&!o.done;){for(var s=e.values(),c=!1,u=0;(i=s.next())&&!i.done;)!c&&!a[u]&&(c=r.equals(o.value,i.value,o.value,i.value,t,e,r))&&(a[u]=!0),u++;if(!c)return!1}return!0}function xE(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var vE="[object Arguments]",FE="[object Boolean]",bE="[object Date]",RE="[object Map]",AE="[object Number]",PE="[object Object]",wE="[object RegExp]",EE="[object Set]",IE="[object String]",kE=Array.isArray,My=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ly=Object.assign,OE=Object.prototype.toString.call.bind(Object.prototype.toString);function qE(t){var e=t.areArraysEqual,r=t.areDatesEqual,a=t.areMapsEqual,n=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,i=t.areRegExpsEqual,s=t.areSetsEqual,c=t.areTypedArraysEqual;return function(l,d,f){if(l===d)return!0;if(l==null||d==null||typeof l!="object"||typeof d!="object")return l!==l&&d!==d;var p=l.constructor;if(p!==d.constructor)return!1;if(p===Object)return n(l,d,f);if(kE(l))return e(l,d,f);if(My!=null&&My(l))return c(l,d,f);if(p===Date)return r(l,d,f);if(p===RegExp)return i(l,d,f);if(p===Map)return a(l,d,f);if(p===Set)return s(l,d,f);var m=OE(l);return m===bE?r(l,d,f):m===wE?i(l,d,f):m===RE?a(l,d,f):m===EE?s(l,d,f):m===PE?typeof l.then!="function"&&typeof d.then!="function"&&n(l,d,f):m===vE?n(l,d,f):m===FE||m===AE||m===IE?o(l,d,f):!1}}function TE(t){var e=t.circular,r=t.createCustomConfig,a=t.strict,n={areArraysEqual:a?Vi:gE,areDatesEqual:hE,areMapsEqual:a?Iy(Vy,Vi):Vy,areObjectsEqual:a?Vi:SE,arePrimitiveWrappersEqual:yE,areRegExpsEqual:CE,areSetsEqual:a?Iy(Ny,Vi):Ny,areTypedArraysEqual:a?Vi:xE};if(r&&(n=Ly({},n,r(n))),e){var o=Au(n.areArraysEqual),i=Au(n.areMapsEqual),s=Au(n.areObjectsEqual),c=Au(n.areSetsEqual);n=Ly({},n,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:c})}return n}function DE(t){return function(e,r,a,n,o,i,s){return t(e,r,s)}}function VE(t){var e=t.circular,r=t.comparator,a=t.createState,n=t.equals,o=t.strict;if(a)return function(c,u){var l=a(),d=l.cache,f=d===void 0?e?new WeakMap:void 0:d,p=l.meta;return r(c,u,{cache:f,equals:n,meta:p,strict:o})};if(e)return function(c,u){return r(c,u,{cache:new WeakMap,equals:n,meta:void 0,strict:o})};var i={cache:void 0,equals:n,meta:void 0,strict:o};return function(c,u){return r(c,u,i)}}var h6=cr(),S6=cr({strict:!0}),y6=cr({circular:!0}),C6=cr({circular:!0,strict:!0}),x6=cr({createInternalComparator:function(){return xo}}),v6=cr({strict:!0,createInternalComparator:function(){return xo}}),F6=cr({circular:!0,createInternalComparator:function(){return xo}}),b6=cr({circular:!0,createInternalComparator:function(){return xo},strict:!0});function cr(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,a=t.createInternalComparator,n=t.createState,o=t.strict,i=o===void 0?!1:o,s=TE(t),c=qE(s),u=a?a(c):DE(c);return VE({circular:r,comparator:c,createState:n,equals:u,strict:i})}function Ua(t,e,r=(a,n)=>a===n){return t.length===e.length&&t.findIndex((a,n)=>!r(e[n],a))===-1}function NE(t,e){return t.length!==e.length?!1:t.every(r=>e.findIndex(a=>Ni(r,a))!==-1)}var Ni=cr({createCustomConfig:t=>({...t,areArraysEqual:NE})});var ME=k(th(),t=>{t.addCase(Rt,(e,r)=>LE(e,r.payload)?void 0:r.payload)}),LE=(t,e)=>QE(t.context,e.context)&&BE(t.dictionaryFieldContext,e.dictionaryFieldContext)&&zE(t.advancedSearchQueries,e.advancedSearchQueries)&&jE(t.tabSet,e.tabSet)&&UE(t.staticFilterSet,e.staticFilterSet)&&Sp(t.facetSet,e.facetSet)&&Sp(t.dateFacetSet,e.dateFacetSet)&&Sp(t.numericFacetSet,e.numericFacetSet)&&$E(t.automaticFacetSet,e.automaticFacetSet)&&_E(t.categoryFacetSet,e.categoryFacetSet)&&WE(t.pagination,e.pagination)&&HE(t.query,e.query)&&GE(t,e)&&YE(t.pipeline,e.pipeline)&&KE(t.searchHub,e.searchHub)&&JE(t.facetOrder,e.facetOrder)&&XE(t.debug,e.debug),QE=(t,e)=>JSON.stringify(t.contextValues)===JSON.stringify(e.contextValues),BE=(t,e)=>JSON.stringify(t.contextValues)===JSON.stringify(e.contextValues),jE=(t,e)=>{let r=Qy(t),a=Qy(e);return(r==null?void 0:r.id)===(a==null?void 0:a.id)},Qy=t=>Object.values(t).find(e=>e.isActive),UE=(t,e)=>{for(let[r,a]of Object.entries(e)){if(!t[r])return!1;let n=By(t[r]),o=By(a);if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},By=t=>t.values.filter(e=>e.state!=="idle"),Sp=(t,e)=>{for(let[r,a]of Object.entries(e)){if(!t[r])return!1;let n=t[r].request.currentValues.filter(i=>i.state!=="idle"),o=a.request.currentValues.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},_E=(t,e)=>{var r;for(let[a,n]of Object.entries(e)){if(!t[a])return!1;let o=Ke((r=t[a])==null?void 0:r.request.currentValues).map(({value:s})=>s),i=Ke(n==null?void 0:n.request.currentValues).map(({value:s})=>s);if(JSON.stringify(o)!==JSON.stringify(i))return!1}return!0},$E=(t,e)=>{for(let[r,a]of Object.entries(e.set)){if(!t.set[r])return!1;let n=t.set[r].response.values.filter(i=>i.state!=="idle"),o=a.response.values.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},WE=(t,e)=>t.firstResult===e.firstResult&&t.numberOfResults===e.numberOfResults,HE=(t,e)=>JSON.stringify(t)===JSON.stringify(e),zE=(t,e)=>JSON.stringify(t)===JSON.stringify(e),GE=(t,e)=>t.sortCriteria===e.sortCriteria,YE=(t,e)=>t===e,KE=(t,e)=>t===e,JE=(t,e)=>Ua(t,e),XE=(t,e)=>t===e,Pu=Ey({actionTypes:{redo:kd.type,undo:Id.type,snapshot:Rt.type},reducer:ME});function jy(t){if(!ZE(t))throw A;let e=N(t),{dispatch:r}=t,a=()=>t.state,n=o=>o.past.length>0&&!ee(o.present);return{...e,get state(){return a().history},async back(){!n(this.state)||(await r(xi()),r(R({legacy:bu(),next:{actionCause:T.historyBackward,getEventExtraPayload:o=>new L(()=>o).getBaseMetadata()}})))},async forward(){!this.state.future.length||!this.state.present||(await r(_s()),r(R({legacy:Fu(),next:{actionCause:T.historyForward,getEventExtraPayload:o=>new L(()=>o).getBaseMetadata()}})))},async backOnNoResults(){!n(this.state)||(await r(xi()),r(R({legacy:Ru(),next:{actionCause:T.noResultsBack,getEventExtraPayload:o=>new L(()=>o).getBaseMetadata()}})))}}}function ZE(t){return t.addReducers({history:Pu,configuration:j,facetOrder:vu}),!0}var Uy=()=>({build:t=>jy(t)});var eI=new I({min:Rm,default:Ss,required:!1}),tI=new I({min:Fm,max:bm,default:hs,required:!1}),rI={desiredCount:tI,numberOfValues:eI},wu=h("automaticFacet/setOptions",t=>y(t,rI)),Eu=h("automaticFacet/deselectAll",t=>y(t,G)),aI=P,ia=h("automaticFacet/toggleSelectValue",t=>y(t,{field:aI,selection:new E({values:Da})}));var gt=k(dt(),t=>{t.addCase(On,(e,r)=>{let a=yp(e),n=r.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=Mi(a,n)}).addCase(qn,(e,r)=>{e.numberOfResults=r.payload,e.firstResult=0}).addCase(Pt,e=>{e.firstResult=0}).addCase(Tn,(e,r)=>{let a=r.payload;e.firstResult=Mi(a,e.numberOfResults)}).addCase(ct,(e,r)=>{let a=r.payload;e.firstResult=Mi(a,e.numberOfResults)}).addCase(Vn,e=>{let r=yp(e),a=Math.max(r-1,Ra);e.firstResult=Mi(a,e.numberOfResults)}).addCase(Dn,e=>{let r=yp(e),a=nI(e),n=Math.min(r+1,a);e.firstResult=Mi(n,e.numberOfResults)}).addCase(ie.fulfilled,(e,r)=>{r.payload&&(e.numberOfResults=r.payload.pagination.numberOfResults,e.firstResult=r.payload.pagination.firstResult)}).addCase(se,(e,r)=>{var a,n;e.firstResult=(a=r.payload.firstResult)!=null?a:e.firstResult,e.numberOfResults=(n=r.payload.numberOfResults)!=null?n:e.defaultNumberOfResults}).addCase(R.fulfilled,(e,r)=>{let{response:a}=r.payload;e.totalCountFiltered=a.totalCountFiltered}).addCase(na.fulfilled,(e,r)=>{let{response:a}=r.payload;e.totalCountFiltered=a.pagination.totalCount}).addCase(me,e=>{ht(e)}).addCase(ar,e=>{ht(e)}).addCase(Gt,e=>{ht(e)}).addCase(Zr,e=>{ht(e)}).addCase(ro,e=>{ht(e)}).addCase(or,e=>{ht(e)}).addCase(sr,e=>{ht(e)}).addCase(Ce,e=>{ht(e)}).addCase(Ar,e=>{ht(e)}).addCase(Pr,e=>{ht(e)}).addCase(Ta,e=>{ht(e)}).addCase(ia,e=>{ht(e)})});function ht(t){t.firstResult=dt().firstResult}function yp(t){let{firstResult:e,numberOfResults:r}=t;return Cp(e,r)}function nI(t){let{totalCountFiltered:e,numberOfResults:r}=t;return xp(e,r)}function Mi(t,e){return(t-1)*e}function Cp(t,e){return Math.round(t/e)+1}function xp(t,e){let r=Math.min(t,Ri);return Math.ceil(r/e)}function oI(t){return t.pagination.firstResult}function _y(t){return t.pagination.numberOfResults}function iI(t){return t.pagination.totalCountFiltered}var wr=t=>{let e=oI(t),r=_y(t);return Cp(e,r)},Li=t=>{let e=iI(t),r=_y(t);return xp(e,r)},Iu=(t,e)=>{let r=wr(t),a=Li(t),n=sI(r,e);return n=cI(n),n=uI(n,a),lI(n)};function sI(t,e){let r=e%2==0,a=Math.floor(e/2),n=r?a-1:a,o=t-a,i=t+n;return{start:o,end:i}}function cI(t){let e=Math.max(Ra-t.start,0),r=t.start+e,a=t.end+e;return{start:r,end:a}}function uI(t,e){let r=Math.max(t.end-e,0),a=Math.max(t.start-r,Ra),n=t.end-r;return{start:a,end:n}}function lI(t){let e=[];for(let r=t.start;r<=t.end;++r)e.push(r);return e}var vo=()=>w("analytics/pager/resize",(t,e)=>{var r;return t.makePagerResize({currentResultsPerPage:((r=e.pagination)==null?void 0:r.numberOfResults)||dt().numberOfResults})}),Fo=()=>w("analytics/pager/number",(t,e)=>t.makePagerNumber({pagerNumber:wr(e)})),ku=()=>w("analytics/pager/next",(t,e)=>t.makePagerNext({pagerNumber:wr(e)})),Ou=()=>w("analytics/pager/previous",(t,e)=>t.makePagerPrevious({pagerNumber:wr(e)}));var dI=new z({numberOfPages:new I({default:5,min:0})}),pI=new z({page:new I({min:1})});function $y(t,e={}){if(!fI(t))throw A;let r=N(t),{dispatch:a}=t,n=de(t,dI,e.options,"buildPager"),i=Pe(t,pI,e.initialState,"buildPager").page;i&&a(Tn(i));let s=()=>wr(t.state),c=()=>{let{numberOfPages:l}=n;return Iu(t.state,l)},u=()=>Li(t.state);return{...r,get state(){let l=s(),d=u(),f=l>Ra&&d>0,p=l<d;return{currentPage:l,currentPages:c(),maxPage:d,hasPreviousPage:f,hasNextPage:p}},selectPage(l){a(ct(l))},nextPage(){a(Dn())},previousPage(){a(Vn())},isCurrentPage(l){return l===this.state.currentPage}}}function fI(t){return t.addReducers({configuration:j,pagination:gt}),!0}function Wy(t,e={}){let{dispatch:r}=t,a=$y(t,e);return{...a,get state(){return a.state},selectPage(n){a.selectPage(n),r(Wt({legacy:Fo()}))},nextPage(){a.nextPage(),r(Wt({legacy:ku()}))},previousPage(){a.previousPage(),r(Wt({legacy:Ou()}))}}}var Hy=t=>({build:e=>Wy(e,t)});function zy(t){if(!mI(t))throw A;let e=N(t),r=()=>t.state;return{...e,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function mI(t){return t.addReducers({search:W}),!0}function Gy(t){return zy(t)}var Yy=()=>({build:t=>Gy(t)});function bo(t){if(!gI(t))throw A;let e=N(t),r=()=>t.state;return{...e,get state(){let a=r();return{hasError:a.search.error!==null,isLoading:a.search.isLoading,hasResults:!!a.search.results.length,firstSearchExecuted:Ai(a)}}}}function gI(t){return t.addReducers({search:W}),!0}function Ky(t){if(!hI(t))throw A;let e=N(t),r=bo(t),a=()=>t.state,n=()=>{let o=a().search.duration/1e3;return Math.round((o+Number.EPSILON)*100)/100};return{...e,get state(){return{...r.state,durationInMilliseconds:a().search.duration,durationInSeconds:n(),firstResult:a().pagination.firstResult+1,hasDuration:a().search.duration!==0,hasQuery:a().search.queryExecuted!=="",lastResult:a().pagination.firstResult+a().search.results.length,query:a().search.queryExecuted,total:a().pagination.totalCountFiltered}}}}function hI(t){return t.addReducers({search:W,pagination:gt}),!0}function Jy(t){return Ky(t)}var Xy=()=>({build:t=>Jy(t)});var SI=new z({fieldsToInclude:new H({required:!1,each:new b({required:!0,emptyAllowed:!1})})});function qu(t,e){if(!yI(t))throw A;let r=N(t),a=bo(t),{dispatch:n}=t,o=()=>t.state,i=de(t,SI,e==null?void 0:e.options,"buildCoreResultList");i.fieldsToInclude&&n(Yr(i.fieldsToInclude));let s=()=>t.state.search.results.length<t.state.search.response.totalCountFiltered,c=0,u=0,l=5,d=200,f=!1;return{...r,get state(){let m=o();return{...a.state,results:m.search.results,moreResultsAvailable:s(),searchResponseId:m.search.searchResponseId}},fetchMoreResults:()=>{if(t.state.search.isLoading)return;if(!s()){t.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-c<d){if(u++,u>=l){c=Date.now(),!f&&t.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${l} times, with little delay. Please verify the conditions under which the function is called.`),f=!0;return}}else u=0;f=!1,(e==null?void 0:e.fetchMoreResultsActionCreator)&&n(e==null?void 0:e.fetchMoreResultsActionCreator()).then(()=>c=Date.now())}}}function yI(t){return t.addReducers({search:W,configuration:j,fields:Xr}),!0}function Zy(t,e){return qu(t,{...e,fetchMoreResultsActionCreator:Gr})}var eC=t=>({build:e=>Zy(e,t)});var CI=new z({numberOfResults:new I({min:0})});function tC(t,e={}){if(!xI(t))throw A;let r=N(t),{dispatch:a}=t,n=()=>t.state,i=Pe(t,CI,e.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&a(On(i)),{...r,get state(){return{numberOfResults:n().pagination.numberOfResults}},set(s){a(qn(s))},isSetTo(s){return s===this.state.numberOfResults}}}function xI(t){return t.addReducers({pagination:gt,configuration:j}),!0}function rC(t,e={}){if(!vI(t))throw A;let r=tC(t,e),{dispatch:a}=t;return{...r,get state(){return{...r.state}},set(n){r.set(n),a(Wt({legacy:vo()}))}}}function vI(t){return t.addReducers({pagination:gt,configuration:j}),!0}var aC=t=>({build:e=>rC(e,t)});var Qi={id:P},Ro=h("querySuggest/register",t=>y(t,{...Qi,count:new I({min:0})})),nC=h("querySuggest/unregister",t=>y(t,Qi)),ur=h("querySuggest/selectSuggestion",t=>y(t,{...Qi,expression:le})),sa=h("querySuggest/clear",t=>y(t,Qi)),ca=J("querySuggest/fetch",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(t,Qi);let o=t.id,i=await FI(o,e()),s=await a.querySuggest(i);return ye(s)?r(s.error):{id:o,q:i.q,...s.success}}),FI=async(t,e)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,count:e.querySuggest[t].count,q:e.querySet[t],locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,actionsHistory:e.configuration.analytics.enabled?Lt.getHistory():[],...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await at(e.configuration.analytics),...e.configuration.analytics.enabled&&await Nn(e.configuration.analytics)},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var ua=()=>w("analytics/searchbox/submit",t=>t.makeSearchboxSubmit());var oC={id:P,query:le},Ao=h("querySet/register",t=>y(t,oC)),_a=h("querySet/update",t=>y(t,oC));var Po=k(nc(),t=>{t.addCase(Ao,(e,r)=>{let{id:a,query:n}=r.payload;a in e||(e[a]=n)}).addCase(_a,(e,r)=>{let{id:a,query:n}=r.payload;vp(e,a,n)}).addCase(ur,(e,r)=>{let{id:a,expression:n}=r.payload;vp(e,a,n)}).addCase(R.fulfilled,(e,r)=>{let{queryExecuted:a}=r.payload;iC(e,a)}).addCase(se,(e,r)=>{ee(r.payload.q)||iC(e,r.payload.q)}).addCase(ie.fulfilled,(e,r)=>{if(!!r.payload)for(let[a,n]of Object.entries(r.payload.querySet))vp(e,a,n)})});function iC(t,e){Object.keys(t).forEach(r=>t[r]=e)}var vp=(t,e,r)=>{e in t&&(t[e]=r)};var Tu=t=>w("analytics/querySuggest",(e,r)=>{let a=Fp(r,t);return e.makeOmniboxAnalytics(a)});function Fp(t,e){let{id:r,suggestion:a}=e,n=t.querySuggest&&t.querySuggest[r];if(!n)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let o=n.completions.map(u=>u.expression),i=n.partialQueries.length-1,s=n.partialQueries[i]||"",c=n.responseId;return{suggestionRanking:o.indexOf(a),partialQuery:s,partialQueries:n.partialQueries,suggestions:o,querySuggestResponseId:c}}var sC=()=>({});var wo=k(sC(),t=>t.addCase(Ro,(e,r)=>{let a=r.payload.id;a in e||(e[a]=bI(r.payload))}).addCase(nC,(e,r)=>{delete e[r.payload.id]}).addCase(ca.pending,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.currentRequestId=r.meta.requestId,a.isLoading=!0)}).addCase(ca.fulfilled,(e,r)=>{let a=e[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{q:n}=r.payload;n&&a.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions,a.isLoading=!1,a.error=null}).addCase(ca.rejected,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.error=r.payload||null,a.isLoading=!1)}).addCase(sa,(e,r)=>{let a=e[r.payload.id];!a||(a.responseId="",a.completions=[],a.partialQueries=[])}));function bI(t){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...t}}var He=k(Fe(),t=>t.addCase(Qe,(e,r)=>({...e,...r.payload})).addCase(lt,(e,r)=>{e.q=r.payload}).addCase(ur,(e,r)=>{e.q=r.payload.expression}).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.query)!=null?n:e}).addCase(se,(e,r)=>{var a,n;e.q=(a=r.payload.q)!=null?a:e.q,e.enableQuerySyntax=(n=r.payload.enableQuerySyntax)!=null?n:e.enableQuerySyntax}));function cC(t,e){return t=RI(t),t.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,a,n,o)=>a?bp(a,e.notMatchDelimiters):n?bp(n,e.exactMatchDelimiters):o?bp(o,e.correctionDelimiters):r)}function bp(t,e){return e?e.open+t+e.close:t}function RI(t){let e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(e).join("|")+")",a=RegExp(r),n=RegExp(r,"g");return a.test(t)?t.replace(n,o=>e[o]):t}var Du={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},Rp={open:new b,close:new b},Ap={id:P,numberOfSuggestions:new I({min:0}),enableQuerySyntax:new $,highlightOptions:new E({values:{notMatchDelimiters:new E({values:Rp}),exactMatchDelimiters:new E({values:Rp}),correctionDelimiters:new E({values:Rp})}}),clearFilters:new $},uC=new z(Ap);function lC(t,e){var u,l;if(!PI(t))throw A;let r=N(t),{dispatch:a}=t,n=()=>t.state,o=((u=e.options)==null?void 0:u.id)||Za("search_box"),i={id:o,highlightOptions:{...(l=e.options)==null?void 0:l.highlightOptions},...Du,...e.options};de(t,uC,i,"buildSearchBox"),a(Ao({id:o,query:t.state.query.q})),i.numberOfSuggestions&&a(Ro({id:o,count:i.numberOfSuggestions}));let s=()=>t.state.querySet[i.id],c=async d=>{let{enableQuerySyntax:f,clearFilters:p}=i;a(mc({q:s(),enableQuerySyntax:f,clearFilters:p})),e.isNextAnalyticsReady?a(e.executeSearchActionCreator(d)):a(e.executeSearchActionCreator(d.legacy))};return{...r,updateText(d){a(_a({id:o,query:d})),this.showSuggestions()},clear(){a(_a({id:o,query:""})),a(sa({id:o}))},showSuggestions(){i.numberOfSuggestions&&a(e.fetchQuerySuggestionsActionCreator({id:o}))},selectSuggestion(d){a(ur({id:o,expression:d})),c({legacy:Tu({id:o,suggestion:d}),next:{actionCause:T.omniboxAnalytics,getEventExtraPayload:f=>new L(()=>f).getOmniboxAnalyticsMetadata(o,d)}}).then(()=>{a(sa({id:o}))})},submit(d=ua()){c({legacy:d}),a(sa({id:o}))},get state(){let d=n(),f=d.querySuggest[i.id],p=AI(f,i.highlightOptions),m=f?f.isLoading:!1;return{value:s(),suggestions:p,isLoading:d.search.isLoading,isLoadingSuggestions:m}}}}function AI(t,e){return t?t.completions.map(r=>({highlightedValue:cC(r.highlighted,e),rawValue:r.expression})):[]}function PI(t){return t.addReducers({query:He,querySuggest:wo,configuration:j,querySet:Po,search:W}),!0}function Vu(t,e={}){let r=lC(t,{...e,executeSearchActionCreator:R,fetchQuerySuggestionsActionCreator:ca,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(ua())},get state(){return r.state}}}var dC=t=>({build:e=>Vu(e,t)});var Nu=k(rc(),t=>{t.addCase(In,(e,r)=>{let{id:a}=r.payload;e[a]||(e[a]={q:"",cache:{}})}),t.addCase(_t,(e,r)=>{let{q:a,id:n}=r.payload;!a||(e[n].q=a)}),t.addCase(kn,(e,r)=>{let{id:a}=r.payload;Object.entries(e[a].cache).forEach(([n,o])=>{ac(o)&&delete e[a].cache[n]})}),t.addCase(zn.pending,(e,r)=>{for(let n in e)for(let o in e[n].cache)e[n].cache[o].isActive=!1;if(!Mu(e,r.meta)){wI(e,r.meta);return}let a=Mu(e,r.meta);a.isLoading=!0,a.isActive=!0,a.error=null}),t.addCase(zn.fulfilled,(e,r)=>{let{results:a,searchUid:n,totalCountFiltered:o,duration:i}=r.payload,{cacheTimeout:s}=r.meta.arg,c=Mu(e,r.meta);c.isActive=!0,c.searchUid=n,c.isLoading=!1,c.error=null,c.results=a,c.expiresAt=s?s+Date.now():0,c.totalCountFiltered=o,c.duration=i}),t.addCase(zn.rejected,(e,r)=>{let a=Mu(e,r.meta);a.error=r.error||null,a.isLoading=!1,a.isActive=!1})}),wI=(t,e)=>{let{q:r,id:a}=e.arg;t[a].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},Mu=(t,e)=>{let{q:r,id:a}=e.arg;return t[a].cache[r]||null};var EI={searchBoxId:pe,maxResultsPerQuery:new I({required:!0,min:1}),cacheTimeout:new I},pC=new z(EI);function fC(t,e){if(!II(t))throw A;let r=N(t),{dispatch:a}=t,n=()=>t.state,o={searchBoxId:e.options.searchBoxId||Za("instant-results-"),cacheTimeout:e.options.cacheTimeout||6e4,maxResultsPerQuery:e.options.maxResultsPerQuery};de(t,pC,o,"buildInstantResults");let i=o.searchBoxId;a(In({id:i}));let s=()=>n().instantResults[i],c=d=>s().cache[d],u=()=>s().q,l=()=>{let d=c(u());return d?d.isLoading?[]:d.results:[]};return{...r,updateQuery(d){if(!d)return;let f=c(d);(!f||!f.isLoading&&(f.error||ac(f)))&&a(zn({id:i,q:d,maxResultsPerQuery:o.maxResultsPerQuery,cacheTimeout:o.cacheTimeout})),a(_t({id:i,q:d}))},clearExpired(){a(kn({id:i}))},get state(){let d=u(),f=c(d);return{q:d,isLoading:(f==null?void 0:f.isLoading)||!1,error:(f==null?void 0:f.error)||null,results:l()}}}}function II(t){return t.addReducers({instantResults:Nu}),!0}var mC=t=>({build:e=>fC(e,t)});var Eo=()=>w("analytics/sort/results",(t,e)=>t.makeResultsSort({resultsSortBy:e.sortCriteria||rt()}));var gC={by:new Ft({enum:bt,required:!0})},Io=h("sortCriteria/register",t=>hC(t)),ko=h("sortCriteria/update",t=>hC(t)),hC=t=>fn(t)?(t.forEach(e=>y(e,gC)),{payload:t}):y(t,gC);var Oo=k(rt(),t=>{t.addCase(Io,(e,r)=>Nt(r.payload)).addCase(ko,(e,r)=>Nt(r.payload)).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.sortCriteria)!=null?n:e}).addCase(se,(e,r)=>{var a;return(a=r.payload.sortCriteria)!=null?a:e})});function kI(t,e){if(!e)return;let r=new z({criterion:new H({each:Bm})}),a=OI(e),n={...e,criterion:a};Pe(t,r,n,"buildSort")}function OI(t){return t.criterion?fn(t.criterion)?t.criterion:[t.criterion]:[]}function SC(t,e){var i;if(!qI(t))throw A;let r=N(t),{dispatch:a}=t,n=()=>t.state;kI(t,e.initialState);let o=(i=e.initialState)==null?void 0:i.criterion;return o&&a(Io(o)),{...r,sortBy(s){a(ko(s)),a(ct(1))},isSortedBy(s){return this.state.sortCriteria===Nt(s)},get state(){return{sortCriteria:n().sortCriteria}}}}function qI(t){return t.addReducers({configuration:j,sortCriteria:Oo}),!0}function yC(t,e={}){let{dispatch:r}=t,a=SC(t,e),n=()=>r(R({legacy:Eo(),next:{actionCause:T.resultsSort,getEventExtraPayload:o=>new L(()=>o).getResultSortMetadata()}}));return{...a,get state(){return a.state},sortBy(o){a.sortBy(o),n()}}}var CC=t=>({build:e=>yC(e,t)});var $a=P,Lu=new E({options:{required:!0},values:{caption:le,expression:le,state:new b({constrainTo:["idle","selected","excluded"]})}}),Qu=new H({required:!0,each:Lu});var qo=h("staticFilter/register",t=>y(t,{id:$a,values:Qu})),Er=h("staticFilter/toggleSelect",t=>y(t,{id:$a,value:Lu})),Ir=h("staticFilter/toggleExclude",t=>y(t,{id:$a,value:Lu})),la=h("staticFilter/deselectAllFilterValues",t=>y(t,$a)),Bu=t=>w("analytics/staticFilter/select",e=>e.makeStaticFilterSelect(t)),To=t=>w("analytics/staticFilter/deselect",e=>e.makeStaticFilterDeselect(t)),ju=t=>w("analytics/staticFilter/clearAll",e=>e.makeStaticFilterClearAll(t));var Do=k(oc(),t=>t.addCase(qo,(e,r)=>{let a=r.payload,{id:n}=a;n in e||(e[n]=a)}).addCase(Er,(e,r)=>{let{id:a,value:n}=r.payload,o=e[a];if(!o)return;let i=o.values.find(c=>c.caption===n.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Ir,(e,r)=>{let{id:a,value:n}=r.payload,o=e[a];if(!o)return;let i=o.values.find(c=>c.caption===n.caption);if(!i)return;let s=i.state==="excluded";i.state=s?"idle":"excluded"}).addCase(la,(e,r)=>{let a=r.payload,n=e[a];!n||n.values.forEach(o=>o.state="idle")}).addCase(Ce,e=>{Object.values(e).forEach(r=>{r.values.forEach(a=>a.state="idle")})}).addCase(se,(e,r)=>{let a=r.payload.sf||{};Object.entries(e).forEach(([n,o])=>{let i=a[n]||[];o.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));function Uu(t){return{state:"idle",...t}}var TI=new z({id:$a,values:Qu});function xC(t,e){if(!DI(t))throw A;de(t,TI,e.options,"buildStaticFilter");let r=N(t),{dispatch:a}=t,n=()=>t.state,{id:o}=e.options;return a(qo(e.options)),{...r,toggleSelect(i){a(Er({id:o,value:i})),a(R({legacy:_u(o,i),next:$u(o,i)}))},toggleSingleSelect(i){i.state==="idle"&&a(la(o)),a(Er({id:o,value:i})),a(R({legacy:_u(o,i),next:$u(o,i)}))},toggleExclude(i){a(Ir({id:o,value:i})),a(R({legacy:_u(o,i),next:$u(o,i)}))},toggleSingleExclude(i){i.state==="idle"&&a(la(o)),a(Ir({id:o,value:i})),a(R({legacy:_u(o,i),next:$u(o,i)}))},deselectAll(){a(la(o)),a(R({legacy:ju({staticFilterId:o}),next:{actionCause:T.staticFilterClearAll,getEventExtraPayload:i=>new L(()=>i).getStaticFilterClearAllMetadata(o)}}))},isValueSelected(i){return i.state==="selected"},isValueExcluded(i){return i.state==="excluded"},get state(){var c;let i=((c=n().staticFilterSet[o])==null?void 0:c.values)||[],s=i.some(u=>u.state!=="idle");return{id:o,values:i,hasActiveValues:s}}}}function DI(t){return t.addReducers({staticFilterSet:Do}),!0}function _u(t,e){let{caption:r,expression:a,state:n}=e;return(n==="idle"?Bu:To)({staticFilterId:t,staticFilterValue:{caption:r,expression:a}})}function $u(t,e){return{actionCause:e.state==="selected"?T.staticFilterDeselect:T.staticFilterSelect,getEventExtraPayload:a=>new L(()=>a).getStaticFilterToggleMetadata(t,e)}}var vC=t=>({build:e=>xC(e,t)});var Vo=k(ic(),t=>{t.addCase(Gn,(e,r)=>{let a=r.payload,{id:n}=a;n in e||(e[n]={...a,isActive:!1})}).addCase(Pt,(e,r)=>{let a=r.payload;FC(e,a)}).addCase(se,(e,r)=>{let a=r.payload.tab||"";FC(e,a)}).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.tabSet)!=null?n:e})});function FC(t,e){e in t&&Object.keys(t).forEach(a=>{t[a].isActive=a===e})}var VI=new z({expression:le,id:P}),NI=new z({isActive:new $});function bC(t,e){if(LI(e.options.id),!MI(t))throw A;let r=N(t),{dispatch:a}=t;de(t,VI,e.options,"buildTab");let n=Pe(t,NI,e.initialState,"buildTab"),{id:o,expression:i}=e.options;return a(Gn({id:o,expression:i})),n.isActive&&a(Pt(o)),{...r,select(){a(Pt(o))},get state(){var c;return{isActive:(c=t.state.tabSet[o])==null?void 0:c.isActive}}}}function MI(t){return t.addReducers({configuration:j,tabSet:Vo}),!0}function LI(t){let e=Yn().analytics.originLevel2;if(t===e)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${e}". Please specify a different value.`)}function RC(t,e){let{dispatch:r}=t,a=bC(t,e),n=()=>r(R({legacy:Qr(),next:{actionCause:T.interfaceChange,getEventExtraPayload:o=>new L(()=>o).getInterfaceChangeMetadata()}}));return{...a,get state(){return a.state},select(){a.select(),n()}}}var AC=t=>({build:e=>RC(e,t)});function PC(t){if(!QI(t))throw A;let e=N(t),r=()=>t.state;return{...e,sort(a){return Qn(a,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(o=>o.facetId)}}}}function QI(t){return t.addReducers({search:W,facetOptions:Oe}),!0}function wC(t){return PC(t)}var EC=()=>({build:t=>wC(t)});var BI={categoryFacetId:G,categoryFacetPath:new H({required:!0,each:P})},jI=(t,{categoryFacetId:e,categoryFacetPath:r})=>{let a=t.categoryFacetSet[e],n=a==null?void 0:a.request.field,o=`${n}_${e}`;return{categoryFacetId:e,categoryFacetPath:r,categoryFacetField:n,categoryFacetTitle:o}},Wu=t=>w("analytics/categoryFacet/breadcrumb",(e,r)=>(y(t,BI),e.makeBreadcrumbFacet(jI(r,t))));var Hu=()=>w("analytics/facet/deselectAllBreadcrumbs",t=>t.makeBreadcrumbResetAll());var zu=(t,{facetId:e,selection:r})=>{let n=(t.dateFacetSet[e]||t.numericFacetSet[e]).request.field,o=`${n}_${e}`;return{facetId:e,facetField:n,facetTitle:o,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var Bi=t=>w("analytics/dateFacet/breadcrumb",(e,r)=>{y(t,Ba(t.selection));let a=zu(r,t);return e.makeBreadcrumbFacet(a)});var ji=t=>w("analytics/numericFacet/breadcrumb",(e,r)=>{y(t,Ba(t.selection));let a=zu(r,t);return e.makeBreadcrumbFacet(a)});var Gu=t=>Object.keys(t.facetSet).map(e=>{let r=t.facetValuesSelector(t.engine.state,e).map(a=>({value:a,deselect:()=>{a.state==="selected"?t.executeToggleSelect({facetId:e,selection:a}):a.state==="excluded"&&t.executeToggleExclude({facetId:e,selection:a})}}));return{facetId:e,field:t.facetSet[e].request.field,values:r}}).filter(e=>e.values.length);function IC(t){let e=N(t),{dispatch:r}=t;return{...e,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(Ce())},deselectBreadcrumb(a){a.deselect()}}}function kC(t){if(!UI(t))throw A;let e=IC(t),{dispatch:r}=t,a=()=>t.state,n=()=>{let v={engine:t,facetSet:a().facetSet,executeToggleSelect:({facetId:C,selection:F})=>{r(ar({facetId:C,selection:F})),r(Ma({facetId:C,freezeCurrentValues:!1})),r(R({legacy:po({facetId:C,facetValue:F.value}),next:{actionCause:T.breadcrumbFacet,getEventExtraPayload:D=>new L(()=>D).getFacetMetadata(C,F.value)}}))},executeToggleExclude:({facetId:C,selection:F})=>{r(ta({facetId:C,selection:F})),r(Ma({facetId:C,freezeCurrentValues:!1})),r(R({legacy:po({facetId:C,facetValue:F.value}),next:{actionCause:T.breadcrumbFacet,getEventExtraPayload:D=>new L(()=>D).getFacetMetadata(C,F.value)}}))},facetValuesSelector:Pm};return Gu(v)},o=()=>{let v={engine:t,facetSet:a().numericFacetSet,executeToggleSelect:C=>{r(sr(C)),r(R({legacy:ji(C),next:{actionCause:T.breadcrumbFacet,getEventExtraPayload:F=>new L(()=>F).getRangeFacetBreadcrumbMetadata(C.facetId,C.selection)}}))},executeToggleExclude:C=>{r(aa(C)),r(R({legacy:ji(C),next:{actionCause:T.breadcrumbFacet,getEventExtraPayload:F=>new L(()=>F).getRangeFacetBreadcrumbMetadata(C.facetId,C.selection)}}))},facetValuesSelector:fy};return Gu(v)},i=()=>{let v={engine:t,facetSet:a().dateFacetSet,executeToggleSelect:C=>{r(or(C)),r(R({legacy:Bi(C),next:{actionCause:T.breadcrumbFacet,getEventExtraPayload:F=>new L(()=>F).getRangeFacetBreadcrumbMetadata(C.facetId,C.selection)}}))},executeToggleExclude:C=>{r(ra(C)),r(R({legacy:Bi(C),next:{actionCause:T.breadcrumbFacet,getEventExtraPayload:F=>new L(()=>F).getRangeFacetBreadcrumbMetadata(C.facetId,C.selection)}}))},facetValuesSelector:xy};return Gu(v)},s=()=>Object.keys(a().categoryFacetSet).map(c).filter(v=>v.path.length),c=v=>{let C=Em(a(),v);return{facetId:v,field:a().categoryFacetSet[v].request.field,path:C,deselect:()=>{r(Gt(v)),r(R({legacy:Wu({categoryFacetPath:C.map(F=>F.value),categoryFacetId:v}),next:{actionCause:T.breadcrumbFacet,getEventExtraPayload:F=>new L(()=>F).getCategoryFacetBreadcrumbMetadata(v,C.map(D=>D.value))}}))}}},u=()=>{var C;let v=(C=a().staticFilterSet)!=null?C:{};return Object.values(v).map(l)},l=v=>{let{id:C,values:F}=v,D=F.filter(Q=>Q.state!=="idle").map(Q=>d(C,Q));return{id:C,values:D}},d=(v,C)=>({value:C,deselect:()=>{let{caption:F,expression:D}=C,Q=To({staticFilterId:v,staticFilterValue:{caption:F,expression:D}});C.state==="selected"?r(Er({id:v,value:C})):C.state==="excluded"&&r(Ir({id:v,value:C})),r(R({legacy:Q}))}}),f=()=>{var C,F;let v=(F=(C=a().automaticFacetSet)==null?void 0:C.set)!=null?F:{};return Object.values(v).map(D=>p(D.response))},p=v=>{let{field:C,label:F}=v,D=v.values.filter(Q=>Q.state==="selected").map(Q=>m(C,Q));return{facetId:C,field:C,label:F,values:D}},m=(v,C)=>({value:C,deselect:()=>{r(ia({field:v,selection:C})),r(R({legacy:po({facetId:v,facetValue:C.value}),next:{actionCause:T.breadcrumbFacet,getEventExtraPayload:F=>new L(()=>F).getFacetMetadata(v,C.value)}}))}});function S(){return!![...n(),...o(),...i(),...s(),...u(),...f()].length}return{...e,get state(){return{facetBreadcrumbs:n(),categoryFacetBreadcrumbs:s(),numericFacetBreadcrumbs:o(),dateFacetBreadcrumbs:i(),staticFilterBreadcrumbs:u(),automaticFacetBreadcrumbs:f(),hasBreadcrumbs:S()}},deselectAll:()=>{e.deselectAll(),r(R({legacy:Hu(),next:{actionCause:T.breadcrumbResetAll,getEventExtraPayload:v=>new L(()=>v).getBaseMetadata()}}))}}}function UI(t){return t.addReducers({configuration:j,search:W,facetSet:ft,numericFacetSet:We,dateFacetSet:mt,categoryFacetSet:pt}),!0}var OC=()=>({build:t=>kC(t)});function qC(t){return t.type==="redirect"}var Pp=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(qC);return e.length?e[0].content:null}};var No=h("standaloneSearchBox/register",t=>y(t,{id:P,redirectionUrl:P})),Mo=h("standaloneSearchBox/reset",t=>y(t,{id:P})),Lo=h("standaloneSearchBox/updateAnalyticsToSearchFromLink",t=>y(t,{id:P})),Qo=h("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),da=J("standaloneSearchBox/fetchRedirect",async(t,{dispatch:e,getState:r,rejectWithValue:a,extra:{apiClient:n,validatePayload:o}})=>{o(t,{id:new b({emptyAllowed:!1})});let i=await $I(r()),s=await n.plan(i);if(ye(s))return a(s.error);let{redirectionUrl:c}=new Pp(s.success);return c&&e(_I(c)),c||""}),_I=t=>w("analytics/standaloneSearchBox/redirect",e=>e.makeTriggerRedirect({redirectedTo:t})),$I=async t=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,q:t.query.q,...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await at(t.configuration.analytics)},...t.configuration.analytics.enabled&&await Nn(t.configuration.analytics),...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});function TC(){return{}}var Yu=k(TC(),t=>t.addCase(No,(e,r)=>{let{id:a,redirectionUrl:n}=r.payload;a in e||(e[a]=DC(n))}).addCase(Mo,(e,r)=>{let{id:a}=r.payload,n=e[a];if(n){e[a]=DC(n.defaultRedirectionUrl);return}}).addCase(da.pending,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.isLoading=!0)}).addCase(da.fulfilled,(e,r)=>{let a=r.payload,n=e[r.meta.arg.id];!n||(n.redirectTo=a||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(da.rejected,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.isLoading=!1)}).addCase(Lo,(e,r)=>{let a=e[r.payload.id];!a||(a.analytics.cause="searchFromLink")}).addCase(Qo,(e,r)=>{let a=e[r.payload.id];!a||(a.analytics.cause="omniboxFromLink",a.analytics.metadata=r.payload.metadata)}));function DC(t){return{defaultRedirectionUrl:t,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var VC=new z({...Ap,redirectionUrl:new b({required:!0,emptyAllowed:!1})});function NC(t,e){if(!WI(t))throw A;let{dispatch:r}=t,a=()=>t.state,n=e.options.id||Za("standalone_search_box"),o={id:n,highlightOptions:{...e.options.highlightOptions},...Du,...e.options};de(t,VC,o,"buildStandaloneSearchBox");let i=Vu(t,{options:o});return r(No({id:n,redirectionUrl:o.redirectionUrl})),{...i,updateText(s){i.updateText(s),r(Lo({id:n}))},selectSuggestion(s){let c=Fp(a(),{id:n,suggestion:s});r(ur({id:n,expression:s})),r(Qo({id:n,metadata:c})),this.submit()},afterRedirection(){r(Mo({id:n}))},submit(){r(Qe({q:this.state.value,enableQuerySyntax:o.enableQuerySyntax})),r(da({id:n}))},get state(){let c=a().standaloneSearchBoxSet[n];return{...i.state,isLoading:c.isLoading,redirectTo:c.redirectTo,analytics:c.analytics}}}}function WI(t){return t.addReducers({standaloneSearchBoxSet:Yu,configuration:j,query:He,querySuggest:wo}),!0}var MC=t=>({build:e=>NC(e,t)});var Ku=k(an(),t=>{t.addCase(R.fulfilled,(e,r)=>{var n;e.set={};let a=(n=r.payload.response.generateAutomaticFacets)==null?void 0:n.facets;a==null||a.forEach(o=>{e.set[o.field]={response:o}})}).addCase(wu,(e,r)=>{r.payload.desiredCount&&(e.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(e.numberOfValues=r.payload.numberOfValues)}).addCase(ia,(e,r)=>{var c;let{field:a,selection:n}=r.payload,o=(c=e.set[a])==null?void 0:c.response;if(!o)return;let i=o.values.find(u=>u.value===n.value);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Eu,(e,r)=>{var o;let a=r.payload,n=(o=e.set[a])==null?void 0:o.response;if(!!n)for(let i of n.values)i.state="idle"}).addCase(se,(e,r)=>{var o,i,s;let a=(o=r.payload.af)!=null?o:{},n=Object.keys(e.set);for(let c in a)if(!e.set[c]){let u=HI(c),l=a[c].map(d=>zI(d));u.values.push(...l),e.set[c]={response:u}}for(let c of n)if(!(c in a)){let u=(i=e.set[c])==null?void 0:i.response;for(let l of u.values)l.state="idle"}for(let c in a){let u=(s=e.set[c])==null?void 0:s.response;if(u){let l=u.values;for(let d of l)a[c].includes(d.value)?d.state==="idle"&&(d.state="selected"):d.state="idle"}}}).addCase(ie.fulfilled,(e,r)=>{if(!!r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(Ce,e=>{Object.values(e.set).forEach(({response:r})=>{r.values.forEach(a=>a.state="idle")})})});function HI(t){return{field:t,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function zI(t){return{value:t,state:"selected",numberOfResults:0}}var pa=()=>new b({required:!1,emptyAllowed:!0}),Ju=h("advancedSearchQueries/update",t=>y(t,{aq:pa(),cq:pa(),lq:pa(),dq:pa()})),Xu=h("advancedSearchQueries/register",t=>y(t,{aq:pa(),cq:pa(),lq:pa(),dq:pa()}));var Zu=k(At(),t=>{t.addCase(Ju,(e,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;Ae(a)||(e.aq=a,e.aqWasSet=!0),Ae(n)||(e.cq=n,e.cqWasSet=!0),Ae(o)||(e.lq=o,e.lqWasSet=!0),Ae(i)||(e.dq=i,e.dqWasSet=!0)}).addCase(Xu,(e,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;Ae(a)||(e.defaultFilters.aq=a,e.aqWasSet||(e.aq=a)),Ae(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),Ae(o)||(e.defaultFilters.lq=o,e.lqWasSet||(e.lq=o)),Ae(i)||(e.defaultFilters.dq=i,e.dqWasSet||(e.dq=i))}).addCase(ie.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.advancedSearchQueries)!=null?n:e}).addCase(se,(e,r)=>{let{aq:a,cq:n}=r.payload;Ae(a)||(e.aq=a,e.aqWasSet=!0),Ae(n)||(e.cq=n,e.cqWasSet=!0)})});function LC(t,e){return t.q!==e.q?ua():t.sortCriteria!==e.sortCriteria?Eo():t.firstResult!==e.firstResult?Fo():t.numberOfResults!==e.numberOfResults?vo():Bo(t.f,e.f)?Ui(t.f,e.f):Bo(t.fExcluded,e.fExcluded)?Ui(t.fExcluded,e.fExcluded,!0):Bo(t.cf,e.cf)?Ui(t.cf,e.cf):Bo(t.af,e.af)?Ui(t.af,e.af):Bo(t.nf,e.nf)?BC(t.nf,e.nf):Bo(t.df,e.df)?BC(t.df,e.df):Qr()}function Bo(t={},e={}){return JSON.stringify(t)!==JSON.stringify(e)}function QC(t){let e={};return Object.keys(t).forEach(r=>e[r]=t[r].map(a=>`${a.start}..${a.end}`)),e}function Ui(t={},e={},r=!1){let a=Object.keys(t),n=Object.keys(e),o=a.filter(f=>!n.includes(f));if(o.length){let f=o[0];return t[f].length>1?ke(f):Ze({facetId:f,facetValue:t[f][0]})}let i=n.filter(f=>!a.includes(f));if(i.length){let f=i[0];return r?Et({facetId:f,facetValue:e[f][0]}):be({facetId:f,facetValue:e[f][0]})}let s=n.find(f=>e[f].filter(p=>t[f].includes(p)));if(!s)return Qr();let c=t[s],u=e[s],l=u.filter(f=>!c.includes(f));if(l.length)return r?Et({facetId:s,facetValue:l[0]}):be({facetId:s,facetValue:l[0]});let d=c.filter(f=>!u.includes(f));return d.length?Ze({facetId:s,facetValue:d[0]}):Qr()}function BC(t={},e={}){return Ui(QC(t),QC(e))}function jC(t){var e,r,a,n,o,i;return{q:Fe().q,enableQuerySyntax:Fe().enableQuerySyntax,aq:(r=(e=t.advancedSearchQueries)==null?void 0:e.defaultFilters.aq)!=null?r:At().defaultFilters.aq,cq:(n=(a=t.advancedSearchQueries)==null?void 0:a.defaultFilters.cq)!=null?n:At().defaultFilters.cq,firstResult:dt().firstResult,numberOfResults:(i=(o=t.pagination)==null?void 0:o.defaultNumberOfResults)!=null?i:dt().defaultNumberOfResults,sortCriteria:rt(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:Ur(),sf:{},tab:"",af:{}}}var GI=new z({parameters:new E({options:{required:!0},values:Us})});function UC(t,e){let{dispatch:r}=t,a=N(t);return Pe(t,GI,e.initialState,"buildSearchParameterManager"),r(se(e.initialState.parameters)),{...a,synchronize(n){let o=el(t,n);r(se(o))},get state(){return{parameters:wp(t)}}}}function el(t,e){return{...jC(t.state),...e}}function _C(t,e){return JI(t,e)}function wp(t){let e=t.state;return{...YI(e),...KI(e),...XI(e),...$C(e,WC,"f"),...$C(e,ZI,"fExcluded"),...ek(e),...tk(e),...rk(e),...ak(e)}}function YI(t){if(t.query===void 0)return{};let e=t.query.q;return e!==Fe().q?{q:e}:{}}function KI(t){var r;let e=Object.values((r=t.tabSet)!=null?r:{}).find(a=>a.isActive);return e?{tab:e.id}:{}}function JI(t,e){let r=t.state.tabSet,a=e.tab;if(!r||!Object.entries(r).length||!a)return!0;let n=a in r;return n||t.logger.warn(`The tab search parameter "${a}" is invalid. Ignoring change.`),n}function XI(t){if(t.sortCriteria===void 0)return{};let e=t.sortCriteria;return e!==rt()?{sortCriteria:e}:{}}function $C(t,e,r){if(t.facetSet===void 0)return{};let a=Object.entries(t.facetSet).filter(([n])=>{var o,i,s;return(s=(i=(o=t.facetOptions)==null?void 0:o.facets[n])==null?void 0:i.enabled)!=null?s:!0}).map(([n,{request:o}])=>{let i=e(o.currentValues);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(a).length?{[r]:a}:{}}function WC(t){return t.filter(e=>e.state==="selected").map(e=>e.value)}function ZI(t){return t.filter(e=>e.state==="excluded").map(e=>e.value)}function ek(t){if(t.categoryFacetSet===void 0)return{};let e=Object.entries(t.categoryFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=t.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,a])=>{let o=Ke(a.request.currentValues).map(i=>i.value);return o.length?{[r]:o}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(e).length?{cf:e}:{}}function tk(t){if(t.numericFacetSet===void 0)return{};let e=Object.entries(t.numericFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=t.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=HC(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(e).length?{nf:e}:{}}function rk(t){if(t.dateFacetSet===void 0)return{};let e=Object.entries(t.dateFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=t.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=HC(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(e).length?{df:e}:{}}function HC(t){return t.filter(e=>e.state==="selected")}function ak(t){var a;let e=(a=t.automaticFacetSet)==null?void 0:a.set;if(e===void 0)return{};let r=Object.entries(e).map(([n,{response:o}])=>{let i=WC(o.values);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(r).length?{af:r}:{}}function tl(t,e){let{dispatch:r}=t,a=UC(t,e);return{...a,synchronize(n){let o=zC(t),i=el(t,o),s=el(t,n);Ni(i,s)||!_C(t,s)||(a.synchronize(n),r(R({legacy:LC(i,s)})))},get state(){return{parameters:zC(t)}}}}function zC(t){let e=t.state;return{...wp(t),...nk(e),...ok(e),...ik(e),...sk(e),...ck(e),...dk(e),...uk(e)}}function nk(t){if(t.query===void 0)return{};let e=t.query.enableQuerySyntax;return e!==void 0&&e!==Fe().enableQuerySyntax?{enableQuerySyntax:e}:{}}function ok(t){if(t.advancedSearchQueries===void 0)return{};let{aq:e,defaultFilters:r}=t.advancedSearchQueries;return e!==r.aq?{aq:e}:{}}function ik(t){if(t.advancedSearchQueries===void 0)return{};let{cq:e,defaultFilters:r}=t.advancedSearchQueries;return e!==r.cq?{cq:e}:{}}function sk(t){if(t.pagination===void 0)return{};let e=t.pagination.firstResult;return e!==dt().firstResult?{firstResult:e}:{}}function ck(t){if(t.pagination===void 0)return{};let{numberOfResults:e,defaultNumberOfResults:r}=t.pagination;return e!==r?{numberOfResults:e}:{}}function uk(t){if(t.staticFilterSet===void 0)return{};let e=Object.entries(t.staticFilterSet).map(([r,a])=>{let n=lk(a.values);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(e).length?{sf:e}:{}}function lk(t){return t.filter(e=>e.state==="selected").map(e=>e.caption)}function dk(t){if(t.debug===void 0)return{};let e=t.debug;return e!==Ur()?{debug:e}:{}}var GC=()=>({buildWithProps:(t,e)=>{if(!pk(t))throw A;return tl(t,{initialState:e.initialState})}});function pk(t){return t.addReducers({advancedSearchQueries:Zu,automaticFacetSet:Ku,categoryFacetSet:pt,configuration:Kn,dateFacetSet:mt,debug:_r,facetOptions:Oe,facetSet:ft,numericFacetSet:We,pagination:gt,query:He,sortCriteria:Oo,staticFilterSet:Do,tabSet:Vo}),!0}var rl="&",_i="=",YC="..",Ep="...";function $i(){return{serialize:fk,deserialize:Ck}}function fk(t){return Object.entries(t).map(mk).filter(e=>e).join(rl)}function mk(t){let[e,r]=t;return XC(e)?Ek(e)?gk(r)?Sk(e,r):"":e==="nf"||e==="df"?hk(r)?yk(e,r):"":`${e}${_i}${encodeURIComponent(r)}`:""}function gk(t){return Ip(t)?KC(t,r=>typeof r=="string"):!1}function hk(t){return Ip(t)?KC(t,r=>Ip(r)&&"start"in r&&"end"in r):!1}function Ip(t){return!!(t&&typeof t=="object")}function KC(t,e){return Object.entries(t).filter(a=>{let n=a[1];return!Array.isArray(n)||!n.every(e)}).length===0}function Sk(t,e){return Object.entries(e).map(([r,a])=>`${t}-${r}${_i}${a.map(n=>encodeURIComponent(n)).join(",")}`).join(rl)}function yk(t,e){return Object.entries(e).map(([r,a])=>{let n=a.map(({start:o,end:i,endInclusive:s})=>`${o}${s?Ep:YC}${i}`).join(",");return`${t}-${r}${_i}${n}`}).join(rl)}function Ck(t){return t.split(rl).map(a=>xk(a)).map(vk).filter(Ak).map(Pk).reduce((a,n)=>{let[o,i]=n;if(ZC(o)){let s={...a[o],...i};return{...a,[o]:s}}return{...a,[o]:i}},{})}function xk(t){let[e,...r]=t.split(_i),a=r.join(_i);return[e,a]}function vk(t){let[e,r]=t,n=/^(f|fExcluded|cf|nf|df|sf|af)-(.+)$/.exec(e);if(!n)return t;let o=n[1],i=n[2],s=r.split(","),c=Fk(o,s),u={[i]:c};return[o,JSON.stringify(u)]}function Fk(t,e){return t==="nf"?bk(e):t==="df"?Rk(e):e}function bk(t){return t.map(e=>{let{startAsString:r,endAsString:a,isEndInclusive:n}=ex(e);return{start:parseFloat(r),end:parseFloat(a),endInclusive:n}}).filter(({start:e,end:r})=>Number.isFinite(e)&&Number.isFinite(r)).map(({start:e,end:r,endInclusive:a})=>ja({start:e,end:r,state:"selected",endInclusive:a}))}function JC(t){try{return jg(t)?(zs(t,Mn),!0):$t(t)?(Hr(t),!0):!1}catch(e){return!1}}function Rk(t){return t.map(e=>{let{isEndInclusive:r,startAsString:a,endAsString:n}=ex(e);return{start:a,end:n,endInclusive:r}}).filter(({start:e,end:r})=>JC(e)&&JC(r)).map(({start:e,end:r,endInclusive:a})=>Rr({start:e,end:r,state:"selected",endInclusive:a}))}function Ak(t){let e=XC(t[0]),r=t.length===2;return e&&r}function XC(t){return t in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,fExcluded:!0,cf:!0,nf:!0,df:!0,debug:!0,sf:!0,tab:!0,af:!0}}function Pk(t){let[e,r]=t;return e==="enableQuerySyntax"?[e,r==="true"]:e==="debug"?[e,r==="true"]:e==="firstResult"?[e,parseInt(r)]:e==="numberOfResults"?[e,parseInt(r)]:ZC(e)?[e,wk(r)]:[e,decodeURIComponent(r)]}function wk(t){let e=JSON.parse(t),r={};return Object.entries(e).forEach(a=>{let[n,o]=a;r[n]=o.map(i=>pn(i)?decodeURIComponent(i):i)}),r}function ZC(t){return["f","fExcluded","cf","nf","df","sf","af"].includes(t)}function Ek(t){return["f","af","cf","sf","fExcluded"].includes(t)}function ex(t){let e=t.indexOf(Ep)!==-1,[r,a]=t.split(e?Ep:YC);return{isEndInclusive:e,startAsString:r,endAsString:a}}var Ik=new z({fragment:new b});function tx(t,e){let r;function a(){r=t.state.search.requestId}function n(){return r!==t.state.search.requestId}if(!Ok(t))throw A;Pe(t,Ik,e.initialState,"buildUrlManager");let o=N(t),i=e.initialState.fragment;a();let s=tl(t,{initialState:{parameters:al(i)}});return{...o,subscribe(c){let u=()=>{let l=this.state.fragment;!kk(i,l)&&n()&&(i=l,c()),a()};return u(),t.subscribe(u)},get state(){return{fragment:$i().serialize(s.state.parameters)}},synchronize(c){i=c;let u=al(c);s.synchronize(u)}}}function kk(t,e){if(t===e)return!0;let r=al(t),a=al(e);return Ni(r,a)}function al(t){return $i().deserialize(t)}function Ok(t){return t.addReducers({configuration:j}),!0}var rx=()=>({buildWithProps:(t,e)=>tx(t,{initialState:e.initialState})});function ax(t){return bo(t)}var nx=()=>({build:t=>ax(t)});async function nl(t,e){var s;let{search:r,accessToken:a,organizationId:n,analytics:o}=t.configuration,i=((s=t.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:a,organizationId:n,enableNavigation:!1,...o.enabled&&{visitorId:await at(t.configuration.analytics)},q:i,...e,requestedOutputSize:e.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var Wa=J("resultPreview/fetchResultContent",async(t,{extra:e,getState:r,rejectWithValue:a})=>{let n=r(),o=await nl(n,t),i=await e.apiClient.html(o);return ye(i)?a(i.error):{content:i.success,uniqueId:t.uniqueId}}),jo=h("resultPreview/next"),Uo=h("resultPreview/previous"),_o=h("resultPreview/prepare",t=>y(t,{results:new H({required:!0})})),ox=2048,$o=J("resultPreview/updateContentURL",async(t,{getState:e,extra:r})=>{let a=e(),n=Sg(await t.buildResultPreviewRequest(a,{uniqueId:t.uniqueId,requestedOutputSize:t.requestedOutputSize}),t.path);return(n==null?void 0:n.length)>ox&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${ox} characters.`),{contentURL:n}});var ix=t=>w("analytics/resultPreview/open",(e,r)=>{ot(t);let a=Le(t,r),n=_e(t);return e.makeDocumentQuickview(a,n)});function kp(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var Op=t=>{let{content:e,isLoading:r,uniqueId:a,contentURL:n}=kp();t.content=e,t.isLoading=r,t.uniqueId=a,t.contentURL=n},qp=t=>t.filter(e=>e.hasHtmlVersion).map(e=>e.uniqueId),ol=k(kp(),t=>{t.addCase(Wa.pending,e=>{e.isLoading=!0}).addCase(Wa.fulfilled,(e,r)=>{let{content:a,uniqueId:n}=r.payload;e.position=e.resultsWithPreview.indexOf(n),e.content=a,e.uniqueId=n,e.isLoading=!1}).addCase(R.fulfilled,(e,r)=>{Op(e),e.resultsWithPreview=qp(r.payload.response.results)}).addCase(Gr.fulfilled,(e,r)=>{Op(e),e.resultsWithPreview=e.resultsWithPreview.concat(qp(r.payload.response.results))}).addCase(Wt.fulfilled,Op).addCase(_o,(e,r)=>{e.resultsWithPreview=qp(r.payload.results)}).addCase(jo,e=>{if(e.isLoading)return;let r=e.position+1;r>e.resultsWithPreview.length-1&&(r=0),e.position=r}).addCase(Uo,e=>{if(e.isLoading)return;let r=e.position-1;r<0&&(r=e.resultsWithPreview.length-1),e.position=r}).addCase($o.fulfilled,(e,r)=>{e.contentURL=r.payload.contentURL})});function sx(t,e,r,a,n){if(!qk(t))throw A;let{dispatch:o}=t,i=()=>t.state,s=N(t),{result:c,maximumPreviewSize:u}=e.options,l=()=>{let{resultsWithPreview:f,position:p}=i().resultPreview;return f[p]},d=f=>{o($o({uniqueId:f,requestedOutputSize:u,buildResultPreviewRequest:r,path:a})),e.options.onlyContentURL||o(Wa({uniqueId:f,requestedOutputSize:u})),n&&n()};return{...s,fetchResultContent(){d(c.uniqueId)},next(){o(jo()),d(l())},previous(){o(Uo()),d(l())},get state(){let f=i(),p=c.hasHtmlVersion,m=f.resultPreview,S=c.uniqueId===m.uniqueId?m.content:"",v=m.isLoading,C=m.contentURL,F=l();return{content:S,resultHasPreview:p,isLoading:v,contentURL:C,currentResultUniqueId:F}}}}function qk(t){return t.addReducers({configuration:j,resultPreview:ol}),!0}function cx(t,e){if(!Tk(t))throw A;let{dispatch:r}=t,a=()=>t.state,n=()=>a().search.results,s=sx(t,e,nl,"/html",()=>{t.dispatch(ix(e.options.result))});return r(_o({results:n()})),{...s,get state(){return{...s.state,currentResult:n().findIndex(c=>c.uniqueId===s.state.currentResultUniqueId)+1,totalResults:n().length}}}}function Tk(t){return t.addReducers({search:W}),!0}var ux=t=>({build:e=>cx(e,t)});var Dk=t=>w("analytics/folding/showMore",(e,r)=>(ot(t),e.makeShowMoreFoldedResults(Le(t,r),_e(t)))),Vk=()=>w("analytics/folding/showLess",t=>t.makeShowLessFoldedResults()),lx={logShowMoreFoldedResults:Dk,logShowLessFoldedResults:Vk};function Nk(t,e){return t.raw[e.collection]}function Tp(t,e){return t.raw[e.parent]}function Wi(t,e){let r=t.raw[e.child];return os(r)?r[0]:r}function Mk(t,e){return(t||e)!==void 0&&t===e}function dx(t,e,r,a=[]){let n=Wi(t,r);return n?a.indexOf(n)!==-1?[]:e.filter(o=>{let i=Wi(o,r)===Wi(t,r);return Tp(o,r)===n&&!i}).map(o=>({result:o,children:dx(o,e,r,[...a,n])})):[]}function Lk(t,e){return t.find(r=>{let a=Tp(r,e)===void 0,n=Mk(Tp(r,e),Wi(r,e));return a||n})}function px(t){return t.parentResult?px(t.parentResult):t}function Qk(t,e,r){var o;let a=Ns(t),n=(o=r!=null?r:Lk(a,e))!=null?o:px(t);return{result:n,children:dx(n,a,e),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function il(t,e,r){let a={};return t.forEach(n=>{let o=Nk(n,e);!o||!Wi(n,e)&&!n.parentResult||(a[o]=Qk(n,e,r))}),a}function fx(t,e){if(!t.collections[e])throw new Error(`Missing collection ${e} from ${Object.keys(t.collections)}: Folding most probably in an invalid state...`);return t.collections[e]}var sl=k(vc(),t=>t.addCase(R.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?il(r.response.results,e.fields):{}}).addCase(Wt.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?il(r.response.results,e.fields):{}}).addCase(Gr.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?{...e.collections,...il(r.response.results,e.fields)}:{}}).addCase(Kr,(e,{payload:r})=>{var a,n,o,i;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:(a=r.collectionField)!=null?a:e.fields.collection,parent:(n=r.parentField)!=null?n:e.fields.parent,child:(o=r.childField)!=null?o:e.fields.child},filterFieldRange:(i=r.numberOfFoldedResults)!=null?i:e.filterFieldRange}}).addCase(Jr.pending,(e,{meta:r})=>{let a=r.arg;fx(e,a).isLoadingMoreResults=!0}).addCase(Jr.rejected,(e,{meta:r})=>{let a=r.arg;fx(e,a).isLoadingMoreResults=!1}).addCase(Jr.fulfilled,(e,{payload:{collectionId:r,results:a,rootResult:n}})=>{let o=il(a,e.fields,n);if(!o||!o[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(a)}. Folding most probably in an invalid state... `);e.collections[r]=o[r],e.collections[r].moreResultsAvailable=!1}));var Bk=new z(sp);function mx(t,e,r){var s;if(!jk(t))throw A;let a=qu(t,e),{dispatch:n}=t,o=()=>t.state,i=((s=e.options)==null?void 0:s.folding)?de(t,Bk,e.options.folding,"buildFoldedResultList"):{};return n(Kr({...i})),{...a,loadCollection:c=>{n(e.loadCollectionActionCreator(c.result.raw[t.state.folding.fields.collection])),n(r.logShowMoreFoldedResults(c.result))},logShowMoreFoldedResults:c=>{n(r.logShowMoreFoldedResults(c))},logShowLessFoldedResults:()=>{n(r.logShowLessFoldedResults())},findResultById(c){return Dp(this.state.results,u=>u.result.uniqueId===c.result.uniqueId)},findResultByCollection(c){return Dp(this.state.results,u=>u.result.raw.foldingcollection===c.result.raw.foldingcollection)},get state(){let c=o();return{...a.state,results:a.state.results.map(u=>{let l=u.raw[c.folding.fields.collection];return!l||!c.folding.collections[l]?{result:u,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:c.folding.collections[l]})}}}}function jk(t){return t.addReducers({search:W,configuration:Kn,folding:sl,query:He}),!0}function Dp(t,e){for(let r=0;r<t.length;r++){let a=t[r];if(e(a))return a;if(a.children.length){let n=Dp(a.children,e);if(n)return n}}return null}function gx(t,e={}){let r=mx(t,{...e,loadCollectionActionCreator:Jr,fetchMoreResultsActionCreator:Gr},lx);return{...r,get state(){return r.state}}}var hx=t=>({build:e=>gx(e,t)});var Sx=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var fa=k(Sx(),t=>t.addCase(R.pending,e=>{e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore}}).addCase(R.fulfilled,(e,r)=>{var s;let a=[],n=[],o=[],i=[];r.payload.response.triggers.forEach(c=>{switch(c.type){case"redirect":a.push(c.content);break;case"query":n.push(c.content);break;case"execute":o.push({functionName:c.content.name,params:c.content.params});break;case"notify":i.push(c.content);break}}),e.redirectTo=(s=a[0])!=null?s:"",e.query=e.queryModification.newQuery,e.executions=o,e.notifications=i}).addCase(_n,(e,r)=>{e.queryModification={...r.payload,queryToIgnore:""}}).addCase(zr,(e,r)=>{e.queryModification.queryToIgnore=r.payload}));function yx(t){if(!Uk(t))throw A;let e=N(t),{dispatch:r}=t,a=()=>t.state,n=a().triggers.redirectTo;return{...e,subscribe(o){let i=()=>{let s=n!==this.state.redirectTo;n=this.state.redirectTo,s&&this.state.redirectTo&&(o(),r(lc()))};return i(),t.subscribe(i)},get state(){return{redirectTo:a().triggers.redirectTo}}}}function Uk(t){return t.addReducers({triggers:fa}),!0}var Cx=()=>({build:t=>yx(t)});function xx(t){if(!_k(t))throw A;let e=N(t),{dispatch:r}=t,a=()=>t.state,n=()=>a().triggers.queryModification.newQuery,o=()=>a().triggers.queryModification.originalQuery;return{...e,get state(){return{newQuery:n(),originalQuery:o(),wasQueryModified:n()!==""}},undo(){r(zr(n())),r(Qe({q:o()})),r(R({legacy:cc({undoneQuery:n()}),next:{actionCause:T.undoTriggerQuery,getEventExtraPayload:()=>new L(a).getUndoTriggerQueryMetadata(n())}}))}}}function _k(t){return t.addReducers({triggers:fa,query:He}),!0}var vx=()=>({build:t=>xx(t)});function Fx(t){if(!$k(t))throw A;let e=N(t),{dispatch:r}=t,a=()=>t.state,n=a().triggers.executions;return{...e,subscribe(o){let i=()=>{let s=!Ua(this.state.executions,n,(c,u)=>c.functionName===u.functionName&&Ua(c.params,u.params));n=this.state.executions,s&&this.state.executions.length&&(o(),r(dc()))};return i(),t.subscribe(i)},get state(){return{executions:a().triggers.executions}}}}function $k(t){return t.addReducers({triggers:fa}),!0}var bx=()=>({build:t=>Fx(t)});function Rx(t){if(!Wk(t))throw A;let e=N(t),{dispatch:r}=t,a=()=>t.state,n=a().triggers.notifications;return{...e,subscribe(o){let i=()=>{let s=!Ua(n,this.state.notifications);n=this.state.notifications,s&&(o(),r(uc()))};return i(),t.subscribe(i)},get state(){return{notifications:a().triggers.notifications}}}}function Wk(t){return t.addReducers({triggers:fa}),!0}var Ax=()=>({build:t=>Rx(t)});var cl=()=>new E({values:{questionAnswerId:P},options:{required:!0}}),Vp=()=>new E({values:{linkText:le,linkURL:le},options:{required:!0}});function Wo(t){return y(t,cl())}function kr(t,e){var a,n;let r=e!=null?e:(n=(a=t.search)==null?void 0:a.questionAnswer)==null?void 0:n.documentId;return r&&t.search&&dh(t,r.contentIdKey,r.contentIdValue)}function Ha(t,e){var n,o,i,s,c;let r=(o=(n=t.questionAnswering)==null?void 0:n.relatedQuestions.findIndex(u=>u.questionAnswerId===e))!=null?o:-1;if(r===-1)return null;let a=(c=(s=(i=t.search)==null?void 0:i.questionAnswer)==null?void 0:s.relatedQuestions)==null?void 0:c[r];return a!=null?a:null}var Np=()=>w("analytics/smartSnippet/expand",t=>t.makeExpandSmartSnippet()),Mp=()=>w("analytics/smartSnippet/collapse",t=>t.makeCollapseSmartSnippet()),Lp=()=>w("analytics/smartSnippet/like",t=>t.makeLikeSmartSnippet()),Qp=()=>w("analytics/smartSnippet/dislike",t=>t.makeDislikeSmartSnippet());function Bp(){return w("analytics/smartSnippet/source/open",(t,e)=>{let r=kr(e);return t.makeOpenSmartSnippetSource(Le(r,e),_e(r))})}var Hi=t=>w("analytics/smartSnippet/source/open",(e,r)=>{y(t,Vp());let a=kr(r);return e.makeOpenSmartSnippetInlineLink(Le(a,r),{..._e(a),...t})}),jp=()=>w("analytics/smartSnippet/feedbackModal/open",t=>t.makeOpenSmartSnippetFeedbackModal()),Up=()=>w("analytics/smartSnippet/feedbackModal/close",t=>t.makeCloseSmartSnippetFeedbackModal()),_p=t=>w("analytics/smartSnippet/sendFeedback",e=>e.makeSmartSnippetFeedbackReason(t)),$p=t=>w("analytics/smartSnippet/sendFeedback",e=>e.makeSmartSnippetFeedbackReason("other",t)),Wp=t=>w("analytics/smartSnippetSuggestion/expand",(e,r)=>{Wo(t);let a=Ha(r,t.questionAnswerId);return a?e.makeExpandSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),Hp=t=>w("analytics/smartSnippetSuggestion/expand",(e,r)=>{Wo(t);let a=Ha(r,t.questionAnswerId);return a?e.makeCollapseSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),zi=t=>w("analytics/smartSnippet/source/open",(e,r)=>{y(t,cl());let a=Ha(r,t.questionAnswerId);if(!a)return null;let n=kr(r,a.documentId);return n?e.makeOpenSmartSnippetSuggestionSource(Le(n,r),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),ul=(t,e)=>w("analytics/smartSnippet/source/open",(r,a)=>{y(t,cl()),y(e,Vp());let n=Ha(a,t.questionAnswerId);if(!n)return null;let o=kr(a,n.documentId);return o?r.makeOpenSmartSnippetSuggestionInlineLink(Le(o,a),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId,linkText:e.linkText,linkURL:e.linkURL}):null}),ll={logExpandSmartSnippet:Np,logCollapseSmartSnippet:Mp,logLikeSmartSnippet:Lp,logDislikeSmartSnippet:Qp,logOpenSmartSnippetSource:Bp,logOpenSmartSnippetInlineLink:Hi,logOpenSmartSnippetFeedbackModal:jp,logCloseSmartSnippetFeedbackModal:Up,logSmartSnippetFeedback:_p,logSmartSnippetDetailedFeedback:$p,logExpandSmartSnippetSuggestion:Wp,logCollapseSmartSnippetSuggestion:Hp,logOpenSmartSnippetSuggestionSource:zi};var Ho=h("smartSnippet/expand"),zo=h("smartSnippet/collapse"),Go=h("smartSnippet/like"),Yo=h("smartSnippet/dislike"),Ko=h("smartSnippet/feedbackModal/open"),ma=h("smartSnippet/feedbackModal/close"),Jo=h("smartSnippet/related/expand",t=>Wo(t)),Xo=h("smartSnippet/related/collapse",t=>Wo(t));var zp=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var Px=(t,e)=>t.findIndex(r=>r.questionAnswerId===e.questionAnswerId);function wx({question:t,answerSnippet:e,documentId:{contentIdKey:r,contentIdValue:a}}){return ss({question:t,answerSnippet:e,contentIdKey:r,contentIdValue:a})}function Hk(t,e){let r=wx(t);return e&&r===e.questionAnswerId?e:{contentIdKey:t.documentId.contentIdKey,contentIdValue:t.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var lr=k(zp(),t=>t.addCase(Ho,e=>{e.expanded=!0}).addCase(zo,e=>{e.expanded=!1}).addCase(Go,e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1}).addCase(Yo,e=>{e.liked=!1,e.disliked=!0}).addCase(Ko,e=>{e.feedbackModalOpen=!0}).addCase(ma,e=>{e.feedbackModalOpen=!1}).addCase(R.fulfilled,(e,r)=>{let a=r.payload.response.questionAnswer.relatedQuestions.map((o,i)=>Hk(o,e.relatedQuestions[i])),n=wx(r.payload.response.questionAnswer);return e.questionAnswerId===n?{...e,relatedQuestions:a}:{...zp(),relatedQuestions:a,questionAnswerId:n}}).addCase(Jo,(e,r)=>{let a=Px(e.relatedQuestions,r.payload);a!==-1&&(e.relatedQuestions[a].expanded=!0)}).addCase(Xo,(e,r)=>{let a=Px(e.relatedQuestions,r.payload);a!==-1&&(e.relatedQuestions[a].expanded=!1)}));var zk={results:new H({required:!0,each:new E({values:vn})}),maxLength:new I({required:!0,min:1,default:10})},Zo=h("recentResults/registerRecentResults",t=>y(t,zk)),ga=h("recentResults/pushRecentResult",t=>(ot(t),{payload:t})),ei=h("recentResults/clearRecentResults");function ti(t,e,r){if(!Gk(t))throw A;let a=1e3,n={selectionDelay:a,debounceWait:a,...e.options},o;return{select:hc(r,n.debounceWait,{isImmediate:!0}),beginDelayedSelect(){o=setTimeout(r,n.selectionDelay)},cancelPendingSelect(){o&&clearTimeout(o)}}}function Gk(t){return t.addReducers({configuration:j}),!0}function Ex(t,e,r){var c;if(!Yk(t))throw A;let a=N(t),n=()=>t.state,o=()=>kr(n()),i=null,s=ti(t,{options:{selectionDelay:(c=r==null?void 0:r.options)==null?void 0:c.selectionDelay}},()=>{let u=o();if(!u){i=null;return}let{searchResponseId:l}=n().search;i!==l&&(i=l,t.dispatch(e.logOpenSmartSnippetSource()),t.dispatch(ga(u)))});return{...a,get state(){let u=n();return{question:u.search.questionAnswer.question,answer:u.search.questionAnswer.answerSnippet,documentId:u.search.questionAnswer.documentId,expanded:u.questionAnswering.expanded,answerFound:u.search.questionAnswer.answerSnippet!=="",liked:u.questionAnswering.liked,disliked:u.questionAnswering.disliked,feedbackModalOpen:u.questionAnswering.feedbackModalOpen,source:o()}},expand(){t.dispatch(e.logExpandSmartSnippet()),t.dispatch(Ho())},collapse(){t.dispatch(e.logCollapseSmartSnippet()),t.dispatch(zo())},like(){t.dispatch(e.logLikeSmartSnippet()),t.dispatch(Go())},dislike(){t.dispatch(e.logDislikeSmartSnippet()),t.dispatch(Yo())},openFeedbackModal(){t.dispatch(e.logOpenSmartSnippetFeedbackModal()),t.dispatch(Ko())},closeFeedbackModal(){t.dispatch(e.logCloseSmartSnippetFeedbackModal()),t.dispatch(ma())},sendFeedback(u){t.dispatch(e.logSmartSnippetFeedback(u)),t.dispatch(ma())},sendDetailedFeedback(u){t.dispatch(e.logSmartSnippetDetailedFeedback(u)),t.dispatch(ma())},selectSource(){s.select()},beginDelayedSelectSource(){s.beginDelayedSelect()},cancelPendingSelectSource(){s.cancelPendingSelect()}}}function Yk(t){return t.addReducers({search:W,questionAnswering:lr}),!0}function dl(t,e){if(!Kk(t))throw A;let r=()=>t.state,a=new Set,n=l=>a.has(l)?!0:(a.add(l),!1),o=null,i=l=>{o!==l&&(o=l,c={},a.clear())},s=(l,d,f)=>{var p;return ti(t,{options:{selectionDelay:(p=e==null?void 0:e.options)==null?void 0:p.selectionDelay}},()=>{n(d)||t.dispatch(f?ul({questionAnswerId:f},l):Hi(l))})},c={},u=(l,d)=>{let{searchResponseId:f}=r().search;i(f);let p=ss({...l,questionAnswerId:d});return p in c||(c[p]=s(l,p,d)),c[p]};return{selectInlineLink(l,d){var f;(f=u(l,d))==null||f.select()},beginDelayedSelectInlineLink(l,d){var f;(f=u(l,d))==null||f.beginDelayedSelect()},cancelPendingSelectInlineLink(l,d){var f;(f=u(l,d))==null||f.cancelPendingSelect()}}}function Kk(t){return t.addReducers({search:W,questionAnswering:lr}),!0}function Ix(t,e){var n;let r=Ex(t,ll,e),a=dl(t,{options:{selectionDelay:(n=e==null?void 0:e.options)==null?void 0:n.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(o){a.selectInlineLink(o)},beginDelayedSelectInlineLink(o){a.beginDelayedSelectInlineLink(o)},cancelPendingSelectInlineLink(o){a.cancelPendingSelectInlineLink(o)}}}var kx=t=>({build:e=>Ix(e,t)});function Ox(t,e){if(!Jk(t))throw A;let r=N(t),a=()=>t.state,n=o=>{let{contentIdKey:i,contentIdValue:s}=o;return t.state.search.results.find(c=>Fr(c,i)===s)};return{...r,get state(){let o=a();return{questions:o.search.questionAnswer.relatedQuestions.map((i,s)=>({question:i.question,answer:i.answerSnippet,documentId:i.documentId,questionAnswerId:o.questionAnswering.relatedQuestions[s].questionAnswerId,expanded:o.questionAnswering.relatedQuestions[s].expanded,source:n(i.documentId)}))}},expand(o){let i={questionAnswerId:o};t.dispatch(e.logExpandSmartSnippetSuggestion(i)),t.dispatch(Jo(i))},collapse(o){let i={questionAnswerId:o};t.dispatch(e.logCollapseSmartSnippetSuggestion(i)),t.dispatch(Xo(i))}}}function Jk(t){return t.addReducers({search:W,questionAnswering:lr}),!0}function qx(t,e){if(!Xk(t))throw A;let r=()=>t.state,a=d=>{let f=r(),p=Ha(f,d);return p?kr(f,p.documentId):null},n=new Set,o=d=>n.has(d)?!0:(n.add(d),!1),i=null,s=d=>{i!==d&&(i=d,u={},n.clear())},c=(d,f)=>{var p;return ti(t,{options:{selectionDelay:(p=e==null?void 0:e.options)==null?void 0:p.selectionDelay}},()=>{o(f)||(t.dispatch(zi({questionAnswerId:f})),t.dispatch(ga(d)))})},u={},l=d=>{let{searchResponseId:f}=r().search;s(f);let p=a(d);return p?(d in u||(u[d]=c(p,d)),u[d]):null};return{selectSource(d){var f;(f=l(d))==null||f.select()},beginDelayedSelectSource(d){var f;(f=l(d))==null||f.beginDelayedSelect()},cancelPendingSelectSource(d){var f;(f=l(d))==null||f.cancelPendingSelect()}}}function Xk(t){return t.addReducers({search:W,questionAnswering:lr}),!0}function Tx(t,e){var o,i;let r=Ox(t,ll),a=dl(t,{options:{selectionDelay:(o=e==null?void 0:e.options)==null?void 0:o.selectionDelay}}),n=qx(t,{options:{selectionDelay:(i=e==null?void 0:e.options)==null?void 0:i.selectionDelay}});return{...r,get state(){return r.state},selectSource(s){n.selectSource(s)},beginDelayedSelectSource(s){n.beginDelayedSelectSource(s)},cancelPendingSelectSource(s){n.cancelPendingSelectSource(s)},selectInlineLink(s,c){a.selectInlineLink(c,s)},beginDelayedSelectInlineLink(s,c){a.beginDelayedSelectInlineLink(c,s)},cancelPendingSelectInlineLink(s,c){a.cancelPendingSelectInlineLink(c,s)}}}var Dx=t=>({build:e=>Tx(e,t)});var Zk={queries:new H({required:!0,each:new b({emptyAllowed:!1})}),maxLength:new I({required:!0,min:1,default:10})},ri=h("recentQueries/registerRecentQueries",t=>y(t,Zk)),ai=h("recentQueries/clearRecentQueries");var Vx=()=>w("analytics/recentQueries/clear",t=>t.makeClearRecentQueries()),Nx=()=>w("analytics/recentQueries/click",t=>t.makeRecentQueryClick());function Mx(){return{queries:[],maxLength:10}}var pl=k(Mx(),t=>{t.addCase(ri,(e,r)=>{e.queries=r.payload.queries.slice(0,r.payload.maxLength),e.maxLength=r.payload.maxLength}).addCase(ai,e=>{e.queries=[]}).addCase(R.fulfilled,(e,r)=>{let a=r.payload.queryExecuted.trim(),n=r.payload.response.results;if(!a.length||!n.length)return;e.queries=e.queries.filter(i=>i!==a);let o=e.queries.slice(0,e.maxLength-1);e.queries=[a,...o]})});var eO={queries:[]},tO={maxLength:10,clearFilters:!0},rO=new z({queries:new H({required:!0})}),aO=new z({maxLength:new I({required:!0,min:1}),clearFilters:new $});function nO(t,e){de(t,aO,e==null?void 0:e.options,"buildRecentQueriesList"),Pe(t,rO,e==null?void 0:e.initialState,"buildRecentQueriesList")}function Lx(t,e){if(!oO(t))throw A;let r=N(t),{dispatch:a}=t,n=()=>t.state,o={...tO,...e==null?void 0:e.options},i={...eO,...e==null?void 0:e.initialState};nO(t,{options:o,initialState:i});let s={queries:i.queries,maxLength:o.maxLength};return a(ri(s)),{...r,get state(){let c=n();return{...c.recentQueries,analyticsEnabled:c.configuration.analytics.enabled}},clear(){a(Vx()),a(ai())},executeRecentQuery(c){let u=new I({required:!0,min:0,max:this.state.queries.length}).validate(c);if(u)throw new Error(u);a(mc({q:this.state.queries[c],clearFilters:o.clearFilters})),a(R({legacy:Nx(),next:{actionCause:T.recentQueryClick,getEventExtraPayload:l=>new L(()=>l).getBaseMetadata()}}))}}}function oO(t){return t.addReducers({search:W,recentQueries:pl}),!0}var Qx=t=>({build:e=>Lx(e,t)});var Bx=()=>w("analytics/recentResults/clear",t=>t.makeClearRecentResults());function jx(){return{results:[],maxLength:10}}var fl=k(jx(),t=>{t.addCase(Zo,(e,r)=>{e.results=r.payload.results.slice(0,r.payload.maxLength),e.maxLength=r.payload.maxLength}).addCase(ei,e=>{e.results=[]}).addCase(ga,(e,r)=>{let a=r.payload;e.results=e.results.filter(o=>o.uniqueId!==a.uniqueId);let n=e.results.slice(0,e.maxLength-1);e.results=[a,...n]})});var iO={initialState:{results:[]},options:{maxLength:10}},sO=new z({results:new H({required:!0})}),cO=new z({maxLength:new I({required:!0,min:1})});function uO(t,e){de(t,cO,e==null?void 0:e.options,"buildRecentResultsList"),Pe(t,sO,e==null?void 0:e.initialState,"buildRecentResultsList")}function Ux(t,e){if(!lO(t))throw A;let r=N(t),{dispatch:a}=t,n=()=>t.state,o={...iO,...e};uO(t,o);let i={results:o.initialState.results,maxLength:o.options.maxLength};return a(Zo(i)),{...r,get state(){return n().recentResults},clear(){a(Bx()),a(ei())}}}function lO(t){return t.addReducers({recentResults:fl}),!0}var _x=t=>({build:e=>Ux(e,t)});function $x(t,e){if(!dO(t))throw A;let{facetSearch:r,allowedValues:a,...n}=e.options.facet,o=Be(t,n);t.dispatch(rr({...Di,...n,facetId:o,...a&&{allowedValues:{type:"simple",values:a}}}));let i=eu(t,{options:{...r,facetId:o},select:c=>{t.dispatch(re()),t.dispatch(R({legacy:be({facetId:o,facetValue:c.rawValue}),next:{actionCause:T.facetSelect,getEventExtraPayload:u=>new L(()=>u).getFacetMetadata(o,c.rawValue)}}))},exclude:c=>{t.dispatch(re()),t.dispatch(R({legacy:Et({facetId:o,facetValue:c.rawValue}),next:{actionCause:T.facetExclude,getEventExtraPayload:u=>new L(()=>u).getFacetMetadata(o,c.rawValue)}}))},isForFieldSuggestions:!0});return{...N(t),...i,updateText:function(c){i.updateText(c),i.search()},get state(){return i.state}}}function dO(t){return t.addReducers({facetSet:ft,configuration:j,facetSearchSet:So,search:W}),!0}var Wx=t=>({build:e=>$x(e,t)});function Hx(t,e){if(!pO(t))throw A;let{facetSearch:r,...a}=e.options.facet,n=Be(t,a);t.dispatch(zt({...Oi,...a,facetId:n}));let o=zc(t,{options:{...r,facetId:n},isForFieldSuggestions:!0});return{...N(t),...o,updateText:function(s){o.updateText(s),o.search()},get state(){return o.state}}}function pO(t){return t.addReducers({categoryFacetSet:pt,configuration:j,categoryFacetSearchSet:co,search:W}),!0}var zx=t=>({build:e=>Hx(e,t)});function Gx(t,e){let{dispatch:r}=t,a=N(t),{field:n}=e;return{...a,toggleSelect(o){r(ia({field:n,selection:o})),r(R({legacy:Xc(n,o),next:Zc(n,o)}))},deselectAll(){r(Eu(n)),r(R({legacy:ke(n),next:{actionCause:T.facetClearAll,getEventExtraPayload:o=>new L(()=>o).getFacetClearAllMetadata(n)}}))},get state(){var s,c;let o=(c=(s=t.state.automaticFacetSet)==null?void 0:s.set[n])==null?void 0:c.response;return o?{field:o.field,label:o.label,values:o.values}:{field:"",values:[],label:""}}}}function Yx(t){return{desiredCount:t.desiredCount,numberOfValues:t.numberOfValues}}function Kx(t,e){if(!fO(t))throw A;let{dispatch:r}=t,a=Yx(e.options);return r(wu(a)),{...N(t),get state(){var i,s;return{automaticFacets:(s=(i=t.state.search.response.generateAutomaticFacets)==null?void 0:i.facets.map(c=>Gx(t,{field:c.field})))!=null?s:[]}}}}function fO(t){return t.addReducers({automaticFacetSet:Ku,configuration:j,search:W}),!0}var Jx=t=>({build:e=>Kx(e,t)});function mO(t){return t.addReducers({advancedSearchQueries:Zu}),{updateAdvancedSearchQueries:Ju,registerAdvancedSearchQueries:Xu}}function gO(t){return t.addReducers({categoryFacetSet:pt}),{deselectAllCategoryFacetValues:Gt,registerCategoryFacet:zt,toggleSelectCategoryFacetValue:Zr,updateCategoryFacetNumberOfValues:qa,updateCategoryFacetSortCriterion:io,updateFacetAutoSelection:st,updateCategoryFacetBasePath:kc}}function hO(t){return t.addReducers({facetSet:ft}),{deselectAllFacetValues:me,registerFacet:rr,toggleSelectFacetValue:ar,toggleExcludeFacetValue:ta,updateFacetIsFieldExpanded:Na,updateFacetNumberOfValues:Va,updateFacetSortCriterion:mo,updateFreezeCurrentValues:Ma,updateFacetAutoSelection:st}}function SO(t){return t.addReducers({configuration:j}),{disableAnalytics:Fn,enableAnalytics:bn,setOriginLevel2:Bs,setOriginLevel3:js,updateAnalyticsConfiguration:Br,updateBasicConfiguration:Ut}}function yO(t){return t.addReducers({configuration:j,pipeline:Pn,searchHub:En}),{updateSearchConfiguration:it}}function CO(t){return t.addReducers({context:bc}),{addContext:ka,removeContext:Oa,setContext:Ia}}function xO(t){return t.addReducers({dictionaryFieldContext:Ac}),{addContext:eo,removeContext:to,setContext:Zn}}function vO(t){return t.addReducers({debug:_r}),{disableDebug:Rn,enableDebug:jr}}function FO(t){return t.addReducers({dateFacetSet:mt}),{deselectAllDateFacetValues:_c,registerDateFacet:nr,toggleSelectDateFacetValue:or,toggleExcludeDateFacetValue:ra,updateDateFacetSortCriterion:Uc,updateDateFacetValues:Ar}}function bO(t){return t.addReducers({facetOptions:Oe}),{updateFacetOptions:re,enableFacet:$e,disableFacet:xe}}function RO(t){return t.addReducers({didYouMean:wc,query:He}),{applyDidYouMeanCorrection:lt,disableDidYouMean:Ys,enableDidYouMean:Bn,enableAutomaticQueryCorrection:Ks,disableAutomaticQueryCorrection:jn}}function AO(t){return t.addReducers({fields:Xr}),{registerFieldsToInclude:Yr,enableFetchAllFields:Jn,disableFetchAllFields:Ea,fetchFieldsDescription:Xn}}function PO(t){return t.addReducers({history:Pu,facetOrder:vu}),{back:xi,forward:_s}}function wO(t){return t.addReducers({numericFacetSet:We}),{deselectAllNumericFacetValues:Hc,registerNumericFacet:ir,toggleSelectNumericFacetValue:sr,toggleExcludeNumericFacetValue:aa,updateNumericFacetSortCriterion:Wc,updateNumericFacetValues:Pr}}function EO(t){return t.addReducers({folding:sl}),{registerFolding:Kr,loadCollection:Jr}}function IO(t){return t.addReducers({pagination:gt}),{nextPage:Dn,previousPage:Vn,registerNumberOfResults:On,registerPage:Tn,updateNumberOfResults:qn,updatePage:ct}}function kO(t){return t.addReducers({pipeline:Pn}),{setPipeline:An}}function OO(t){return t.addReducers({query:He}),{updateQuery:Qe}}function qO(t){return t.addReducers({querySet:Po}),{registerQuerySetQuery:Ao,updateQuerySetQuery:_a}}function TO(t){return t.addReducers({instantResults:Nu}),{registerInstantResults:In,updateInstantResultsQuery:_t,clearExpiredResults:kn}}function DO(t){return t.addReducers({querySuggest:wo,querySet:Po}),{clearQuerySuggest:sa,fetchQuerySuggestions:ca,registerQuerySuggest:Ro,selectQuerySuggestion:ur}}function VO(t){return t.addReducers({search:W}),{executeSearch:$n,fetchMoreResults:Hn,fetchFacetValues:pc,fetchPage:Wn,fetchInstantResults:rh}}function NO(t){return t.addReducers({searchHub:En}),{setSearchHub:wn}}function MO(t){return t.addReducers({sortCriteria:Oo}),{registerSortCriterion:Io,updateSortCriterion:ko}}function LO(t){return t.addReducers({standaloneSearchBoxSet:Yu}),{registerStandaloneSearchBox:No,fetchRedirectUrl:da,updateAnalyticsToSearchFromLink:Lo,updateAnalyticsToOmniboxFromLink:Qo,resetStandaloneSearchBox:Mo}}function QO(t){return t.addReducers({staticFilterSet:Do}),{registerStaticFilter:qo,toggleSelectStaticFilterValue:Er,toggleExcludeStaticFilterValue:Ir,deselectAllStaticFilterValues:la}}function BO(t){return t.addReducers({tabSet:Vo}),{registerTab:Gn,updateActiveTab:Pt}}function jO(t){return t.addReducers({questionAnswering:lr}),{collapseSmartSnippet:zo,expandSmartSnippet:Ho,dislikeSmartSnippet:Yo,likeSmartSnippet:Go,openFeedbackModal:Ko,closeFeedbackModal:ma,expandSmartSnippetRelatedQuestion:Jo,collapseSmartSnippetRelatedQuestion:Xo}}function UO(t){return t.addReducers({}),{deselectAllBreadcrumbs:Ce,deselectAllNonBreadcrumbs:$r}}function _O(t){return t.addReducers({recentQueries:pl}),{registerRecentQueries:ri,clearRecentQueries:ai}}function $O(t){return t.addReducers({recentResults:fl}),{registerRecentResults:Zo,clearRecentResults:ei,pushRecentResult:ga}}var ml=h("excerptLength/set",t=>y(t,new I({min:0,required:!0})));function Xx(){return{length:void 0}}var Zx=k(Xx(),t=>{t.addCase(ml,(e,r)=>{e.length=r.payload})});function WO(t){return t.addReducers({excerptLength:Zx}),{setExcerptLength:ml}}function HO(t){return t.addReducers({resultPreview:ol}),{fetchResultContent:Wa,updateContentURL:$o,nextPreview:jo,previousPreview:Uo,preparePreviewPagination:_o}}function ev(t){var e,r,a;return(a=(r=(e=t.search)==null?void 0:e.response)==null?void 0:r.extendedResults)==null?void 0:a.generativeQuestionAnsweringId}var tv=t=>w("analytics/generatedAnswer/streamEnd",(e,r)=>{let a=ev(r);return a?e.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:a,answerGenerated:t}):null});var rv=async t=>{var e;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.platformUrl,streamId:(e=t.search.extendedResults)==null?void 0:e.generativeQuestionAnsweringId}};var av=["default","bullet","step","concise"];var Gi=new b({required:!0}),nv=new b,Gp=new $({required:!0}),zO={id:Gi,title:Gi,uri:Gi,permanentid:Gi,clickUri:nv},ov=h("generatedAnswer/setIsVisible",t=>y(t,Gp)),Yp=h("generatedAnswer/updateMessage",t=>y(t,{textDelta:Gi})),Kp=h("generatedAnswer/updateCitations",t=>y(t,{citations:new H({required:!0,each:new E({values:zO})})})),Jp=h("generatedAnswer/updateError",t=>y(t,{message:nv,code:new I({min:0})})),Yi=h("generatedAnswer/resetAnswer"),iv=h("generatedAnswer/like"),sv=h("generatedAnswer/dislike"),cv=h("generatedAnswer/feedbackModal/open"),uv=h("generatedAnswer/feedbackModal/close"),lv=h("generatedAnswer/sendFeedback"),Ki=h("generatedAnswer/setIsLoading",t=>y(t,Gp)),gl=h("generatedAnswer/setIsStreaming",t=>y(t,Gp)),dv=h("generatedAnswer/updateResponseFormat",t=>y(t,{answerStyle:new b({required:!0,constrainTo:av})})),gge=J("generatedAnswer/streamAnswer",async(t,e)=>{var l;let r=e.getState(),{dispatch:a,extra:n}=e,{setAbortControllerRef:o}=t,i=await rv(r),s=(d,f)=>{switch(d){case"genqa.messageType":a(Yp(JSON.parse(f)));break;case"genqa.citationsType":a(Kp(JSON.parse(f)));break;case"genqa.endOfStreamType":a(gl(!1)),a(tv(JSON.parse(f).answerGenerated));break;default:r.debug&&n.logger.warn(`Unknown payloadType: "${d}"`)}};a(Ki(!0));let c=d=>d.streamId===e.getState().search.extendedResults.generativeQuestionAnsweringId,u=(l=n.streamingClient)==null?void 0:l.streamGeneratedAnswer(i,{write:d=>{c(i)&&(a(Ki(!1)),d.payload&&d.payloadType&&s(d.payloadType,d.payload))},abort:d=>{c(i)&&a(Jp(d))},close:()=>{c(i)&&a(gl(!1))},resetAnswer:()=>{c(i)&&a(Yi())}});u?o(u):a(Ki(!1))});function Xp(){return{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1,feedbackSubmitted:!1}}var pv=k(Xp(),t=>t.addCase(ov,(e,{payload:r})=>{e.isVisible=r}).addCase(Yp,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=r.textDelta,delete e.error}).addCase(Kp,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!0,e.citations=e.citations.concat(r.citations),delete e.error}).addCase(Jp,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!1,e.error={...r,isRetryable:r.code===gd},e.citations=[],delete e.answer}).addCase(iv,e=>{e.liked=!0,e.disliked=!1}).addCase(sv,e=>{e.liked=!1,e.disliked=!0}).addCase(cv,e=>{e.feedbackModalOpen=!0}).addCase(uv,e=>{e.feedbackModalOpen=!1}).addCase(lv,e=>{e.feedbackSubmitted=!0}).addCase(Yi,e=>({...Xp(),responseFormat:e.responseFormat,isVisible:e.isVisible})).addCase(Ki,(e,{payload:r})=>{e.isLoading=r}).addCase(gl,(e,{payload:r})=>{e.isStreaming=r}).addCase(dv,(e,{payload:r})=>{e.responseFormat=r}));function GO(t){return t.addReducers({generatedAnswer:pv}),{resetAnswer:Yi}}var YO=new z({content:new ue({required:!0}),conditions:new ue({required:!0}),priority:new I({required:!1,default:0,min:0}),fields:new H({required:!1,each:P})});function fv(t){if(!KO(t))throw A;let e=[],r=a=>{a.forEach(n=>{if(YO.validate(n),!n.conditions.every(i=>i instanceof Function))throw new mi("Each result template conditions should be a function that takes a result as an argument and returns a boolean")})};return{registerTemplates(...a){let n=[];r(a),a.forEach(o=>{let i={...o,priority:o.priority||0,fields:o.fields||[]};e.push(i),n.push(...i.fields)}),e.sort((o,i)=>i.priority-o.priority),n.length&&t.dispatch(Yr(n))},selectTemplate(a){let n=e.find(o=>o.conditions.every(i=>i(a)));return n?n.content:null}}}function KO(t){return t.addReducers({fields:Xr}),!0}var Zp;(o=>{o.getResultProperty=Fr,o.fieldsMustBeDefined=ih,o.fieldsMustNotBeDefined=sh,o.fieldMustMatch=ch,o.fieldMustNotMatch=uh})(Zp||(Zp={}));function JO(t){return t.addReducers({}),{logClearBreadcrumbs:Hu,logInterfaceLoad:Ms,logSearchFromLink:Ls,logOmniboxFromLink:Qs,logInterfaceChange:Qr,logDidYouMeanClick:Js,logCategoryFacetBreadcrumb:Wu,logFacetBreadcrumb:po,logFacetClearAll:ke,logFacetDeselect:Ze,logFacetSelect:be,logFacetShowLess:lo,logFacetShowMore:uo,logFacetUpdateSort:Kt,logDateFacetBreadcrumb:Bi,logNumericFacetBreadcrumb:ji,logNavigateBackward:bu,logNavigateForward:Fu,logPageNext:ku,logPageNumber:Fo,logPagePrevious:Ou,logPagerResize:vo,logSearchboxSubmit:ua,logQuerySuggestionClick:Tu,logResultsSort:Eo,logDislikeSmartSnippet:Qp,logLikeSmartSnippet:Lp,logOpenSmartSnippetFeedbackModal:jp,logCloseSmartSnippetFeedbackModal:Up,logSmartSnippetFeedback:_p,logSmartSnippetDetailedFeedback:$p,logExpandSmartSnippet:Np,logCollapseSmartSnippet:Mp,logExpandSmartSnippetSuggestion:Wp,logCollapseSmartSnippetSuggestion:Hp,logNoResultsBack:Ru,logStaticFilterSelect:Bu,logStaticFilterDeselect:To,logStaticFilterClearAll:ju,logTriggerQuery:sc,logUndoTriggerQuery:cc,logNotifyTrigger:uc,logTriggerRedirect:lc,logTriggerExecute:dc}}var mv=t=>w({prefix:"analytics/result/open",__legacy__getBuilder:(e,r)=>(ot(t),e.makeDocumentOpen(Le(t,r),_e(t))),analyticsType:"itemClick",analyticsPayloadBuilder:e=>{var n,o;let r=Le(t,e),a=_e(t);return{searchUid:(o=(n=e.search)==null?void 0:n.response.searchUid)!=null?o:"",position:r.documentPosition,itemMetadata:{uniqueFieldName:a.contentIDKey,uniqueFieldValue:a.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});function XO(t){return t.addReducers({}),{logDocumentOpen:mv,logOpenSmartSnippetSource:Bp,logOpenSmartSnippetSuggestionSource:zi,logOpenSmartSnippetInlineLink:Hi,logOpenSmartSnippetSuggestionInlineLink:ul}}function ZO(t){return t.addReducers({}),{logSearchEvent:Tg,logClickEvent:Dg,logCustomEvent:Vg}}function eq(t){let{by:e,order:r}=t;switch(e){case bt.Relevancy:return mn();case bt.QRE:return Fs();case bt.NoSort:return bs();case bt.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return xs(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${e}"`);return vs(e,r)}}function tq(t){return t===void 0||t===mr.Ascending||t===mr.Descending}function gv(t){let e=t.split(","),r=new Error(`Wrong criterion expression format for "${t}"`);if(!e.length)throw r;return e.map(a=>{let n=a.trim().split(" "),o=n[0].toLowerCase(),i=n[1]&&n[1].toLowerCase();if(n.length>2||o==="")throw r;if(!tq(i))throw new Error(`Wrong criterion sort order "${i}" in expression "${t}". Order should either be "${mr.Ascending}" or "${mr.Descending}"`);return eq({by:o,order:i})})}function qe(t){return t.negate?"NOT ":""}function St(t){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[t]}function hv(t){return{toQuerySyntax(){let{field:e,value:r}=t,a=St(t.operator);return`${qe(t)}@${e}${a}${r}`}}}function Sv(t){return{toQuerySyntax(){let e=qe(t),{field:r,from:a,to:n}=t,o=St("isExactly");return`${e}@${r}${o}${a}..${n}`}}}function yv(t){return{toQuerySyntax(){let e=qe(t),{expression:r}=t;return`${e}"${r}"`}}}function Cv(t){return{toQuerySyntax(){let e=qe(t),{field:r}=t;return`${e}@${r}`}}}function xv(t){return{toQuerySyntax(){let{expression:e,negate:r}=t;return r?`NOT (${e})`:e}}}function vv(t){return{toQuerySyntax(){let e=qe(t),{startTerm:r,otherTerms:a}=t,n=rq(a),o=`${r} ${n}`;return t.negate?`${e}(${o})`:o}}}function rq(t){return t.map(e=>{let{endTerm:r,maxKeywordsBetween:a}=e;return`near:${a} ${r}`}).join(" ")}function Fv(t){return{toQuerySyntax(){let{field:e,value:r}=t,a=qe(t),n=St(t.operator);return`${a}@${e}${n}${r}`}}}function bv(t){return{toQuerySyntax(){let e=qe(t),{field:r,from:a,to:n}=t,o=St("isExactly");return`${e}@${r}${o}${a}..${n}`}}}function Rv(t){return{toQuerySyntax(){let{name:e,parameters:r}=t,a=aq(r);return`$${e}(${a})`}}}function aq(t){return Object.entries(t).map(e=>{let[r,a]=e,n=typeof a=="string"?a:a.toQuerySyntax();return`${r}: ${n}`}).join(", ")}function Av(t){return{toQuerySyntax(){let e=qe(t),{field:r,operator:a,value:n}=t,o=St(a),i=a==="fuzzyMatch"?` $quoteVar(value: ${n})`:`("${n}")`;return`${e}@${r}${o}${i}`}}}function Pv(t){return{toQuerySyntax(){let{field:e}=t,r=qe(t),a=St(t.operator),n=t.values.map(i=>`"${i}"`),o=n.length===1?n[0]:`(${n.join(",")})`;return`${r}@${e}${a}${o}`}}}function nq(){let t=[],e="and";return{addExpression(r){return t.push(r),this},addKeyword(r){return t.push(xv(r)),this},addNear(r){return t.push(vv(r)),this},addExactMatch(r){return t.push(yv(r)),this},addFieldExists(r){return t.push(Cv(r)),this},addStringField(r){return t.push(Pv(r)),this},addStringFacetField(r){return t.push(Av(r)),this},addNumericField(r){return t.push(Fv(r)),this},addNumericRangeField(r){return t.push(bv(r)),this},addDateField(r){return t.push(hv(r)),this},addDateRangeField(r){return t.push(Sv(r)),this},addQueryExtension(r){return t.push(Rv(r)),this},joinUsing(r){return e=r,this},toQuerySyntax(){let r=oq(e),a=t.map(n=>n.toQuerySyntax()).join(`) ${r} (`);return t.length<=1?a:`(${a})`}}}function oq(t){return t==="and"?"AND":"OR"}tf();
/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
}));
//# sourceMappingURL=headless.js.map
