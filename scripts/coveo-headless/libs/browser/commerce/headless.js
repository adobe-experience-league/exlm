/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function (global, factory) {
    const isCommonjs = typeof exports === 'object' && typeof module !== 'undefined';
    
    if (isCommonjs) {
      return factory(exports);
    }
    
    const isAmd = typeof define === 'function' && define.amd;

    if (isAmd) {
      return define(['exports'], factory);
    }

    global = typeof globalThis !== 'undefined' ? globalThis : global || self;
    factory(global.CoveoHeadlessCommerce = {});
  })(this, (function (exports) { 'use strict';
var OC=Object.create;var ei=Object.defineProperty;var qC=Object.getOwnPropertyDescriptor;var TC=Object.getOwnPropertyNames;var DC=Object.getPrototypeOf,VC=Object.prototype.hasOwnProperty;var uf=t=>ei(t,"__esModule",{value:!0});var le=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),lf=(t,e)=>{uf(t);for(var r in e)ei(t,r,{get:e[r],enumerable:!0})},F=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of TC(e))!VC.call(t,a)&&a!=="default"&&ei(t,a,{get:()=>e[a],enumerable:!(r=qC(e,a))||r.enumerable});return t},Fe=t=>F(uf(ei(t!=null?OC(DC(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var pf=le((LI,df)=>{df.exports=fetch});var ff=le(Po=>{"use strict";var ti=Po&&Po.__assign||function(){return ti=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ti.apply(this,arguments)};Object.defineProperty(Po,"__esModule",{value:!0});var MC={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function LC(t){var e=ti(ti({},MC),t);return e.numOfAttempts<1&&(e.numOfAttempts=1),e}Po.getSanitizedOptions=LC});var mf=le(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});function NC(t){var e=Math.random()*t;return Math.round(e)}Cu.fullJitter=NC});var gf=le(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});function QC(t){return t}xu.noJitter=QC});var hf=le(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});var BC=mf(),jC=gf();function UC(t){switch(t.jitter){case"full":return BC.fullJitter;case"none":default:return jC.noJitter}}vu.JitterFactory=UC});var bu=le(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var _C=hf(),$C=function(){function t(e){this.options=e,this.attempt=0}return t.prototype.apply=function(){var e=this;return new Promise(function(r){return setTimeout(r,e.jitteredDelay)})},t.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(t.prototype,"jitteredDelay",{get:function(){var e=_C.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){var e=this.options.startingDelay,r=this.options.timeMultiple,a=this.numOfDelayedAttempts,o=e*Math.pow(r,a);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),t}();Fu.Delay=$C});var Sf=le(Qt=>{"use strict";var HC=Qt&&Qt.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var n in o)o.hasOwnProperty(n)&&(a[n]=o[n])},t(e,r)};return function(e,r){t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),WC=Qt&&Qt.__awaiter||function(t,e,r,a){function o(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?n(l.value):o(l.value).then(s,u)}c((a=a.apply(t,e||[])).next())})},GC=Qt&&Qt.__generator||function(t,e){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,o,n,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,o&&(n=c[0]&2?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){r.label=c[1];break}if(c[0]===6&&r.label<n[1]){r.label=n[1],n=c;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(c);break}n[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],o=0}finally{a=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Qt,"__esModule",{value:!0});var zC=bu(),YC=function(t){HC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.apply=function(){return WC(this,void 0,void 0,function(){return GC(this,function(r){return[2,this.isFirstAttempt?!0:t.prototype.apply.call(this)]})})},Object.defineProperty(e.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),e}(zC.Delay);Qt.SkipFirstDelay=YC});var yf=le(wo=>{"use strict";var KC=wo&&wo.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var n in o)o.hasOwnProperty(n)&&(a[n]=o[n])},t(e,r)};return function(e,r){t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(wo,"__esModule",{value:!0});var JC=bu(),XC=function(t){KC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(JC.Delay);wo.AlwaysDelay=XC});var Cf=le(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});var ZC=Sf(),ex=yf();function tx(t,e){var r=rx(t);return r.setAttemptNumber(e),r}Ru.DelayFactory=tx;function rx(t){return t.delayFirstAttempt?new ex.AlwaysDelay(t):new ZC.SkipFirstDelay(t)}});var xf=le(Tr=>{"use strict";var Au=Tr&&Tr.__awaiter||function(t,e,r,a){function o(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?n(l.value):o(l.value).then(s,u)}c((a=a.apply(t,e||[])).next())})},Pu=Tr&&Tr.__generator||function(t,e){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,o,n,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,o&&(n=c[0]&2?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){r.label=c[1];break}if(c[0]===6&&r.label<n[1]){r.label=n[1],n=c;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(c);break}n[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],o=0}finally{a=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Tr,"__esModule",{value:!0});var ax=ff(),ox=Cf();function nx(t,e){return e===void 0&&(e={}),Au(this,void 0,void 0,function(){var r,a;return Pu(this,function(o){switch(o.label){case 0:return r=ax.getSanitizedOptions(e),a=new ix(t,r),[4,a.execute()];case 1:return[2,o.sent()]}})})}Tr.backOff=nx;var ix=function(){function t(e,r){this.request=e,this.options=r,this.attemptNumber=0}return t.prototype.execute=function(){return Au(this,void 0,void 0,function(){var e,r;return Pu(this,function(a){switch(a.label){case 0:if(this.attemptLimitReached)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return a.sent(),[4,this.request()];case 3:return[2,a.sent()];case 4:return e=a.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(r=a.sent(),!r||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(t.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),t.prototype.applyDelay=function(){return Au(this,void 0,void 0,function(){var e;return Pu(this,function(r){switch(r.label){case 0:return e=ox.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return r.sent(),[2]}})})},t}()});var Ff=le((zI,vf)=>{"use strict";function sx(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(t=`${t}`,t=t.replace(/[ \t\n\f\r]/g,""),t.length%4==0&&(t=t.replace(/==?$/,"")),t.length%4==1||/[^+/0-9A-Za-z]/.test(t))return null;let e="",r=0,a=0;for(let o=0;o<t.length;o++)r<<=6,r|=ux(t[o]),a+=6,a===24&&(e+=String.fromCharCode((r&16711680)>>16),e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255),r=a=0);return a===12?(r>>=4,e+=String.fromCharCode(r)):a===18&&(r>>=2,e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255)),e}var cx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function ux(t){let e=cx.indexOf(t);return e<0?void 0:e}vf.exports=sx});var Rf=le((YI,bf)=>{"use strict";function lx(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let e;for(t=`${t}`,e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return null;let r="";for(e=0;e<t.length;e+=3){let a=[void 0,void 0,void 0,void 0];a[0]=t.charCodeAt(e)>>2,a[1]=(t.charCodeAt(e)&3)<<4,t.length>e+1&&(a[1]|=t.charCodeAt(e+1)>>4,a[2]=(t.charCodeAt(e+1)&15)<<2),t.length>e+2&&(a[2]|=t.charCodeAt(e+2)>>6,a[3]=t.charCodeAt(e+2)&63);for(let o=0;o<a.length;o++)typeof a[o]=="undefined"?r+="=":r+=px(a[o])}return r}var dx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function px(t){if(t>=0&&t<64)return dx[t]}bf.exports=lx});var wu=le((KI,Af)=>{"use strict";var fx=Ff(),mx=Rf();Af.exports={atob:fx,btoa:mx}});var $u=le((vk,Bt)=>{function _u(t){return Bt.exports=_u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt.exports.__esModule=!0,Bt.exports.default=Bt.exports,_u(t)}Bt.exports=_u,Bt.exports.__esModule=!0,Bt.exports.default=Bt.exports});var Yf=le((Fk,Vo)=>{var zf=$u().default;function Tx(t,e){if(zf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e||"default");if(zf(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}Vo.exports=Tx,Vo.exports.__esModule=!0,Vo.exports.default=Vo.exports});var Kf=le((bk,Mo)=>{var Dx=$u().default,Vx=Yf();function Mx(t){var e=Vx(t,"string");return Dx(e)==="symbol"?e:String(e)}Mo.exports=Mx,Mo.exports.__esModule=!0,Mo.exports.default=Mo.exports});var Jf=le((Rk,Lo)=>{var Lx=Kf();function Nx(t,e,r){return e=Lx(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Lo.exports=Nx,Lo.exports.__esModule=!0,Lo.exports.default=Lo.exports});var Zf=le((Ak,No)=>{var Qx=Jf();function Xf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,a)}return r}function Bx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xf(Object(r),!0).forEach(function(a){Qx(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}No.exports=Bx,No.exports.__esModule=!0,No.exports.default=No.exports});var Bo=le(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});var jx=Zf();function Ux(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var em=Ux(jx);function Ve(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var tm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Hu=function(){return Math.random().toString(36).substring(7).split("").join(".")},Qo={INIT:"@@redux/INIT"+Hu(),REPLACE:"@@redux/REPLACE"+Hu(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Hu()}};function _x(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Wu(t,e,r){var a;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ve(0));if(typeof e=="function"&&typeof r=="undefined"&&(r=e,e=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(Ve(1));return r(Wu)(t,e)}if(typeof t!="function")throw new Error(Ve(2));var o=t,n=e,i=[],s=i,u=!1;function c(){s===i&&(s=i.slice())}function l(){if(u)throw new Error(Ve(3));return n}function d(h){if(typeof h!="function")throw new Error(Ve(4));if(u)throw new Error(Ve(5));var x=!0;return c(),s.push(h),function(){if(!!x){if(u)throw new Error(Ve(6));x=!1,c();var b=s.indexOf(h);s.splice(b,1),i=null}}}function g(h){if(!_x(h))throw new Error(Ve(7));if(typeof h.type=="undefined")throw new Error(Ve(8));if(u)throw new Error(Ve(9));try{u=!0,n=o(n,h)}finally{u=!1}for(var x=i=s,R=0;R<x.length;R++){var b=x[R];b()}return h}function p(h){if(typeof h!="function")throw new Error(Ve(10));o=h,g({type:Qo.REPLACE})}function m(){var h,x=d;return h={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ve(11));function A(){b.next&&b.next(l())}A();var E=x(A);return{unsubscribe:E}}},h[tm]=function(){return this},h}return g({type:Qo.INIT}),a={dispatch:g,subscribe:d,getState:l,replaceReducer:p},a[tm]=m,a}var $x=Wu;function Hx(t){Object.keys(t).forEach(function(e){var r=t[e],a=r(void 0,{type:Qo.INIT});if(typeof a=="undefined")throw new Error(Ve(12));if(typeof r(void 0,{type:Qo.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Ve(13))})}function Wx(t){for(var e=Object.keys(t),r={},a=0;a<e.length;a++){var o=e[a];typeof t[o]=="function"&&(r[o]=t[o])}var n=Object.keys(r),i,s;try{Hx(r)}catch(u){s=u}return function(c,l){if(c===void 0&&(c={}),s)throw s;if(!1)var d;for(var g=!1,p={},m=0;m<n.length;m++){var h=n[m],x=r[h],R=c[h],b=x(R,l);if(typeof b=="undefined"){var A=l&&l.type;throw new Error(Ve(14))}p[h]=b,g=g||b!==R}return g=g||n.length!==Object.keys(c).length,g?p:c}}function rm(t,e){return function(){return e(t.apply(this,arguments))}}function Gx(t,e){if(typeof t=="function")return rm(t,e);if(typeof t!="object"||t===null)throw new Error(Ve(16));var r={};for(var a in t){var o=t[a];typeof o=="function"&&(r[a]=rm(o,e))}return r}function am(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(a){return a}:e.length===1?e[0]:e.reduce(function(a,o){return function(){return a(o.apply(void 0,arguments))}})}function zx(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(a){return function(){var o=a.apply(void 0,arguments),n=function(){throw new Error(Ve(15))},i={getState:o.getState,dispatch:function(){return n.apply(void 0,arguments)}},s=e.map(function(u){return u(i)});return n=am.apply(void 0,s)(o.dispatch),em.default(em.default({},o),{},{dispatch:n})}}}jt.__DO_NOT_USE__ActionTypes=Qo;jt.applyMiddleware=zx;jt.bindActionCreators=Gx;jt.combineReducers=Wx;jt.compose=am;jt.createStore=Wu;jt.legacy_createStore=$x});var rs=le((Hl,Wl)=>{(function(t,e){typeof Hl=="object"&&typeof Wl!="undefined"?Wl.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs=e()})(Hl,function(){"use strict";var t=1e3,e=6e4,r=36e5,a="millisecond",o="second",n="minute",i="hour",s="day",u="week",c="month",l="quarter",d="year",g="date",p="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var T=["th","st","nd","rd"],V=B%100;return"["+B+(T[(V-20)%10]||T[V]||T[0])+"]"}},R=function(B,T,V){var $=String(B);return!$||$.length>=T?B:""+Array(T+1-$.length).join(V)+B},b={s:R,z:function(B){var T=-B.utcOffset(),V=Math.abs(T),$=Math.floor(V/60),M=V%60;return(T<=0?"+":"-")+R($,2,"0")+":"+R(M,2,"0")},m:function B(T,V){if(T.date()<V.date())return-B(V,T);var $=12*(V.year()-T.year())+(V.month()-T.month()),M=T.clone().add($,c),J=V-M<0,Z=T.clone().add($+(J?-1:1),c);return+(-($+(V-M)/(J?M-Z:Z-M))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:c,y:d,w:u,d:s,D:g,h:i,m:n,s:o,ms:a,Q:l}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},A="en",E={};E[A]=x;var Q="$isDayjsObject",X=function(B){return B instanceof Se||!(!B||!B[Q])},ee=function B(T,V,$){var M;if(!T)return A;if(typeof T=="string"){var J=T.toLowerCase();E[J]&&(M=J),V&&(E[J]=V,M=J);var Z=T.split("-");if(!M&&Z.length>1)return B(Z[0])}else{var ne=T.name;E[ne]=T,M=ne}return!$&&M&&(A=M),M||!$&&A},Y=function(B,T){if(X(B))return B.clone();var V=typeof T=="object"?T:{};return V.date=B,V.args=arguments,new Se(V)},_=b;_.l=ee,_.i=X,_.w=function(B,T){return Y(B,{locale:T.$L,utc:T.$u,x:T.$x,$offset:T.$offset})};var Se=function(){function B(V){this.$L=ee(V.locale,null,!0),this.parse(V),this.$x=this.$x||V.x||{},this[Q]=!0}var T=B.prototype;return T.parse=function(V){this.$d=function($){var M=$.date,J=$.utc;if(M===null)return new Date(NaN);if(_.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var Z=M.match(m);if(Z){var ne=Z[2]-1||0,ye=(Z[7]||"0").substring(0,3);return J?new Date(Date.UTC(Z[1],ne,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ye)):new Date(Z[1],ne,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ye)}}return new Date(M)}(V),this.init()},T.init=function(){var V=this.$d;this.$y=V.getFullYear(),this.$M=V.getMonth(),this.$D=V.getDate(),this.$W=V.getDay(),this.$H=V.getHours(),this.$m=V.getMinutes(),this.$s=V.getSeconds(),this.$ms=V.getMilliseconds()},T.$utils=function(){return _},T.isValid=function(){return this.$d.toString()!==p},T.isSame=function(V,$){var M=Y(V);return this.startOf($)<=M&&M<=this.endOf($)},T.isAfter=function(V,$){return Y(V)<this.startOf($)},T.isBefore=function(V,$){return this.endOf($)<Y(V)},T.$g=function(V,$,M){return _.u(V)?this[$]:this.set(M,V)},T.unix=function(){return Math.floor(this.valueOf()/1e3)},T.valueOf=function(){return this.$d.getTime()},T.startOf=function(V,$){var M=this,J=!!_.u($)||$,Z=_.p(V),ne=function(it,qe){var We=_.w(M.$u?Date.UTC(M.$y,qe,it):new Date(M.$y,qe,it),M);return J?We:We.endOf(s)},ye=function(it,qe){return _.w(M.toDate()[it].apply(M.toDate("s"),(J?[0,0,0,0]:[23,59,59,999]).slice(qe)),M)},ve=this.$W,Oe=this.$M,Ue=this.$D,ur="set"+(this.$u?"UTC":"");switch(Z){case d:return J?ne(1,0):ne(31,11);case c:return J?ne(1,Oe):ne(0,Oe+1);case u:var St=this.$locale().weekStart||0,Lt=(ve<St?ve+7:ve)-St;return ne(J?Ue-Lt:Ue+(6-Lt),Oe);case s:case g:return ye(ur+"Hours",0);case i:return ye(ur+"Minutes",1);case n:return ye(ur+"Seconds",2);case o:return ye(ur+"Milliseconds",3);default:return this.clone()}},T.endOf=function(V){return this.startOf(V,!1)},T.$set=function(V,$){var M,J=_.p(V),Z="set"+(this.$u?"UTC":""),ne=(M={},M[s]=Z+"Date",M[g]=Z+"Date",M[c]=Z+"Month",M[d]=Z+"FullYear",M[i]=Z+"Hours",M[n]=Z+"Minutes",M[o]=Z+"Seconds",M[a]=Z+"Milliseconds",M)[J],ye=J===s?this.$D+($-this.$W):$;if(J===c||J===d){var ve=this.clone().set(g,1);ve.$d[ne](ye),ve.init(),this.$d=ve.set(g,Math.min(this.$D,ve.daysInMonth())).$d}else ne&&this.$d[ne](ye);return this.init(),this},T.set=function(V,$){return this.clone().$set(V,$)},T.get=function(V){return this[_.p(V)]()},T.add=function(V,$){var M,J=this;V=Number(V);var Z=_.p($),ne=function(Oe){var Ue=Y(J);return _.w(Ue.date(Ue.date()+Math.round(Oe*V)),J)};if(Z===c)return this.set(c,this.$M+V);if(Z===d)return this.set(d,this.$y+V);if(Z===s)return ne(1);if(Z===u)return ne(7);var ye=(M={},M[n]=e,M[i]=r,M[o]=t,M)[Z]||1,ve=this.$d.getTime()+V*ye;return _.w(ve,this)},T.subtract=function(V,$){return this.add(-1*V,$)},T.format=function(V){var $=this,M=this.$locale();if(!this.isValid())return M.invalidDate||p;var J=V||"YYYY-MM-DDTHH:mm:ssZ",Z=_.z(this),ne=this.$H,ye=this.$m,ve=this.$M,Oe=M.weekdays,Ue=M.months,ur=M.meridiem,St=function(qe,We,Nt,lr){return qe&&(qe[We]||qe($,J))||Nt[We].slice(0,lr)},Lt=function(qe){return _.s(ne%12||12,qe,"0")},it=ur||function(qe,We,Nt){var lr=qe<12?"AM":"PM";return Nt?lr.toLowerCase():lr};return J.replace(h,function(qe,We){return We||function(Nt){switch(Nt){case"YY":return String($.$y).slice(-2);case"YYYY":return _.s($.$y,4,"0");case"M":return ve+1;case"MM":return _.s(ve+1,2,"0");case"MMM":return St(M.monthsShort,ve,Ue,3);case"MMMM":return St(Ue,ve);case"D":return $.$D;case"DD":return _.s($.$D,2,"0");case"d":return String($.$W);case"dd":return St(M.weekdaysMin,$.$W,Oe,2);case"ddd":return St(M.weekdaysShort,$.$W,Oe,3);case"dddd":return Oe[$.$W];case"H":return String(ne);case"HH":return _.s(ne,2,"0");case"h":return Lt(1);case"hh":return Lt(2);case"a":return it(ne,ye,!0);case"A":return it(ne,ye,!1);case"m":return String(ye);case"mm":return _.s(ye,2,"0");case"s":return String($.$s);case"ss":return _.s($.$s,2,"0");case"SSS":return _.s($.$ms,3,"0");case"Z":return Z}return null}(qe)||Z.replace(":","")})},T.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},T.diff=function(V,$,M){var J,Z=this,ne=_.p($),ye=Y(V),ve=(ye.utcOffset()-this.utcOffset())*e,Oe=this-ye,Ue=function(){return _.m(Z,ye)};switch(ne){case d:J=Ue()/12;break;case c:J=Ue();break;case l:J=Ue()/3;break;case u:J=(Oe-ve)/6048e5;break;case s:J=(Oe-ve)/864e5;break;case i:J=Oe/r;break;case n:J=Oe/e;break;case o:J=Oe/t;break;default:J=Oe}return M?J:_.a(J)},T.daysInMonth=function(){return this.endOf(c).$D},T.$locale=function(){return E[this.$L]},T.locale=function(V,$){if(!V)return this.$L;var M=this.clone(),J=ee(V,$,!0);return J&&(M.$L=J),M},T.clone=function(){return _.w(this.$d,this)},T.toDate=function(){return new Date(this.valueOf())},T.toJSON=function(){return this.isValid()?this.toISOString():null},T.toISOString=function(){return this.$d.toISOString()},T.toString=function(){return this.$d.toUTCString()},B}(),xe=Se.prototype;return Y.prototype=xe,[["$ms",a],["$s",o],["$m",n],["$H",i],["$W",s],["$M",c],["$y",d],["$D",g]].forEach(function(B){xe[B[1]]=function(T){return this.$g(T,B[0],B[1])}}),Y.extend=function(B,T){return B.$i||(B(T,Se,Y),B.$i=!0),Y},Y.locale=ee,Y.isDayjs=X,Y.unix=function(B){return Y(1e3*B)},Y.en=E[A],Y.Ls=E,Y.p={},Y})});var gh=le((Gl,zl)=>{(function(t,e){typeof Gl=="object"&&typeof zl!="undefined"?zl.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_quarterOfYear=e()})(Gl,function(){"use strict";var t="month",e="quarter";return function(r,a){var o=a.prototype;o.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var n=o.add;o.add=function(s,u){return s=Number(s),this.$utils().p(u)===e?this.add(3*s,t):n.bind(this)(s,u)};var i=o.startOf;o.startOf=function(s,u){var c=this.$utils(),l=!!c.u(u)||u;if(c.p(s)===e){var d=this.quarter()-1;return l?this.month(3*d).startOf(t).startOf("day"):this.month(3*d+2).endOf(t).endOf("day")}return i.bind(this)(s,u)}}})});var hh=le((Yl,Kl)=>{(function(t,e){typeof Yl=="object"&&typeof Kl!="undefined"?Kl.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_customParseFormat=e()})(Yl,function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,n={},i=function(p){return(p=+p)+(p>68?1900:2e3)},s=function(p){return function(m){this[p]=+m}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(m){if(!m||m==="Z")return 0;var h=m.match(/([+-]|\d\d)/g),x=60*h[1]+(+h[2]||0);return x===0?0:h[0]==="+"?-x:x}(p)}],c=function(p){var m=n[p];return m&&(m.indexOf?m:m.s.concat(m.f))},l=function(p,m){var h,x=n.meridiem;if(x){for(var R=1;R<=24;R+=1)if(p.indexOf(x(R,0,m))>-1){h=R>12;break}}else h=p===(m?"pm":"PM");return h},d={A:[o,function(p){this.afternoon=l(p,!1)}],a:[o,function(p){this.afternoon=l(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[a,s("seconds")],ss:[a,s("seconds")],m:[a,s("minutes")],mm:[a,s("minutes")],H:[a,s("hours")],h:[a,s("hours")],HH:[a,s("hours")],hh:[a,s("hours")],D:[a,s("day")],DD:[r,s("day")],Do:[o,function(p){var m=n.ordinal,h=p.match(/\d+/);if(this.day=h[0],m)for(var x=1;x<=31;x+=1)m(x).replace(/\[|\]/g,"")===p&&(this.day=x)}],M:[a,s("month")],MM:[r,s("month")],MMM:[o,function(p){var m=c("months"),h=(c("monthsShort")||m.map(function(x){return x.slice(0,3)})).indexOf(p)+1;if(h<1)throw new Error;this.month=h%12||h}],MMMM:[o,function(p){var m=c("months").indexOf(p)+1;if(m<1)throw new Error;this.month=m%12||m}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(p){this.year=i(p)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function g(p){var m,h;m=p,h=n&&n.formats;for(var x=(p=m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(ee,Y,_){var Se=_&&_.toUpperCase();return Y||h[_]||t[_]||h[Se].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(xe,B,T){return B||T.slice(1)})})).match(e),R=x.length,b=0;b<R;b+=1){var A=x[b],E=d[A],Q=E&&E[0],X=E&&E[1];x[b]=X?{regex:Q,parser:X}:A.replace(/^\[|\]$/g,"")}return function(ee){for(var Y={},_=0,Se=0;_<R;_+=1){var xe=x[_];if(typeof xe=="string")Se+=xe.length;else{var B=xe.regex,T=xe.parser,V=ee.slice(Se),$=B.exec(V)[0];T.call(Y,$),ee=ee.replace($,"")}}return function(M){var J=M.afternoon;if(J!==void 0){var Z=M.hours;J?Z<12&&(M.hours+=12):Z===12&&(M.hours=0),delete M.afternoon}}(Y),Y}}return function(p,m,h){h.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(i=p.parseTwoDigitYear);var x=m.prototype,R=x.parse;x.parse=function(b){var A=b.date,E=b.utc,Q=b.args;this.$u=E;var X=Q[1];if(typeof X=="string"){var ee=Q[2]===!0,Y=Q[3]===!0,_=ee||Y,Se=Q[2];Y&&(Se=Q[2]),n=this.$locale(),!ee&&Se&&(n=h.Ls[Se]),this.$d=function(V,$,M){try{if(["x","X"].indexOf($)>-1)return new Date(($==="X"?1e3:1)*V);var J=g($)(V),Z=J.year,ne=J.month,ye=J.day,ve=J.hours,Oe=J.minutes,Ue=J.seconds,ur=J.milliseconds,St=J.zone,Lt=new Date,it=ye||(Z||ne?1:Lt.getDate()),qe=Z||Lt.getFullYear(),We=0;Z&&!ne||(We=ne>0?ne-1:Lt.getMonth());var Nt=ve||0,lr=Oe||0,Su=Ue||0,yu=ur||0;return St?new Date(Date.UTC(qe,We,it,Nt,lr,Su,yu+60*St.offset*1e3)):M?new Date(Date.UTC(qe,We,it,Nt,lr,Su,yu)):new Date(qe,We,it,Nt,lr,Su,yu)}catch{return new Date("")}}(A,X,E),this.init(),Se&&Se!==!0&&(this.$L=this.locale(Se).$L),_&&A!=this.format(X)&&(this.$d=new Date("")),n={}}else if(X instanceof Array)for(var xe=X.length,B=1;B<=xe;B+=1){Q[1]=X[B-1];var T=h.apply(this,Q);if(T.isValid()){this.$d=T.$d,this.$L=T.$L,this.init();break}B===xe&&(this.$d=new Date(""))}else R.call(this,b)}}})});var Uh=le((ON,jh)=>{var MR=/(^|; )Coveo-Pendragon=([^;]*)/;jh.exports=()=>MR.exec(document.cookie)?.pop()||null});var _h=le((hd,Sd)=>{(function(t,e){typeof hd=="object"&&typeof Sd!="undefined"?Sd.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_timezone=e()})(hd,function(){"use strict";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(r,a,o){var n,i=function(l,d,g){g===void 0&&(g={});var p=new Date(l),m=function(h,x){x===void 0&&(x={});var R=x.timeZoneName||"short",b=h+"|"+R,A=e[b];return A||(A=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:h,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:R}),e[b]=A),A}(d,g);return m.formatToParts(p)},s=function(l,d){for(var g=i(l,d),p=[],m=0;m<g.length;m+=1){var h=g[m],x=h.type,R=h.value,b=t[x];b>=0&&(p[b]=parseInt(R,10))}var A=p[3],E=A===24?0:A,Q=p[0]+"-"+p[1]+"-"+p[2]+" "+E+":"+p[4]+":"+p[5]+":000",X=+l;return(o.utc(Q).valueOf()-(X-=X%1e3))/6e4},u=a.prototype;u.tz=function(l,d){l===void 0&&(l=n);var g=this.utcOffset(),p=this.toDate(),m=p.toLocaleString("en-US",{timeZone:l}),h=Math.round((p-new Date(m))/1e3/60),x=o(m,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(p.getTimezoneOffset()/15)-h,!0);if(d){var R=x.utcOffset();x=x.add(g-R,"minute")}return x.$x.$timezone=l,x},u.offsetName=function(l){var d=this.$x.$timezone||o.tz.guess(),g=i(this.valueOf(),d,{timeZoneName:l}).find(function(p){return p.type.toLowerCase()==="timezonename"});return g&&g.value};var c=u.startOf;u.startOf=function(l,d){if(!this.$x||!this.$x.$timezone)return c.call(this,l,d);var g=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(g,l,d).tz(this.$x.$timezone,!0)},o.tz=function(l,d,g){var p=g&&d,m=g||d||n,h=s(+o(),m);if(typeof l!="string")return o(l).tz(m);var x=function(E,Q,X){var ee=E-60*Q*1e3,Y=s(ee,X);if(Q===Y)return[ee,Q];var _=s(ee-=60*(Y-Q)*1e3,X);return Y===_?[ee,Y]:[E-60*Math.min(Y,_)*1e3,Math.max(Y,_)]}(o.utc(l,p).valueOf(),h,m),R=x[0],b=x[1],A=o(R).utcOffset(b);return A.$x.$timezone=m,A},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(l){n=l}}})});var $h=le((yd,Cd)=>{(function(t,e){typeof yd=="object"&&typeof Cd!="undefined"?Cd.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_utc=e()})(yd,function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(a,o,n){var i=o.prototype;n.utc=function(p){var m={date:p,utc:!0,args:arguments};return new o(m)},i.utc=function(p){var m=n(this.toDate(),{locale:this.$L,utc:!0});return p?m.add(this.utcOffset(),t):m},i.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),s.call(this,p)};var u=i.init;i.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else u.call(this)};var c=i.utcOffset;i.utcOffset=function(p,m){var h=this.$utils().u;if(h(p))return this.$u?0:h(this.$offset)?c.call(this):this.$offset;if(typeof p=="string"&&(p=function(A){A===void 0&&(A="");var E=A.match(e);if(!E)return null;var Q=(""+E[0]).match(r)||["-",0,0],X=Q[0],ee=60*+Q[1]+ +Q[2];return ee===0?0:X==="+"?ee:-ee}(p),p===null))return this;var x=Math.abs(p)<=16?60*p:p,R=this;if(m)return R.$offset=x,R.$u=p===0,R;if(p!==0){var b=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(R=this.local().add(x+b,t)).$offset=x,R.$x.$localOffset=b}else R=this.utc();return R};var l=i.format;i.format=function(p){var m=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,m)},i.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(p){return p==="s"&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var g=i.diff;i.diff=function(p,m,h){if(p&&this.$u===p.$u)return g.call(this,p,m,h);var x=this.local(),R=n(p).local();return g.call(x,R,m,h)}}})});var Xh=le((T0,Jh)=>{"use strict";function YR(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Jh.exports=KR;function KR(t,e,r){var a=r&&r.stringify||YR,o=1;if(typeof t=="object"&&t!==null){var n=e.length+o;if(n===1)return t;var i=new Array(n);i[0]=a(t);for(var s=1;s<n;s++)i[s]=a(e[s]);return i.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var c="",l=1-o,d=-1,g=t&&t.length||0,p=0;p<g;){if(t.charCodeAt(p)===37&&p+1<g){switch(d=d>-1?d:0,t.charCodeAt(p+1)){case 100:case 102:if(l>=u||e[l]==null)break;d<p&&(c+=t.slice(d,p)),c+=Number(e[l]),d=p+2,p++;break;case 105:if(l>=u||e[l]==null)break;d<p&&(c+=t.slice(d,p)),c+=Math.floor(Number(e[l])),d=p+2,p++;break;case 79:case 111:case 106:if(l>=u||e[l]===void 0)break;d<p&&(c+=t.slice(d,p));var m=typeof e[l];if(m==="string"){c+="'"+e[l]+"'",d=p+2,p++;break}if(m==="function"){c+=e[l].name||"<anonymous>",d=p+2,p++;break}c+=a(e[l]),d=p+2,p++;break;case 115:if(l>=u)break;d<p&&(c+=t.slice(d,p)),c+=String(e[l]),d=p+2,p++;break;case 37:d<p&&(c+=t.slice(d,p)),c+="%",d=p+2,p++,l--;break}++l}++p}return d===-1?t:(d<g&&(c+=t.slice(d)),c)}});var vn=le((D0,ys)=>{"use strict";var Zh=Xh();ys.exports=rr;var Cn=dA().console||{},JR={mapHttpRequest:Ss,mapHttpResponse:Ss,wrapRequestSerializer:Id,wrapResponseSerializer:Id,wrapErrorSerializer:Id,req:Ss,res:Ss,err:tS,errWithCause:tS};function gs(t,e){return t==="silent"?1/0:e.levels.values[t]}var Pd=Symbol("pino.logFuncs"),wd=Symbol("pino.hierarchy"),XR={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function eS(t,e){let r={logger:e,parent:t[wd]};e[wd]=r}function ZR(t,e,r){let a={};e.forEach(o=>{a[o]=r[o]?r[o]:Cn[o]||Cn[XR[o]||"log"]||xn}),t[Pd]=a}function eA(t,e){return Array.isArray(t)?t.filter(function(a){return a!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function rr(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||Cn;t.browser.write&&(t.browser.asObject=!0);let a=t.serializers||{},o=eA(t.browser.serialize,a),n=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(n=!1);let i=Object.keys(t.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(i);typeof r=="function"&&s.forEach(function(h){r[h]=r}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");let u=t.level||"info",c=Object.create(r);c.log||(c.log=xn),ZR(c,s,r),eS({},c),Object.defineProperty(c,"levelVal",{get:d}),Object.defineProperty(c,"level",{get:g,set:p});let l={transmit:e,serialize:o,asObject:t.browser.asObject,levels:s,timestamp:cA(t)};c.levels=tA(t),c.level=u,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=xn,c.serializers=a,c._serialize=o,c._stdErrSerialize=n,c.child=m,e&&(c._logEvent=Ed());function d(){return gs(this.level,this)}function g(){return this._level}function p(h){if(h!=="silent"&&!this.levels.values[h])throw Error("unknown level "+h);this._level=h,Zr(this,l,c,"error"),Zr(this,l,c,"fatal"),Zr(this,l,c,"warn"),Zr(this,l,c,"info"),Zr(this,l,c,"debug"),Zr(this,l,c,"trace"),i.forEach(x=>{Zr(this,l,c,x)})}function m(h,x){if(!h)throw new Error("missing bindings for child Pino");x=x||{},o&&h.serializers&&(x.serializers=h.serializers);let R=x.serializers;if(o&&R){var b=Object.assign({},a,R),A=t.browser.serialize===!0?Object.keys(b):o;delete h.serializers,hs([h],A,b,this._stdErrSerialize)}function E(X){this._childLevel=(X._childLevel|0)+1,this.bindings=h,b&&(this.serializers=b,this._serialize=A),e&&(this._logEvent=Ed([].concat(X._logEvent.bindings,h)))}E.prototype=this;let Q=new E(this);return eS(this,Q),Q.level=this.level,Q}return c}function tA(t){let e=t.customLevels||{},r=Object.assign({},rr.levels.values,e),a=Object.assign({},rr.levels.labels,rA(e));return{values:r,labels:a}}function rA(t){let e={};return Object.keys(t).forEach(function(r){e[t[r]]=r}),e}rr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};rr.stdSerializers=JR;rr.stdTimeFunctions=Object.assign({},{nullTime:rS,epochTime:aS,unixTime:uA,isoTime:lA});function aA(t){let e=[];t.bindings&&e.push(t.bindings);let r=t[wd];for(;r.parent;)r=r.parent,r.logger.bindings&&e.push(r.logger.bindings);return e.reverse()}function Zr(t,e,r,a){if(t[a]=gs(t.level,r)>gs(a,r)?xn:r[Pd][a],!e.transmit&&t[a]===xn)return;t[a]=nA(t,e,r,a);let o=aA(t);o.length!==0&&(t[a]=oA(o,t[a]))}function oA(t,e){return function(){return e.apply(this,[...t,...arguments])}}function nA(t,e,r,a){return function(o){return function(){let i=e.timestamp(),s=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Cn?Cn:this;for(var c=0;c<s.length;c++)s[c]=arguments[c];if(e.serialize&&!e.asObject&&hs(s,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?o.call(u,iA(this,a,s,i)):o.apply(u,s),e.transmit){let l=e.transmit.level||t._level,d=r.levels.values[l],g=r.levels.values[a];if(g<d)return;sA(this,{ts:i,methodLevel:a,methodValue:g,transmitLevel:l,transmitValue:r.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:gs(t._level,r)},s)}}}(t[Pd][a])}function iA(t,e,r,a){t._serialize&&hs(r,t._serialize,t.serializers,t._stdErrSerialize);let o=r.slice(),n=o[0],i={};a&&(i.time=a),i.level=t.levels.values[e];let s=(t._childLevel|0)+1;if(s<1&&(s=1),n!==null&&typeof n=="object"){for(;s--&&typeof o[0]=="object";)Object.assign(i,o.shift());n=o.length?Zh(o.shift(),o):void 0}else typeof n=="string"&&(n=Zh(o.shift(),o));return n!==void 0&&(i.msg=n),i}function hs(t,e,r,a){for(let o in t)if(a&&t[o]instanceof Error)t[o]=rr.stdSerializers.err(t[o]);else if(typeof t[o]=="object"&&!Array.isArray(t[o]))for(let n in t[o])e&&e.indexOf(n)>-1&&n in r&&(t[o][n]=r[n](t[o][n]))}function sA(t,e,r){let a=e.send,o=e.ts,n=e.methodLevel,i=e.methodValue,s=e.val,u=t._logEvent.bindings;hs(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=o,t._logEvent.messages=r.filter(function(c){return u.indexOf(c)===-1}),t._logEvent.level.label=n,t._logEvent.level.value=i,a(n,t._logEvent,s),t._logEvent=Ed(u)}function Ed(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function tS(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function cA(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?rS:aS}function Ss(){return{}}function Id(t){return t}function xn(){}function rS(){return!1}function aS(){return Date.now()}function uA(){return Math.round(Date.now()/1e3)}function lA(){return new Date(Date.now()).toISOString()}function dA(){function t(e){return typeof e!="undefined"&&e}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}ys.exports.default=rr;ys.exports.pino=rr});var sC=le((mxe,iC)=>{var zE="[object Object]";function YE(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function KE(t,e){return function(r){return t(e(r))}}var JE=Function.prototype,oC=Object.prototype,nC=JE.toString,XE=oC.hasOwnProperty,ZE=nC.call(Object),eI=oC.toString,tI=KE(Object.getPrototypeOf,Object);function rI(t){return!!t&&typeof t=="object"}function aI(t){if(!rI(t)||eI.call(t)!=zE||YE(t))return!1;var e=tI(t);if(e===null)return!0;var r=XE.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&nC.call(r)==ZE}iC.exports=aI});var cC=le(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.default=uI;var oI=Bo(),nI=sC(),iI=sI(nI);function sI(t){return t&&t.__esModule?t:{default:t}}function cI(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}var sf=function(e){return typeof e=="function"};function uI(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function a(){var n=[],i=[],s={getState:function(){return sf(r)?r(n):r},getActions:function(){return n},dispatch:function(c){if(!(0,iI.default)(c))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof c.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(c));n.push(c);for(var l=0;l<i.length;l++)i[l]();return c},clearActions:function(){n=[]},subscribe:function(c){return sf(c)&&i.push(c),function(){var l=i.indexOf(c);l<0||i.splice(l,1)}},replaceReducer:function(c){if(!sf(c))throw new Error("Expected the nextReducer to be a function.")}};return s}var o=oI.applyMiddleware.apply(void 0,cI(t))(a);return o()}}});lf(exports,{SortBy:()=>Ie,SortDirection:()=>la,buildCart:()=>xC,buildCommerceEngine:()=>pC,buildContext:()=>gC,buildController:()=>z,buildFieldsSortCriterion:()=>ep,buildInteractiveResult:()=>CC,buildProductListing:()=>hC,buildProductListingFacet:()=>hu,buildProductListingFacetGenerator:()=>IC,buildProductListingPagination:()=>SC,buildRelevanceSortCriterion:()=>sr,buildSearch:()=>kC,buildSort:()=>vC,loadConfigurationActions:()=>LE,loadProductListingActions:()=>vI,loadProductListingAnalyticsActions:()=>FI,loadSearchAnalyticsActions:()=>jE});var Ao=()=>global.crypto,Sa=()=>{typeof window=="undefined"&&(Ao()||(global.crypto=require("crypto")),!Ao().getRandomValues&&Ao().webcrypto&&(global.crypto.getRandomValues=Ao().webcrypto.getRandomValues.bind(Ao().webcrypto)))};var Of=Fe(pf()),qf=Fe(xf());var L=new Error("Failed to load reducers."),Eo=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},ya=class extends Error{constructor(e,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=r!=null?r:0}};var Pf=Fe(wu());function ri(t){return Array.isArray(t)}function wf(t,e){return[...t.reduce((r,a)=>{let o=e(a);return r.has(o)||r.set(o,a),r},new Map).values()]}function gx(t){return(typeof btoa!="undefined"?btoa:Pf.btoa)(encodeURI(t))}function ai(t){return gx(JSON.stringify(t))}var hx=new Set(["1",1,"yes",!0]);function oi(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;let t=navigator,e=window;return[t.globalPrivacyControl,t.doNotTrack,t.msDoNotTrack,e.doNotTrack].some(r=>hx.has(r))}function Ef(t){let e={};for(let[r,a]of t)e[r]=a;return e}function Ca(t){if(typeof t!="object"||!t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}function If(t){let e=[];for(let r in t){let a=encodeURIComponent(r),o=encodeURIComponent(t[r]);e.push(`${a}=${o}`)}return e.join("&")}function kf(t){return typeof t!="object"||!t?!1:Object.values(t).every(Sx)}function Sx(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function Tf(t){return t===429}var dr=class{static async call(e){let r=yx(e),{logger:a}=e,o=await dr.preprocessRequest(r,e);a.info(o,"Platform request");let{url:n,...i}=o,s=async()=>{let u=await(0,Of.default)(n,i);if(Tf(u.status))throw u;return u};try{let u=await(0,qf.backOff)(s,{retry:c=>{let l=c&&Tf(c.status);return l&&a.info("Platform retrying request"),l}});if(u.status===419)throw a.info("Platform renewing token"),new Eo;if(u.status===404)throw new ya(n,u.status);return a.info({response:u,requestInfo:o},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new ya(n):u}}static async preprocessRequest(e,r){let{origin:a,preprocessRequest:o,logger:n,requestMetadata:i}=r,{signal:s,...u}=e,c=Ca(u);try{let l=await o(e,a,i);return{...e,...l}}catch(l){n.error(l,"Platform request preprocessing failed. Returning default request options.")}return c}};function Df(t,e){let r=!e||!e.environment||e.environment==="prod"?"":e.environment,a=!e||!e.region||e.region==="us"?"":`-${e.region}`;return`https://${t}${r}${a}.cloud.coveo.com`}function xa(t,e="prod"){let r=e==="prod"?"":e,a=`https://${t}.org${r}.coveo.com`,o=`https://${t}.analytics.org${r}.coveo.com`,n=`${a}/rest/search/v2`,i=`https://${t}.admin.org${r}.coveo.com`;return{platform:a,analytics:o,search:n,admin:i}}function Io(t){return(t==null?void 0:t.multiRegionSubDomain)?`https://${t.multiRegionSubDomain}.org.coveo.com`:Df("platform",t)}function ni(t){return Df("analytics",t)}function yx(t){let{url:e,method:r,requestParams:a,contentType:o,accessToken:n,signal:i}=t,s=t.method==="POST"||t.method==="PUT",u=Cx(a,o);return{url:e,method:r,headers:{"Content-Type":o,Authorization:`Bearer ${n}`,...t.headers},...s&&{body:u},signal:i}}function Cx(t,e){return e==="application/x-www-form-urlencoded"?kf(t)?If(t):"":JSON.stringify(t)}function xx(t){return{statusCode:t.statusCode,type:t.name,message:t.message}}function vx(t){return{statusCode:t.code,type:t.name,message:t.message,ignored:!0}}function ii(t,e){if(e&&t.name==="AbortError")return{error:vx(t)};if(t instanceof ya)return{error:xx(t)};throw t}var Eu=(t,e)=>({...bx(t,e),requestParams:Fx(t)}),Fx=t=>{let{trackingId:e,clientId:r,context:a,language:o,country:n,currency:i,page:s,facets:u,sort:c}=t;return{trackingId:e,clientId:r,context:a,language:o,country:n,currency:i,page:s,facets:u,sort:c}},bx=(t,e)=>{let{url:r,organizationId:a,accessToken:o}=t,n=`${r}/rest/organizations/${a}/commerce/v2/${e}`;return{accessToken:o,method:"POST",contentType:"application/json",url:n,origin:"commerceApiFetch"}};var Iu=class{constructor(e){this.options=e}async getProductListing(e){return this.query({...Eu(e,"listing"),...this.options})}async search(e){let r=Eu(e,"search");return this.query({...r,requestParams:{...r.requestParams,query:e==null?void 0:e.query},...this.options})}async query(e){let r=await dr.call(e);if(r instanceof Error)return ii(r);let a=await r.json();return r.ok?{success:a}:{error:a}}};var Dr=t=>t;var f={};lf(f,{EnhancerArray:()=>hm,MiddlewareArray:()=>gm,SHOULD_AUTOBATCH:()=>cl,TaskAbortError:()=>Wo,addListener:()=>Hm,autoBatchEnhancer:()=>Hv,clearAllListeners:()=>Wm,configureStore:()=>el,createAction:()=>S,createActionCreatorInvariantMiddleware:()=>uv,createAsyncThunk:()=>K,createDraftSafeSelector:()=>Ut,createEntityAdapter:()=>Pv,createImmutableStateInvariantMiddleware:()=>mv,createListenerMiddleware:()=>jv,createNextState:()=>mr,createReducer:()=>I,createSelector:()=>di,createSerializableStateInvariantMiddleware:()=>gv,createSlice:()=>xv,current:()=>Oo,findNonSerializableValue:()=>fi,freeze:()=>ko,getDefaultMiddleware:()=>bm,getType:()=>sv,isAction:()=>Ku,isActionCreator:()=>pm,isAllOf:()=>al,isAnyOf:()=>$o,isAsyncThunkAction:()=>Dm,isDraft:()=>Qe,isFluxStandardAction:()=>fm,isFulfilled:()=>Tm,isImmutableDefault:()=>Cm,isPending:()=>Om,isPlain:()=>Xu,isPlainObject:()=>pi,isRejected:()=>gi,isRejectedWithValue:()=>qm,miniSerializeError:()=>Em,nanoid:()=>tl,original:()=>Vf,prepareAutoBatched:()=>Uv,removeListener:()=>Gm,unwrapResult:()=>Im});function Ge(t){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];if(!1)var o,n;throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Qe(t){return!!t&&!!t[ge]}function st(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var o=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return o===Object||typeof o=="function"&&Function.toString.call(o)===kx}(t)||Array.isArray(t)||!!t[Wf]||!!((e=t.constructor)===null||e===void 0?void 0:e[Wf])||ku(t)||Ou(t))}function Vf(t){return Qe(t)||Ge(23,t),t[ge].t}function Vr(t,e,r){r===void 0&&(r=!1),va(t)===0?(r?Object.keys:ba)(t).forEach(function(a){r&&typeof a=="symbol"||e(a,t[a],t)}):t.forEach(function(a,o){return e(o,a,t)})}function va(t){var e=t[ge];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:ku(t)?2:Ou(t)?3:0}function Fa(t,e){return va(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Rx(t,e){return va(t)===2?t.get(e):t[e]}function Mf(t,e,r){var a=va(t);a===2?t.set(e,r):a===3?t.add(r):t[e]=r}function Lf(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function ku(t){return Ex&&t instanceof Map}function Ou(t){return Ix&&t instanceof Set}function pr(t){return t.o||t.t}function qu(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Gf(t);delete e[ge];for(var r=ba(e),a=0;a<r.length;a++){var o=r[a],n=e[o];n.writable===!1&&(n.writable=!0,n.configurable=!0),(n.get||n.set)&&(e[o]={configurable:!0,writable:!0,enumerable:n.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function ko(t,e){return e===void 0&&(e=!1),Tu(t)||Qe(t)||!st(t)||(va(t)>1&&(t.set=t.add=t.clear=t.delete=Ax),Object.freeze(t),e&&Vr(t,function(r,a){return ko(a,!0)},!0)),t}function Ax(){Ge(2)}function Tu(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function yt(t){var e=Uu[t];return e||Ge(18,t),e}function Px(t,e){Uu[t]||(Uu[t]=e)}function Du(){return qo}function Vu(t,e){e&&(yt("Patches"),t.u=[],t.s=[],t.v=e)}function si(t){Mu(t),t.p.forEach(wx),t.p=null}function Mu(t){t===qo&&(qo=t.l)}function Nf(t){return qo={p:[],l:qo,h:t,m:!0,_:0}}function wx(t){var e=t[ge];e.i===0||e.i===1?e.j():e.g=!0}function Lu(t,e){e._=e.p.length;var r=e.p[0],a=t!==void 0&&t!==r;return e.h.O||yt("ES5").S(e,t,a),a?(r[ge].P&&(si(e),Ge(4)),st(t)&&(t=ci(e,t),e.l||ui(e,t)),e.u&&yt("Patches").M(r[ge].t,t,e.u,e.s)):t=ci(e,r,[]),si(e),e.u&&e.v(e.u,e.s),t!==Hf?t:void 0}function ci(t,e,r){if(Tu(e))return e;var a=e[ge];if(!a)return Vr(e,function(s,u){return Qf(t,a,e,s,u,r)},!0),e;if(a.A!==t)return e;if(!a.P)return ui(t,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var o=a.i===4||a.i===5?a.o=qu(a.k):a.o,n=o,i=!1;a.i===3&&(n=new Set(o),o.clear(),i=!0),Vr(n,function(s,u){return Qf(t,a,o,s,u,r,i)}),ui(t,o,!1),r&&t.u&&yt("Patches").N(a,r,t.u,t.s)}return a.o}function Qf(t,e,r,a,o,n,i){if(Qe(o)){var s=ci(t,o,n&&e&&e.i!==3&&!Fa(e.R,a)?n.concat(a):void 0);if(Mf(r,a,s),!Qe(s))return;t.m=!1}else i&&r.add(o);if(st(o)&&!Tu(o)){if(!t.h.D&&t._<1)return;ci(t,o),e&&e.A.l||ui(t,o)}}function ui(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&ko(e,r)}function Nu(t,e){var r=t[ge];return(r?pr(r):t)[e]}function Bf(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var a=Object.getOwnPropertyDescriptor(r,e);if(a)return a;r=Object.getPrototypeOf(r)}}function fr(t){t.P||(t.P=!0,t.l&&fr(t.l))}function Qu(t){t.o||(t.o=qu(t.t))}function Bu(t,e,r){var a=ku(e)?yt("MapSet").F(e,r):Ou(e)?yt("MapSet").T(e,r):t.O?function(o,n){var i=Array.isArray(o),s={i:i?1:0,A:n?n.A:Du(),P:!1,I:!1,R:{},l:n,t:o,k:null,o:null,j:null,C:!1},u=s,c=To;i&&(u=[s],c=Do);var l=Proxy.revocable(u,c),d=l.revoke,g=l.proxy;return s.k=g,s.j=d,g}(e,r):yt("ES5").J(e,r);return(r?r.A:Du()).p.push(a),a}function Oo(t){return Qe(t)||Ge(22,t),function e(r){if(!st(r))return r;var a,o=r[ge],n=va(r);if(o){if(!o.P&&(o.i<4||!yt("ES5").K(o)))return o.t;o.I=!0,a=jf(r,n),o.I=!1}else a=jf(r,n);return Vr(a,function(i,s){o&&Rx(o.t,i)===s||Mf(a,i,e(s))}),n===3?new Set(a):a}(t)}function jf(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return qu(t)}function Uf(){function t(i,s){var u=n[i];return u?u.enumerable=s:n[i]=u={configurable:!0,enumerable:s,get:function(){var c=this[ge];return To.get(c,i)},set:function(c){var l=this[ge];To.set(l,i,c)}},u}function e(i){for(var s=i.length-1;s>=0;s--){var u=i[s][ge];if(!u.P)switch(u.i){case 5:a(u)&&fr(u);break;case 4:r(u)&&fr(u)}}}function r(i){for(var s=i.t,u=i.k,c=ba(u),l=c.length-1;l>=0;l--){var d=c[l];if(d!==ge){var g=s[d];if(g===void 0&&!Fa(s,d))return!0;var p=u[d],m=p&&p[ge];if(m?m.t!==g:!Lf(p,g))return!0}}var h=!!s[ge];return c.length!==ba(s).length+(h?0:1)}function a(i){var s=i.k;if(s.length!==i.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var c=0;c<s.length;c++)if(!s.hasOwnProperty(c))return!0;return!1}function o(i){i.g&&Ge(3,JSON.stringify(pr(i)))}var n={};Px("ES5",{J:function(i,s){var u=Array.isArray(i),c=function(d,g){if(d){for(var p=Array(g.length),m=0;m<g.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var h=Gf(g);delete h[ge];for(var x=ba(h),R=0;R<x.length;R++){var b=x[R];h[b]=t(b,d||!!h[b].enumerable)}return Object.create(Object.getPrototypeOf(g),h)}(u,i),l={i:u?5:4,A:s?s.A:Du(),P:!1,I:!1,R:{},l:s,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,ge,{value:l,writable:!0}),c},S:function(i,s,u){u?Qe(s)&&s[ge].A===i&&e(i.p):(i.u&&function c(l){if(l&&typeof l=="object"){var d=l[ge];if(d){var g=d.t,p=d.k,m=d.R,h=d.i;if(h===4)Vr(p,function(E){E!==ge&&(g[E]!==void 0||Fa(g,E)?m[E]||c(p[E]):(m[E]=!0,fr(d)))}),Vr(g,function(E){p[E]!==void 0||Fa(p,E)||(m[E]=!1,fr(d))});else if(h===5){if(a(d)&&(fr(d),m.length=!0),p.length<g.length)for(var x=p.length;x<g.length;x++)m[x]=!1;else for(var R=g.length;R<p.length;R++)m[R]=!0;for(var b=Math.min(p.length,g.length),A=0;A<b;A++)p.hasOwnProperty(A)||(m[A]=!0),m[A]===void 0&&c(p[A])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var _f,qo,ju=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",Ex=typeof Map!="undefined",Ix=typeof Set!="undefined",$f=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Hf=ju?Symbol.for("immer-nothing"):((_f={})["immer-nothing"]=!0,_f),Wf=ju?Symbol.for("immer-draftable"):"__$immer_draftable",ge=ju?Symbol.for("immer-state"):"__$immer_state",fk=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var kx=""+Object.prototype.constructor,ba=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Gf=Object.getOwnPropertyDescriptors||function(t){var e={};return ba(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},Uu={},To={get:function(t,e){if(e===ge)return t;var r=pr(t);if(!Fa(r,e))return function(o,n,i){var s,u=Bf(n,i);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(o.k):void 0}(t,r,e);var a=r[e];return t.I||!st(a)?a:a===Nu(t.t,e)?(Qu(t),t.o[e]=Bu(t.A.h,a,t)):a},has:function(t,e){return e in pr(t)},ownKeys:function(t){return Reflect.ownKeys(pr(t))},set:function(t,e,r){var a=Bf(pr(t),e);if(a==null?void 0:a.set)return a.set.call(t.k,r),!0;if(!t.P){var o=Nu(pr(t),e),n=o==null?void 0:o[ge];if(n&&n.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(Lf(r,o)&&(r!==void 0||Fa(t.t,e)))return!0;Qu(t),fr(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Nu(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Qu(t),fr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=pr(t),a=Reflect.getOwnPropertyDescriptor(r,e);return a&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:a.enumerable,value:r[e]}},defineProperty:function(){Ge(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Ge(12)}},Do={};Vr(To,function(t,e){Do[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Do.deleteProperty=function(t,e){return Do.set.call(this,t,e,void 0)},Do.set=function(t,e,r){return To.set.call(this,t[0],e,r,t[0])};var Ox=function(){function t(r){var a=this;this.O=$f,this.D=!0,this.produce=function(o,n,i){if(typeof o=="function"&&typeof n!="function"){var s=n;n=o;var u=a;return function(h){var x=this;h===void 0&&(h=s);for(var R=arguments.length,b=Array(R>1?R-1:0),A=1;A<R;A++)b[A-1]=arguments[A];return u.produce(h,function(E){var Q;return(Q=n).call.apply(Q,[x,E].concat(b))})}}var c;if(typeof n!="function"&&Ge(6),i!==void 0&&typeof i!="function"&&Ge(7),st(o)){var l=Nf(a),d=Bu(a,o,void 0),g=!0;try{c=n(d),g=!1}finally{g?si(l):Mu(l)}return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(h){return Vu(l,i),Lu(h,l)},function(h){throw si(l),h}):(Vu(l,i),Lu(c,l))}if(!o||typeof o!="object"){if((c=n(o))===void 0&&(c=o),c===Hf&&(c=void 0),a.D&&ko(c,!0),i){var p=[],m=[];yt("Patches").M(o,c,p,m),i(p,m)}return c}Ge(21,o)},this.produceWithPatches=function(o,n){if(typeof o=="function")return function(c){for(var l=arguments.length,d=Array(l>1?l-1:0),g=1;g<l;g++)d[g-1]=arguments[g];return a.produceWithPatches(c,function(p){return o.apply(void 0,[p].concat(d))})};var i,s,u=a.produce(o,n,function(c,l){i=c,s=l});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(c){return[c,i,s]}):[u,i,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){st(r)||Ge(8),Qe(r)&&(r=Oo(r));var a=Nf(this),o=Bu(this,r,void 0);return o[ge].C=!0,Mu(a),o},e.finishDraft=function(r,a){var o=r&&r[ge],n=o.A;return Vu(n,a),Lu(void 0,n)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!$f&&Ge(20),this.O=r},e.applyPatches=function(r,a){var o;for(o=a.length-1;o>=0;o--){var n=a[o];if(n.path.length===0&&n.op==="replace"){r=n.value;break}}o>-1&&(a=a.slice(o+1));var i=yt("Patches").$;return Qe(r)?i(r,a):this.produce(r,function(s){return i(s,a)})},t}(),ze=new Ox,qx=ze.produce,mk=ze.produceWithPatches.bind(ze),gk=ze.setAutoFreeze.bind(ze),hk=ze.setUseProxies.bind(ze),Sk=ze.applyPatches.bind(ze),yk=ze.createDraft.bind(ze),Ck=ze.finishDraft.bind(ze),mr=qx;F(f,Fe(Bo()));var li="NOT_FOUND";function Yx(t){var e;return{get:function(a){return e&&t(e.key,a)?e.value:li},put:function(a,o){e={key:a,value:o}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function Kx(t,e){var r=[];function a(s){var u=r.findIndex(function(l){return e(s,l.key)});if(u>-1){var c=r[u];return u>0&&(r.splice(u,1),r.unshift(c)),c.value}return li}function o(s,u){a(s)===li&&(r.unshift({key:s,value:u}),r.length>t&&r.pop())}function n(){return r}function i(){r=[]}return{get:a,put:o,getEntries:n,clear:i}}var om=function(e,r){return e===r};function Jx(t){return function(r,a){if(r===null||a===null||r.length!==a.length)return!1;for(var o=r.length,n=0;n<o;n++)if(!t(r[n],a[n]))return!1;return!0}}function nm(t,e){var r=typeof e=="object"?e:{equalityCheck:e},a=r.equalityCheck,o=a===void 0?om:a,n=r.maxSize,i=n===void 0?1:n,s=r.resultEqualityCheck,u=Jx(o),c=i===1?Yx(u):Kx(i,u);function l(){var d=c.get(arguments);if(d===li){if(d=t.apply(null,arguments),s){var g=c.getEntries(),p=g.find(function(m){return s(m.value,d)});p&&(d=p.value)}c.put(arguments,d)}return d}return l.clearCache=function(){return c.clear()},l}function Xx(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(a){return typeof a=="function"})){var r=e.map(function(a){return typeof a=="function"?"function "+(a.name||"unnamed")+"()":typeof a}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return e}function Zx(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];var o=function(){for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];var c=0,l,d={memoizeOptions:void 0},g=s.pop();if(typeof g=="object"&&(d=g,g=s.pop()),typeof g!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof g+"]");var p=d,m=p.memoizeOptions,h=m===void 0?r:m,x=Array.isArray(h)?h:[h],R=Xx(s),b=t.apply(void 0,[function(){return c++,g.apply(null,arguments)}].concat(x)),A=t(function(){for(var Q=[],X=R.length,ee=0;ee<X;ee++)Q.push(R[ee].apply(null,arguments));return l=b.apply(null,Q),l});return Object.assign(A,{resultFunc:g,memoizedResultFunc:b,dependencies:R,lastResult:function(){return l},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),A};return o}var di=Zx(nm);var hr=Fe(Bo()),Yu=Fe(Bo());function im(t){var e=function(a){var o=a.dispatch,n=a.getState;return function(i){return function(s){return typeof s=="function"?s(o,n,t):i(s)}}};return e}var sm=im();sm.withExtraArgument=im;var Gu=sm;var cm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),jo=function(t,e){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,o,n,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,o&&(n=c[0]&2?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){r.label=c[1];break}if(c[0]===6&&r.label<n[1]){r.label=n[1],n=c;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(c);break}n[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],o=0}finally{a=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},gr=function(t,e){for(var r=0,a=e.length,o=t.length;r<a;r++,o++)t[o]=e[r];return t},ev=Object.defineProperty,tv=Object.defineProperties,rv=Object.getOwnPropertyDescriptors,um=Object.getOwnPropertySymbols,av=Object.prototype.hasOwnProperty,ov=Object.prototype.propertyIsEnumerable,lm=function(t,e,r){return e in t?ev(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},_e=function(t,e){for(var r in e||(e={}))av.call(e,r)&&lm(t,r,e[r]);if(um)for(var a=0,o=um(e);a<o.length;a++){var r=o[a];ov.call(e,r)&&lm(t,r,e[r])}return t},zu=function(t,e){return tv(t,rv(e))},Uo=function(t,e,r){return new Promise(function(a,o){var n=function(u){try{s(r.next(u))}catch(c){o(c)}},i=function(u){try{s(r.throw(u))}catch(c){o(c)}},s=function(u){return u.done?a(u.value):Promise.resolve(u.value).then(n,i)};s((r=r.apply(t,e)).next())})},Ut=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=di.apply(void 0,t),a=function(o){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return r.apply(void 0,gr([Qe(o)?Oo(o):o],n))};return a},nv=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yu.compose:Yu.compose.apply(null,arguments)},Mk=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(t){return t}};function pi(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}var dm=function(t){return t&&typeof t.match=="function"};function S(t,e){function r(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(e){var n=e.apply(void 0,a);if(!n)throw new Error("prepareAction did not return an object");return _e(_e({type:t,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:t,payload:a[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(a){return a.type===t},r}function Ku(t){return pi(t)&&"type"in t}function pm(t){return typeof t=="function"&&"type"in t&&dm(t)}function fm(t){return Ku(t)&&typeof t.type=="string"&&Object.keys(t).every(iv)}function iv(t){return["type","payload","error","meta"].indexOf(t)>-1}function sv(t){return""+t}function cv(t){var e=t?(""+t).split("/"):[],r=e[e.length-1]||"actionCreator";return'Detected an action creator with type "'+(t||"unknown")+`" being dispatched. 
Make sure you're calling the action creator before dispatching, i.e. \`dispatch(`+r+"())` instead of `dispatch("+r+")`. This is necessary even if the action has no payload."}function uv(t){return t===void 0&&(t={}),function(){return function(a){return function(o){return a(o)}}};var e=t.isActionCreator,r=e===void 0?pm:e;return function(){return function(a){return function(o){return r(o)&&console.warn(cv(o.type)),a(o)}}}}function mm(t,e){var r=0;return{measureTime:function(a){var o=Date.now();try{return a()}finally{var n=Date.now();r+=n-o}},warnIfExceeded:function(){r>t&&console.warn(e+" took "+r+"ms, which is more than the warning threshold of "+t+`ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var gm=function(t){cm(e,t);function e(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var o=t.apply(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,gr([void 0],r[0].concat(this)))):new(e.bind.apply(e,gr([void 0],r.concat(this))))},e}(Array),hm=function(t){cm(e,t);function e(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var o=t.apply(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,gr([void 0],r[0].concat(this)))):new(e.bind.apply(e,gr([void 0],r.concat(this))))},e}(Array);function Ju(t){return st(t)?mr(t,function(){}):t}var lv=!0,Sm="Invariant failed";function ym(t,e){if(!t)throw lv?new Error(Sm):new Error(Sm+": "+(e||""))}function dv(t,e,r,a){return JSON.stringify(t,pv(e,a),r)}function pv(t,e){var r=[],a=[];return e||(e=function(o,n){return r[0]===n?"[Circular ~]":"[Circular ~."+a.slice(0,r.indexOf(n)).join(".")+"]"}),function(o,n){if(r.length>0){var i=r.indexOf(this);~i?r.splice(i+1):r.push(this),~i?a.splice(i,1/0,o):a.push(o),~r.indexOf(n)&&(n=e.call(this,o,n))}else r.push(n);return t==null?n:t.call(this,o,n)}}function Cm(t){return typeof t!="object"||t==null||Object.isFrozen(t)}function fv(t,e,r){var a=xm(t,e,r);return{detectMutations:function(){return vm(t,e,a,r)}}}function xm(t,e,r,a,o){e===void 0&&(e=[]),a===void 0&&(a=""),o===void 0&&(o=new Set);var n={value:r};if(!t(r)&&!o.has(r)){o.add(r),n.children={};for(var i in r){var s=a?a+"."+i:i;e.length&&e.indexOf(s)!==-1||(n.children[i]=xm(t,e,r[i],s))}}return n}function vm(t,e,r,a,o,n){e===void 0&&(e=[]),o===void 0&&(o=!1),n===void 0&&(n="");var i=r?r.value:void 0,s=i===a;if(o&&!s&&!Number.isNaN(a))return{wasMutated:!0,path:n};if(t(i)||t(a))return{wasMutated:!1};var u={};for(var c in r.children)u[c]=!0;for(var c in a)u[c]=!0;var l=e.length>0,d=function(p){var m=n?n+"."+p:p;if(l){var h=e.some(function(R){return R instanceof RegExp?R.test(m):m===R});if(h)return"continue"}var x=vm(t,e,r.children[p],a[p],s,m);if(x.wasMutated)return{value:x}};for(var c in u){var g=d(c);if(typeof g=="object")return g.value}return{wasMutated:!1}}function mv(t){return t===void 0&&(t={}),function(){return function(u){return function(c){return u(c)}}};var e=t.isImmutable,r=e===void 0?Cm:e,a=t.ignoredPaths,o=t.warnAfter,n=o===void 0?32:o,i=t.ignore;a=a||i;var s=fv.bind(null,r,a);return function(u){var c=u.getState,l=c(),d=s(l),g;return function(p){return function(m){var h=mm(n,"ImmutableStateInvariantMiddleware");h.measureTime(function(){l=c(),g=d.detectMutations(),d=s(l),ym(!g.wasMutated,"A state mutation was detected between dispatches, in the path '"+(g.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")});var x=p(m);return h.measureTime(function(){l=c(),g=d.detectMutations(),d=s(l),g.wasMutated&&ym(!g.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(g.path||"")+". Take a look at the reducer(s) handling the action "+dv(m)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}),h.warnIfExceeded(),x}}}}function Xu(t){var e=typeof t;return t==null||e==="string"||e==="boolean"||e==="number"||Array.isArray(t)||pi(t)}function fi(t,e,r,a,o,n){e===void 0&&(e=""),r===void 0&&(r=Xu),o===void 0&&(o=[]);var i;if(!r(t))return{keyPath:e||"<root>",value:t};if(typeof t!="object"||t===null||(n==null?void 0:n.has(t)))return!1;for(var s=a!=null?a(t):Object.entries(t),u=o.length>0,c=function(x,R){var b=e?e+"."+x:x;if(u){var A=o.some(function(E){return E instanceof RegExp?E.test(b):b===E});if(A)return"continue"}if(!r(R))return{value:{keyPath:b,value:R}};if(typeof R=="object"&&(i=fi(R,b,r,a,o,n),i))return{value:i}},l=0,d=s;l<d.length;l++){var g=d[l],p=g[0],m=g[1],h=c(p,m);if(typeof h=="object")return h.value}return n&&Fm(t)&&n.add(t),!1}function Fm(t){if(!Object.isFrozen(t))return!1;for(var e=0,r=Object.values(t);e<r.length;e++){var a=r[e];if(!(typeof a!="object"||a===null)&&!Fm(a))return!1}return!0}function gv(t){return t===void 0&&(t={}),function(){return function(A){return function(E){return A(E)}}};var e=t.isSerializable,r=e===void 0?Xu:e,a=t.getEntries,o=t.ignoredActions,n=o===void 0?[]:o,i=t.ignoredActionPaths,s=i===void 0?["meta.arg","meta.baseQueryMeta"]:i,u=t.ignoredPaths,c=u===void 0?[]:u,l=t.warnAfter,d=l===void 0?32:l,g=t.ignoreState,p=g===void 0?!1:g,m=t.ignoreActions,h=m===void 0?!1:m,x=t.disableCache,R=x===void 0?!1:x,b=!R&&WeakSet?new WeakSet:void 0;return function(A){return function(E){return function(Q){var X=E(Q),ee=mm(d,"SerializableStateInvariantMiddleware");return!h&&!(n.length&&n.indexOf(Q.type)!==-1)&&ee.measureTime(function(){var Y=fi(Q,"",r,a,s,b);if(Y){var _=Y.keyPath,Se=Y.value;console.error("A non-serializable value was detected in an action, in the path: `"+_+"`. Value:",Se,`
Take a look at the logic that dispatched this action: `,Q,`
(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)`,`
(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)`)}}),p||(ee.measureTime(function(){var Y=A.getState(),_=fi(Y,"",r,a,c,b);if(_){var Se=_.keyPath,xe=_.value;console.error("A non-serializable value was detected in the state, in the path: `"+Se+"`. Value:",xe,`
Take a look at the reducer(s) handling this action type: `+Q.type+`.
(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`)}}),ee.warnIfExceeded()),X}}}}function hv(t){return typeof t=="boolean"}function Sv(){return function(e){return bm(e)}}function bm(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e,a=t.immutableCheck,o=a===void 0?!0:a,n=t.serializableCheck,i=n===void 0?!0:n,s=t.actionCreatorCheck,u=s===void 0?!0:s,c=new gm;if(r&&(hv(r)?c.push(Gu):c.push(Gu.withExtraArgument(r.extraArgument))),!1){if(o)var l;if(i)var d;if(u)var g}return c}var Zu=!0;function el(t){var e=Sv(),r=t||{},a=r.reducer,o=a===void 0?void 0:a,n=r.middleware,i=n===void 0?e():n,s=r.devTools,u=s===void 0?!0:s,c=r.preloadedState,l=c===void 0?void 0:c,d=r.enhancers,g=d===void 0?void 0:d,p;if(typeof o=="function")p=o;else if(pi(o))p=(0,hr.combineReducers)(o);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=i;if(typeof m=="function"&&(m=m(e),!Zu&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!Zu&&m.some(function(E){return typeof E!="function"}))throw new Error("each middleware provided to configureStore must be a function");var h=hr.applyMiddleware.apply(void 0,m),x=hr.compose;u&&(x=nv(_e({trace:!Zu},typeof u=="object"&&u)));var R=new hm(h),b=R;Array.isArray(g)?b=gr([h],g):typeof g=="function"&&(b=g(R));var A=x.apply(void 0,b);return(0,hr.createStore)(p,l,A)}function Rm(t){var e={},r=[],a,o={addCase:function(n,i){var s=typeof n=="string"?n:n.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[s]=i,o},addMatcher:function(n,i){return r.push({matcher:n,reducer:i}),o},addDefaultCase:function(n){return a=n,o}};return t(o),[e,r,a]}function yv(t){return typeof t=="function"}function I(t,e,r,a){r===void 0&&(r=[]);var o=typeof e=="function"?Rm(e):[e,r,a],n=o[0],i=o[1],s=o[2],u;if(yv(t))u=function(){return Ju(t())};else{var c=Ju(t);u=function(){return c}}function l(d,g){d===void 0&&(d=u());var p=gr([n[g.type]],i.filter(function(m){var h=m.matcher;return h(g)}).map(function(m){var h=m.reducer;return h}));return p.filter(function(m){return!!m}).length===0&&(p=[s]),p.reduce(function(m,h){if(h)if(Qe(m)){var x=m,R=h(x,g);return R===void 0?m:R}else{if(st(m))return mr(m,function(b){return h(b,g)});var R=h(m,g);if(R===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return R}return m},d)}return l.getInitialState=u,l}function Cv(t,e){return t+"/"+e}function xv(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var r=typeof t.initialState=="function"?t.initialState:Ju(t.initialState),a=t.reducers||{},o=Object.keys(a),n={},i={},s={};o.forEach(function(l){var d=a[l],g=Cv(e,l),p,m;"reducer"in d?(p=d.reducer,m=d.prepare):p=d,n[l]=p,i[g]=p,s[l]=m?S(g,m):S(g)});function u(){var l=typeof t.extraReducers=="function"?Rm(t.extraReducers):[t.extraReducers],d=l[0],g=d===void 0?{}:d,p=l[1],m=p===void 0?[]:p,h=l[2],x=h===void 0?void 0:h,R=_e(_e({},g),i);return I(r,function(b){for(var A in R)b.addCase(A,R[A]);for(var E=0,Q=m;E<Q.length;E++){var X=Q[E];b.addMatcher(X.matcher,X.reducer)}x&&b.addDefaultCase(x)})}var c;return{name:e,reducer:function(l,d){return c||(c=u()),c(l,d)},actions:s,caseReducers:n,getInitialState:function(){return c||(c=u()),c.getInitialState()}}}function vv(){return{ids:[],entities:{}}}function Fv(){function t(e){return e===void 0&&(e={}),Object.assign(vv(),e)}return{getInitialState:t}}function bv(){function t(e){var r=function(c){return c.ids},a=function(c){return c.entities},o=Ut(r,a,function(c,l){return c.map(function(d){return l[d]})}),n=function(c,l){return l},i=function(c,l){return c[l]},s=Ut(r,function(c){return c.length});if(!e)return{selectIds:r,selectEntities:a,selectAll:o,selectTotal:s,selectById:Ut(a,n,i)};var u=Ut(e,a);return{selectIds:Ut(e,r),selectEntities:u,selectAll:Ut(e,o),selectTotal:Ut(e,s),selectById:Ut(u,n,i)}}return{getSelectors:t}}function Rv(t){var e=Ce(function(r,a){return t(a)});return function(a){return e(a,void 0)}}function Ce(t){return function(r,a){function o(i){return fm(i)}var n=function(i){o(a)?t(a.payload,i):t(a,i)};return Qe(r)?(n(r),r):mr(r,n)}}function _o(t,e){var r=e(t);return r}function Mr(t){return Array.isArray(t)||(t=Object.values(t)),t}function Am(t,e,r){t=Mr(t);for(var a=[],o=[],n=0,i=t;n<i.length;n++){var s=i[n],u=_o(s,e);u in r.entities?o.push({id:u,changes:s}):a.push(s)}return[a,o]}function Pm(t){function e(m,h){var x=_o(m,t);x in h.entities||(h.ids.push(x),h.entities[x]=m)}function r(m,h){m=Mr(m);for(var x=0,R=m;x<R.length;x++){var b=R[x];e(b,h)}}function a(m,h){var x=_o(m,t);x in h.entities||h.ids.push(x),h.entities[x]=m}function o(m,h){m=Mr(m);for(var x=0,R=m;x<R.length;x++){var b=R[x];a(b,h)}}function n(m,h){m=Mr(m),h.ids=[],h.entities={},r(m,h)}function i(m,h){return s([m],h)}function s(m,h){var x=!1;m.forEach(function(R){R in h.entities&&(delete h.entities[R],x=!0)}),x&&(h.ids=h.ids.filter(function(R){return R in h.entities}))}function u(m){Object.assign(m,{ids:[],entities:{}})}function c(m,h,x){var R=x.entities[h.id],b=Object.assign({},R,h.changes),A=_o(b,t),E=A!==h.id;return E&&(m[h.id]=A,delete x.entities[h.id]),x.entities[A]=b,E}function l(m,h){return d([m],h)}function d(m,h){var x={},R={};m.forEach(function(E){E.id in h.entities&&(R[E.id]={id:E.id,changes:_e(_e({},R[E.id]?R[E.id].changes:null),E.changes)})}),m=Object.values(R);var b=m.length>0;if(b){var A=m.filter(function(E){return c(x,E,h)}).length>0;A&&(h.ids=Object.keys(h.entities))}}function g(m,h){return p([m],h)}function p(m,h){var x=Am(m,t,h),R=x[0],b=x[1];d(b,h),r(R,h)}return{removeAll:Rv(u),addOne:Ce(e),addMany:Ce(r),setOne:Ce(a),setMany:Ce(o),setAll:Ce(n),updateOne:Ce(l),updateMany:Ce(d),upsertOne:Ce(g),upsertMany:Ce(p),removeOne:Ce(i),removeMany:Ce(s)}}function Av(t,e){var r=Pm(t),a=r.removeOne,o=r.removeMany,n=r.removeAll;function i(b,A){return s([b],A)}function s(b,A){b=Mr(b);var E=b.filter(function(Q){return!(_o(Q,t)in A.entities)});E.length!==0&&x(E,A)}function u(b,A){return c([b],A)}function c(b,A){b=Mr(b),b.length!==0&&x(b,A)}function l(b,A){b=Mr(b),A.entities={},A.ids=[],s(b,A)}function d(b,A){return g([b],A)}function g(b,A){for(var E=!1,Q=0,X=b;Q<X.length;Q++){var ee=X[Q],Y=A.entities[ee.id];if(!!Y){E=!0,Object.assign(Y,ee.changes);var _=t(Y);ee.id!==_&&(delete A.entities[ee.id],A.entities[_]=Y)}}E&&R(A)}function p(b,A){return m([b],A)}function m(b,A){var E=Am(b,t,A),Q=E[0],X=E[1];g(X,A),s(Q,A)}function h(b,A){if(b.length!==A.length)return!1;for(var E=0;E<b.length&&E<A.length;E++)if(b[E]!==A[E])return!1;return!0}function x(b,A){b.forEach(function(E){A.entities[t(E)]=E}),R(A)}function R(b){var A=Object.values(b.entities);A.sort(e);var E=A.map(t),Q=b.ids;h(Q,E)||(b.ids=E)}return{removeOne:a,removeMany:o,removeAll:n,addOne:Ce(i),updateOne:Ce(d),upsertOne:Ce(p),setOne:Ce(u),setMany:Ce(c),setAll:Ce(l),addMany:Ce(s),updateMany:Ce(g),upsertMany:Ce(m)}}function Pv(t){t===void 0&&(t={});var e=_e({sortComparer:!1,selectId:function(s){return s.id}},t),r=e.selectId,a=e.sortComparer,o=Fv(),n=bv(),i=a?Av(r,a):Pm(r);return _e(_e(_e({selectId:r,sortComparer:a},o),n),i)}var wv="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tl=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=wv[Math.random()*64|0];return e},Ev=["name","message","stack","code"],rl=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),wm=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),Em=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,a=Ev;r<a.length;r++){var o=a[r];typeof t[o]=="string"&&(e[o]=t[o])}return e}return{message:String(t)}},K=function(){function t(e,r,a){var o=S(e+"/fulfilled",function(l,d,g,p){return{payload:l,meta:zu(_e({},p||{}),{arg:g,requestId:d,requestStatus:"fulfilled"})}}),n=S(e+"/pending",function(l,d,g){return{payload:void 0,meta:zu(_e({},g||{}),{arg:d,requestId:l,requestStatus:"pending"})}}),i=S(e+"/rejected",function(l,d,g,p,m){return{payload:p,error:(a&&a.serializeError||Em)(l||"Rejected"),meta:zu(_e({},m||{}),{arg:g,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=!1,u=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function c(l){return function(d,g,p){var m=(a==null?void 0:a.idGenerator)?a.idGenerator(l):tl(),h=new u,x,R=!1;function b(E){x=E,h.abort()}var A=function(){return Uo(this,null,function(){var E,Q,X,ee,Y,_,Se;return jo(this,function(xe){switch(xe.label){case 0:return xe.trys.push([0,4,,5]),ee=(E=a==null?void 0:a.condition)==null?void 0:E.call(a,l,{getState:g,extra:p}),Iv(ee)?[4,ee]:[3,2];case 1:ee=xe.sent(),xe.label=2;case 2:if(ee===!1||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return R=!0,Y=new Promise(function(B,T){return h.signal.addEventListener("abort",function(){return T({name:"AbortError",message:x||"Aborted"})})}),d(n(m,l,(Q=a==null?void 0:a.getPendingMeta)==null?void 0:Q.call(a,{requestId:m,arg:l},{getState:g,extra:p}))),[4,Promise.race([Y,Promise.resolve(r(l,{dispatch:d,getState:g,extra:p,requestId:m,signal:h.signal,abort:b,rejectWithValue:function(B,T){return new rl(B,T)},fulfillWithValue:function(B,T){return new wm(B,T)}})).then(function(B){if(B instanceof rl)throw B;return B instanceof wm?o(B.payload,m,l,B.meta):o(B,m,l)})])];case 3:return X=xe.sent(),[3,5];case 4:return _=xe.sent(),X=_ instanceof rl?i(null,m,l,_.payload,_.meta):i(_,m,l),[3,5];case 5:return Se=a&&!a.dispatchConditionRejection&&i.match(X)&&X.meta.condition,Se||d(X),[2,X]}})})}();return Object.assign(A,{abort:b,requestId:m,arg:l,unwrap:function(){return A.then(Im)}})}}return Object.assign(c,{pending:n,rejected:i,fulfilled:o,typePrefix:e})}return t.withTypes=function(){return t},t}();function Im(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Iv(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var km=function(t,e){return dm(t)?t.match(e):t(e)};function $o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return t.some(function(a){return km(a,r)})}}function al(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return t.every(function(a){return km(a,r)})}}function mi(t,e){if(!t||!t.meta)return!1;var r=typeof t.meta.requestId=="string",a=e.indexOf(t.meta.requestStatus)>-1;return r&&a}function Ho(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function Om(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?function(r){return mi(r,["pending"])}:Ho(t)?function(r){var a=t.map(function(n){return n.pending}),o=$o.apply(void 0,a);return o(r)}:Om()(t[0])}function gi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?function(r){return mi(r,["rejected"])}:Ho(t)?function(r){var a=t.map(function(n){return n.rejected}),o=$o.apply(void 0,a);return o(r)}:gi()(t[0])}function qm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(a){return a&&a.meta&&a.meta.rejectedWithValue};return t.length===0?function(a){var o=al(gi.apply(void 0,t),r);return o(a)}:Ho(t)?function(a){var o=al(gi.apply(void 0,t),r);return o(a)}:qm()(t[0])}function Tm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?function(r){return mi(r,["fulfilled"])}:Ho(t)?function(r){var a=t.map(function(n){return n.fulfilled}),o=$o.apply(void 0,a);return o(r)}:Tm()(t[0])}function Dm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?function(r){return mi(r,["pending","fulfilled","rejected"])}:Ho(t)?function(r){for(var a=[],o=0,n=t;o<n.length;o++){var i=n[o];a.push(i.pending,i.rejected,i.fulfilled)}var s=$o.apply(void 0,a);return s(r)}:Dm()(t[0])}var ol=function(t,e){if(typeof t!="function")throw new TypeError(e+" is not a function")},nl=function(){},Vm=function(t,e){return e===void 0&&(e=nl),t.catch(e),t},Mm=function(t,e){return t.addEventListener("abort",e,{once:!0}),function(){return t.removeEventListener("abort",e)}},Ra=function(t,e){var r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},kv="task",Lm="listener",Nm="completed",il="cancelled",Ov="task-"+il,qv="task-"+Nm,Qm=Lm+"-"+il,Tv=Lm+"-"+Nm,Wo=function(){function t(e){this.code=e,this.name="TaskAbortError",this.message=kv+" "+il+" (reason: "+e+")"}return t}(),Aa=function(t){if(t.aborted)throw new Wo(t.reason)};function Bm(t,e){var r=nl;return new Promise(function(a,o){var n=function(){return o(new Wo(t.reason))};if(t.aborted){n();return}r=Mm(t,n),e.finally(function(){return r()}).then(a,o)}).finally(function(){r=nl})}var Dv=function(t,e){return Uo(void 0,null,function(){var r,a;return jo(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return o.sent(),[4,t()];case 2:return r=o.sent(),[2,{status:"ok",value:r}];case 3:return a=o.sent(),[2,{status:a instanceof Wo?"cancelled":"rejected",error:a}];case 4:return e==null||e(),[7];case 5:return[2]}})})},hi=function(t){return function(e){return Vm(Bm(t,e).then(function(r){return Aa(t),r}))}},jm=function(t){var e=hi(t);return function(r){return e(new Promise(function(a){return setTimeout(a,r)}))}},Vv=Object.assign,Um={},Go="listenerMiddleware",Mv=function(t,e){var r=function(a){return Mm(t,function(){return Ra(a,t.reason)})};return function(a,o){ol(a,"taskExecutor");var n=new AbortController;r(n);var i=Dv(function(){return Uo(void 0,null,function(){var s;return jo(this,function(u){switch(u.label){case 0:return Aa(t),Aa(n.signal),[4,a({pause:hi(n.signal),delay:jm(n.signal),signal:n.signal})];case 1:return s=u.sent(),Aa(n.signal),[2,s]}})})},function(){return Ra(n,qv)});return(o==null?void 0:o.autoJoin)&&e.push(i),{result:hi(t)(i),cancel:function(){Ra(n,Ov)}}}},Lv=function(t,e){var r=function(a,o){return Uo(void 0,null,function(){var n,i,s,u;return jo(this,function(c){switch(c.label){case 0:Aa(e),n=function(){},i=new Promise(function(l,d){var g=t({predicate:a,effect:function(p,m){m.unsubscribe(),l([p,m.getState(),m.getOriginalState()])}});n=function(){g(),d()}}),s=[i],o!=null&&s.push(new Promise(function(l){return setTimeout(l,o,null)})),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,Bm(e,Promise.race(s))];case 2:return u=c.sent(),Aa(e),[2,u];case 3:return n(),[7];case 4:return[2]}})})};return function(a,o){return Vm(r(a,o))}},_m=function(t){var e=t.type,r=t.actionCreator,a=t.matcher,o=t.predicate,n=t.effect;if(e)o=S(e).match;else if(r)e=r.type,o=r.match;else if(a)o=a;else if(!o)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return ol(n,"options.listener"),{predicate:o,type:e,effect:n}},Nv=function(t){var e=_m(t),r=e.type,a=e.predicate,o=e.effect,n=tl(),i={id:n,effect:o,type:r,predicate:a,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return i},sl=function(t){t.pending.forEach(function(e){Ra(e,Qm)})},Qv=function(t){return function(){t.forEach(sl),t.clear()}},$m=function(t,e,r){try{t(e,r)}catch(a){setTimeout(function(){throw a},0)}},Hm=S(Go+"/add"),Wm=S(Go+"/removeAll"),Gm=S(Go+"/remove"),Bv=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,gr([Go+"/error"],t))};function jv(t){var e=this;t===void 0&&(t={});var r=new Map,a=t.extra,o=t.onError,n=o===void 0?Bv:o;ol(n,"onError");var i=function(p){return p.unsubscribe=function(){return r.delete(p.id)},r.set(p.id,p),function(m){p.unsubscribe(),(m==null?void 0:m.cancelActive)&&sl(p)}},s=function(p){for(var m=0,h=Array.from(r.values());m<h.length;m++){var x=h[m];if(p(x))return x}},u=function(p){var m=s(function(h){return h.effect===p.effect});return m||(m=Nv(p)),i(m)},c=function(p){var m=_m(p),h=m.type,x=m.effect,R=m.predicate,b=s(function(A){var E=typeof h=="string"?A.type===h:A.predicate===R;return E&&A.effect===x});return b&&(b.unsubscribe(),p.cancelActive&&sl(b)),!!b},l=function(p,m,h,x){return Uo(e,null,function(){var R,b,A,E;return jo(this,function(Q){switch(Q.label){case 0:R=new AbortController,b=Lv(u,R.signal),A=[],Q.label=1;case 1:return Q.trys.push([1,3,4,6]),p.pending.add(R),[4,Promise.resolve(p.effect(m,Vv({},h,{getOriginalState:x,condition:function(X,ee){return b(X,ee).then(Boolean)},take:b,delay:jm(R.signal),pause:hi(R.signal),extra:a,signal:R.signal,fork:Mv(R.signal,A),unsubscribe:p.unsubscribe,subscribe:function(){r.set(p.id,p)},cancelActiveListeners:function(){p.pending.forEach(function(X,ee,Y){X!==R&&(Ra(X,Qm),Y.delete(X))})}})))];case 2:return Q.sent(),[3,6];case 3:return E=Q.sent(),E instanceof Wo||$m(n,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(A)];case 5:return Q.sent(),Ra(R,Tv),p.pending.delete(R),[7];case 6:return[2]}})})},d=Qv(r),g=function(p){return function(m){return function(h){if(!Ku(h))return m(h);if(Hm.match(h))return u(h.payload);if(Wm.match(h)){d();return}if(Gm.match(h))return c(h.payload);var x=p.getState(),R=function(){if(x===Um)throw new Error(Go+": getOriginalState can only be called synchronously");return x},b;try{if(b=m(h),r.size>0)for(var A=p.getState(),E=Array.from(r.values()),Q=0,X=E;Q<X.length;Q++){var ee=X[Q],Y=!1;try{Y=ee.predicate(h,A,x)}catch(_){Y=!1,$m(n,_,{raisedBy:"predicate"})}!Y||l(ee,h,p,R)}}finally{x=Um}return b}}};return{middleware:g,startListening:u,stopListening:c,clearListeners:d}}var cl="RTK_autoBatch",Uv=function(){return function(t){var e;return{payload:t,meta:(e={},e[cl]=!0,e)}}},zm,_v=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis):function(t){return(zm||(zm=Promise.resolve())).then(t).catch(function(e){return setTimeout(function(){throw e},0)})},Ym=function(t){return function(e){setTimeout(e,t)}},$v=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:Ym(10),Hv=function(t){return t===void 0&&(t={type:"raf"}),function(e){return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var o=e.apply(void 0,r),n=!0,i=!1,s=!1,u=new Set,c=t.type==="tick"?_v:t.type==="raf"?$v:t.type==="callback"?t.queueNotification:Ym(t.timeout),l=function(){s=!1,i&&(i=!1,u.forEach(function(d){return d()}))};return Object.assign({},o,{subscribe:function(d){var g=function(){return n&&d()},p=o.subscribe(g);return u.add(d),function(){p(),u.delete(d)}},dispatch:function(d){var g;try{return n=!((g=d==null?void 0:d.meta)==null?void 0:g[cl]),i=!n,i&&(s||(s=!0,c(l))),o.dispatch(d)}finally{n=!0}}})}}};Uf();function Wv(t,e){let r=`
  The following properties are invalid:

    ${t.join(`
	`)}
  
  ${e}
  `;return new Pa(r)}var Pa=class extends Error{constructor(t){super(t);this.name="SchemaValidationError"}},N=class{constructor(t){this.definition=t}validate(t={},e=""){let r={...this.default,...t},a=[];for(let o in this.definition){let n=this.definition[o].validate(r[o]);n&&a.push(`${o}: ${n}`)}if(a.length)throw Wv(a,e);return r}get default(){let t={};for(let e in this.definition){let r=this.definition[e].default;r!==void 0&&(t[e]=r)}return t}},ie=class{constructor(t={}){this.baseConfig=t}validate(t){return this.baseConfig.required&&te(t)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function be(t){return t===void 0}function Gv(t){return t===null}function te(t){return be(t)||Gv(t)}var O=class{constructor(t={}){this.config=t,this.value=new ie(t)}validate(t){let e=this.value.validate(t);return e||(zv(t)?t<this.config.min?`minimum value of ${this.config.min} not respected.`:t>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function zv(t){return be(t)||Km(t)}function Km(t){return typeof t=="number"&&!isNaN(t)}var H=class{constructor(t={}){this.value=new ie(t)}validate(t){let e=this.value.validate(t);return e||(Yv(t)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Yv(t){return be(t)||Jm(t)}function Jm(t){return typeof t=="boolean"}var Kv=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,P=class{constructor(t={}){this.config={emptyAllowed:!0,url:!1,...t},this.value=new ie(this.config)}validate(t){let{emptyAllowed:e,url:r,regex:a,constrainTo:o}=this.config,n=this.value.validate(t);return n||(be(t)?null:zo(t)?!e&&!t.length?"value is an empty string.":r&&!Kv.test(t)?"value is not a valid URL.":a&&!a.test(t)?`value did not match provided regex ${a}`:o&&!o.includes(t)?`value should be one of: ${o.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function zo(t){return Object.prototype.toString.call(t)==="[object String]"}var k=class{constructor(t={}){this.config={options:{required:!1},values:{},...t}}validate(t){if(be(t))return this.config.options.required?"value is required and is currently undefined":null;if(!Xm(t))return"value is not an object";for(let[r,a]of Object.entries(this.config.values))if(a.required&&te(t[r]))return`value does not contain ${r}`;let e="";for(let[r,a]of Object.entries(this.config.values)){let o=t[r],n=a.validate(o);n!==null&&(e+=" "+n)}return e===""?null:e}get default(){}get required(){return!!this.config.options.required}};function Xm(t){return t!==void 0&&typeof t=="object"}var W=class{constructor(t={}){this.config=t,this.value=new ie(this.config)}validate(t){if(!te(t)&&!Array.isArray(t))return"value is not an array";let e=this.value.validate(t);if(e!==null)return e;if(te(t))return null;if(this.config.max!==void 0&&t.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&t.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return t.forEach(a=>{this.config.each.required&&te(a)&&(r=`value is null or undefined: ${t.join(",")}`);let o=this.validatePrimitiveValue(a,this.config.each);o!==null&&(r+=" "+o)}),r===""?null:r}return null}validatePrimitiveValue(t,e){return Jm(t)||zo(t)||Km(t)||Xm(t)?e.validate(t):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Yo(t){return Array.isArray(t)}var Ye=class{constructor(t){this.config=t,this.value=new ie(t)}validate(t){let e=this.value.validate(t);return e!==null?e:be(t)||Object.values(this.config.enum).find(a=>a===t)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var w=new P({required:!0,emptyAllowed:!1}),ce=new P({required:!1,emptyAllowed:!1}),me=new P({required:!0,emptyAllowed:!0}),ct=({message:t,name:e,stack:r})=>({message:t,name:e,stack:r}),Ke=(t,e)=>{if("required"in e)return{payload:new N({value:e}).validate({value:t}).value};let o=new k({options:{required:!0},values:e}).validate(t);if(o)throw new Pa(o);return{payload:t}},C=(t,e)=>{try{return Ke(t,e)}catch(r){return{payload:t,error:ct(r)}}},Ze=(t,e,r,a)=>{let o=`Check the initialState of ${a}`;return Zm(t,e,r,o,"Controller initialization error")},Re=(t,e,r,a)=>{let o=`Check the options of ${a}`;return Zm(t,e,r,o,"Controller initialization error")},Zm=(t,e,r,a,o)=>{try{return e.validate(r,a)}catch(n){throw t.logger.error(n,o),n}};var Si={productId:w,quantity:new O({required:!0,min:1})},ul=new W({each:new k({values:{...Si}})}),Jv={items:ul},eg=new N(Jv);var Ko=S("commerce/cart/setItems",t=>C(t,ul)),yi=S("commerce/cart/addItem",t=>C(t,Si)),Ci=S("commerce/cart/removeItem",t=>C(t,w)),xi=S("commerce/cart/updateItemQuantity",t=>C(t,Si));var vi=()=>({cartItems:[],cart:{}});var Fi=I(vi(),t=>{t.addCase(Ko,(e,{payload:r})=>{let{cart:a,cartItems:o}=r.reduce((n,i)=>({cartItems:[...n.cartItems,i.productId],cart:{...n.cart,[i.productId]:i}}),vi());e.cartItems=o,e.cart=a}).addCase(yi,(e,{payload:r})=>{if(r.productId in e.cart){e.cart[r.productId].quantity+=r.quantity;return}e.cartItems=[...e.cartItems,r.productId],e.cart[r.productId]=r}).addCase(Ci,(e,{payload:r})=>{e.cartItems=e.cartItems.filter(a=>a!==r),delete e.cart[r]}).addCase(xi,(e,{payload:r})=>{r.productId in e.cart&&(e.cart[r.productId].quantity=r.quantity)})});var ll={url:w},dl={userId:ce,email:ce,userIp:ce,userAgent:ce},pl={trackingId:w,language:w,country:w,currency:w,clientId:w,user:new k({values:{...dl}}),view:new k({options:{required:!0},values:{...ll}})},tg=new N(pl);var _t=S("commerce/setContext",t=>C(t,pl)),bi=S("commerce/setUser",t=>te(t.userId)&&te(t.email)?{payload:t,error:ct(new Pa("Either userId or email is required"))}:C(t,dl)),Ri=S("commerce/setView",t=>C(t,ll));var fl=()=>({trackingId:"",language:"",country:"",currency:"",clientId:"",view:{url:""}});var Sr=I(fl(),t=>{t.addCase(_t,(e,{payload:r})=>r).addCase(bi,(e,{payload:r})=>{e.user=r}).addCase(Ri,(e,{payload:r})=>{e.view=r})});async function Xv({config:t,environment:e,event:r,listenerManager:a}){let{url:o,token:n,mode:i}=t;i!=="disabled"&&(a.call(r),e.send(o,n,r))}var Zv=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function eF(t){return typeof t=="string"&&Zv.test(t)}function tF(t){let e="visitorId";return{getClientId:()=>{let r=t.get(),a=r.storage,o=a.getItem(e),n=o&&eF(o)?o:r.generateUUID();return a.setItem(e,n),n},clear:()=>{t.get().storage.removeItem(e)}}}var rg="0.6.8";function rF(t){let{trackingId:e}=t;return{trackingId:e}}function aF(){return`relay@${rg}`}function ag(t,e,r,a){let{getReferrer:o,getLocation:n,getUserAgent:i}=r,s=rF(e),u=a.getClientId();return Object.freeze({type:t,config:s,ts:Date.now(),source:aF(),clientId:u,userAgent:i(),referrer:o(),location:n()})}function oF(t,e,r,a,o){return{...e,meta:ag(t,r,a,o)}}var nF="*";function iF(){let t=[];function e({type:u,callback:c}){return t.findIndex(l=>l.type===u&&l.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function a(u){return e(u)<0&&t.push(u),()=>s(u.type,u.callback)}function o(u){t.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u)}catch(l){console.error(l)}})}function n(u){if(u===nF)t.length=0;else for(let c=t.length-1;c>=0;c--)t[c].type===u&&t.splice(c,1)}function i(u){let c=e(u);c>=0&&t.splice(c,1)}function s(u,c){c?i({type:u,callback:c}):n(u)}return{add:a,call:o,remove:s}}function og({url:t,token:e,trackingId:r,...a}){return Object.freeze({url:t,token:e,trackingId:r,...!!a.mode&&{mode:a.mode}})}function sF(t){let e=og(t);return{get:()=>e,update:r=>{e=og({...e,...r})}}}function cF(){let t=typeof window!="undefined";return{sendMessage(e){t&&window.postMessage(e,"*")}}}var ml=uF();function uF(){let t="coveo_",e=r=>{let a=r.split(".").slice(-2);return a.length==2?a.join("."):""};return{getItem(r){let a=`${t}${r}=`,o=document.cookie.split(";");for(let n of o){let i=n.replace(/^\s+/,"");if(i.lastIndexOf(a,0)===0)return i.substring(a.length,i.length)}return null},setItem(r,a,o){let n=e(window.location.hostname),i=`;expires=${new Date(new Date().getTime()+o).toUTCString()}`,s=n?`;domain=${n}`:"";document.cookie=`${t}${r}=${a}${i}${s};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function lF(){return{getItem(t){return ml.getItem(t)||localStorage.getItem(t)},removeItem(t){ml.removeItem(t),localStorage.removeItem(t)},setItem(t,e){let r=31556952e3;localStorage.setItem(t,e),ml.setItem(t,e,r)}}}async function gl(t,e){return fetch(t,e).catch(r=>{throw new Error(`${r.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:r})})}function dF(){let t=document.referrer;return t===""?null:t}function pF(){return{runtime:"browser",fetch:(t,e)=>gl(t,e),send:async(t,e,r)=>{let a=navigator.sendBeacon(`${t}?access_token=${e}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(cF().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:t,token:e}),!a)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>dF(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:lF()}}function ng(){return{getItem(){return null},removeItem(){},setItem(){}}}function fF(){return{runtime:"node",fetch:(t,e)=>gl(t,e),send:async(t,e,r)=>{let a={"Content-Type":"application/json",Authorization:`Bearer ${e}`};gl(t,{method:"POST",body:JSON.stringify([r]),headers:a})},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:ng()}}function mF(){return gF()?pF():fF()}function gF(){try{return typeof window=="object"}catch{return!1}}function hF(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:ng()}}function SF(t){return t.get().mode=="disabled"?hF():mF()}function yF(t){return{get:()=>Object.freeze(SF(t))}}function ig(t){let e=sF(t),r=iF(),a=yF(e),o=tF(a);return{emit:(n,i)=>{let s=e.get(),u=a.get(),c=oF(n,i,s,u,o);return Xv({config:s,environment:u,event:c,listenerManager:r})},getMeta:n=>ag(n,e.get(),a.get(),o),on:(n,i)=>r.add({type:n,callback:i}),off:(n,i)=>r.remove(n,i),updateConfig:n=>e.update(n),version:rg,clearStorage:()=>{o.clear()}}}function Ct(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(t);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(r[a[o]]=t[a[o]]);return r}function v(t,e,r,a){function o(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?n(l.value):o(l.value).then(s,u)}c((a=a.apply(t,e||[])).next())})}var re;(function(t){t.search="search",t.click="click",t.custom="custom",t.view="view",t.collect="collect"})(re||(re={}));function CF(){return typeof window!="undefined"}function hl(){return typeof navigator!="undefined"}function wa(){return typeof document!="undefined"}function Sl(){try{return typeof localStorage!="undefined"}catch{return!1}}function xF(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function sg(){return hl()&&navigator.cookieEnabled}var vF=[re.click,re.custom,re.search,re.view],FF=(t,e)=>vF.indexOf(t)!==-1?Object.assign({language:wa()?document.documentElement.lang:"unknown",userAgent:hl()?navigator.userAgent:"unknown"},e):e,Ea=class{static set(e,r,a){var o,n,i,s;a&&(n=new Date,n.setTime(n.getTime()+a)),s=window.location.hostname,s.indexOf(".")===-1?cg(e,r,n):(i=s.split("."),o=i[i.length-2]+"."+i[i.length-1],cg(e,r,n,o))}static get(e){for(var r=e+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){var n=a[o];if(n=n.replace(/^\s+/,""),n.lastIndexOf(r,0)===0)return n.substring(r.length,n.length)}return null}static erase(e){Ea.set(e,"",-1)}};function cg(t,e,r,a){document.cookie=`${t}=${e}`+(r?`;expires=${r.toUTCString()}`:"")+(a?`;domain=${a}`:"")+";path=/;SameSite=Lax"}function bF(){return Sl()?localStorage:sg()?new yr:xF()?sessionStorage:new Ia}var yr=class{getItem(e){return Ea.get(`${yr.prefix}${e}`)}removeItem(e){Ea.erase(`${yr.prefix}${e}`)}setItem(e,r,a){Ea.set(`${yr.prefix}${e}`,r,a)}};yr.prefix="coveo_";var ug=class{constructor(){this.cookieStorage=new yr}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,r){localStorage.setItem(e,r),this.cookieStorage.setItem(e,r,31556926e3)}},Ia=class{getItem(e){return null}removeItem(e){}setItem(e,r){}},Jo="__coveo.analytics.history",lg=20,dg=1e3*60,pg=75,Xo=class{constructor(e){this.store=e||bF()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])}addElementAsync(e){return v(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return v(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(Jo);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return v(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(Jo);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(Jo,JSON.stringify(e.slice(0,lg)))}catch{}}clear(){try{this.store.removeItem(Jo)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((a,o)=>(o.internalTime||0)-(a.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,pg)),e}isValidEntry(e){let r=this.getMostRecentElement();return r&&r.value==e.value?(e.internalTime||0)-(r.internalTime||0)>dg:!0}stripInternalTime(e){return Array.isArray(e)?e.map(r=>{let{name:a,time:o,value:n}=r;return{name:a,time:o,value:n}}):[]}stripEmptyQuery(e){let{name:r,time:a,value:o}=e;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:a}:e}stripEmptyQueries(e){return e.map(r=>this.stripEmptyQuery(r))}},fg=Object.freeze({__proto__:null,HistoryStore:Xo,MAX_NUMBER_OF_HISTORY_ELEMENTS:lg,MAX_VALUE_SIZE:pg,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:dg,STORE_KEY:Jo,default:Xo}),RF=(t,e)=>v(void 0,void 0,void 0,function*(){return t===re.view?(yield AF(e.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},e)):e}),AF=t=>v(void 0,void 0,void 0,function*(){let e=new Xo,r={name:"PageView",value:t,time:new Date().toISOString()};yield e.addElementAsync(r)}),Ai,PF=new Uint8Array(16);function wF(){if(!Ai&&(Ai=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ai))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ai(PF)}var EF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Pi(t){return typeof t=="string"&&EF.test(t)}var Me=[];for(let t=0;t<256;++t)Me.push((t+256).toString(16).slice(1));function mg(t,e=0){return(Me[t[e+0]]+Me[t[e+1]]+Me[t[e+2]]+Me[t[e+3]]+"-"+Me[t[e+4]]+Me[t[e+5]]+"-"+Me[t[e+6]]+Me[t[e+7]]+"-"+Me[t[e+8]]+Me[t[e+9]]+"-"+Me[t[e+10]]+Me[t[e+11]]+Me[t[e+12]]+Me[t[e+13]]+Me[t[e+14]]+Me[t[e+15]]).toLowerCase()}function IF(t){if(!Pi(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function kF(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var OF="6ba7b810-9dad-11d1-80b4-00c04fd430c8",qF="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function TF(t,e,r){function a(o,n,i,s){var u;if(typeof o=="string"&&(o=kF(o)),typeof n=="string"&&(n=IF(n)),((u=n)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(n),c.set(o,n.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=c[l];return i}return mg(c)}try{a.name=t}catch{}return a.DNS=OF,a.URL=qF,a}var DF=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gg={randomUUID:DF};function Lr(t,e,r){if(gg.randomUUID&&!e&&!t)return gg.randomUUID();t=t||{};let a=t.random||(t.rng||wF)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=a[o];return e}return mg(a)}function VF(t,e,r,a){switch(t){case 0:return e&r^~e&a;case 1:return e^r^a;case 2:return e&r^e&a^r&a;case 3:return e^r^a}}function yl(t,e){return t<<e|t>>>32-e}function MF(t){let e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){let i=unescape(encodeURIComponent(t));t=[];for(let s=0;s<i.length;++s)t.push(i.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);let a=t.length/4+2,o=Math.ceil(a/16),n=new Array(o);for(let i=0;i<o;++i){let s=new Uint32Array(16);for(let u=0;u<16;++u)s[u]=t[i*64+u*4]<<24|t[i*64+u*4+1]<<16|t[i*64+u*4+2]<<8|t[i*64+u*4+3];n[i]=s}n[o-1][14]=(t.length-1)*8/Math.pow(2,32),n[o-1][14]=Math.floor(n[o-1][14]),n[o-1][15]=(t.length-1)*8&4294967295;for(let i=0;i<o;++i){let s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=n[i][p];for(let p=16;p<80;++p)s[p]=yl(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let u=r[0],c=r[1],l=r[2],d=r[3],g=r[4];for(let p=0;p<80;++p){let m=Math.floor(p/20),h=yl(u,5)+VF(m,c,l,d)+g+e[m]+s[p]>>>0;g=d,d=l,l=yl(c,30)>>>0,c=u,u=h}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+g>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var LF=TF("v5",80,MF),hg=LF,Sg="2.28.23",yg=t=>`${t.protocol}//${t.hostname}${t.pathname.indexOf("/")===0?t.pathname:`/${t.pathname}`}${t.search}`,Zo={pageview:"pageview",event:"event"},Cl=class{constructor({client:e,uuidGenerator:r=Lr}){this.client=e,this.uuidGenerator=r}},Cg=class extends Cl{constructor({client:e,uuidGenerator:r=Lr}){super({client:e,uuidGenerator:r});this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=yg(window.location),this.lastReferrer=wa()?document.referrer:"",this.addHooks()}getApi(e){switch(e){case"setAction":return this.setAction;default:return null}}setAction(e,r){this.action=e,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,r){return Object.assign({hitType:e},this.getNextValues(e,r))}updateLocationInformation(e,r){this.updateLocationForNextPageView(e,r)}getDefaultContextInformation(e){let r={title:wa()?document.title:"",encoding:wa()?document.characterSet:"UTF-8"},a={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},o={language:navigator.language,userAgent:navigator.userAgent},n={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},n),a),o),r)}updateLocationForNextPageView(e,r){let{pageViewId:a,referrer:o,location:n}=this.getNextValues(e,r);this.lastReferrer=o,this.pageViewId=a,this.currentLocation=n,e===Zo.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,r){return{pageViewId:e===Zo.pageview?this.nextPageViewId:this.pageViewId,referrer:e===Zo.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===Zo.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(e){if(e.page){let r=o=>o.replace(/^\/?(.*)$/,"/$1");return`${(o=>o.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(e.page)}`}else return yg(window.location)}},xt=class{constructor(e,r){if(!Pi(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>xt.expirationTime}validate(e,r){return!this.expired&&this.matchReferrer(e,r)}matchReferrer(e,r){try{let a=new URL(e);return r.some(o=>new RegExp(o.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(a.host))}catch{return!1}}static fromString(e){let r=e.split(".");if(r.length!==2)return null;let[a,o]=r;if(a.length!==32||isNaN(parseInt(o)))return null;let n=a.substring(0,8)+"-"+a.substring(8,12)+"-"+a.substring(12,16)+"-"+a.substring(16,20)+"-"+a.substring(20,32);return Pi(n)?new xt(n,Number.parseInt(o)*1e3):null}};xt.cvo_cid="cvo_cid";xt.expirationTime=120;var xg=class extends Cl{constructor({client:e,uuidGenerator:r=Lr}){super({client:e,uuidGenerator:r})}getApi(e){switch(e){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(e){return v(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(e),a=yield this.client.getCurrentVisitorId();return r.searchParams.set(xt.cvo_cid,new xt(a,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(e){this.client.setAcceptedLinkReferrers(e)}};xg.Id="link";var et=Object.keys;function wi(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}var xl={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},NF=et(xl).map(t=>xl[t]),QF=[...NF].join("|"),BF=new RegExp(`^(${QF}$)`),jF={svcAction:"svc_action",svcActionData:"svc_action_data"},UF=t=>et(t).filter(e=>t[e]!==void 0).reduce((e,r)=>{let a=xl[r]||r;return Object.assign(Object.assign({},e),{[a]:t[r]})},{}),_F=t=>BF.test(t),$F=[_F],vg={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Fg={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Be={action:"pa",list:"pal",listSource:"pls"},Ei={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},HF=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],vl={id:"quoteId",affiliation:"quoteAffiliation"},Fl={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},WF={add:Be,bookmark_add:Be,bookmark_remove:Be,click:Be,checkout:Be,checkout_option:Be,detail:Be,impression:Be,remove:Be,refund:Object.assign(Object.assign({},Be),Ei),purchase:Object.assign(Object.assign({},Be),Ei),quickview:Be,quote:Object.assign(Object.assign({},Be),vl),review:Object.assign(Object.assign({},Be),Fl)},GF=et(vg).map(t=>vg[t]),zF=et(Fg).map(t=>Fg[t]),YF=et(Be).map(t=>Be[t]),KF=et(Ei).map(t=>Ei[t]),JF=et(Fl).map(t=>Fl[t]),XF=et(vl).map(t=>vl[t]),ZF=[...GF,"custom"].join("|"),eb=[...zF,"custom"].join("|"),bg="(pr[0-9]+)",Rg="(il[0-9]+pi[0-9]+)",tb=new RegExp(`^${bg}(${ZF})$`),rb=new RegExp(`^(${Rg}(${eb}))|(il[0-9]+nm)$`),ab=new RegExp(`^(${YF.join("|")})$`),ob=new RegExp(`^(${KF.join("|")})$`),nb=new RegExp(`^${bg}custom$`),ib=new RegExp(`^${Rg}custom$`),sb=new RegExp(`^(${[...HF,...JF,...XF].join("|")})$`),cb=t=>tb.test(t),ub=t=>rb.test(t),lb=t=>ab.test(t),db=t=>ob.test(t),pb=t=>sb.test(t),fb=[ub,cb,lb,db,pb],mb=[nb,ib],gb={anonymizeIp:"aip"},hb={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},Sb={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},yb=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],Cb=Object.assign(Object.assign(Object.assign(Object.assign({},gb),hb),Sb),yb.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:e}),{})),bl=Object.assign(Object.assign({},Cb),jF),xb=t=>{let e=!!t.action&&WF[t.action]||{};return et(t).reduce((r,a)=>{let o=e[a]||bl[a]||a;return Object.assign(Object.assign({},r),{[o]:t[a]})},{})},vb=et(bl).map(t=>bl[t]),Fb=t=>vb.indexOf(t)!==-1,bb=t=>t==="custom",Rb=t=>[...fb,...$F,Fb,bb].some(e=>e(t)),Ab=t=>et(t).reduce((e,r)=>{let a=Pb(r);return a?Object.assign(Object.assign({},e),wb(a,t[r])):Object.assign(Object.assign({},e),{[r]:t[r]})},{}),Pb=t=>{let e;return[...mb].every(r=>{var a;return e=(a=r.exec(t))===null||a===void 0?void 0:a[1],!Boolean(e)}),e},wb=(t,e)=>et(e).reduce((r,a)=>Object.assign(Object.assign({},r),{[`${t}${a}`]:e[a]}),{}),Ag=class{constructor(e){this.opts=e}sendEvent(e,r){return v(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:a,preprocessRequest:o}=this.opts,n=yield this.getQueryParamsForEventType(e),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${a}/analytics/${e}?${n}`,r,o),u=this.encodeForEventType(e,s),c=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,c)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,r,a){return v(this,void 0,void 0,function*(){let o=e,n=r;if(a){let i=yield a({url:e,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:u}=i;o=s||e;try{n=JSON.parse(u)}catch(c){console.error("Unable to process the request body as a JSON string",c)}}return{payload:n,url:o}})}encodeForEventType(e,r){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(e){return v(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:a}=this.opts,o=yield a.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(e)?`access_token=${r}`:"",o?`visitorId=${o}`:"","discardVisitInfo=true"].filter(n=>!!n).join("&")})}isEventTypeLegacy(e){return[re.click,re.custom,re.search,re.view].indexOf(e)!==-1}encodeForLegacyType(e,r){return`${e}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter(r=>!!e[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(e[r]))}`).join("&")}encodeValue(e){return typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:JSON.stringify(e)}},Pg=class{sendEvent(e,r){return v(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return v(this,void 0,void 0,function*(){return Promise.resolve()})}},wg=window.fetch,Rl=class{constructor(e){this.opts=e}sendEvent(e,r){return v(this,void 0,void 0,function*(){let{baseUrl:a,visitorIdProvider:o,preprocessRequest:n}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",s={url:`${a}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},s),n?yield n(s,"analyticsFetch"):{}),{url:c}=u,l=Ct(u,["url"]),d=yield wg(c,l);if(d.ok){let g=yield d.json();return g.visitorId&&o.setCurrentVisitorId(g.visitorId),g}else{try{d.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,d,r),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return v(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts,r=`${e}/analytics/visit`;yield wg(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return[re.click,re.custom,re.search,re.view].indexOf(e)!==-1}getVisitorIdParam(){return v(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,r=yield e.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},Eg=class{constructor(e,r){Sl()&&sg()?this.storage=new ug:Sl()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Ia),this.client=new Rl(e),this.beaconClient=new Ag(e),window.addEventListener("beforeunload",()=>{let a=r();for(let{eventType:o,payload:n}of a)this.beaconClient.sendEvent(o,n)})}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Ig=class{constructor(e,r){this.storage=r||new Ia,this.client=new Rl(e)}getClientDependingOnEventType(e){return this.client}},kg=class{constructor(){this.storage=new Ia,this.client=new Pg}getClientDependingOnEventType(e){return this.client}},Eb="xx",Ib=t=>(t==null?void 0:t.startsWith(Eb))||!1,kb=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function Ob(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var qb=["1",1,"yes",!0];function en(){return hl()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(t=>qb.indexOf(t)!==-1)}var Og="v15",qg={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Tb(t=qg.default,e=Og,r=!1){if(t=t.replace(/\/$/,""),r)return`${t}/${e}`;let a=t.endsWith("/rest")||t.endsWith("/rest/ua");return`${t}${a?"":"/rest"}/${e}`}var Db="38824e1f-37f5-42d3-8372-a4b8fa9df946",je=class{get defaultOptions(){return{endpoint:qg.default,isCustomEndpoint:!1,token:"",version:Og,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Sg}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[RF,FF].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),en()&&(this.clear(),this.runtime.storage=new Ia),this.addEventTypeMapping(re.view,{newEventType:re.view,addClientIdParameter:!0}),this.addEventTypeMapping(re.click,{newEventType:re.click,addClientIdParameter:!0}),this.addEventTypeMapping(re.custom,{newEventType:re.custom,addClientIdParameter:!0}),this.addEventTypeMapping(re.search,{newEventType:re.search,addClientIdParameter:!0})}initRuntime(e){return CF()&&wa()?new Eg(e,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(Ob()&&console.warn(kb),new Ig(e))}get storage(){return this.runtime.storage}determineVisitorId(){return v(this,void 0,void 0,function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Lr()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),Lr()}})}getCurrentVisitorId(){return v(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return v(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,r){return v(this,void 0,void 0,function*(){if(Pi(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(hg(e,hg(r,Db)))}})}getParameters(e,...r){return v(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...r)})}getPayload(e,...r){return v(this,void 0,void 0,function*(){let a=yield this.resolveParameters(e,...r);return yield this.resolvePayloadForParameters(e,a)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Lr()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(en())return null;try{let r=new URL(e).searchParams.get(xt.cvo_cid);if(r==null)return null;let a=xt.fromString(r);return!a||!wa()||!a.validate(document.referrer,this.acceptedLinkReferrers)?null:a.clientId}catch{}return null}resolveParameters(e,...r){return v(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:a=[],addVisitorIdParameter:o=!1,usesMeasurementProtocol:n=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[e]||{};return yield[p=>a.length>0?this.parseVariableArgumentsPayload(a,p):p[0],p=>v(this,void 0,void 0,function*(){return Object.assign(Object.assign({},p),{visitorId:o?yield this.getCurrentVisitorId():""})}),p=>v(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},p),{clientId:yield this.getCurrentVisitorId()}):p}),p=>n?this.ensureAnonymousUserWhenUsingApiKey(p):p,p=>this.beforeSendHooks.reduce((m,h)=>v(this,void 0,void 0,function*(){let x=yield m;return yield h(e,x)}),p)].reduce((p,m)=>v(this,void 0,void 0,function*(){let h=yield p;return yield m(h)}),Promise.resolve(r))})}resolvePayloadForParameters(e,r){return v(this,void 0,void 0,function*(){let{usesMeasurementProtocol:a=!1}=this.eventTypeMapping[e]||{};return yield[d=>this.setTrackingIdIfTrackingIdNotPresent(d),d=>this.removeEmptyPayloadValues(d,e),d=>this.validateParams(d,e),d=>a?xb(d):d,d=>a?this.removeUnknownParameters(d):d,d=>a?this.processCustomParameters(d):this.mapCustomParametersToCustomData(d)].reduce((d,g)=>v(this,void 0,void 0,function*(){let p=yield d;return yield g(p)}),Promise.resolve(r))})}makeEvent(e,...r){return v(this,void 0,void 0,function*(){let{newEventType:a=e}=this.eventTypeMapping[e]||{},o=yield this.resolveParameters(e,...r),n=yield this.resolvePayloadForParameters(e,o);return{eventType:a,payload:n,log:i=>v(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:a,payload:Object.assign(Object.assign({},n),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(e,Object.assign(Object.assign({},o),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e,...r){return v(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...r)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return v(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:r,payload:a}=e;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,a)}})}clear(){this.storage.removeItem("visitorId"),new Xo().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return v(this,void 0,void 0,function*(){return this.makeEvent(re.search,e)})}sendSearchEvent(e){var{searchQueryUid:r}=e,a=Ct(e,["searchQueryUid"]);return v(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(a)).log({searchQueryUid:r})})}makeClickEvent(e){return v(this,void 0,void 0,function*(){return this.makeEvent(re.click,e)})}sendClickEvent(e){var{searchQueryUid:r}=e,a=Ct(e,["searchQueryUid"]);return v(this,void 0,void 0,function*(){return(yield this.makeClickEvent(a)).log({searchQueryUid:r})})}makeCustomEvent(e){return v(this,void 0,void 0,function*(){return this.makeEvent(re.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:r}=e,a=Ct(e,["lastSearchQueryUid"]);return v(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(a)).log({lastSearchQueryUid:r})})}makeViewEvent(e){return v(this,void 0,void 0,function*(){return this.makeEvent(re.view,e)})}sendViewEvent(e){return v(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return v(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return v(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,r){this.eventTypeMapping[e]=r}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(r=>typeof r=="string"))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,r){let a={};for(let o=0,n=r.length;o<n;o++){let i=r[o];if(typeof i=="string")a[e[o]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},a),i)}return a}isKeyAllowedEmpty(e,r){return({[re.search]:["queryText"]}[e]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(e,r){let a=o=>typeof o!="undefined"&&o!==null&&o!=="";return Object.keys(e).filter(o=>this.isKeyAllowedEmpty(r,o)||a(e[o])).reduce((o,n)=>Object.assign(Object.assign({},o),{[n]:e[n]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(a=>{if(Rb(a))return!0;console.log(a,"is not processed by coveoua")}).reduce((a,o)=>Object.assign(Object.assign({},a),{[o]:e[o]}),{})}processCustomParameters(e){let{custom:r}=e,a=Ct(e,["custom"]),o={};r&&wi(r)&&(o=this.lowercaseKeys(r));let n=Ab(a);return Object.assign(Object.assign({},o),n)}mapCustomParametersToCustomData(e){let{custom:r}=e,a=Ct(e,["custom"]);if(r&&wi(r)){let o=this.lowercaseKeys(r);return Object.assign(Object.assign({},a),{customData:Object.assign(Object.assign({},o),e.customData)})}else return e}lowercaseKeys(e){let r=Object.keys(e),a={};return r.forEach(o=>{a[o.toLowerCase()]=e[o]}),a}validateParams(e,r){let{anonymizeIp:a}=e,o=Ct(e,["anonymizeIp"]);return a!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${a}`.toLowerCase())==-1&&(o.anonymizeIp=1),(r==re.view||r==re.click||r==re.search||r==re.custom)&&(o.originLevel3=this.limit(o.originLevel3,128)),r==re.view&&(o.location=this.limit(o.location,128)),(r=="pageview"||r=="event")&&(o.referrer=this.limit(o.referrer,2048),o.location=this.limit(o.location,2048),o.page=this.limit(o.page,2048)),o}ensureAnonymousUserWhenUsingApiKey(e){let{userId:r}=e,a=Ct(e,["userId"]);return Ib(this.options.token)&&!r?(a.userId="anonymous",a):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:r}=e,a=Ct(e,["trackingId"]);return r?e:(a.hasOwnProperty("custom")&&wi(a.custom)&&(a.custom.hasOwnProperty("context_website")||a.custom.hasOwnProperty("siteName"))&&(a.trackingId=a.custom.context_website||a.custom.siteName),a.hasOwnProperty("customData")&&wi(a.customData)&&(a.customData.hasOwnProperty("context_website")||a.customData.hasOwnProperty("siteName"))&&(a.trackingId=a.customData.context_website||a.customData.siteName),a)}limit(e,r){return typeof e!="string"?e:e.substring(0,r)}get baseUrl(){return Tb(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Le;(function(t){t.contextChanged="contextChanged",t.expandToFullUI="expandToFullUI",t.openUserActions="openUserActions",t.showPrecedingSessions="showPrecedingSessions",t.showFollowingSessions="showFollowingSessions",t.clickViewedDocument="clickViewedDocument",t.clickPageView="clickPageView",t.createArticle="createArticle"})(Le||(Le={}));var y;(function(t){t.interfaceLoad="interfaceLoad",t.interfaceChange="interfaceChange",t.didyoumeanAutomatic="didyoumeanAutomatic",t.didyoumeanClick="didyoumeanClick",t.resultsSort="resultsSort",t.searchboxSubmit="searchboxSubmit",t.searchboxClear="searchboxClear",t.searchboxAsYouType="searchboxAsYouType",t.breadcrumbFacet="breadcrumbFacet",t.breadcrumbResetAll="breadcrumbResetAll",t.documentQuickview="documentQuickview",t.documentOpen="documentOpen",t.omniboxAnalytics="omniboxAnalytics",t.omniboxFromLink="omniboxFromLink",t.searchFromLink="searchFromLink",t.triggerNotify="notify",t.triggerExecute="execute",t.triggerQuery="query",t.undoTriggerQuery="undoQuery",t.triggerRedirect="redirect",t.pagerResize="pagerResize",t.pagerNumber="pagerNumber",t.pagerNext="pagerNext",t.pagerPrevious="pagerPrevious",t.pagerScrolling="pagerScrolling",t.staticFilterClearAll="staticFilterClearAll",t.staticFilterSelect="staticFilterSelect",t.staticFilterDeselect="staticFilterDeselect",t.facetClearAll="facetClearAll",t.facetSearch="facetSearch",t.facetSelect="facetSelect",t.facetSelectAll="facetSelectAll",t.facetDeselect="facetDeselect",t.facetExclude="facetExclude",t.facetUnexclude="facetUnexclude",t.facetUpdateSort="facetUpdateSort",t.facetShowMore="showMoreFacetResults",t.facetShowLess="showLessFacetResults",t.queryError="query",t.queryErrorBack="errorBack",t.queryErrorClear="errorClearQuery",t.queryErrorRetry="errorRetry",t.recommendation="recommendation",t.recommendationInterfaceLoad="recommendationInterfaceLoad",t.recommendationOpen="recommendationOpen",t.likeSmartSnippet="likeSmartSnippet",t.dislikeSmartSnippet="dislikeSmartSnippet",t.expandSmartSnippet="expandSmartSnippet",t.collapseSmartSnippet="collapseSmartSnippet",t.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",t.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",t.sendSmartSnippetReason="sendSmartSnippetReason",t.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",t.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",t.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",t.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",t.openSmartSnippetSource="openSmartSnippetSource",t.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",t.openSmartSnippetInlineLink="openSmartSnippetInlineLink",t.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",t.recentQueryClick="recentQueriesClick",t.clearRecentQueries="clearRecentQueries",t.recentResultClick="recentResultClick",t.clearRecentResults="clearRecentResults",t.noResultsBack="noResultsBack",t.showMoreFoldedResults="showMoreFoldedResults",t.showLessFoldedResults="showLessFoldedResults",t.copyToClipboard="copyToClipboard",t.caseSendEmail="Case.SendEmail",t.feedItemTextPost="FeedItem.TextPost",t.caseAttach="caseAttach",t.caseDetach="caseDetach",t.retryGeneratedAnswer="retryGeneratedAnswer",t.likeGeneratedAnswer="likeGeneratedAnswer",t.dislikeGeneratedAnswer="dislikeGeneratedAnswer",t.openGeneratedAnswerSource="openGeneratedAnswerSource",t.generatedAnswerStreamEnd="generatedAnswerStreamEnd",t.generatedAnswerSourceHover="generatedAnswerSourceHover",t.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",t.generatedAnswerHideAnswers="generatedAnswerHideAnswers",t.generatedAnswerShowAnswers="generatedAnswerShowAnswers",t.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",t.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(y||(y={}));var Al={[y.triggerNotify]:"queryPipelineTriggers",[y.triggerExecute]:"queryPipelineTriggers",[y.triggerQuery]:"queryPipelineTriggers",[y.triggerRedirect]:"queryPipelineTriggers",[y.queryError]:"errors",[y.queryErrorBack]:"errors",[y.queryErrorClear]:"errors",[y.queryErrorRetry]:"errors",[y.pagerNext]:"getMoreResults",[y.pagerPrevious]:"getMoreResults",[y.pagerNumber]:"getMoreResults",[y.pagerResize]:"getMoreResults",[y.pagerScrolling]:"getMoreResults",[y.facetSearch]:"facet",[y.facetShowLess]:"facet",[y.facetShowMore]:"facet",[y.recommendation]:"recommendation",[y.likeSmartSnippet]:"smartSnippet",[y.dislikeSmartSnippet]:"smartSnippet",[y.expandSmartSnippet]:"smartSnippet",[y.collapseSmartSnippet]:"smartSnippet",[y.openSmartSnippetFeedbackModal]:"smartSnippet",[y.closeSmartSnippetFeedbackModal]:"smartSnippet",[y.sendSmartSnippetReason]:"smartSnippet",[y.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.clearRecentQueries]:"recentQueries",[y.recentResultClick]:"recentlyClickedDocuments",[y.clearRecentResults]:"recentlyClickedDocuments",[y.showLessFoldedResults]:"folding",[y.caseDetach]:"case",[y.likeGeneratedAnswer]:"generatedAnswer",[y.dislikeGeneratedAnswer]:"generatedAnswer",[y.openGeneratedAnswerSource]:"generatedAnswer",[y.generatedAnswerStreamEnd]:"generatedAnswer",[y.generatedAnswerSourceHover]:"generatedAnswer",[y.generatedAnswerCopyToClipboard]:"generatedAnswer",[y.generatedAnswerHideAnswers]:"generatedAnswer",[y.generatedAnswerShowAnswers]:"generatedAnswer",[y.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Le.expandToFullUI]:"interface",[Le.openUserActions]:"User Actions",[Le.showPrecedingSessions]:"User Actions",[Le.showFollowingSessions]:"User Actions",[Le.clickViewedDocument]:"User Actions",[Le.clickPageView]:"User Actions",[Le.createArticle]:"createArticle"},Nr=class{constructor(){this.runtime=new kg,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(re.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(re.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(re.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(re.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Sg}};function Vb(t){let e="";return t.filter(r=>{let a=r!==e;return e=r,a})}function Mb(t){return t.map(e=>e.replace(/;/g,""))}function Tg(t){let e=256,r=t.join(";");return r.length<=e?r:Tg(t.slice(1))}var Dg=t=>{let e=Mb(t),r=Vb(e);return Tg(r)};function Vg(t){let e=typeof t.partialQueries=="string"?t.partialQueries:Dg(t.partialQueries),r=typeof t.suggestions=="string"?t.suggestions:Dg(t.suggestions);return Object.assign(Object.assign({},t),{partialQueries:e,suggestions:r})}var Qr=class{constructor(e,r){this.opts=e,this.provider=r;let a=e.enableAnalytics===!1||en();this.coveoAnalyticsClient=a?new Nr:new je(e)}disable(){this.coveoAnalyticsClient instanceof je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Nr}enable(){this.coveoAnalyticsClient=new je(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(y.interfaceLoad)}logInterfaceLoad(){return v(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(y.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return v(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(y.recommendation)}logRecommendation(){return v(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,r){return this.makeClickEvent(y.recommendationOpen,e,r)}logRecommendationOpen(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(y.staticFilterClearAll,e)}logStaticFilterClearAll(e){return v(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(y.staticFilterSelect,e)}logStaticFilterSelect(e){return v(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(y.staticFilterDeselect,e)}logStaticFilterDeselect(e){return v(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(y.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return v(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(y.interfaceChange,e)}logInterfaceChange(e){return v(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(y.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return v(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(y.didyoumeanClick)}logDidYouMeanClick(){return v(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(y.resultsSort,e)}logResultsSort(e){return v(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(y.searchboxSubmit)}logSearchboxSubmit(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(y.searchboxClear)}logSearchboxClear(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(y.searchboxAsYouType)}logSearchboxAsYouType(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(y.breadcrumbFacet,e)}logBreadcrumbFacet(e){return v(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(y.breadcrumbResetAll)}logBreadcrumbResetAll(){return v(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,r){return this.makeClickEvent(y.documentQuickview,e,r)}logDocumentQuickview(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,r){return this.makeClickEvent(y.documentOpen,e,r)}logDocumentOpen(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(y.omniboxAnalytics,Vg(e))}logOmniboxAnalytics(e){return v(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(y.omniboxFromLink,Vg(e))}logOmniboxFromLink(e){return v(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(y.searchFromLink)}logSearchFromLink(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(y.triggerNotify,e)}logTriggerNotify(e){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(y.triggerExecute,e)}logTriggerExecute(e){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(y.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(y.undoTriggerQuery,e)}logUndoTriggerQuery(e){return v(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(y.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(y.pagerResize,e)}logPagerResize(e){return v(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(y.pagerNumber,e)}logPagerNumber(e){return v(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(y.pagerNext,e)}logPagerNext(e){return v(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(y.pagerPrevious,e)}logPagerPrevious(e){return v(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(y.pagerScrolling)}logPagerScrolling(){return v(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(y.facetClearAll,e)}logFacetClearAll(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(y.facetSearch,e)}logFacetSearch(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(y.facetSelect,e)}logFacetSelect(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(y.facetDeselect,e)}logFacetDeselect(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(y.facetExclude,e)}logFacetExclude(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(y.facetUnexclude,e)}logFacetUnexclude(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(y.facetSelectAll,e)}logFacetSelectAll(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(y.facetUpdateSort,e)}logFacetUpdateSort(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(y.facetShowMore,e)}logFacetShowMore(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(y.facetShowLess,e)}logFacetShowLess(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(y.queryError,e)}logQueryError(e){return v(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return v(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(y.queryErrorBack);return{description:e.description,log:()=>v(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(y.queryErrorBack)})}})}logQueryErrorBack(){return v(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return v(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(y.queryErrorRetry);return{description:e.description,log:()=>v(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(y.queryErrorRetry)})}})}logQueryErrorRetry(){return v(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return v(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(y.queryErrorClear);return{description:e.description,log:()=>v(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(y.queryErrorClear)})}})}logQueryErrorClear(){return v(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(y.likeSmartSnippet)}logLikeSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(y.dislikeSmartSnippet)}logDislikeSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(y.expandSmartSnippet)}logExpandSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(y.collapseSmartSnippet)}logCollapseSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(y.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(y.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return v(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,r){return this.makeCustomEvent(y.sendSmartSnippetReason,{reason:e,details:r})}logSmartSnippetFeedbackReason(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(y.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return v(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(y.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return v(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(y.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return v(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(y.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return v(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,r){return this.makeClickEvent(y.openSmartSnippetSource,e,r)}logOpenSmartSnippetSource(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,r){return this.makeClickEvent(y.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(e,r){return this.makeClickEvent(y.copyToClipboard,e,r)}logCopyToClipboard(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,r){return this.makeClickEvent(y.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,r){return this.makeClickEvent(y.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(y.recentQueryClick)}logRecentQueryClick(){return v(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(y.clearRecentQueries)}logClearRecentQueries(){return v(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,r){return this.makeCustomEvent(y.recentResultClick,{info:e,identifier:r})}logRecentResultClick(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(y.clearRecentResults)}logClearRecentResults(){return v(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(y.noResultsBack)}logNoResultsBack(){return v(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,r){return this.makeClickEvent(y.showMoreFoldedResults,e,r)}logShowMoreFoldedResults(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(y.showLessFoldedResults)}logShowLessFoldedResults(){return v(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,r){var a;return{actionCause:r,customData:(a=e.payload)===null||a===void 0?void 0:a.customData}}makeCustomEvent(e,r,a=Al[e]){return v(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),n=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:a,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(n);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(e,r,a=Al[e]){return v(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,r,a)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,r,a){return v(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),a),n=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:r,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(n);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(e,r,a){return v(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,r,a)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,r){return v(this,void 0,void 0,function*(){let a=yield this.getBaseSearchEventRequest(e,r),o=yield this.coveoAnalyticsClient.makeSearchEvent(a);return{description:this.makeEventDescription(o,e),log:({searchUID:n})=>o.log({searchQueryUid:n})}})}makeClickEvent(e,r,a,o){return v(this,void 0,void 0,function*(){let n=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),o))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),i=yield this.coveoAnalyticsClient.makeClickEvent(n);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(e,r,a,o){return v(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,r,a,o)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var a,o;return v(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(a=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(a)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return v(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof je?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(y.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return v(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(y.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return v(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(y.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return v(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(y.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(y.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(y.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(y.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(y.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(y.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return v(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(y.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return v(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(y.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}},Ii=Object.assign({},Zo),Mg=Object.keys(Ii).map(t=>Ii[t]),tn=class extends Cg{constructor({client:e,uuidGenerator:r=Lr}){super({client:e,uuidGenerator:r});this.ticket={}}getApi(e){let r=super.getApi(e);if(r!==null)return r;switch(e){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((e,...[r])=>Mg.indexOf(e)!==-1?this.addSVCDataToPayload(e,r):r),this.client.registerAfterSendEventHook((e,...[r])=>(Mg.indexOf(e)!==-1&&this.updateLocationInformation(e,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(Ii.pageview,{newEventType:re.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(Ii.event,{newEventType:re.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,r){var a;let o=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,r)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys((a=this.actionData)!==null&&a!==void 0?a:{}).length>0?{svcActionData:this.actionData}:{}),n=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},n),o),r)}getTicketPayload(){return UF(this.ticket)}};tn.Id="svc";var ki;(function(t){t.click="click",t.flowStart="flowStart"})(ki||(ki={}));var ut;(function(t){t.enterInterface="ticket_create_start",t.fieldUpdate="ticket_field_update",t.fieldSuggestionClick="ticket_classification_click",t.suggestionClick="suggestion_click",t.suggestionRate="suggestion_rate",t.nextCaseStep="ticket_next_stage",t.caseCancelled="ticket_cancel",t.caseSolved="ticket_cancel",t.caseCreated="ticket_create"})(ut||(ut={}));var Oi;(function(t){t.quit="Quit",t.solved="Solved"})(Oi||(Oi={}));var Pl=class{constructor(e,r){var a;this.options=e,this.provider=r;let o=((a=e.enableAnalytics)!==null&&a!==void 0?a:!0)&&!en();this.coveoAnalyticsClient=o?new je(e):new Nr,this.svc=new tn({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Nr,this.svc=new tn({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new je(this.options),this.svc=new tn({client:this.coveoAnalyticsClient})}logEnterInterface(e){return this.svc.setAction(ut.enterInterface),this.svc.setTicket(e.ticket),this.sendFlowStartEvent()}logUpdateCaseField(e){return this.svc.setAction(ut.fieldUpdate,{fieldName:e.fieldName}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectFieldSuggestion(e){return this.svc.setAction(ut.fieldSuggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(e){return this.svc.setAction(ut.suggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logRateDocumentSuggestion(e){return this.svc.setAction(ut.suggestionRate,Object.assign({rate:e.rating},e.suggestion)),this.svc.setTicket(e.ticket),this.sendClickEvent()}logMoveToNextCaseStep(e){return this.svc.setAction(ut.nextCaseStep,{stage:e==null?void 0:e.stage}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCancelled(e){return this.svc.setAction(ut.caseCancelled,{reason:Oi.quit}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseSolved(e){return this.svc.setAction(ut.caseSolved,{reason:Oi.solved}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCreated(e){return this.svc.setAction(ut.caseCreated),this.svc.setTicket(e.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ki.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ki.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},Lb=t=>{let e={};return t.caseContext&&Object.keys(t.caseContext).forEach(r=>{var a;let o=(a=t.caseContext)===null||a===void 0?void 0:a[r];if(o){let n=`context_${r}`;e[n]=o}}),e},j=(t,e=!0)=>{let{caseContext:r,caseId:a,caseNumber:o}=t,n=Ct(t,["caseContext","caseId","caseNumber"]),i=Lb(t);return Object.assign(Object.assign(Object.assign({CaseId:a,CaseNumber:o},n),!!i.context_Case_Subject&&{CaseSubject:i.context_Case_Subject}),e&&i)},wl=class{constructor(e,r){this.opts=e,this.provider=r;let a=e.enableAnalytics===!1||en();this.coveoAnalyticsClient=a?new Nr:new je(e)}disable(){this.coveoAnalyticsClient instanceof je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Nr}enable(){this.coveoAnalyticsClient=new je(this.opts)}logInterfaceLoad(e){if(e){let r=j(e);return this.logSearchEvent(y.interfaceLoad,r)}return this.logSearchEvent(y.interfaceLoad)}logInterfaceChange(e){let r=j(e);return this.logSearchEvent(y.interfaceChange,r)}logStaticFilterDeselect(e){let r=j(e);return this.logSearchEvent(y.staticFilterDeselect,r)}logFetchMoreResults(e){if(e){let r=j(e);return this.logCustomEvent(y.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(y.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(e){let r=j(e);return this.logSearchEvent(y.breadcrumbFacet,r)}logBreadcrumbResetAll(e){if(e){let r=j(e);return this.logSearchEvent(y.breadcrumbResetAll,r)}return this.logSearchEvent(y.breadcrumbResetAll)}logFacetSelect(e){let r=j(e);return this.logSearchEvent(y.facetSelect,r)}logFacetExclude(e){let r=j(e);return this.logSearchEvent(y.facetExclude,r)}logFacetDeselect(e){let r=j(e);return this.logSearchEvent(y.facetDeselect,r)}logFacetUpdateSort(e){let r=j(e);return this.logSearchEvent(y.facetUpdateSort,r)}logFacetClearAll(e){let r=j(e);return this.logSearchEvent(y.facetClearAll,r)}logFacetShowMore(e){let r=j(e,!1);return this.logCustomEvent(y.facetShowMore,r)}logFacetShowLess(e){let r=j(e,!1);return this.logCustomEvent(y.facetShowLess,r)}logQueryError(e){let r=j(e,!1);return this.logCustomEvent(y.queryError,r)}logPagerNumber(e){let r=j(e,!1);return this.logCustomEvent(y.pagerNumber,r)}logPagerNext(e){let r=j(e,!1);return this.logCustomEvent(y.pagerNext,r)}logPagerPrevious(e){let r=j(e,!1);return this.logCustomEvent(y.pagerPrevious,r)}logDidYouMeanAutomatic(e){if(e){let r=j(e);return this.logSearchEvent(y.didyoumeanAutomatic,r)}return this.logSearchEvent(y.didyoumeanAutomatic)}logDidYouMeanClick(e){if(e){let r=j(e);return this.logSearchEvent(y.didyoumeanClick,r)}return this.logSearchEvent(y.didyoumeanClick)}logResultsSort(e){let r=j(e);return this.logSearchEvent(y.resultsSort,r)}logSearchboxSubmit(e){if(e){let r=j(e);return this.logSearchEvent(y.searchboxSubmit,r)}return this.logSearchEvent(y.searchboxSubmit)}logContextChanged(e){let r=j(e);return this.logSearchEvent(Le.contextChanged,r)}logExpandToFullUI(e){let r=j(e);return this.logCustomEvent(Le.expandToFullUI,r)}logOpenUserActions(e){let r=j(e,!1);return this.logCustomEvent(Le.openUserActions,r)}logShowPrecedingSessions(e){let r=j(e,!1);return this.logCustomEvent(Le.showPrecedingSessions,r)}logShowFollowingSessions(e){let r=j(e,!1);return this.logCustomEvent(Le.showFollowingSessions,r)}logViewedDocumentClick(e,r){return this.logCustomEvent(Le.clickViewedDocument,Object.assign(Object.assign({},j(r,!1)),{document:e}))}logPageViewClick(e,r){return this.logCustomEvent(Le.clickPageView,Object.assign(Object.assign({},j(r,!1)),{pageView:e}))}logCreateArticle(e,r){return this.logCustomEvent(Le.createArticle,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logDocumentOpen(e,r,a){return this.logClickEvent(y.documentOpen,e,r,a?j(a,!1):void 0)}logCopyToClipboard(e,r,a){return this.logClickEvent(y.copyToClipboard,e,r,a?j(a,!1):void 0)}logCaseSendEmail(e,r,a){return this.logClickEvent(y.caseSendEmail,e,r,a?j(a,!1):void 0)}logFeedItemTextPost(e,r,a){return this.logClickEvent(y.feedItemTextPost,e,r,a?j(a,!1):void 0)}logDocumentQuickview(e,r,a){let o={documentTitle:e.documentTitle,documentURL:e.documentUrl};return this.logClickEvent(y.documentQuickview,e,r,a?Object.assign(Object.assign({},j(a,!1)),o):o)}logCaseAttach(e,r,a){let o={documentTitle:e.documentTitle,documentURL:e.documentUrl,resultUriHash:e.documentUriHash};return this.logClickEvent(y.caseAttach,e,r,a?Object.assign(Object.assign({},j(a,!1)),o):o)}logCaseDetach(e,r){return this.logCustomEvent(y.caseDetach,r?Object.assign(Object.assign({},j(r,!1)),{resultUriHash:e}):{resultUriHash:e})}logLikeSmartSnippet(e){return this.logCustomEvent(y.likeSmartSnippet,e?j(e,!1):void 0)}logDislikeSmartSnippet(e){return this.logCustomEvent(y.dislikeSmartSnippet,e?j(e,!1):void 0)}logExpandSmartSnippet(e){return this.logCustomEvent(y.expandSmartSnippet,e?j(e,!1):void 0)}logCollapseSmartSnippet(e){return this.logCustomEvent(y.collapseSmartSnippet,e?j(e,!1):void 0)}logOpenSmartSnippetFeedbackModal(e){return this.logCustomEvent(y.openSmartSnippetFeedbackModal,e?j(e,!1):void 0)}logCloseSmartSnippetFeedbackModal(e){return this.logCustomEvent(y.closeSmartSnippetFeedbackModal,e?j(e,!1):void 0)}logSmartSnippetFeedbackReason(e,r,a){return this.logCustomEvent(y.sendSmartSnippetReason,a?Object.assign(Object.assign({},j(a,!1)),{reason:e,details:r}):{reason:e,details:r})}logExpandSmartSnippetSuggestion(e,r){let a="documentId"in e?e:{documentId:e};return this.logCustomEvent(y.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},j(r,!1)),a):a)}logCollapseSmartSnippetSuggestion(e,r){let a="documentId"in e?e:{documentId:e};return this.logCustomEvent(y.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},j(r,!1)),a):a)}logOpenSmartSnippetSource(e,r,a){return this.logClickEvent(y.openSmartSnippetSource,e,r,a?j(a,!1):void 0)}logOpenSmartSnippetSuggestionSource(e,r,a){return this.logClickEvent(y.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},j(a,!1)),r):r)}logOpenSmartSnippetInlineLink(e,r,a){return this.logClickEvent(y.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},a?Object.assign(Object.assign({},j(a,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(e,r,a){return this.logClickEvent(y.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},j(a,!1)),r):r)}logLikeGeneratedAnswer(e,r){return this.logCustomEvent(y.likeGeneratedAnswer,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logDislikeGeneratedAnswer(e,r){return this.logCustomEvent(y.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logOpenGeneratedAnswerSource(e,r){return this.logCustomEvent(y.openGeneratedAnswerSource,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logGeneratedAnswerSourceHover(e,r){return this.logCustomEvent(y.generatedAnswerSourceHover,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logGeneratedAnswerCopyToClipboard(e,r){return this.logCustomEvent(y.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logGeneratedAnswerHideAnswers(e,r){return this.logCustomEvent(y.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logGeneratedAnswerShowAnswers(e,r){return this.logCustomEvent(y.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logGeneratedAnswerFeedbackSubmit(e,r){return this.logCustomEvent(y.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logRephraseGeneratedAnswer(e,r){return this.logSearchEvent(y.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logRetryGeneratedAnswer(e){return this.logSearchEvent(y.retryGeneratedAnswer,e?Object.assign({},j(e,!1)):{})}logGeneratedAnswerStreamEnd(e,r){return this.logCustomEvent(y.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},j(r,!1)),e):e)}logCustomEvent(e,r){return v(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(a)),{eventType:Al[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(o)})}logSearchEvent(e,r){return v(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,r))})}logClickEvent(e,r,a,o){return v(this,void 0,void 0,function*(){let n=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),o))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(n)})}logShowMoreFoldedResults(e,r,a){return v(this,void 0,void 0,function*(){return this.logClickEvent(y.showMoreFoldedResults,e,r,a?j(a,!1):void 0)})}logShowLessFoldedResults(e){return v(this,void 0,void 0,function*(){return this.logCustomEvent(y.showLessFoldedResults,e?j(e,!1):void 0)})}getBaseCustomEventRequest(e){return v(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var a,o;return v(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(a=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(a)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return v(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof je?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};var Lg=1,Ng=10,qi=5,Qg=1,Ti=8;function Br(){return{desiredCount:qi,numberOfValues:Ti,set:{}}}function vt(t){let{activeValue:e,ancestryMap:r}=Nb(t);return e?Qb(e,r):[]}function Nb(t){let e=[...t],r=new Map;for(;e.length>0;){let a=e.shift();if(a.state==="selected")return{activeValue:a,ancestryMap:r};if(r)for(let o of a.children)r.set(o,a);e.unshift(...a.children)}return{}}function Qb(t,e){let r=[];if(!t)return[];let a=t;do r.unshift(a),a=e.get(a);while(a);return r}var Bg=(t,e)=>{var r;return(r=t.categoryFacetSet[e])==null?void 0:r.request};var El=(t,e)=>{var a;let r=Bg(t,e);return vt((a=r==null?void 0:r.currentValues)!=null?a:[])};function $t(){return{}}function jg(t){return{request:t}}function Ht(){return{}}function Ug(t){return{request:t}}function Wt(){return{}}function _g(t){return{request:t,hasBreadcrumbs:!0}}function Gt(){return{}}var lt=(t,e)=>{let r=Gg(e,t),a=r?r.field:"",o=Il(a,t);return{facetId:t,facetField:a,facetTitle:o}};function Cr(t,e){let{facetId:r,facetValue:a}=t,o=lt(r,e),n=zg(e,r);return{...o,facetValue:n==="hierarchical"?Wg(e,r):a}}function Ae(t){var e,r,a,o,n;return{facetSet:(e=t.facetSet)!=null?e:Gt(),categoryFacetSet:(r=t.categoryFacetSet)!=null?r:$t(),dateFacetSet:(a=t.dateFacetSet)!=null?a:Ht(),numericFacetSet:(o=t.numericFacetSet)!=null?o:Wt(),automaticFacetSet:(n=t.automaticFacetSet)!=null?n:Br()}}var Di=t=>{let e=[];return Ub(t).forEach((r,a)=>{let o=zg(t,r.facetId),n=Gb(r,a+1);if(jb(r)){if(!!!El(t,r.facetId).length)return;e.push({...n,...Hb(t,r.facetId),facetType:o,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let u=$g(i,s+1,o),c=Bb(r)?Hg(i):$b(i);e.push({...n,...u,...c})})}),_b(t).forEach((r,a)=>{let o=Wb(r,a+1);r.values.forEach((n,i)=>{if(n.state==="idle")return;let s=$g(n,i+1,"specific"),u=Hg(n);e.push({...o,...s,...u})})}),e},Bb=t=>t.type==="specific",jb=t=>t.type==="hierarchical",Ub=t=>[...Object.values(t.facetSet),...Object.values(t.categoryFacetSet),...Object.values(t.dateFacetSet),...Object.values(t.numericFacetSet)].map(e=>e.request),_b=t=>[...Object.values(t.automaticFacetSet.set)].map(e=>e.response),$g=(t,e,r)=>({state:t.state,valuePosition:e,facetType:r}),$b=t=>({displayValue:`${t.start}..${t.end}`,value:`${t.start}..${t.end}`,start:t.start,end:t.end,endInclusive:t.endInclusive}),Hg=t=>({displayValue:t.value,value:t.value}),Wg=(t,e)=>El(t,e).map(a=>a.value).join(";"),Hb=(t,e)=>{let r=1,a=Wg(t,e);return{value:a,valuePosition:r,displayValue:a}},Wb=(t,e)=>({title:Il(t.field,t.field),field:t.field,id:t.field,facetPosition:e}),Gb=(t,e)=>({title:Il(t.field,t.facetId),field:t.field,id:t.facetId,facetPosition:e}),Il=(t,e)=>`${t}_${e}`,Gg=(t,e)=>{var r,a,o,n,i;return((r=t.facetSet[e])==null?void 0:r.request)||((a=t.categoryFacetSet[e])==null?void 0:a.request)||((o=t.dateFacetSet[e])==null?void 0:o.request)||((n=t.numericFacetSet[e])==null?void 0:n.request)||((i=t.automaticFacetSet.set[e])==null?void 0:i.response)},zg=(t,e)=>{let r=Gg(t,e);return r?r.type:"specific"};var ke=()=>({q:"",enableQuerySyntax:!1});function an(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Te(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:an(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:an(),extendedResults:{}}}var on=(r=>(r.Ascending="ascending",r.Descending="descending",r))(on||{}),jr=(n=>(n.Relevancy="relevancy",n.QRE="qre",n.Date="date",n.Field="field",n.NoSort="nosort",n))(jr||{}),zt=t=>{if(Yo(t))return t.map(e=>zt(e)).join(",");switch(t.by){case"relevancy":case"qre":case"nosort":return t.by;case"date":return`date ${t.order}`;case"field":return`@${t.field} ${t.order}`;default:return""}},nn=()=>({by:"relevancy"});var zb=new k({values:{by:new Ye({enum:jr,required:!0}),order:new Ye({enum:on}),field:new P}});function tt(){return zt(nn())}var $e=()=>"default";var ka="2.42.0";var Yb=t=>{let e=t.configuration.search.locale.split("-")[0];return!e||e.length!==2?"en":e},Yt=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return Yb(this.state)}getBaseMetadata(){let{context:e}=this.state,r=(e==null?void 0:e.contextValues)||{},a={};for(let[o,n]of Object.entries(r)){let i=`context_${o}`;a[i]=n}return a.coveoHeadlessVersion=ka,a}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||$e()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var rt=t=>new je(t).getCurrentVisitorId(),kl=t=>{let e=new je(t);e.clear(),e.deleteHttpOnlyVisitorId()},Ft=new fg.HistoryStore,bt=(t,e)=>typeof e=="function"?(...r)=>{let a=Ca(r[0]);try{return e.apply(e,r)}catch(o){return t.error(o,"Error in analytics preprocessRequest. Returning original request."),a}}:void 0,Rt=(t,e)=>(...r)=>{let a=Ca(r[1]);try{return e.apply(e,r)}catch(o){return t.error(o,"Error in analytics hook. Returning original request."),a}};var Vi=class extends Yt{constructor(){super(...arguments);this.getFacetRequest=e=>{var r,a,o,n,i,s,u,c,l,d;return((a=(r=this.state.facetSet)==null?void 0:r[e])==null?void 0:a.request)||((n=(o=this.state.categoryFacetSet)==null?void 0:o[e])==null?void 0:n.request)||((s=(i=this.state.dateFacetSet)==null?void 0:i[e])==null?void 0:s.request)||((c=(u=this.state.numericFacetSet)==null?void 0:u[e])==null?void 0:c.request)||((d=(l=this.state.automaticFacetSet)==null?void 0:l.set[e])==null?void 0:d.response)}}getFacetState(){return Di(Ae(this.getState()))}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||Vi.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,a;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((a=e.search)==null?void 0:a.response.searchUid)||Te().response.searchUid}getSplitTestRunName(){var e;return(e=this.state.search)==null?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var a;let e=!!this.getSplitTestRunName(),r=((a=this.state.search)==null?void 0:a.response.pipeline)||this.state.pipeline||Vi.fallbackPipelineName;return e?r:void 0}getBaseMetadata(){var o,n,i;let e=this.getState(),r=super.getBaseMetadata(),a=(i=(n=(o=e.search)==null?void 0:o.response)==null?void 0:n.extendedResults)==null?void 0:i.generativeQuestionAnsweringId;return a&&(r.generativeQuestionAnsweringId=a),r}getFacetMetadata(e,r){var n;let a=this.getFacetRequest(e),o=(n=a==null?void 0:a.field)!=null?n:"";return{...this.getBaseMetadata(),facetId:e,facetField:o,facetValue:r,facetTitle:`${o}_${e}`}}getFacetClearAllMetadata(e){var o;let r=this.getFacetRequest(e),a=(o=r==null?void 0:r.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,facetTitle:`${a}_${e}`}}getFacetSortMetadata(e,r){var n;let a=this.getFacetRequest(e),o=(n=a==null?void 0:a.field)!=null?n:"";return{...this.getBaseMetadata(),facetId:e,facetField:o,criteria:r,facetTitle:`${o}_${e}`}}getRangeFacetBreadcrumbMetadata(e,r){var n;let a=this.getFacetRequest(e),o=(n=a==null?void 0:a.field)!=null?n:"";return{...this.getBaseMetadata(),facetId:e,facetField:o,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${o}_${e}`}}getResultSortMetadata(){var e;return{...this.getBaseMetadata(),resultsSortBy:(e=this.state.sortCriteria)!=null?e:tt()}}getStaticFilterToggleMetadata(e,r){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:r}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryFacetBreadcrumbMetadata(e,r){var n;let a=this.getFacetRequest(e),o=(n=a==null?void 0:a.field)!=null?n:"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:o,categoryFacetPath:r,categoryFacetTitle:`${o}_${e}`}}getOmniboxAnalyticsMetadata(e,r){let a=this.state.querySuggest&&this.state.querySuggest[e],o=a.completions.map(u=>u.expression),n=a.partialQueries.length-1,i=a.partialQueries[n]||"",s=a.responseId;return{...this.getBaseMetadata(),suggestionRanking:o.indexOf(r),partialQuery:i,partialQueries:a.partialQueries.length>0?a.partialQueries:"",suggestions:o.length>0?o:"",querySuggestResponseId:s}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){var a;let e=this.getState(),r={};return((a=e.generatedAnswer)==null?void 0:a.isVisible)!==void 0&&(r.showGeneratedAnswer=e.generatedAnswer.isVisible),r}get resultURIs(){var e;return(e=this.results)==null?void 0:e.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var e;return(e=this.state.search)==null?void 0:e.response.results}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||ke().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Te().duration}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.totalCountFiltered)||Te().response.totalCountFiltered}},de=Vi;de.fallbackPipelineName="default";var Yg=t=>{let e=t.configuration.accessToken,r=t.configuration.analytics.trackingId,{emit:a}=ig({url:t.configuration.analytics.nextApiBaseUrl,token:e,trackingId:r});return a},Kg=({logger:t,getState:e,analyticsClientMiddleware:r=(n,i)=>i,preprocessRequest:a,provider:o=new de(e)})=>{let n=e(),i=n.configuration.accessToken,s=n.configuration.analytics.apiBaseUrl,u=n.configuration.analytics.runtimeEnvironment,c=n.configuration.analytics.enabled,l=new Qr({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:bt(t,a),beforeSendHooks:[Rt(t,r),(d,g)=>(t.info({...g,type:d,endpoint:s,token:i},"Analytics request"),g)]},o);return c||l.disable(),l},Ol=()=>{let e=Ft.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return e?e.value:""};var sn=class{constructor(e){this._params={};this._basePath=e}addParam(e,r){this._params={...this.params,[e]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([e,r])=>`${e}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},Jg=t=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(t),Xg=(t,e)=>{let r=ql(t);return r&&r.organizationId===e?r:null},ql=t=>{let e=t.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(e==null?void 0:e.groups)?e.groups:null};var Zg=1;var th=(t,e)=>{let r=new sn(`${t.url}${e}`);return r.addParam("access_token",t.accessToken),r.addParam("organizationId",t.organizationId),r.addParam("uniqueId",t.uniqueId),t.q!==void 0&&r.addParam("q",t.q),t.enableNavigation!==void 0&&r.addParam("enableNavigation",`${t.enableNavigation}`),t.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${t.requestedOutputSize}`),t.visitorId!==void 0&&r.addParam("visitorId",`${t.visitorId}`),r.href};var Mi=t=>t.success!==void 0,he=t=>t.error!==void 0;var Li=class{constructor(e){this.state=e()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||$e()}},rh=({logger:t,getState:e,analyticsClientMiddleware:r=(n,i)=>i,preprocessRequest:a,provider:o=new Li(e)})=>{let n=e(),i=n.configuration.accessToken,s=n.configuration.analytics.apiBaseUrl,u=n.configuration.analytics.runtimeEnvironment,c=n.configuration.analytics.enabled,l=new Pl({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:bt(t,a),beforeSendHooks:[Rt(t,r),(d,g)=>(t.info({...g,type:d,endpoint:s,token:i},"Analytics request"),g)]},o);return c||l.disable(),l};var Ur=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var Oa=class extends Yt{constructor(){super(...arguments);this.initialState=Ur()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},ah=({logger:t,getState:e,analyticsClientMiddleware:r=(n,i)=>i,preprocessRequest:a,provider:o=new Oa(e)})=>{let n=e(),i=n.configuration.accessToken,s=n.configuration.analytics.apiBaseUrl,u=n.configuration.analytics.runtimeEnvironment,c=n.configuration.analytics.enabled,l=new Qr({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:bt(t,a),beforeSendHooks:[Rt(t,r),(d,g)=>(t.info({...g,type:d,endpoint:s,token:i},"Analytics request"),g)]},o);return c||l.disable(),l};var Ni=class extends Yt{getSearchUID(){var r,a;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((a=e.search)==null?void 0:a.response.searchUid)||Te().response.searchUid}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return Di(Ae(this.state))}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||ke().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Te().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.search)==null?void 0:e.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.results.length)||Te().response.results.length}},oh=({logger:t,getState:e,analyticsClientMiddleware:r=(n,i)=>i,preprocessRequest:a,provider:o=new Ni(e)})=>{let n=e(),i=n.configuration.accessToken,s=n.configuration.analytics.apiBaseUrl,u=n.configuration.analytics.runtimeEnvironment,c=n.configuration.analytics.enabled,l=new wl({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:bt(t,a),beforeSendHooks:[Rt(t,r),(d,g)=>(t.info({...g,type:d,endpoint:s,token:i},"Analytics request"),g)]},o);return c||l.disable(),l};var _r=class extends Yt{constructor(){super(...arguments);this.initialState=Ur()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},nh=({logger:t,getState:e,analyticsClientMiddleware:r=(n,i)=>i,preprocessRequest:a,provider:o=new _r(e)})=>{let n=e(),i=n.configuration.accessToken,s=n.configuration.analytics.apiBaseUrl,u=n.configuration.analytics.runtimeEnvironment,c=n.configuration.analytics.enabled,l=new Qr({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:bt(t,a),beforeSendHooks:[Rt(t,r),(d,g)=>(t.info({...g,type:d,endpoint:s,token:i},"Analytics request"),g)]},o);return c||l.disable(),l};function Tl(t){let e=ih(t),r=[t,...e].filter(o=>o.parentResult).map(o=>o.parentResult);return wf([t,...e,...r],o=>o.uniqueId)}function ih(t){return t.childResults?t.childResults.flatMap(e=>[e,...ih(e)]):[]}var xr=()=>"";function qa(t,e){return{...new de(e).getBaseMetadata(),actionCause:t,type:t}}function Zb(t){return Object.assign(t,{instantlyCallable:!0})}function eR(t,e){let r=n=>Zb(K(t,n)),a=r(async(n,{getState:i,extra:s})=>{let{analyticsClientMiddleware:u,preprocessRequest:c,logger:l}=s;return await(await e({getState:i,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})).log({state:i(),extra:s})});return Object.assign(a,{prepare:async({getState:n,analyticsClientMiddleware:i,preprocessRequest:s,logger:u})=>{let{description:c,log:l}=await e({getState:n,analyticsClientMiddleware:i,preprocessRequest:s,logger:u});return{description:c,action:r(async(d,{getState:g,extra:p})=>await l({state:g(),extra:p}))}}}),a}var cn=(t,e,r)=>{function a(...o){let n=o.length===1?{...o[0],__legacy__getBuilder:e(o[0].__legacy__getBuilder),analyticsConfigurator:t,providerClass:r}:{prefix:o[0],__legacy__getBuilder:e(o[1]),__legacy__provider:o[2],analyticsConfigurator:t,providerClass:r};return aR(n)}return a},tR=t=>t.configuration.analytics.analyticsMode==="legacy",rR=t=>t.configuration.analytics.analyticsMode==="next",aR=({prefix:t,__legacy__getBuilder:e,__legacy__provider:r,analyticsPayloadBuilder:a,analyticsType:o,analyticsConfigurator:n,providerClass:i})=>(r!=null||(r=s=>new i(s)),eR(t,async({getState:s,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})=>{let d=[],g={log:async({state:R})=>{for(let b of d)await b(R)}},p=s(),m=n({getState:s,logger:l,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(s)}),h=await e(m,s());g.description=h==null?void 0:h.description,d.push(async R=>{tR(R)&&await oR(h,r,R,l,m.coveoAnalyticsClient)});let x=Yg(p);return d.push(async R=>{if(rR(R)&&o&&a){let b=a(R);await cR(x,o,b)}}),g}));async function oR(t,e,r,a,o){e(()=>r);let n=await(t==null?void 0:t.log({searchUID:e(()=>r).getSearchUID()}));a.info({client:o,response:n},"Analytics response")}var sh=t=>(e,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async a=>{t(e,r)}}),D=cn(Kg,t=>t,de),zT=cn(rh,sh,Li),YT=cn(oh,sh,Ni),At=cn(ah,t=>t,Oa),ch=cn(nh,t=>t,_r);var uh={urihash:new P,sourcetype:new P,permanentid:new P},vr={uniqueId:w,raw:new k({values:uh}),title:w,uri:w,clickUri:w,rankingModifier:new P({required:!1,emptyAllowed:!0})},nR={permanentid:w,documentUri:w,clickUri:w};function iR(t){return Object.assign({},...Object.keys(uh).map(e=>({[e]:t[e]})))}function sR(t){return Object.assign({},...Object.keys(vr).map(e=>({[e]:t[e]})),{raw:iR(t.raw)})}var Fr=t=>new N(vr).validate(sR(t));var lh=t=>new N(nR).validate(t);async function cR(t,e,r){await t(e,r)}var Dl=()=>D("analytics/interface/load",t=>t.makeInterfaceLoad()),Qi=()=>D("analytics/interface/change",(t,e)=>t.makeInterfaceChange({interfaceChangeTo:e.configuration.analytics.originLevel2})),Vl=()=>D("analytics/interface/searchFromLink",t=>t.makeSearchFromLink()),Ml=t=>D("analytics/interface/omniboxFromLink",e=>e.makeOmniboxFromLink(t));var pe=(q=>(q.interfaceLoad="interfaceLoad",q.interfaceChange="interfaceChange",q.didyoumeanAutomatic="didyoumeanAutomatic",q.didyoumeanClick="didyoumeanClick",q.resultsSort="resultsSort",q.searchboxSubmit="searchboxSubmit",q.searchboxClear="searchboxClear",q.searchboxAsYouType="searchboxAsYouType",q.breadcrumbFacet="breadcrumbFacet",q.breadcrumbResetAll="breadcrumbResetAll",q.documentQuickview="documentQuickview",q.documentOpen="documentOpen",q.omniboxAnalytics="omniboxAnalytics",q.omniboxFromLink="omniboxFromLink",q.searchFromLink="searchFromLink",q.triggerNotify="notify",q.triggerExecute="execute",q.triggerQuery="query",q.undoTriggerQuery="undoQuery",q.triggerRedirect="redirect",q.pagerResize="pagerResize",q.pagerNumber="pagerNumber",q.pagerNext="pagerNext",q.pagerPrevious="pagerPrevious",q.pagerScrolling="pagerScrolling",q.staticFilterClearAll="staticFilterClearAll",q.staticFilterSelect="staticFilterSelect",q.staticFilterDeselect="staticFilterDeselect",q.facetClearAll="facetClearAll",q.facetSearch="facetSearch",q.facetSelect="facetSelect",q.facetSelectAll="facetSelectAll",q.facetDeselect="facetDeselect",q.facetExclude="facetExclude",q.facetUnexclude="facetUnexclude",q.facetUpdateSort="facetUpdateSort",q.facetShowMore="showMoreFacetResults",q.facetShowLess="showLessFacetResults",q.queryError="query",q.queryErrorBack="errorBack",q.queryErrorClear="errorClearQuery",q.queryErrorRetry="errorRetry",q.recommendation="recommendation",q.recommendationInterfaceLoad="recommendationInterfaceLoad",q.recommendationOpen="recommendationOpen",q.likeSmartSnippet="likeSmartSnippet",q.dislikeSmartSnippet="dislikeSmartSnippet",q.expandSmartSnippet="expandSmartSnippet",q.collapseSmartSnippet="collapseSmartSnippet",q.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",q.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",q.sendSmartSnippetReason="sendSmartSnippetReason",q.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",q.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",q.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",q.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",q.openSmartSnippetSource="openSmartSnippetSource",q.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",q.openSmartSnippetInlineLink="openSmartSnippetInlineLink",q.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",q.recentQueryClick="recentQueriesClick",q.clearRecentQueries="clearRecentQueries",q.recentResultClick="recentResultClick",q.clearRecentResults="clearRecentResults",q.noResultsBack="noResultsBack",q.showMoreFoldedResults="showMoreFoldedResults",q.showLessFoldedResults="showLessFoldedResults",q.copyToClipboard="copyToClipboard",q.caseSendEmail="Case.SendEmail",q.feedItemTextPost="FeedItem.TextPost",q.caseAttach="caseAttach",q.caseDetach="caseDetach",q.retryGeneratedAnswer="retryGeneratedAnswer",q.likeGeneratedAnswer="likeGeneratedAnswer",q.dislikeGeneratedAnswer="dislikeGeneratedAnswer",q.openGeneratedAnswerSource="openGeneratedAnswerSource",q.generatedAnswerStreamEnd="generatedAnswerStreamEnd",q.historyForward="historyForward",q.historyBackward="historyBackward",q))(pe||{});var Ll=()=>ce,dh=()=>w,Kt=S("configuration/updateBasicConfiguration",t=>C(t,{accessToken:ce,organizationId:ce,platformUrl:ce})),Jt=S("configuration/updateSearchConfiguration",t=>C(t,{apiBaseUrl:ce,pipeline:new P({required:!1,emptyAllowed:!0}),searchHub:ce,timezone:ce,locale:ce,authenticationProviders:new W({required:!1,each:w})})),$r=S("configuration/updateAnalyticsConfiguration",t=>(oi()&&(t.enabled=!1),C(t,{enabled:new H({default:!0}),originContext:Ll(),originLevel2:Ll(),originLevel3:Ll(),apiBaseUrl:ce,nextApiBaseUrl:ce,runtimeEnvironment:new ie,anonymous:new H({default:!1}),deviceId:ce,userDisplayName:ce,documentLocation:ce,trackingId:ce,analyticsMode:new P({constrainTo:["legacy","next"],required:!1,default:"legacy"})}))),Va=S("configuration/analytics/disable"),Ma=S("configuration/analytics/enable"),Bi=S("configuration/analytics/originlevel2",t=>C(t,{originLevel2:dh()})),ji=S("configuration/analytics/originlevel3",t=>C(t,{originLevel3:dh()}));var Ui={q:new P,enableQuerySyntax:new H,aq:new P,cq:new P,firstResult:new O({min:0}),numberOfResults:new O({min:0}),sortCriteria:new P,f:new k,fExcluded:new k,cf:new k,nf:new k,df:new k,debug:new H,sf:new k,tab:new P,af:new k};var se=S("searchParameters/restore",t=>C(t,Ui));var _i=S("debug/enable"),$i=S("debug/disable");var Xt=()=>!1;var Hi=I(Xt(),t=>{t.addCase(_i,()=>!0).addCase($i,()=>!1).addCase(se,(e,r)=>{var a;return(a=r.payload.debug)!=null?a:e})});var Nl=S("history/undo"),Ql=S("history/redo"),dt=S("history/snapshot"),ph=K("history/back",async(t,{dispatch:e})=>{e(Nl()),await e(oe())}),fh=K("history/forward",async(t,{dispatch:e})=>{e(Ql()),await e(oe())}),oe=K("history/change",async(t,{getState:e})=>e().history.present);var Wi=S("pipeline/set",t=>C(t,new P({required:!0,emptyAllowed:!0})));var Bl=I(xr(),t=>{t.addCase(Wi,(e,r)=>r.payload).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.pipeline)!=null?o:e}).addCase(Jt,(e,r)=>r.payload.pipeline||e)});var Gi=S("searchHub/set",t=>C(t,new P({required:!0,emptyAllowed:!0})));var jl=I($e(),t=>{t.addCase(Gi,(e,r)=>r.payload).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.searchHub)!=null?o:e}).addCase(Jt,(e,r)=>r.payload.searchHub||e)});var Pe=S("breadcrumb/deselectAll"),Hr=S("breadcrumb/deselectAllNonBreadcrumbs");var Pt=S("facet/updateFacetAutoSelection",t=>C(t,{allow:new H({required:!0})}));var Ul={id:w},uR={...Ul,q:me},zi=S("instantResults/register",t=>C(t,Ul)),br=S("instantResults/updateQuery",t=>C(t,uR)),Yi=S("instantResults/clearExpired",t=>C(t,Ul));var Ki=new O({required:!0,min:0}),Ji=S("pagination/registerNumberOfResults",t=>C(t,Ki)),Xi=S("pagination/updateNumberOfResults",t=>C(t,Ki)),Zi=S("pagination/registerPage",t=>C(t,Ki)),pt=S("pagination/updatePage",t=>C(t,Ki)),es=S("pagination/nextPage"),ts=S("pagination/previousPage");var Je=S("query/updateQuery",t=>C(t,{q:new P,enableQuerySyntax:new H}));var La=async(t,e)=>({analytics:{clientId:await rt(t),clientTimestamp:new Date().toISOString(),documentReferrer:t.originLevel3,originContext:t.originContext,...e&&{actionCause:e.actionCause,customData:e.customData},...t.userDisplayName&&{userDisplayName:t.userDisplayName},...t.documentLocation&&{documentLocation:t.documentLocation},...t.deviceId&&{deviceId:t.deviceId},...Ol()&&{pageId:Ol()},...t.analyticsMode&&t.trackingId&&{trackingId:t.trackingId},capture:t.analyticsMode==="next"}});var Rr=async(t,e)=>{var r,a,o,n;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,debug:t.debug,tab:t.configuration.analytics.originLevel2,referrer:t.configuration.analytics.originLevel3,timezone:t.configuration.search.timezone,...t.configuration.analytics.enabled&&{visitorId:await rt(t.configuration.analytics),actionsHistory:Ft.getHistory()},...((r=t.advancedSearchQueries)==null?void 0:r.aq)&&{aq:t.advancedSearchQueries.aq},...((a=t.advancedSearchQueries)==null?void 0:a.cq)&&{cq:t.advancedSearchQueries.cq},...((o=t.advancedSearchQueries)==null?void 0:o.lq)&&{lq:t.advancedSearchQueries.lq},...((n=t.advancedSearchQueries)==null?void 0:n.dq)&&{dq:t.advancedSearchQueries.dq},...t.context&&{context:t.context.contextValues},...t.fields&&!t.fields.fetchAllFields&&{fieldsToInclude:t.fields.fieldsToInclude},...t.dictionaryFieldContext&&{dictionaryFieldContext:t.dictionaryFieldContext.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.query&&{q:t.query.q,enableQuerySyntax:t.query.enableQuerySyntax},...t.searchHub&&{searchHub:t.searchHub},...t.sortCriteria&&{sortCriteria:t.sortCriteria},...t.configuration.analytics.enabled&&await La(t.configuration.analytics,e),...t.excerptLength&&!te(t.excerptLength.length)&&{excerptLength:t.excerptLength.length},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}};var _l=class extends de{constructor(e){super(e);this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let r in e)for(let a in e[r].cache)if(e[r].cache[a].isActive)return e[r].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let r in e)for(let a in e[r].cache)if(e[r].cache[a].isActive)return e[r].cache[a];return null}get results(){var e;return(e=this.activeInstantResultCache)==null?void 0:e.results}get queryText(){var e;return(e=this.activeInstantResultQuery)!=null?e:ke().q}get responseTime(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.duration)!=null?r:Te().duration}get numberOfResults(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.totalCountFiltered)!=null?r:Te().response.totalCountFiltered}getSearchUID(){var r;return((r=this.activeInstantResultCache)==null?void 0:r.searchUid)||super.getSearchUID()}};var mh=()=>D("analytics/instantResult/searchboxAsYouType",t=>t.makeSearchboxAsYouType(),t=>new _l(t));var ft=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var $l=()=>D("search/logFetchMoreResults",t=>t.makeFetchMoreResults()),He=t=>D("search/queryError",(e,r)=>{var a,o,n,i;return e.makeQueryError({query:((a=r.query)==null?void 0:a.q)||ke().q,aq:((o=r.advancedSearchQueries)==null?void 0:o.aq)||ft().aq,cq:((n=r.advancedSearchQueries)==null?void 0:n.cq)||ft().cq,dq:((i=r.advancedSearchQueries)==null?void 0:i.dq)||ft().dq,errorType:t.type,errorMessage:t.message})});var ln=Fe(rs()),yh=Fe(gh());var as=Fe(rs()),Sh=Fe(hh());as.default.extend(Sh.default);var un="YYYY/MM/DD@HH:mm:ss",lR="1401-01-01";function Na(t,e){let r=(0,as.default)(t,e);return!r.isValid()&&!e?(0,as.default)(t,un):r}function os(t){return t.format(un)}function Jl(t,e){let r=Na(t,e);if(!r.isValid()){let a=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",o=` with the format "${e}""`;throw new Error(`Could not parse the provided date "${t}"${e?o:a}`)}Xl(r)}function Xl(t){if(t.isBefore(lR))throw new Error(`Date is before year 1401, which is unsupported by the API: ${t}`)}ln.default.extend(yh.default);var Ch=["past","now","next"],xh=["minute","hour","day","week","month","quarter","year"],dR=t=>{let e=t==="now";return{amount:new O({required:!e,min:1}),unit:new P({required:!e,constrainTo:xh}),period:new P({required:!0,constrainTo:Ch})}};function Qa(t){if(typeof t=="string"&&!Zt(t))throw new Error(`The value "${t}" is not respecting the relative date format "period-amount-unit"`);let e=typeof t=="string"?Ah(t):t;new N(dR(e.period)).validate(e);let r=Fh(e),a=JSON.stringify(e);if(!r.isValid())throw new Error(`Date is invalid: ${a}`);Xl(r)}function vh(t){let{period:e,amount:r,unit:a}=t;switch(e){case"past":case"next":return`${e}-${r}-${a}`;case"now":return e}}function Fh(t){let{period:e,amount:r,unit:a}=t;switch(e){case"past":return(0,ln.default)().subtract(r,a);case"next":return(0,ln.default)().add(r,a);case"now":return(0,ln.default)()}}function dn(t){return os(Fh(Ah(t)))}function bh(t){return t.toLocaleLowerCase().split("-")}function Zt(t){let[e,r,a]=bh(t);if(e==="now")return!0;if(!Ch.includes(e)||!xh.includes(a))return!1;let o=parseInt(r);return!(isNaN(o)||o<=0)}function Rh(t){return!!t&&typeof t=="object"&&"period"in t}function Ah(t){let[e,r,a]=bh(t);return e==="now"?{period:"now"}:{period:e,amount:r?parseInt(r):void 0,unit:a||void 0}}function Ph(t){return t.type==="dateRange"}function wh(t){return`start${t}`}function Eh(t){return`end${t}`}var pR=()=>({dateFacetValueMap:{}});function fR(t,e,r){let a=t.start,o=t.end;return Zt(a)&&(a=dn(a),r.dateFacetValueMap[e][wh(a)]=t.start),Zt(o)&&(o=dn(o),r.dateFacetValueMap[e][Eh(o)]=t.end),{...t,start:a,end:o}}function mR(t,e){if(Ph(t)){let{facetId:r,currentValues:a}=t;return e.dateFacetValueMap[r]={},{...t,currentValues:a.map(o=>fR(o,r,e))}}return t}function Ba(t){var a;let e=pR();return{request:{...t,facets:(a=t.facets)==null?void 0:a.map(o=>mR(o,e))},mappings:e}}function gR(t,e,r){return{...t,start:r.dateFacetValueMap[e][wh(t.start)]||t.start,end:r.dateFacetValueMap[e][Eh(t.end)]||t.end}}function hR(t,e){return t.facetId in e.dateFacetValueMap}function SR(t,e){return hR(t,e)?{...t,values:t.values.map(r=>gR(r,t.facetId,e))}:t}function ns(t,e){var r;return"success"in t?{success:{...t.success,facets:(r=t.success.facets)==null?void 0:r.map(o=>SR(o,e))}}:t}function pn(t,e){let r={};t.forEach(n=>r[n.facetId]=n);let a=[];e.forEach(n=>{n in r&&(a.push(r[n]),delete r[n])});let o=Object.values(r);return[...a,...o]}function er(t){return Object.values(t).map(e=>e.request)}var is=1,fn=5e3;var we=async(t,e)=>{var s,u;let r=RR(t),a=yR(t),o=CR(t),n=await Rr(t,e),i=()=>t.pagination?t.pagination.firstResult+t.pagination.numberOfResults>fn?fn-t.pagination.firstResult:t.pagination.numberOfResults:void 0;return Ba({...n,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},...r&&{cq:r},...a.length&&{facets:a},...t.pagination&&{numberOfResults:i(),firstResult:t.pagination.firstResult},...t.facetOptions&&{facetOptions:{freezeFacetOrder:t.facetOptions.freezeFacetOrder}},...((s=t.folding)==null?void 0:s.enabled)&&{filterField:t.folding.fields.collection,childField:t.folding.fields.parent,parentField:t.folding.fields.child,filterFieldRange:t.folding.filterFieldRange},...t.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:t.automaticFacetSet.desiredCount,numberOfValues:t.automaticFacetSet.numberOfValues,currentFacets:o}},...((u=t.generatedAnswer)==null?void 0:u.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:t.generatedAnswer.responseFormat}}}})};function yR(t){var e;return pn(vR(t),(e=t.facetOrder)!=null?e:[])}function CR(t){var r;let e=(r=t.automaticFacetSet)==null?void 0:r.set;return e?Object.values(e).map(a=>a.response).map(xR).filter(a=>a.currentValues.length>0):void 0}function xR(t){let{field:e,label:r,values:a}=t,o=a.filter(n=>n.state==="selected");return{field:e,label:r,currentValues:o}}function vR(t){return FR(t).filter(({facetId:e})=>{var r,a,o;return(o=(a=(r=t.facetOptions)==null?void 0:r.facets[e])==null?void 0:a.enabled)!=null?o:!0})}function FR(t){var e,r,a,o;return[...bR((e=t.facetSet)!=null?e:{}),...Ih((r=t.numericFacetSet)!=null?r:{}),...Ih((a=t.dateFacetSet)!=null?a:{}),...er((o=t.categoryFacetSet)!=null?o:{})]}function bR(t){return er(t).map(e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e)}function Ih(t){return er(t).map(e=>{let a=e.currentValues.some(({state:o})=>o!=="idle");return e.generateAutomaticRanges&&!a?{...e,currentValues:[]}:e})}function RR(t){var n;let e=((n=t.advancedSearchQueries)==null?void 0:n.cq.trim())||"",r=Object.values(t.tabSet||{}).find(i=>i.isActive),a=(r==null?void 0:r.expression.trim())||"",o=AR(t);return[e,a,...o].filter(i=>!!i).join(" AND ")}function AR(t){return Object.values(t.staticFilterSet||{}).map(r=>{let a=r.values.filter(n=>n.state==="selected"&&!!n.expression.trim()),o=a.map(n=>n.expression).join(" OR ");return a.length>1?`(${o})`:o})}var ss=S("didYouMean/enable"),Zl=S("didYouMean/disable"),cs=S("didYouMean/automaticCorrections/disable"),ed=S("didYouMean/automaticCorrections/enable"),wt=S("didYouMean/correction",t=>C(t,w));var td=()=>D("analytics/didyoumean/click",t=>t.makeDidYouMeanClick()),kh=()=>D("analytics/didyoumean/automatic",t=>t.makeDidYouMeanAutomatic());function Ar(){return{contextValues:{}}}function Wr(){return{contextValues:{}}}function ja(){return{enabled:!0}}function Gr(){return{freezeFacetOrder:!1,facets:{}}}function zr(){return[]}function mn(){return{}}function rd(t){return t?t.expiresAt&&Date.now()>=t.expiresAt:!1}function Xe(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Ua(){return{}}function _a(){return{}}function $a(){return{}}function ad(){return tr({})}function tr(t){var e,r,a;return{context:t.context||Ar(),dictionaryFieldContext:t.dictionaryFieldContext||Wr(),facetSet:t.facetSet||Gt(),numericFacetSet:t.numericFacetSet||Wt(),dateFacetSet:t.dateFacetSet||Ht(),categoryFacetSet:t.categoryFacetSet||$t(),automaticFacetSet:(e=t.automaticFacetSet)!=null?e:Br(),pagination:t.pagination||Xe(),query:t.query||ke(),tabSet:t.tabSet||$a(),advancedSearchQueries:t.advancedSearchQueries||ft(),staticFilterSet:t.staticFilterSet||_a(),querySet:t.querySet||Ua(),instantResults:t.instantResults||mn(),sortCriteria:t.sortCriteria||tt(),pipeline:t.pipeline||xr(),searchHub:t.searchHub||$e(),facetOptions:t.facetOptions||Gr(),facetOrder:(r=t.facetOrder)!=null?r:zr(),debug:(a=t.debug)!=null?a:Xt()}}var PR=new k({values:{undoneQuery:me},options:{required:!0}}),us=()=>D("analytics/trigger/query",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.queryModification.newQuery)?t.makeTriggerQuery():null}),od=t=>D("analytics/trigger/query/undo",e=>(C(t,PR),e.makeUndoTriggerQuery(t))),nd=()=>D("analytics/trigger/notify",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.notifications.length)?t.makeTriggerNotify({notifications:e.triggers.notifications}):null}),id=()=>D("analytics/trigger/redirect",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.redirectTo)?t.makeTriggerRedirect({redirectedTo:e.triggers.redirectTo}):null}),sd=()=>D("analytics/trigger/execute",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.executions.length)?t.makeTriggerExecute({executions:e.triggers.executions}):null});var Yr=S("trigger/query/ignore",t=>C(t,new P({emptyAllowed:!0,required:!0}))),Ha=S("trigger/query/modification",t=>C(t,new k({values:{originalQuery:ce,modification:ce}})));var Kr=class{constructor(e,r=a=>{this.dispatch(Je({q:a}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},a){var u;let o=new Date().getTime(),n=ns(await this.extra.apiClient.search(r,a),e),i=new Date().getTime()-o,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:n,duration:i,queryExecuted:s,requestExecuted:r}}async process(e){var r,a,o;return(o=(a=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?a:await this.processQueryTriggersOrContinue(e))!=null?o:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return he(e.response)?(this.dispatch(He(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),a=this.getSuccessResponse(e);if(!a||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:n}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&o&&n))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return he(d.response)?(this.dispatch(He(d.response.error)),this.rejectWithValue(d.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(e.queryExecuted,e.duration,r,a),this.extra),this.dispatch(dt(tr(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:kh()})}async processQueryTriggersOrContinue(e){var s,u;let r=this.getSuccessResponse(e);if(!r)return null;let a=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===a)return this.dispatch(Yr("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return he(i.response)?(this.dispatch(He(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(dt(tr(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n,analyticsAction:us()})}processSuccessResponse(e){return this.dispatch(dt(tr(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Mi(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await we(this.getState()),{origin:"mainSearch"});return this.dispatch(wt(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Ha({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await we(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(e,r,a,o){var n,i;return{...a,query:{q:e,enableQuerySyntax:(i=(n=a.query)==null?void 0:n.enableQuerySyntax)!=null?i:ke().enableQuerySyntax},search:{...Te(),duration:r,response:o,results:o.results}}}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var EL=K("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;C(t,{q:new P,enableQuerySyntax:new H,clearFilters:new H}),t.clearFilters&&(r(Pe()),r(Hr())),r(Pt({allow:!0})),r(Je({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(pt(1))}),gn=K("search/executeSearch",async(t,e)=>{let r=e.getState();return await ls(r,e,t)}),hn=K("search/fetchPage",async(t,e)=>{let r=e.getState();return await ld(r,e,t)}),Sn=K("search/fetchMoreResults",async(t,e)=>{let r=e.getState();return await dd(e,r)}),cd=K("search/fetchFacetValues",async(t,e)=>{let r=e.getState();return await OR(e,t,r)}),wR=K("search/fetchInstantResults",async(t,e)=>ud(t,e)),ER=async(t,e)=>{var a,o,n,i;let r=await we(t,e);return r.request={...r.request,firstResult:((o=(a=t.pagination)==null?void 0:a.firstResult)!=null?o:0)+((i=(n=t.search)==null?void 0:n.results.length)!=null?i:0)},r},IR=async(t,e,r)=>{let a=await Rr(t);return Ba({...a,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},kR=async(t,e)=>{let r=await we(t,e);return r.request.numberOfResults=0,r},Oh=t=>{var e;t.configuration.analytics.enabled&&Ft.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})};async function ud(t,e){C(t,{id:w,q:w,maxResultsPerQuery:new O({required:!0,min:1}),cacheTimeout:new O});let{q:r,maxResultsPerQuery:a}=t,o=e.getState(),n=new Kr({...e,analyticsAction:mh()},c=>{e.dispatch(br({q:c,id:t.id}))}),i=await IR(o,r,a),s=await n.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),u=await n.process(s);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function ld(t,e,r){Oh(t);let{analyticsClientMiddleware:a,preprocessRequest:o,logger:n}=e.extra,{description:i}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:o,logger:n}),s=new Kr({...e,analyticsAction:r}),u=await we(t,i),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}async function dd(t,e){let{analyticsClientMiddleware:r,preprocessRequest:a,logger:o}=t.extra,{description:n}=await $l().prepare({getState:()=>t.getState(),analyticsClientMiddleware:r,preprocessRequest:a,logger:o}),i=new Kr({...t,analyticsAction:$l()}),s=await ER(e,n),u=await i.fetchFromAPI(s,{origin:"mainSearch"});return await i.process(u)}async function OR(t,e,r){let{analyticsClientMiddleware:a,preprocessRequest:o,logger:n}=t.extra,{description:i}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:o,logger:n}),s=new Kr({...t,analyticsAction:e}),u=await kR(r,i),c=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(c)}async function ls(t,e,r){Oh(t);let{analyticsClientMiddleware:a,preprocessRequest:o,logger:n}=e.extra,{description:i}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:o,logger:n}),s=await we(t,i),u=new Kr({...e,analyticsAction:r}),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}var Jr=class{constructor(e,r=a=>{this.dispatch(Je({q:a}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},a){var u;let o=new Date().getTime(),n=ns(await this.extra.apiClient.search(r,a),e),i=new Date().getTime()-o,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:n,duration:i,queryExecuted:s,requestExecuted:r}}async process(e){var r,a,o;return(o=(a=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?a:await this.processQueryTriggersOrContinue(e))!=null?o:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return he(e.response)?(this.dispatch(He(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),a=this.getSuccessResponse(e);if(!a||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:n}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&o&&n))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return he(d.response)?(this.dispatch(He(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(dt(tr(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:qa(pe.didyoumeanAutomatic,this.getState)})}async processQueryTriggersOrContinue(e){var s,u;let r=this.getSuccessResponse(e);if(!r)return null;let a=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===a)return this.dispatch(Yr("")),null;let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return he(i.response)?(this.dispatch(He(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(dt(tr(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n,analyticsAction:qa(pe.triggerQuery,this.getState)})}processSuccessResponse(e){return this.dispatch(dt(tr(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Mi(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await we(this.getState()),{origin:"mainSearch"});return this.dispatch(wt(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Ha({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await we(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var qh=K("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;C(t,{q:new P,enableQuerySyntax:new H,clearFilters:new H}),t.clearFilters&&(r(Pe()),r(Hr())),r(Pt({allow:!0})),r(Je({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(pt(1))}),G=K("search/executeSearch",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return ls(r,e,t.legacy);Th(r);let a=Dh(t.next,r),o=await we(r,a),n=new Jr({...e,analyticsAction:a}),i=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(i)}),Wa=K("search/fetchPage",async(t,e)=>{let r=e.getState();if(Th(r),r.configuration.analytics.analyticsMode==="legacy"||!t.next)return ld(r,e,t.legacy);let a=new Jr({...e,analyticsAction:t.next}),o=await we(r,t.next),n=await a.fetchFromAPI(o,{origin:"mainSearch"});return await a.process(n)}),Ga=K("search/fetchMoreResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return dd(e,r);let a=qa(pe.pagerScrolling,e.getState),o=new Jr({...e,analyticsAction:a}),n=await qR(r,a),i=await o.fetchFromAPI(n,{origin:"mainSearch"});return await o.process(i)}),za=K("search/fetchFacetValues",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return ls(r,e,t.legacy);let a=Dh(t.next,r),o=new Jr({...e,analyticsAction:a}),n=await DR(r,a),i=await o.fetchFromAPI(n,{origin:"facetValues"});return await o.process(i)}),yn=K("search/fetchInstantResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return ud(t,e);C(t,{id:w,q:w,maxResultsPerQuery:new O({required:!0,min:1}),cacheTimeout:new O});let{q:a,maxResultsPerQuery:o}=t,n=qa(pe.searchboxAsYouType,e.getState),i=new Jr({...e,analyticsAction:n},l=>{e.dispatch(br({q:l,id:t.id}))}),s=await TR(r,a,o),u=await i.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),c=await i.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,analyticsAction:c.analyticsAction,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}),qR=async(t,e)=>{var a,o,n,i;let r=await we(t,e);return r.request={...r.request,firstResult:((o=(a=t.pagination)==null?void 0:a.firstResult)!=null?o:0)+((i=(n=t.search)==null?void 0:n.results.length)!=null?i:0)},r},TR=async(t,e,r)=>{let a=await Rr(t);return Ba({...a,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},DR=async(t,e)=>{let r=await we(t,e);return r.request.numberOfResults=0,r},Th=t=>{var e;t.configuration.analytics.enabled&&Ft.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})},Dh=(t,e)=>({customData:t.getEventExtraPayload(e),actionCause:t.actionCause,type:t.actionCause});var Xr=(t,e)=>{let r=t;return te(r[e])?te(t.raw[e])?null:t.raw[e]:r[e]},Vh=t=>e=>t.every(r=>!te(Xr(e,r))),Mh=t=>e=>t.every(r=>te(Xr(e,r))),Lh=(t,e)=>r=>{let a=Qh(t,r);return e.some(o=>a.some(n=>`${n}`.toLowerCase()===o.toLowerCase()))},Nh=(t,e)=>r=>{let a=Qh(t,r);return e.every(o=>a.every(n=>`${n}`.toLowerCase()!==o.toLowerCase()))},Qh=(t,e)=>{let r=Xr(e,t);return ri(r)?r:[r]};function pd(t,e){var a;let r=(a=e.payload)!=null?a:null;r&&(t.response=Te().response,t.results=[],t.questionAnswer=an()),t.error=r,t.isLoading=!1}function fd(t,e){t.error=null,t.response=e.payload.response,t.queryExecuted=e.payload.queryExecuted,t.duration=e.payload.duration,t.isLoading=!1}function VR(t,e){fd(t,e),t.results=e.payload.response.results,t.searchResponseId=e.payload.response.searchUid,t.questionAnswer=e.payload.response.questionAnswer,t.extendedResults=e.payload.response.extendedResults}function md(t,e){t.isLoading=!0,t.requestId=e.meta.requestId}var ue=I(Te(),t=>{t.addCase(gn.rejected,(e,r)=>pd(e,r)),t.addCase(Sn.rejected,(e,r)=>pd(e,r)),t.addCase(hn.rejected,(e,r)=>pd(e,r)),t.addCase(gn.fulfilled,(e,r)=>{VR(e,r)}),t.addCase(Sn.fulfilled,(e,r)=>{fd(e,r),e.results=[...e.results,...r.payload.response.results]}),t.addCase(hn.fulfilled,(e,r)=>{fd(e,r),e.results=r.payload.response.results}),t.addCase(cd.fulfilled,(e,r)=>{e.response.facets=r.payload.response.facets,e.response.searchUid=r.payload.response.searchUid}),t.addCase(gn.pending,md),t.addCase(Sn.pending,md),t.addCase(hn.pending,md)});var Bh=I(ka,t=>t);var gd=t=>e=>r=>{var n,i;let a=(n=r.payload)==null?void 0:n.analyticsAction;a!==void 0&&((i=r.payload)==null||delete i.analyticsAction);let o=e(r);return r.type==="search/executeSearch/fullfilled"&&a===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with product recommendation:",r),a!==void 0&&t.dispatch(a),o};var Gh=Fe(Uh());var ds=S("tab/register",t=>{let e=new k({values:{id:w,expression:me}});return C(t,e)}),Pr=S("tab/updateActiveTab",t=>C(t,w));var ps=Fe(rs()),Hh=Fe(_h()),Wh=Fe($h());ps.default.extend(Wh.default);ps.default.extend(Hh.default);var xd="/rest/search/v2",vd="/rest/ua",mt=()=>({organizationId:"",accessToken:"",platformUrl:Io(),search:{apiBaseUrl:`${Io()}${xd}`,locale:"en-US",timezone:ps.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${ni()}${vd}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}});function LR(t,e){if(Jg(t))return t.replace(/^(https:\/\/)platform/,"$1analytics")+vd;let a=Xg(t,e);return a?xa(e,a.environment).analytics:t}var fs=I(mt(),t=>t.addCase(Kt,(e,r)=>{r.payload.accessToken&&(e.accessToken=r.payload.accessToken),r.payload.organizationId&&(e.organizationId=r.payload.organizationId),r.payload.platformUrl&&(e.platformUrl=r.payload.platformUrl,e.search.apiBaseUrl=`${r.payload.platformUrl}${xd}`,e.analytics.apiBaseUrl=LR(r.payload.platformUrl,e.organizationId))}).addCase(Jt,(e,r)=>{r.payload.apiBaseUrl&&(e.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(e.search.locale=r.payload.locale),r.payload.timezone&&(e.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(e.search.authenticationProviders=r.payload.authenticationProviders)}).addCase($r,(e,r)=>{te(r.payload.enabled)||(!r.payload.enabled&&e.analytics.enabled&&kl(e.analytics),e.analytics.enabled=r.payload.enabled),te(r.payload.originContext)||(e.analytics.originContext=r.payload.originContext),te(r.payload.originLevel2)||(e.analytics.originLevel2=r.payload.originLevel2),te(r.payload.originLevel3)||(e.analytics.originLevel3=r.payload.originLevel3),te(r.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=r.payload.apiBaseUrl),te(r.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),te(r.payload.trackingId)||(e.analytics.trackingId=r.payload.trackingId),te(r.payload.analyticsMode)||(e.analytics.analyticsMode=r.payload.analyticsMode);let a=(0,Gh.default)();a&&(e.analytics.analyticsMode="next",e.analytics.trackingId=a),te(r.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),te(r.payload.anonymous)||(e.analytics.anonymous=r.payload.anonymous),te(r.payload.deviceId)||(e.analytics.deviceId=r.payload.deviceId),te(r.payload.userDisplayName)||(e.analytics.userDisplayName=r.payload.userDisplayName),te(r.payload.documentLocation)||(e.analytics.documentLocation=r.payload.documentLocation)}).addCase(Va,e=>{e.analytics.enabled=!1,kl(e.analytics)}).addCase(Ma,e=>{e.analytics.enabled=!0}).addCase(Bi,(e,r)=>{e.analytics.originLevel2=r.payload.originLevel2}).addCase(ji,(e,r)=>{e.analytics.originLevel3=r.payload.originLevel3}).addCase(Pr,(e,r)=>{e.analytics.originLevel2=r.payload}).addCase(se,(e,r)=>{e.analytics.originLevel2=r.payload.tab||e.analytics.originLevel2}));var ae=fs;function NR(t){return t.instantlyCallable}var Fd=()=>t=>e=>t(NR(e)?e():e);var bd=t=>()=>e=>r=>{var o;if(!r.error)return e(r);let a=r.error;if(((o=r.payload)==null?void 0:o.ignored)||t.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return e(r)},Rd=t=>e=>r=>a=>(t.debug({action:a,nextState:e.getState()},`Action dispatched: ${a.type}`),r(a));function zh(t,e){let r={...t},a,o=n=>(i,s)=>{let u=n(i,s);return a?a(u,s):u};return{get combinedReducer(){let n=Ef(Object.entries(e).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return o((0,f.combineReducers)({...n,...r}))},containsAll(n){return Object.keys(n).every(s=>s in r)},add(n){Object.keys(n).filter(i=>!(i in r)).forEach(i=>r[i]=n[i])},addCrossReducer(n){a=n}}}function ms(t,e,r){var a,o,n;e===void 0&&(e=50),r===void 0&&(r={});var i=(a=r.isImmediate)!=null&&a,s=(o=r.callback)!=null&&o,u=r.maxWait,c=Date.now(),l=[];function d(){if(u!==void 0){var p=Date.now()-c;if(p+e>=u)return u-p}return e}var g=function(){var p=[].slice.call(arguments),m=this;return new Promise(function(h,x){var R=i&&n===void 0;if(n!==void 0&&clearTimeout(n),n=setTimeout(function(){if(n=void 0,c=Date.now(),!i){var A=t.apply(m,p);s&&s(A),l.forEach(function(E){return(0,E.resolve)(A)}),l=[]}},d()),R){var b=t.apply(m,p);return s&&s(b),h(b)}l.push({resolve:h,reject:x})})};return g.cancel=function(p){n!==void 0&&clearTimeout(n),l.forEach(function(m){return(0,m.reject)(p)}),l=[]},g}function Yh(t,e){let r=0,a=ms(()=>r=0,500);return o=>n=>async i=>{if(!(typeof i=="function"))return n(i);let u=await n(i);if(!QR(u))return u;if(typeof e!="function")return t.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return t.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,a();let c=await BR(e);o.dispatch(Kt({accessToken:c})),o.dispatch(i)}}function QR(t){var e;return((e=t==null?void 0:t.error)==null?void 0:e.name)===new Eo().name}async function BR(t){try{return await t()}catch(e){return""}}function Kh({reducer:t,preloadedState:e,middlewares:r=[],thunkExtraArguments:a,name:o}){return el({reducer:t,preloadedState:e,devTools:{stateSanitizer:n=>n.history?{...n,history:"<<OMIT>>"}:n,name:o,shouldHotReload:!1},middleware:n=>[...r,...n({thunk:{extraArgument:a}}),Rd(a.logger)]})}var jR={configuration:ae,version:Bh};function UR(t,e){var i,s;let r=((i=t.configuration.organizationEndpoints)==null?void 0:i.analytics)||void 0,{analyticsClientMiddleware:a,...o}=(s=t.configuration.analytics)!=null?s:{},n={...o,nextApiBaseUrl:`${r}/rest/organizations/${t.configuration.organizationId}/events/v1`,apiBaseUrl:r};return oi()?(e.info("Analytics disabled since doNotTrack is active."),{...n,enabled:!1}):n}function Ad(t,e){var u;let r=_R(t,e),{accessToken:a,organizationId:o}=t.configuration,{organizationEndpoints:n}=t.configuration,i=(n==null?void 0:n.platform)||t.configuration.platformUrl;GR(t)&&r.logger.warn(`The \`platformUrl\` (${t.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),WR(t)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):zR(t)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${t.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(u=t.configuration.organizationEndpoints)==null?void 0:u.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(Kt({accessToken:a,organizationId:o,platformUrl:i}));let s=UR(t,r.logger);return s&&r.dispatch($r(s)),r}function _R(t,e){var i;let{reducers:r}=t,a=zh({...jR,...r},(i=t.preloadedState)!=null?i:{});t.crossReducer&&a.addCrossReducer(t.crossReducer);let o=e.logger,n=$R(t,e,a);return{addReducers(s){a.containsAll(s)||(a.add(s),n.replaceReducer(a.combinedReducer))},dispatch:n.dispatch,subscribe:n.subscribe,enableAnalytics(){n.dispatch(Ma())},disableAnalytics(){n.dispatch(Va())},get state(){return n.getState()},logger:o,store:n}}function $R(t,e,r){let{preloadedState:a,configuration:o}=t,n=o.name||"coveo-headless",i=HR(t,e.logger);return Kh({preloadedState:a,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:e,name:n})}function HR(t,e){let{renewAccessToken:r}=t.configuration,a=Yh(e,r);return[Fd,a,bd(e),gd].concat(t.middlewares||[])}function WR(t){return be(t.configuration.organizationEndpoints)}function GR(t){var e;return!te(t.configuration.platformUrl)||te((e=t.configuration.organizationEndpoints)==null?void 0:e.platform)}function zR(t){let{platform:e}=t.configuration.organizationEndpoints;if(be(e))return!1;let r=ql(e);return r&&r.organizationId!==t.configuration.organizationId}var oS=Fe(vn());function kd(t){return(0,oS.default)({name:"@coveo/headless",level:(t==null?void 0:t.level)||"warn",formatters:{log:t==null?void 0:t.logFormatter}})}function Od(t,e){let r=pA(t),a=Ke,o=fA(t);return{analyticsClientMiddleware:r,validatePayload:a,preprocessRequest:o,logger:e}}function pA(t){let{analytics:e}=t,r=(a,o)=>o;return(e==null?void 0:e.analyticsClientMiddleware)||r}function fA(t){return t.preprocessRequest||Dr}var mA=Fe(wu());var Cs={organizationId:w,accessToken:w,platformUrl:new P({required:!1,emptyAllowed:!1}),name:new P({required:!1,emptyAllowed:!1}),analytics:new k({options:{required:!1},values:{enabled:new H({required:!1}),originContext:new P({required:!1}),originLevel2:new P({required:!1}),originLevel3:new P({required:!1}),analyticsMode:new P({constrainTo:["legacy","next"],required:!1})}})};var gA=new N({...Cs,search:new k({options:{required:!1},values:{pipeline:new P({required:!1,emptyAllowed:!0}),searchHub:ce,locale:ce,timezone:ce,authenticationProviders:new W({required:!1,each:w})}})});var FA=new W({each:w,required:!0}),Fn=S("fields/registerFieldsToInclude",t=>C(t,FA)),xs=S("fields/fetchall/enable"),vs=S("fields/fetchall/disable"),Fs=K("fields/fetchDescription",async(t,{extra:e,getState:r,rejectWithValue:a})=>{let o=r(),{accessToken:n,organizationId:i}=o.configuration,{apiBaseUrl:s}=o.configuration.search,u=await e.apiClient.fieldDescriptions({accessToken:n,organizationId:i,url:s});return he(u)?a(u.error):u.success.fields});var qd={collectionField:new P({emptyAllowed:!1,required:!1}),parentField:new P({emptyAllowed:!1,required:!1}),childField:new P({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new O({min:0,required:!1})},Ya=S("folding/register",t=>C(t,qd)),Ka=K("folding/loadCollection",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:a}})=>{let o=e(),n=await Rr(o),i=await a.search({...n,q:bA(o),enableQuerySyntax:!0,cq:`@${o.folding.fields.collection}="${t}"`,filterField:o.folding.fields.collection,childField:o.folding.fields.parent,parentField:o.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return he(i)?r(i.error):{collectionId:t,results:i.success.results,rootResult:o.folding.collections[t].result}});function bA(t){return t.query.q===""?"":t.query.enableQuerySyntax?`${t.query.q} OR @uri`:`( <@- ${t.query.q} -@> ) OR @uri`}var Ja=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});var bs=["author","language","urihash","objecttype","collection","source","permanentid"],Td=[...bs,"date","filetype","parents"],iS=[...Td,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],bn=()=>({fieldsToInclude:bs,fetchAllFields:!1,fieldsDescription:[]});var Rs=I(bn(),t=>t.addCase(Fn,(e,r)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(r.payload))]}).addCase(xs,e=>{e.fetchAllFields=!0}).addCase(vs,e=>{e.fetchAllFields=!1}).addCase(Fs.fulfilled,(e,{payload:r})=>{e.fieldsDescription=r}).addCase(Ya,(e,{payload:r})=>{var o,n,i;let a=Ja().fields;e.fieldsToInclude.push((o=r.collectionField)!=null?o:a.collection,(n=r.parentField)!=null?n:a.parent,(i=r.childField)!=null?i:a.child)}));function z(t){let e,r=new Map,a=()=>r.size===0,o=n=>{try{let i=JSON.stringify(n),s=e!==i;return e=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(n){n();let i=Symbol(),s;return a()&&(e=JSON.stringify(this.state),s=t.subscribe(()=>{o(this.state)&&r.forEach(u=>u())})),r.set(i,n),()=>{r.delete(i),a()&&s&&s()}},get state(){return{}}}}var OB=new N({enabled:new H({default:!1})});var AA=new W({each:w,required:!0}),sS=(t,e)=>(C(t,w),zo(e)?C(e,w):C(e,AA),{payload:{contextKey:t,contextValue:e}}),As=S("context/set",t=>{for(let[e,r]of Object.entries(t))sS(e,r);return{payload:t}}),Ps=S("context/add",t=>sS(t.contextKey,t.contextValue)),ws=S("context/remove",t=>C(t,w));var cS=I(Ar(),t=>{t.addCase(As,(e,r)=>{e.contextValues=r.payload}).addCase(Ps,(e,r)=>{e.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(ws,(e,r)=>{delete e.contextValues[r.payload]}).addCase(oe.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.context.contextValues)})});var oj=new N({values:new k({options:{required:!1}})});var Es=S("dictionaryFieldContext/set",t=>{let e=new k({options:{required:!0}}),r=C(t,e).error;if(r)return{payload:t,error:r};let a=Object.values(t),o=new W({each:me}),n=C(a,o).error;return n?{payload:t,error:n}:{payload:t}}),Is=S("dictionaryFieldContext/add",t=>{let e=new k({options:{required:!0},values:{field:me,key:me}});return C(t,e)}),ks=S("dictionaryFieldContext/remove",t=>C(t,me));var uS=I(Wr(),t=>{t.addCase(Es,(e,r)=>{e.contextValues=r.payload}).addCase(Is,(e,r)=>{let{field:a,key:o}=r.payload;e.contextValues[a]=o}).addCase(ks,(e,r)=>{delete e.contextValues[r.payload]}).addCase(oe.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.dictionaryFieldContext.contextValues)})});var Os=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function qs(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Os(),originalQuery:"",automaticallyCorrectQuery:!0}}var lS=I(qs(),t=>{t.addCase(ss,e=>{e.enableDidYouMean=!0}).addCase(Zl,e=>{e.enableDidYouMean=!1}).addCase(ed,e=>{e.automaticallyCorrectQuery=!0}).addCase(cs,e=>{e.automaticallyCorrectQuery=!1}).addCase(G.pending,e=>{e.queryCorrection=Os(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""}).addCase(G.fulfilled,(e,r)=>{e.queryCorrection=r.payload.response.queryCorrections[0]||Os(),e.originalQuery=r.payload.originalQuery,e.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(wt,(e,r)=>{e.wasCorrectedTo=r.payload})});var U=w;var Ee=S("facetOptions/update",(t={freezeFacetOrder:!0})=>C(t,{freezeFacetOrder:new H({required:!1})})),ar=S("facetOptions/facet/enable",t=>C(t,U)),Ne=S("facetOptions/facet/disable",t=>C(t,U));var Rn={facetId:U,captions:new k({options:{required:!1}}),numberOfValues:new O({required:!1,min:1}),query:new P({required:!1,emptyAllowed:!0})};var IA={path:new W({required:!0,each:w}),displayValue:me,rawValue:me,count:new O({required:!0,min:0})},An=S("categoryFacet/selectSearchResult",t=>C(t,{facetId:U,value:new k({values:IA})})),Ts=S("categoryFacetSearch/register",t=>C(t,Rn));function Xa(t,e){var n;let{facetId:r,criterion:a}=e,o=(n=t[r])==null?void 0:n.request;!o||(o.sortCriteria=a)}function Pn(t){!t||(t.currentValues=t.currentValues.map(e=>({...e,state:"idle"})),t.preventAutoSelect=!0)}function Ds(t,e){!t||(t.numberOfValues=e)}function Vs(t,e){let r=t[e];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function Dd(t,e,r){t.currentValues=kA(e,r),t.numberOfValues=e.length?1:r,t.preventAutoSelect=!0}function kA(t,e){if(!t.length)return[];let r=dS(t[0],e),a=r;for(let o of t.splice(1)){let n=dS(o,e);a.children.push(n),a=n}return a.state="selected",a.retrieveChildren=!0,[r]}function dS(t,e){return{value:t,retrieveCount:e,children:[],state:"idle",retrieveChildren:!1}}var OA={state:new ie({required:!0}),numberOfResults:new O({required:!0,min:0}),value:new P({required:!0,emptyAllowed:!0}),path:new W({required:!0,each:w}),moreValuesAvailable:new H({required:!1})};function Vd(t){t.children.forEach(e=>{Vd(e)}),Ke({state:t.state,numberOfResults:t.numberOfResults,value:t.value,path:t.path,moreValuesAvailable:t.moreValuesAvailable},OA)}var Za={facetId:U,field:w,delimitingCharacter:new P({required:!1,emptyAllowed:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new O({required:!1,min:0}),numberOfValues:new O({required:!1,min:1}),sortCriteria:new ie({required:!1}),basePath:new W({required:!1,each:w}),filterByBasePath:new H({required:!1})},ea=S("categoryFacet/register",t=>C(t,Za)),eo=S("categoryFacet/toggleSelectValue",t=>{try{return Ke(t.facetId,w),Vd(t.selection),{payload:t,error:null}}catch(e){return{payload:t,error:ct(e)}}}),ta=S("categoryFacet/deselectAll",t=>C(t,Za.facetId)),Ms=S("categoryFacet/updateNumberOfValues",t=>C(t,{facetId:Za.facetId,numberOfValues:Za.numberOfValues})),Ls=S("categoryFacet/updateSortCriterion",t=>C(t,{facetId:Za.facetId,criterion:new ie})),Md=S("categoryFacet/updateBasePath",t=>C(t,{facetId:Za.facetId,basePath:new W({each:w})}));var to=I($t(),t=>{t.addCase(ea,(e,r)=>{let a=r.payload,{facetId:o}=a;if(o in e)return;let n=TA(a),i=n.numberOfValues;e[o]={request:n,initialNumberOfValues:i}}).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.categoryFacetSet)!=null?o:e}).addCase(se,(e,r)=>{let a=r.payload.cf||{};Object.keys(e).forEach(o=>{let n=e[o].request,i=a[o]||[];(i.length||n.currentValues.length)&&Dd(n,i,e[o].initialNumberOfValues)})}).addCase(Ls,(e,r)=>{var i;let{facetId:a,criterion:o}=r.payload,n=(i=e[a])==null?void 0:i.request;!n||(n.sortCriteria=o)}).addCase(Md,(e,r)=>{var i;let{facetId:a,basePath:o}=r.payload,n=(i=e[a])==null?void 0:i.request;!n||(n.basePath=[...o])}).addCase(eo,(e,r)=>{var d;let{facetId:a,selection:o,retrieveCount:n}=r.payload,i=(d=e[a])==null?void 0:d.request;if(!i)return;let{path:s}=o,u=s.slice(0,s.length-1),c=qA(i,u,n);if(c.length){let g=c[0];g.retrieveChildren=!0,g.state="selected",g.children=[];return}let l=pS(o.value,n);l.state="selected",c.push(l),i.numberOfValues=1}).addCase(ta,(e,r)=>{let a=r.payload;Vs(e,a)}).addCase(Pe,e=>{Object.keys(e).forEach(r=>Vs(e,r))}).addCase(Pt,(e,r)=>Object.keys(e).forEach(a=>{e[a].request.preventAutoSelect=!r.payload.allow})).addCase(Ms,(e,r)=>{var i;let{facetId:a,numberOfValues:o}=r.payload,n=(i=e[a])==null?void 0:i.request;if(!!n){if(!n.currentValues.length)return Ds(n,o);DA(e,r.payload)}}).addCase(An,(e,r)=>{let{facetId:a,value:o}=r.payload,n=e[a];if(!n)return;let i=[...o.path,o.rawValue];Dd(n.request,i,n.initialNumberOfValues)}).addCase(za.fulfilled,(e,r)=>{fS(e,r.payload.response.facets)}).addCase(G.fulfilled,(e,r)=>{fS(e,r.payload.response.facets)}).addCase(Ne,(e,r)=>{Vs(e,r.payload)})}),Ld={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function qA(t,e,r){let a=t.currentValues;for(let o of e){let n=a[0];(!n||o!==n.value)&&(n=pS(o,r),a.length=0,a.push(n)),n.retrieveChildren=!1,n.state="idle",a=n.children}return a}function TA(t){return{...Ld,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...t}}function pS(t,e){return{value:t,state:"idle",children:[],retrieveChildren:!0,retrieveCount:e}}function fS(t,e){e.forEach(r=>{var i;if(!VA(t,r))return;let a=r.facetId,o=(i=t[a])==null?void 0:i.request;if(!o)return;let n=MA(o,r);o.currentValues=n?[]:o.currentValues,o.preventAutoSelect=!1})}function DA(t,e){var n;let{facetId:r,numberOfValues:a}=e,o=(n=t[r])==null?void 0:n.request.currentValues[0];if(!!o){for(;o.children.length&&(o==null?void 0:o.state)!=="selected";)o=o.children[0];o.retrieveCount=a}}function VA(t,e){return e.facetId in t}function MA(t,e){let r=vt(t.currentValues),a=vt(e.values);return r.length!==a.length}function Ns(t,e,r){let{facetId:a}=e;if(t[a])return;let o=!1,n={...ro,...e},i=r();t[a]={options:n,isLoading:o,response:i,initialNumberOfValues:n.numberOfValues,requestId:""}}function Qs(t,e){let{facetId:r,...a}=e,o=t[r];!o||(o.options={...o.options,...a})}function Bs(t,e,r){let a=t[e];!a||(a.requestId=r,a.isLoading=!0)}function js(t,e){let r=t[e];!r||(r.isLoading=!1)}function Us(t,e,r){let{facetId:a,response:o}=e,n=t[a];!n||n.requestId===r&&(n.isLoading=!1,n.response=o)}function wn(t,e,r){let{facetId:a}=e,o=t[a];!o||(o.requestId="",o.isLoading=!1,o.response=r(),o.options.numberOfValues=o.initialNumberOfValues,o.options.query=ro.query)}function _s(t,e){Object.keys(t).forEach(r=>wn(t,{facetId:r},e))}var ro={captions:{},numberOfValues:10,query:""};var mS=async(t,e,r)=>{let a=e.categoryFacetSearchSet[t].options,o=e.categoryFacetSet[t].request,{captions:n,query:i,numberOfValues:s}=a,{field:u,delimitingCharacter:c,basePath:l,filterFacetCount:d}=o,g=LA(o),p=g.length?[g]:[],m=`*${i}*`;return{url:e.configuration.search.apiBaseUrl,accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")},basePath:l,captions:n,numberOfValues:s,query:m,field:u,delimitingCharacter:c,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await we(e)).request}}},LA=t=>{let e=[],r=t.currentValues[0];for(;r;)e.push(r.value),r=r.children[0];return e};var gS=async(t,e,r)=>{let{captions:a,query:o,numberOfValues:n}=e.facetSearchSet[t].options,{field:i,currentValues:s,filterFacetCount:u}=e.facetSet[t].request,c=s.filter(d=>d.state!=="idle").map(d=>d.value),l=`*${o}*`;return{url:e.configuration.search.apiBaseUrl,accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,...e.configuration.search.authenticationProviders&&{authentication:e.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:n,query:l,field:i,ignoreValues:c,filterFacetCount:u,type:"specific",...r?{}:{searchContext:(await we(e)).request}}};var hS=t=>async(e,{getState:r,extra:{apiClient:a,validatePayload:o}})=>{let n=r(),i;o(e,w),QA(n,e)?i=await gS(e,n,t):i=await mS(e,n,t);let s=await a.facetSearch(i);return{facetId:e,response:s}},or=K("facetSearch/executeSearch",hS(!1)),NA=K("facetSearch/executeSearch",hS(!0)),En=S("facetSearch/clearResults",t=>C(t,{facetId:U})),QA=(t,e)=>t.facetSearchSet!==void 0&&t.facetSet!==void 0&&t.facetSet[e]!==void 0;var SS={facetId:U,value:new k({values:{displayValue:me,rawValue:me,count:new O({required:!0,min:0})}})},Nd=S("facetSearch/register",t=>C(t,Rn)),In=S("facetSearch/update",t=>C(t,Rn)),kn=S("facetSearch/toggleSelectValue",t=>C(t,SS)),Qd=S("facetSearch/toggleExcludeValue",t=>C(t,SS));function $s(){return{}}var Bd=I($s(),t=>{t.addCase(Ts,(e,r)=>{let a=r.payload;Ns(e,a,jd)}).addCase(In,(e,r)=>{Qs(e,r.payload)}).addCase(or.pending,(e,r)=>{let a=r.meta.arg;Bs(e,a,r.meta.requestId)}).addCase(or.rejected,(e,r)=>{let a=r.meta.arg;js(e,a)}).addCase(or.fulfilled,(e,r)=>{Us(e,r.payload,r.meta.requestId)}).addCase(En,(e,{payload:{facetId:r}})=>{wn(e,{facetId:r},jd)}).addCase(G.fulfilled,e=>{_s(e,jd)})});function jd(){return{moreValuesAvailable:!1,values:[]}}var Hs=t=>D("analytics/facet/showMore",(e,r)=>{C(t,U);let a=lt(t,Ae(r));return e.makeFacetShowMore(a)}),Ws=t=>D("analytics/facet/showLess",(e,r)=>{C(t,U);let a=lt(t,Ae(r));return e.makeFacetShowLess(a)}),ao=t=>D("analytics/facet/sortChange",(e,r)=>{C(t,{facetId:U,criterion:new ie({required:!0})});let{facetId:a,criterion:o}=t,n=Ae(r),s={...lt(a,n),criteria:o};return e.makeFacetUpdateSort(s)}),Et=t=>D("analytics/facet/reset",(e,r)=>{C(t,U);let a=Ae(r),o=lt(t,a);return e.makeFacetClearAll(o)}),gt=t=>D("analytics/facet/select",(e,r)=>{C(t,{facetId:U,facetValue:w});let a=Ae(r),o=Cr(t,a);return e.makeFacetSelect(o)});var oo=t=>D("analytics/facet/deselect",(e,r)=>{C(t,{facetId:U,facetValue:w});let a=Ae(r),o=Cr(t,a);return e.makeFacetDeselect(o)}),Ud=t=>D("analytics/facet/breadcrumb",(e,r)=>{C(t,{facetId:U,facetValue:w});let a=Cr(t,Ae(r));return e.makeBreadcrumbFacet(a)});var It=new P({regex:/^[a-zA-Z0-9-_]+$/}),kt=new P({required:!0}),yS=new W({each:new P}),CS=new P,xS=new H,Ot=new H,qt=new O({min:0}),ht=new O({min:1}),Gs=new H({required:!0}),BA=new k,jA=new P,UA={captions:BA,numberOfValues:ht,query:jA},no=new k({values:UA}),zs=new k({options:{required:!1},values:{type:new P({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new W({required:!0,max:25,each:new P({emptyAllowed:!1,required:!0})})}}),vS=new H,Ys=new W({min:1,max:25,required:!1,each:new P({emptyAllowed:!1,required:!0})});var ra={value:w,numberOfResults:new O({min:0}),state:w};var _A={facetId:U,field:new P({required:!0,emptyAllowed:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new O({required:!1,min:0}),numberOfValues:new O({required:!1,min:1}),sortCriteria:new ie({required:!1}),resultsMustMatch:new ie({required:!1}),allowedValues:zs,customSort:Ys},aa=S("facet/register",t=>C(t,_A)),at=S("facet/toggleSelectValue",t=>C(t,{facetId:U,selection:new k({values:ra})})),Tt=S("facet/toggleExcludeValue",t=>C(t,{facetId:U,selection:new k({values:ra})})),De=S("facet/deselectAll",t=>C(t,U)),Ks=S("facet/updateSortCriterion",t=>C(t,{facetId:U,criterion:new ie({required:!0})})),nr=S("facet/updateNumberOfValues",t=>C(t,{facetId:U,numberOfValues:new O({required:!0,min:1})})),ir=S("facet/updateIsFieldExpanded",t=>C(t,{facetId:U,isFieldExpanded:new H({required:!0})})),On=S("facet/updateFreezeCurrentValues",t=>C(t,{facetId:U,freezeCurrentValues:new H({required:!0})}));function wr(t){var n,i;let e=FS(t.start,t),r=FS(t.end,t),a=(n=t.endInclusive)!=null?n:!1,o=(i=t.state)!=null?i:"idle";return{start:e,end:r,endInclusive:a,state:o}}function FS(t,e){let{dateFormat:r}=e;return Rh(t)?(Qa(t),vh(t)):typeof t=="string"&&Zt(t)?(Qa(t),t):(Jl(t,r),os(Na(t,r)))}var qn=S("rangeFacet/updateSortCriterion",t=>C(t,{facetId:U,criterion:new ie({required:!0})}));var oa={state:w,start:new O({required:!0}),end:new O({required:!0}),endInclusive:new H({required:!0}),numberOfResults:new O({required:!0,min:0})},na={start:w,end:w,endInclusive:new H({required:!0}),state:w,numberOfResults:new O({required:!0,min:0})},ia=t=>({facetId:U,selection:typeof t.start=="string"?new k({values:na}):new k({values:oa})});var $A={start:w,end:w,endInclusive:new H({required:!0}),state:w},HA={facetId:U,field:w,currentValues:new W({required:!1,each:new k({values:$A})}),generateAutomaticRanges:new H({required:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new O({required:!1,min:0}),numberOfValues:new O({required:!1,min:1}),sortCriteria:new ie({required:!1}),rangeAlgorithm:new ie({required:!1})};function bS(t){return Zt(t)?dn(t):t}function _d(t){!t.currentValues||t.currentValues.forEach(e=>{let{start:r,end:a}=wr(e);if(Na(bS(r)).isAfter(Na(bS(a))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)})}var sa=S("dateFacet/register",t=>{try{return Ke(t,HA),_d(t),{payload:t,error:null}}catch(e){return{payload:t,error:ct(e)}}}),Er=S("dateFacet/toggleSelectValue",t=>C(t,{facetId:U,selection:new k({values:na})})),io=S("dateFacet/toggleExcludeValue",t=>C(t,{facetId:U,selection:new k({values:na})})),so=S("dateFacet/updateFacetValues",t=>{try{return Ke(t,{facetId:U,values:new W({each:new k({values:na})})}),_d({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:ct(e)}}}),$d=qn,Hd=De;var WA={state:w,start:new O({required:!0}),end:new O({required:!0}),endInclusive:new H({required:!0})},GA={facetId:U,field:w,currentValues:new W({required:!1,each:new k({values:WA})}),generateAutomaticRanges:new H({required:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new O({required:!1,min:0}),numberOfValues:new O({required:!1,min:1}),sortCriteria:new ie({required:!1}),rangeAlgorithm:new ie({required:!1})};function Wd(t){!t.currentValues||t.currentValues.forEach(({start:e,end:r})=>{if(e>r)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${r}`)})}var ca=S("numericFacet/register",t=>{try{return C(t,GA),Wd(t),{payload:t,error:null}}catch(e){return{payload:t,error:ct(e)}}}),Ir=S("numericFacet/toggleSelectValue",t=>C(t,{facetId:U,selection:new k({values:oa})})),co=S("numericFacet/toggleExcludeValue",t=>C(t,{facetId:U,selection:new k({values:oa})})),uo=S("numericFacet/updateFacetValues",t=>{try{return Ke(t,{facetId:U,values:new W({each:new k({values:oa})})}),Wd({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:ct(e)}}}),Gd=qn,zd=De;var Dt=I(Gr(),t=>{t.addCase(Ee,(e,r)=>({...e,...r.payload})).addCase(G.fulfilled,e=>{e.freezeFacetOrder=!1}).addCase(G.rejected,e=>{e.freezeFacetOrder=!1}).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.facetOptions)!=null?o:e}).addCase(ea,(e,r)=>{e.facets[r.payload.facetId]=ja()}).addCase(aa,(e,r)=>{e.facets[r.payload.facetId]=ja()}).addCase(sa,(e,r)=>{e.facets[r.payload.facetId]=ja()}).addCase(ca,(e,r)=>{e.facets[r.payload.facetId]=ja()}).addCase(ar,(e,r)=>{e.facets[r.payload].enabled=!0}).addCase(Ne,(e,r)=>{e.facets[r.payload].enabled=!1}).addCase(se,(e,r)=>{var a,o,n,i,s;[...Object.keys((a=r.payload.f)!=null?a:{}),...Object.keys((o=r.payload.fExcluded)!=null?o:{}),...Object.keys((n=r.payload.cf)!=null?n:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((s=r.payload.df)!=null?s:{})].forEach(u=>{u in e||(e.facets[u]=ja()),e.facets[u].enabled=!0})})});var RS=["alphanumeric","occurrences"];var zA=new N({field:kt,basePath:yS,delimitingCharacter:CS,facetId:It,facetSearch:no,filterByBasePath:xS,filterFacetCount:Ot,injectionDepth:qt,numberOfValues:ht,sortCriteria:new P({constrainTo:RS})});function Tn(){return{}}var Yd=I(Tn(),t=>{t.addCase(Nd,(e,r)=>{let a=r.payload;Ns(e,a,Kd)}).addCase(In,(e,r)=>{Qs(e,r.payload)}).addCase(or.pending,(e,r)=>{let a=r.meta.arg;Bs(e,a,r.meta.requestId)}).addCase(or.rejected,(e,r)=>{let a=r.meta.arg;js(e,a)}).addCase(or.fulfilled,(e,r)=>{Us(e,r.payload,r.meta.requestId)}).addCase(En,(e,{payload:r})=>{wn(e,r,Kd)}).addCase(G.fulfilled,e=>{_s(e,Kd)})});function Kd(){return{moreValuesAvailable:!1,values:[]}}var Ie=(r=>(r.Relevance="relevance",r.Fields="fields",r))(Ie||{}),la=(r=>(r.Ascending="asc",r.Descending="desc",r))(la||{}),sr=()=>({by:"relevance"});var yH=new k({options:{required:!1},values:{by:new Ye({enum:Ie,required:!0}),fields:new W({each:new k({values:{name:new P,direction:new Ye({enum:la})}})})}});var PS=()=>ch("analytics/productListing/load",t=>t.makeInterfaceLoad(),t=>new _r(t)),wS=t=>D("analytics/productListing/open",(e,r)=>(tP(t),e.makeDocumentOpen(rP(t,r),XA(t))),e=>new _r(e)),XA=t=>(t.permanentid||console.warn("Missing field permanentid on productRecommendation. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",t),{contentIDKey:"permanentid",contentIDValue:t.permanentid});function ZA(t){return{uniqueId:t.permanentid,title:t.ec_name||"",uri:t.documentUri,clickUri:t.clickUri}}function eP(t){let e=ZA(t);return Object.assign({},...Object.keys(vr).map(r=>({[r]:e[r]})))}var tP=t=>new N(vr).validate(eP(t)),rP=(t,e)=>{var a;let r=((a=e.productListing)==null?void 0:a.products.findIndex(({permanentid:o})=>t.permanentid===o))||0;return aP(t,r)};function aP(t,e){return{collectionName:"",documentAuthor:"",documentPosition:e+1,documentTitle:t.ec_name||"",documentUri:t.documentUri,documentUriHash:t.documentUriHash,documentUrl:t.clickUri,rankingModifier:"",sourceName:"unknown",queryPipeline:""}}var ES=S("productlisting/setUrl",t=>C(t,{url:new P({required:!0,url:!0})})),IS=S("productlisting/setAdditionalFields",t=>C(t,{additionalFields:new W({required:!0,each:new P({required:!0,emptyAllowed:!1})})})),ot=K("productlisting/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:o})=>{let n=e(),{apiClient:i}=o,s=await i.getProducts(await oP(n));return he(s)?(r(He(s.error)),a(s.error)):{response:s.success,analyticsAction:PS()}}),oP=async t=>{var a,o,n;let e=iP(t),r=await rt(t.configuration.analytics);return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,platformUrl:t.configuration.platformUrl,url:(a=t.productListing)==null?void 0:a.url,...t.configuration.analytics.enabled&&r?{clientId:r}:{},...((o=t.productListing.additionalFields)==null?void 0:o.length)?{additionalFields:t.productListing.additionalFields}:{},...t.productListing.advancedParameters&&nP(t.productListing.advancedParameters)?{advancedParameters:t.productListing.advancedParameters||{}}:{},...e.length&&{facets:{requests:e}},...t.pagination&&{pagination:{numberOfValues:t.pagination.numberOfResults,page:Math.ceil(t.pagination.firstResult/(t.pagination.numberOfResults||1))+1}},...(((n=t.sort)==null?void 0:n.by)||Ie.Relevance)!==Ie.Relevance&&{sort:t.sort},...t.context&&{userContext:t.context.contextValues}}};function nP(t){return t.debug}function iP(t){var e;return pn(sP(t),(e=t.facetOrder)!=null?e:[])}function sP(t){var e,r,a,o;return[...er((e=t.facetSet)!=null?e:{}),...er((r=t.numericFacetSet)!=null?r:{}),...er((a=t.dateFacetSet)!=null?a:{}),...er((o=t.categoryFacetSet)!=null?o:{})]}var lo=I(Gt(),t=>{t.addCase(aa,(e,r)=>{let{facetId:a}=r.payload;a in e||(e[a]=_g(cP(r.payload)))}).addCase(oe.fulfilled,(e,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(se,(e,r)=>{let a=r.payload.f||{},o=r.payload.fExcluded||{};Object.keys(e).forEach(i=>{let{request:s}=e[i],u=a[i]||[],c=o[i]||[],l=s.currentValues.filter(d=>!u.includes(d.value)&&!c.includes(d.value));s.currentValues=[...u.map(kS),...c.map(OS),...l.map(uP)],s.preventAutoSelect=u.length>0,s.numberOfValues=Math.max(u.length+c.length,s.numberOfValues)})}).addCase(at,(e,r)=>{var u;let{facetId:a,selection:o}=r.payload,n=(u=e[a])==null?void 0:u.request;if(!n)return;n.preventAutoSelect=!0;let i=n.currentValues.find(c=>c.value===o.value);if(!i){Zs(n,o);return}let s=i.state==="selected";i.state=s?"idle":"selected",n.freezeCurrentValues=!0}).addCase(Tt,(e,r)=>{var u;let{facetId:a,selection:o}=r.payload,n=(u=e[a])==null?void 0:u.request;if(!n)return;n.preventAutoSelect=!0;let i=n.currentValues.find(c=>c.value===o.value);if(!i){Zs(n,o);return}let s=i.state==="excluded";i.state=s?"idle":"excluded",n.freezeCurrentValues=!0}).addCase(On,(e,r)=>{var i;let{facetId:a,freezeCurrentValues:o}=r.payload,n=(i=e[a])==null?void 0:i.request;!n||(n.freezeCurrentValues=o)}).addCase(De,(e,r)=>{var a;Pn((a=e[r.payload])==null?void 0:a.request)}).addCase(Pe,e=>{Object.values(e).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Pn(r))}).addCase(Hr,e=>{Object.values(e).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Pn(r))}).addCase(Pt,(e,r)=>Object.values(e).forEach(a=>{a.request.preventAutoSelect=!r.payload.allow})).addCase(Ks,(e,r)=>{Xa(e,r.payload)}).addCase(nr,(e,r)=>{var n;let{facetId:a,numberOfValues:o}=r.payload;Ds((n=e[a])==null?void 0:n.request,o)}).addCase(ir,(e,r)=>{var i;let{facetId:a,isFieldExpanded:o}=r.payload,n=(i=e[a])==null?void 0:i.request;!n||(n.isFieldExpanded=o)}).addCase(G.fulfilled,(e,r)=>{r.payload.response.facets.forEach(o=>{var n;return Jd((n=e[o.facetId])==null?void 0:n.request,o)})}).addCase(ot.fulfilled,(e,r)=>{var o,n;(((n=(o=r.payload.response)==null?void 0:o.facets)==null?void 0:n.results)||[]).forEach(i=>{var s;return Jd((s=e[i.facetId])==null?void 0:s.request,i)})}).addCase(za.fulfilled,(e,r)=>{r.payload.response.facets.forEach(o=>{var n;return Jd((n=e[o.facetId])==null?void 0:n.request,o)})}).addCase(kn,(e,r)=>{var l;let{facetId:a,value:o}=r.payload,n=(l=e[a])==null?void 0:l.request;if(!n)return;let{rawValue:i}=o,{currentValues:s}=n,u=s.find(d=>d.value===i);if(u){u.state="selected";return}let c=kS(i);Zs(n,c),n.freezeCurrentValues=!0,n.preventAutoSelect=!0}).addCase(Qd,(e,r)=>{var l;let{facetId:a,value:o}=r.payload,n=(l=e[a])==null?void 0:l.request;if(!n)return;let{rawValue:i}=o,{currentValues:s}=n,u=s.find(d=>d.value===i);if(u){u.state="excluded";return}let c=OS(i);Zs(n,c),n.freezeCurrentValues=!0,n.preventAutoSelect=!0}).addCase(Ne,(e,r)=>{if(!(r.payload in e))return;let{request:a}=e[r.payload];Pn(a)})});function Zs(t,e){let{currentValues:r}=t,a=r.findIndex(s=>s.state==="idle"),o=a===-1?r.length:a,n=r.slice(0,o),i=r.slice(o+1);t.currentValues=[...n,e,...i],t.numberOfValues=t.currentValues.length}function Jd(t,e){!t||(t.currentValues=e.values.map(Zd),t.freezeCurrentValues=!1,t.preventAutoSelect=!1)}var Xd={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function cP(t){return{...Xd,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...t}}function Zd(t){let{value:e,state:r}=t;return{value:e,state:r}}function kS(t){return{value:t,state:"selected"}}function OS(t){return{value:t,state:"excluded"}}function uP(t){return{...t,state:"idle"}}var Dn=t=>t.state==="selected",Vn=t=>t.state==="excluded";var qS={facetId:U,selection:new k({values:ra})},lP=K("facet/executeToggleSelect",({facetId:t,selection:e},r)=>{let{dispatch:a,extra:{validatePayload:o}}=r;o({facetId:t,selection:e},qS),a(at({facetId:t,selection:e})),a(Ee())}),dP=K("facet/executeToggleExclude",({facetId:t,selection:e},r)=>{let{dispatch:a,extra:{validatePayload:o}}=r;o({facetId:t,selection:e},qS),a(Tt({facetId:t,selection:e})),a(Ee())});var po=["allValues","atLeastOneValue"];var tc=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var pP=new N({facetId:It,field:kt,filterFacetCount:Ot,injectionDepth:qt,numberOfValues:ht,sortCriteria:new P({constrainTo:tc}),resultsMustMatch:new P({constrainTo:po}),facetSearch:no});var fP=new N({facetId:It,field:kt,filterFacetCount:Ot,injectionDepth:qt,numberOfValues:ht,sortCriteria:new P({constrainTo:tc}),resultsMustMatch:new P({constrainTo:po}),facetSearch:no,allowedValues:zs,hasBreadcrumbs:vS,customSort:Ys});var rc=S("rangeFacet/executeToggleSelect",t=>C(t,ia(t.selection))),ac=S("rangeFacet/executeToggleExclude",t=>C(t,ia(t.selection)));var VS={facetId:U,selection:new k({values:na})},yP=K("dateFacet/executeToggleSelect",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,VS),e(Er(t)),e(rc(t)),e(Ee())}),CP=K("dateFacet/executeToggleExclude",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,VS),e(io(t)),e(ac(t)),e(Ee())});var oc={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function nc(t,e){let{request:r}=e,{facetId:a}=r;if(a in t)return;let o=MS(r);r.numberOfValues=o,t[a]=e}function ic(t,e,r){var o;let a=(o=t[e])==null?void 0:o.request;!a||(a.currentValues=r,a.numberOfValues=MS(a))}function sc(t,e,r){var i;let a=(i=t[e])==null?void 0:i.request;if(!a)return;let o=lc(a.currentValues,r);if(!o)return;let n=o.state==="selected";o.state=n?"idle":"selected",a.preventAutoSelect=!0}function cc(t,e,r){var i;let a=(i=t[e])==null?void 0:i.request;if(!a)return;let o=lc(a.currentValues,r);if(!o)return;let n=o.state==="excluded";o.state=n?"idle":"excluded",a.preventAutoSelect=!0}function kr(t,e){var a;let r=(a=t[e])==null?void 0:a.request;!r||r.currentValues.forEach(o=>o.state="idle")}function uc(t,e){Object.entries(t).forEach(([r,{request:a}])=>{let o=e[r]||[];a.currentValues.forEach(s=>{let u=!!lc(o,s);return s.state=u?"selected":"idle",s});let n=o.filter(s=>!lc(a.currentValues,s)),i=a.currentValues;i.push(...n),a.numberOfValues=Math.max(a.numberOfValues,i.length)})}function fo(t,e,r){e.forEach(a=>{var s;let o=a.facetId,n=(s=t[o])==null?void 0:s.request;if(!n)return;let i=r(a.values);n.currentValues=i,n.preventAutoSelect=!1})}function lc(t,e){let{start:r,end:a}=e;return t.find(o=>o.start===r&&o.end===a)}function MS(t){let{generateAutomaticRanges:e,currentValues:r,numberOfValues:a}=t;return e?Math.max(a,r.length):r.length}var mo=I(Ht(),t=>{t.addCase(sa,(e,r)=>{let{payload:a}=r,o=xP(a);nc(e,jg(o))}).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.dateFacetSet)!=null?o:e}).addCase(se,(e,r)=>{let a=r.payload.df||{};uc(e,a)}).addCase(Er,(e,r)=>{let{facetId:a,selection:o}=r.payload;sc(e,a,o)}).addCase(io,(e,r)=>{let{facetId:a,selection:o}=r.payload;cc(e,a,o)}).addCase(so,(e,r)=>{let{facetId:a,values:o}=r.payload;ic(e,a,o)}).addCase(Hd,(e,r)=>{kr(e,r.payload)}).addCase(Pe,e=>{Object.keys(e).forEach(r=>{kr(e,r)})}).addCase($d,(e,r)=>{Xa(e,r.payload)}).addCase(G.fulfilled,(e,r)=>{let a=r.payload.response.facets;fo(e,a,LS)}).addCase(ot.fulfilled,(e,r)=>{var o,n;let a=((n=(o=r.payload.response)==null?void 0:o.facets)==null?void 0:n.results)||[];fo(e,a,LS)}).addCase(Ne,(e,r)=>{kr(e,r.payload)})});function xP(t){return{...oc,currentValues:[],preventAutoSelect:!1,type:"dateRange",...t}}function LS(t){return t.map(e=>{let{numberOfResults:r,...a}=e;return a})}var dc=["idle","selected","excluded"];var pc=["ascending","descending"],fc=["even","equiprobable"];var vP={start:new P,end:new P,endInclusive:new H,state:new P({constrainTo:dc})},Pz=new N({facetId:It,field:kt,generateAutomaticRanges:Gs,filterFacetCount:Ot,injectionDepth:qt,numberOfValues:ht,currentValues:new W({each:new k({values:vP})}),sortCriteria:new P({constrainTo:pc}),rangeAlgorithm:new P({constrainTo:fc})});var da=I(Wt(),t=>{t.addCase(ca,(e,r)=>{let{payload:a}=r,o=EP(a);nc(e,Ug(o))}).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.numericFacetSet)!=null?o:e}).addCase(se,(e,r)=>{let a=r.payload.nf||{};uc(e,a)}).addCase(Ir,(e,r)=>{let{facetId:a,selection:o}=r.payload;sc(e,a,o)}).addCase(co,(e,r)=>{let{facetId:a,selection:o}=r.payload;cc(e,a,o)}).addCase(uo,(e,r)=>{let{facetId:a,values:o}=r.payload;ic(e,a,o)}).addCase(zd,(e,r)=>{kr(e,r.payload)}).addCase(Pe,e=>{Object.keys(e).forEach(r=>{kr(e,r)})}).addCase(Gd,(e,r)=>{Xa(e,r.payload)}).addCase(G.fulfilled,(e,r)=>{let a=r.payload.response.facets;fo(e,a,NS)}).addCase(ot.fulfilled,(e,r)=>{var o,n;let a=((n=(o=r.payload.response)==null?void 0:o.facets)==null?void 0:n.results)||[];fo(e,a,NS)}).addCase(Ne,(e,r)=>{kr(e,r.payload)})});function EP(t){return{...oc,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...t}}function NS(t){return t.map(e=>{let{numberOfResults:r,...a}=e;return a})}var QS={facetId:U,selection:new k({values:oa})},IP=K("numericFacet/executeToggleSelect",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,QS),e(Ir(t)),e(rc(t)),e(Ee())}),O2=K("numericFacet/executeToggleExclude",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,QS),e(co(t)),e(ac(t)),e(Ee())});var kP={start:new O,end:new O,endInclusive:new H,state:new P({constrainTo:dc})},$2=new N({facetId:It,field:kt,generateAutomaticRanges:Gs,filterFacetCount:Ot,injectionDepth:qt,numberOfValues:ht,currentValues:new W({each:new k({values:kP})}),sortCriteria:new P({constrainTo:pc}),resultsMustMatch:new P({constrainTo:po}),rangeAlgorithm:new P({constrainTo:fc})});var ep=t=>({by:Ie.Fields,fields:t}),BS=new k({options:{required:!1},values:{by:new Ye({enum:Ie,required:!0}),fields:new W({each:new k({values:{field:new P({required:!0}),direction:new Ye({enum:la}),displayName:new P}})})}});var mc=t=>{let e=VP(t),{view:r,user:a,...o}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,...o,context:{user:a,view:r,cart:t.cart.cartItems.map(n=>t.cart.cart[n])},facets:e,...t.commercePagination&&{page:t.commercePagination.page},...t.commerceSort&&{sort:MP(t.commerceSort.appliedSort)}}};function VP(t){return!t.facetOrder||!t.commerceFacetSet?[]:t.facetOrder.map(e=>t.commerceFacetSet[e].request).filter(e=>e.values.length>0)}function MP(t){if(!!t)return t.by===Ie.Relevance?{sortCriteria:Ie.Relevance}:{sortCriteria:Ie.Fields,fields:t.fields.map(({name:e,direction:r})=>({field:e,direction:r}))}}var gc=()=>At("analytics/commerce/productListing/load",t=>t.makeInterfaceLoad(),t=>new Oa(t));var fe=K("commerce/productListing/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:o})=>{let n=e(),{apiClient:i}=o,s=await i.getProductListing(mc(n));return he(s)?(r(He(s.error)),a(s.error)):{response:s.success,analyticsAction:gc()}});var go=I(zr(),t=>{t.addCase(G.fulfilled,(e,r)=>r.payload.response.facets.map(a=>a.facetId)).addCase(fe.fulfilled,(e,r)=>{let a=o=>{var n;return(n=o.facetId)!=null?n:o.field};return r.payload.response.facets.map(a)}).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.facetOrder)!=null?o:e})});var tp=()=>D("history/analytics/forward",t=>t.makeSearchEvent("historyForward")),rp=()=>D("history/analytics/backward",t=>t.makeSearchEvent("historyBackward")),ap=()=>D("history/analytics/noresultsback",t=>t.makeNoResultsBack());var op=t=>({past:[],present:t,future:[]}),LP=t=>{let{past:e,present:r,future:a}=t;if(!r||e.length===0)return t;let o=e[e.length-1];return{past:e.slice(0,e.length-1),present:o,future:[r,...a]}},NP=t=>{let{past:e,present:r,future:a}=t;if(!r||a.length===0)return t;let o=a[0],n=a.slice(1);return{past:[...e,r],present:o,future:n}},QP=t=>{let{action:e,state:r,reducer:a}=t,{past:o,present:n}=r,i=a(n,e);return n?n===i?r:{past:[...o,n],present:i,future:[]}:op(i)},jS=t=>{let{actionTypes:e,reducer:r}=t,a=op();return(o=a,n)=>{switch(n.type){case e.undo:return LP(o);case e.redo:return NP(o);case e.snapshot:return QP({state:o,reducer:r,action:n});default:return o}}};var BP=Object.getOwnPropertyNames,jP=Object.getOwnPropertySymbols,UP=Object.prototype.hasOwnProperty;function US(t,e){return function(a,o,n){return t(a,o,n)&&e(a,o,n)}}function hc(t){return function(r,a,o){if(!r||!a||typeof r!="object"||typeof a!="object")return t(r,a,o);var n=o.cache,i=n.get(r),s=n.get(a);if(i&&s)return i===a&&s===r;n.set(r,a),n.set(a,r);var u=t(r,a,o);return n.delete(r),n.delete(a),u}}function _S(t){return BP(t).concat(jP(t))}var $S=Object.hasOwn||function(t,e){return UP.call(t,e)};function ho(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var HS="_owner",WS=Object.getOwnPropertyDescriptor,GS=Object.keys;function _P(t,e,r){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(!r.equals(t[a],e[a],a,a,t,e,r))return!1;return!0}function $P(t,e){return ho(t.getTime(),e.getTime())}function zS(t,e,r){if(t.size!==e.size)return!1;for(var a={},o=t.entries(),n=0,i,s;(i=o.next())&&!i.done;){for(var u=e.entries(),c=!1,l=0;(s=u.next())&&!s.done;){var d=i.value,g=d[0],p=d[1],m=s.value,h=m[0],x=m[1];!c&&!a[l]&&(c=r.equals(g,h,n,l,t,e,r)&&r.equals(p,x,g,h,t,e,r))&&(a[l]=!0),l++}if(!c)return!1;n++}return!0}function HP(t,e,r){var a=GS(t),o=a.length;if(GS(e).length!==o)return!1;for(var n;o-- >0;)if(n=a[o],n===HS&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!$S(e,n)||!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function Ln(t,e,r){var a=_S(t),o=a.length;if(_S(e).length!==o)return!1;for(var n,i,s;o-- >0;)if(n=a[o],n===HS&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!$S(e,n)||!r.equals(t[n],e[n],n,n,t,e,r)||(i=WS(t,n),s=WS(e,n),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function WP(t,e){return ho(t.valueOf(),e.valueOf())}function GP(t,e){return t.source===e.source&&t.flags===e.flags}function YS(t,e,r){if(t.size!==e.size)return!1;for(var a={},o=t.values(),n,i;(n=o.next())&&!n.done;){for(var s=e.values(),u=!1,c=0;(i=s.next())&&!i.done;)!u&&!a[c]&&(u=r.equals(n.value,i.value,n.value,i.value,t,e,r))&&(a[c]=!0),c++;if(!u)return!1}return!0}function zP(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var YP="[object Arguments]",KP="[object Boolean]",JP="[object Date]",XP="[object Map]",ZP="[object Number]",ew="[object Object]",tw="[object RegExp]",rw="[object Set]",aw="[object String]",ow=Array.isArray,KS=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,JS=Object.assign,nw=Object.prototype.toString.call.bind(Object.prototype.toString);function iw(t){var e=t.areArraysEqual,r=t.areDatesEqual,a=t.areMapsEqual,o=t.areObjectsEqual,n=t.arePrimitiveWrappersEqual,i=t.areRegExpsEqual,s=t.areSetsEqual,u=t.areTypedArraysEqual;return function(l,d,g){if(l===d)return!0;if(l==null||d==null||typeof l!="object"||typeof d!="object")return l!==l&&d!==d;var p=l.constructor;if(p!==d.constructor)return!1;if(p===Object)return o(l,d,g);if(ow(l))return e(l,d,g);if(KS!=null&&KS(l))return u(l,d,g);if(p===Date)return r(l,d,g);if(p===RegExp)return i(l,d,g);if(p===Map)return a(l,d,g);if(p===Set)return s(l,d,g);var m=nw(l);return m===JP?r(l,d,g):m===tw?i(l,d,g):m===XP?a(l,d,g):m===rw?s(l,d,g):m===ew?typeof l.then!="function"&&typeof d.then!="function"&&o(l,d,g):m===YP?o(l,d,g):m===KP||m===ZP||m===aw?n(l,d,g):!1}}function sw(t){var e=t.circular,r=t.createCustomConfig,a=t.strict,o={areArraysEqual:a?Ln:_P,areDatesEqual:$P,areMapsEqual:a?US(zS,Ln):zS,areObjectsEqual:a?Ln:HP,arePrimitiveWrappersEqual:WP,areRegExpsEqual:GP,areSetsEqual:a?US(YS,Ln):YS,areTypedArraysEqual:a?Ln:zP};if(r&&(o=JS({},o,r(o))),e){var n=hc(o.areArraysEqual),i=hc(o.areMapsEqual),s=hc(o.areObjectsEqual),u=hc(o.areSetsEqual);o=JS({},o,{areArraysEqual:n,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:u})}return o}function cw(t){return function(e,r,a,o,n,i,s){return t(e,r,s)}}function uw(t){var e=t.circular,r=t.comparator,a=t.createState,o=t.equals,n=t.strict;if(a)return function(u,c){var l=a(),d=l.cache,g=d===void 0?e?new WeakMap:void 0:d,p=l.meta;return r(u,c,{cache:g,equals:o,meta:p,strict:n})};if(e)return function(u,c){return r(u,c,{cache:new WeakMap,equals:o,meta:void 0,strict:n})};var i={cache:void 0,equals:o,meta:void 0,strict:n};return function(u,c){return r(u,c,i)}}var NK=Vt(),QK=Vt({strict:!0}),BK=Vt({circular:!0}),jK=Vt({circular:!0,strict:!0}),UK=Vt({createInternalComparator:function(){return ho}}),_K=Vt({strict:!0,createInternalComparator:function(){return ho}}),$K=Vt({circular:!0,createInternalComparator:function(){return ho}}),HK=Vt({circular:!0,createInternalComparator:function(){return ho},strict:!0});function Vt(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,a=t.createInternalComparator,o=t.createState,n=t.strict,i=n===void 0?!1:n,s=sw(t),u=iw(s),c=a?a(u):cw(u);return uw({circular:r,comparator:u,createState:o,equals:c,strict:i})}function Sc(t,e,r=(a,o)=>a===o){return t.length===e.length&&t.findIndex((a,o)=>!r(e[o],a))===-1}function lw(t,e){return t.length!==e.length?!1:t.every(r=>e.findIndex(a=>np(r,a))!==-1)}var np=Vt({createCustomConfig:t=>({...t,areArraysEqual:lw})});var dw=I(ad(),t=>{t.addCase(dt,(e,r)=>pw(e,r.payload)?void 0:r.payload)}),pw=(t,e)=>fw(t.context,e.context)&&mw(t.dictionaryFieldContext,e.dictionaryFieldContext)&&vw(t.advancedSearchQueries,e.advancedSearchQueries)&&gw(t.tabSet,e.tabSet)&&hw(t.staticFilterSet,e.staticFilterSet)&&ip(t.facetSet,e.facetSet)&&ip(t.dateFacetSet,e.dateFacetSet)&&ip(t.numericFacetSet,e.numericFacetSet)&&yw(t.automaticFacetSet,e.automaticFacetSet)&&Sw(t.categoryFacetSet,e.categoryFacetSet)&&Cw(t.pagination,e.pagination)&&xw(t.query,e.query)&&Fw(t,e)&&bw(t.pipeline,e.pipeline)&&Rw(t.searchHub,e.searchHub)&&Aw(t.facetOrder,e.facetOrder)&&Pw(t.debug,e.debug),fw=(t,e)=>JSON.stringify(t.contextValues)===JSON.stringify(e.contextValues),mw=(t,e)=>JSON.stringify(t.contextValues)===JSON.stringify(e.contextValues),gw=(t,e)=>{let r=XS(t),a=XS(e);return(r==null?void 0:r.id)===(a==null?void 0:a.id)},XS=t=>Object.values(t).find(e=>e.isActive),hw=(t,e)=>{for(let[r,a]of Object.entries(e)){if(!t[r])return!1;let o=ZS(t[r]),n=ZS(a);if(JSON.stringify(o)!==JSON.stringify(n))return!1}return!0},ZS=t=>t.values.filter(e=>e.state!=="idle"),ip=(t,e)=>{for(let[r,a]of Object.entries(e)){if(!t[r])return!1;let o=t[r].request.currentValues.filter(i=>i.state!=="idle"),n=a.request.currentValues.filter(i=>i.state!=="idle");if(JSON.stringify(o)!==JSON.stringify(n))return!1}return!0},Sw=(t,e)=>{var r;for(let[a,o]of Object.entries(e)){if(!t[a])return!1;let n=vt((r=t[a])==null?void 0:r.request.currentValues).map(({value:s})=>s),i=vt(o==null?void 0:o.request.currentValues).map(({value:s})=>s);if(JSON.stringify(n)!==JSON.stringify(i))return!1}return!0},yw=(t,e)=>{for(let[r,a]of Object.entries(e.set)){if(!t.set[r])return!1;let o=t.set[r].response.values.filter(i=>i.state!=="idle"),n=a.response.values.filter(i=>i.state!=="idle");if(JSON.stringify(o)!==JSON.stringify(n))return!1}return!0},Cw=(t,e)=>t.firstResult===e.firstResult&&t.numberOfResults===e.numberOfResults,xw=(t,e)=>JSON.stringify(t)===JSON.stringify(e),vw=(t,e)=>JSON.stringify(t)===JSON.stringify(e),Fw=(t,e)=>t.sortCriteria===e.sortCriteria,bw=(t,e)=>t===e,Rw=(t,e)=>t===e,Aw=(t,e)=>Sc(t,e),Pw=(t,e)=>t===e,ey=jS({actionTypes:{redo:Ql.type,undo:Nl.type,snapshot:dt.type},reducer:dw});var Ew=new O({min:Qg,default:Ti,required:!1}),Iw=new O({min:Lg,max:Ng,default:qi,required:!1}),kw={desiredCount:Iw,numberOfValues:Ew},sp=S("automaticFacet/setOptions",t=>C(t,kw)),cp=S("automaticFacet/deselectAll",t=>C(t,U)),Ow=w,So=S("automaticFacet/toggleSelectValue",t=>C(t,{field:Ow,selection:new k({values:ra})}));var yo=I(Xe(),t=>{t.addCase(Ji,(e,r)=>{let a=up(e),o=r.payload;e.defaultNumberOfResults=e.numberOfResults=o,e.firstResult=Nn(a,o)}).addCase(Xi,(e,r)=>{e.numberOfResults=r.payload,e.firstResult=0}).addCase(Pr,e=>{e.firstResult=0}).addCase(Zi,(e,r)=>{let a=r.payload;e.firstResult=Nn(a,e.numberOfResults)}).addCase(pt,(e,r)=>{let a=r.payload;e.firstResult=Nn(a,e.numberOfResults)}).addCase(ts,e=>{let r=up(e),a=Math.max(r-1,is);e.firstResult=Nn(a,e.numberOfResults)}).addCase(es,e=>{let r=up(e),a=qw(e),o=Math.min(r+1,a);e.firstResult=Nn(o,e.numberOfResults)}).addCase(oe.fulfilled,(e,r)=>{r.payload&&(e.numberOfResults=r.payload.pagination.numberOfResults,e.firstResult=r.payload.pagination.firstResult)}).addCase(se,(e,r)=>{var a,o;e.firstResult=(a=r.payload.firstResult)!=null?a:e.firstResult,e.numberOfResults=(o=r.payload.numberOfResults)!=null?o:e.defaultNumberOfResults}).addCase(G.fulfilled,(e,r)=>{let{response:a}=r.payload;e.totalCountFiltered=a.totalCountFiltered}).addCase(ot.fulfilled,(e,r)=>{let{response:a}=r.payload;e.totalCountFiltered=a.pagination.totalCount}).addCase(De,e=>{nt(e)}).addCase(at,e=>{nt(e)}).addCase(ta,e=>{nt(e)}).addCase(eo,e=>{nt(e)}).addCase(An,e=>{nt(e)}).addCase(Er,e=>{nt(e)}).addCase(Ir,e=>{nt(e)}).addCase(Pe,e=>{nt(e)}).addCase(so,e=>{nt(e)}).addCase(uo,e=>{nt(e)}).addCase(kn,e=>{nt(e)}).addCase(So,e=>{nt(e)})});function nt(t){t.firstResult=Xe().firstResult}function up(t){let{firstResult:e,numberOfResults:r}=t;return lp(e,r)}function qw(t){let{totalCountFiltered:e,numberOfResults:r}=t;return ty(e,r)}function Nn(t,e){return(t-1)*e}function lp(t,e){return Math.round(t/e)+1}function ty(t,e){let r=Math.min(t,fn);return Math.ceil(r/e)}function Tw(t){return t.pagination.firstResult}function Dw(t){return t.pagination.numberOfResults}var pa=t=>{let e=Tw(t),r=Dw(t);return lp(e,r)};var yc=()=>D("analytics/pager/resize",(t,e)=>{var r;return t.makePagerResize({currentResultsPerPage:((r=e.pagination)==null?void 0:r.numberOfResults)||Xe().numberOfResults})}),Cc=()=>D("analytics/pager/number",(t,e)=>t.makePagerNumber({pagerNumber:pa(e)})),dp=()=>D("analytics/pager/next",(t,e)=>t.makePagerNext({pagerNumber:pa(e)})),pp=()=>D("analytics/pager/previous",(t,e)=>t.makePagerPrevious({pagerNumber:pa(e)}));var l6=new N({numberOfPages:new O({default:5,min:0})}),d6=new N({page:new O({min:1})});var F5=new N({fieldsToInclude:new W({required:!1,each:new P({required:!0,emptyAllowed:!1})})});var $5=new N({numberOfResults:new O({min:0})});var Qn={id:w},xc=S("querySuggest/register",t=>C(t,{...Qn,count:new O({min:0})})),ny=S("querySuggest/unregister",t=>C(t,Qn)),fa=S("querySuggest/selectSuggestion",t=>C(t,{...Qn,expression:me})),vc=S("querySuggest/clear",t=>C(t,Qn)),Co=K("querySuggest/fetch",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:a,validatePayload:o}})=>{o(t,Qn);let n=t.id,i=await jw(n,e()),s=await a.querySuggest(i);return he(s)?r(s.error):{id:n,q:i.q,...s.success}}),jw=async(t,e)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,count:e.querySuggest[t].count,q:e.querySet[t],locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,actionsHistory:e.configuration.analytics.enabled?Ft.getHistory():[],...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await rt(e.configuration.analytics),...e.configuration.analytics.enabled&&await La(e.configuration.analytics)},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var Bn=()=>D("analytics/searchbox/submit",t=>t.makeSearchboxSubmit());var iy={id:w,query:me},Fc=S("querySet/register",t=>C(t,iy)),bc=S("querySet/update",t=>C(t,iy));var fp=I(Ua(),t=>{t.addCase(Fc,(e,r)=>{let{id:a,query:o}=r.payload;a in e||(e[a]=o)}).addCase(bc,(e,r)=>{let{id:a,query:o}=r.payload;mp(e,a,o)}).addCase(fa,(e,r)=>{let{id:a,expression:o}=r.payload;mp(e,a,o)}).addCase(G.fulfilled,(e,r)=>{let{queryExecuted:a}=r.payload;sy(e,a)}).addCase(se,(e,r)=>{te(r.payload.q)||sy(e,r.payload.q)}).addCase(oe.fulfilled,(e,r)=>{if(!!r.payload)for(let[a,o]of Object.entries(r.payload.querySet))mp(e,a,o)})});function sy(t,e){Object.keys(t).forEach(r=>t[r]=e)}var mp=(t,e,r)=>{e in t&&(t[e]=r)};var gp=t=>D("analytics/querySuggest",(e,r)=>{let a=cy(r,t);return e.makeOmniboxAnalytics(a)});function cy(t,e){let{id:r,suggestion:a}=e,o=t.querySuggest&&t.querySuggest[r];if(!o)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let n=o.completions.map(c=>c.expression),i=o.partialQueries.length-1,s=o.partialQueries[i]||"",u=o.responseId;return{suggestionRanking:n.indexOf(a),partialQuery:s,partialQueries:o.partialQueries,suggestions:n,querySuggestResponseId:u}}var hp=()=>({});var Sp=I(hp(),t=>t.addCase(xc,(e,r)=>{let a=r.payload.id;a in e||(e[a]=Uw(r.payload))}).addCase(ny,(e,r)=>{delete e[r.payload.id]}).addCase(Co.pending,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.currentRequestId=r.meta.requestId,a.isLoading=!0)}).addCase(Co.fulfilled,(e,r)=>{let a=e[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{q:o}=r.payload;o&&a.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions,a.isLoading=!1,a.error=null}).addCase(Co.rejected,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.error=r.payload||null,a.isLoading=!1)}).addCase(vc,(e,r)=>{let a=e[r.payload.id];!a||(a.responseId="",a.completions=[],a.partialQueries=[])}));function Uw(t){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...t}}var ma=I(ke(),t=>t.addCase(Je,(e,r)=>({...e,...r.payload})).addCase(wt,(e,r)=>{e.q=r.payload}).addCase(fa,(e,r)=>{e.q=r.payload.expression}).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.query)!=null?o:e}).addCase(se,(e,r)=>{var a,o;e.q=(a=r.payload.q)!=null?a:e.q,e.enableQuerySyntax=(o=r.payload.enableQuerySyntax)!=null?o:e.enableQuerySyntax}));var yp={open:new P,close:new P},Cp={id:w,numberOfSuggestions:new O({min:0}),enableQuerySyntax:new H,highlightOptions:new k({values:{notMatchDelimiters:new k({values:yp}),exactMatchDelimiters:new k({values:yp}),correctionDelimiters:new k({values:yp})}}),clearFilters:new H},$w=new N(Cp);var dy=I(mn(),t=>{t.addCase(zi,(e,r)=>{let{id:a}=r.payload;e[a]||(e[a]={q:"",cache:{}})}),t.addCase(br,(e,r)=>{let{q:a,id:o}=r.payload;!a||(e[o].q=a)}),t.addCase(Yi,(e,r)=>{let{id:a}=r.payload;Object.entries(e[a].cache).forEach(([o,n])=>{rd(n)&&delete e[a].cache[o]})}),t.addCase(yn.pending,(e,r)=>{for(let o in e)for(let n in e[o].cache)e[o].cache[n].isActive=!1;if(!Rc(e,r.meta)){Ww(e,r.meta);return}let a=Rc(e,r.meta);a.isLoading=!0,a.isActive=!0,a.error=null}),t.addCase(yn.fulfilled,(e,r)=>{let{results:a,searchUid:o,totalCountFiltered:n,duration:i}=r.payload,{cacheTimeout:s}=r.meta.arg,u=Rc(e,r.meta);u.isActive=!0,u.searchUid=o,u.isLoading=!1,u.error=null,u.results=a,u.expiresAt=s?s+Date.now():0,u.totalCountFiltered=n,u.duration=i}),t.addCase(yn.rejected,(e,r)=>{let a=Rc(e,r.meta);a.error=r.error||null,a.isLoading=!1,a.isActive=!1})}),Ww=(t,e)=>{let{q:r,id:a}=e.arg;t[a].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},Rc=(t,e)=>{let{q:r,id:a}=e.arg;return t[a].cache[r]||null};var Gw={searchBoxId:ce,maxResultsPerQuery:new O({required:!0,min:1}),cacheTimeout:new O},zw=new N(Gw);var Ac=()=>D("analytics/sort/results",(t,e)=>t.makeResultsSort({resultsSortBy:e.sortCriteria||tt()}));var py={by:new Ye({enum:jr,required:!0})},Pc=S("sortCriteria/register",t=>fy(t)),wc=S("sortCriteria/update",t=>fy(t)),fy=t=>Yo(t)?(t.forEach(e=>C(e,py)),{payload:t}):C(t,py);var xp=I(tt(),t=>{t.addCase(Pc,(e,r)=>zt(r.payload)).addCase(wc,(e,r)=>zt(r.payload)).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.sortCriteria)!=null?o:e}).addCase(se,(e,r)=>{var a;return(a=r.payload.sortCriteria)!=null?a:e})});var ga=w,Ec=new k({options:{required:!0},values:{caption:me,expression:me,state:new P({constrainTo:["idle","selected","excluded"]})}}),Ic=new W({required:!0,each:Ec});var kc=S("staticFilter/register",t=>C(t,{id:ga,values:Ic})),jn=S("staticFilter/toggleSelect",t=>C(t,{id:ga,value:Ec})),Un=S("staticFilter/toggleExclude",t=>C(t,{id:ga,value:Ec})),Oc=S("staticFilter/deselectAllFilterValues",t=>C(t,ga)),vp=t=>D("analytics/staticFilter/select",e=>e.makeStaticFilterSelect(t)),qc=t=>D("analytics/staticFilter/deselect",e=>e.makeStaticFilterDeselect(t)),Fp=t=>D("analytics/staticFilter/clearAll",e=>e.makeStaticFilterClearAll(t));var bp=I(_a(),t=>t.addCase(kc,(e,r)=>{let a=r.payload,{id:o}=a;o in e||(e[o]=a)}).addCase(jn,(e,r)=>{let{id:a,value:o}=r.payload,n=e[a];if(!n)return;let i=n.values.find(u=>u.caption===o.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Un,(e,r)=>{let{id:a,value:o}=r.payload,n=e[a];if(!n)return;let i=n.values.find(u=>u.caption===o.caption);if(!i)return;let s=i.state==="excluded";i.state=s?"idle":"excluded"}).addCase(Oc,(e,r)=>{let a=r.payload,o=e[a];!o||o.values.forEach(n=>n.state="idle")}).addCase(Pe,e=>{Object.values(e).forEach(r=>{r.values.forEach(a=>a.state="idle")})}).addCase(se,(e,r)=>{let a=r.payload.sf||{};Object.entries(e).forEach(([o,n])=>{let i=a[o]||[];n.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));var LX=new N({id:ga,values:Ic});var Ap=I($a(),t=>{t.addCase(ds,(e,r)=>{let a=r.payload,{id:o}=a;o in e||(e[o]={...a,isActive:!1})}).addCase(Pr,(e,r)=>{let a=r.payload;my(e,a)}).addCase(se,(e,r)=>{let a=r.payload.tab||"";my(e,a)}).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.tabSet)!=null?o:e})});function my(t,e){e in t&&Object.keys(t).forEach(a=>{t[a].isActive=a===e})}var s7=new N({expression:me,id:w}),c7=new N({isActive:new H});var eE={categoryFacetId:U,categoryFacetPath:new W({required:!0,each:w})},tE=(t,{categoryFacetId:e,categoryFacetPath:r})=>{let a=t.categoryFacetSet[e],o=a==null?void 0:a.request.field,n=`${o}_${e}`;return{categoryFacetId:e,categoryFacetPath:r,categoryFacetField:o,categoryFacetTitle:n}},Pp=t=>D("analytics/categoryFacet/breadcrumb",(e,r)=>(C(t,eE),e.makeBreadcrumbFacet(tE(r,t))));var wp=()=>D("analytics/facet/deselectAllBreadcrumbs",t=>t.makeBreadcrumbResetAll());var Tc=(t,{facetId:e,selection:r})=>{let o=(t.dateFacetSet[e]||t.numericFacetSet[e]).request.field,n=`${o}_${e}`;return{facetId:e,facetField:o,facetTitle:n,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var Ep=t=>D("analytics/dateFacet/breadcrumb",(e,r)=>{C(t,ia(t.selection));let a=Tc(r,t);return e.makeBreadcrumbFacet(a)});var Ip=t=>D("analytics/numericFacet/breadcrumb",(e,r)=>{C(t,ia(t.selection));let a=Tc(r,t);return e.makeBreadcrumbFacet(a)});function gy(t){return t.type==="redirect"}var kp=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(gy);return e.length?e[0].content:null}};var Dc=S("standaloneSearchBox/register",t=>C(t,{id:w,redirectionUrl:w})),Vc=S("standaloneSearchBox/reset",t=>C(t,{id:w})),Mc=S("standaloneSearchBox/updateAnalyticsToSearchFromLink",t=>C(t,{id:w})),Lc=S("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),xo=K("standaloneSearchBox/fetchRedirect",async(t,{dispatch:e,getState:r,rejectWithValue:a,extra:{apiClient:o,validatePayload:n}})=>{n(t,{id:new P({emptyAllowed:!1})});let i=await oE(r()),s=await o.plan(i);if(he(s))return a(s.error);let{redirectionUrl:u}=new kp(s.success);return u&&e(aE(u)),u||""}),aE=t=>D("analytics/standaloneSearchBox/redirect",e=>e.makeTriggerRedirect({redirectedTo:t})),oE=async t=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,q:t.query.q,...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await rt(t.configuration.analytics)},...t.configuration.analytics.enabled&&await La(t.configuration.analytics),...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});function Op(){return{}}var hy=I(Op(),t=>t.addCase(Dc,(e,r)=>{let{id:a,redirectionUrl:o}=r.payload;a in e||(e[a]=Sy(o))}).addCase(Vc,(e,r)=>{let{id:a}=r.payload,o=e[a];if(o){e[a]=Sy(o.defaultRedirectionUrl);return}}).addCase(xo.pending,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.isLoading=!0)}).addCase(xo.fulfilled,(e,r)=>{let a=r.payload,o=e[r.meta.arg.id];!o||(o.redirectTo=a||o.defaultRedirectionUrl,o.isLoading=!1)}).addCase(xo.rejected,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.isLoading=!1)}).addCase(Mc,(e,r)=>{let a=e[r.payload.id];!a||(a.analytics.cause="searchFromLink")}).addCase(Lc,(e,r)=>{let a=e[r.payload.id];!a||(a.analytics.cause="omniboxFromLink",a.analytics.metadata=r.payload.metadata)}));function Sy(t){return{defaultRedirectionUrl:t,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var nE=new N({...Cp,redirectionUrl:new P({required:!0,emptyAllowed:!1})});var yy=I(Br(),t=>{t.addCase(G.fulfilled,(e,r)=>{var o;e.set={};let a=(o=r.payload.response.generateAutomaticFacets)==null?void 0:o.facets;a==null||a.forEach(n=>{e.set[n.field]={response:n}})}).addCase(sp,(e,r)=>{r.payload.desiredCount&&(e.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(e.numberOfValues=r.payload.numberOfValues)}).addCase(So,(e,r)=>{var u;let{field:a,selection:o}=r.payload,n=(u=e.set[a])==null?void 0:u.response;if(!n)return;let i=n.values.find(c=>c.value===o.value);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(cp,(e,r)=>{var n;let a=r.payload,o=(n=e.set[a])==null?void 0:n.response;if(!!o)for(let i of o.values)i.state="idle"}).addCase(se,(e,r)=>{var n,i,s;let a=(n=r.payload.af)!=null?n:{},o=Object.keys(e.set);for(let u in a)if(!e.set[u]){let c=sE(u),l=a[u].map(d=>cE(d));c.values.push(...l),e.set[u]={response:c}}for(let u of o)if(!(u in a)){let c=(i=e.set[u])==null?void 0:i.response;for(let l of c.values)l.state="idle"}for(let u in a){let c=(s=e.set[u])==null?void 0:s.response;if(c){let l=c.values;for(let d of l)a[u].includes(d.value)?d.state==="idle"&&(d.state="selected"):d.state="idle"}}}).addCase(oe.fulfilled,(e,r)=>{if(!!r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(Pe,e=>{Object.values(e.set).forEach(({response:r})=>{r.values.forEach(a=>a.state="idle")})})});function sE(t){return{field:t,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function cE(t){return{value:t,state:"selected",numberOfResults:0}}var Or=()=>new P({required:!1,emptyAllowed:!0}),qp=S("advancedSearchQueries/update",t=>C(t,{aq:Or(),cq:Or(),lq:Or(),dq:Or()})),Tp=S("advancedSearchQueries/register",t=>C(t,{aq:Or(),cq:Or(),lq:Or(),dq:Or()}));var Cy=I(ft(),t=>{t.addCase(qp,(e,r)=>{let{aq:a,cq:o,lq:n,dq:i}=r.payload;be(a)||(e.aq=a,e.aqWasSet=!0),be(o)||(e.cq=o,e.cqWasSet=!0),be(n)||(e.lq=n,e.lqWasSet=!0),be(i)||(e.dq=i,e.dqWasSet=!0)}).addCase(Tp,(e,r)=>{let{aq:a,cq:o,lq:n,dq:i}=r.payload;be(a)||(e.defaultFilters.aq=a,e.aqWasSet||(e.aq=a)),be(o)||(e.defaultFilters.cq=o,e.cqWasSet||(e.cq=o)),be(n)||(e.defaultFilters.lq=n,e.lqWasSet||(e.lq=n)),be(i)||(e.defaultFilters.dq=i,e.dqWasSet||(e.dq=i))}).addCase(oe.fulfilled,(e,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.advancedSearchQueries)!=null?o:e}).addCase(se,(e,r)=>{let{aq:a,cq:o}=r.payload;be(a)||(e.aq=a,e.aqWasSet=!0),be(o)||(e.cq=o,e.cqWasSet=!0)})});var Wte=new N({parameters:new k({options:{required:!0},values:Ui})});var Gre=new N({fragment:new P});async function Dp(t,e){var s;let{search:r,accessToken:a,organizationId:o,analytics:n}=t.configuration,i=((s=t.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:a,organizationId:o,enableNavigation:!1,...n.enabled&&{visitorId:await rt(t.configuration.analytics)},q:i,...e,requestedOutputSize:e.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var _n=K("resultPreview/fetchResultContent",async(t,{extra:e,getState:r,rejectWithValue:a})=>{let o=r(),n=await Dp(o,t),i=await e.apiClient.html(n);return he(i)?a(i.error):{content:i.success,uniqueId:t.uniqueId}}),Nc=S("resultPreview/next"),Qc=S("resultPreview/previous"),Bc=S("resultPreview/prepare",t=>C(t,{results:new W({required:!0})})),Fy=2048,jc=K("resultPreview/updateContentURL",async(t,{getState:e,extra:r})=>{let a=e(),o=th(await t.buildResultPreviewRequest(a,{uniqueId:t.uniqueId,requestedOutputSize:t.requestedOutputSize}),t.path);return(o==null?void 0:o.length)>Fy&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${Fy} characters.`),{contentURL:o}});function vo(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var Vp=t=>{let{content:e,isLoading:r,uniqueId:a,contentURL:o}=vo();t.content=e,t.isLoading=r,t.uniqueId=a,t.contentURL=o},Mp=t=>t.filter(e=>e.hasHtmlVersion).map(e=>e.uniqueId),by=I(vo(),t=>{t.addCase(_n.pending,e=>{e.isLoading=!0}).addCase(_n.fulfilled,(e,r)=>{let{content:a,uniqueId:o}=r.payload;e.position=e.resultsWithPreview.indexOf(o),e.content=a,e.uniqueId=o,e.isLoading=!1}).addCase(G.fulfilled,(e,r)=>{Vp(e),e.resultsWithPreview=Mp(r.payload.response.results)}).addCase(Ga.fulfilled,(e,r)=>{Vp(e),e.resultsWithPreview=e.resultsWithPreview.concat(Mp(r.payload.response.results))}).addCase(Wa.fulfilled,Vp).addCase(Bc,(e,r)=>{e.resultsWithPreview=Mp(r.payload.results)}).addCase(Nc,e=>{if(e.isLoading)return;let r=e.position+1;r>e.resultsWithPreview.length-1&&(r=0),e.position=r}).addCase(Qc,e=>{if(e.isLoading)return;let r=e.position-1;r<0&&(r=e.resultsWithPreview.length-1),e.position=r}).addCase(jc.fulfilled,(e,r)=>{e.contentURL=r.payload.contentURL})});function pE(t,e){return t.raw[e.collection]}function Lp(t,e){return t.raw[e.parent]}function $n(t,e){let r=t.raw[e.child];return ri(r)?r[0]:r}function fE(t,e){return(t||e)!==void 0&&t===e}function Ry(t,e,r,a=[]){let o=$n(t,r);return o?a.indexOf(o)!==-1?[]:e.filter(n=>{let i=$n(n,r)===$n(t,r);return Lp(n,r)===o&&!i}).map(n=>({result:n,children:Ry(n,e,r,[...a,o])})):[]}function mE(t,e){return t.find(r=>{let a=Lp(r,e)===void 0,o=fE(Lp(r,e),$n(r,e));return a||o})}function Ay(t){return t.parentResult?Ay(t.parentResult):t}function gE(t,e,r){var n;let a=Tl(t),o=(n=r!=null?r:mE(a,e))!=null?n:Ay(t);return{result:o,children:Ry(o,a,e),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Uc(t,e,r){let a={};return t.forEach(o=>{let n=pE(o,e);!n||!$n(o,e)&&!o.parentResult||(a[n]=gE(o,e,r))}),a}function Py(t,e){if(!t.collections[e])throw new Error(`Missing collection ${e} from ${Object.keys(t.collections)}: Folding most probably in an invalid state...`);return t.collections[e]}var wy=I(Ja(),t=>t.addCase(G.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?Uc(r.response.results,e.fields):{}}).addCase(Wa.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?Uc(r.response.results,e.fields):{}}).addCase(Ga.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?{...e.collections,...Uc(r.response.results,e.fields)}:{}}).addCase(Ya,(e,{payload:r})=>{var a,o,n,i;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:(a=r.collectionField)!=null?a:e.fields.collection,parent:(o=r.parentField)!=null?o:e.fields.parent,child:(n=r.childField)!=null?n:e.fields.child},filterFieldRange:(i=r.numberOfFoldedResults)!=null?i:e.filterFieldRange}}).addCase(Ka.pending,(e,{meta:r})=>{let a=r.arg;Py(e,a).isLoadingMoreResults=!0}).addCase(Ka.rejected,(e,{meta:r})=>{let a=r.arg;Py(e,a).isLoadingMoreResults=!1}).addCase(Ka.fulfilled,(e,{payload:{collectionId:r,results:a,rootResult:o}})=>{let n=Uc(a,e.fields,o);if(!n||!n[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(a)}. Folding most probably in an invalid state... `);e.collections[r]=n[r],e.collections[r].moreResultsAvailable=!1}));var woe=new N(qd);var Np=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var _c=I(Np(),t=>t.addCase(G.pending,e=>{e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore}}).addCase(G.fulfilled,(e,r)=>{var s;let a=[],o=[],n=[],i=[];r.payload.response.triggers.forEach(u=>{switch(u.type){case"redirect":a.push(u.content);break;case"query":o.push(u.content);break;case"execute":n.push({functionName:u.content.name,params:u.content.params});break;case"notify":i.push(u.content);break}}),e.redirectTo=(s=a[0])!=null?s:"",e.query=e.queryModification.newQuery,e.executions=n,e.notifications=i}).addCase(Ha,(e,r)=>{e.queryModification={...r.payload,queryToIgnore:""}}).addCase(Yr,(e,r)=>{e.queryModification.queryToIgnore=r.payload}));var Ey=()=>new k({values:{questionAnswerId:w},options:{required:!0}});function Fo(t){return C(t,Ey())}function $c(t,e){var o,n,i,s,u;let r=(n=(o=t.questionAnswering)==null?void 0:o.relatedQuestions.findIndex(c=>c.questionAnswerId===e))!=null?n:-1;if(r===-1)return null;let a=(u=(s=(i=t.search)==null?void 0:i.questionAnswer)==null?void 0:s.relatedQuestions)==null?void 0:u[r];return a!=null?a:null}var ky=()=>D("analytics/smartSnippet/expand",t=>t.makeExpandSmartSnippet()),Oy=()=>D("analytics/smartSnippet/collapse",t=>t.makeCollapseSmartSnippet()),qy=()=>D("analytics/smartSnippet/like",t=>t.makeLikeSmartSnippet()),Ty=()=>D("analytics/smartSnippet/dislike",t=>t.makeDislikeSmartSnippet());var Dy=()=>D("analytics/smartSnippet/feedbackModal/open",t=>t.makeOpenSmartSnippetFeedbackModal()),Vy=()=>D("analytics/smartSnippet/feedbackModal/close",t=>t.makeCloseSmartSnippetFeedbackModal()),My=t=>D("analytics/smartSnippet/sendFeedback",e=>e.makeSmartSnippetFeedbackReason(t)),Ly=t=>D("analytics/smartSnippet/sendFeedback",e=>e.makeSmartSnippetFeedbackReason("other",t)),Ny=t=>D("analytics/smartSnippetSuggestion/expand",(e,r)=>{Fo(t);let a=$c(r,t.questionAnswerId);return a?e.makeExpandSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),Qy=t=>D("analytics/smartSnippetSuggestion/expand",(e,r)=>{Fo(t);let a=$c(r,t.questionAnswerId);return a?e.makeCollapseSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null});var Hc=S("smartSnippet/expand"),Wc=S("smartSnippet/collapse"),Gc=S("smartSnippet/like"),zc=S("smartSnippet/dislike"),Yc=S("smartSnippet/feedbackModal/open"),Kc=S("smartSnippet/feedbackModal/close"),Jc=S("smartSnippet/related/expand",t=>Fo(t)),Xc=S("smartSnippet/related/collapse",t=>Fo(t));var Hn=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var By=(t,e)=>t.findIndex(r=>r.questionAnswerId===e.questionAnswerId);function jy({question:t,answerSnippet:e,documentId:{contentIdKey:r,contentIdValue:a}}){return ai({question:t,answerSnippet:e,contentIdKey:r,contentIdValue:a})}function vE(t,e){let r=jy(t);return e&&r===e.questionAnswerId?e:{contentIdKey:t.documentId.contentIdKey,contentIdValue:t.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var Wn=I(Hn(),t=>t.addCase(Hc,e=>{e.expanded=!0}).addCase(Wc,e=>{e.expanded=!1}).addCase(Gc,e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1}).addCase(zc,e=>{e.liked=!1,e.disliked=!0}).addCase(Yc,e=>{e.feedbackModalOpen=!0}).addCase(Kc,e=>{e.feedbackModalOpen=!1}).addCase(G.fulfilled,(e,r)=>{let a=r.payload.response.questionAnswer.relatedQuestions.map((n,i)=>vE(n,e.relatedQuestions[i])),o=jy(r.payload.response.questionAnswer);return e.questionAnswerId===o?{...e,relatedQuestions:a}:{...Hn(),relatedQuestions:a,questionAnswerId:o}}).addCase(Jc,(e,r)=>{let a=By(e.relatedQuestions,r.payload);a!==-1&&(e.relatedQuestions[a].expanded=!0)}).addCase(Xc,(e,r)=>{let a=By(e.relatedQuestions,r.payload);a!==-1&&(e.relatedQuestions[a].expanded=!1)}));var FE={results:new W({required:!0,each:new k({values:vr})}),maxLength:new O({required:!0,min:1,default:10})},Zc=S("recentResults/registerRecentResults",t=>C(t,FE)),ha=S("recentResults/pushRecentResult",t=>(Fr(t),{payload:t})),eu=S("recentResults/clearRecentResults");function cr(t,e,r){if(!bE(t))throw L;let a=1e3,o={selectionDelay:a,debounceWait:a,...e.options},n;return{select:ms(r,o.debounceWait,{isImmediate:!0}),beginDelayedSelect(){n=setTimeout(r,o.selectionDelay)},cancelPendingSelect(){n&&clearTimeout(n)}}}function bE(t){return t.addReducers({configuration:ae}),!0}var OE={queries:new W({required:!0,each:new P({emptyAllowed:!1})}),maxLength:new O({required:!0,min:1,default:10})},tu=S("recentQueries/registerRecentQueries",t=>C(t,OE)),ru=S("recentQueries/clearRecentQueries");function Qp(){return{queries:[],maxLength:10}}var Uy=I(Qp(),t=>{t.addCase(tu,(e,r)=>{e.queries=r.payload.queries.slice(0,r.payload.maxLength),e.maxLength=r.payload.maxLength}).addCase(ru,e=>{e.queries=[]}).addCase(G.fulfilled,(e,r)=>{let a=r.payload.queryExecuted.trim(),o=r.payload.response.results;if(!a.length||!o.length)return;e.queries=e.queries.filter(i=>i!==a);let n=e.queries.slice(0,e.maxLength-1);e.queries=[a,...n]})});var Sce=new N({queries:new W({required:!0})}),yce=new N({maxLength:new O({required:!0,min:1}),clearFilters:new H});function Bp(){return{results:[],maxLength:10}}var _y=I(Bp(),t=>{t.addCase(Zc,(e,r)=>{e.results=r.payload.results.slice(0,r.payload.maxLength),e.maxLength=r.payload.maxLength}).addCase(eu,e=>{e.results=[]}).addCase(ha,(e,r)=>{let a=r.payload;e.results=e.results.filter(n=>n.uniqueId!==a.uniqueId);let o=e.results.slice(0,e.maxLength-1);e.results=[a,...o]})});var Uce=new N({results:new W({required:!0})}),_ce=new N({maxLength:new O({required:!0,min:1})});function LE(t){return t.addReducers({configuration:ae}),{disableAnalytics:Va,enableAnalytics:Ma,setOriginLevel2:Bi,setOriginLevel3:ji,updateAnalyticsConfiguration:$r,updateBasicConfiguration:Kt}}var jp=S("excerptLength/set",t=>C(t,new O({min:0,required:!0})));function Up(){return{length:void 0}}var NE=I(Up(),t=>{t.addCase(jp,(e,r)=>{e.length=r.payload})});function $y(t){var e,r,a;return(a=(r=(e=t.search)==null?void 0:e.response)==null?void 0:r.extendedResults)==null?void 0:a.generativeQuestionAnsweringId}var Hy=t=>D("analytics/generatedAnswer/streamEnd",(e,r)=>{let a=$y(r);return a?e.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:a,answerGenerated:t}):null});var Wy=async t=>{var e;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.platformUrl,streamId:(e=t.search.extendedResults)==null?void 0:e.generativeQuestionAnsweringId}};var Gy=["default","bullet","step","concise"];var Gn=new P({required:!0}),zy=new P,_p=new H({required:!0}),QE={id:Gn,title:Gn,uri:Gn,permanentid:Gn,clickUri:zy},$p=S("generatedAnswer/setIsVisible",t=>C(t,_p)),Hp=S("generatedAnswer/updateMessage",t=>C(t,{textDelta:Gn})),Wp=S("generatedAnswer/updateCitations",t=>C(t,{citations:new W({required:!0,each:new k({values:QE})})})),Gp=S("generatedAnswer/updateError",t=>C(t,{message:zy,code:new O({min:0})})),zn=S("generatedAnswer/resetAnswer"),zp=S("generatedAnswer/like"),Yp=S("generatedAnswer/dislike"),Kp=S("generatedAnswer/feedbackModal/open"),Jp=S("generatedAnswer/feedbackModal/close"),Xp=S("generatedAnswer/sendFeedback"),Yn=S("generatedAnswer/setIsLoading",t=>C(t,_p)),au=S("generatedAnswer/setIsStreaming",t=>C(t,_p)),Zp=S("generatedAnswer/updateResponseFormat",t=>C(t,{answerStyle:new P({required:!0,constrainTo:Gy})})),BE=K("generatedAnswer/streamAnswer",async(t,e)=>{var l;let r=e.getState(),{dispatch:a,extra:o}=e,{setAbortControllerRef:n}=t,i=await Wy(r),s=(d,g)=>{switch(d){case"genqa.messageType":a(Hp(JSON.parse(g)));break;case"genqa.citationsType":a(Wp(JSON.parse(g)));break;case"genqa.endOfStreamType":a(au(!1)),a(Hy(JSON.parse(g).answerGenerated));break;default:r.debug&&o.logger.warn(`Unknown payloadType: "${d}"`)}};a(Yn(!0));let u=d=>d.streamId===e.getState().search.extendedResults.generativeQuestionAnsweringId,c=(l=o.streamingClient)==null?void 0:l.streamGeneratedAnswer(i,{write:d=>{u(i)&&(a(Yn(!1)),d.payload&&d.payloadType&&s(d.payloadType,d.payload))},abort:d=>{u(i)&&a(Gp(d))},close:()=>{u(i)&&a(au(!1))},resetAnswer:()=>{u(i)&&a(zn())}});c?n(c):a(Yn(!1))});function Kn(){return{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1,feedbackSubmitted:!1}}var Yy=I(Kn(),t=>t.addCase($p,(e,{payload:r})=>{e.isVisible=r}).addCase(Hp,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=r.textDelta,delete e.error}).addCase(Wp,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!0,e.citations=e.citations.concat(r.citations),delete e.error}).addCase(Gp,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!1,e.error={...r,isRetryable:r.code===Zg},e.citations=[],delete e.answer}).addCase(zp,e=>{e.liked=!0,e.disliked=!1}).addCase(Yp,e=>{e.liked=!1,e.disliked=!0}).addCase(Kp,e=>{e.feedbackModalOpen=!0}).addCase(Jp,e=>{e.feedbackModalOpen=!1}).addCase(Xp,e=>{e.feedbackSubmitted=!0}).addCase(zn,e=>({...Kn(),responseFormat:e.responseFormat,isVisible:e.isVisible})).addCase(Yn,(e,{payload:r})=>{e.isLoading=r}).addCase(au,(e,{payload:r})=>{e.isStreaming=r}).addCase(Zp,(e,{payload:r})=>{e.responseFormat=r}));var Tge=new N({content:new ie({required:!0}),conditions:new ie({required:!0}),priority:new O({required:!1,default:0,min:0}),fields:new W({required:!1,each:w})});var Ky;(n=>{n.getResultProperty=Xr,n.fieldsMustBeDefined=Vh,n.fieldsMustNotBeDefined=Mh,n.fieldMustMatch=Lh,n.fieldMustNotMatch=Nh})(Ky||(Ky={}));function jE(t){return t.addReducers({}),{logClearBreadcrumbs:wp,logInterfaceLoad:Dl,logSearchFromLink:Vl,logOmniboxFromLink:Ml,logInterfaceChange:Qi,logDidYouMeanClick:td,logCategoryFacetBreadcrumb:Pp,logFacetBreadcrumb:Ud,logFacetClearAll:Et,logFacetDeselect:oo,logFacetSelect:gt,logFacetShowLess:Ws,logFacetShowMore:Hs,logFacetUpdateSort:ao,logDateFacetBreadcrumb:Ep,logNumericFacetBreadcrumb:Ip,logNavigateBackward:rp,logNavigateForward:tp,logPageNext:dp,logPageNumber:Cc,logPagePrevious:pp,logPagerResize:yc,logSearchboxSubmit:Bn,logQuerySuggestionClick:gp,logResultsSort:Ac,logDislikeSmartSnippet:Ty,logLikeSmartSnippet:qy,logOpenSmartSnippetFeedbackModal:Dy,logCloseSmartSnippetFeedbackModal:Vy,logSmartSnippetFeedback:My,logSmartSnippetDetailedFeedback:Ly,logExpandSmartSnippet:ky,logCollapseSmartSnippet:Oy,logExpandSmartSnippetSuggestion:Ny,logCollapseSmartSnippetSuggestion:Qy,logNoResultsBack:ap,logStaticFilterSelect:vp,logStaticFilterDeselect:qc,logStaticFilterClearAll:Fp,logTriggerQuery:us,logUndoTriggerQuery:od,logNotifyTrigger:nd,logTriggerRedirect:id,logTriggerExecute:sd}}Sa();function ef(){return{}}var bo=I(ef(),t=>{t.addCase(fe.fulfilled,(e,r)=>{let a=new Set(Object.keys(e)),o=r.payload.response.facets;for(let n of o)WE(e,n,a);for(let n of a)delete e[n]}).addCase(at,(e,r)=>{var u;let{facetId:a,selection:o}=r.payload,n=(u=e[a])==null?void 0:u.request;if(!n)return;n.preventAutoSelect=!0;let i=n.values.find(c=>c.value===o.value);if(!i){tC(n,o);return}let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Tt,(e,r)=>{var u;let{facetId:a,selection:o}=r.payload,n=(u=e[a])==null?void 0:u.request;if(!n)return;n.preventAutoSelect=!0;let i=n.values.find(c=>c.value===o.value);if(!i){tC(n,o);return}let s=i.state==="excluded";i.state=s?"idle":"excluded"}).addCase(nr,(e,r)=>{var n;let{facetId:a,numberOfValues:o}=r.payload;!((n=e[a])==null?void 0:n.request)||(e[a].request.numberOfValues=o)}).addCase(ir,(e,r)=>{var i;let{facetId:a,isFieldExpanded:o}=r.payload,n=(i=e[a])==null?void 0:i.request;!n||(n.isFieldExpanded=o)})});function WE(t,e,r){var n,i;let a=(n=e.facetId)!=null?n:e.field,o=(i=t[a])==null?void 0:i.request;o?r.delete(a):(t[a]={request:{}},o=t[a].request,o.initialNumberOfValues=e.values.length),o.facetId=a,o.numberOfValues=e.values.length,o.field=e.field,o.type=e.type,o.values=e.values.map(Zd),o.preventAutoSelect=!1}function tC(t,e){let{values:r}=t,a=r.findIndex(s=>s.state==="idle"),o=a===-1?r.length:a,n=r.slice(0,o),i=r.slice(o+1);t.values=[...n,e,...i],t.numberOfValues=t.values.length}var GE=new O({required:!0,min:0}),ou=S("commerce/productListing/pagination/selectPage",t=>C(t,GE)),nu=S("commerce/productListing/pagination/nextPage"),iu=S("commerce/productListing/pagination/previousPage");function tf(){return{page:0,perPage:0,totalCount:0,totalPages:0}}var su=I(tf(),t=>{t.addCase(nu,e=>{e.page<e.totalPages-1&&++e.page}).addCase(iu,e=>{e.page>0&&--e.page}).addCase(ou,(e,r)=>{r.payload>=0&&r.payload<e.totalPages&&(e.page=r.payload)}).addCase(fe.fulfilled,(e,r)=>{let a=r.payload.response.pagination;e.perPage=a.perPage,e.totalCount=a.totalCount,e.totalPages=a.totalPages})});var rf=()=>({error:null,isLoading:!1,responseId:"",facets:[],products:[]});var Mt=I(rf(),t=>{t.addCase(fe.rejected,(e,r)=>{e.error=r.payload?r.payload:null,e.isLoading=!1}).addCase(fe.fulfilled,(e,r)=>{e.error=null,e.facets=r.payload.response.facets,e.products=r.payload.response.products,e.responseId=r.payload.response.responseId,e.isLoading=!1}).addCase(fe.pending,e=>{e.isLoading=!0})});var rC=S("query/updateQuery",t=>C(t,{query:new P}));var af=()=>({query:""});var cu=I(af(),t=>{t.addCase(rC,(e,r)=>({...e,...r.payload}))});var Ro=K("commerce/search/executeSearch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:o})=>{var u;let n=e(),{apiClient:i}=o,s=await i.search({...mc(n),query:(u=n.commerceQuery)==null?void 0:u.query});return he(s)?(r(He(s.error)),a(s.error)):{response:s.success,analyticsAction:gc()}});var of=()=>({error:null,isLoading:!1,responseId:"",products:[],facets:[]});var uu=I(of(),t=>{t.addCase(Ro.rejected,(e,r)=>{e.error=r.payload?r.payload:null,e.isLoading=!1}).addCase(Ro.fulfilled,(e,r)=>{e.error=null,e.facets=r.payload.response.facets,e.products=r.payload.response.products,e.responseId=r.payload.response.responseId,e.isLoading=!1}).addCase(Ro.pending,e=>{e.isLoading=!0})});var Xn=S("commerce/productListing/sort/apply",t=>C(t,{by:new Ye({enum:Ie,required:!0})}));function nf(){return{appliedSort:sr(),availableSorts:[]}}var aC=t=>t.sortCriteria===Ie.Relevance?sr():{by:Ie.Fields,fields:(t.fields||[]).map(({field:e,direction:r,displayName:a})=>({name:e,direction:r,displayName:a}))},lu=I(nf(),t=>{t.addCase(Xn,(e,r)=>{e.appliedSort=r.payload}).addCase(fe.fulfilled,(e,r)=>{let a=r.payload.response;e.appliedSort=aC(a.sort.appliedSort),e.availableSorts=a.sort.availableSorts.map(aC)})});var fI=Fe(vn()),mI=Fe(cC());var dI=Fe(vn());var pI=Fe(vn());function du(t={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...t}}var oRe={title:"example documentTitle",uri:"example documentUri",printableUri:"printable-uri",clickUri:"example documentUrl",uniqueId:"unique-id",excerpt:"excerpt",firstSentences:"first-sentences",flags:"flags",rankingModifier:"example rankingModifier",raw:du({urihash:"example documentUriHash",source:"example sourceName",collection:"example collectionName",permanentid:"example contentIDValue"})};Sa();var dC=new N({...Cs});var yI={productListing:Mt,commerceSearch:uu,commercePagination:su,commerceSort:lu,facetOrder:go,commerceFacetSet:bo,commerceContext:Sr,commerceQuery:cu,cart:Fi};function pC(t){let e=kd(t.loggerOptions);CI(t.configuration,e);let r=xI(t.configuration,e),a={...Od(t.configuration,e),apiClient:r},o={...t,reducers:yI},n=Ad(o,a);return{...n,get state(){return n.state}}}function CI(t,e){try{dC.validate(t)}catch(r){throw e.error("Commerce engine configuration error",r),r}}function xI(t,e){return new Iu({logger:e,preprocessRequest:t.preprocessRequest||Dr})}var pu=t=>At("analytics/commerce/facet/showMore",(e,r)=>{C(t,U);let a=lt(t,Ae(r));return e.makeFacetShowMore(a)}),fu=t=>At("analytics/commerce/facet/showLess",(e,r)=>{C(t,U);let a=lt(t,Ae(r));return e.makeFacetShowLess(a)}),fC=t=>At("analytics/commerce/facet/sortChange",(e,r)=>{C(t,{facetId:U,criterion:new ie({required:!0})});let{facetId:a,criterion:o}=t,n=Ae(r),s={...lt(a,n),criteria:o};return e.makeFacetUpdateSort(s)}),mu=t=>At("analytics/commerce/facet/reset",(e,r)=>{C(t,U);let a=Ae(r),o=lt(t,a);return e.makeFacetClearAll(o)}),gu=t=>At("analytics/commerce/facet/select",(e,r)=>{C(t,{facetId:U,facetValue:w});let a=Ae(r),o=Cr(t,a);return e.makeFacetSelect(o)}),mC=t=>At("analytics/commerce/facet/exclude",(e,r)=>{C(t,{facetId:U,facetValue:w});let a=Ae(r),o=Cr(t,a);return e.makeFacetExclude(o)}),Zn=t=>At("analytics/commerce/facet/deselect",(e,r)=>{C(t,{facetId:U,facetValue:w});let a=Ae(r),o=Cr(t,a);return e.makeFacetDeselect(o)});function vI(t){return t.addReducers({productListing:Mt}),{fetchProductListing:fe}}function FI(t){return t.addReducers({}),{logFacetClearAll:mu,logFacetDeselect:Zn,logFacetSelect:gu,logFacetShowLess:fu,logFacetShowMore:pu,logFacetUpdateSort:fC}}function gC(t,e){if(!bI(t))throw L;let r=z(t),{dispatch:a}=t,o=()=>t.state,n={...e.options};return Re(t,tg,n,"buildContext"),a(_t({...n})),{...r,get state(){return o().commerceContext},setTrackingId:i=>a(_t({...o().commerceContext,trackingId:i})),setLanguage:i=>a(_t({...o().commerceContext,language:i})),setCountry:i=>a(_t({...o().commerceContext,country:i})),setCurrency:i=>a(_t({...o().commerceContext,currency:i})),setClientId:i=>a(_t({...o().commerceContext,clientId:i})),setUser:i=>a(bi(i)),setView:i=>a(Ri(i))}}function bI(t){return t.addReducers({commerceContext:Sr}),!0}function hC(t){if(!RI(t))throw L;let e=z(t),{dispatch:r}=t,a=()=>t.state;return{...e,get state(){let{products:o,error:n,isLoading:i,responseId:s}=a().productListing;return{products:o,error:n,isLoading:i,responseId:s}},refresh:()=>r(fe())}}function RI(t){return t.addReducers({productListing:Mt,commerceContext:Sr,configuration:ae}),!0}function SC(t){if(!o(t))throw L;let e=z(t),{dispatch:r}=t,a=()=>t.state.commercePagination;return{...e,get state(){return a()},selectPage(n){r(ou(n)),r(fe())},nextPage(){r(nu()),r(fe())},previousPage(){r(iu()),r(fe())}};function o(n){return n.addReducers({productListing:Mt,commercePagination:su}),!0}}var yC=S("recentResults/pushRecentResult",t=>(lh(t),{payload:t}));function CC(t,e){let r=!1,a=()=>{r||(r=!0,t.dispatch(wS(e.options.result)))};return cr(t,e,()=>{a(),t.dispatch(yC(e.options.result))})}function xC(t,e={}){if(!AI(t))throw L;let r=z(t),{dispatch:a}=t,o=()=>t.state,n={...e.options};return Re(t,eg,n,"buildCart"),n.items&&a(Ko(n.items)),{...r,get state(){let{cart:i,cartItems:s}=o().cart;return{cart:s.map(u=>i[u])}},setItems:i=>a(Ko(i)),addItem:i=>a(yi(i)),removeItem:i=>a(Ci(i)),updateItemQuantity:(i,s)=>a(xi({productId:i,quantity:s}))}}function AI(t){return t.addReducers({cart:Fi}),!0}function PI(t,e){if(!e)return;let r=new N({criterion:BS});Ze(t,r,e,"buildSort")}function vC(t,e={}){var i;if(!wI(t))throw L;let{dispatch:r}=t,a=z(t),o=()=>t.state;PI(t,e.initialState);let n=(i=e.initialState)==null?void 0:i.criterion;return n&&r(Xn(n)),{...a,get state(){return o().commerceSort},sortBy(s){r(Xn(s)),r(pt(0)),r(fe())},isSortedBy(s){return JSON.stringify(this.state.appliedSort)===JSON.stringify(s)},isAvailable(s){return this.state.availableSorts.some(u=>JSON.stringify(u)===JSON.stringify(s))}}}function wI(t){return t.addReducers({productListing:Mt,commerceSort:lu}),!0}var FC=(t,e)=>{let r={facetId:t,facetValue:e.value};return Dn(e)?Zn(r):gu(r)},bC=(t,e)=>{let r={facetId:t,facetValue:e.value};return Vn(e)?Zn(r):mC(r)};var RC=I(Ur(),t=>{t.addCase(ES,(e,r)=>{e.url=r.payload.url}).addCase(IS,(e,r)=>{e.additionalFields=r.payload.additionalFields}).addCase(ot.rejected,(e,r)=>{e.error=r.payload?r.payload:null,e.isLoading=!1}).addCase(ot.fulfilled,(e,r)=>{e.error=null,e.facets=r.payload.response.facets,e.products=r.payload.response.products,e.responseId=r.payload.response.responseId,e.isLoading=!1}).addCase(ot.pending,e=>{e.isLoading=!0})});function EI(t,e){return!!e&&e.facetId in t.commerceFacetSet}function II(t,e){let r=a=>a.facetId===e;if("productListing"in t)return t.productListing.facets.find(r)}var AC=(t,e)=>{let r=II(t,e);if(EI(t,r))return r},PC=t=>{if("productListing"in t)return t.productListing.isLoading};function wC(t,e){if(!kI(t))throw L;let{dispatch:r}=t,a=z(t);Re(t,new N({facetId:w}),e.options,"buildCoreFacet");let o=e.options.facetId,n=()=>t.state.commerceFacetSet[o].request,i=()=>AC(t.state,o),s=()=>PC(t.state),u=()=>n().values.filter(l=>l.state!=="idle").length,c=()=>{let l=n(),d=l.initialNumberOfValues,g=!!l.values.find(p=>p.state==="idle");return d<l.numberOfValues&&g};return{...a,toggleSelect:l=>r(at({facetId:o,selection:l})),toggleExclude:l=>r(Tt({facetId:o,selection:l})),toggleSingleSelect:function(l){l.state==="idle"&&r(De(o)),this.toggleSelect(l)},toggleSingleExclude:function(l){l.state==="idle"&&r(De(o)),this.toggleExclude(l)},isValueSelected:Dn,isValueExcluded:Vn,deselectAll(){r(De(o))},showMoreValues(){let l=n().numberOfValues,d=n().initialNumberOfValues,g=d-l%d,p=l+g;r(nr({facetId:o,numberOfValues:p})),r(ir({facetId:o,isFieldExpanded:!0}))},showLessValues(){let l=n().initialNumberOfValues,d=Math.max(l,u());r(nr({facetId:o,numberOfValues:d})),r(ir({facetId:o,isFieldExpanded:!1}))},get state(){var m;let l=i(),d=l?l.values:[],g=d.some(h=>h.state!=="idle"),p=l?l.moreValuesAvailable:!1;return{facetId:o,field:l.field,displayName:l.displayName,values:d,isLoading:(m=s())!=null?m:!1,hasActiveValues:g,canShowMoreValues:p,canShowLessValues:c()}}}}function kI(t){return t.addReducers({commerceFacetSet:bo}),!0}function hu(t,e){if(!OI(t))throw L;let{dispatch:r}=t,a=wC(t,e),o=e.options.facetId;return{...a,toggleSelect:n=>{a.toggleSelect(n),r(fe()),r(FC(o,n))},toggleExclude:n=>{a.toggleExclude(n),r(fe()),r(bC(o,n))},deselectAll(){a.deselectAll(),r(fe()),r(mu(o))},showMoreValues(){a.showMoreValues(),r(fe()),r(pu(o))},showLessValues(){a.showLessValues(),r(fe()),r(fu(o))},get state(){return a.state}}}function OI(t){return t.addReducers({productListing:RC}),!0}function EC(t,e){if(!qI(t))throw L;let r=z(t),a=o=>{let{type:n}=t.state.commerceFacetSet[o].request;switch(n){case"regular":default:return e.buildFacet(t,{options:{facetId:o}})}};return{...r,get state(){var o;return{facets:(o=t.state.facetOrder.map(a))!=null?o:[]}}}}function qI(t){return t.addReducers({facetOrder:go,commerceFacetSet:bo}),!0}function IC(t){return EC(t,{buildFacet:hu})}function kC(t){if(!TI(t))throw L;let e=z(t),{dispatch:r}=t,a=()=>t.state;return{...e,get state(){return a().commerceSearch},executeFirstSearch(){t.state.commerceSearch.responseId===""&&r(Ro())}}}function TI(t){return t.addReducers({commerceContext:Sr,configuration:ae,commerceSearch:uu,commerceQuery:cu}),!0}Sa();
/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
}));
//# sourceMappingURL=headless.js.map
