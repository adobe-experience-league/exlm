/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function (global, factory) {
    const isCommonjs = typeof exports === 'object' && typeof module !== 'undefined';
    
    if (isCommonjs) {
      return factory(exports);
    }
    
    const isAmd = typeof define === 'function' && define.amd;

    if (isAmd) {
      return define(['exports'], factory);
    }

    global = typeof globalThis !== 'undefined' ? globalThis : global || self;
    factory(global.CoveoHeadlessInsight = {});
  })(this, (function (exports) { 'use strict';
var KS=Object.create;var Mo=Object.defineProperty;var JS=Object.getOwnPropertyDescriptor;var XS=Object.getOwnPropertyNames;var ZS=Object.getPrototypeOf,eC=Object.prototype.hasOwnProperty;var bd=t=>Mo(t,"__esModule",{value:!0});var ve=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Pd=(t,e)=>{bd(t);for(var r in e)Mo(t,r,{get:e[r],enumerable:!0})},tC=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of XS(e))!eC.call(t,a)&&a!=="default"&&Mo(t,a,{get:()=>e[a],enumerable:!(r=JS(e,a))||r.enumerable});return t},Ze=t=>tC(bd(Mo(t!=null?KS(ZS(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Od=ve((cw,kd)=>{"use strict";function sC(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(t=`${t}`,t=t.replace(/[ \t\n\f\r]/g,""),t.length%4==0&&(t=t.replace(/==?$/,"")),t.length%4==1||/[^+/0-9A-Za-z]/.test(t))return null;let e="",r=0,a=0;for(let n=0;n<t.length;n++)r<<=6,r|=uC(t[n]),a+=6,a===24&&(e+=String.fromCharCode((r&16711680)>>16),e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255),r=a=0);return a===12?(r>>=4,e+=String.fromCharCode(r)):a===18&&(r>>=2,e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255)),e}var cC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function uC(t){let e=cC.indexOf(t);return e<0?void 0:e}kd.exports=sC});var Dd=ve((uw,Td)=>{"use strict";function lC(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let e;for(t=`${t}`,e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return null;let r="";for(e=0;e<t.length;e+=3){let a=[void 0,void 0,void 0,void 0];a[0]=t.charCodeAt(e)>>2,a[1]=(t.charCodeAt(e)&3)<<4,t.length>e+1&&(a[1]|=t.charCodeAt(e+1)>>4,a[2]=(t.charCodeAt(e+1)&15)<<2),t.length>e+2&&(a[2]|=t.charCodeAt(e+2)>>6,a[3]=t.charCodeAt(e+2)&63);for(let n=0;n<a.length;n++)typeof a[n]=="undefined"?r+="=":r+=pC(a[n])}return r}var dC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function pC(t){if(t>=0&&t<64)return dC[t]}Td.exports=lC});var Nd=ve((lw,Vd)=>{"use strict";var fC=Od(),gC=Dd();Vd.exports={atob:fC,btoa:gC}});var Ud=ve((mw,jd)=>{jd.exports=fetch});var _d=ve(In=>{"use strict";var _o=In&&In.__assign||function(){return _o=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},_o.apply(this,arguments)};Object.defineProperty(In,"__esModule",{value:!0});var SC={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function CC(t){var e=_o(_o({},SC),t);return e.numOfAttempts<1&&(e.numOfAttempts=1),e}In.getSanitizedOptions=CC});var $d=ve(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});function vC(t){var e=Math.random()*t;return Math.round(e)}kc.fullJitter=vC});var Hd=ve(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});function AC(t){return t}Oc.noJitter=AC});var zd=ve(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});var xC=$d(),FC=Hd();function RC(t){switch(t.jitter){case"full":return xC.fullJitter;case"none":default:return FC.noJitter}}Tc.JitterFactory=RC});var Vc=ve(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});var bC=zd(),PC=function(){function t(e){this.options=e,this.attempt=0}return t.prototype.apply=function(){var e=this;return new Promise(function(r){return setTimeout(r,e.jitteredDelay)})},t.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(t.prototype,"jitteredDelay",{get:function(){var e=bC.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){var e=this.options.startingDelay,r=this.options.timeMultiple,a=this.numOfDelayedAttempts,n=e*Math.pow(r,a);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),t}();Dc.Delay=PC});var Wd=ve(Yt=>{"use strict";var IC=Yt&&Yt.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},t(e,r)};return function(e,r){t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),wC=Yt&&Yt.__awaiter||function(t,e,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(t,e||[])).next())})},EC=Yt&&Yt.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Yt,"__esModule",{value:!0});var qC=Vc(),kC=function(t){IC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.apply=function(){return wC(this,void 0,void 0,function(){return EC(this,function(r){return[2,this.isFirstAttempt?!0:t.prototype.apply.call(this)]})})},Object.defineProperty(e.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),e}(qC.Delay);Yt.SkipFirstDelay=kC});var Gd=ve(wn=>{"use strict";var OC=wn&&wn.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},t(e,r)};return function(e,r){t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(wn,"__esModule",{value:!0});var TC=Vc(),DC=function(t){OC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(TC.Delay);wn.AlwaysDelay=DC});var Yd=ve(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});var VC=Wd(),NC=Gd();function MC(t,e){var r=LC(t);return r.setAttemptNumber(e),r}Nc.DelayFactory=MC;function LC(t){return t.delayFirstAttempt?new NC.AlwaysDelay(t):new VC.SkipFirstDelay(t)}});var Kd=ve(Mr=>{"use strict";var Mc=Mr&&Mr.__awaiter||function(t,e,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(t,e||[])).next())})},Lc=Mr&&Mr.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Mr,"__esModule",{value:!0});var QC=_d(),BC=Yd();function jC(t,e){return e===void 0&&(e={}),Mc(this,void 0,void 0,function(){var r,a;return Lc(this,function(n){switch(n.label){case 0:return r=QC.getSanitizedOptions(e),a=new UC(t,r),[4,a.execute()];case 1:return[2,n.sent()]}})})}Mr.backOff=jC;var UC=function(){function t(e,r){this.request=e,this.options=r,this.attemptNumber=0}return t.prototype.execute=function(){return Mc(this,void 0,void 0,function(){var e,r;return Lc(this,function(a){switch(a.label){case 0:if(this.attemptLimitReached)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return a.sent(),[4,this.request()];case 3:return[2,a.sent()];case 4:return e=a.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(r=a.sent(),!r||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(t.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),t.prototype.applyDelay=function(){return Mc(this,void 0,void 0,function(){var e;return Lc(this,function(r){switch(r.label){case 0:return e=BC.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return r.sent(),[2]}})})},t}()});var qi=ve((Qu,Bu)=>{(function(t,e){typeof Qu=="object"&&typeof Bu!="undefined"?Bu.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs=e()})(Qu,function(){"use strict";var t=1e3,e=6e4,r=36e5,a="millisecond",n="second",o="minute",i="hour",s="day",u="week",c="month",l="quarter",d="year",f="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var I=["th","st","nd","rd"],E=O%100;return"["+O+(I[(E-20)%10]||I[E]||I[0])+"]"}},F=function(O,I,E){var Q=String(O);return!Q||Q.length>=I?O:""+Array(I+1-Q.length).join(E)+O},w={s:F,z:function(O){var I=-O.utcOffset(),E=Math.abs(I),Q=Math.floor(E/60),q=E%60;return(I<=0?"+":"-")+F(Q,2,"0")+":"+F(q,2,"0")},m:function O(I,E){if(I.date()<E.date())return-O(E,I);var Q=12*(E.year()-I.year())+(E.month()-I.month()),q=I.clone().add(Q,c),H=E-q<0,W=I.clone().add(Q+(H?-1:1),c);return+(-(Q+(E-q)/(H?q-W:W-q))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:c,y:d,w:u,d:s,D:f,h:i,m:o,s:n,ms:a,Q:l}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},D="en",N={};N[D]=v;var Z="$isDayjsObject",re=function(O){return O instanceof ge||!(!O||!O[Z])},ae=function O(I,E,Q){var q;if(!I)return D;if(typeof I=="string"){var H=I.toLowerCase();N[H]&&(q=H),E&&(N[H]=E,q=H);var W=I.split("-");if(!q&&W.length>1)return O(W[0])}else{var ue=I.name;N[ue]=I,q=ue}return!Q&&q&&(D=q),q||!Q&&D},J=function(O,I){if(re(O))return O.clone();var E=typeof I=="object"?I:{};return E.date=O,E.args=arguments,new ge(E)},_=w;_.l=ae,_.i=re,_.w=function(O,I){return J(O,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var ge=function(){function O(E){this.$L=ae(E.locale,null,!0),this.parse(E),this.$x=this.$x||E.x||{},this[Z]=!0}var I=O.prototype;return I.parse=function(E){this.$d=function(Q){var q=Q.date,H=Q.utc;if(q===null)return new Date(NaN);if(_.u(q))return new Date;if(q instanceof Date)return new Date(q);if(typeof q=="string"&&!/Z$/i.test(q)){var W=q.match(g);if(W){var ue=W[2]-1||0,ye=(W[7]||"0").substring(0,3);return H?new Date(Date.UTC(W[1],ue,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ye)):new Date(W[1],ue,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ye)}}return new Date(q)}(E),this.init()},I.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},I.$utils=function(){return _},I.isValid=function(){return this.$d.toString()!==p},I.isSame=function(E,Q){var q=J(E);return this.startOf(Q)<=q&&q<=this.endOf(Q)},I.isAfter=function(E,Q){return J(E)<this.startOf(Q)},I.isBefore=function(E,Q){return this.endOf(Q)<J(E)},I.$g=function(E,Q,q){return _.u(E)?this[Q]:this.set(q,E)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(E,Q){var q=this,H=!!_.u(Q)||Q,W=_.p(E),ue=function(ct,we){var We=_.w(q.$u?Date.UTC(q.$y,we,ct):new Date(q.$y,we,ct),q);return H?We:We.endOf(s)},ye=function(ct,we){return _.w(q.toDate()[ct].apply(q.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(we)),q)},Ae=this.$W,Ie=this.$M,He=this.$D,ir="set"+(this.$u?"UTC":"");switch(W){case d:return H?ue(1,0):ue(31,11);case c:return H?ue(1,Ie):ue(0,Ie+1);case u:var vt=this.$locale().weekStart||0,Wt=(Ae<vt?Ae+7:Ae)-vt;return ue(H?He-Wt:He+(6-Wt),Ie);case s:case f:return ye(ir+"Hours",0);case i:return ye(ir+"Minutes",1);case o:return ye(ir+"Seconds",2);case n:return ye(ir+"Milliseconds",3);default:return this.clone()}},I.endOf=function(E){return this.startOf(E,!1)},I.$set=function(E,Q){var q,H=_.p(E),W="set"+(this.$u?"UTC":""),ue=(q={},q[s]=W+"Date",q[f]=W+"Date",q[c]=W+"Month",q[d]=W+"FullYear",q[i]=W+"Hours",q[o]=W+"Minutes",q[n]=W+"Seconds",q[a]=W+"Milliseconds",q)[H],ye=H===s?this.$D+(Q-this.$W):Q;if(H===c||H===d){var Ae=this.clone().set(f,1);Ae.$d[ue](ye),Ae.init(),this.$d=Ae.set(f,Math.min(this.$D,Ae.daysInMonth())).$d}else ue&&this.$d[ue](ye);return this.init(),this},I.set=function(E,Q){return this.clone().$set(E,Q)},I.get=function(E){return this[_.p(E)]()},I.add=function(E,Q){var q,H=this;E=Number(E);var W=_.p(Q),ue=function(Ie){var He=J(H);return _.w(He.date(He.date()+Math.round(Ie*E)),H)};if(W===c)return this.set(c,this.$M+E);if(W===d)return this.set(d,this.$y+E);if(W===s)return ue(1);if(W===u)return ue(7);var ye=(q={},q[o]=e,q[i]=r,q[n]=t,q)[W]||1,Ae=this.$d.getTime()+E*ye;return _.w(Ae,this)},I.subtract=function(E,Q){return this.add(-1*E,Q)},I.format=function(E){var Q=this,q=this.$locale();if(!this.isValid())return q.invalidDate||p;var H=E||"YYYY-MM-DDTHH:mm:ssZ",W=_.z(this),ue=this.$H,ye=this.$m,Ae=this.$M,Ie=q.weekdays,He=q.months,ir=q.meridiem,vt=function(we,We,Gt,sr){return we&&(we[We]||we(Q,H))||Gt[We].slice(0,sr)},Wt=function(we){return _.s(ue%12||12,we,"0")},ct=ir||function(we,We,Gt){var sr=we<12?"AM":"PM";return Gt?sr.toLowerCase():sr};return H.replace(S,function(we,We){return We||function(Gt){switch(Gt){case"YY":return String(Q.$y).slice(-2);case"YYYY":return _.s(Q.$y,4,"0");case"M":return Ae+1;case"MM":return _.s(Ae+1,2,"0");case"MMM":return vt(q.monthsShort,Ae,He,3);case"MMMM":return vt(He,Ae);case"D":return Q.$D;case"DD":return _.s(Q.$D,2,"0");case"d":return String(Q.$W);case"dd":return vt(q.weekdaysMin,Q.$W,Ie,2);case"ddd":return vt(q.weekdaysShort,Q.$W,Ie,3);case"dddd":return Ie[Q.$W];case"H":return String(ue);case"HH":return _.s(ue,2,"0");case"h":return Wt(1);case"hh":return Wt(2);case"a":return ct(ue,ye,!0);case"A":return ct(ue,ye,!1);case"m":return String(ye);case"mm":return _.s(ye,2,"0");case"s":return String(Q.$s);case"ss":return _.s(Q.$s,2,"0");case"SSS":return _.s(Q.$ms,3,"0");case"Z":return W}return null}(we)||W.replace(":","")})},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(E,Q,q){var H,W=this,ue=_.p(Q),ye=J(E),Ae=(ye.utcOffset()-this.utcOffset())*e,Ie=this-ye,He=function(){return _.m(W,ye)};switch(ue){case d:H=He()/12;break;case c:H=He();break;case l:H=He()/3;break;case u:H=(Ie-Ae)/6048e5;break;case s:H=(Ie-Ae)/864e5;break;case i:H=Ie/r;break;case o:H=Ie/e;break;case n:H=Ie/t;break;default:H=Ie}return q?H:_.a(H)},I.daysInMonth=function(){return this.endOf(c).$D},I.$locale=function(){return N[this.$L]},I.locale=function(E,Q){if(!E)return this.$L;var q=this.clone(),H=ae(E,Q,!0);return H&&(q.$L=H),q},I.clone=function(){return _.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},O}(),me=ge.prototype;return J.prototype=me,[["$ms",a],["$s",n],["$m",o],["$H",i],["$W",s],["$M",c],["$y",d],["$D",f]].forEach(function(O){me[O[1]]=function(I){return this.$g(I,O[0],O[1])}}),J.extend=function(O,I){return O.$i||(O(I,ge,J),O.$i=!0),J},J.locale=ae,J.isDayjs=re,J.unix=function(O){return J(1e3*O)},J.en=N[D],J.Ls=N,J.p={},J})});var og=ve((ju,Uu)=>{(function(t,e){typeof ju=="object"&&typeof Uu!="undefined"?Uu.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_quarterOfYear=e()})(ju,function(){"use strict";var t="month",e="quarter";return function(r,a){var n=a.prototype;n.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var o=n.add;n.add=function(s,u){return s=Number(s),this.$utils().p(u)===e?this.add(3*s,t):o.bind(this)(s,u)};var i=n.startOf;n.startOf=function(s,u){var c=this.$utils(),l=!!c.u(u)||u;if(c.p(s)===e){var d=this.quarter()-1;return l?this.month(3*d).startOf(t).startOf("day"):this.month(3*d+2).endOf(t).endOf("day")}return i.bind(this)(s,u)}}})});var ig=ve((_u,$u)=>{(function(t,e){typeof _u=="object"&&typeof $u!="undefined"?$u.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_customParseFormat=e()})(_u,function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,o={},i=function(p){return(p=+p)+(p>68?1900:2e3)},s=function(p){return function(g){this[p]=+g}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var S=g.match(/([+-]|\d\d)/g),v=60*S[1]+(+S[2]||0);return v===0?0:S[0]==="+"?-v:v}(p)}],c=function(p){var g=o[p];return g&&(g.indexOf?g:g.s.concat(g.f))},l=function(p,g){var S,v=o.meridiem;if(v){for(var F=1;F<=24;F+=1)if(p.indexOf(v(F,0,g))>-1){S=F>12;break}}else S=p===(g?"pm":"PM");return S},d={A:[n,function(p){this.afternoon=l(p,!1)}],a:[n,function(p){this.afternoon=l(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[a,s("seconds")],ss:[a,s("seconds")],m:[a,s("minutes")],mm:[a,s("minutes")],H:[a,s("hours")],h:[a,s("hours")],HH:[a,s("hours")],hh:[a,s("hours")],D:[a,s("day")],DD:[r,s("day")],Do:[n,function(p){var g=o.ordinal,S=p.match(/\d+/);if(this.day=S[0],g)for(var v=1;v<=31;v+=1)g(v).replace(/\[|\]/g,"")===p&&(this.day=v)}],M:[a,s("month")],MM:[r,s("month")],MMM:[n,function(p){var g=c("months"),S=(c("monthsShort")||g.map(function(v){return v.slice(0,3)})).indexOf(p)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[n,function(p){var g=c("months").indexOf(p)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(p){this.year=i(p)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function f(p){var g,S;g=p,S=o&&o.formats;for(var v=(p=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(ae,J,_){var ge=_&&_.toUpperCase();return J||S[_]||t[_]||S[ge].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(me,O,I){return O||I.slice(1)})})).match(e),F=v.length,w=0;w<F;w+=1){var D=v[w],N=d[D],Z=N&&N[0],re=N&&N[1];v[w]=re?{regex:Z,parser:re}:D.replace(/^\[|\]$/g,"")}return function(ae){for(var J={},_=0,ge=0;_<F;_+=1){var me=v[_];if(typeof me=="string")ge+=me.length;else{var O=me.regex,I=me.parser,E=ae.slice(ge),Q=O.exec(E)[0];I.call(J,Q),ae=ae.replace(Q,"")}}return function(q){var H=q.afternoon;if(H!==void 0){var W=q.hours;H?W<12&&(q.hours+=12):W===12&&(q.hours=0),delete q.afternoon}}(J),J}}return function(p,g,S){S.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(i=p.parseTwoDigitYear);var v=g.prototype,F=v.parse;v.parse=function(w){var D=w.date,N=w.utc,Z=w.args;this.$u=N;var re=Z[1];if(typeof re=="string"){var ae=Z[2]===!0,J=Z[3]===!0,_=ae||J,ge=Z[2];J&&(ge=Z[2]),o=this.$locale(),!ae&&ge&&(o=S.Ls[ge]),this.$d=function(E,Q,q){try{if(["x","X"].indexOf(Q)>-1)return new Date((Q==="X"?1e3:1)*E);var H=f(Q)(E),W=H.year,ue=H.month,ye=H.day,Ae=H.hours,Ie=H.minutes,He=H.seconds,ir=H.milliseconds,vt=H.zone,Wt=new Date,ct=ye||(W||ue?1:Wt.getDate()),we=W||Wt.getFullYear(),We=0;W&&!ue||(We=ue>0?ue-1:Wt.getMonth());var Gt=Ae||0,sr=Ie||0,Pc=He||0,Ic=ir||0;return vt?new Date(Date.UTC(we,We,ct,Gt,sr,Pc,Ic+60*vt.offset*1e3)):q?new Date(Date.UTC(we,We,ct,Gt,sr,Pc,Ic)):new Date(we,We,ct,Gt,sr,Pc,Ic)}catch{return new Date("")}}(D,re,N),this.init(),ge&&ge!==!0&&(this.$L=this.locale(ge).$L),_&&D!=this.format(re)&&(this.$d=new Date("")),o={}}else if(re instanceof Array)for(var me=re.length,O=1;O<=me;O+=1){Z[1]=re[O-1];var I=S.apply(this,Z);if(I.isValid()){this.$d=I.$d,this.$L=I.$L,this.init();break}O===me&&(this.$d=new Date(""))}else F.call(this,w)}}})});var Kg=ve((_N,Yg)=>{var PF=/(^|; )Coveo-Pendragon=([^;]*)/;Yg.exports=()=>PF.exec(document.cookie)?.pop()||null});var Jg=ve((pl,fl)=>{(function(t,e){typeof pl=="object"&&typeof fl!="undefined"?fl.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_timezone=e()})(pl,function(){"use strict";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(r,a,n){var o,i=function(l,d,f){f===void 0&&(f={});var p=new Date(l),g=function(S,v){v===void 0&&(v={});var F=v.timeZoneName||"short",w=S+"|"+F,D=e[w];return D||(D=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:S,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:F}),e[w]=D),D}(d,f);return g.formatToParts(p)},s=function(l,d){for(var f=i(l,d),p=[],g=0;g<f.length;g+=1){var S=f[g],v=S.type,F=S.value,w=t[v];w>=0&&(p[w]=parseInt(F,10))}var D=p[3],N=D===24?0:D,Z=p[0]+"-"+p[1]+"-"+p[2]+" "+N+":"+p[4]+":"+p[5]+":000",re=+l;return(n.utc(Z).valueOf()-(re-=re%1e3))/6e4},u=a.prototype;u.tz=function(l,d){l===void 0&&(l=o);var f=this.utcOffset(),p=this.toDate(),g=p.toLocaleString("en-US",{timeZone:l}),S=Math.round((p-new Date(g))/1e3/60),v=n(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(p.getTimezoneOffset()/15)-S,!0);if(d){var F=v.utcOffset();v=v.add(f-F,"minute")}return v.$x.$timezone=l,v},u.offsetName=function(l){var d=this.$x.$timezone||n.tz.guess(),f=i(this.valueOf(),d,{timeZoneName:l}).find(function(p){return p.type.toLowerCase()==="timezonename"});return f&&f.value};var c=u.startOf;u.startOf=function(l,d){if(!this.$x||!this.$x.$timezone)return c.call(this,l,d);var f=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(f,l,d).tz(this.$x.$timezone,!0)},n.tz=function(l,d,f){var p=f&&d,g=f||d||o,S=s(+n(),g);if(typeof l!="string")return n(l).tz(g);var v=function(N,Z,re){var ae=N-60*Z*1e3,J=s(ae,re);if(Z===J)return[ae,Z];var _=s(ae-=60*(J-Z)*1e3,re);return J===_?[ae,J]:[N-60*Math.min(J,_)*1e3,Math.max(J,_)]}(n.utc(l,p).valueOf(),S,g),F=v[0],w=v[1],D=n(F).utcOffset(w);return D.$x.$timezone=g,D},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(l){o=l}}})});var Xg=ve((gl,ml)=>{(function(t,e){typeof gl=="object"&&typeof ml!="undefined"?ml.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_utc=e()})(gl,function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(a,n,o){var i=n.prototype;o.utc=function(p){var g={date:p,utc:!0,args:arguments};return new n(g)},i.utc=function(p){var g=o(this.toDate(),{locale:this.$L,utc:!0});return p?g.add(this.utcOffset(),t):g},i.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),s.call(this,p)};var u=i.init;i.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else u.call(this)};var c=i.utcOffset;i.utcOffset=function(p,g){var S=this.$utils().u;if(S(p))return this.$u?0:S(this.$offset)?c.call(this):this.$offset;if(typeof p=="string"&&(p=function(D){D===void 0&&(D="");var N=D.match(e);if(!N)return null;var Z=(""+N[0]).match(r)||["-",0,0],re=Z[0],ae=60*+Z[1]+ +Z[2];return ae===0?0:re==="+"?ae:-ae}(p),p===null))return this;var v=Math.abs(p)<=16?60*p:p,F=this;if(g)return F.$offset=v,F.$u=p===0,F;if(p!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(F=this.local().add(v+w,t)).$offset=v,F.$x.$localOffset=w}else F=this.utc();return F};var l=i.format;i.format=function(p){var g=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,g)},i.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(p){return p==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=i.diff;i.diff=function(p,g,S){if(p&&this.$u===p.$u)return f.call(this,p,g,S);var v=this.local(),F=o(p).local();return f.call(v,F,g,S)}}})});var lm=ve((XM,um)=>{"use strict";function QF(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}um.exports=BF;function BF(t,e,r){var a=r&&r.stringify||QF,n=1;if(typeof t=="object"&&t!==null){var o=e.length+n;if(o===1)return t;var i=new Array(o);i[0]=a(t);for(var s=1;s<o;s++)i[s]=a(e[s]);return i.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var c="",l=1-n,d=-1,f=t&&t.length||0,p=0;p<f;){if(t.charCodeAt(p)===37&&p+1<f){switch(d=d>-1?d:0,t.charCodeAt(p+1)){case 100:case 102:if(l>=u||e[l]==null)break;d<p&&(c+=t.slice(d,p)),c+=Number(e[l]),d=p+2,p++;break;case 105:if(l>=u||e[l]==null)break;d<p&&(c+=t.slice(d,p)),c+=Math.floor(Number(e[l])),d=p+2,p++;break;case 79:case 111:case 106:if(l>=u||e[l]===void 0)break;d<p&&(c+=t.slice(d,p));var g=typeof e[l];if(g==="string"){c+="'"+e[l]+"'",d=p+2,p++;break}if(g==="function"){c+=e[l].name||"<anonymous>",d=p+2,p++;break}c+=a(e[l]),d=p+2,p++;break;case 115:if(l>=u)break;d<p&&(c+=t.slice(d,p)),c+=String(e[l]),d=p+2,p++;break;case 37:d<p&&(c+=t.slice(d,p)),c+="%",d=p+2,p++,l--;break}++l}++p}return d===-1?t:(d<f&&(c+=t.slice(d)),c)}});var hm=ve((ZM,Xi)=>{"use strict";var dm=lm();Xi.exports=er;var lo=tR().console||{},jF={mapHttpRequest:Ji,mapHttpResponse:Ji,wrapRequestSerializer:Al,wrapResponseSerializer:Al,wrapErrorSerializer:Al,req:Ji,res:Ji,err:fm,errWithCause:fm};function Yi(t,e){return t==="silent"?1/0:e.levels.values[t]}var Sl=Symbol("pino.logFuncs"),Cl=Symbol("pino.hierarchy"),UF={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function pm(t,e){let r={logger:e,parent:t[Cl]};e[Cl]=r}function _F(t,e,r){let a={};e.forEach(n=>{a[n]=r[n]?r[n]:lo[n]||lo[UF[n]||"log"]||po}),t[Sl]=a}function $F(t,e){return Array.isArray(t)?t.filter(function(a){return a!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function er(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||lo;t.browser.write&&(t.browser.asObject=!0);let a=t.serializers||{},n=$F(t.browser.serialize,a),o=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let i=Object.keys(t.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(i);typeof r=="function"&&s.forEach(function(S){r[S]=r}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");let u=t.level||"info",c=Object.create(r);c.log||(c.log=po),_F(c,s,r),pm({},c),Object.defineProperty(c,"levelVal",{get:d}),Object.defineProperty(c,"level",{get:f,set:p});let l={transmit:e,serialize:n,asObject:t.browser.asObject,levels:s,timestamp:XF(t)};c.levels=HF(t),c.level=u,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=po,c.serializers=a,c._serialize=n,c._stdErrSerialize=o,c.child=g,e&&(c._logEvent=vl());function d(){return Yi(this.level,this)}function f(){return this._level}function p(S){if(S!=="silent"&&!this.levels.values[S])throw Error("unknown level "+S);this._level=S,ea(this,l,c,"error"),ea(this,l,c,"fatal"),ea(this,l,c,"warn"),ea(this,l,c,"info"),ea(this,l,c,"debug"),ea(this,l,c,"trace"),i.forEach(v=>{ea(this,l,c,v)})}function g(S,v){if(!S)throw new Error("missing bindings for child Pino");v=v||{},n&&S.serializers&&(v.serializers=S.serializers);let F=v.serializers;if(n&&F){var w=Object.assign({},a,F),D=t.browser.serialize===!0?Object.keys(w):n;delete S.serializers,Ki([S],D,w,this._stdErrSerialize)}function N(re){this._childLevel=(re._childLevel|0)+1,this.bindings=S,w&&(this.serializers=w,this._serialize=D),e&&(this._logEvent=vl([].concat(re._logEvent.bindings,S)))}N.prototype=this;let Z=new N(this);return pm(this,Z),Z.level=this.level,Z}return c}function HF(t){let e=t.customLevels||{},r=Object.assign({},er.levels.values,e),a=Object.assign({},er.levels.labels,zF(e));return{values:r,labels:a}}function zF(t){let e={};return Object.keys(t).forEach(function(r){e[t[r]]=r}),e}er.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};er.stdSerializers=jF;er.stdTimeFunctions=Object.assign({},{nullTime:gm,epochTime:mm,unixTime:ZF,isoTime:eR});function WF(t){let e=[];t.bindings&&e.push(t.bindings);let r=t[Cl];for(;r.parent;)r=r.parent,r.logger.bindings&&e.push(r.logger.bindings);return e.reverse()}function ea(t,e,r,a){if(t[a]=Yi(t.level,r)>Yi(a,r)?po:r[Sl][a],!e.transmit&&t[a]===po)return;t[a]=YF(t,e,r,a);let n=WF(t);n.length!==0&&(t[a]=GF(n,t[a]))}function GF(t,e){return function(){return e.apply(this,[...t,...arguments])}}function YF(t,e,r,a){return function(n){return function(){let i=e.timestamp(),s=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===lo?lo:this;for(var c=0;c<s.length;c++)s[c]=arguments[c];if(e.serialize&&!e.asObject&&Ki(s,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(u,KF(this,a,s,i)):n.apply(u,s),e.transmit){let l=e.transmit.level||t._level,d=r.levels.values[l],f=r.levels.values[a];if(f<d)return;JF(this,{ts:i,methodLevel:a,methodValue:f,transmitLevel:l,transmitValue:r.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:Yi(t._level,r)},s)}}}(t[Sl][a])}function KF(t,e,r,a){t._serialize&&Ki(r,t._serialize,t.serializers,t._stdErrSerialize);let n=r.slice(),o=n[0],i={};a&&(i.time=a),i.level=t.levels.values[e];let s=(t._childLevel|0)+1;if(s<1&&(s=1),o!==null&&typeof o=="object"){for(;s--&&typeof n[0]=="object";)Object.assign(i,n.shift());o=n.length?dm(n.shift(),n):void 0}else typeof o=="string"&&(o=dm(n.shift(),n));return o!==void 0&&(i.msg=o),i}function Ki(t,e,r,a){for(let n in t)if(a&&t[n]instanceof Error)t[n]=er.stdSerializers.err(t[n]);else if(typeof t[n]=="object"&&!Array.isArray(t[n]))for(let o in t[n])e&&e.indexOf(o)>-1&&o in r&&(t[n][o]=r[o](t[n][o]))}function JF(t,e,r){let a=e.send,n=e.ts,o=e.methodLevel,i=e.methodValue,s=e.val,u=t._logEvent.bindings;Ki(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=n,t._logEvent.messages=r.filter(function(c){return u.indexOf(c)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=i,a(o,t._logEvent,s),t._logEvent=vl(u)}function vl(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function fm(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function XF(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?gm:mm}function Ji(){return{}}function Al(t){return t}function po(){}function gm(){return!1}function mm(){return Date.now()}function ZF(){return Math.round(Date.now()/1e3)}function eR(){return new Date(Date.now()).toISOString()}function tR(){function t(e){return typeof e!="undefined"&&e}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}Xi.exports.default=er;Xi.exports.pino=er});Pd(exports,{HighlightUtils:()=>qc,ResultTemplatesHelpers:()=>bc,SortOrder:()=>gi,buildAttachToCase:()=>Dy,buildBreadcrumbManager:()=>bh,buildCategoryFacet:()=>ny,buildController:()=>Y,buildCriterionExpression:()=>Et,buildDateFacet:()=>Ay,buildDateFilter:()=>Ey,buildDateRange:()=>tn,buildDateSortCriterion:()=>Uf,buildDidYouMean:()=>dh,buildFacet:()=>my,buildFacetConditionsManager:()=>fS,buildFacetManager:()=>Wh,buildFoldedResultList:()=>Hy,buildInsightEngine:()=>xm,buildInsightInterface:()=>gS,buildInteractiveResult:()=>Wy,buildNumericFacet:()=>by,buildNumericFilter:()=>Iy,buildNumericRange:()=>yc,buildPager:()=>ky,buildQueryError:()=>YS,buildQuerySummary:()=>Ny,buildQuickview:()=>By,buildRelevanceSortCriterion:()=>hi,buildResultList:()=>jy,buildResultTemplatesManager:()=>Zl,buildResultsPerPage:()=>Ky,buildSearchBox:()=>aS,buildSearchParameterManager:()=>Hh,buildSearchStatus:()=>nS,buildSmartSnippet:()=>yS,buildSmartSnippetQuestionsList:()=>vS,buildSort:()=>cS,buildTab:()=>dS,deserializeRelativeDate:()=>yg,getOrganizationEndpoints:()=>qn,loadAttachedResultsActions:()=>XR,loadCaseContextActions:()=>HR,loadDateFacetSetActions:()=>BR,loadFieldActions:()=>KR,loadFoldingActions:()=>ib,loadGenericAnalyticsActions:()=>ZR,loadInsightAnalyticsActions:()=>LR,loadInsightInterfaceActions:()=>sR,loadInsightSearchActions:()=>cR,loadInsightSearchAnalyticsActions:()=>zR,loadNumericFacetSetActions:()=>UR,loadQuerySetActions:()=>lR,loadQuestionAnsweringActions:()=>tb,loadRecentResultsActions:()=>$R});var bn=()=>global.crypto,Id=()=>{typeof window=="undefined"&&(bn()||(global.crypto=require("crypto")),!bn().getRandomValues&&bn().webcrypto&&(global.crypto.getRandomValues=bn().webcrypto.getRandomValues.bind(bn().webcrypto)))};var qc={};Pd(qc,{escape:()=>Sa,getHighlightedSuggestion:()=>wc,highlightString:()=>yC});function rC(t,e){let r=`
  The following properties are invalid:

    ${t.join(`
	`)}
  
  ${e}
  `;return new Nr(r)}var Nr=class extends Error{constructor(t){super(t);this.name="SchemaValidationError"}},ee=class{constructor(t){this.definition=t}validate(t={},e=""){let r={...this.default,...t},a=[];for(let n in this.definition){let o=this.definition[n].validate(r[n]);o&&a.push(`${n}: ${o}`)}if(a.length)throw rC(a,e);return r}get default(){let t={};for(let e in this.definition){let r=this.definition[e].default;r!==void 0&&(t[e]=r)}return t}},de=class{constructor(t={}){this.baseConfig=t}validate(t){return this.baseConfig.required&&z(t)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function xe(t){return t===void 0}function aC(t){return t===null}function z(t){return xe(t)||aC(t)}var k=class{constructor(t={}){this.config=t,this.value=new de(t)}validate(t){let e=this.value.validate(t);return e||(nC(t)?t<this.config.min?`minimum value of ${this.config.min} not respected.`:t>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function nC(t){return xe(t)||wd(t)}function wd(t){return typeof t=="number"&&!isNaN(t)}var j=class{constructor(t={}){this.value=new de(t)}validate(t){let e=this.value.validate(t);return e||(oC(t)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function oC(t){return xe(t)||Ed(t)}function Ed(t){return typeof t=="boolean"}var iC=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,A=class{constructor(t={}){this.config={emptyAllowed:!0,url:!1,...t},this.value=new de(this.config)}validate(t){let{emptyAllowed:e,url:r,regex:a,constrainTo:n}=this.config,o=this.value.validate(t);return o||(xe(t)?null:ma(t)?!e&&!t.length?"value is an empty string.":r&&!iC.test(t)?"value is not a valid URL.":a&&!a.test(t)?`value did not match provided regex ${a}`:n&&!n.includes(t)?`value should be one of: ${n.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function ma(t){return Object.prototype.toString.call(t)==="[object String]"}var R=class{constructor(t={}){this.config={options:{required:!1},values:{},...t}}validate(t){if(xe(t))return this.config.options.required?"value is required and is currently undefined":null;if(!qd(t))return"value is not an object";for(let[r,a]of Object.entries(this.config.values))if(a.required&&z(t[r]))return`value does not contain ${r}`;let e="";for(let[r,a]of Object.entries(this.config.values)){let n=t[r],o=a.validate(n);o!==null&&(e+=" "+o)}return e===""?null:e}get default(){}get required(){return!!this.config.options.required}};function qd(t){return t!==void 0&&typeof t=="object"}var U=class{constructor(t={}){this.config=t,this.value=new de(this.config)}validate(t){if(!z(t)&&!Array.isArray(t))return"value is not an array";let e=this.value.validate(t);if(e!==null)return e;if(z(t))return null;if(this.config.max!==void 0&&t.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&t.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return t.forEach(a=>{this.config.each.required&&z(a)&&(r=`value is null or undefined: ${t.join(",")}`);let n=this.validatePrimitiveValue(a,this.config.each);n!==null&&(r+=" "+n)}),r===""?null:r}return null}validatePrimitiveValue(t,e){return Ed(t)||ma(t)||wd(t)||qd(t)?e.validate(t):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function ha(t){return Array.isArray(t)}var ut=class{constructor(t){this.config=t,this.value=new de(t)}validate(t){let e=this.value.validate(t);return e!==null?e:xe(t)||Object.values(this.config.enum).find(a=>a===t)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var Md=Ze(Nd()),Ld=(t,e=5)=>t+Math.random().toString(36).substring(2,2+e);function Lo(t){return Array.isArray(t)}function Qo(t){return t.trim()===""}function Qd(t,e){return[...t.reduce((r,a)=>{let n=e(a);return r.has(n)||r.set(n,a),r},new Map).values()]}function mC(t){return(typeof btoa!="undefined"?btoa:Md.btoa)(encodeURI(t))}function Bo(t,e){let{[t]:r,...a}=e;return a}function ya(t){return mC(JSON.stringify(t))}var hC=new Set(["1",1,"yes",!0]);function jo(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;let t=navigator,e=window;return[t.globalPrivacyControl,t.doNotTrack,t.msDoNotTrack,e.doNotTrack].some(r=>hC.has(r))}function Bd(t){let e={};for(let[r,a]of t)e[r]=a;return e}function Pn(t){if(typeof t!="object"||!t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}function yC(t){if(Qo(t.openingDelimiter)||Qo(t.closingDelimiter))throw Error("delimiters should be a non-empty string");if(z(t.content)||Qo(t.content))return t.content;if(t.highlights.length===0)return Sa(t.content);let e=t.content.length,r="",a=0;for(let n=0;n<t.highlights.length;n++){let o=t.highlights[n],i=o.offset,s=i+o.length;if(s>e)break;r+=Sa(t.content.slice(a,i)),r+=t.openingDelimiter,r+=Sa(t.content.slice(i,s)),r+=t.closingDelimiter,a=s}return a!==e&&(r+=Sa(t.content.slice(a))),r}function wc(t,e){return t=Sa(t),t.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,a,n,o)=>a?Ec(a,e.notMatchDelimiters):n?Ec(n,e.exactMatchDelimiters):o?Ec(o,e.correctionDelimiters):r)}function Ec(t,e){return e?e.open+t+e.close:t}function Sa(t){let e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(e).join("|")+")",a=RegExp(r),n=RegExp(r,"g");return a.test(t)?t.replace(n,o=>e[o]):t}var Uo=t=>t;var Zd=Ze(Ud()),ep=Ze(Kd());var V=new Error("Failed to load reducers."),En=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Ca=class extends Error{constructor(e,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=r!=null?r:0}};function Jd(t){let e=[];for(let r in t){let a=encodeURIComponent(r),n=encodeURIComponent(t[r]);e.push(`${a}=${n}`)}return e.join("&")}function Xd(t){return typeof t!="object"||!t?!1:Object.values(t).every(_C)}function _C(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function tp(t){return t===429}var At=class{static async call(e){let r=$C(e),{logger:a}=e,n=await At.preprocessRequest(r,e);a.info(n,"Platform request");let{url:o,...i}=n,s=async()=>{let u=await(0,Zd.default)(o,i);if(tp(u.status))throw u;return u};try{let u=await(0,ep.backOff)(s,{retry:c=>{let l=c&&tp(c.status);return l&&a.info("Platform retrying request"),l}});if(u.status===419)throw a.info("Platform renewing token"),new En;if(u.status===404)throw new Ca(o,u.status);return a.info({response:u,requestInfo:n},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new Ca(o):u}}static async preprocessRequest(e,r){let{origin:a,preprocessRequest:n,logger:o,requestMetadata:i}=r,{signal:s,...u}=e,c=Pn(u);try{let l=await n(e,a,i);return{...e,...l}}catch(l){o.error(l,"Platform request preprocessing failed. Returning default request options.")}return c}};function rp(t,e){let r=!e||!e.environment||e.environment==="prod"?"":e.environment,a=!e||!e.region||e.region==="us"?"":`-${e.region}`;return`https://${t}${r}${a}.cloud.coveo.com`}function qn(t,e="prod"){let r=e==="prod"?"":e,a=`https://${t}.org${r}.coveo.com`,n=`https://${t}.analytics.org${r}.coveo.com`,o=`${a}/rest/search/v2`,i=`https://${t}.admin.org${r}.coveo.com`;return{platform:a,analytics:n,search:o,admin:i}}function Qc(t){return(t==null?void 0:t.multiRegionSubDomain)?`https://${t.multiRegionSubDomain}.org.coveo.com`:rp("platform",t)}function ap(t){return rp("analytics",t)}function $C(t){let{url:e,method:r,requestParams:a,contentType:n,accessToken:o,signal:i}=t,s=t.method==="POST"||t.method==="PUT",u=HC(a,n);return{url:e,method:r,headers:{"Content-Type":n,Authorization:`Bearer ${o}`,...t.headers},...s&&{body:u},signal:i}}function HC(t,e){return e==="application/x-www-form-urlencoded"?Xd(t)?Jd(t):"":JSON.stringify(t)}function va(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Ee(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:va(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:va(),extendedResults:{}}}function $o(t){let{url:e,accessToken:r,organizationId:a,authentication:n,...o}=t;return o}var kn=class{constructor(e){this._params={};this._basePath=e}addParam(e,r){this._params={...this.params,[e]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([e,r])=>`${e}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},np=t=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(t),op=(t,e)=>{let r=Bc(t);return r&&r.organizationId===e?r:null},Bc=t=>{let e=t.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(e==null?void 0:e.groups)?e.groups:null};var ip=(t,e)=>{let r=new kn(`${t.url}${e}`);return r.addParam("access_token",t.accessToken),r.addParam("organizationId",t.organizationId),r.addParam("uniqueId",t.uniqueId),t.q!==void 0&&r.addParam("q",t.q),t.enableNavigation!==void 0&&r.addParam("enableNavigation",`${t.enableNavigation}`),t.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${t.requestedOutputSize}`),t.visitorId!==void 0&&r.addParam("visitorId",`${t.visitorId}`),r.href};function YC(t){return{statusCode:t.statusCode,type:t.name,message:t.message}}function KC(t){return{statusCode:t.code,type:t.name,message:t.message,ignored:!0}}function Aa(t,e){if(e&&t.name==="AbortError")return{error:KC(t)};if(t instanceof Ca)return{error:YC(t)};throw t}var Ho=t=>t.success!==void 0,oe=t=>t.error!==void 0;function sp(t){return t.results!==void 0}function cp(t){let e=va();return z(t.questionAnswer)?(t.questionAnswer=e,t):(t.questionAnswer={...e,...t.questionAnswer},t)}var jc=(t,e)=>`${t.url}/rest/organizations/${t.organizationId}/insight/v1/configs/${t.insightId}${e!=null?e:""}`,Lr=(t,e,r,a)=>{JC(t);let n=jc(t,a);return{accessToken:t.accessToken,method:e,contentType:r,url:n,origin:"insightApiFetch"}},On=t=>{let{insightId:e,...r}=$o(t);return r},JC=t=>{if(!t.url)throw new Error("The 'url' attribute must contain a valid platform URL.");if(!t.organizationId)throw new Error("The 'organizationId' attribute must contain a valid organization ID.");if(!t.accessToken)throw new Error("The 'accessToken' attribute must contain a valid platform access token.");if(!t.insightId)throw new Error("The 'insightId' attribute must contain a valid Insight Panel configuration ID.")};var up=t=>({...Lr(t,"GET","application/json","/interface"),requestParams:{}});var lp=t=>({...Lr(t,"POST","application/json","/search"),requestParams:On(t)}),dp=t=>({...Lr(t,"POST","application/json","/querysuggest"),requestParams:On(t)});var pp=t=>{var r,a,n,o;let e=On(t);return{...Lr(t,"POST","application/json","/useractions"),requestParams:{ticketCreationDate:e.ticketCreationDate,numberSessionsBefore:(r=e.numberSessionsBefore)!=null?r:50,numberSessionsAfter:(a=e.numberSessionsAfter)!=null?a:50,maximumSessionInactivityMinutes:(n=e.maximumSessionInactivityMinutes)!=null?n:30,excludedCustomActions:(o=e.excludedCustomActions)!=null?o:[]}}};var Uc=class{constructor(e){this.options=e}async getInterface(e){let r=await At.call({...up(e),...this.options});if(r instanceof Error)return Aa(r);let a=await r.json();return r.ok?{success:a}:{error:a}}async query(e,r){let a=await At.call({...lp(e),requestMetadata:{method:"search",origin:r==null?void 0:r.origin},...this.options});if(a instanceof Error)return Aa(a);let n=await a.json();return sp(n)&&(n=cp(n)),a.ok?{success:n}:{error:n}}async querySuggest(e){let r=await At.call({...dp(e),...this.options});if(r instanceof Error)return Aa(r);let a=await r.json();return a.completions?{success:a}:{error:a}}async userActions(e){let r=await At.call({...pp(e),...this.options});if(r instanceof Error)return Aa(r);let a=await r.json();return r.ok?{success:a}:{error:a}}};var x=new A({required:!0,emptyAllowed:!1}),pe=new A({required:!1,emptyAllowed:!1}),ie=new A({required:!0,emptyAllowed:!0}),lt=({message:t,name:e,stack:r})=>({message:t,name:e,stack:r}),et=(t,e)=>{if("required"in e)return{payload:new ee({value:e}).validate({value:t}).value};let n=new R({options:{required:!0},values:e}).validate(t);if(n)throw new Nr(n);return{payload:t}},y=(t,e)=>{try{return et(t,e)}catch(r){return{payload:t,error:lt(r)}}},xt=(t,e,r,a)=>{let n=`Check the initialState of ${a}`;return fp(t,e,r,n,"Controller initialization error")},qe=(t,e,r,a)=>{let n=`Check the options of ${a}`;return fp(t,e,r,n,"Controller initialization error")},fp=(t,e,r,a,n)=>{try{return e.validate(r,a)}catch(o){throw t.logger.error(o,n),o}};var gp=()=>({caseContext:{},caseId:"",caseNumber:""}),M=t=>({caseContext:(t==null?void 0:t.caseContext)||{},caseId:t==null?void 0:t.caseId,caseNumber:t==null?void 0:t.caseNumber});function tt(t){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];if(!1)var n,o;throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Kt(t){return!!t&&!!t[he]}function dt(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var n=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===ov}(t)||Array.isArray(t)||!!t[bp]||!!((e=t.constructor)===null||e===void 0?void 0:e[bp])||_c(t)||$c(t))}function Qr(t,e,r){r===void 0&&(r=!1),xa(t)===0?(r?Object.keys:Ra)(t).forEach(function(a){r&&typeof a=="symbol"||e(a,t[a],t)}):t.forEach(function(a,n){return e(n,a,t)})}function xa(t){var e=t[he];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:_c(t)?2:$c(t)?3:0}function Fa(t,e){return xa(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function XC(t,e){return xa(t)===2?t.get(e):t[e]}function mp(t,e,r){var a=xa(t);a===2?t.set(e,r):a===3?t.add(r):t[e]=r}function hp(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function _c(t){return av&&t instanceof Map}function $c(t){return nv&&t instanceof Set}function cr(t){return t.o||t.t}function Hc(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Pp(t);delete e[he];for(var r=Ra(e),a=0;a<r.length;a++){var n=r[a],o=e[n];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[n]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[n]})}return Object.create(Object.getPrototypeOf(t),e)}function zc(t,e){return e===void 0&&(e=!1),Wc(t)||Kt(t)||!dt(t)||(xa(t)>1&&(t.set=t.add=t.clear=t.delete=ZC),Object.freeze(t),e&&Qr(t,function(r,a){return zc(a,!0)},!0)),t}function ZC(){tt(2)}function Wc(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Ft(t){var e=ru[t];return e||tt(18,t),e}function ev(t,e){ru[t]||(ru[t]=e)}function Gc(){return Tn}function Yc(t,e){e&&(Ft("Patches"),t.u=[],t.s=[],t.v=e)}function zo(t){Kc(t),t.p.forEach(tv),t.p=null}function Kc(t){t===Tn&&(Tn=t.l)}function yp(t){return Tn={p:[],l:Tn,h:t,m:!0,_:0}}function tv(t){var e=t[he];e.i===0||e.i===1?e.j():e.g=!0}function Jc(t,e){e._=e.p.length;var r=e.p[0],a=t!==void 0&&t!==r;return e.h.O||Ft("ES5").S(e,t,a),a?(r[he].P&&(zo(e),tt(4)),dt(t)&&(t=Wo(e,t),e.l||Go(e,t)),e.u&&Ft("Patches").M(r[he].t,t,e.u,e.s)):t=Wo(e,r,[]),zo(e),e.u&&e.v(e.u,e.s),t!==Rp?t:void 0}function Wo(t,e,r){if(Wc(e))return e;var a=e[he];if(!a)return Qr(e,function(s,u){return Sp(t,a,e,s,u,r)},!0),e;if(a.A!==t)return e;if(!a.P)return Go(t,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var n=a.i===4||a.i===5?a.o=Hc(a.k):a.o,o=n,i=!1;a.i===3&&(o=new Set(n),n.clear(),i=!0),Qr(o,function(s,u){return Sp(t,a,n,s,u,r,i)}),Go(t,n,!1),r&&t.u&&Ft("Patches").N(a,r,t.u,t.s)}return a.o}function Sp(t,e,r,a,n,o,i){if(Kt(n)){var s=Wo(t,n,o&&e&&e.i!==3&&!Fa(e.R,a)?o.concat(a):void 0);if(mp(r,a,s),!Kt(s))return;t.m=!1}else i&&r.add(n);if(dt(n)&&!Wc(n)){if(!t.h.D&&t._<1)return;Wo(t,n),e&&e.A.l||Go(t,n)}}function Go(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&zc(e,r)}function Xc(t,e){var r=t[he];return(r?cr(r):t)[e]}function Cp(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var a=Object.getOwnPropertyDescriptor(r,e);if(a)return a;r=Object.getPrototypeOf(r)}}function ur(t){t.P||(t.P=!0,t.l&&ur(t.l))}function Zc(t){t.o||(t.o=Hc(t.t))}function eu(t,e,r){var a=_c(e)?Ft("MapSet").F(e,r):$c(e)?Ft("MapSet").T(e,r):t.O?function(n,o){var i=Array.isArray(n),s={i:i?1:0,A:o?o.A:Gc(),P:!1,I:!1,R:{},l:o,t:n,k:null,o:null,j:null,C:!1},u=s,c=Dn;i&&(u=[s],c=Vn);var l=Proxy.revocable(u,c),d=l.revoke,f=l.proxy;return s.k=f,s.j=d,f}(e,r):Ft("ES5").J(e,r);return(r?r.A:Gc()).p.push(a),a}function rv(t){return Kt(t)||tt(22,t),function e(r){if(!dt(r))return r;var a,n=r[he],o=xa(r);if(n){if(!n.P&&(n.i<4||!Ft("ES5").K(n)))return n.t;n.I=!0,a=vp(r,o),n.I=!1}else a=vp(r,o);return Qr(a,function(i,s){n&&XC(n.t,i)===s||mp(a,i,e(s))}),o===3?new Set(a):a}(t)}function vp(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Hc(t)}function Ap(){function t(i,s){var u=o[i];return u?u.enumerable=s:o[i]=u={configurable:!0,enumerable:s,get:function(){var c=this[he];return Dn.get(c,i)},set:function(c){var l=this[he];Dn.set(l,i,c)}},u}function e(i){for(var s=i.length-1;s>=0;s--){var u=i[s][he];if(!u.P)switch(u.i){case 5:a(u)&&ur(u);break;case 4:r(u)&&ur(u)}}}function r(i){for(var s=i.t,u=i.k,c=Ra(u),l=c.length-1;l>=0;l--){var d=c[l];if(d!==he){var f=s[d];if(f===void 0&&!Fa(s,d))return!0;var p=u[d],g=p&&p[he];if(g?g.t!==f:!hp(p,f))return!0}}var S=!!s[he];return c.length!==Ra(s).length+(S?0:1)}function a(i){var s=i.k;if(s.length!==i.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var c=0;c<s.length;c++)if(!s.hasOwnProperty(c))return!0;return!1}function n(i){i.g&&tt(3,JSON.stringify(cr(i)))}var o={};ev("ES5",{J:function(i,s){var u=Array.isArray(i),c=function(d,f){if(d){for(var p=Array(f.length),g=0;g<f.length;g++)Object.defineProperty(p,""+g,t(g,!0));return p}var S=Pp(f);delete S[he];for(var v=Ra(S),F=0;F<v.length;F++){var w=v[F];S[w]=t(w,d||!!S[w].enumerable)}return Object.create(Object.getPrototypeOf(f),S)}(u,i),l={i:u?5:4,A:s?s.A:Gc(),P:!1,I:!1,R:{},l:s,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,he,{value:l,writable:!0}),c},S:function(i,s,u){u?Kt(s)&&s[he].A===i&&e(i.p):(i.u&&function c(l){if(l&&typeof l=="object"){var d=l[he];if(d){var f=d.t,p=d.k,g=d.R,S=d.i;if(S===4)Qr(p,function(N){N!==he&&(f[N]!==void 0||Fa(f,N)?g[N]||c(p[N]):(g[N]=!0,ur(d)))}),Qr(f,function(N){p[N]!==void 0||Fa(p,N)||(g[N]=!1,ur(d))});else if(S===5){if(a(d)&&(ur(d),g.length=!0),p.length<f.length)for(var v=p.length;v<f.length;v++)g[v]=!1;else for(var F=f.length;F<p.length;F++)g[F]=!0;for(var w=Math.min(p.length,f.length),D=0;D<w;D++)p.hasOwnProperty(D)||(g[D]=!0),g[D]===void 0&&c(p[D])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var xp,Tn,tu=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",av=typeof Map!="undefined",nv=typeof Set!="undefined",Fp=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Rp=tu?Symbol.for("immer-nothing"):((xp={})["immer-nothing"]=!0,xp),bp=tu?Symbol.for("immer-draftable"):"__$immer_draftable",he=tu?Symbol.for("immer-state"):"__$immer_state",VE=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var ov=""+Object.prototype.constructor,Ra=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Pp=Object.getOwnPropertyDescriptors||function(t){var e={};return Ra(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},ru={},Dn={get:function(t,e){if(e===he)return t;var r=cr(t);if(!Fa(r,e))return function(n,o,i){var s,u=Cp(o,i);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(n.k):void 0}(t,r,e);var a=r[e];return t.I||!dt(a)?a:a===Xc(t.t,e)?(Zc(t),t.o[e]=eu(t.A.h,a,t)):a},has:function(t,e){return e in cr(t)},ownKeys:function(t){return Reflect.ownKeys(cr(t))},set:function(t,e,r){var a=Cp(cr(t),e);if(a==null?void 0:a.set)return a.set.call(t.k,r),!0;if(!t.P){var n=Xc(cr(t),e),o=n==null?void 0:n[he];if(o&&o.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(hp(r,n)&&(r!==void 0||Fa(t.t,e)))return!0;Zc(t),ur(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Xc(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Zc(t),ur(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=cr(t),a=Reflect.getOwnPropertyDescriptor(r,e);return a&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:a.enumerable,value:r[e]}},defineProperty:function(){tt(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){tt(12)}},Vn={};Qr(Dn,function(t,e){Vn[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Vn.deleteProperty=function(t,e){return Vn.set.call(this,t,e,void 0)},Vn.set=function(t,e,r){return Dn.set.call(this,t[0],e,r,t[0])};var iv=function(){function t(r){var a=this;this.O=Fp,this.D=!0,this.produce=function(n,o,i){if(typeof n=="function"&&typeof o!="function"){var s=o;o=n;var u=a;return function(S){var v=this;S===void 0&&(S=s);for(var F=arguments.length,w=Array(F>1?F-1:0),D=1;D<F;D++)w[D-1]=arguments[D];return u.produce(S,function(N){var Z;return(Z=o).call.apply(Z,[v,N].concat(w))})}}var c;if(typeof o!="function"&&tt(6),i!==void 0&&typeof i!="function"&&tt(7),dt(n)){var l=yp(a),d=eu(a,n,void 0),f=!0;try{c=o(d),f=!1}finally{f?zo(l):Kc(l)}return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(S){return Yc(l,i),Jc(S,l)},function(S){throw zo(l),S}):(Yc(l,i),Jc(c,l))}if(!n||typeof n!="object"){if((c=o(n))===void 0&&(c=n),c===Rp&&(c=void 0),a.D&&zc(c,!0),i){var p=[],g=[];Ft("Patches").M(n,c,p,g),i(p,g)}return c}tt(21,n)},this.produceWithPatches=function(n,o){if(typeof n=="function")return function(c){for(var l=arguments.length,d=Array(l>1?l-1:0),f=1;f<l;f++)d[f-1]=arguments[f];return a.produceWithPatches(c,function(p){return n.apply(void 0,[p].concat(d))})};var i,s,u=a.produce(n,o,function(c,l){i=c,s=l});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(c){return[c,i,s]}):[u,i,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){dt(r)||tt(8),Kt(r)&&(r=rv(r));var a=yp(this),n=eu(this,r,void 0);return n[he].C=!0,Kc(a),n},e.finishDraft=function(r,a){var n=r&&r[he],o=n.A;return Yc(o,a),Jc(void 0,o)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!Fp&&tt(20),this.O=r},e.applyPatches=function(r,a){var n;for(n=a.length-1;n>=0;n--){var o=a[n];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}n>-1&&(a=a.slice(n+1));var i=Ft("Patches").$;return Kt(r)?i(r,a):this.produce(r,function(s){return i(s,a)})},t}(),Ge=new iv,sv=Ge.produce,NE=Ge.produceWithPatches.bind(Ge),ME=Ge.setAutoFreeze.bind(Ge),LE=Ge.setUseProxies.bind(Ge),QE=Ge.applyPatches.bind(Ge),BE=Ge.createDraft.bind(Ge),jE=Ge.finishDraft.bind(Ge),Yo=sv;function lr(t){return lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(t)}function au(t,e){if(lr(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e||"default");if(lr(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nu(t){var e=au(t,"string");return lr(e)==="symbol"?e:String(e)}function ou(t,e,r){return e=nu(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ip(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Ko(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ip(Object(r),!0).forEach(function(a){ou(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ip(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Me(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var wp=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),iu=function(){return Math.random().toString(36).substring(7).split("").join(".")},Jo={INIT:"@@redux/INIT"+iu(),REPLACE:"@@redux/REPLACE"+iu(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+iu()}};function cv(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function su(t,e,r){var a;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Me(0));if(typeof e=="function"&&typeof r=="undefined"&&(r=e,e=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(Me(1));return r(su)(t,e)}if(typeof t!="function")throw new Error(Me(2));var n=t,o=e,i=[],s=i,u=!1;function c(){s===i&&(s=i.slice())}function l(){if(u)throw new Error(Me(3));return o}function d(S){if(typeof S!="function")throw new Error(Me(4));if(u)throw new Error(Me(5));var v=!0;return c(),s.push(S),function(){if(!!v){if(u)throw new Error(Me(6));v=!1,c();var w=s.indexOf(S);s.splice(w,1),i=null}}}function f(S){if(!cv(S))throw new Error(Me(7));if(typeof S.type=="undefined")throw new Error(Me(8));if(u)throw new Error(Me(9));try{u=!0,o=n(o,S)}finally{u=!1}for(var v=i=s,F=0;F<v.length;F++){var w=v[F];w()}return S}function p(S){if(typeof S!="function")throw new Error(Me(10));n=S,f({type:Jo.REPLACE})}function g(){var S,v=d;return S={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Me(11));function D(){w.next&&w.next(l())}D();var N=v(D);return{unsubscribe:N}}},S[wp]=function(){return this},S}return f({type:Jo.INIT}),a={dispatch:f,subscribe:d,getState:l,replaceReducer:p},a[wp]=g,a}function uv(t){Object.keys(t).forEach(function(e){var r=t[e],a=r(void 0,{type:Jo.INIT});if(typeof a=="undefined")throw new Error(Me(12));if(typeof r(void 0,{type:Jo.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Me(13))})}function Xo(t){for(var e=Object.keys(t),r={},a=0;a<e.length;a++){var n=e[a];typeof t[n]=="function"&&(r[n]=t[n])}var o=Object.keys(r),i,s;try{uv(r)}catch(u){s=u}return function(c,l){if(c===void 0&&(c={}),s)throw s;if(!1)var d;for(var f=!1,p={},g=0;g<o.length;g++){var S=o[g],v=r[S],F=c[S],w=v(F,l);if(typeof w=="undefined"){var D=l&&l.type;throw new Error(Me(14))}p[S]=w,f=f||w!==F}return f=f||o.length!==Object.keys(c).length,f?p:c}}function ba(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(a){return a}:e.length===1?e[0]:e.reduce(function(a,n){return function(){return a(n.apply(void 0,arguments))}})}function Ep(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(a){return function(){var n=a.apply(void 0,arguments),o=function(){throw new Error(Me(15))},i={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=e.map(function(u){return u(i)});return o=ba.apply(void 0,s)(n.dispatch),Ko(Ko({},n),{},{dispatch:o})}}}function qp(t){var e=function(a){var n=a.dispatch,o=a.getState;return function(i){return function(s){return typeof s=="function"?s(n,o,t):i(s)}}};return e}var kp=qp();kp.withExtraArgument=qp;var cu=kp;var Op=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),lv=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Pa=function(t,e){for(var r=0,a=e.length,n=t.length;r<a;r++,n++)t[n]=e[r];return t},dv=Object.defineProperty,pv=Object.defineProperties,fv=Object.getOwnPropertyDescriptors,Tp=Object.getOwnPropertySymbols,gv=Object.prototype.hasOwnProperty,mv=Object.prototype.propertyIsEnumerable,Dp=function(t,e,r){return e in t?dv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},Ia=function(t,e){for(var r in e||(e={}))gv.call(e,r)&&Dp(t,r,e[r]);if(Tp)for(var a=0,n=Tp(e);a<n.length;a++){var r=n[a];mv.call(e,r)&&Dp(t,r,e[r])}return t},uu=function(t,e){return pv(t,fv(e))},hv=function(t,e,r){return new Promise(function(a,n){var o=function(u){try{s(r.next(u))}catch(c){n(c)}},i=function(u){try{s(r.throw(u))}catch(c){n(c)}},s=function(u){return u.done?a(u.value):Promise.resolve(u.value).then(o,i)};s((r=r.apply(t,e)).next())})};var yv=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ba:ba.apply(null,arguments)},oq=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(t){return t}};function Sv(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}function m(t,e){function r(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(e){var o=e.apply(void 0,a);if(!o)throw new Error("prepareAction did not return an object");return Ia(Ia({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:a[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(a){return a.type===t},r}var Cv=function(t){Op(e,t);function e(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Pa([void 0],r[0].concat(this)))):new(e.bind.apply(e,Pa([void 0],r.concat(this))))},e}(Array),vv=function(t){Op(e,t);function e(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Pa([void 0],r[0].concat(this)))):new(e.bind.apply(e,Pa([void 0],r.concat(this))))},e}(Array);function Vp(t){return dt(t)?Yo(t,function(){}):t}function Av(t){return typeof t=="boolean"}function xv(){return function(e){return Fv(e)}}function Fv(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e,a=t.immutableCheck,n=a===void 0?!0:a,o=t.serializableCheck,i=o===void 0?!0:o,s=t.actionCreatorCheck,u=s===void 0?!0:s,c=new Cv;if(r&&(Av(r)?c.push(cu):c.push(cu.withExtraArgument(r.extraArgument))),!1){if(n)var l;if(i)var d;if(u)var f}return c}var lu=!0;function Np(t){var e=xv(),r=t||{},a=r.reducer,n=a===void 0?void 0:a,o=r.middleware,i=o===void 0?e():o,s=r.devTools,u=s===void 0?!0:s,c=r.preloadedState,l=c===void 0?void 0:c,d=r.enhancers,f=d===void 0?void 0:d,p;if(typeof n=="function")p=n;else if(Sv(n))p=Xo(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=i;if(typeof g=="function"&&(g=g(e),!lu&&!Array.isArray(g)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!lu&&g.some(function(N){return typeof N!="function"}))throw new Error("each middleware provided to configureStore must be a function");var S=Ep.apply(void 0,g),v=ba;u&&(v=yv(Ia({trace:!lu},typeof u=="object"&&u)));var F=new vv(S),w=F;Array.isArray(f)?w=Pa([S],f):typeof f=="function"&&(w=f(F));var D=v.apply(void 0,w);return su(p,l,D)}function Rv(t){var e={},r=[],a,n={addCase:function(o,i){var s=typeof o=="string"?o:o.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[s]=i,n},addMatcher:function(o,i){return r.push({matcher:o,reducer:i}),n},addDefaultCase:function(o){return a=o,n}};return t(n),[e,r,a]}function bv(t){return typeof t=="function"}function b(t,e,r,a){r===void 0&&(r=[]);var n=typeof e=="function"?Rv(e):[e,r,a],o=n[0],i=n[1],s=n[2],u;if(bv(t))u=function(){return Vp(t())};else{var c=Vp(t);u=function(){return c}}function l(d,f){d===void 0&&(d=u());var p=Pa([o[f.type]],i.filter(function(g){var S=g.matcher;return S(f)}).map(function(g){var S=g.reducer;return S}));return p.filter(function(g){return!!g}).length===0&&(p=[s]),p.reduce(function(g,S){if(S)if(Kt(g)){var v=g,F=S(v,f);return F===void 0?g:F}else{if(dt(g))return Yo(g,function(w){return S(w,f)});var F=S(g,f);if(F===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return F}return g},d)}return l.getInitialState=u,l}var Pv="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Iv=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=Pv[Math.random()*64|0];return e},wv=["name","message","stack","code"],du=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),Mp=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),Ev=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,a=wv;r<a.length;r++){var n=a[r];typeof t[n]=="string"&&(e[n]=t[n])}return e}return{message:String(t)}},B=function(){function t(e,r,a){var n=m(e+"/fulfilled",function(l,d,f,p){return{payload:l,meta:uu(Ia({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),o=m(e+"/pending",function(l,d,f){return{payload:void 0,meta:uu(Ia({},f||{}),{arg:d,requestId:l,requestStatus:"pending"})}}),i=m(e+"/rejected",function(l,d,f,p,g){return{payload:p,error:(a&&a.serializeError||Ev)(l||"Rejected"),meta:uu(Ia({},g||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=!1,u=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function c(l){return function(d,f,p){var g=(a==null?void 0:a.idGenerator)?a.idGenerator(l):Iv(),S=new u,v,F=!1;function w(N){v=N,S.abort()}var D=function(){return hv(this,null,function(){var N,Z,re,ae,J,_,ge;return lv(this,function(me){switch(me.label){case 0:return me.trys.push([0,4,,5]),ae=(N=a==null?void 0:a.condition)==null?void 0:N.call(a,l,{getState:f,extra:p}),kv(ae)?[4,ae]:[3,2];case 1:ae=me.sent(),me.label=2;case 2:if(ae===!1||S.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return F=!0,J=new Promise(function(O,I){return S.signal.addEventListener("abort",function(){return I({name:"AbortError",message:v||"Aborted"})})}),d(o(g,l,(Z=a==null?void 0:a.getPendingMeta)==null?void 0:Z.call(a,{requestId:g,arg:l},{getState:f,extra:p}))),[4,Promise.race([J,Promise.resolve(r(l,{dispatch:d,getState:f,extra:p,requestId:g,signal:S.signal,abort:w,rejectWithValue:function(O,I){return new du(O,I)},fulfillWithValue:function(O,I){return new Mp(O,I)}})).then(function(O){if(O instanceof du)throw O;return O instanceof Mp?n(O.payload,g,l,O.meta):n(O,g,l)})])];case 3:return re=me.sent(),[3,5];case 4:return _=me.sent(),re=_ instanceof du?i(null,g,l,_.payload,_.meta):i(_,g,l),[3,5];case 5:return ge=a&&!a.dispatchConditionRejection&&i.match(re)&&re.meta.condition,ge||d(re),[2,re]}})})}();return Object.assign(D,{abort:w,requestId:g,arg:l,unwrap:function(){return D.then(qv)}})}}return Object.assign(c,{pending:o,rejected:i,fulfilled:n,typePrefix:e})}return t.withTypes=function(){return t},t}();function qv(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function kv(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Ov="task",Lp="listener",Qp="completed",pu="cancelled",uq="task-"+pu,lq="task-"+Qp,dq=Lp+"-"+pu,pq=Lp+"-"+Qp,fq=function(){function t(e){this.code=e,this.name="TaskAbortError",this.message=Ov+" "+pu+" (reason: "+e+")"}return t}();var fu="listenerMiddleware";var gq=m(fu+"/add"),mq=m(fu+"/removeAll"),hq=m(fu+"/remove");var Bp,yq=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis):function(t){return(Bp||(Bp=Promise.resolve())).then(t).catch(function(e){return setTimeout(function(){throw e},0)})},Tv=function(t){return function(e){setTimeout(e,t)}},Sq=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:Tv(10);Ap();function Rt(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r}function C(t,e,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(t,e||[])).next())})}var te;(function(t){t.search="search",t.click="click",t.custom="custom",t.view="view",t.collect="collect"})(te||(te={}));function Dv(){return typeof window!="undefined"}function gu(){return typeof navigator!="undefined"}function wa(){return typeof document!="undefined"}function mu(){try{return typeof localStorage!="undefined"}catch{return!1}}function Vv(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function jp(){return gu()&&navigator.cookieEnabled}var Nv=[te.click,te.custom,te.search,te.view],Mv=(t,e)=>Nv.indexOf(t)!==-1?Object.assign({language:wa()?document.documentElement.lang:"unknown",userAgent:gu()?navigator.userAgent:"unknown"},e):e,Ea=class{static set(e,r,a){var n,o,i,s;a&&(o=new Date,o.setTime(o.getTime()+a)),s=window.location.hostname,s.indexOf(".")===-1?Up(e,r,o):(i=s.split("."),n=i[i.length-2]+"."+i[i.length-1],Up(e,r,o,n))}static get(e){for(var r=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(e){Ea.set(e,"",-1)}};function Up(t,e,r,a){document.cookie=`${t}=${e}`+(r?`;expires=${r.toUTCString()}`:"")+(a?`;domain=${a}`:"")+";path=/;SameSite=Lax"}function Lv(){return mu()?localStorage:jp()?new dr:Vv()?sessionStorage:new qa}var dr=class{getItem(e){return Ea.get(`${dr.prefix}${e}`)}removeItem(e){Ea.erase(`${dr.prefix}${e}`)}setItem(e,r,a){Ea.set(`${dr.prefix}${e}`,r,a)}};dr.prefix="coveo_";var _p=class{constructor(){this.cookieStorage=new dr}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,r){localStorage.setItem(e,r),this.cookieStorage.setItem(e,r,31556926e3)}},qa=class{getItem(e){return null}removeItem(e){}setItem(e,r){}},Nn="__coveo.analytics.history",$p=20,Hp=1e3*60,zp=75,Mn=class{constructor(e){this.store=e||Lv()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])}addElementAsync(e){return C(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return C(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(Nn);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return C(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(Nn);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(Nn,JSON.stringify(e.slice(0,$p)))}catch{}}clear(){try{this.store.removeItem(Nn)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((a,n)=>(n.internalTime||0)-(a.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,zp)),e}isValidEntry(e){let r=this.getMostRecentElement();return r&&r.value==e.value?(e.internalTime||0)-(r.internalTime||0)>Hp:!0}stripInternalTime(e){return Array.isArray(e)?e.map(r=>{let{name:a,time:n,value:o}=r;return{name:a,time:n,value:o}}):[]}stripEmptyQuery(e){let{name:r,time:a,value:n}=e;return r&&typeof n=="string"&&r.toLowerCase()==="query"&&n.trim()===""?{name:r,time:a}:e}stripEmptyQueries(e){return e.map(r=>this.stripEmptyQuery(r))}},Wp=Object.freeze({__proto__:null,HistoryStore:Mn,MAX_NUMBER_OF_HISTORY_ELEMENTS:$p,MAX_VALUE_SIZE:zp,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Hp,STORE_KEY:Nn,default:Mn}),Qv=(t,e)=>C(void 0,void 0,void 0,function*(){return t===te.view?(yield Bv(e.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},e)):e}),Bv=t=>C(void 0,void 0,void 0,function*(){let e=new Mn,r={name:"PageView",value:t,time:new Date().toISOString()};yield e.addElementAsync(r)}),Zo,jv=new Uint8Array(16);function Uv(){if(!Zo&&(Zo=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zo(jv)}var _v=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ei(t){return typeof t=="string"&&_v.test(t)}var Oe=[];for(let t=0;t<256;++t)Oe.push((t+256).toString(16).slice(1));function Gp(t,e=0){return(Oe[t[e+0]]+Oe[t[e+1]]+Oe[t[e+2]]+Oe[t[e+3]]+"-"+Oe[t[e+4]]+Oe[t[e+5]]+"-"+Oe[t[e+6]]+Oe[t[e+7]]+"-"+Oe[t[e+8]]+Oe[t[e+9]]+"-"+Oe[t[e+10]]+Oe[t[e+11]]+Oe[t[e+12]]+Oe[t[e+13]]+Oe[t[e+14]]+Oe[t[e+15]]).toLowerCase()}function $v(t){if(!ei(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Hv(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var zv="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Wv="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Gv(t,e,r){function a(n,o,i,s){var u;if(typeof n=="string"&&(n=Hv(n)),typeof o=="string"&&(o=$v(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+n.length);if(c.set(o),c.set(n,o.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=c[l];return i}return Gp(c)}try{a.name=t}catch{}return a.DNS=zv,a.URL=Wv,a}var Yv=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yp={randomUUID:Yv};function Br(t,e,r){if(Yp.randomUUID&&!e&&!t)return Yp.randomUUID();t=t||{};let a=t.random||(t.rng||Uv)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){r=r||0;for(let n=0;n<16;++n)e[r+n]=a[n];return e}return Gp(a)}function Kv(t,e,r,a){switch(t){case 0:return e&r^~e&a;case 1:return e^r^a;case 2:return e&r^e&a^r&a;case 3:return e^r^a}}function hu(t,e){return t<<e|t>>>32-e}function Jv(t){let e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){let i=unescape(encodeURIComponent(t));t=[];for(let s=0;s<i.length;++s)t.push(i.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);let a=t.length/4+2,n=Math.ceil(a/16),o=new Array(n);for(let i=0;i<n;++i){let s=new Uint32Array(16);for(let u=0;u<16;++u)s[u]=t[i*64+u*4]<<24|t[i*64+u*4+1]<<16|t[i*64+u*4+2]<<8|t[i*64+u*4+3];o[i]=s}o[n-1][14]=(t.length-1)*8/Math.pow(2,32),o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=(t.length-1)*8&4294967295;for(let i=0;i<n;++i){let s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=o[i][p];for(let p=16;p<80;++p)s[p]=hu(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let u=r[0],c=r[1],l=r[2],d=r[3],f=r[4];for(let p=0;p<80;++p){let g=Math.floor(p/20),S=hu(u,5)+Kv(g,c,l,d)+f+e[g]+s[p]>>>0;f=d,d=l,l=hu(c,30)>>>0,c=u,u=S}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Xv=Gv("v5",80,Jv),Kp=Xv,Jp="2.28.23",Xp=t=>`${t.protocol}//${t.hostname}${t.pathname.indexOf("/")===0?t.pathname:`/${t.pathname}`}${t.search}`,Ln={pageview:"pageview",event:"event"},yu=class{constructor({client:e,uuidGenerator:r=Br}){this.client=e,this.uuidGenerator=r}},Zp=class extends yu{constructor({client:e,uuidGenerator:r=Br}){super({client:e,uuidGenerator:r});this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=Xp(window.location),this.lastReferrer=wa()?document.referrer:"",this.addHooks()}getApi(e){switch(e){case"setAction":return this.setAction;default:return null}}setAction(e,r){this.action=e,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,r){return Object.assign({hitType:e},this.getNextValues(e,r))}updateLocationInformation(e,r){this.updateLocationForNextPageView(e,r)}getDefaultContextInformation(e){let r={title:wa()?document.title:"",encoding:wa()?document.characterSet:"UTF-8"},a={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},o={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},o),a),n),r)}updateLocationForNextPageView(e,r){let{pageViewId:a,referrer:n,location:o}=this.getNextValues(e,r);this.lastReferrer=n,this.pageViewId=a,this.currentLocation=o,e===Ln.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,r){return{pageViewId:e===Ln.pageview?this.nextPageViewId:this.pageViewId,referrer:e===Ln.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===Ln.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(e){if(e.page){let r=n=>n.replace(/^\/?(.*)$/,"/$1");return`${(n=>n.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(e.page)}`}else return Xp(window.location)}},bt=class{constructor(e,r){if(!ei(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>bt.expirationTime}validate(e,r){return!this.expired&&this.matchReferrer(e,r)}matchReferrer(e,r){try{let a=new URL(e);return r.some(n=>new RegExp(n.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(a.host))}catch{return!1}}static fromString(e){let r=e.split(".");if(r.length!==2)return null;let[a,n]=r;if(a.length!==32||isNaN(parseInt(n)))return null;let o=a.substring(0,8)+"-"+a.substring(8,12)+"-"+a.substring(12,16)+"-"+a.substring(16,20)+"-"+a.substring(20,32);return ei(o)?new bt(o,Number.parseInt(n)*1e3):null}};bt.cvo_cid="cvo_cid";bt.expirationTime=120;var ef=class extends yu{constructor({client:e,uuidGenerator:r=Br}){super({client:e,uuidGenerator:r})}getApi(e){switch(e){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(e){return C(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(e),a=yield this.client.getCurrentVisitorId();return r.searchParams.set(bt.cvo_cid,new bt(a,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(e){this.client.setAcceptedLinkReferrers(e)}};ef.Id="link";var rt=Object.keys;function ti(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}var Su={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Zv=rt(Su).map(t=>Su[t]),eA=[...Zv].join("|"),tA=new RegExp(`^(${eA}$)`),rA={svcAction:"svc_action",svcActionData:"svc_action_data"},aA=t=>rt(t).filter(e=>t[e]!==void 0).reduce((e,r)=>{let a=Su[r]||r;return Object.assign(Object.assign({},e),{[a]:t[r]})},{}),nA=t=>tA.test(t),oA=[nA],tf={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},rf={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Le={action:"pa",list:"pal",listSource:"pls"},ri={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},iA=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Cu={id:"quoteId",affiliation:"quoteAffiliation"},vu={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},sA={add:Le,bookmark_add:Le,bookmark_remove:Le,click:Le,checkout:Le,checkout_option:Le,detail:Le,impression:Le,remove:Le,refund:Object.assign(Object.assign({},Le),ri),purchase:Object.assign(Object.assign({},Le),ri),quickview:Le,quote:Object.assign(Object.assign({},Le),Cu),review:Object.assign(Object.assign({},Le),vu)},cA=rt(tf).map(t=>tf[t]),uA=rt(rf).map(t=>rf[t]),lA=rt(Le).map(t=>Le[t]),dA=rt(ri).map(t=>ri[t]),pA=rt(vu).map(t=>vu[t]),fA=rt(Cu).map(t=>Cu[t]),gA=[...cA,"custom"].join("|"),mA=[...uA,"custom"].join("|"),af="(pr[0-9]+)",nf="(il[0-9]+pi[0-9]+)",hA=new RegExp(`^${af}(${gA})$`),yA=new RegExp(`^(${nf}(${mA}))|(il[0-9]+nm)$`),SA=new RegExp(`^(${lA.join("|")})$`),CA=new RegExp(`^(${dA.join("|")})$`),vA=new RegExp(`^${af}custom$`),AA=new RegExp(`^${nf}custom$`),xA=new RegExp(`^(${[...iA,...pA,...fA].join("|")})$`),FA=t=>hA.test(t),RA=t=>yA.test(t),bA=t=>SA.test(t),PA=t=>CA.test(t),IA=t=>xA.test(t),wA=[RA,FA,bA,PA,IA],EA=[vA,AA],qA={anonymizeIp:"aip"},kA={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},OA={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},TA=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],DA=Object.assign(Object.assign(Object.assign(Object.assign({},qA),kA),OA),TA.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:e}),{})),Au=Object.assign(Object.assign({},DA),rA),VA=t=>{let e=!!t.action&&sA[t.action]||{};return rt(t).reduce((r,a)=>{let n=e[a]||Au[a]||a;return Object.assign(Object.assign({},r),{[n]:t[a]})},{})},NA=rt(Au).map(t=>Au[t]),MA=t=>NA.indexOf(t)!==-1,LA=t=>t==="custom",QA=t=>[...wA,...oA,MA,LA].some(e=>e(t)),BA=t=>rt(t).reduce((e,r)=>{let a=jA(r);return a?Object.assign(Object.assign({},e),UA(a,t[r])):Object.assign(Object.assign({},e),{[r]:t[r]})},{}),jA=t=>{let e;return[...EA].every(r=>{var a;return e=(a=r.exec(t))===null||a===void 0?void 0:a[1],!Boolean(e)}),e},UA=(t,e)=>rt(e).reduce((r,a)=>Object.assign(Object.assign({},r),{[`${t}${a}`]:e[a]}),{}),of=class{constructor(e){this.opts=e}sendEvent(e,r){return C(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:a,preprocessRequest:n}=this.opts,o=yield this.getQueryParamsForEventType(e),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${a}/analytics/${e}?${o}`,r,n),u=this.encodeForEventType(e,s),c=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,c)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,r,a){return C(this,void 0,void 0,function*(){let n=e,o=r;if(a){let i=yield a({url:e,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:u}=i;n=s||e;try{o=JSON.parse(u)}catch(c){console.error("Unable to process the request body as a JSON string",c)}}return{payload:o,url:n}})}encodeForEventType(e,r){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(e){return C(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:a}=this.opts,n=yield a.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(e)?`access_token=${r}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(o=>!!o).join("&")})}isEventTypeLegacy(e){return[te.click,te.custom,te.search,te.view].indexOf(e)!==-1}encodeForLegacyType(e,r){return`${e}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter(r=>!!e[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(e[r]))}`).join("&")}encodeValue(e){return typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:JSON.stringify(e)}},sf=class{sendEvent(e,r){return C(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return C(this,void 0,void 0,function*(){return Promise.resolve()})}},cf=window.fetch,xu=class{constructor(e){this.opts=e}sendEvent(e,r){return C(this,void 0,void 0,function*(){let{baseUrl:a,visitorIdProvider:n,preprocessRequest:o}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",s={url:`${a}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},s),o?yield o(s,"analyticsFetch"):{}),{url:c}=u,l=Rt(u,["url"]),d=yield cf(c,l);if(d.ok){let f=yield d.json();return f.visitorId&&n.setCurrentVisitorId(f.visitorId),f}else{try{d.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,d,r),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return C(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts,r=`${e}/analytics/visit`;yield cf(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return[te.click,te.custom,te.search,te.view].indexOf(e)!==-1}getVisitorIdParam(){return C(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,r=yield e.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},uf=class{constructor(e,r){mu()&&jp()?this.storage=new _p:mu()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new qa),this.client=new xu(e),this.beaconClient=new of(e),window.addEventListener("beforeunload",()=>{let a=r();for(let{eventType:n,payload:o}of a)this.beaconClient.sendEvent(n,o)})}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},lf=class{constructor(e,r){this.storage=r||new qa,this.client=new xu(e)}getClientDependingOnEventType(e){return this.client}},df=class{constructor(){this.storage=new qa,this.client=new sf}getClientDependingOnEventType(e){return this.client}},_A="xx",$A=t=>(t==null?void 0:t.startsWith(_A))||!1,HA=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function zA(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var WA=["1",1,"yes",!0];function Qn(){return gu()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(t=>WA.indexOf(t)!==-1)}var pf="v15",ff={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function GA(t=ff.default,e=pf,r=!1){if(t=t.replace(/\/$/,""),r)return`${t}/${e}`;let a=t.endsWith("/rest")||t.endsWith("/rest/ua");return`${t}${a?"":"/rest"}/${e}`}var YA="38824e1f-37f5-42d3-8372-a4b8fa9df946",je=class{get defaultOptions(){return{endpoint:ff.default,isCustomEndpoint:!1,token:"",version:pf,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Jp}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Qv,Mv].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),Qn()&&(this.clear(),this.runtime.storage=new qa),this.addEventTypeMapping(te.view,{newEventType:te.view,addClientIdParameter:!0}),this.addEventTypeMapping(te.click,{newEventType:te.click,addClientIdParameter:!0}),this.addEventTypeMapping(te.custom,{newEventType:te.custom,addClientIdParameter:!0}),this.addEventTypeMapping(te.search,{newEventType:te.search,addClientIdParameter:!0})}initRuntime(e){return Dv()&&wa()?new uf(e,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(zA()&&console.warn(HA),new lf(e))}get storage(){return this.runtime.storage}determineVisitorId(){return C(this,void 0,void 0,function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Br()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),Br()}})}getCurrentVisitorId(){return C(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return C(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,r){return C(this,void 0,void 0,function*(){if(ei(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Kp(e,Kp(r,YA)))}})}getParameters(e,...r){return C(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...r)})}getPayload(e,...r){return C(this,void 0,void 0,function*(){let a=yield this.resolveParameters(e,...r);return yield this.resolvePayloadForParameters(e,a)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Br()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Qn())return null;try{let r=new URL(e).searchParams.get(bt.cvo_cid);if(r==null)return null;let a=bt.fromString(r);return!a||!wa()||!a.validate(document.referrer,this.acceptedLinkReferrers)?null:a.clientId}catch{}return null}resolveParameters(e,...r){return C(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:a=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:o=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[e]||{};return yield[p=>a.length>0?this.parseVariableArgumentsPayload(a,p):p[0],p=>C(this,void 0,void 0,function*(){return Object.assign(Object.assign({},p),{visitorId:n?yield this.getCurrentVisitorId():""})}),p=>C(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},p),{clientId:yield this.getCurrentVisitorId()}):p}),p=>o?this.ensureAnonymousUserWhenUsingApiKey(p):p,p=>this.beforeSendHooks.reduce((g,S)=>C(this,void 0,void 0,function*(){let v=yield g;return yield S(e,v)}),p)].reduce((p,g)=>C(this,void 0,void 0,function*(){let S=yield p;return yield g(S)}),Promise.resolve(r))})}resolvePayloadForParameters(e,r){return C(this,void 0,void 0,function*(){let{usesMeasurementProtocol:a=!1}=this.eventTypeMapping[e]||{};return yield[d=>this.setTrackingIdIfTrackingIdNotPresent(d),d=>this.removeEmptyPayloadValues(d,e),d=>this.validateParams(d,e),d=>a?VA(d):d,d=>a?this.removeUnknownParameters(d):d,d=>a?this.processCustomParameters(d):this.mapCustomParametersToCustomData(d)].reduce((d,f)=>C(this,void 0,void 0,function*(){let p=yield d;return yield f(p)}),Promise.resolve(r))})}makeEvent(e,...r){return C(this,void 0,void 0,function*(){let{newEventType:a=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...r),o=yield this.resolvePayloadForParameters(e,n);return{eventType:a,payload:o,log:i=>C(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:a,payload:Object.assign(Object.assign({},o),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(e,Object.assign(Object.assign({},n),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e,...r){return C(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...r)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return C(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:r,payload:a}=e;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,a)}})}clear(){this.storage.removeItem("visitorId"),new Mn().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return C(this,void 0,void 0,function*(){return this.makeEvent(te.search,e)})}sendSearchEvent(e){var{searchQueryUid:r}=e,a=Rt(e,["searchQueryUid"]);return C(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(a)).log({searchQueryUid:r})})}makeClickEvent(e){return C(this,void 0,void 0,function*(){return this.makeEvent(te.click,e)})}sendClickEvent(e){var{searchQueryUid:r}=e,a=Rt(e,["searchQueryUid"]);return C(this,void 0,void 0,function*(){return(yield this.makeClickEvent(a)).log({searchQueryUid:r})})}makeCustomEvent(e){return C(this,void 0,void 0,function*(){return this.makeEvent(te.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:r}=e,a=Rt(e,["lastSearchQueryUid"]);return C(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(a)).log({lastSearchQueryUid:r})})}makeViewEvent(e){return C(this,void 0,void 0,function*(){return this.makeEvent(te.view,e)})}sendViewEvent(e){return C(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return C(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return C(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,r){this.eventTypeMapping[e]=r}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(r=>typeof r=="string"))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,r){let a={};for(let n=0,o=r.length;n<o;n++){let i=r[n];if(typeof i=="string")a[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},a),i)}return a}isKeyAllowedEmpty(e,r){return({[te.search]:["queryText"]}[e]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(e,r){let a=n=>typeof n!="undefined"&&n!==null&&n!=="";return Object.keys(e).filter(n=>this.isKeyAllowedEmpty(r,n)||a(e[n])).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:e[o]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(a=>{if(QA(a))return!0;console.log(a,"is not processed by coveoua")}).reduce((a,n)=>Object.assign(Object.assign({},a),{[n]:e[n]}),{})}processCustomParameters(e){let{custom:r}=e,a=Rt(e,["custom"]),n={};r&&ti(r)&&(n=this.lowercaseKeys(r));let o=BA(a);return Object.assign(Object.assign({},n),o)}mapCustomParametersToCustomData(e){let{custom:r}=e,a=Rt(e,["custom"]);if(r&&ti(r)){let n=this.lowercaseKeys(r);return Object.assign(Object.assign({},a),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let r=Object.keys(e),a={};return r.forEach(n=>{a[n.toLowerCase()]=e[n]}),a}validateParams(e,r){let{anonymizeIp:a}=e,n=Rt(e,["anonymizeIp"]);return a!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${a}`.toLowerCase())==-1&&(n.anonymizeIp=1),(r==te.view||r==te.click||r==te.search||r==te.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),r==te.view&&(n.location=this.limit(n.location,128)),(r=="pageview"||r=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:r}=e,a=Rt(e,["userId"]);return $A(this.options.token)&&!r?(a.userId="anonymous",a):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:r}=e,a=Rt(e,["trackingId"]);return r?e:(a.hasOwnProperty("custom")&&ti(a.custom)&&(a.custom.hasOwnProperty("context_website")||a.custom.hasOwnProperty("siteName"))&&(a.trackingId=a.custom.context_website||a.custom.siteName),a.hasOwnProperty("customData")&&ti(a.customData)&&(a.customData.hasOwnProperty("context_website")||a.customData.hasOwnProperty("siteName"))&&(a.trackingId=a.customData.context_website||a.customData.siteName),a)}limit(e,r){return typeof e!="string"?e:e.substring(0,r)}get baseUrl(){return GA(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Te;(function(t){t.contextChanged="contextChanged",t.expandToFullUI="expandToFullUI",t.openUserActions="openUserActions",t.showPrecedingSessions="showPrecedingSessions",t.showFollowingSessions="showFollowingSessions",t.clickViewedDocument="clickViewedDocument",t.clickPageView="clickPageView",t.createArticle="createArticle"})(Te||(Te={}));var h;(function(t){t.interfaceLoad="interfaceLoad",t.interfaceChange="interfaceChange",t.didyoumeanAutomatic="didyoumeanAutomatic",t.didyoumeanClick="didyoumeanClick",t.resultsSort="resultsSort",t.searchboxSubmit="searchboxSubmit",t.searchboxClear="searchboxClear",t.searchboxAsYouType="searchboxAsYouType",t.breadcrumbFacet="breadcrumbFacet",t.breadcrumbResetAll="breadcrumbResetAll",t.documentQuickview="documentQuickview",t.documentOpen="documentOpen",t.omniboxAnalytics="omniboxAnalytics",t.omniboxFromLink="omniboxFromLink",t.searchFromLink="searchFromLink",t.triggerNotify="notify",t.triggerExecute="execute",t.triggerQuery="query",t.undoTriggerQuery="undoQuery",t.triggerRedirect="redirect",t.pagerResize="pagerResize",t.pagerNumber="pagerNumber",t.pagerNext="pagerNext",t.pagerPrevious="pagerPrevious",t.pagerScrolling="pagerScrolling",t.staticFilterClearAll="staticFilterClearAll",t.staticFilterSelect="staticFilterSelect",t.staticFilterDeselect="staticFilterDeselect",t.facetClearAll="facetClearAll",t.facetSearch="facetSearch",t.facetSelect="facetSelect",t.facetSelectAll="facetSelectAll",t.facetDeselect="facetDeselect",t.facetExclude="facetExclude",t.facetUnexclude="facetUnexclude",t.facetUpdateSort="facetUpdateSort",t.facetShowMore="showMoreFacetResults",t.facetShowLess="showLessFacetResults",t.queryError="query",t.queryErrorBack="errorBack",t.queryErrorClear="errorClearQuery",t.queryErrorRetry="errorRetry",t.recommendation="recommendation",t.recommendationInterfaceLoad="recommendationInterfaceLoad",t.recommendationOpen="recommendationOpen",t.likeSmartSnippet="likeSmartSnippet",t.dislikeSmartSnippet="dislikeSmartSnippet",t.expandSmartSnippet="expandSmartSnippet",t.collapseSmartSnippet="collapseSmartSnippet",t.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",t.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",t.sendSmartSnippetReason="sendSmartSnippetReason",t.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",t.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",t.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",t.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",t.openSmartSnippetSource="openSmartSnippetSource",t.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",t.openSmartSnippetInlineLink="openSmartSnippetInlineLink",t.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",t.recentQueryClick="recentQueriesClick",t.clearRecentQueries="clearRecentQueries",t.recentResultClick="recentResultClick",t.clearRecentResults="clearRecentResults",t.noResultsBack="noResultsBack",t.showMoreFoldedResults="showMoreFoldedResults",t.showLessFoldedResults="showLessFoldedResults",t.copyToClipboard="copyToClipboard",t.caseSendEmail="Case.SendEmail",t.feedItemTextPost="FeedItem.TextPost",t.caseAttach="caseAttach",t.caseDetach="caseDetach",t.retryGeneratedAnswer="retryGeneratedAnswer",t.likeGeneratedAnswer="likeGeneratedAnswer",t.dislikeGeneratedAnswer="dislikeGeneratedAnswer",t.openGeneratedAnswerSource="openGeneratedAnswerSource",t.generatedAnswerStreamEnd="generatedAnswerStreamEnd",t.generatedAnswerSourceHover="generatedAnswerSourceHover",t.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",t.generatedAnswerHideAnswers="generatedAnswerHideAnswers",t.generatedAnswerShowAnswers="generatedAnswerShowAnswers",t.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",t.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(h||(h={}));var Fu={[h.triggerNotify]:"queryPipelineTriggers",[h.triggerExecute]:"queryPipelineTriggers",[h.triggerQuery]:"queryPipelineTriggers",[h.triggerRedirect]:"queryPipelineTriggers",[h.queryError]:"errors",[h.queryErrorBack]:"errors",[h.queryErrorClear]:"errors",[h.queryErrorRetry]:"errors",[h.pagerNext]:"getMoreResults",[h.pagerPrevious]:"getMoreResults",[h.pagerNumber]:"getMoreResults",[h.pagerResize]:"getMoreResults",[h.pagerScrolling]:"getMoreResults",[h.facetSearch]:"facet",[h.facetShowLess]:"facet",[h.facetShowMore]:"facet",[h.recommendation]:"recommendation",[h.likeSmartSnippet]:"smartSnippet",[h.dislikeSmartSnippet]:"smartSnippet",[h.expandSmartSnippet]:"smartSnippet",[h.collapseSmartSnippet]:"smartSnippet",[h.openSmartSnippetFeedbackModal]:"smartSnippet",[h.closeSmartSnippetFeedbackModal]:"smartSnippet",[h.sendSmartSnippetReason]:"smartSnippet",[h.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[h.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[h.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[h.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[h.clearRecentQueries]:"recentQueries",[h.recentResultClick]:"recentlyClickedDocuments",[h.clearRecentResults]:"recentlyClickedDocuments",[h.showLessFoldedResults]:"folding",[h.caseDetach]:"case",[h.likeGeneratedAnswer]:"generatedAnswer",[h.dislikeGeneratedAnswer]:"generatedAnswer",[h.openGeneratedAnswerSource]:"generatedAnswer",[h.generatedAnswerStreamEnd]:"generatedAnswer",[h.generatedAnswerSourceHover]:"generatedAnswer",[h.generatedAnswerCopyToClipboard]:"generatedAnswer",[h.generatedAnswerHideAnswers]:"generatedAnswer",[h.generatedAnswerShowAnswers]:"generatedAnswer",[h.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Te.expandToFullUI]:"interface",[Te.openUserActions]:"User Actions",[Te.showPrecedingSessions]:"User Actions",[Te.showFollowingSessions]:"User Actions",[Te.clickViewedDocument]:"User Actions",[Te.clickPageView]:"User Actions",[Te.createArticle]:"createArticle"},jr=class{constructor(){this.runtime=new df,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(te.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(te.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(te.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(te.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Jp}};function KA(t){let e="";return t.filter(r=>{let a=r!==e;return e=r,a})}function JA(t){return t.map(e=>e.replace(/;/g,""))}function gf(t){let e=256,r=t.join(";");return r.length<=e?r:gf(t.slice(1))}var mf=t=>{let e=JA(t),r=KA(e);return gf(r)};function hf(t){let e=typeof t.partialQueries=="string"?t.partialQueries:mf(t.partialQueries),r=typeof t.suggestions=="string"?t.suggestions:mf(t.suggestions);return Object.assign(Object.assign({},t),{partialQueries:e,suggestions:r})}var Ur=class{constructor(e,r){this.opts=e,this.provider=r;let a=e.enableAnalytics===!1||Qn();this.coveoAnalyticsClient=a?new jr:new je(e)}disable(){this.coveoAnalyticsClient instanceof je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new jr}enable(){this.coveoAnalyticsClient=new je(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(h.interfaceLoad)}logInterfaceLoad(){return C(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(h.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return C(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(h.recommendation)}logRecommendation(){return C(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,r){return this.makeClickEvent(h.recommendationOpen,e,r)}logRecommendationOpen(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(h.staticFilterClearAll,e)}logStaticFilterClearAll(e){return C(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(h.staticFilterSelect,e)}logStaticFilterSelect(e){return C(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(h.staticFilterDeselect,e)}logStaticFilterDeselect(e){return C(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(h.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return C(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(h.interfaceChange,e)}logInterfaceChange(e){return C(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(h.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return C(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(h.didyoumeanClick)}logDidYouMeanClick(){return C(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(h.resultsSort,e)}logResultsSort(e){return C(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(h.searchboxSubmit)}logSearchboxSubmit(){return C(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(h.searchboxClear)}logSearchboxClear(){return C(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(h.searchboxAsYouType)}logSearchboxAsYouType(){return C(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(h.breadcrumbFacet,e)}logBreadcrumbFacet(e){return C(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(h.breadcrumbResetAll)}logBreadcrumbResetAll(){return C(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,r){return this.makeClickEvent(h.documentQuickview,e,r)}logDocumentQuickview(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,r){return this.makeClickEvent(h.documentOpen,e,r)}logDocumentOpen(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(h.omniboxAnalytics,hf(e))}logOmniboxAnalytics(e){return C(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(h.omniboxFromLink,hf(e))}logOmniboxFromLink(e){return C(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(h.searchFromLink)}logSearchFromLink(){return C(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(h.triggerNotify,e)}logTriggerNotify(e){return C(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(h.triggerExecute,e)}logTriggerExecute(e){return C(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(h.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return C(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(h.undoTriggerQuery,e)}logUndoTriggerQuery(e){return C(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(h.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return C(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(h.pagerResize,e)}logPagerResize(e){return C(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(h.pagerNumber,e)}logPagerNumber(e){return C(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(h.pagerNext,e)}logPagerNext(e){return C(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(h.pagerPrevious,e)}logPagerPrevious(e){return C(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(h.pagerScrolling)}logPagerScrolling(){return C(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(h.facetClearAll,e)}logFacetClearAll(e){return C(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(h.facetSearch,e)}logFacetSearch(e){return C(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(h.facetSelect,e)}logFacetSelect(e){return C(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(h.facetDeselect,e)}logFacetDeselect(e){return C(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(h.facetExclude,e)}logFacetExclude(e){return C(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(h.facetUnexclude,e)}logFacetUnexclude(e){return C(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(h.facetSelectAll,e)}logFacetSelectAll(e){return C(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(h.facetUpdateSort,e)}logFacetUpdateSort(e){return C(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(h.facetShowMore,e)}logFacetShowMore(e){return C(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(h.facetShowLess,e)}logFacetShowLess(e){return C(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(h.queryError,e)}logQueryError(e){return C(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return C(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(h.queryErrorBack);return{description:e.description,log:()=>C(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(h.queryErrorBack)})}})}logQueryErrorBack(){return C(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return C(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(h.queryErrorRetry);return{description:e.description,log:()=>C(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(h.queryErrorRetry)})}})}logQueryErrorRetry(){return C(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return C(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(h.queryErrorClear);return{description:e.description,log:()=>C(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(h.queryErrorClear)})}})}logQueryErrorClear(){return C(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(h.likeSmartSnippet)}logLikeSmartSnippet(){return C(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(h.dislikeSmartSnippet)}logDislikeSmartSnippet(){return C(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(h.expandSmartSnippet)}logExpandSmartSnippet(){return C(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(h.collapseSmartSnippet)}logCollapseSmartSnippet(){return C(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(h.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return C(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(h.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return C(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,r){return this.makeCustomEvent(h.sendSmartSnippetReason,{reason:e,details:r})}logSmartSnippetFeedbackReason(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(h.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return C(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(h.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return C(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(h.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return C(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(h.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return C(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,r){return this.makeClickEvent(h.openSmartSnippetSource,e,r)}logOpenSmartSnippetSource(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,r){return this.makeClickEvent(h.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(e,r){return this.makeClickEvent(h.copyToClipboard,e,r)}logCopyToClipboard(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,r){return this.makeClickEvent(h.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,r){return this.makeClickEvent(h.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(h.recentQueryClick)}logRecentQueryClick(){return C(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(h.clearRecentQueries)}logClearRecentQueries(){return C(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,r){return this.makeCustomEvent(h.recentResultClick,{info:e,identifier:r})}logRecentResultClick(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(h.clearRecentResults)}logClearRecentResults(){return C(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(h.noResultsBack)}logNoResultsBack(){return C(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,r){return this.makeClickEvent(h.showMoreFoldedResults,e,r)}logShowMoreFoldedResults(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(h.showLessFoldedResults)}logShowLessFoldedResults(){return C(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,r){var a;return{actionCause:r,customData:(a=e.payload)===null||a===void 0?void 0:a.customData}}makeCustomEvent(e,r,a=Fu[e]){return C(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:a,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(e,r,a=Fu[e]){return C(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,r,a)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,r,a){return C(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),a),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(e,r,a){return C(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,r,a)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,r){return C(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,r){return C(this,void 0,void 0,function*(){let a=yield this.getBaseSearchEventRequest(e,r),n=yield this.coveoAnalyticsClient.makeSearchEvent(a);return{description:this.makeEventDescription(n,e),log:({searchUID:o})=>n.log({searchQueryUid:o})}})}makeClickEvent(e,r,a,n){return C(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),i=yield this.coveoAnalyticsClient.makeClickEvent(o);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(e,r,a,n){return C(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,r,a,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var a,n;return C(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return C(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof je?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(h.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return C(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(h.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return C(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(h.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return C(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(h.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return C(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(h.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return C(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(h.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return C(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(h.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return C(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(h.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return C(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(h.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return C(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(h.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return C(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(h.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return C(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}},ai=Object.assign({},Ln),yf=Object.keys(ai).map(t=>ai[t]),Bn=class extends Zp{constructor({client:e,uuidGenerator:r=Br}){super({client:e,uuidGenerator:r});this.ticket={}}getApi(e){let r=super.getApi(e);if(r!==null)return r;switch(e){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((e,...[r])=>yf.indexOf(e)!==-1?this.addSVCDataToPayload(e,r):r),this.client.registerAfterSendEventHook((e,...[r])=>(yf.indexOf(e)!==-1&&this.updateLocationInformation(e,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(ai.pageview,{newEventType:te.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(ai.event,{newEventType:te.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,r){var a;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,r)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys((a=this.actionData)!==null&&a!==void 0?a:{}).length>0?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},o),n),r)}getTicketPayload(){return aA(this.ticket)}};Bn.Id="svc";var ni;(function(t){t.click="click",t.flowStart="flowStart"})(ni||(ni={}));var pt;(function(t){t.enterInterface="ticket_create_start",t.fieldUpdate="ticket_field_update",t.fieldSuggestionClick="ticket_classification_click",t.suggestionClick="suggestion_click",t.suggestionRate="suggestion_rate",t.nextCaseStep="ticket_next_stage",t.caseCancelled="ticket_cancel",t.caseSolved="ticket_cancel",t.caseCreated="ticket_create"})(pt||(pt={}));var oi;(function(t){t.quit="Quit",t.solved="Solved"})(oi||(oi={}));var Ru=class{constructor(e,r){var a;this.options=e,this.provider=r;let n=((a=e.enableAnalytics)!==null&&a!==void 0?a:!0)&&!Qn();this.coveoAnalyticsClient=n?new je(e):new jr,this.svc=new Bn({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new jr,this.svc=new Bn({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new je(this.options),this.svc=new Bn({client:this.coveoAnalyticsClient})}logEnterInterface(e){return this.svc.setAction(pt.enterInterface),this.svc.setTicket(e.ticket),this.sendFlowStartEvent()}logUpdateCaseField(e){return this.svc.setAction(pt.fieldUpdate,{fieldName:e.fieldName}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectFieldSuggestion(e){return this.svc.setAction(pt.fieldSuggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(e){return this.svc.setAction(pt.suggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logRateDocumentSuggestion(e){return this.svc.setAction(pt.suggestionRate,Object.assign({rate:e.rating},e.suggestion)),this.svc.setTicket(e.ticket),this.sendClickEvent()}logMoveToNextCaseStep(e){return this.svc.setAction(pt.nextCaseStep,{stage:e==null?void 0:e.stage}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCancelled(e){return this.svc.setAction(pt.caseCancelled,{reason:oi.quit}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseSolved(e){return this.svc.setAction(pt.caseSolved,{reason:oi.solved}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCreated(e){return this.svc.setAction(pt.caseCreated),this.svc.setTicket(e.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ni.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ni.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},XA=t=>{let e={};return t.caseContext&&Object.keys(t.caseContext).forEach(r=>{var a;let n=(a=t.caseContext)===null||a===void 0?void 0:a[r];if(n){let o=`context_${r}`;e[o]=n}}),e},L=(t,e=!0)=>{let{caseContext:r,caseId:a,caseNumber:n}=t,o=Rt(t,["caseContext","caseId","caseNumber"]),i=XA(t);return Object.assign(Object.assign(Object.assign({CaseId:a,CaseNumber:n},o),!!i.context_Case_Subject&&{CaseSubject:i.context_Case_Subject}),e&&i)},bu=class{constructor(e,r){this.opts=e,this.provider=r;let a=e.enableAnalytics===!1||Qn();this.coveoAnalyticsClient=a?new jr:new je(e)}disable(){this.coveoAnalyticsClient instanceof je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new jr}enable(){this.coveoAnalyticsClient=new je(this.opts)}logInterfaceLoad(e){if(e){let r=L(e);return this.logSearchEvent(h.interfaceLoad,r)}return this.logSearchEvent(h.interfaceLoad)}logInterfaceChange(e){let r=L(e);return this.logSearchEvent(h.interfaceChange,r)}logStaticFilterDeselect(e){let r=L(e);return this.logSearchEvent(h.staticFilterDeselect,r)}logFetchMoreResults(e){if(e){let r=L(e);return this.logCustomEvent(h.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(h.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(e){let r=L(e);return this.logSearchEvent(h.breadcrumbFacet,r)}logBreadcrumbResetAll(e){if(e){let r=L(e);return this.logSearchEvent(h.breadcrumbResetAll,r)}return this.logSearchEvent(h.breadcrumbResetAll)}logFacetSelect(e){let r=L(e);return this.logSearchEvent(h.facetSelect,r)}logFacetExclude(e){let r=L(e);return this.logSearchEvent(h.facetExclude,r)}logFacetDeselect(e){let r=L(e);return this.logSearchEvent(h.facetDeselect,r)}logFacetUpdateSort(e){let r=L(e);return this.logSearchEvent(h.facetUpdateSort,r)}logFacetClearAll(e){let r=L(e);return this.logSearchEvent(h.facetClearAll,r)}logFacetShowMore(e){let r=L(e,!1);return this.logCustomEvent(h.facetShowMore,r)}logFacetShowLess(e){let r=L(e,!1);return this.logCustomEvent(h.facetShowLess,r)}logQueryError(e){let r=L(e,!1);return this.logCustomEvent(h.queryError,r)}logPagerNumber(e){let r=L(e,!1);return this.logCustomEvent(h.pagerNumber,r)}logPagerNext(e){let r=L(e,!1);return this.logCustomEvent(h.pagerNext,r)}logPagerPrevious(e){let r=L(e,!1);return this.logCustomEvent(h.pagerPrevious,r)}logDidYouMeanAutomatic(e){if(e){let r=L(e);return this.logSearchEvent(h.didyoumeanAutomatic,r)}return this.logSearchEvent(h.didyoumeanAutomatic)}logDidYouMeanClick(e){if(e){let r=L(e);return this.logSearchEvent(h.didyoumeanClick,r)}return this.logSearchEvent(h.didyoumeanClick)}logResultsSort(e){let r=L(e);return this.logSearchEvent(h.resultsSort,r)}logSearchboxSubmit(e){if(e){let r=L(e);return this.logSearchEvent(h.searchboxSubmit,r)}return this.logSearchEvent(h.searchboxSubmit)}logContextChanged(e){let r=L(e);return this.logSearchEvent(Te.contextChanged,r)}logExpandToFullUI(e){let r=L(e);return this.logCustomEvent(Te.expandToFullUI,r)}logOpenUserActions(e){let r=L(e,!1);return this.logCustomEvent(Te.openUserActions,r)}logShowPrecedingSessions(e){let r=L(e,!1);return this.logCustomEvent(Te.showPrecedingSessions,r)}logShowFollowingSessions(e){let r=L(e,!1);return this.logCustomEvent(Te.showFollowingSessions,r)}logViewedDocumentClick(e,r){return this.logCustomEvent(Te.clickViewedDocument,Object.assign(Object.assign({},L(r,!1)),{document:e}))}logPageViewClick(e,r){return this.logCustomEvent(Te.clickPageView,Object.assign(Object.assign({},L(r,!1)),{pageView:e}))}logCreateArticle(e,r){return this.logCustomEvent(Te.createArticle,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logDocumentOpen(e,r,a){return this.logClickEvent(h.documentOpen,e,r,a?L(a,!1):void 0)}logCopyToClipboard(e,r,a){return this.logClickEvent(h.copyToClipboard,e,r,a?L(a,!1):void 0)}logCaseSendEmail(e,r,a){return this.logClickEvent(h.caseSendEmail,e,r,a?L(a,!1):void 0)}logFeedItemTextPost(e,r,a){return this.logClickEvent(h.feedItemTextPost,e,r,a?L(a,!1):void 0)}logDocumentQuickview(e,r,a){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl};return this.logClickEvent(h.documentQuickview,e,r,a?Object.assign(Object.assign({},L(a,!1)),n):n)}logCaseAttach(e,r,a){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl,resultUriHash:e.documentUriHash};return this.logClickEvent(h.caseAttach,e,r,a?Object.assign(Object.assign({},L(a,!1)),n):n)}logCaseDetach(e,r){return this.logCustomEvent(h.caseDetach,r?Object.assign(Object.assign({},L(r,!1)),{resultUriHash:e}):{resultUriHash:e})}logLikeSmartSnippet(e){return this.logCustomEvent(h.likeSmartSnippet,e?L(e,!1):void 0)}logDislikeSmartSnippet(e){return this.logCustomEvent(h.dislikeSmartSnippet,e?L(e,!1):void 0)}logExpandSmartSnippet(e){return this.logCustomEvent(h.expandSmartSnippet,e?L(e,!1):void 0)}logCollapseSmartSnippet(e){return this.logCustomEvent(h.collapseSmartSnippet,e?L(e,!1):void 0)}logOpenSmartSnippetFeedbackModal(e){return this.logCustomEvent(h.openSmartSnippetFeedbackModal,e?L(e,!1):void 0)}logCloseSmartSnippetFeedbackModal(e){return this.logCustomEvent(h.closeSmartSnippetFeedbackModal,e?L(e,!1):void 0)}logSmartSnippetFeedbackReason(e,r,a){return this.logCustomEvent(h.sendSmartSnippetReason,a?Object.assign(Object.assign({},L(a,!1)),{reason:e,details:r}):{reason:e,details:r})}logExpandSmartSnippetSuggestion(e,r){let a="documentId"in e?e:{documentId:e};return this.logCustomEvent(h.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},L(r,!1)),a):a)}logCollapseSmartSnippetSuggestion(e,r){let a="documentId"in e?e:{documentId:e};return this.logCustomEvent(h.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},L(r,!1)),a):a)}logOpenSmartSnippetSource(e,r,a){return this.logClickEvent(h.openSmartSnippetSource,e,r,a?L(a,!1):void 0)}logOpenSmartSnippetSuggestionSource(e,r,a){return this.logClickEvent(h.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},L(a,!1)),r):r)}logOpenSmartSnippetInlineLink(e,r,a){return this.logClickEvent(h.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},a?Object.assign(Object.assign({},L(a,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(e,r,a){return this.logClickEvent(h.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},L(a,!1)),r):r)}logLikeGeneratedAnswer(e,r){return this.logCustomEvent(h.likeGeneratedAnswer,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logDislikeGeneratedAnswer(e,r){return this.logCustomEvent(h.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logOpenGeneratedAnswerSource(e,r){return this.logCustomEvent(h.openGeneratedAnswerSource,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logGeneratedAnswerSourceHover(e,r){return this.logCustomEvent(h.generatedAnswerSourceHover,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logGeneratedAnswerCopyToClipboard(e,r){return this.logCustomEvent(h.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logGeneratedAnswerHideAnswers(e,r){return this.logCustomEvent(h.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logGeneratedAnswerShowAnswers(e,r){return this.logCustomEvent(h.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logGeneratedAnswerFeedbackSubmit(e,r){return this.logCustomEvent(h.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logRephraseGeneratedAnswer(e,r){return this.logSearchEvent(h.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logRetryGeneratedAnswer(e){return this.logSearchEvent(h.retryGeneratedAnswer,e?Object.assign({},L(e,!1)):{})}logGeneratedAnswerStreamEnd(e,r){return this.logCustomEvent(h.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},L(r,!1)),e):e)}logCustomEvent(e,r){return C(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(a)),{eventType:Fu[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logSearchEvent(e,r){return C(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,r))})}logClickEvent(e,r,a,n){return C(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(o)})}logShowMoreFoldedResults(e,r,a){return C(this,void 0,void 0,function*(){return this.logClickEvent(h.showMoreFoldedResults,e,r,a?L(a,!1):void 0)})}logShowLessFoldedResults(e){return C(this,void 0,void 0,function*(){return this.logCustomEvent(h.showLessFoldedResults,e?L(e,!1):void 0)})}getBaseCustomEventRequest(e){return C(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var a,n;return C(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return C(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof je?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};var pr=()=>"default";var Qe=t=>new je(t).getCurrentVisitorId(),Pu=t=>{let e=new je(t);e.clear(),e.deleteHttpOnlyVisitorId()},ze=new Wp.HistoryStore,Pt=(t,e)=>typeof e=="function"?(...r)=>{let a=Pn(r[0]);try{return e.apply(e,r)}catch(n){return t.error(n,"Error in analytics preprocessRequest. Returning original request."),a}}:void 0,It=(t,e)=>(...r)=>{let a=Pn(r[1]);try{return e.apply(e,r)}catch(n){return t.error(n,"Error in analytics hook. Returning original request."),a}};var ii=class{constructor(e){this.state=e()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||pr()}},Sf=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new ii(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ru({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Pt(t,a),beforeSendHooks:[It(t,r),(d,f)=>(t.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};var si=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var ci="2.42.0";var ZA=t=>{let e=t.configuration.search.locale.split("-")[0];return!e||e.length!==2?"en":e},Jt=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return ZA(this.state)}getBaseMetadata(){let{context:e}=this.state,r=(e==null?void 0:e.contextValues)||{},a={};for(let[n,o]of Object.entries(r)){let i=`context_${n}`;a[i]=o}return a.coveoHeadlessVersion=ci,a}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||pr()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var ka=class extends Jt{constructor(){super(...arguments);this.initialState=si()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Cf=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new ka(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ur({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Pt(t,a),beforeSendHooks:[It(t,r),(d,f)=>(t.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};var vf=1,Af=10,ui=5,xf=1,li=8;function di(){return{desiredCount:ui,numberOfValues:li,set:{}}}var Xt=(t,e)=>{let r=a=>a.facetId===e;if("productListing"in t&&t.productListing&&"facets"in t.productListing&&"results"in t.productListing.facets)return t.productListing.facets.results.find(r);if("search"in t&&t.search)return t.search.response.facets.find(r)},Ff=(t,e)=>{var r;return(r=t.facetSet[e])==null?void 0:r.request};function ex(t,e){return!!e&&e.facetId in t.facetSet}var Iu=(t,e)=>{let r=Xt(t,e);if(ex(t,r))return r};var Rf=(t,e)=>{let r=Iu(t,e);return r?r.values.filter(a=>a.state!=="idle"):[]},wt=t=>"productListing"in t?t.productListing.isLoading:t.search.isLoading;function bf(t){if(!t)return{parents:[],values:[]};let e=[],r=t;for(;r.length&&r[0].children.length;)e=[...e,...r],r=r[0].children;let a=r.find(n=>n.state==="selected");return a&&(e=[...e,a],r=[]),{parents:e,values:r}}function Ye(t){let{activeValue:e,ancestryMap:r}=tx(t);return e?rx(e,r):[]}function tx(t){let e=[...t],r=new Map;for(;e.length>0;){let a=e.shift();if(a.state==="selected")return{activeValue:a,ancestryMap:r};if(r)for(let n of a.children)r.set(n,a);e.unshift(...a.children)}return{}}function rx(t,e){let r=[];if(!t)return[];let a=t;do r.unshift(a),a=e.get(a);while(a);return r}function ax(t,e){return!!e&&e.facetId in t.categoryFacetSet}var wu=(t,e)=>{let r=Xt(t,e);if(ax(t,r))return r},Eu=(t,e)=>{var r;return(r=t.categoryFacetSet[e])==null?void 0:r.request},Pf=(t,e)=>{var a;let r=wu(t,e);return Ye((a=r==null?void 0:r.values)!=null?a:[])},qu=(t,e)=>{var a;let r=Eu(t,e);return Ye((a=r==null?void 0:r.currentValues)!=null?a:[])};function Oa(){return{}}function If(t){return{request:t}}function Ta(){return{}}function wf(t){return{request:t}}function Da(){return{}}function Ef(t){return{request:t,hasBreadcrumbs:!0}}function Va(){return{}}var _r=(t,e)=>{let r=Tf(e,t),a=r?r.field:"",n=ku(a,t);return{facetId:t,facetField:a,facetTitle:n}};function jn(t,e){let{facetId:r,facetValue:a}=t,n=_r(r,e),o=Df(e,r);return{...n,facetValue:o==="hierarchical"?Of(e,r):a}}function Ke(t){var e,r,a,n,o;return{facetSet:(e=t.facetSet)!=null?e:Va(),categoryFacetSet:(r=t.categoryFacetSet)!=null?r:Oa(),dateFacetSet:(a=t.dateFacetSet)!=null?a:Ta(),numericFacetSet:(n=t.numericFacetSet)!=null?n:Da(),automaticFacetSet:(o=t.automaticFacetSet)!=null?o:di()}}var pi=t=>{let e=[];return ix(t).forEach((r,a)=>{let n=Df(t,r.facetId),o=dx(r,a+1);if(ox(r)){if(!!!qu(t,r.facetId).length)return;e.push({...o,...ux(t,r.facetId),facetType:n,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let u=qf(i,s+1,n),c=nx(r)?kf(i):cx(i);e.push({...o,...u,...c})})}),sx(t).forEach((r,a)=>{let n=lx(r,a+1);r.values.forEach((o,i)=>{if(o.state==="idle")return;let s=qf(o,i+1,"specific"),u=kf(o);e.push({...n,...s,...u})})}),e},nx=t=>t.type==="specific",ox=t=>t.type==="hierarchical",ix=t=>[...Object.values(t.facetSet),...Object.values(t.categoryFacetSet),...Object.values(t.dateFacetSet),...Object.values(t.numericFacetSet)].map(e=>e.request),sx=t=>[...Object.values(t.automaticFacetSet.set)].map(e=>e.response),qf=(t,e,r)=>({state:t.state,valuePosition:e,facetType:r}),cx=t=>({displayValue:`${t.start}..${t.end}`,value:`${t.start}..${t.end}`,start:t.start,end:t.end,endInclusive:t.endInclusive}),kf=t=>({displayValue:t.value,value:t.value}),Of=(t,e)=>qu(t,e).map(a=>a.value).join(";"),ux=(t,e)=>{let r=1,a=Of(t,e);return{value:a,valuePosition:r,displayValue:a}},lx=(t,e)=>({title:ku(t.field,t.field),field:t.field,id:t.field,facetPosition:e}),dx=(t,e)=>({title:ku(t.field,t.facetId),field:t.field,id:t.facetId,facetPosition:e}),ku=(t,e)=>`${t}_${e}`,Tf=(t,e)=>{var r,a,n,o,i;return((r=t.facetSet[e])==null?void 0:r.request)||((a=t.categoryFacetSet[e])==null?void 0:a.request)||((n=t.dateFacetSet[e])==null?void 0:n.request)||((o=t.numericFacetSet[e])==null?void 0:o.request)||((i=t.automaticFacetSet.set[e])==null?void 0:i.response)},Df=(t,e)=>{let r=Tf(t,e);return r?r.type:"specific"};var Se=()=>({q:"",enableQuerySyntax:!1});var fi=class extends Jt{getSearchUID(){var r,a;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((a=e.search)==null?void 0:a.response.searchUid)||Ee().response.searchUid}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return pi(Ke(this.state))}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||Se().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Ee().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.search)==null?void 0:e.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.results.length)||Ee().response.results.length}},Vf=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new fi(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new bu({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Pt(t,a),beforeSendHooks:[It(t,r),(d,f)=>(t.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};var Na=class extends Jt{constructor(){super(...arguments);this.initialState=si()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Nf=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new Na(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ur({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Pt(t,a),beforeSendHooks:[It(t,r),(d,f)=>(t.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};async function px({config:t,environment:e,event:r,listenerManager:a}){let{url:n,token:o,mode:i}=t;i!=="disabled"&&(a.call(r),e.send(n,o,r))}var fx=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function gx(t){return typeof t=="string"&&fx.test(t)}function mx(t){let e="visitorId";return{getClientId:()=>{let r=t.get(),a=r.storage,n=a.getItem(e),o=n&&gx(n)?n:r.generateUUID();return a.setItem(e,o),o},clear:()=>{t.get().storage.removeItem(e)}}}var Mf="0.6.8";function hx(t){let{trackingId:e}=t;return{trackingId:e}}function yx(){return`relay@${Mf}`}function Lf(t,e,r,a){let{getReferrer:n,getLocation:o,getUserAgent:i}=r,s=hx(e),u=a.getClientId();return Object.freeze({type:t,config:s,ts:Date.now(),source:yx(),clientId:u,userAgent:i(),referrer:n(),location:o()})}function Sx(t,e,r,a,n){return{...e,meta:Lf(t,r,a,n)}}var Cx="*";function vx(){let t=[];function e({type:u,callback:c}){return t.findIndex(l=>l.type===u&&l.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function a(u){return e(u)<0&&t.push(u),()=>s(u.type,u.callback)}function n(u){t.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u)}catch(l){console.error(l)}})}function o(u){if(u===Cx)t.length=0;else for(let c=t.length-1;c>=0;c--)t[c].type===u&&t.splice(c,1)}function i(u){let c=e(u);c>=0&&t.splice(c,1)}function s(u,c){c?i({type:u,callback:c}):o(u)}return{add:a,call:n,remove:s}}function Qf({url:t,token:e,trackingId:r,...a}){return Object.freeze({url:t,token:e,trackingId:r,...!!a.mode&&{mode:a.mode}})}function Ax(t){let e=Qf(t);return{get:()=>e,update:r=>{e=Qf({...e,...r})}}}function xx(){let t=typeof window!="undefined";return{sendMessage(e){t&&window.postMessage(e,"*")}}}var Ou=Fx();function Fx(){let t="coveo_",e=r=>{let a=r.split(".").slice(-2);return a.length==2?a.join("."):""};return{getItem(r){let a=`${t}${r}=`,n=document.cookie.split(";");for(let o of n){let i=o.replace(/^\s+/,"");if(i.lastIndexOf(a,0)===0)return i.substring(a.length,i.length)}return null},setItem(r,a,n){let o=e(window.location.hostname),i=`;expires=${new Date(new Date().getTime()+n).toUTCString()}`,s=o?`;domain=${o}`:"";document.cookie=`${t}${r}=${a}${i}${s};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function Rx(){return{getItem(t){return Ou.getItem(t)||localStorage.getItem(t)},removeItem(t){Ou.removeItem(t),localStorage.removeItem(t)},setItem(t,e){let r=31556952e3;localStorage.setItem(t,e),Ou.setItem(t,e,r)}}}async function Tu(t,e){return fetch(t,e).catch(r=>{throw new Error(`${r.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:r})})}function bx(){let t=document.referrer;return t===""?null:t}function Px(){return{runtime:"browser",fetch:(t,e)=>Tu(t,e),send:async(t,e,r)=>{let a=navigator.sendBeacon(`${t}?access_token=${e}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(xx().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:t,token:e}),!a)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>bx(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:Rx()}}function Bf(){return{getItem(){return null},removeItem(){},setItem(){}}}function Ix(){return{runtime:"node",fetch:(t,e)=>Tu(t,e),send:async(t,e,r)=>{let a={"Content-Type":"application/json",Authorization:`Bearer ${e}`};Tu(t,{method:"POST",body:JSON.stringify([r]),headers:a})},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:Bf()}}function wx(){return Ex()?Px():Ix()}function Ex(){try{return typeof window=="object"}catch{return!1}}function qx(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:Bf()}}function kx(t){return t.get().mode=="disabled"?qx():wx()}function Ox(t){return{get:()=>Object.freeze(kx(t))}}function jf(t){let e=Ax(t),r=vx(),a=Ox(e),n=mx(a);return{emit:(o,i)=>{let s=e.get(),u=a.get(),c=Sx(o,i,s,u,n);return px({config:s,environment:u,event:c,listenerManager:r})},getMeta:o=>Lf(o,e.get(),a.get(),n),on:(o,i)=>r.add({type:o,callback:i}),off:(o,i)=>r.remove(o,i),updateConfig:o=>e.update(o),version:Mf,clearStorage:()=>{n.clear()}}}var gi=(r=>(r.Ascending="ascending",r.Descending="descending",r))(gi||{}),mi=(o=>(o.Relevancy="relevancy",o.QRE="qre",o.Date="date",o.Field="field",o.NoSort="nosort",o))(mi||{}),Et=t=>{if(ha(t))return t.map(e=>Et(e)).join(",");switch(t.by){case"relevancy":case"qre":case"nosort":return t.by;case"date":return`date ${t.order}`;case"field":return`@${t.field} ${t.order}`;default:return""}},hi=()=>({by:"relevancy"}),Uf=t=>({by:"date",order:t});var _f=new R({values:{by:new ut({enum:mi,required:!0}),order:new ut({enum:gi}),field:new A}});function at(){return Et(hi())}var yi=class extends Jt{constructor(){super(...arguments);this.getFacetRequest=e=>{var r,a,n,o,i,s,u,c,l,d;return((a=(r=this.state.facetSet)==null?void 0:r[e])==null?void 0:a.request)||((o=(n=this.state.categoryFacetSet)==null?void 0:n[e])==null?void 0:o.request)||((s=(i=this.state.dateFacetSet)==null?void 0:i[e])==null?void 0:s.request)||((c=(u=this.state.numericFacetSet)==null?void 0:u[e])==null?void 0:c.request)||((d=(l=this.state.automaticFacetSet)==null?void 0:l.set[e])==null?void 0:d.response)}}getFacetState(){return pi(Ke(this.getState()))}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||yi.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,a;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((a=e.search)==null?void 0:a.response.searchUid)||Ee().response.searchUid}getSplitTestRunName(){var e;return(e=this.state.search)==null?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var a;let e=!!this.getSplitTestRunName(),r=((a=this.state.search)==null?void 0:a.response.pipeline)||this.state.pipeline||yi.fallbackPipelineName;return e?r:void 0}getBaseMetadata(){var n,o,i;let e=this.getState(),r=super.getBaseMetadata(),a=(i=(o=(n=e.search)==null?void 0:n.response)==null?void 0:o.extendedResults)==null?void 0:i.generativeQuestionAnsweringId;return a&&(r.generativeQuestionAnsweringId=a),r}getFacetMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,facetValue:r,facetTitle:`${n}_${e}`}}getFacetClearAllMetadata(e){var n;let r=this.getFacetRequest(e),a=(n=r==null?void 0:r.field)!=null?n:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,facetTitle:`${a}_${e}`}}getFacetSortMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,criteria:r,facetTitle:`${n}_${e}`}}getRangeFacetBreadcrumbMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${n}_${e}`}}getResultSortMetadata(){var e;return{...this.getBaseMetadata(),resultsSortBy:(e=this.state.sortCriteria)!=null?e:at()}}getStaticFilterToggleMetadata(e,r){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:r}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryFacetBreadcrumbMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:n,categoryFacetPath:r,categoryFacetTitle:`${n}_${e}`}}getOmniboxAnalyticsMetadata(e,r){let a=this.state.querySuggest&&this.state.querySuggest[e],n=a.completions.map(u=>u.expression),o=a.partialQueries.length-1,i=a.partialQueries[o]||"",s=a.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(r),partialQuery:i,partialQueries:a.partialQueries.length>0?a.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:s}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){var a;let e=this.getState(),r={};return((a=e.generatedAnswer)==null?void 0:a.isVisible)!==void 0&&(r.showGeneratedAnswer=e.generatedAnswer.isVisible),r}get resultURIs(){var e;return(e=this.results)==null?void 0:e.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var e;return(e=this.state.search)==null?void 0:e.response.results}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||Se().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Ee().duration}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.totalCountFiltered)||Ee().response.totalCountFiltered}},nt=yi;nt.fallbackPipelineName="default";var $f=t=>{let e=t.configuration.accessToken,r=t.configuration.analytics.trackingId,{emit:a}=jf({url:t.configuration.analytics.nextApiBaseUrl,token:e,trackingId:r});return a},Hf=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new nt(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ur({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Pt(t,a),beforeSendHooks:[It(t,r),(d,f)=>(t.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l},Du=()=>{let e=ze.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return e?e.value:""};function Si(t){let e=zf(t),r=[t,...e].filter(n=>n.parentResult).map(n=>n.parentResult);return Qd([t,...e,...r],n=>n.uniqueId)}function zf(t){return t.childResults?t.childResults.flatMap(e=>[e,...zf(e)]):[]}var Ma=()=>"";function La(t,e){return{...new nt(e).getBaseMetadata(),actionCause:t,type:t}}function Tx(t){return Object.assign(t,{instantlyCallable:!0})}function Dx(t,e){let r=o=>Tx(B(t,o)),a=r(async(o,{getState:i,extra:s})=>{let{analyticsClientMiddleware:u,preprocessRequest:c,logger:l}=s;return await(await e({getState:i,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})).log({state:i(),extra:s})});return Object.assign(a,{prepare:async({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:u})=>{let{description:c,log:l}=await e({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:u});return{description:c,action:r(async(d,{getState:f,extra:p})=>await l({state:f(),extra:p}))}}}),a}var Un=(t,e,r)=>{function a(...n){let o=n.length===1?{...n[0],__legacy__getBuilder:e(n[0].__legacy__getBuilder),analyticsConfigurator:t,providerClass:r}:{prefix:n[0],__legacy__getBuilder:e(n[1]),__legacy__provider:n[2],analyticsConfigurator:t,providerClass:r};return Mx(o)}return a},Vx=t=>t.configuration.analytics.analyticsMode==="legacy",Nx=t=>t.configuration.analytics.analyticsMode==="next",Mx=({prefix:t,__legacy__getBuilder:e,__legacy__provider:r,analyticsPayloadBuilder:a,analyticsType:n,analyticsConfigurator:o,providerClass:i})=>(r!=null||(r=s=>new i(s)),Dx(t,async({getState:s,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})=>{let d=[],f={log:async({state:F})=>{for(let w of d)await w(F)}},p=s(),g=o({getState:s,logger:l,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(s)}),S=await e(g,s());f.description=S==null?void 0:S.description,d.push(async F=>{Vx(F)&&await Lx(S,r,F,l,g.coveoAnalyticsClient)});let v=$f(p);return d.push(async F=>{if(Nx(F)&&n&&a){let w=a(F);await Hx(v,n,w)}}),f}));async function Lx(t,e,r,a,n){e(()=>r);let o=await(t==null?void 0:t.log({searchUID:e(()=>r).getSearchUID()}));a.info({client:n,response:o},"Analytics response")}var Wf=t=>(e,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async a=>{t(e,r)}}),fe=Un(Hf,t=>t,nt),pO=Un(Sf,Wf,ii),T=Un(Vf,Wf,fi),Gf=Un(Cf,t=>t,ka),Yf=Un(Nf,t=>t,Na);var Fe=(t,e)=>{var o;let r=i=>{var s,u;return i+((u=(s=e.pagination)==null?void 0:s.firstResult)!=null?u:0)},a=-1,n=(o=e.search)==null?void 0:o.results;return a=Jf(t,n),a<0&&(a=$x(t,n)),a<0&&(a=0),Qx(t,r(a),e)};function Qx(t,e,r){let a=t.raw.collection;return{collectionName:typeof a=="string"?a:"default",documentAuthor:Ux(t),documentPosition:e+1,documentTitle:t.title,documentUri:t.uri,documentUriHash:t.raw.urihash,documentUrl:t.clickUri,rankingModifier:t.rankingModifier||"",sourceName:_x(t),queryPipeline:r.pipeline||Ma()}}var ke=t=>(t.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",t),{contentIDKey:"permanentid",contentIDValue:t.raw.permanentid||""}),Kf={urihash:new A,sourcetype:new A,permanentid:new A},Qa={uniqueId:x,raw:new R({values:Kf}),title:x,uri:x,clickUri:x,rankingModifier:new A({required:!1,emptyAllowed:!0})};function Bx(t){return Object.assign({},...Object.keys(Kf).map(e=>({[e]:t[e]})))}function jx(t){return Object.assign({},...Object.keys(Qa).map(e=>({[e]:t[e]})),{raw:Bx(t.raw)})}function Ux(t){let e=t.raw.author;return z(e)?"unknown":Array.isArray(e)?e.join(";"):`${e}`}function _x(t){let e=t.raw.source;return z(e)?"unknown":e}var De=t=>new ee(Qa).validate(jx(t));function $x(t,e){for(let[r,a]of e.entries()){let n=Si(a);if(Jf(t,n)!==-1)return r}return-1}function Jf(t,e=[]){return e.findIndex(({uniqueId:r})=>r===t.uniqueId)}async function Hx(t,e,r){await t(e,r)}var Ci=()=>T("analytics/interface/load",(t,e)=>t.logInterfaceLoad(M(e.insightCaseContext))),fr=()=>T("analytics/interface/change",(t,e)=>{t.logInterfaceChange({...M(e.insightCaseContext),interfaceChangeTo:e.configuration.analytics.originLevel2})}),Xf=t=>T("analytics/insight/createArticle",(e,r)=>(y(t,{articleType:x,triggeredBy:x}),e.logCreateArticle(t,M(r.insightCaseContext))));var vi=m("insightConfiguration/set",t=>y(t,{insightId:x}));var Zf=()=>({insightId:""});var Ai=b(Zf(),t=>{t.addCase(vi,(e,r)=>{e.insightId=r.payload.insightId})});var _n=m("searchHub/set",t=>y(t,new A({required:!0,emptyAllowed:!0})));var gr=B("insight/interface/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:{apiClient:n}})=>{let o=e(),i=await n.getInterface(zx(o));return oe(i)?a(i.error):(r(_n(i.success.searchHub)),{response:i.success})}),zx=t=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.platformUrl,insightId:t.insightConfiguration.insightId});var eg=()=>({loading:!1,config:void 0});var mr=b(eg(),t=>{t.addCase(gr.pending,e=>{e.loading=!0,e.error=void 0}).addCase(gr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(gr.fulfilled,(e,r)=>{e.loading=!1,e.error=void 0;let{searchHub:a,...n}=r.payload.response;e.config=n})});var $n=m("didYouMean/enable"),Vu=m("didYouMean/disable"),Hn=m("didYouMean/automaticCorrections/disable"),Nu=m("didYouMean/automaticCorrections/enable"),Je=m("didYouMean/correction",t=>y(t,x));var tg=()=>T("analytics/didyoumean/click",(t,e)=>t.logDidYouMeanClick(M(e.insightCaseContext))),rg=()=>T("analytics/didyoumean/automatic",(t,e)=>t.logDidYouMeanAutomatic(M(e.insightCaseContext)));var Mu=m("history/undo"),Lu=m("history/redo"),Ve=m("history/snapshot"),Wx=B("history/back",async(t,{dispatch:e})=>{e(Mu()),await e(ne())}),Gx=B("history/forward",async(t,{dispatch:e})=>{e(Lu()),await e(ne())}),ne=B("history/change",async(t,{getState:e})=>e().history.present);var ft=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});function xi(){return{contextValues:{}}}var Ba=()=>!1;function Fi(){return{contextValues:{}}}function ja(){return{enabled:!0}}function Ri(){return{freezeFacetOrder:!1,facets:{}}}function bi(){return[]}function Pi(){return{}}function ag(t){return t?t.expiresAt&&Date.now()>=t.expiresAt:!1}function qt(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Ii(){return{}}function wi(){return{}}function Ei(){return{}}function ng(){return Ue({})}function Ue(t){var e,r,a;return{context:t.context||xi(),dictionaryFieldContext:t.dictionaryFieldContext||Fi(),facetSet:t.facetSet||Va(),numericFacetSet:t.numericFacetSet||Da(),dateFacetSet:t.dateFacetSet||Ta(),categoryFacetSet:t.categoryFacetSet||Oa(),automaticFacetSet:(e=t.automaticFacetSet)!=null?e:di(),pagination:t.pagination||qt(),query:t.query||Se(),tabSet:t.tabSet||Ei(),advancedSearchQueries:t.advancedSearchQueries||ft(),staticFilterSet:t.staticFilterSet||wi(),querySet:t.querySet||Ii(),instantResults:t.instantResults||Pi(),sortCriteria:t.sortCriteria||at(),pipeline:t.pipeline||Ma(),searchHub:t.searchHub||pr(),facetOptions:t.facetOptions||Ri(),facetOrder:(r=t.facetOrder)!=null?r:bi(),debug:(a=t.debug)!=null?a:Ba()}}var Xe=m("query/updateQuery",t=>y(t,{q:new A,enableQuerySyntax:new j}));var zn=Ze(qi()),lg=Ze(og());var ki=Ze(qi()),sg=Ze(ig());ki.default.extend(sg.default);var cg="YYYY/MM/DD@HH:mm:ss",Yx="1401-01-01";function Ua(t,e){let r=(0,ki.default)(t,e);return!r.isValid()&&!e?(0,ki.default)(t,cg):r}function Oi(t){return t.format(cg)}function ug(t,e){let r=Ua(t,e);if(!r.isValid()){let a=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${e}""`;throw new Error(`Could not parse the provided date "${t}"${e?n:a}`)}Hu(r)}function Hu(t){if(t.isBefore(Yx))throw new Error(`Date is before year 1401, which is unsupported by the API: ${t}`)}zn.default.extend(lg.default);var dg=["past","now","next"],pg=["minute","hour","day","week","month","quarter","year"],Kx=t=>{let e=t==="now";return{amount:new k({required:!e,min:1}),unit:new A({required:!e,constrainTo:pg}),period:new A({required:!0,constrainTo:dg})}};function Ti(t){if(typeof t=="string"&&!hr(t))throw new Error(`The value "${t}" is not respecting the relative date format "period-amount-unit"`);let e=typeof t=="string"?zu(t):t;new ee(Kx(e.period)).validate(e);let r=gg(e),a=JSON.stringify(e);if(!r.isValid())throw new Error(`Date is invalid: ${a}`);Hu(r)}function fg(t){let{period:e,amount:r,unit:a}=t;switch(e){case"past":case"next":return`${e}-${r}-${a}`;case"now":return e}}function gg(t){let{period:e,amount:r,unit:a}=t;switch(e){case"past":return(0,zn.default)().subtract(r,a);case"next":return(0,zn.default)().add(r,a);case"now":return(0,zn.default)()}}function Wn(t){return Oi(gg(zu(t)))}function mg(t){return t.toLocaleLowerCase().split("-")}function hr(t){let[e,r,a]=mg(t);if(e==="now")return!0;if(!dg.includes(e)||!pg.includes(a))return!1;let n=parseInt(r);return!(isNaN(n)||n<=0)}function hg(t){return!!t&&typeof t=="object"&&"period"in t}function zu(t){let[e,r,a]=mg(t);return e==="now"?{period:"now"}:{period:e,amount:r?parseInt(r):void 0,unit:a||void 0}}function yg(t){return Ti(t),zu(t)}function Sg(t){return t.type==="dateRange"}function Cg(t){return`start${t}`}function vg(t){return`end${t}`}var Jx=()=>({dateFacetValueMap:{}});function Xx(t,e,r){let a=t.start,n=t.end;return hr(a)&&(a=Wn(a),r.dateFacetValueMap[e][Cg(a)]=t.start),hr(n)&&(n=Wn(n),r.dateFacetValueMap[e][vg(n)]=t.end),{...t,start:a,end:n}}function Zx(t,e){if(Sg(t)){let{facetId:r,currentValues:a}=t;return e.dateFacetValueMap[r]={},{...t,currentValues:a.map(n=>Xx(n,r,e))}}return t}function yr(t){var a;let e=Jx();return{request:{...t,facets:(a=t.facets)==null?void 0:a.map(n=>Zx(n,e))},mappings:e}}function eF(t,e,r){return{...t,start:r.dateFacetValueMap[e][Cg(t.start)]||t.start,end:r.dateFacetValueMap[e][vg(t.end)]||t.end}}function tF(t,e){return t.facetId in e.dateFacetValueMap}function rF(t,e){return tF(t,e)?{...t,values:t.values.map(r=>eF(r,t.facetId,e))}:t}function $r(t,e){var r;return"success"in t?{success:{...t.success,facets:(r=t.success.facets)==null?void 0:r.map(n=>rF(n,e))}}:t}var Sr=async(t,e)=>({analytics:{clientId:await Qe(t),clientTimestamp:new Date().toISOString(),documentReferrer:t.originLevel3,originContext:t.originContext,...e&&{actionCause:e.actionCause,customData:e.customData},...t.userDisplayName&&{userDisplayName:t.userDisplayName},...t.documentLocation&&{documentLocation:t.documentLocation},...t.deviceId&&{deviceId:t.deviceId},...Du()&&{pageId:Du()},...t.analyticsMode&&t.trackingId&&{trackingId:t.trackingId},capture:t.analyticsMode==="next"}});var Ag=async(t,e)=>{var r,a;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,count:e.querySuggest[t].count,insightId:e.insightConfiguration.insightId,q:(r=e.querySet)==null?void 0:r[t],timezone:e.configuration.search.timezone,actionsHistory:e.configuration.analytics.enabled?ze.getHistory():[],...((a=e.insightCaseContext)==null?void 0:a.caseContext)&&{context:e.insightCaseContext.caseContext},...e.configuration.analytics.enabled&&{visitorId:await Qe(e.configuration.analytics),...e.configuration.analytics.enabled&&await Sr(e.configuration.analytics)}}};var xg=()=>T("search/logFetchMoreResults",(t,e)=>t.logFetchMoreResults(M(e.insightCaseContext))),_a=t=>T("search/queryError",(e,r)=>{var a;return e.logQueryError({...M(r.insightCaseContext),query:((a=r.query)==null?void 0:a.q)||Se().q,aq:"",cq:"",dq:"",errorType:t.type,errorMessage:t.message})}),Fg=(t,e)=>T("analytics/contextChanged",(r,a)=>{var o;let n={caseId:t,caseNumber:e,caseContext:((o=a.insightCaseContext)==null?void 0:o.caseContext)||{}};r.logContextChanged(n)}),Rg=(t,e,r,a)=>T("analytics/expandToFullUI",(n,o)=>{var s;let i={caseId:t,caseNumber:e,fullSearchComponentName:r,triggeredBy:a,caseContext:((s=o.insightCaseContext)==null?void 0:s.caseContext)||{}};n.logExpandToFullUI(i)});function gt(t){return Object.values(t).map(e=>e.request)}var Hr=1,Cr=5e3;var bg=t=>{var a,n;let e=nF(t),r=aF(t);return yr({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.platformUrl,insightId:t.insightConfiguration.insightId,q:(a=t.query)==null?void 0:a.q,...r.length&&{facets:r},caseContext:(n=t.insightCaseContext)==null?void 0:n.caseContext,...e&&{cq:e},...t.fields&&!t.fields.fetchAllFields&&{fieldsToInclude:t.fields.fieldsToInclude},...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},...t.sortCriteria&&{sortCriteria:t.sortCriteria},tab:t.configuration.analytics.originLevel2,...t.folding&&{filterField:t.folding.fields.collection,childField:t.folding.fields.parent,parentField:t.folding.fields.child,filterFieldRange:t.folding.filterFieldRange}})},$a=t=>{let e=()=>t.pagination?t.pagination.firstResult+t.pagination.numberOfResults>Cr?Cr-t.pagination.firstResult:t.pagination.numberOfResults:void 0,r=bg(t);return{...r,request:{...r.request,...t.pagination&&{firstResult:t.pagination.firstResult,numberOfResults:e()}}}},Pg=(t,e)=>{var a;let r=bg(t);return{...r,request:{...r.request,filterFieldRange:100,cq:`@${(a=t==null?void 0:t.folding)==null?void 0:a.fields.collection}="${e}"`}}},Ig=async t=>{var r,a,n,o;let e=await $a(t);return e.request={...e.request,firstResult:((a=(r=t.pagination)==null?void 0:r.firstResult)!=null?a:0)+((o=(n=t.pagination)==null?void 0:n.numberOfResults)!=null?o:0)},e},wg=async t=>{let e=await $a(t);return e.request={...e.request,numberOfResults:0},e};function aF(t){return gt({...t.facetSet,...t.numericFacetSet,...t.dateFacetSet,...t.categoryFacetSet})}function nF(t){let e=Object.values(t.tabSet||{}).find(a=>a.isActive);return(e==null?void 0:e.expression.trim())||""}var zr=async(t,e,{request:r,mappings:a},n)=>{var c;let o=new Date().getTime(),i=$r(await t.query(r,n),a),s=new Date().getTime()-o,u=((c=e.query)==null?void 0:c.q)||"";return{response:i,duration:s,queryExecuted:u,requestExecuted:r}},G=B("search/executeSearch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:n})=>{let o=e();Eg(o);let i=$a(o),s=await zr(n.apiClient,o,i);if(oe(s.response))return r(_a(s.response.error)),a(s.response.error);if(!iF(o,s.response.success))return r(Ve(Ue(o))),{...s,response:s.response.success,automaticallyCorrected:!1,originalQuery:Gn(o),analyticsAction:t};let{correctedQuery:u}=s.response.success.queryCorrections[0],c=await oF(n.apiClient,u,e,r);if(oe(c.response))return r(_a(c.response.error)),a(c.response.error);let l=$r(s.response,i.mappings).success;return t()(r,()=>sF(s.queryExecuted,s.duration,o,l),n),r(Ve(Ue(e()))),{...c,response:{...c.response.success,queryCorrections:s.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:Gn(o),analyticsAction:rg()}}),Ha=B("search/fetchPage",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:n})=>{let o=e();Eg(o);let i=await zr(n.apiClient,o,$a(o));return oe(i.response)?(r(_a(i.response.error)),a(i.response.error)):(r(Ve(Ue(o))),{...i,response:i.response.success,automaticallyCorrected:!1,originalQuery:Gn(o),analyticsAction:t})}),za=B("search/fetchMoreResults",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:{apiClient:n}})=>{let o=e(),i=await zr(n,o,await Ig(o));return oe(i.response)?(r(_a(i.response.error)),a(i.response.error)):(r(Ve(Ue(o))),{...i,response:i.response.success,automaticallyCorrected:!1,originalQuery:Gn(o),analyticsAction:xg()})}),vr=B("search/fetchFacetValues",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:{apiClient:n}})=>{let o=e(),i=await zr(n,o,await wg(o));return oe(i.response)?(r(_a(i.response.error)),a(i.response.error)):(r(Ve(Ue(o))),{...i,response:i.response.success,automaticallyCorrected:!1,originalQuery:Gn(o),analyticsAction:t})}),Di=B("querySuggest/fetch",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(t,{id:x});let o=t.id,i=await Ag(o,e()),s=await a.querySuggest(i);return oe(s)?r(s.error):{id:o,q:i.q,...s.success}}),oF=async(t,e,r,a)=>{a(Xe({q:e}));let n=await zr(t,r(),await $a(r()));return a(Je(e)),n},iF=(t,e)=>{var r;return((r=t.didYouMean)==null?void 0:r.enableDidYouMean)===!0&&e.results.length===0&&e.queryCorrections.length!==0},Gn=t=>{var e;return((e=t.query)==null?void 0:e.q)!==void 0?t.query.q:""},sF=(t,e,r,a)=>{var n,o;return{...r,query:{q:t,enableQuerySyntax:(o=(n=r.query)==null?void 0:n.enableQuerySyntax)!=null?o:Se().enableQuerySyntax},search:{...Ee(),duration:e,response:a,results:a.results}}},Eg=t=>{var e;t.configuration.analytics.enabled&&ze.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})};var mt=(P=>(P.interfaceLoad="interfaceLoad",P.interfaceChange="interfaceChange",P.didyoumeanAutomatic="didyoumeanAutomatic",P.didyoumeanClick="didyoumeanClick",P.resultsSort="resultsSort",P.searchboxSubmit="searchboxSubmit",P.searchboxClear="searchboxClear",P.searchboxAsYouType="searchboxAsYouType",P.breadcrumbFacet="breadcrumbFacet",P.breadcrumbResetAll="breadcrumbResetAll",P.documentQuickview="documentQuickview",P.documentOpen="documentOpen",P.omniboxAnalytics="omniboxAnalytics",P.omniboxFromLink="omniboxFromLink",P.searchFromLink="searchFromLink",P.triggerNotify="notify",P.triggerExecute="execute",P.triggerQuery="query",P.undoTriggerQuery="undoQuery",P.triggerRedirect="redirect",P.pagerResize="pagerResize",P.pagerNumber="pagerNumber",P.pagerNext="pagerNext",P.pagerPrevious="pagerPrevious",P.pagerScrolling="pagerScrolling",P.staticFilterClearAll="staticFilterClearAll",P.staticFilterSelect="staticFilterSelect",P.staticFilterDeselect="staticFilterDeselect",P.facetClearAll="facetClearAll",P.facetSearch="facetSearch",P.facetSelect="facetSelect",P.facetSelectAll="facetSelectAll",P.facetDeselect="facetDeselect",P.facetExclude="facetExclude",P.facetUnexclude="facetUnexclude",P.facetUpdateSort="facetUpdateSort",P.facetShowMore="showMoreFacetResults",P.facetShowLess="showLessFacetResults",P.queryError="query",P.queryErrorBack="errorBack",P.queryErrorClear="errorClearQuery",P.queryErrorRetry="errorRetry",P.recommendation="recommendation",P.recommendationInterfaceLoad="recommendationInterfaceLoad",P.recommendationOpen="recommendationOpen",P.likeSmartSnippet="likeSmartSnippet",P.dislikeSmartSnippet="dislikeSmartSnippet",P.expandSmartSnippet="expandSmartSnippet",P.collapseSmartSnippet="collapseSmartSnippet",P.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",P.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",P.sendSmartSnippetReason="sendSmartSnippetReason",P.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",P.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",P.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",P.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",P.openSmartSnippetSource="openSmartSnippetSource",P.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",P.openSmartSnippetInlineLink="openSmartSnippetInlineLink",P.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",P.recentQueryClick="recentQueriesClick",P.clearRecentQueries="clearRecentQueries",P.recentResultClick="recentResultClick",P.clearRecentResults="clearRecentResults",P.noResultsBack="noResultsBack",P.showMoreFoldedResults="showMoreFoldedResults",P.showLessFoldedResults="showLessFoldedResults",P.copyToClipboard="copyToClipboard",P.caseSendEmail="Case.SendEmail",P.feedItemTextPost="FeedItem.TextPost",P.caseAttach="caseAttach",P.caseDetach="caseDetach",P.retryGeneratedAnswer="retryGeneratedAnswer",P.likeGeneratedAnswer="likeGeneratedAnswer",P.dislikeGeneratedAnswer="dislikeGeneratedAnswer",P.openGeneratedAnswerSource="openGeneratedAnswerSource",P.generatedAnswerStreamEnd="generatedAnswerStreamEnd",P.historyForward="historyForward",P.historyBackward="historyBackward",P))(mt||{});var Pe=m("breadcrumb/deselectAll"),Wr=m("breadcrumb/deselectAllNonBreadcrumbs");var kt=m("facet/updateFacetAutoSelection",t=>y(t,{allow:new j({required:!0})}));var Wu={id:x},cF={...Wu,q:ie},Gu=m("instantResults/register",t=>y(t,Wu)),Gr=m("instantResults/updateQuery",t=>y(t,cF)),Yu=m("instantResults/clearExpired",t=>y(t,Wu));var Vi=new k({required:!0,min:0}),Yn=m("pagination/registerNumberOfResults",t=>y(t,Vi)),Kn=m("pagination/updateNumberOfResults",t=>y(t,Vi)),Jn=m("pagination/registerPage",t=>y(t,Vi)),ht=m("pagination/updatePage",t=>y(t,Vi)),Xn=m("pagination/nextPage"),Zn=m("pagination/previousPage");var Ar=async(t,e)=>{var r,a,n,o;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,debug:t.debug,tab:t.configuration.analytics.originLevel2,referrer:t.configuration.analytics.originLevel3,timezone:t.configuration.search.timezone,...t.configuration.analytics.enabled&&{visitorId:await Qe(t.configuration.analytics),actionsHistory:ze.getHistory()},...((r=t.advancedSearchQueries)==null?void 0:r.aq)&&{aq:t.advancedSearchQueries.aq},...((a=t.advancedSearchQueries)==null?void 0:a.cq)&&{cq:t.advancedSearchQueries.cq},...((n=t.advancedSearchQueries)==null?void 0:n.lq)&&{lq:t.advancedSearchQueries.lq},...((o=t.advancedSearchQueries)==null?void 0:o.dq)&&{dq:t.advancedSearchQueries.dq},...t.context&&{context:t.context.contextValues},...t.fields&&!t.fields.fetchAllFields&&{fieldsToInclude:t.fields.fieldsToInclude},...t.dictionaryFieldContext&&{dictionaryFieldContext:t.dictionaryFieldContext.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.query&&{q:t.query.q,enableQuerySyntax:t.query.enableQuerySyntax},...t.searchHub&&{searchHub:t.searchHub},...t.sortCriteria&&{sortCriteria:t.sortCriteria},...t.configuration.analytics.enabled&&await Sr(t.configuration.analytics,e),...t.excerptLength&&!z(t.excerptLength.length)&&{excerptLength:t.excerptLength.length},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}};var Ku=class extends nt{constructor(e){super(e);this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let r in e)for(let a in e[r].cache)if(e[r].cache[a].isActive)return e[r].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let r in e)for(let a in e[r].cache)if(e[r].cache[a].isActive)return e[r].cache[a];return null}get results(){var e;return(e=this.activeInstantResultCache)==null?void 0:e.results}get queryText(){var e;return(e=this.activeInstantResultQuery)!=null?e:Se().q}get responseTime(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.duration)!=null?r:Ee().duration}get numberOfResults(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.totalCountFiltered)!=null?r:Ee().response.totalCountFiltered}getSearchUID(){var r;return((r=this.activeInstantResultCache)==null?void 0:r.searchUid)||super.getSearchUID()}};var qg=()=>fe("analytics/instantResult/searchboxAsYouType",t=>t.makeSearchboxAsYouType(),t=>new Ku(t));var Ju=()=>fe("search/logFetchMoreResults",t=>t.makeFetchMoreResults()),ot=t=>fe("search/queryError",(e,r)=>{var a,n,o,i;return e.makeQueryError({query:((a=r.query)==null?void 0:a.q)||Se().q,aq:((n=r.advancedSearchQueries)==null?void 0:n.aq)||ft().aq,cq:((o=r.advancedSearchQueries)==null?void 0:o.cq)||ft().cq,dq:((i=r.advancedSearchQueries)==null?void 0:i.dq)||ft().dq,errorType:t.type,errorMessage:t.message})});function Wa(t,e){let r={};t.forEach(o=>r[o.facetId]=o);let a=[];e.forEach(o=>{o in r&&(a.push(r[o]),delete r[o])});let n=Object.values(r);return[...a,...n]}var Re=async(t,e)=>{var s,u;let r=mF(t),a=uF(t),n=lF(t),o=await Ar(t,e),i=()=>t.pagination?t.pagination.firstResult+t.pagination.numberOfResults>Cr?Cr-t.pagination.firstResult:t.pagination.numberOfResults:void 0;return yr({...o,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},...r&&{cq:r},...a.length&&{facets:a},...t.pagination&&{numberOfResults:i(),firstResult:t.pagination.firstResult},...t.facetOptions&&{facetOptions:{freezeFacetOrder:t.facetOptions.freezeFacetOrder}},...((s=t.folding)==null?void 0:s.enabled)&&{filterField:t.folding.fields.collection,childField:t.folding.fields.parent,parentField:t.folding.fields.child,filterFieldRange:t.folding.filterFieldRange},...t.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:t.automaticFacetSet.desiredCount,numberOfValues:t.automaticFacetSet.numberOfValues,currentFacets:n}},...((u=t.generatedAnswer)==null?void 0:u.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:t.generatedAnswer.responseFormat}}}})};function uF(t){var e;return Wa(pF(t),(e=t.facetOrder)!=null?e:[])}function lF(t){var r;let e=(r=t.automaticFacetSet)==null?void 0:r.set;return e?Object.values(e).map(a=>a.response).map(dF).filter(a=>a.currentValues.length>0):void 0}function dF(t){let{field:e,label:r,values:a}=t,n=a.filter(o=>o.state==="selected");return{field:e,label:r,currentValues:n}}function pF(t){return fF(t).filter(({facetId:e})=>{var r,a,n;return(n=(a=(r=t.facetOptions)==null?void 0:r.facets[e])==null?void 0:a.enabled)!=null?n:!0})}function fF(t){var e,r,a,n;return[...gF((e=t.facetSet)!=null?e:{}),...kg((r=t.numericFacetSet)!=null?r:{}),...kg((a=t.dateFacetSet)!=null?a:{}),...gt((n=t.categoryFacetSet)!=null?n:{})]}function gF(t){return gt(t).map(e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e)}function kg(t){return gt(t).map(e=>{let a=e.currentValues.some(({state:n})=>n!=="idle");return e.generateAutomaticRanges&&!a?{...e,currentValues:[]}:e})}function mF(t){var o;let e=((o=t.advancedSearchQueries)==null?void 0:o.cq.trim())||"",r=Object.values(t.tabSet||{}).find(i=>i.isActive),a=(r==null?void 0:r.expression.trim())||"",n=hF(t);return[e,a,...n].filter(i=>!!i).join(" AND ")}function hF(t){return Object.values(t.staticFilterSet||{}).map(r=>{let a=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),n=a.map(o=>o.expression).join(" OR ");return a.length>1?`(${n})`:n})}var Og=()=>fe("analytics/didyoumean/automatic",t=>t.makeDidYouMeanAutomatic());var AV=new R({values:{undoneQuery:ie},options:{required:!0}}),Tg=()=>fe("analytics/trigger/query",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.queryModification.newQuery)?t.makeTriggerQuery():null});var Ni=m("trigger/query/ignore",t=>y(t,new A({emptyAllowed:!0,required:!0}))),Mi=m("trigger/query/modification",t=>y(t,new R({values:{originalQuery:pe,modification:pe}})));var Yr=class{constructor(e,r=a=>{this.dispatch(Xe({q:a}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},a){var u;let n=new Date().getTime(),o=$r(await this.extra.apiClient.search(r,a),e),i=new Date().getTime()-n,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(e){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?a:await this.processQueryTriggersOrContinue(e))!=null?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return oe(e.response)?(this.dispatch(ot(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),a=this.getSuccessResponse(e);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return oe(d.response)?(this.dispatch(ot(d.response.error)),this.rejectWithValue(d.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(e.queryExecuted,e.duration,r,a),this.extra),this.dispatch(Ve(Ue(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:Og()})}async processQueryTriggersOrContinue(e){var s,u;let r=this.getSuccessResponse(e);if(!r)return null;let a=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===a)return this.dispatch(Ni("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return oe(i.response)?(this.dispatch(ot(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Ve(Ue(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:Tg()})}processSuccessResponse(e){return this.dispatch(Ve(Ue(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Ho(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await Re(this.getState()),{origin:"mainSearch"});return this.dispatch(Je(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Mi({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await Re(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(e,r,a,n){var o,i;return{...a,query:{q:e,enableQuerySyntax:(i=(o=a.query)==null?void 0:o.enableQuerySyntax)!=null?i:Se().enableQuerySyntax},search:{...Ee(),duration:r,response:n,results:n.results}}}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var d0=B("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;y(t,{q:new A,enableQuerySyntax:new j,clearFilters:new j}),t.clearFilters&&(r(Pe()),r(Wr())),r(kt({allow:!0})),r(Xe({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(ht(1))}),eo=B("search/executeSearch",async(t,e)=>{let r=e.getState();return await Li(r,e,t)}),to=B("search/fetchPage",async(t,e)=>{let r=e.getState();return await el(r,e,t)}),ro=B("search/fetchMoreResults",async(t,e)=>{let r=e.getState();return await tl(e,r)}),Xu=B("search/fetchFacetValues",async(t,e)=>{let r=e.getState();return await AF(e,t,r)}),yF=B("search/fetchInstantResults",async(t,e)=>Zu(t,e)),SF=async(t,e)=>{var a,n,o,i;let r=await Re(t,e);return r.request={...r.request,firstResult:((n=(a=t.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=t.search)==null?void 0:o.results.length)!=null?i:0)},r},CF=async(t,e,r)=>{let a=await Ar(t);return yr({...a,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},vF=async(t,e)=>{let r=await Re(t,e);return r.request.numberOfResults=0,r},Dg=t=>{var e;t.configuration.analytics.enabled&&ze.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})};async function Zu(t,e){y(t,{id:x,q:x,maxResultsPerQuery:new k({required:!0,min:1}),cacheTimeout:new k});let{q:r,maxResultsPerQuery:a}=t,n=e.getState(),o=new Yr({...e,analyticsAction:qg()},c=>{e.dispatch(Gr({q:c,id:t.id}))}),i=await CF(n,r,a),s=await o.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),u=await o.process(s);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function el(t,e,r){Dg(t);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=e.extra,{description:i}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Yr({...e,analyticsAction:r}),u=await Re(t,i),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}async function tl(t,e){let{analyticsClientMiddleware:r,preprocessRequest:a,logger:n}=t.extra,{description:o}=await Ju().prepare({getState:()=>t.getState(),analyticsClientMiddleware:r,preprocessRequest:a,logger:n}),i=new Yr({...t,analyticsAction:Ju()}),s=await SF(e,o),u=await i.fetchFromAPI(s,{origin:"mainSearch"});return await i.process(u)}async function AF(t,e,r){let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Yr({...t,analyticsAction:e}),u=await vF(r,i),c=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(c)}async function Li(t,e,r){Dg(t);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=e.extra,{description:i}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=await Re(t,i),u=new Yr({...e,analyticsAction:r}),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}var Kr=class{constructor(e,r=a=>{this.dispatch(Xe({q:a}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},a){var u;let n=new Date().getTime(),o=$r(await this.extra.apiClient.search(r,a),e),i=new Date().getTime()-n,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(e){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?a:await this.processQueryTriggersOrContinue(e))!=null?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return oe(e.response)?(this.dispatch(ot(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),a=this.getSuccessResponse(e);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return oe(d.response)?(this.dispatch(ot(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(Ve(Ue(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:La(mt.didyoumeanAutomatic,this.getState)})}async processQueryTriggersOrContinue(e){var s,u;let r=this.getSuccessResponse(e);if(!r)return null;let a=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===a)return this.dispatch(Ni("")),null;let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return oe(i.response)?(this.dispatch(ot(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Ve(Ue(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:La(mt.triggerQuery,this.getState)})}processSuccessResponse(e){return this.dispatch(Ve(Ue(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Ho(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await Re(this.getState()),{origin:"mainSearch"});return this.dispatch(Je(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Mi({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await Re(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var Vg=B("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;y(t,{q:new A,enableQuerySyntax:new j,clearFilters:new j}),t.clearFilters&&(r(Pe()),r(Wr())),r(kt({allow:!0})),r(Xe({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(ht(1))}),se=B("search/executeSearch",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return Li(r,e,t.legacy);Ng(r);let a=Mg(t.next,r),n=await Re(r,a),o=new Kr({...e,analyticsAction:a}),i=await o.fetchFromAPI(n,{origin:"mainSearch"});return await o.process(i)}),Qi=B("search/fetchPage",async(t,e)=>{let r=e.getState();if(Ng(r),r.configuration.analytics.analyticsMode==="legacy"||!t.next)return el(r,e,t.legacy);let a=new Kr({...e,analyticsAction:t.next}),n=await Re(r,t.next),o=await a.fetchFromAPI(n,{origin:"mainSearch"});return await a.process(o)}),Bi=B("search/fetchMoreResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return tl(e,r);let a=La(mt.pagerScrolling,e.getState),n=new Kr({...e,analyticsAction:a}),o=await xF(r,a),i=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(i)}),ji=B("search/fetchFacetValues",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return Li(r,e,t.legacy);let a=Mg(t.next,r),n=new Kr({...e,analyticsAction:a}),o=await RF(r,a),i=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(i)}),Ui=B("search/fetchInstantResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Zu(t,e);y(t,{id:x,q:x,maxResultsPerQuery:new k({required:!0,min:1}),cacheTimeout:new k});let{q:a,maxResultsPerQuery:n}=t,o=La(mt.searchboxAsYouType,e.getState),i=new Kr({...e,analyticsAction:o},l=>{e.dispatch(Gr({q:l,id:t.id}))}),s=await FF(r,a,n),u=await i.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),c=await i.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,analyticsAction:c.analyticsAction,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}),xF=async(t,e)=>{var a,n,o,i;let r=await Re(t,e);return r.request={...r.request,firstResult:((n=(a=t.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=t.search)==null?void 0:o.results.length)!=null?i:0)},r},FF=async(t,e,r)=>{let a=await Ar(t);return yr({...a,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},RF=async(t,e)=>{let r=await Re(t,e);return r.request.numberOfResults=0,r},Ng=t=>{var e;t.configuration.analytics.enabled&&ze.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})},Mg=(t,e)=>({customData:t.getEventExtraPayload(e),actionCause:t.actionCause,type:t.actionCause});async function Lg(t,e){var s;let{search:r,accessToken:a,organizationId:n,analytics:o}=t.configuration,i=((s=t.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:a,organizationId:n,enableNavigation:!1,...o.enabled&&{visitorId:await Qe(t.configuration.analytics)},q:i,...e,requestedOutputSize:e.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var Ga=B("resultPreview/fetchResultContent",async(t,{extra:e,getState:r,rejectWithValue:a})=>{let n=r(),o=await Lg(n,t),i=await e.apiClient.html(o);return oe(i)?a(i.error):{content:i.success,uniqueId:t.uniqueId}}),ao=m("resultPreview/next"),no=m("resultPreview/previous"),rl=m("resultPreview/prepare",t=>y(t,{results:new U({required:!0})})),Qg=2048,oo=B("resultPreview/updateContentURL",async(t,{getState:e,extra:r})=>{let a=e(),n=ip(await t.buildResultPreviewRequest(a,{uniqueId:t.uniqueId,requestedOutputSize:t.requestedOutputSize}),t.path);return(n==null?void 0:n.length)>Qg&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${Qg} characters.`),{contentURL:n}});function al(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var nl=t=>{let{content:e,isLoading:r,uniqueId:a,contentURL:n}=al();t.content=e,t.isLoading=r,t.uniqueId=a,t.contentURL=n},ol=t=>t.filter(e=>e.hasHtmlVersion).map(e=>e.uniqueId),Jr=b(al(),t=>{t.addCase(Ga.pending,e=>{e.isLoading=!0}).addCase(Ga.fulfilled,(e,r)=>{let{content:a,uniqueId:n}=r.payload;e.position=e.resultsWithPreview.indexOf(n),e.content=a,e.uniqueId=n,e.isLoading=!1}).addCase(se.fulfilled,(e,r)=>{nl(e),e.resultsWithPreview=ol(r.payload.response.results)}).addCase(Bi.fulfilled,(e,r)=>{nl(e),e.resultsWithPreview=e.resultsWithPreview.concat(ol(r.payload.response.results))}).addCase(Qi.fulfilled,nl).addCase(rl,(e,r)=>{e.resultsWithPreview=ol(r.payload.results)}).addCase(ao,e=>{if(e.isLoading)return;let r=e.position+1;r>e.resultsWithPreview.length-1&&(r=0),e.position=r}).addCase(no,e=>{if(e.isLoading)return;let r=e.position-1;r<0&&(r=e.resultsWithPreview.length-1),e.position=r}).addCase(oo.fulfilled,(e,r)=>{e.contentURL=r.payload.contentURL})});var il=()=>pe,Bg=()=>x,Xr=m("configuration/updateBasicConfiguration",t=>y(t,{accessToken:pe,organizationId:pe,platformUrl:pe})),Zr=m("configuration/updateSearchConfiguration",t=>y(t,{apiBaseUrl:pe,pipeline:new A({required:!1,emptyAllowed:!0}),searchHub:pe,timezone:pe,locale:pe,authenticationProviders:new U({required:!1,each:x})})),io=m("configuration/updateAnalyticsConfiguration",t=>(jo()&&(t.enabled=!1),y(t,{enabled:new j({default:!0}),originContext:il(),originLevel2:il(),originLevel3:il(),apiBaseUrl:pe,nextApiBaseUrl:pe,runtimeEnvironment:new de,anonymous:new j({default:!1}),deviceId:pe,userDisplayName:pe,documentLocation:pe,trackingId:pe,analyticsMode:new A({constrainTo:["legacy","next"],required:!1,default:"legacy"})}))),so=m("configuration/analytics/disable"),co=m("configuration/analytics/enable"),sl=m("configuration/analytics/originlevel2",t=>y(t,{originLevel2:Bg()})),cl=m("configuration/analytics/originlevel3",t=>y(t,{originLevel3:Bg()}));var Ya=b(pr(),t=>{t.addCase(_n,(e,r)=>r.payload).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.searchHub)!=null?n:e}).addCase(Zr,(e,r)=>r.payload.searchHub||e)});var Zt=(t,e)=>{let r=t;return z(r[e])?z(t.raw[e])?null:t.raw[e]:r[e]},jg=t=>e=>t.every(r=>!z(Zt(e,r))),Ug=t=>e=>t.every(r=>z(Zt(e,r))),_g=(t,e)=>r=>{let a=Hg(t,r);return e.some(n=>a.some(o=>`${o}`.toLowerCase()===n.toLowerCase()))},$g=(t,e)=>r=>{let a=Hg(t,r);return e.every(n=>a.every(o=>`${o}`.toLowerCase()!==n.toLowerCase()))},Hg=(t,e)=>{let r=Zt(e,t);return Lo(r)?r:[r]};function _i(t){return t.search.response.searchUid!==""}function zg(t,e,r){return t.search.results.find(a=>Zt(a,e)===r)}function ul(t,e){var a;let r=(a=e.payload)!=null?a:null;r&&(t.response=Ee().response,t.results=[],t.questionAnswer=va()),t.error=r,t.isLoading=!1}function ll(t,e){t.error=null,t.response=e.payload.response,t.queryExecuted=e.payload.queryExecuted,t.duration=e.payload.duration,t.isLoading=!1}function bF(t,e){ll(t,e),t.results=e.payload.response.results,t.searchResponseId=e.payload.response.searchUid,t.questionAnswer=e.payload.response.questionAnswer,t.extendedResults=e.payload.response.extendedResults}function dl(t,e){t.isLoading=!0,t.requestId=e.meta.requestId}var X=b(Ee(),t=>{t.addCase(eo.rejected,(e,r)=>ul(e,r)),t.addCase(ro.rejected,(e,r)=>ul(e,r)),t.addCase(to.rejected,(e,r)=>ul(e,r)),t.addCase(eo.fulfilled,(e,r)=>{bF(e,r)}),t.addCase(ro.fulfilled,(e,r)=>{ll(e,r),e.results=[...e.results,...r.payload.response.results]}),t.addCase(to.fulfilled,(e,r)=>{ll(e,r),e.results=r.payload.response.results}),t.addCase(Xu.fulfilled,(e,r)=>{e.response.facets=r.payload.response.facets,e.response.searchUid=r.payload.response.searchUid}),t.addCase(eo.pending,dl),t.addCase(ro.pending,dl),t.addCase(to.pending,dl)});var Wg=b(ci,t=>t);var Gg=t=>e=>r=>{var o,i;let a=(o=r.payload)==null?void 0:o.analyticsAction;a!==void 0&&((i=r.payload)==null||delete i.analyticsAction);let n=e(r);return r.type==="search/executeSearch/fullfilled"&&a===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with product recommendation:",r),a!==void 0&&t.dispatch(a),n};var tm=Ze(Kg());var $i={q:new A,enableQuerySyntax:new j,aq:new A,cq:new A,firstResult:new k({min:0}),numberOfResults:new k({min:0}),sortCriteria:new A,f:new R,fExcluded:new R,cf:new R,nf:new R,df:new R,debug:new j,sf:new R,tab:new A,af:new R};var le=m("searchParameters/restore",t=>y(t,$i));var uo=m("tab/register",t=>{let e=new R({values:{id:x,expression:ie}});return y(t,e)}),Ot=m("tab/updateActiveTab",t=>y(t,x));var Hi=Ze(qi()),Zg=Ze(Jg()),em=Ze(Xg());Hi.default.extend(em.default);Hi.default.extend(Zg.default);var hl="/rest/search/v2",yl="/rest/ua",zi=()=>({organizationId:"",accessToken:"",platformUrl:Qc(),search:{apiBaseUrl:`${Qc()}${hl}`,locale:"en-US",timezone:Hi.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${ap()}${yl}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}});function IF(t,e){if(np(t))return t.replace(/^(https:\/\/)platform/,"$1analytics")+yl;let a=op(t,e);return a?qn(e,a.environment).analytics:t}var Wi=b(zi(),t=>t.addCase(Xr,(e,r)=>{r.payload.accessToken&&(e.accessToken=r.payload.accessToken),r.payload.organizationId&&(e.organizationId=r.payload.organizationId),r.payload.platformUrl&&(e.platformUrl=r.payload.platformUrl,e.search.apiBaseUrl=`${r.payload.platformUrl}${hl}`,e.analytics.apiBaseUrl=IF(r.payload.platformUrl,e.organizationId))}).addCase(Zr,(e,r)=>{r.payload.apiBaseUrl&&(e.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(e.search.locale=r.payload.locale),r.payload.timezone&&(e.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(e.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(io,(e,r)=>{z(r.payload.enabled)||(!r.payload.enabled&&e.analytics.enabled&&Pu(e.analytics),e.analytics.enabled=r.payload.enabled),z(r.payload.originContext)||(e.analytics.originContext=r.payload.originContext),z(r.payload.originLevel2)||(e.analytics.originLevel2=r.payload.originLevel2),z(r.payload.originLevel3)||(e.analytics.originLevel3=r.payload.originLevel3),z(r.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=r.payload.apiBaseUrl),z(r.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),z(r.payload.trackingId)||(e.analytics.trackingId=r.payload.trackingId),z(r.payload.analyticsMode)||(e.analytics.analyticsMode=r.payload.analyticsMode);let a=(0,tm.default)();a&&(e.analytics.analyticsMode="next",e.analytics.trackingId=a),z(r.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),z(r.payload.anonymous)||(e.analytics.anonymous=r.payload.anonymous),z(r.payload.deviceId)||(e.analytics.deviceId=r.payload.deviceId),z(r.payload.userDisplayName)||(e.analytics.userDisplayName=r.payload.userDisplayName),z(r.payload.documentLocation)||(e.analytics.documentLocation=r.payload.documentLocation)}).addCase(so,e=>{e.analytics.enabled=!1,Pu(e.analytics)}).addCase(co,e=>{e.analytics.enabled=!0}).addCase(sl,(e,r)=>{e.analytics.originLevel2=r.payload.originLevel2}).addCase(cl,(e,r)=>{e.analytics.originLevel3=r.payload.originLevel3}).addCase(Ot,(e,r)=>{e.analytics.originLevel2=r.payload}).addCase(le,(e,r)=>{e.analytics.originLevel2=r.payload.tab||e.analytics.originLevel2}));var K=Wi;function wF(t){return t.instantlyCallable}var rm=()=>t=>e=>t(wF(e)?e():e);var am=t=>()=>e=>r=>{var n;if(!r.error)return e(r);let a=r.error;if(((n=r.payload)==null?void 0:n.ignored)||t.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return e(r)},nm=t=>e=>r=>a=>(t.debug({action:a,nextState:e.getState()},`Action dispatched: ${a.type}`),r(a));function om(t,e){let r={...t},a,n=o=>(i,s)=>{let u=o(i,s);return a?a(u,s):u};return{get combinedReducer(){let o=Bd(Object.entries(e).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return n(Xo({...o,...r}))},containsAll(o){return Object.keys(o).every(s=>s in r)},add(o){Object.keys(o).filter(i=>!(i in r)).forEach(i=>r[i]=o[i])},addCrossReducer(o){a=o}}}function Gi(t,e,r){var a,n,o;e===void 0&&(e=50),r===void 0&&(r={});var i=(a=r.isImmediate)!=null&&a,s=(n=r.callback)!=null&&n,u=r.maxWait,c=Date.now(),l=[];function d(){if(u!==void 0){var p=Date.now()-c;if(p+e>=u)return u-p}return e}var f=function(){var p=[].slice.call(arguments),g=this;return new Promise(function(S,v){var F=i&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,c=Date.now(),!i){var D=t.apply(g,p);s&&s(D),l.forEach(function(N){return(0,N.resolve)(D)}),l=[]}},d()),F){var w=t.apply(g,p);return s&&s(w),S(w)}l.push({resolve:S,reject:v})})};return f.cancel=function(p){o!==void 0&&clearTimeout(o),l.forEach(function(g){return(0,g.reject)(p)}),l=[]},f}function im(t,e){let r=0,a=Gi(()=>r=0,500);return n=>o=>async i=>{if(!(typeof i=="function"))return o(i);let u=await o(i);if(!EF(u))return u;if(typeof e!="function")return t.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return t.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,a();let c=await qF(e);n.dispatch(Xr({accessToken:c})),n.dispatch(i)}}function EF(t){var e;return((e=t==null?void 0:t.error)==null?void 0:e.name)===new En().name}async function qF(t){try{return await t()}catch(e){return""}}function sm({reducer:t,preloadedState:e,middlewares:r=[],thunkExtraArguments:a,name:n}){return Np({reducer:t,preloadedState:e,devTools:{stateSanitizer:o=>o.history?{...o,history:"<<OMIT>>"}:o,name:n,shouldHotReload:!1},middleware:o=>[...r,...o({thunk:{extraArgument:a}}),nm(a.logger)]})}var kF={configuration:K,version:Wg};function OF(t,e){var i,s;let r=((i=t.configuration.organizationEndpoints)==null?void 0:i.analytics)||void 0,{analyticsClientMiddleware:a,...n}=(s=t.configuration.analytics)!=null?s:{},o={...n,nextApiBaseUrl:`${r}/rest/organizations/${t.configuration.organizationId}/events/v1`,apiBaseUrl:r};return jo()?(e.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function cm(t,e){var u;let r=TF(t,e),{accessToken:a,organizationId:n}=t.configuration,{organizationEndpoints:o}=t.configuration,i=(o==null?void 0:o.platform)||t.configuration.platformUrl;MF(t)&&r.logger.warn(`The \`platformUrl\` (${t.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),NF(t)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):LF(t)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${t.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(u=t.configuration.organizationEndpoints)==null?void 0:u.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(Xr({accessToken:a,organizationId:n,platformUrl:i}));let s=OF(t,r.logger);return s&&r.dispatch(io(s)),r}function TF(t,e){var i;let{reducers:r}=t,a=om({...kF,...r},(i=t.preloadedState)!=null?i:{});t.crossReducer&&a.addCrossReducer(t.crossReducer);let n=e.logger,o=DF(t,e,a);return{addReducers(s){a.containsAll(s)||(a.add(s),o.replaceReducer(a.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(co())},disableAnalytics(){o.dispatch(so())},get state(){return o.getState()},logger:n,store:o}}function DF(t,e,r){let{preloadedState:a,configuration:n}=t,o=n.name||"coveo-headless",i=VF(t,e.logger);return sm({preloadedState:a,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:e,name:o})}function VF(t,e){let{renewAccessToken:r}=t.configuration,a=im(e,r);return[rm,a,am(e),Gg].concat(t.middlewares||[])}function NF(t){return xe(t.configuration.organizationEndpoints)}function MF(t){var e;return!z(t.configuration.platformUrl)||z((e=t.configuration.organizationEndpoints)==null?void 0:e.platform)}function LF(t){let{platform:e}=t.configuration.organizationEndpoints;if(xe(e))return!1;let r=Bc(e);return r&&r.organizationId!==t.configuration.organizationId}var ym=Ze(hm());function Sm(t){return(0,ym.default)({name:"@coveo/headless",level:(t==null?void 0:t.level)||"warn",formatters:{log:t==null?void 0:t.logFormatter}})}function Cm(t,e){let r=rR(t),a=et,n=aR(t);return{analyticsClientMiddleware:r,validatePayload:a,preprocessRequest:n,logger:e}}function rR(t){let{analytics:e}=t,r=(a,n)=>n;return(e==null?void 0:e.analyticsClientMiddleware)||r}function aR(t){return t.preprocessRequest||Uo}var vm={organizationId:x,accessToken:x,platformUrl:new A({required:!1,emptyAllowed:!1}),name:new A({required:!1,emptyAllowed:!1}),analytics:new R({options:{required:!1},values:{enabled:new j({required:!1}),originContext:new A({required:!1}),originLevel2:new A({required:!1}),originLevel3:new A({required:!1}),analyticsMode:new A({constrainTo:["legacy","next"],required:!1})}})};var Am=new ee({...vm,insightId:x});var nR={insightConfiguration:Ai,search:X,insightInterface:mr,searchHub:Ya,resultPreview:Jr};function xm(t){let e=Sm(t.loggerOptions);oR(t.configuration,e);let r=iR(t.configuration,e),a={...Cm(t.configuration,e),apiClient:r},n={...t,reducers:nR},o=cm(n,a),{insightId:i}=t.configuration;return o.dispatch(vi({insightId:i})),{...o,get state(){return o.state},executeFirstSearch(s=Ci()){_i(o.state)||o.dispatch(G(s))}}}function oR(t,e){try{Am.validate(t)}catch(r){throw e.error(r,"Insight engine configuration error"),r}}function iR(t,e){return new Uc({logger:e,preprocessRequest:t.preprocessRequest||Uo})}function sR(t){return t.addReducers({insightInterface:mr}),{fetch:gr}}function cR(t){return t.addReducers({search:X}),{executeSearch:G,fetchFacetValues:vr,fetchMoreResults:za,fetchPage:Ha,fetchQuerySuggestions:Di}}var fo={id:x},go=m("querySuggest/register",t=>y(t,{...fo,count:new k({min:0})})),Fm=m("querySuggest/unregister",t=>y(t,fo)),ta=m("querySuggest/selectSuggestion",t=>y(t,{...fo,expression:ie})),ra=m("querySuggest/clear",t=>y(t,fo)),mo=B("querySuggest/fetch",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(t,fo);let o=t.id,i=await uR(o,e()),s=await a.querySuggest(i);return oe(s)?r(s.error):{id:o,q:i.q,...s.success}}),uR=async(t,e)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,count:e.querySuggest[t].count,q:e.querySet[t],locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,actionsHistory:e.configuration.analytics.enabled?ze.getHistory():[],...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await Qe(e.configuration.analytics),...e.configuration.analytics.enabled&&await Sr(e.configuration.analytics)},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var Rm={id:x,query:ie},aa=m("querySet/register",t=>y(t,Rm)),xr=m("querySet/update",t=>y(t,Rm));var Ka=b(Ii(),t=>{t.addCase(aa,(e,r)=>{let{id:a,query:n}=r.payload;a in e||(e[a]=n)}).addCase(xr,(e,r)=>{let{id:a,query:n}=r.payload;xl(e,a,n)}).addCase(ta,(e,r)=>{let{id:a,expression:n}=r.payload;xl(e,a,n)}).addCase(se.fulfilled,(e,r)=>{let{queryExecuted:a}=r.payload;bm(e,a)}).addCase(le,(e,r)=>{z(r.payload.q)||bm(e,r.payload.q)}).addCase(ne.fulfilled,(e,r)=>{if(!!r.payload)for(let[a,n]of Object.entries(r.payload.querySet))xl(e,a,n)})});function bm(t,e){Object.keys(t).forEach(r=>t[r]=e)}var xl=(t,e,r)=>{e in t&&(t[e]=r)};function lR(t){return t.addReducers({querySet:Ka}),{registerQuerySetQuery:aa,updateQuerySetQuery:xr}}var $=x;var dR={categoryFacetId:$,categoryFacetPath:new U({required:!0,each:x})},pR=(t,{categoryFacetId:e,categoryFacetPath:r})=>{let a=t.categoryFacetSet[e],n=a==null?void 0:a.request.field,o=`${n}_${e}`;return{categoryFacetId:e,categoryFacetPath:r,categoryFacetField:n,categoryFacetTitle:o}},Zi=t=>T("analytics/categoryFacet/breadcrumb",(e,r)=>{y(t,dR);let a={...pR(r,t),...M(r.insightCaseContext)};return e.logBreadcrumbFacet(a)});var Ja=t=>T("analytics/facet/showMore",(e,r)=>{y(t,$);let a={..._r(t,Ke(r)),...M(r.insightCaseContext)};return e.logFacetShowMore(a)}),Xa=t=>T("analytics/facet/showLess",(e,r)=>{y(t,$);let a={..._r(t,Ke(r)),...M(r.insightCaseContext)};return e.logFacetShowLess(a)}),Tt=t=>T("analytics/facet/sortChange",(e,r)=>{y(t,{facetId:$,sortCriterion:new de({required:!0})});let{facetId:a,sortCriterion:n}=t,o=Ke(r),s={..._r(a,o),criteria:n,...M(r.insightCaseContext)};return e.logFacetUpdateSort(s)}),Be=t=>T("analytics/facet/reset",(e,r)=>{y(t,$);let a=Ke(r),n={..._r(t,a),...M(r.insightCaseContext)};return e.logFacetClearAll(n)}),_e=t=>T("analytics/facet/select",(e,r)=>{y(t,{facetId:$,facetValue:x});let a=Ke(r),n={...jn(t,a),...M(r.insightCaseContext)};return e.logFacetSelect(n)}),yt=t=>T("analytics/facet/deselect",(e,r)=>{y(t,{facetId:$,facetValue:x});let a=Ke(r),n={...jn(t,a),...M(r.insightCaseContext)};return e.logFacetDeselect(n)}),ho=t=>T("analytics/facet/breadcrumb",(e,r)=>{y(t,{facetId:$,facetValue:x});let a={...jn(t,Ke(r)),...M(r.insightCaseContext)};return e.logBreadcrumbFacet(a)});var es=()=>T("analytics/facet/deselectAllBreadcrumbs",(t,e)=>t.logBreadcrumbResetAll(M(e.insightCaseContext)));var Pm=(t,{facetId:e,selection:r})=>{let n=(t.dateFacetSet[e]||t.numericFacetSet[e]).request.field,o=`${n}_${e}`;return{facetId:e,facetField:n,facetTitle:o,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var na={state:x,start:new k({required:!0}),end:new k({required:!0}),endInclusive:new j({required:!0}),numberOfResults:new k({required:!0,min:0})},oa={start:x,end:x,endInclusive:new j({required:!0}),state:x,numberOfResults:new k({required:!0,min:0})},ia=t=>({facetId:$,selection:typeof t.start=="string"?new R({values:oa}):new R({values:na})});var yo=t=>T("analytics/dateFacet/breadcrumb",(e,r)=>{y(t,ia(t.selection));let a={...Pm(r,t),...M(r.insightCaseContext)};return e.logBreadcrumbFacet(a)});var Im=(t,{facetId:e,selection:r})=>{let n=(t.dateFacetSet[e]||t.numericFacetSet[e]).request.field,o=`${n}_${e}`;return{facetId:e,facetField:n,facetTitle:o,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var So=t=>T("analytics/numericFacet/breadcrumb",(e,r)=>{y(t,ia(t.selection));let a={...Im(r,t),...M(r.insightCaseContext)};return e.logBreadcrumbFacet(a)});var sa={value:x,numberOfResults:new k({min:0}),state:x};var fR=new k({min:xf,default:li,required:!1}),gR=new k({min:vf,max:Af,default:ui,required:!1}),mR={desiredCount:gR,numberOfValues:fR},gB=m("automaticFacet/setOptions",t=>y(t,mR)),mB=m("automaticFacet/deselectAll",t=>y(t,$)),hR=x,wm=m("automaticFacet/toggleSelectValue",t=>y(t,{field:hR,selection:new R({values:sa})}));var yR={state:new de({required:!0}),numberOfResults:new k({required:!0,min:0}),value:new A({required:!0,emptyAllowed:!0}),path:new U({required:!0,each:x}),moreValuesAvailable:new j({required:!1})};function Fl(t){t.children.forEach(e=>{Fl(e)}),et({state:t.state,numberOfResults:t.numberOfResults,value:t.value,path:t.path,moreValuesAvailable:t.moreValuesAvailable},yR)}var Za={facetId:$,field:x,delimitingCharacter:new A({required:!1,emptyAllowed:!0}),filterFacetCount:new j({required:!1}),injectionDepth:new k({required:!1,min:0}),numberOfValues:new k({required:!1,min:1}),sortCriteria:new de({required:!1}),basePath:new U({required:!1,each:x}),filterByBasePath:new j({required:!1})},ca=m("categoryFacet/register",t=>y(t,Za)),ua=m("categoryFacet/toggleSelectValue",t=>{try{return et(t.facetId,x),Fl(t.selection),{payload:t,error:null}}catch(e){return{payload:t,error:lt(e)}}}),tr=m("categoryFacet/deselectAll",t=>y(t,Za.facetId)),en=m("categoryFacet/updateNumberOfValues",t=>y(t,{facetId:Za.facetId,numberOfValues:Za.numberOfValues})),Co=m("categoryFacet/updateSortCriterion",t=>y(t,{facetId:Za.facetId,criterion:new de})),Rl=m("categoryFacet/updateBasePath",t=>y(t,{facetId:Za.facetId,basePath:new U({each:x})}));var vo={facetId:$,captions:new R({options:{required:!1}}),numberOfValues:new k({required:!1,min:1}),query:new A({required:!1,emptyAllowed:!0})};var SR={path:new U({required:!0,each:x}),displayValue:ie,rawValue:ie,count:new k({required:!0,min:0})},ts=m("categoryFacet/selectSearchResult",t=>y(t,{facetId:$,value:new R({values:SR})})),Em=m("categoryFacetSearch/register",t=>y(t,vo));var qm={facetId:$,value:new R({values:{displayValue:ie,rawValue:ie,count:new k({required:!0,min:0})}})},km=m("facetSearch/register",t=>y(t,vo)),rs=m("facetSearch/update",t=>y(t,vo)),as=m("facetSearch/toggleSelectValue",t=>y(t,qm)),Om=m("facetSearch/toggleExcludeValue",t=>y(t,qm));function tn(t){var o,i;let e=Tm(t.start,t),r=Tm(t.end,t),a=(o=t.endInclusive)!=null?o:!1,n=(i=t.state)!=null?i:"idle";return{start:e,end:r,endInclusive:a,state:n}}function Tm(t,e){let{dateFormat:r}=e;return hg(t)?(Ti(t),fg(t)):typeof t=="string"&&hr(t)?(Ti(t),t):(ug(t,r),Oi(Ua(t,r)))}var Dt=new A({regex:/^[a-zA-Z0-9-_]+$/}),Vt=new A({required:!0}),Dm=new U({each:new A}),Vm=new A,Nm=new j,Nt=new j,Mt=new k({min:0}),St=new k({min:1}),ns=new j({required:!0}),CR=new R,vR=new A,AR={captions:CR,numberOfValues:St,query:vR},rn=new R({values:AR}),os=new R({options:{required:!1},values:{type:new A({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new U({required:!0,max:25,each:new A({emptyAllowed:!1,required:!0})})}}),GB=new j,is=new U({min:1,max:25,required:!1,each:new A({emptyAllowed:!1,required:!0})});var xR={facetId:$,field:new A({required:!0,emptyAllowed:!0}),filterFacetCount:new j({required:!1}),injectionDepth:new k({required:!1,min:0}),numberOfValues:new k({required:!1,min:1}),sortCriteria:new de({required:!1}),resultsMustMatch:new de({required:!1}),allowedValues:os,customSort:is},la=m("facet/register",t=>y(t,xR)),rr=m("facet/toggleSelectValue",t=>y(t,{facetId:$,selection:new R({values:sa})})),da=m("facet/toggleExcludeValue",t=>y(t,{facetId:$,selection:new R({values:sa})})),be=m("facet/deselectAll",t=>y(t,$)),Ao=m("facet/updateSortCriterion",t=>y(t,{facetId:$,criterion:new de({required:!0})})),an=m("facet/updateNumberOfValues",t=>y(t,{facetId:$,numberOfValues:new k({required:!0,min:1})})),nn=m("facet/updateIsFieldExpanded",t=>y(t,{facetId:$,isFieldExpanded:new j({required:!0})})),Fr=m("facet/updateFreezeCurrentValues",t=>y(t,{facetId:$,freezeCurrentValues:new j({required:!0})}));var on=m("rangeFacet/updateSortCriterion",t=>y(t,{facetId:$,criterion:new de({required:!0})}));var FR={start:x,end:x,endInclusive:new j({required:!0}),state:x},RR={facetId:$,field:x,currentValues:new U({required:!1,each:new R({values:FR})}),generateAutomaticRanges:new j({required:!0}),filterFacetCount:new j({required:!1}),injectionDepth:new k({required:!1,min:0}),numberOfValues:new k({required:!1,min:1}),sortCriteria:new de({required:!1}),rangeAlgorithm:new de({required:!1})};function Mm(t){return hr(t)?Wn(t):t}function ss(t){!t.currentValues||t.currentValues.forEach(e=>{let{start:r,end:a}=tn(e);if(Ua(Mm(r)).isAfter(Ua(Mm(a))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)})}var Lt=m("dateFacet/register",t=>{try{return et(t,RR),ss(t),{payload:t,error:null}}catch(e){return{payload:t,error:lt(e)}}}),Qt=m("dateFacet/toggleSelectValue",t=>y(t,{facetId:$,selection:new R({values:oa})})),Rr=m("dateFacet/toggleExcludeValue",t=>y(t,{facetId:$,selection:new R({values:oa})})),ar=m("dateFacet/updateFacetValues",t=>{try{return et(t,{facetId:$,values:new U({each:new R({values:oa})})}),ss({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:lt(e)}}}),cs=on,us=be;var bR={state:x,start:new k({required:!0}),end:new k({required:!0}),endInclusive:new j({required:!0})},PR={facetId:$,field:x,currentValues:new U({required:!1,each:new R({values:bR})}),generateAutomaticRanges:new j({required:!0}),filterFacetCount:new j({required:!1}),injectionDepth:new k({required:!1,min:0}),numberOfValues:new k({required:!1,min:1}),sortCriteria:new de({required:!1}),rangeAlgorithm:new de({required:!1})};function ls(t){!t.currentValues||t.currentValues.forEach(({start:e,end:r})=>{if(e>r)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${r}`)})}var Bt=m("numericFacet/register",t=>{try{return y(t,PR),ls(t),{payload:t,error:null}}catch(e){return{payload:t,error:lt(e)}}}),jt=m("numericFacet/toggleSelectValue",t=>y(t,{facetId:$,selection:new R({values:na})})),br=m("numericFacet/toggleExcludeValue",t=>y(t,{facetId:$,selection:new R({values:na})})),nr=m("numericFacet/updateFacetValues",t=>{try{return et(t,{facetId:$,values:new U({each:new R({values:na})})}),ls({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:lt(e)}}}),ds=on,ps=be;var Ct=(r=>(r.Relevance="relevance",r.Fields="fields",r))(Ct||{}),fs=(r=>(r.Ascending="asc",r.Descending="desc",r))(fs||{});var wj=new R({options:{required:!1},values:{by:new ut({enum:Ct,required:!0}),fields:new U({each:new R({values:{name:new A,direction:new ut({enum:fs})}})})}});var Lm=()=>Yf("analytics/productListing/load",t=>t.makeInterfaceLoad(),t=>new Na(t));var Hj=m("productlisting/setUrl",t=>y(t,{url:new A({required:!0,url:!0})})),zj=m("productlisting/setAdditionalFields",t=>y(t,{additionalFields:new U({required:!0,each:new A({required:!0,emptyAllowed:!1})})})),Pr=B("productlisting/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:n})=>{let o=e(),{apiClient:i}=n,s=await i.getProducts(await IR(o));return oe(s)?(r(ot(s.error)),a(s.error)):{response:s.success,analyticsAction:Lm()}}),IR=async t=>{var a,n,o;let e=ER(t),r=await Qe(t.configuration.analytics);return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,platformUrl:t.configuration.platformUrl,url:(a=t.productListing)==null?void 0:a.url,...t.configuration.analytics.enabled&&r?{clientId:r}:{},...((n=t.productListing.additionalFields)==null?void 0:n.length)?{additionalFields:t.productListing.additionalFields}:{},...t.productListing.advancedParameters&&wR(t.productListing.advancedParameters)?{advancedParameters:t.productListing.advancedParameters||{}}:{},...e.length&&{facets:{requests:e}},...t.pagination&&{pagination:{numberOfValues:t.pagination.numberOfResults,page:Math.ceil(t.pagination.firstResult/(t.pagination.numberOfResults||1))+1}},...(((o=t.sort)==null?void 0:o.by)||Ct.Relevance)!==Ct.Relevance&&{sort:t.sort},...t.context&&{userContext:t.context.contextValues}}};function wR(t){return t.debug}function ER(t){var e;return Wa(qR(t),(e=t.facetOrder)!=null?e:[])}function qR(t){var e,r,a,n;return[...gt((e=t.facetSet)!=null?e:{}),...gt((r=t.numericFacetSet)!=null?r:{}),...gt((a=t.dateFacetSet)!=null?a:{}),...gt((n=t.categoryFacetSet)!=null?n:{})]}var pa=b(qt(),t=>{t.addCase(Yn,(e,r)=>{let a=bl(e),n=r.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=xo(a,n)}).addCase(Kn,(e,r)=>{e.numberOfResults=r.payload,e.firstResult=0}).addCase(Ot,e=>{e.firstResult=0}).addCase(Jn,(e,r)=>{let a=r.payload;e.firstResult=xo(a,e.numberOfResults)}).addCase(ht,(e,r)=>{let a=r.payload;e.firstResult=xo(a,e.numberOfResults)}).addCase(Zn,e=>{let r=bl(e),a=Math.max(r-1,Hr);e.firstResult=xo(a,e.numberOfResults)}).addCase(Xn,e=>{let r=bl(e),a=kR(e),n=Math.min(r+1,a);e.firstResult=xo(n,e.numberOfResults)}).addCase(ne.fulfilled,(e,r)=>{r.payload&&(e.numberOfResults=r.payload.pagination.numberOfResults,e.firstResult=r.payload.pagination.firstResult)}).addCase(le,(e,r)=>{var a,n;e.firstResult=(a=r.payload.firstResult)!=null?a:e.firstResult,e.numberOfResults=(n=r.payload.numberOfResults)!=null?n:e.defaultNumberOfResults}).addCase(se.fulfilled,(e,r)=>{let{response:a}=r.payload;e.totalCountFiltered=a.totalCountFiltered}).addCase(Pr.fulfilled,(e,r)=>{let{response:a}=r.payload;e.totalCountFiltered=a.pagination.totalCount}).addCase(be,e=>{it(e)}).addCase(rr,e=>{it(e)}).addCase(tr,e=>{it(e)}).addCase(ua,e=>{it(e)}).addCase(ts,e=>{it(e)}).addCase(Qt,e=>{it(e)}).addCase(jt,e=>{it(e)}).addCase(Pe,e=>{it(e)}).addCase(ar,e=>{it(e)}).addCase(nr,e=>{it(e)}).addCase(as,e=>{it(e)}).addCase(wm,e=>{it(e)})});function it(t){t.firstResult=qt().firstResult}function bl(t){let{firstResult:e,numberOfResults:r}=t;return Pl(e,r)}function kR(t){let{totalCountFiltered:e,numberOfResults:r}=t;return Il(e,r)}function xo(t,e){return(t-1)*e}function Pl(t,e){return Math.round(t/e)+1}function Il(t,e){let r=Math.min(t,Cr);return Math.ceil(r/e)}function OR(t){return t.pagination.firstResult}function Qm(t){return t.pagination.numberOfResults}function TR(t){return t.pagination.totalCountFiltered}var Ir=t=>{let e=OR(t),r=Qm(t);return Pl(e,r)},wl=t=>{let e=TR(t),r=Qm(t);return Il(e,r)},Bm=(t,e)=>{let r=Ir(t),a=wl(t),n=DR(r,e);return n=VR(n),n=NR(n,a),MR(n)};function DR(t,e){let r=e%2==0,a=Math.floor(e/2),n=r?a-1:a,o=t-a,i=t+n;return{start:o,end:i}}function VR(t){let e=Math.max(Hr-t.start,0),r=t.start+e,a=t.end+e;return{start:r,end:a}}function NR(t,e){let r=Math.max(t.end-e,0),a=Math.max(t.start-r,Hr),n=t.end-r;return{start:a,end:n}}function MR(t){let e=[];for(let r=t.start;r<=t.end;++r)e.push(r);return e}var gs=()=>T("analytics/pager/number",(t,e)=>t.logPagerNumber({pagerNumber:Ir(e),...M(e.insightCaseContext)})),ms=()=>T("analytics/pager/next",(t,e)=>t.logPagerNext({pagerNumber:Ir(e),...M(e.insightCaseContext)})),hs=()=>T("analytics/pager/previous",(t,e)=>t.logPagerPrevious({pagerNumber:Ir(e),...M(e.insightCaseContext)}));var jm=t=>T("analytics/resultAction/insight/copyToClipboard",(e,r)=>{De(t);let a=M(r.insightCaseContext);return e.logCopyToClipboard(Fe(t,r),ke(t),a)}),Um=t=>T("analytics/resultAction/insight/caseSendEmail",(e,r)=>{De(t);let a=M(r.insightCaseContext);return e.logCaseSendEmail(Fe(t,r),ke(t),a)}),_m=t=>T("analytics/resultAction/insight/feedItemTextPost",(e,r)=>{De(t);let a=M(r.insightCaseContext);return e.logFeedItemTextPost(Fe(t,r),ke(t),a)});var sn=()=>T("analytics/sort/results",(t,e)=>t.logResultsSort({resultsSortBy:e.sortCriteria||at(),...M(e.insightCaseContext)}));var ys=t=>T("analytics/staticFilter/deselect",(e,r)=>e.logStaticFilterDeselect({...t,...M(r.insightCaseContext)}));function LR(t){return t.addReducers({}),{logClearBreadcrumbs:es,logInterfaceLoad:Ci,logInterfaceChange:fr,logCreateArticle:Xf,logCategoryFacetBreadcrumb:Zi,logFacetBreadcrumb:ho,logFacetClearAll:Be,logFacetDeselect:yt,logFacetSelect:_e,logFacetShowLess:Xa,logFacetShowMore:Ja,logFacetUpdateSort:Tt,logDateFacetBreadcrumb:yo,logNumericFacetBreadcrumb:So,logPageNext:ms,logPageNumber:gs,logPagePrevious:hs,logResultsSort:sn,logStaticFilterDeselect:ys,logCopyToClipboard:jm,logCaseSendEmail:Um,logFeedItemTextPost:_m}}var ce=m("facetOptions/update",(t={freezeFacetOrder:!0})=>y(t,{freezeFacetOrder:new j({required:!1})})),$e=m("facetOptions/facet/enable",t=>y(t,$)),Ce=m("facetOptions/facet/disable",t=>y(t,$));function cn(t,e){var o;let{facetId:r,criterion:a}=e,n=(o=t[r])==null?void 0:o.request;!n||(n.sortCriteria=a)}function Fo(t){!t||(t.currentValues=t.currentValues.map(e=>({...e,state:"idle"})),t.preventAutoSelect=!0)}function Ss(t,e){!t||(t.numberOfValues=e)}var Cs={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function vs(t,e){let{request:r}=e,{facetId:a}=r;if(a in t)return;let n=$m(r);r.numberOfValues=n,t[a]=e}function As(t,e,r){var n;let a=(n=t[e])==null?void 0:n.request;!a||(a.currentValues=r,a.numberOfValues=$m(a))}function xs(t,e,r){var i;let a=(i=t[e])==null?void 0:i.request;if(!a)return;let n=bs(a.currentValues,r);if(!n)return;let o=n.state==="selected";n.state=o?"idle":"selected",a.preventAutoSelect=!0}function Fs(t,e,r){var i;let a=(i=t[e])==null?void 0:i.request;if(!a)return;let n=bs(a.currentValues,r);if(!n)return;let o=n.state==="excluded";n.state=o?"idle":"excluded",a.preventAutoSelect=!0}function wr(t,e){var a;let r=(a=t[e])==null?void 0:a.request;!r||r.currentValues.forEach(n=>n.state="idle")}function Rs(t,e){Object.entries(t).forEach(([r,{request:a}])=>{let n=e[r]||[];a.currentValues.forEach(s=>{let u=!!bs(n,s);return s.state=u?"selected":"idle",s});let o=n.filter(s=>!bs(a.currentValues,s)),i=a.currentValues;i.push(...o),a.numberOfValues=Math.max(a.numberOfValues,i.length)})}function un(t,e,r){e.forEach(a=>{var s;let n=a.facetId,o=(s=t[n])==null?void 0:s.request;if(!o)return;let i=r(a.values);o.currentValues=i,o.preventAutoSelect=!1})}function bs(t,e){let{start:r,end:a}=e;return t.find(n=>n.start===r&&n.end===a)}function $m(t){let{generateAutomaticRanges:e,currentValues:r,numberOfValues:a}=t;return e?Math.max(a,r.length):r.length}var Ut=b(Ta(),t=>{t.addCase(Lt,(e,r)=>{let{payload:a}=r,n=QR(a);vs(e,If(n))}).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.dateFacetSet)!=null?n:e}).addCase(le,(e,r)=>{let a=r.payload.df||{};Rs(e,a)}).addCase(Qt,(e,r)=>{let{facetId:a,selection:n}=r.payload;xs(e,a,n)}).addCase(Rr,(e,r)=>{let{facetId:a,selection:n}=r.payload;Fs(e,a,n)}).addCase(ar,(e,r)=>{let{facetId:a,values:n}=r.payload;As(e,a,n)}).addCase(us,(e,r)=>{wr(e,r.payload)}).addCase(Pe,e=>{Object.keys(e).forEach(r=>{wr(e,r)})}).addCase(cs,(e,r)=>{cn(e,r.payload)}).addCase(se.fulfilled,(e,r)=>{let a=r.payload.response.facets;un(e,a,Hm)}).addCase(Pr.fulfilled,(e,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];un(e,a,Hm)}).addCase(Ce,(e,r)=>{wr(e,r.payload)})});function QR(t){return{...Cs,currentValues:[],preventAutoSelect:!1,type:"dateRange",...t}}function Hm(t){return t.map(e=>{let{numberOfResults:r,...a}=e;return a})}function BR(t){return t.addReducers({dateFacetSet:Ut}),{deselectAllDateFacetValues:us,registerDateFacet:Lt,toggleSelectDateFacetValue:Qt,toggleExcludeDateFacetValue:Rr,updateDateFacetSortCriterion:cs,updateDateFacetValues:ar}}var Er=b(Da(),t=>{t.addCase(Bt,(e,r)=>{let{payload:a}=r,n=jR(a);vs(e,wf(n))}).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.numericFacetSet)!=null?n:e}).addCase(le,(e,r)=>{let a=r.payload.nf||{};Rs(e,a)}).addCase(jt,(e,r)=>{let{facetId:a,selection:n}=r.payload;xs(e,a,n)}).addCase(br,(e,r)=>{let{facetId:a,selection:n}=r.payload;Fs(e,a,n)}).addCase(nr,(e,r)=>{let{facetId:a,values:n}=r.payload;As(e,a,n)}).addCase(ps,(e,r)=>{wr(e,r.payload)}).addCase(Pe,e=>{Object.keys(e).forEach(r=>{wr(e,r)})}).addCase(ds,(e,r)=>{cn(e,r.payload)}).addCase(se.fulfilled,(e,r)=>{let a=r.payload.response.facets;un(e,a,zm)}).addCase(Pr.fulfilled,(e,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];un(e,a,zm)}).addCase(Ce,(e,r)=>{wr(e,r.payload)})});function jR(t){return{...Cs,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...t}}function zm(t){return t.map(e=>{let{numberOfResults:r,...a}=e;return a})}function UR(t){return t.addReducers({numericFacetSet:Er}),{deselectAllNumericFacetValues:ps,registerNumericFacet:Bt,toggleSelectNumericFacetValue:jt,toggleExcludeNumericFacetValue:br,updateNumericFacetSortCriterion:ds,updateNumericFacetValues:nr}}var _R={results:new U({required:!0,each:new R({values:Qa})}),maxLength:new k({required:!0,min:1,default:10})},Ps=m("recentResults/registerRecentResults",t=>y(t,_R)),_t=m("recentResults/pushRecentResult",t=>(De(t),{payload:t})),Is=m("recentResults/clearRecentResults");function Wm(){return{results:[],maxLength:10}}var Gm=b(Wm(),t=>{t.addCase(Ps,(e,r)=>{e.results=r.payload.results.slice(0,r.payload.maxLength),e.maxLength=r.payload.maxLength}).addCase(Is,e=>{e.results=[]}).addCase(_t,(e,r)=>{let a=r.payload;e.results=e.results.filter(o=>o.uniqueId!==a.uniqueId);let n=e.results.slice(0,e.maxLength-1);e.results=[a,...n]})});function $R(t){return t.addReducers({recentResults:Gm}),{registerRecentResults:Ps,clearRecentResults:Is,pushRecentResult:_t}}var ws=m("insight/caseContext/set",t=>{let e=new R({options:{required:!0}}),r=y(t,e).error;if(r)return{payload:t,error:r};let a=Object.values(t),n=new U({each:ie}),o=y(a,n).error;return o?{payload:t,error:o}:{payload:t}}),Es=m("insight/caseId/set",t=>{let r=y(t,ie).error;return r?{payload:t,error:r}:{payload:t}}),qs=m("insight/caseNumber/set",t=>{let r=y(t,ie).error;return r?{payload:t,error:r}:{payload:t}});var Ym=b(gp(),t=>{t.addCase(ws,(e,r)=>{e.caseContext=r.payload}).addCase(Es,(e,r)=>{e.caseId=r.payload}).addCase(qs,(e,r)=>{e.caseNumber=r.payload})});function HR(t){return t.addReducers({insightCaseContext:Ym}),{setCaseContext:ws,setCaseId:Es,setCaseNumber:qs}}function zR(t){return t.addReducers({}),{logContextChanged:Fg,logExpandToFullUI:Rg}}var Ro={collectionField:new A({emptyAllowed:!1,required:!1}),parentField:new A({emptyAllowed:!1,required:!1}),childField:new A({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new k({min:0,required:!1})},qr=m("folding/register",t=>y(t,Ro)),ln=B("folding/loadCollection",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:a}})=>{let n=e(),o=await Ar(n),i=await a.search({...o,q:WR(n),enableQuerySyntax:!0,cq:`@${n.folding.fields.collection}="${t}"`,filterField:n.folding.fields.collection,childField:n.folding.fields.parent,parentField:n.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return oe(i)?r(i.error):{collectionId:t,results:i.success.results,rootResult:n.folding.collections[t].result}});function WR(t){return t.query.q===""?"":t.query.enableQuerySyntax?`${t.query.q} OR @uri`:`( <@- ${t.query.q} -@> ) OR @uri`}var ks=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});var GR=new U({each:x,required:!0}),kr=m("fields/registerFieldsToInclude",t=>y(t,GR)),Os=m("fields/fetchall/enable"),Ts=m("fields/fetchall/disable"),Ds=B("fields/fetchDescription",async(t,{extra:e,getState:r,rejectWithValue:a})=>{let n=r(),{accessToken:o,organizationId:i}=n.configuration,{apiBaseUrl:s}=n.configuration.search,u=await e.apiClient.fieldDescriptions({accessToken:o,organizationId:i,url:s});return oe(u)?a(u.error):u.success.fields});var Km=["author","language","urihash","objecttype","collection","source","permanentid"],YR=[...Km,"date","filetype","parents"],w_=[...YR,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Jm=()=>({fieldsToInclude:Km,fetchAllFields:!1,fieldsDescription:[]});var dn=b(Jm(),t=>t.addCase(kr,(e,r)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(r.payload))]}).addCase(Os,e=>{e.fetchAllFields=!0}).addCase(Ts,e=>{e.fetchAllFields=!1}).addCase(Ds.fulfilled,(e,{payload:r})=>{e.fieldsDescription=r}).addCase(qr,(e,{payload:r})=>{var n,o,i;let a=ks().fields;e.fieldsToInclude.push((n=r.collectionField)!=null?n:a.collection,(o=r.parentField)!=null?o:a.parent,(i=r.childField)!=null?i:a.child)}));function KR(t){return t.addReducers({fields:dn}),{registerFieldsToInclude:kr,enableFetchAllFields:Os,disableFetchAllFields:Ts,fetchFieldsDescription:Ds}}var Xm=new R({options:{required:!0},values:{articleLanguage:pe,articlePublishStatus:pe,articleVersionNumber:pe,caseId:x,knowledgeArticleId:pe,name:pe,permanentId:pe,resultUrl:pe,source:pe,title:x,uriHash:pe}}),Vs=m("insight/attachToCase/setAttachedResults",t=>y(t,{results:new U({each:Xm}),loading:new j({required:!1,default:!1})})),Ns=m("insight/attachToCase/attach",t=>Zm(t)),Ms=m("insight/attachToCase/detach",t=>Zm(t)),Zm=t=>z(t.result.permanentId)&&z(t.result.uriHash)?{payload:t,error:lt(new Nr("Either permanentId or uriHash is required"))}:y(t,{result:Xm});function eh(){return{results:[],loading:!1}}var Ls=b(eh(),t=>{t.addCase(Vs,(e,r)=>{var o;let{results:a,loading:n}=r.payload;"results"in e&&((o=e.results)==null?void 0:o.length)>0||(e.results=a,n&&(e.loading=n))}).addCase(Ns,(e,r)=>{(!z(r.payload.result.permanentId)||!z(r.payload.result.uriHash))&&(e.results=[...e.results,r.payload.result])}).addCase(Ms,(e,r)=>{e.results=e.results.filter(a=>JR(a,r.payload.result))})}),JR=(t,e)=>{let r=!z(t.permanentId)&&(t==null?void 0:t.permanentId)===(e==null?void 0:e.permanentId),a=!z(t.uriHash)&&(t==null?void 0:t.uriHash)===(e==null?void 0:e.uriHash);return!(t.caseId===e.caseId)||!r&&!a};function XR(t){return t.addReducers({attachedResults:Ls}),{setAttachedResults:Vs}}var El=t=>y(t,{evt:x,type:pe}),th=t=>fe("analytics/generic/search",e=>{El(t);let{evt:r,meta:a}=t;return e.makeSearchEvent(r,a)}),rh=t=>fe("analytics/generic/click",(e,r)=>(De(t.result),El(t),e.makeClickEvent(t.evt,Fe(t.result,r),ke(t.result),t.meta))),ah=t=>fe("analytics/generic/custom",e=>(El(t),e.makeCustomEventWithType(t.evt,t.type,t.meta)));function ZR(t){return t.addReducers({}),{logSearchEvent:th,logClickEvent:rh,logCustomEvent:ah}}var Qs=()=>new R({values:{questionAnswerId:x},options:{required:!0}}),ql=()=>new R({values:{linkText:ie,linkURL:ie},options:{required:!0}});function pn(t){return y(t,Qs())}var fn=m("smartSnippet/expand"),gn=m("smartSnippet/collapse"),mn=m("smartSnippet/like"),hn=m("smartSnippet/dislike"),yn=m("smartSnippet/feedbackModal/open"),Or=m("smartSnippet/feedbackModal/close"),Sn=m("smartSnippet/related/expand",t=>pn(t)),Cn=m("smartSnippet/related/collapse",t=>pn(t));var kl=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var nh=(t,e)=>t.findIndex(r=>r.questionAnswerId===e.questionAnswerId);function oh({question:t,answerSnippet:e,documentId:{contentIdKey:r,contentIdValue:a}}){return ya({question:t,answerSnippet:e,contentIdKey:r,contentIdValue:a})}function eb(t,e){let r=oh(t);return e&&r===e.questionAnswerId?e:{contentIdKey:t.documentId.contentIdKey,contentIdValue:t.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var $t=b(kl(),t=>t.addCase(fn,e=>{e.expanded=!0}).addCase(gn,e=>{e.expanded=!1}).addCase(mn,e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1}).addCase(hn,e=>{e.liked=!1,e.disliked=!0}).addCase(yn,e=>{e.feedbackModalOpen=!0}).addCase(Or,e=>{e.feedbackModalOpen=!1}).addCase(se.fulfilled,(e,r)=>{let a=r.payload.response.questionAnswer.relatedQuestions.map((o,i)=>eb(o,e.relatedQuestions[i])),n=oh(r.payload.response.questionAnswer);return e.questionAnswerId===n?{...e,relatedQuestions:a}:{...kl(),relatedQuestions:a,questionAnswerId:n}}).addCase(Sn,(e,r)=>{let a=nh(e.relatedQuestions,r.payload);a!==-1&&(e.relatedQuestions[a].expanded=!0)}).addCase(Cn,(e,r)=>{let a=nh(e.relatedQuestions,r.payload);a!==-1&&(e.relatedQuestions[a].expanded=!1)}));function tb(t){return t.addReducers({questionAnswering:$t}),{collapseSmartSnippet:gn,expandSmartSnippet:fn,dislikeSmartSnippet:hn,likeSmartSnippet:mn,openFeedbackModal:yn,closeFeedbackModal:Or,expandSmartSnippetRelatedQuestion:Sn,collapseSmartSnippetRelatedQuestion:Cn}}function rb(t,e){return t.raw[e.collection]}function Ol(t,e){return t.raw[e.parent]}function bo(t,e){let r=t.raw[e.child];return Lo(r)?r[0]:r}function ab(t,e){return(t||e)!==void 0&&t===e}function ih(t,e,r,a=[]){let n=bo(t,r);return n?a.indexOf(n)!==-1?[]:e.filter(o=>{let i=bo(o,r)===bo(t,r);return Ol(o,r)===n&&!i}).map(o=>({result:o,children:ih(o,e,r,[...a,n])})):[]}function nb(t,e){return t.find(r=>{let a=Ol(r,e)===void 0,n=ab(Ol(r,e),bo(r,e));return a||n})}function sh(t){return t.parentResult?sh(t.parentResult):t}function ob(t,e,r){var o;let a=Si(t),n=(o=r!=null?r:nb(a,e))!=null?o:sh(t);return{result:n,children:ih(n,a,e),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Bs(t,e,r){let a={};return t.forEach(n=>{let o=rb(n,e);!o||!bo(n,e)&&!n.parentResult||(a[o]=ob(n,e,r))}),a}function ch(t,e){if(!t.collections[e])throw new Error(`Missing collection ${e} from ${Object.keys(t.collections)}: Folding most probably in an invalid state...`);return t.collections[e]}var js=b(ks(),t=>t.addCase(se.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?Bs(r.response.results,e.fields):{}}).addCase(Qi.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?Bs(r.response.results,e.fields):{}}).addCase(Bi.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?{...e.collections,...Bs(r.response.results,e.fields)}:{}}).addCase(qr,(e,{payload:r})=>{var a,n,o,i;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:(a=r.collectionField)!=null?a:e.fields.collection,parent:(n=r.parentField)!=null?n:e.fields.parent,child:(o=r.childField)!=null?o:e.fields.child},filterFieldRange:(i=r.numberOfFoldedResults)!=null?i:e.filterFieldRange}}).addCase(ln.pending,(e,{meta:r})=>{let a=r.arg;ch(e,a).isLoadingMoreResults=!0}).addCase(ln.rejected,(e,{meta:r})=>{let a=r.arg;ch(e,a).isLoadingMoreResults=!1}).addCase(ln.fulfilled,(e,{payload:{collectionId:r,results:a,rootResult:n}})=>{let o=Bs(a,e.fields,n);if(!o||!o[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(a)}. Folding most probably in an invalid state... `);e.collections[r]=o[r],e.collections[r].moreResultsAvailable=!1}));function ib(t){return t.addReducers({folding:js}),{registerFolding:qr,loadCollection:ln}}function Y(t){let e,r=new Map,a=()=>r.size===0,n=o=>{try{let i=JSON.stringify(o),s=e!==i;return e=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(o){o();let i=Symbol(),s;return a()&&(e=JSON.stringify(this.state),s=t.subscribe(()=>{n(this.state)&&r.forEach(u=>u())})),r.set(i,o),()=>{r.delete(i),a()&&s&&s()}},get state(){return{}}}}var Us=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function uh(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Us(),originalQuery:"",automaticallyCorrectQuery:!0}}var Tl=b(uh(),t=>{t.addCase($n,e=>{e.enableDidYouMean=!0}).addCase(Vu,e=>{e.enableDidYouMean=!1}).addCase(Nu,e=>{e.automaticallyCorrectQuery=!0}).addCase(Hn,e=>{e.automaticallyCorrectQuery=!1}).addCase(se.pending,e=>{e.queryCorrection=Us(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""}).addCase(se.fulfilled,(e,r)=>{e.queryCorrection=r.payload.response.queryCorrections[0]||Us(),e.originalQuery=r.payload.originalQuery,e.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(Je,(e,r)=>{e.wasCorrectedTo=r.payload})});function lh(t,e={}){if(!sb(t))throw V;let r=Y(t),{dispatch:a}=t;a($n()),e.automaticallyCorrectQuery===!1&&a(Hn());let n=()=>t.state;return{...r,get state(){let o=n();return{originalQuery:o.didYouMean.originalQuery,wasCorrectedTo:o.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:o.didYouMean.wasAutomaticallyCorrected,queryCorrection:o.didYouMean.queryCorrection,hasQueryCorrection:o.didYouMean.queryCorrection.correctedQuery!==""||o.didYouMean.wasCorrectedTo!==""}},applyCorrection(){a(Je(this.state.queryCorrection.correctedQuery))}}}function sb(t){return t.addReducers({configuration:K,didYouMean:Tl}),!0}function dh(t){let e=lh(t),{dispatch:r}=t;return{...e,get state(){return e.state},applyCorrection(){e.applyCorrection(),r(G(tg()))}}}function _s(t,e){let r=t[e];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function Dl(t,e,r){t.currentValues=cb(e,r),t.numberOfValues=e.length?1:r,t.preventAutoSelect=!0}function cb(t,e){if(!t.length)return[];let r=ph(t[0],e),a=r;for(let n of t.splice(1)){let o=ph(n,e);a.children.push(o),a=o}return a.state="selected",a.retrieveChildren=!0,[r]}function ph(t,e){return{value:t,retrieveCount:e,children:[],state:"idle",retrieveChildren:!1}}var Po=b(Oa(),t=>{t.addCase(ca,(e,r)=>{let a=r.payload,{facetId:n}=a;if(n in e)return;let o=lb(a),i=o.numberOfValues;e[n]={request:o,initialNumberOfValues:i}}).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.categoryFacetSet)!=null?n:e}).addCase(le,(e,r)=>{let a=r.payload.cf||{};Object.keys(e).forEach(n=>{let o=e[n].request,i=a[n]||[];(i.length||o.currentValues.length)&&Dl(o,i,e[n].initialNumberOfValues)})}).addCase(Co,(e,r)=>{var i;let{facetId:a,criterion:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.sortCriteria=n)}).addCase(Rl,(e,r)=>{var i;let{facetId:a,basePath:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.basePath=[...n])}).addCase(ua,(e,r)=>{var d;let{facetId:a,selection:n,retrieveCount:o}=r.payload,i=(d=e[a])==null?void 0:d.request;if(!i)return;let{path:s}=n,u=s.slice(0,s.length-1),c=ub(i,u,o);if(c.length){let f=c[0];f.retrieveChildren=!0,f.state="selected",f.children=[];return}let l=fh(n.value,o);l.state="selected",c.push(l),i.numberOfValues=1}).addCase(tr,(e,r)=>{let a=r.payload;_s(e,a)}).addCase(Pe,e=>{Object.keys(e).forEach(r=>_s(e,r))}).addCase(kt,(e,r)=>Object.keys(e).forEach(a=>{e[a].request.preventAutoSelect=!r.payload.allow})).addCase(en,(e,r)=>{var i;let{facetId:a,numberOfValues:n}=r.payload,o=(i=e[a])==null?void 0:i.request;if(!!o){if(!o.currentValues.length)return Ss(o,n);db(e,r.payload)}}).addCase(ts,(e,r)=>{let{facetId:a,value:n}=r.payload,o=e[a];if(!o)return;let i=[...n.path,n.rawValue];Dl(o.request,i,o.initialNumberOfValues)}).addCase(ji.fulfilled,(e,r)=>{gh(e,r.payload.response.facets)}).addCase(se.fulfilled,(e,r)=>{gh(e,r.payload.response.facets)}).addCase(Ce,(e,r)=>{_s(e,r.payload)})}),Vl={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function ub(t,e,r){let a=t.currentValues;for(let n of e){let o=a[0];(!o||n!==o.value)&&(o=fh(n,r),a.length=0,a.push(o)),o.retrieveChildren=!1,o.state="idle",a=o.children}return a}function lb(t){return{...Vl,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...t}}function fh(t,e){return{value:t,state:"idle",children:[],retrieveChildren:!0,retrieveCount:e}}function gh(t,e){e.forEach(r=>{var i;if(!pb(t,r))return;let a=r.facetId,n=(i=t[a])==null?void 0:i.request;if(!n)return;let o=fb(n,r);n.currentValues=o?[]:n.currentValues,n.preventAutoSelect=!1})}function db(t,e){var o;let{facetId:r,numberOfValues:a}=e,n=(o=t[r])==null?void 0:o.request.currentValues[0];if(!!n){for(;n.children.length&&(n==null?void 0:n.state)!=="selected";)n=n.children[0];n.retrieveCount=a}}function pb(t,e){return e.facetId in t}function fb(t,e){let r=Ye(t.currentValues),a=Ye(e.values);return r.length!==a.length}var fa=b(Va(),t=>{t.addCase(la,(e,r)=>{let{facetId:a}=r.payload;a in e||(e[a]=Ef(gb(r.payload)))}).addCase(ne.fulfilled,(e,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(le,(e,r)=>{let a=r.payload.f||{},n=r.payload.fExcluded||{};Object.keys(e).forEach(i=>{let{request:s}=e[i],u=a[i]||[],c=n[i]||[],l=s.currentValues.filter(d=>!u.includes(d.value)&&!c.includes(d.value));s.currentValues=[...u.map(mh),...c.map(hh),...l.map(hb)],s.preventAutoSelect=u.length>0,s.numberOfValues=Math.max(u.length+c.length,s.numberOfValues)})}).addCase(rr,(e,r)=>{var u;let{facetId:a,selection:n}=r.payload,o=(u=e[a])==null?void 0:u.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(c=>c.value===n.value);if(!i){$s(o,n);return}let s=i.state==="selected";i.state=s?"idle":"selected",o.freezeCurrentValues=!0}).addCase(da,(e,r)=>{var u;let{facetId:a,selection:n}=r.payload,o=(u=e[a])==null?void 0:u.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(c=>c.value===n.value);if(!i){$s(o,n);return}let s=i.state==="excluded";i.state=s?"idle":"excluded",o.freezeCurrentValues=!0}).addCase(Fr,(e,r)=>{var i;let{facetId:a,freezeCurrentValues:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.freezeCurrentValues=n)}).addCase(be,(e,r)=>{var a;Fo((a=e[r.payload])==null?void 0:a.request)}).addCase(Pe,e=>{Object.values(e).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Fo(r))}).addCase(Wr,e=>{Object.values(e).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Fo(r))}).addCase(kt,(e,r)=>Object.values(e).forEach(a=>{a.request.preventAutoSelect=!r.payload.allow})).addCase(Ao,(e,r)=>{cn(e,r.payload)}).addCase(an,(e,r)=>{var o;let{facetId:a,numberOfValues:n}=r.payload;Ss((o=e[a])==null?void 0:o.request,n)}).addCase(nn,(e,r)=>{var i;let{facetId:a,isFieldExpanded:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.isFieldExpanded=n)}).addCase(se.fulfilled,(e,r)=>{r.payload.response.facets.forEach(n=>{var o;return Nl((o=e[n.facetId])==null?void 0:o.request,n)})}).addCase(Pr.fulfilled,(e,r)=>{var n,o;(((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[]).forEach(i=>{var s;return Nl((s=e[i.facetId])==null?void 0:s.request,i)})}).addCase(ji.fulfilled,(e,r)=>{r.payload.response.facets.forEach(n=>{var o;return Nl((o=e[n.facetId])==null?void 0:o.request,n)})}).addCase(as,(e,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=e[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,u=s.find(d=>d.value===i);if(u){u.state="selected";return}let c=mh(i);$s(o,c),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(Om,(e,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=e[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,u=s.find(d=>d.value===i);if(u){u.state="excluded";return}let c=hh(i);$s(o,c),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(Ce,(e,r)=>{if(!(r.payload in e))return;let{request:a}=e[r.payload];Fo(a)})});function $s(t,e){let{currentValues:r}=t,a=r.findIndex(s=>s.state==="idle"),n=a===-1?r.length:a,o=r.slice(0,n),i=r.slice(n+1);t.currentValues=[...o,e,...i],t.numberOfValues=t.currentValues.length}function Nl(t,e){!t||(t.currentValues=e.values.map(mb),t.freezeCurrentValues=!1,t.preventAutoSelect=!1)}var Ml={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function gb(t){return{...Ml,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...t}}function mb(t){let{value:e,state:r}=t;return{value:e,state:r}}function mh(t){return{value:t,state:"selected"}}function hh(t){return{value:t,state:"excluded"}}function hb(t){return{...t,state:"idle"}}function yb(t,e){return!!e&&e.facetId in t.dateFacetSet}var yh=(t,e)=>{let r=Xt(t,e);if(yb(t,r))return r},Sh=(t,e)=>(yh(t,e)||{values:[]}).values.filter(a=>a.state==="selected"),Ch=(t,e)=>(yh(t,e)||{values:[]}).values.filter(a=>a.state!=="idle");function Sb(t,e){return!!e&&e.facetId in t.numericFacetSet}var vh=(t,e)=>{let r=Xt(t,e);if(Sb(t,r))return r},Ah=(t,e)=>(vh(t,e)||{values:[]}).values.filter(a=>a.state!=="idle"),xh=(t,e)=>(vh(t,e)||{values:[]}).values.filter(a=>a.state==="selected");var Io=x,Hs=new R({options:{required:!0},values:{caption:ie,expression:ie,state:new A({constrainTo:["idle","selected","excluded"]})}}),Fh=new U({required:!0,each:Hs});var Ll=m("staticFilter/register",t=>y(t,{id:Io,values:Fh})),wo=m("staticFilter/toggleSelect",t=>y(t,{id:Io,value:Hs})),Eo=m("staticFilter/toggleExclude",t=>y(t,{id:Io,value:Hs})),Ql=m("staticFilter/deselectAllFilterValues",t=>y(t,Io));var zs=t=>Object.keys(t.facetSet).map(e=>{let r=t.facetValuesSelector(t.engine.state,e).map(a=>({value:a,deselect:()=>{a.state==="selected"?t.executeToggleSelect({facetId:e,selection:a}):a.state==="excluded"&&t.executeToggleExclude({facetId:e,selection:a})}}));return{facetId:e,field:t.facetSet[e].request.field,values:r}}).filter(e=>e.values.length);function Rh(t){let e=Y(t),{dispatch:r}=t;return{...e,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(Pe())},deselectBreadcrumb(a){a.deselect()}}}function bh(t){if(!Cb(t))throw V;let e=Rh(t),{dispatch:r}=t,a=()=>t.state,n=()=>{let p={engine:t,facetSet:a().facetSet,executeToggleSelect:({facetId:g,selection:S})=>{let v=ho({facetId:g,facetValue:S.value});r(rr({facetId:g,selection:S})),r(Fr({facetId:g,freezeCurrentValues:!1})),r(G(v))},executeToggleExclude:({facetId:g,selection:S})=>{let v=ho({facetId:g,facetValue:S.value});r(da({facetId:g,selection:S})),r(Fr({facetId:g,freezeCurrentValues:!1})),r(G(v))},facetValuesSelector:Rf};return zs(p)},o=()=>{let p={engine:t,facetSet:a().numericFacetSet,executeToggleSelect:g=>{r(jt(g)),r(G(So(g)))},executeToggleExclude:g=>{r(br(g)),r(G(So(g)))},facetValuesSelector:Ah};return zs(p)},i=()=>{let p={engine:t,facetSet:a().dateFacetSet,executeToggleSelect:g=>{r(Qt(g)),r(G(yo(g)))},executeToggleExclude:g=>{r(Rr(g)),r(G(yo(g)))},facetValuesSelector:Ch};return zs(p)},s=p=>{let g=Pf(a(),p);return{facetId:p,field:a().categoryFacetSet[p].request.field,path:g,deselect:()=>{r(tr(p)),r(G(Zi({categoryFacetPath:g.map(S=>S.value),categoryFacetId:p})))}}},u=()=>Object.keys(a().categoryFacetSet).map(s).filter(p=>p.path.length),c=()=>{let p=a().staticFilterSet||{};return Object.values(p).map(l)},l=p=>{let{id:g,values:S}=p,v=S.filter(F=>F.state!=="idle").map(F=>d(g,F));return{id:g,values:v}},d=(p,g)=>({value:g,deselect:()=>{let{caption:S,expression:v}=g,F=ys({staticFilterId:p,staticFilterValue:{caption:S,expression:v}});g.state==="selected"?r(wo({id:p,value:g})):g.state==="excluded"&&r(Eo({id:p,value:g})),r(G(F))}});function f(){return!![...n(),...o(),...i(),...u(),...c()].length}return{...e,get state(){return{facetBreadcrumbs:n(),categoryFacetBreadcrumbs:u(),numericFacetBreadcrumbs:o(),dateFacetBreadcrumbs:i(),staticFilterBreadcrumbs:c(),hasBreadcrumbs:f()}},deselectAll:()=>{e.deselectAll(),r(G(es()))}}}function Cb(t){return t.addReducers({configuration:K,search:X,facetSet:fa,numericFacetSet:Er,dateFacetSet:Ut,categoryFacetSet:Po}),!0}var Ws=()=>T("analytics/searchbox/submit",(t,e)=>t.logSearchboxSubmit(M(e.insightCaseContext)));function Ph(t,e){return t.q!==e.q?Ws():t.sortCriteria!==e.sortCriteria?sn():Gs(t.f,e.f)?Gs(t.cf,e.cf)?Gs(t.nf,e.nf)?Gs(t.df,e.df)?fr():wh(t.df,e.df):wh(t.nf,e.nf):Bl(t.cf,e.cf):Bl(t.f,e.f)}function Gs(t={},e={}){return JSON.stringify(t)===JSON.stringify(e)}function Ih(t){let e={};return Object.keys(t).forEach(r=>e[r]=t[r].map(a=>`${a.start}..${a.end}`)),e}function Bl(t={},e={}){let r=Object.keys(t),a=Object.keys(e),n=r.filter(d=>!a.includes(d));if(n.length){let d=n[0];return t[d].length>1?Be(d):yt({facetId:d,facetValue:t[d][0]})}let o=a.filter(d=>!r.includes(d));if(o.length){let d=o[0];return _e({facetId:d,facetValue:e[d][0]})}let i=a.find(d=>e[d].filter(f=>t[d].includes(f)));if(!i)return fr();let s=t[i],u=e[i],c=u.filter(d=>!s.includes(d));if(c.length)return _e({facetId:i,facetValue:c[0]});let l=s.filter(d=>!u.includes(d));return l.length?yt({facetId:i,facetValue:l[0]}):fr()}function wh(t={},e={}){return Bl(Ih(t),Ih(e))}var vb=Object.getOwnPropertyNames,Ab=Object.getOwnPropertySymbols,xb=Object.prototype.hasOwnProperty;function Eh(t,e){return function(a,n,o){return t(a,n,o)&&e(a,n,o)}}function Ys(t){return function(r,a,n){if(!r||!a||typeof r!="object"||typeof a!="object")return t(r,a,n);var o=n.cache,i=o.get(r),s=o.get(a);if(i&&s)return i===a&&s===r;o.set(r,a),o.set(a,r);var u=t(r,a,n);return o.delete(r),o.delete(a),u}}function qh(t){return vb(t).concat(Ab(t))}var kh=Object.hasOwn||function(t,e){return xb.call(t,e)};function vn(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var Oh="_owner",Th=Object.getOwnPropertyDescriptor,Dh=Object.keys;function Fb(t,e,r){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(!r.equals(t[a],e[a],a,a,t,e,r))return!1;return!0}function Rb(t,e){return vn(t.getTime(),e.getTime())}function Vh(t,e,r){if(t.size!==e.size)return!1;for(var a={},n=t.entries(),o=0,i,s;(i=n.next())&&!i.done;){for(var u=e.entries(),c=!1,l=0;(s=u.next())&&!s.done;){var d=i.value,f=d[0],p=d[1],g=s.value,S=g[0],v=g[1];!c&&!a[l]&&(c=r.equals(f,S,o,l,t,e,r)&&r.equals(p,v,f,S,t,e,r))&&(a[l]=!0),l++}if(!c)return!1;o++}return!0}function bb(t,e,r){var a=Dh(t),n=a.length;if(Dh(e).length!==n)return!1;for(var o;n-- >0;)if(o=a[n],o===Oh&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!kh(e,o)||!r.equals(t[o],e[o],o,o,t,e,r))return!1;return!0}function qo(t,e,r){var a=qh(t),n=a.length;if(qh(e).length!==n)return!1;for(var o,i,s;n-- >0;)if(o=a[n],o===Oh&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!kh(e,o)||!r.equals(t[o],e[o],o,o,t,e,r)||(i=Th(t,o),s=Th(e,o),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function Pb(t,e){return vn(t.valueOf(),e.valueOf())}function Ib(t,e){return t.source===e.source&&t.flags===e.flags}function Nh(t,e,r){if(t.size!==e.size)return!1;for(var a={},n=t.values(),o,i;(o=n.next())&&!o.done;){for(var s=e.values(),u=!1,c=0;(i=s.next())&&!i.done;)!u&&!a[c]&&(u=r.equals(o.value,i.value,o.value,i.value,t,e,r))&&(a[c]=!0),c++;if(!u)return!1}return!0}function wb(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var Eb="[object Arguments]",qb="[object Boolean]",kb="[object Date]",Ob="[object Map]",Tb="[object Number]",Db="[object Object]",Vb="[object RegExp]",Nb="[object Set]",Mb="[object String]",Lb=Array.isArray,Mh=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Lh=Object.assign,Qb=Object.prototype.toString.call.bind(Object.prototype.toString);function Bb(t){var e=t.areArraysEqual,r=t.areDatesEqual,a=t.areMapsEqual,n=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,i=t.areRegExpsEqual,s=t.areSetsEqual,u=t.areTypedArraysEqual;return function(l,d,f){if(l===d)return!0;if(l==null||d==null||typeof l!="object"||typeof d!="object")return l!==l&&d!==d;var p=l.constructor;if(p!==d.constructor)return!1;if(p===Object)return n(l,d,f);if(Lb(l))return e(l,d,f);if(Mh!=null&&Mh(l))return u(l,d,f);if(p===Date)return r(l,d,f);if(p===RegExp)return i(l,d,f);if(p===Map)return a(l,d,f);if(p===Set)return s(l,d,f);var g=Qb(l);return g===kb?r(l,d,f):g===Vb?i(l,d,f):g===Ob?a(l,d,f):g===Nb?s(l,d,f):g===Db?typeof l.then!="function"&&typeof d.then!="function"&&n(l,d,f):g===Eb?n(l,d,f):g===qb||g===Tb||g===Mb?o(l,d,f):!1}}function jb(t){var e=t.circular,r=t.createCustomConfig,a=t.strict,n={areArraysEqual:a?qo:Fb,areDatesEqual:Rb,areMapsEqual:a?Eh(Vh,qo):Vh,areObjectsEqual:a?qo:bb,arePrimitiveWrappersEqual:Pb,areRegExpsEqual:Ib,areSetsEqual:a?Eh(Nh,qo):Nh,areTypedArraysEqual:a?qo:wb};if(r&&(n=Lh({},n,r(n))),e){var o=Ys(n.areArraysEqual),i=Ys(n.areMapsEqual),s=Ys(n.areObjectsEqual),u=Ys(n.areSetsEqual);n=Lh({},n,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:u})}return n}function Ub(t){return function(e,r,a,n,o,i,s){return t(e,r,s)}}function _b(t){var e=t.circular,r=t.comparator,a=t.createState,n=t.equals,o=t.strict;if(a)return function(u,c){var l=a(),d=l.cache,f=d===void 0?e?new WeakMap:void 0:d,p=l.meta;return r(u,c,{cache:f,equals:n,meta:p,strict:o})};if(e)return function(u,c){return r(u,c,{cache:new WeakMap,equals:n,meta:void 0,strict:o})};var i={cache:void 0,equals:n,meta:void 0,strict:o};return function(u,c){return r(u,c,i)}}var Xz=Ht(),Zz=Ht({strict:!0}),e2=Ht({circular:!0}),t2=Ht({circular:!0,strict:!0}),r2=Ht({createInternalComparator:function(){return vn}}),a2=Ht({strict:!0,createInternalComparator:function(){return vn}}),n2=Ht({circular:!0,createInternalComparator:function(){return vn}}),o2=Ht({circular:!0,createInternalComparator:function(){return vn},strict:!0});function Ht(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,a=t.createInternalComparator,n=t.createState,o=t.strict,i=o===void 0?!1:o,s=jb(t),u=Bb(s),c=a?a(u):Ub(u);return _b({circular:r,comparator:u,createState:n,equals:c,strict:i})}function Qh(t,e,r=(a,n)=>a===n){return t.length===e.length&&t.findIndex((a,n)=>!r(e[n],a))===-1}function $b(t,e){return t.length!==e.length?!1:t.every(r=>e.findIndex(a=>jl(r,a))!==-1)}var jl=Ht({createCustomConfig:t=>({...t,areArraysEqual:$b})});function Bh(t){var e,r,a,n,o,i;return{q:Se().q,enableQuerySyntax:Se().enableQuerySyntax,aq:(r=(e=t.advancedSearchQueries)==null?void 0:e.defaultFilters.aq)!=null?r:ft().defaultFilters.aq,cq:(n=(a=t.advancedSearchQueries)==null?void 0:a.defaultFilters.cq)!=null?n:ft().defaultFilters.cq,firstResult:qt().firstResult,numberOfResults:(i=(o=t.pagination)==null?void 0:o.defaultNumberOfResults)!=null?i:qt().defaultNumberOfResults,sortCriteria:at(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:Ba(),sf:{},tab:"",af:{}}}var Hb=new ee({parameters:new R({options:{required:!0},values:$i})});function jh(t,e){let{dispatch:r}=t,a=Y(t);return xt(t,Hb,e.initialState,"buildSearchParameterManager"),r(le(e.initialState.parameters)),{...a,synchronize(n){let o=Ks(t,n);r(le(o))},get state(){return{parameters:Ul(t)}}}}function Ks(t,e){return{...Bh(t.state),...e}}function Ul(t){let e=t.state;return{...zb(e),...Wb(e),...Gb(e),...Uh(e,_h,"f"),...Uh(e,Yb,"fExcluded"),...Kb(e),...Jb(e),...Xb(e),...Zb(e)}}function zb(t){if(t.query===void 0)return{};let e=t.query.q;return e!==Se().q?{q:e}:{}}function Wb(t){var r;let e=Object.values((r=t.tabSet)!=null?r:{}).find(a=>a.isActive);return e?{tab:e.id}:{}}function Gb(t){if(t.sortCriteria===void 0)return{};let e=t.sortCriteria;return e!==at()?{sortCriteria:e}:{}}function Uh(t,e,r){if(t.facetSet===void 0)return{};let a=Object.entries(t.facetSet).filter(([n])=>{var o,i,s;return(s=(i=(o=t.facetOptions)==null?void 0:o.facets[n])==null?void 0:i.enabled)!=null?s:!0}).map(([n,{request:o}])=>{let i=e(o.currentValues);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(a).length?{[r]:a}:{}}function _h(t){return t.filter(e=>e.state==="selected").map(e=>e.value)}function Yb(t){return t.filter(e=>e.state==="excluded").map(e=>e.value)}function Kb(t){if(t.categoryFacetSet===void 0)return{};let e=Object.entries(t.categoryFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=t.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,a])=>{let o=Ye(a.request.currentValues).map(i=>i.value);return o.length?{[r]:o}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(e).length?{cf:e}:{}}function Jb(t){if(t.numericFacetSet===void 0)return{};let e=Object.entries(t.numericFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=t.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=$h(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(e).length?{nf:e}:{}}function Xb(t){if(t.dateFacetSet===void 0)return{};let e=Object.entries(t.dateFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=t.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=$h(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(e).length?{df:e}:{}}function $h(t){return t.filter(e=>e.state==="selected")}function Zb(t){var a;let e=(a=t.automaticFacetSet)==null?void 0:a.set;if(e===void 0)return{};let r=Object.entries(e).map(([n,{response:o}])=>{let i=_h(o.values);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(r).length?{af:r}:{}}function Hh(t,e){let{dispatch:r}=t,a=jh(t,e);return{...a,synchronize(n){let o=Ul(t),i=Ks(t,o),s=Ks(t,n);jl(i,s)||(a.synchronize(n),r(G(Ph(i,s))))},get state(){return a.state}}}var Ne=b(Ri(),t=>{t.addCase(ce,(e,r)=>({...e,...r.payload})).addCase(se.fulfilled,e=>{e.freezeFacetOrder=!1}).addCase(se.rejected,e=>{e.freezeFacetOrder=!1}).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOptions)!=null?n:e}).addCase(ca,(e,r)=>{e.facets[r.payload.facetId]=ja()}).addCase(la,(e,r)=>{e.facets[r.payload.facetId]=ja()}).addCase(Lt,(e,r)=>{e.facets[r.payload.facetId]=ja()}).addCase(Bt,(e,r)=>{e.facets[r.payload.facetId]=ja()}).addCase($e,(e,r)=>{e.facets[r.payload].enabled=!0}).addCase(Ce,(e,r)=>{e.facets[r.payload].enabled=!1}).addCase(le,(e,r)=>{var a,n,o,i,s;[...Object.keys((a=r.payload.f)!=null?a:{}),...Object.keys((n=r.payload.fExcluded)!=null?n:{}),...Object.keys((o=r.payload.cf)!=null?o:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((s=r.payload.df)!=null?s:{})].forEach(u=>{u in e||(e.facets[u]=ja()),e.facets[u].enabled=!0})})});function zh(t){if(!eP(t))throw V;let e=Y(t),r=()=>t.state;return{...e,sort(a){return Wa(a,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(o=>o.facetId)}}}}function eP(t){return t.addReducers({search:X,facetOptions:Ne}),!0}function Wh(t){return zh(t)}var zt=(t,e)=>{var r,a;return(a=(r=t.facetOptions.facets[e])==null?void 0:r.enabled)!=null?a:!0};function Js(t,e,r){let{facetId:a}=e;if(t[a])return;let n=!1,o={...An,...e},i=r();t[a]={options:o,isLoading:n,response:i,initialNumberOfValues:o.numberOfValues,requestId:""}}function Xs(t,e){let{facetId:r,...a}=e,n=t[r];!n||(n.options={...n.options,...a})}function Zs(t,e,r){let a=t[e];!a||(a.requestId=r,a.isLoading=!0)}function ec(t,e){let r=t[e];!r||(r.isLoading=!1)}function tc(t,e,r){let{facetId:a,response:n}=e,o=t[a];!o||o.requestId===r&&(o.isLoading=!1,o.response=n)}function ko(t,e,r){let{facetId:a}=e,n=t[a];!n||(n.requestId="",n.isLoading=!1,n.response=r(),n.options.numberOfValues=n.initialNumberOfValues,n.options.query=An.query)}function rc(t,e){Object.keys(t).forEach(r=>ko(t,{facetId:r},e))}var An={captions:{},numberOfValues:10,query:""};var Gh=async(t,e,r)=>{let a=e.categoryFacetSearchSet[t].options,n=e.categoryFacetSet[t].request,{captions:o,query:i,numberOfValues:s}=a,{field:u,delimitingCharacter:c,basePath:l,filterFacetCount:d}=n,f=tP(n),p=f.length?[f]:[],g=`*${i}*`;return{url:e.configuration.search.apiBaseUrl,accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")},basePath:l,captions:o,numberOfValues:s,query:g,field:u,delimitingCharacter:c,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await Re(e)).request}}},tP=t=>{let e=[],r=t.currentValues[0];for(;r;)e.push(r.value),r=r.children[0];return e};var Yh=async(t,e,r)=>{let{captions:a,query:n,numberOfValues:o}=e.facetSearchSet[t].options,{field:i,currentValues:s,filterFacetCount:u}=e.facetSet[t].request,c=s.filter(d=>d.state!=="idle").map(d=>d.value),l=`*${n}*`;return{url:e.configuration.search.apiBaseUrl,accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,...e.configuration.search.authenticationProviders&&{authentication:e.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:o,query:l,field:i,ignoreValues:c,filterFacetCount:u,type:"specific",...r?{}:{searchContext:(await Re(e)).request}}};var Kh=t=>async(e,{getState:r,extra:{apiClient:a,validatePayload:n}})=>{let o=r(),i;n(e,x),rP(o,e)?i=await Yh(e,o,t):i=await Gh(e,o,t);let s=await a.facetSearch(i);return{facetId:e,response:s}},Tr=B("facetSearch/executeSearch",Kh(!1)),yW=B("facetSearch/executeSearch",Kh(!0)),ac=m("facetSearch/clearResults",t=>y(t,{facetId:$})),rP=(t,e)=>t.facetSearchSet!==void 0&&t.facetSet!==void 0&&t.facetSet[e]!==void 0;function Jh(){return{}}var Xh=b(Jh(),t=>{t.addCase(Em,(e,r)=>{let a=r.payload;Js(e,a,_l)}).addCase(rs,(e,r)=>{Xs(e,r.payload)}).addCase(Tr.pending,(e,r)=>{let a=r.meta.arg;Zs(e,a,r.meta.requestId)}).addCase(Tr.rejected,(e,r)=>{let a=r.meta.arg;ec(e,a)}).addCase(Tr.fulfilled,(e,r)=>{tc(e,r.payload,r.meta.requestId)}).addCase(ac,(e,{payload:{facetId:r}})=>{ko(e,{facetId:r},_l)}).addCase(se.fulfilled,e=>{rc(e,_l)})});function _l(){return{moreValuesAvailable:!1,values:[]}}function Zh(t,e){let{field:r,state:a}=t;if(!aP(t))return r;let n=`${r}_`,o=nP(n,a);return iP(r,e),`${n}${o}`}function aP(t){let{field:e,state:r}=t;return ey(r).some(n=>n&&e in n)}function nP(t,e){let a=ey(e).map(n=>Object.keys(n||{})).reduce((n,o)=>n.concat(o),[]);return oP(a,t)+1}function ey(t){let{facetSet:e,numericFacetSet:r,dateFacetSet:a,categoryFacetSet:n}=t;return[e,r,a,n]}function oP(t,e){let r=0,n=t.map(o=>{let i=o.split(e)[1],s=parseInt(i,10);return Number.isNaN(s)?r:s}).sort().pop();return n!=null?n:r}function iP(t,e){let r=`A facet with field "${t}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;e.warn(r)}function st(t,e){let{state:r,logger:a}=t,{field:n,facetId:o}=e;return o||Zh({field:n,state:r},a)}var ty=["alphanumeric","occurrences"];var ry=new ee({field:Vt,basePath:Dm,delimitingCharacter:Vm,facetId:Dt,facetSearch:rn,filterByBasePath:Nm,filterFacetCount:Nt,injectionDepth:Mt,numberOfValues:St,sortCriteria:new A({constrainTo:ty})});function ay(t,e){if(!sP(t))throw V;let r=Y(t),{dispatch:a}=t,n=st(t,e.options),o={...Vl,...Bo("facetSearch",e.options),field:e.options.field,facetId:n},i={facetSearch:{...An,...e.options.facetSearch},...o};qe(t,ry,i,"buildCategoryFacet");let s=()=>Eu(t.state,n),u=()=>wu(t.state,n),c=()=>wt(t.state),l=()=>zt(t.state,n);return a(ca(o)),{...r,toggleSelect(d){let f=i.numberOfValues;a(ua({facetId:n,selection:d,retrieveCount:f})),a(ce())},deselectAll(){a(tr(n)),a(ce())},sortBy(d){a(Co({facetId:n,criterion:d})),a(ce())},isSortedBy(d){return s().sortCriteria===d},showMoreValues(){var S;let{numberOfValues:d}=i,{activeValue:f,valuesAsTrees:p}=this.state,g=((S=f==null?void 0:f.children.length)!=null?S:p.length)+d;a(en({facetId:n,numberOfValues:g})),a(ce())},showLessValues(){let{numberOfValues:d}=i;a(en({facetId:n,numberOfValues:d})),a(ce())},enable(){a($e(n))},disable(){a(Ce(n))},get state(){var J,_,ge,me;let d=s(),f=u(),p=c(),g=l(),S=(J=f==null?void 0:f.values)!=null?J:[],v=(_=S.some(O=>O.children.length>0))!=null?_:!1,{parents:F,values:w}=bf(f==null?void 0:f.values),D=Ye(S),N=D.length?D[D.length-1]:void 0,Z=!!N,re=(me=(ge=N==null?void 0:N.moreValuesAvailable)!=null?ge:f==null?void 0:f.moreValuesAvailable)!=null?me:!1,ae=N?N.children.length>i.numberOfValues:S.length>i.numberOfValues;return{facetId:n,parents:F,selectedValueAncestry:D,values:w,isHierarchical:v,valuesAsTrees:S,activeValue:N,isLoading:p,hasActiveValues:Z,canShowMoreValues:re,canShowLessValues:ae,sortCriteria:d.sortCriteria,enabled:g}}}}function sP(t){return t.addReducers({categoryFacetSet:Po,categoryFacetSearchSet:Xh,facetOptions:Ne,configuration:K,search:X}),!0}function ny(t,e){let r=ay(t,e),{dispatch:a}=t,n=()=>r.state.facetId,i=(()=>({updateText(){},showMoreResults(){},search(){},clear(){},updateCaptions(){},select(){},singleSelect(){},get state(){return{values:[],isLoading:!1,moreValuesAvailable:!1,query:""}}}))(),{state:s,...u}=i;return{...r,facetSearch:u,toggleSelect(c){r.toggleSelect(c);let l=cP(n(),c);a(G(l))},deselectAll(){r.deselectAll(),a(G(Be(n())))},sortBy(c){r.sortBy(c),a(G(Tt({facetId:n(),sortCriterion:c})))},isSortedBy(c){return r.isSortedBy(c)},showMoreValues(){r.showMoreValues(),a(vr(Ja(n())))},showLessValues(){r.showLessValues(),a(vr(Xa(n())))},get state(){return{...r.state,facetSearch:i.state}}}}function cP(t,e){let r={facetId:t,facetValue:e.value};return e.state==="selected"?yt(r):_e(r)}function oy(){return{}}var nc=b(oy(),t=>{t.addCase(km,(e,r)=>{let a=r.payload;Js(e,a,$l)}).addCase(rs,(e,r)=>{Xs(e,r.payload)}).addCase(Tr.pending,(e,r)=>{let a=r.meta.arg;Zs(e,a,r.meta.requestId)}).addCase(Tr.rejected,(e,r)=>{let a=r.meta.arg;ec(e,a)}).addCase(Tr.fulfilled,(e,r)=>{tc(e,r.payload,r.meta.requestId)}).addCase(ac,(e,{payload:r})=>{ko(e,r,$l)}).addCase(se.fulfilled,e=>{rc(e,$l)})});function $l(){return{moreValuesAvailable:!1,values:[]}}var uP=t=>t.state==="selected",iy=(t,e)=>{let r={facetId:t,facetValue:e.value};return uP(e)?yt(r):_e(r)};var sy={facetId:$,selection:new R({values:sa})},cy=B("facet/executeToggleSelect",({facetId:t,selection:e},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:t,selection:e},sy),a(rr({facetId:t,selection:e})),a(ce())}),uy=B("facet/executeToggleExclude",({facetId:t,selection:e},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:t,selection:e},sy),a(da({facetId:t,selection:e})),a(ce())});var ly=t=>t.state==="selected",dy=t=>t.state==="excluded";var xn=["allValues","atLeastOneValue"];var oc=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var py=new ee({facetId:Dt,field:Vt,filterFacetCount:Nt,injectionDepth:Mt,numberOfValues:St,sortCriteria:new A({constrainTo:oc}),resultsMustMatch:new A({constrainTo:xn}),facetSearch:rn});function fy(t,e,r=py){if(!fP(t))throw V;let{dispatch:a}=t,n=Y(t),o=st(t,e.options),i={...Ml,...Bo("facetSearch",e.options),field:e.options.field,facetId:o},s={facetSearch:{...An,...e.options.facetSearch},...i};qe(t,r,s,"buildFacet");let u=()=>Ff(t.state,o),c=()=>Iu(t.state,o),l=()=>wt(t.state),d=()=>zt(t.state,o),f=()=>{let{currentValues:g}=u();return g.filter(S=>S.state!=="idle").length},p=()=>{let{currentValues:g}=u(),S=s.numberOfValues,v=!!g.find(F=>F.state==="idle");return S<g.length&&v};return a(la(i)),{...n,toggleSelect:g=>a(cy({facetId:s.facetId,selection:g})),toggleExclude:g=>a(uy({facetId:s.facetId,selection:g})),toggleSingleSelect:function(g){g.state==="idle"&&a(be(o)),this.toggleSelect(g)},toggleSingleExclude:function(g){g.state==="idle"&&a(be(o)),this.toggleExclude(g)},isValueSelected:ly,isValueExcluded:dy,deselectAll(){a(be(o)),a(ce())},sortBy(g){a(Ao({facetId:o,criterion:g})),a(ce())},isSortedBy(g){return this.state.sortCriterion===g},showMoreValues(){let g=u().numberOfValues,S=s.numberOfValues,v=S-g%S,F=g+v;a(an({facetId:o,numberOfValues:F})),a(nn({facetId:o,isFieldExpanded:!0})),a(ce())},showLessValues(){let g=s.numberOfValues,S=Math.max(g,f());a(an({facetId:o,numberOfValues:S})),a(nn({facetId:o,isFieldExpanded:!1})),a(ce())},enable(){a($e(o))},disable(){a(Ce(o))},get state(){let g=u(),S=c(),v=l(),F=d(),w;typeof g.sortCriteria=="object"?w=g.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":w=g.sortCriteria;let D=S?S.values:[],N=D.some(ae=>ae.state!=="idle"),Z=S?S.moreValuesAvailable:!1,re=g.resultsMustMatch;return{facetId:o,values:D,sortCriterion:w,resultsMustMatch:re,isLoading:v,hasActiveValues:N,canShowMoreValues:Z,canShowLessValues:p(),enabled:F}}}}function fP(t){return t.addReducers({facetSet:fa,facetOptions:Ne,configuration:K,facetSearchSet:nc}),!0}var gy=new ee({facetId:Dt,field:Vt,filterFacetCount:Nt,injectionDepth:Mt,numberOfValues:St,sortCriteria:new A({constrainTo:oc}),resultsMustMatch:new A({constrainTo:xn}),facetSearch:rn,allowedValues:os,customSort:is});function my(t,e){if(!gP(t))throw V;let{dispatch:r}=t,a=fy(t,{...e,options:{...e.options,...e.options.allowedValues&&{allowedValues:{type:"simple",values:e.options.allowedValues}}}},gy),n=()=>a.state.facetId,i=(()=>({updateText(){},showMoreResults(){},search(){},clear(){},updateCaptions(){},select(){},exclude(){},singleSelect(){},singleExclude(){},get state(){return{values:[],isLoading:!1,moreValuesAvailable:!1,query:""}}}))(),{state:s,...u}=i;return{...a,facetSearch:u,toggleSelect(c){a.toggleSelect(c),r(G(iy(n(),c)))},deselectAll(){a.deselectAll(),r(G(Be(n())))},sortBy(c){a.sortBy(c),r(G(Tt({facetId:n(),sortCriterion:c})))},isSortedBy(c){return this.state.sortCriterion===c},showMoreValues(){a.showMoreValues(),r(vr(Ja(n())))},showLessValues(){a.showLessValues(),r(vr(Xa(n())))},get state(){return{...a.state,facetSearch:i.state}}}}function gP(t){return t.addReducers({facetSet:fa,configuration:K,facetSearchSet:nc,search:X}),!0}var ic=t=>t.state==="selected",hy=t=>t.state==="excluded";var sc=(t,e)=>{let r=`${e.start}..${e.end}`,a={facetId:t,facetValue:r};return ic(e)?yt(a):_e(a)};var cc=m("rangeFacet/executeToggleSelect",t=>y(t,ia(t.selection))),uc=m("rangeFacet/executeToggleExclude",t=>y(t,ia(t.selection)));var yy={facetId:$,selection:new R({values:oa})},Sy=B("dateFacet/executeToggleSelect",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,yy),e(Qt(t)),e(cc(t)),e(ce())}),Cy=B("dateFacet/executeToggleExclude",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,yy),e(Rr(t)),e(uc(t)),e(ce())});function lc(t,e){let{facetId:r,getRequest:a}=e,n=Y(t),o=t.dispatch,i=()=>zt(t.state,r);return{...n,isValueSelected:ic,isValueExcluded:hy,deselectAll(){o(be(r)),o(ce())},sortBy(s){o(on({facetId:r,criterion:s})),o(ce())},isSortedBy(s){return this.state.sortCriterion===s},enable(){o($e(r))},disable(){o(Ce(r))},get state(){let s=a(),u=Xt(t.state,r),c=s.sortCriteria,l=s.resultsMustMatch,d=u?u.values:[],f=wt(t.state),p=i(),g=d.some(S=>S.state!=="idle");return{facetId:r,values:d,sortCriterion:c,resultsMustMatch:l,hasActiveValues:g,isLoading:f,enabled:p}}}}function dc(t,e){if(!t.generateAutomaticRanges&&t.currentValues===void 0){let r=`currentValues should be specified for ${e} when generateAutomaticRanges is false.`;throw new Error(r)}}var pc=["idle","selected","excluded"];var fc=["ascending","descending"],gc=["even","equiprobable"];var mP={start:new A,end:new A,endInclusive:new j,state:new A({constrainTo:pc})},hP=new ee({facetId:Dt,field:Vt,generateAutomaticRanges:ns,filterFacetCount:Nt,injectionDepth:Mt,numberOfValues:St,currentValues:new U({each:new R({values:mP})}),sortCriteria:new A({constrainTo:fc}),rangeAlgorithm:new A({constrainTo:gc})});function mc(t,e){qe(t,hP,e,"buildDateFacet"),ss(e)}function vy(t,e){if(!yP(t))throw V;dc(e.options,"buildDateFacet");let r=t.dispatch,a=st(t,e.options),n={currentValues:[],...e.options,facetId:a};mc(t,n),r(Lt(n));let o=lc(t,{facetId:a,getRequest:()=>t.state.dateFacetSet[a].request});return{...o,toggleSelect:i=>r(Sy({facetId:a,selection:i})),toggleSingleSelect:function(i){i.state==="idle"&&r(be(a)),this.toggleSelect(i)},toggleExclude:i=>r(Cy({facetId:a,selection:i})),toggleSingleExclude:function(i){i.state==="idle"&&r(be(a)),this.toggleExclude(i)},get state(){return o.state}}}function yP(t){return t.addReducers({configuration:K,search:X,dateFacetSet:Ut,facetOptions:Ne}),!0}function Ay(t,e){let r=vy(t,e),a=t.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(G(Be(n())))},sortBy(o){r.sortBy(o),a(G(Tt({facetId:n(),sortCriterion:o})))},toggleSelect:o=>{r.toggleSelect(o),a(G(sc(n(),o)))},get state(){return r.state}}}var xy={facetId:$,selection:new R({values:na})},Fy=B("numericFacet/executeToggleSelect",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,xy),e(jt(t)),e(cc(t)),e(ce())}),x4=B("numericFacet/executeToggleExclude",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,xy),e(br(t)),e(uc(t)),e(ce())});var SP={start:new k,end:new k,endInclusive:new j,state:new A({constrainTo:pc})},CP=new ee({facetId:Dt,field:Vt,generateAutomaticRanges:ns,filterFacetCount:Nt,injectionDepth:Mt,numberOfValues:St,currentValues:new U({each:new R({values:SP})}),sortCriteria:new A({constrainTo:fc}),resultsMustMatch:new A({constrainTo:xn}),rangeAlgorithm:new A({constrainTo:gc})});function hc(t,e){qe(t,CP,e,"buildNumericFacet"),ls(e)}function yc(t){return{endInclusive:!1,state:"idle",...t}}function Ry(t,e){if(!vP(t))throw V;dc(e.options,"buildNumericFacet");let r=t.dispatch,a=st(t,e.options),n={currentValues:[],...e.options,facetId:a};hc(t,n),r(Bt(n));let o=lc(t,{facetId:a,getRequest:()=>t.state.numericFacetSet[a].request});return{...o,toggleSelect:i=>r(Fy({facetId:a,selection:i})),toggleSingleSelect(i){i.state==="idle"&&r(be(a)),this.toggleSelect(i)},get state(){return o.state}}}function vP(t){return t.addReducers({numericFacetSet:Er,facetOptions:Ne,configuration:K,search:X}),!0}function by(t,e){let r=Ry(t,e),a=t.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(G(Be(n())))},sortBy(o){r.sortBy(o),a(G(Tt({facetId:n(),sortCriterion:o})))},toggleSelect:o=>{r.toggleSelect(o),a(G(sc(n(),o)))},get state(){return{...r.state}}}}function Py(t,e){var u;if(!AP(t))throw V;let r=Y(t),{dispatch:a}=t,n=()=>t.state,o=st(t,e.options),i={...e.options,currentValues:((u=e.initialState)==null?void 0:u.range)?[{...e.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};hc(t,i),a(Bt(i));let s=()=>zt(t.state,o);return{...r,clear:()=>{a(nr({facetId:o,values:[]})),a(ce())},setRange:c=>{let l={...c,state:"selected",numberOfResults:0,endInclusive:!0},d=nr({facetId:o,values:[l]});return d.error?!1:(a(d),a(ce()),!0)},enable(){a($e(o))},disable(){a(Ce(o))},get state(){let c=wt(n()),l=s(),d=xh(n(),o),f=d.length?d[0]:void 0;return{facetId:o,isLoading:c,range:f,enabled:l}}}}function AP(t){return t.addReducers({numericFacetSet:Er,facetOptions:Ne,configuration:K,search:X}),!0}function Iy(t,e){let r=Py(t,e),{dispatch:a}=t,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(G(Be(n())))},setRange:o=>{let i=r.setRange(o);return i&&a(G(_e({facetId:n(),facetValue:`${o.start}..${o.end}`}))),i},get state(){return{...r.state}}}}function wy(t,e){var u;if(!xP(t))throw V;let r=Y(t),{dispatch:a}=t,n=()=>t.state,o=st(t,e.options),i={...e.options,currentValues:((u=e.initialState)==null?void 0:u.range)?[{...e.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};mc(t,i),a(Lt(i));let s=()=>zt(t.state,o);return{...r,clear:()=>{a(ar({facetId:o,values:[]})),a(ce())},setRange:c=>{let l={...c,state:"selected",numberOfResults:0,endInclusive:!0},d=ar({facetId:o,values:[l]});return d.error?!1:(a(d),a(ce()),!0)},enable(){a($e(o))},disable(){a(Ce(o))},get state(){let c=wt(n()),l=s(),d=Sh(n(),o),f=d.length?d[0]:void 0;return{facetId:o,isLoading:c,range:f,enabled:l}}}}function xP(t){return t.addReducers({dateFacetSet:Ut,facetOptions:Ne,configuration:K,search:X}),!0}function Ey(t,e){if(!FP(t))throw V;let r=wy(t,e),{dispatch:a}=t,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(G(Be(n())))},setRange:o=>{let i=r.setRange(o);return i&&a(G(_e({facetId:n(),facetValue:`${o.start}..${o.end}`}))),i},get state(){return{...r.state}}}}function FP(t){return t.addReducers({dateFacetSet:Ut,configuration:K,search:X}),!0}var RP=new ee({numberOfPages:new k({default:5,min:0})}),bP=new ee({page:new k({min:1})});function qy(t,e={}){if(!PP(t))throw V;let r=Y(t),{dispatch:a}=t,n=qe(t,RP,e.options,"buildPager"),i=xt(t,bP,e.initialState,"buildPager").page;i&&a(Jn(i));let s=()=>Ir(t.state),u=()=>{let{numberOfPages:l}=n;return Bm(t.state,l)},c=()=>wl(t.state);return{...r,get state(){let l=s(),d=c(),f=l>Hr&&d>0,p=l<d;return{currentPage:l,currentPages:u(),maxPage:d,hasPreviousPage:f,hasNextPage:p}},selectPage(l){a(ht(l))},nextPage(){a(Xn())},previousPage(){a(Zn())},isCurrentPage(l){return l===this.state.currentPage}}}function PP(t){return t.addReducers({configuration:K,pagination:pa}),!0}function ky(t,e={}){let{dispatch:r}=t,a=qy(t,e);return{...a,get state(){return a.state},selectPage(n){a.selectPage(n),r(Ha(gs()))},nextPage(){a.nextPage(),r(Ha(ms()))},previousPage(){a.previousPage(),r(Ha(hs()))}}}var Oy=t=>T("insight/caseAttach",(e,r)=>{De(t);let a=M(r.insightCaseContext);return e.logCaseAttach(Fe(t,r),ke(t),a)})(),Ty=t=>T("insight/caseDetach",(e,r)=>e.logCaseDetach(t,M(r.insightCaseContext)))();var Sc=(t,e)=>ma(t.raw[e])?String(t.raw[e]):void 0,Hl=(t,e)=>{var r,a;return{articleLanguage:Sc(t,"sflanguage"),articleVersionNumber:Sc(t,"sflanguage"),articlePublishStatus:Sc(t,"articlePublishStatus"),caseId:e,knowledgeArticleId:Sc(t,"knowledgeArticleId"),permanentId:(r=t.raw)==null?void 0:r.permanentid,uriHash:(a=t.raw)==null?void 0:a.urihash,resultUrl:t.clickUri,source:t.raw.source,title:t.title}};function Dy(t,e){if(!IP(t))throw V;let{dispatch:r}=t,a=()=>t.state.attachedResults,n=Y(t),{result:o,caseId:i}=e.options,s=()=>z(i)||z(o.raw.permanentid)&&z(o.raw.urihash)?!1:t.state.attachedResults.results.some(u=>{let c=i===u.caseId,l=!z(u.permanentId)&&u.permanentId===o.raw.permanentid,d=!z(u.uriHash)&&u.uriHash===o.raw.urihash;return c&&(l||d)});return{...n,get state(){return a()},isAttached(){return s()},attach(){r(Ns({result:Hl(o,i)})),r(Oy(o))},detach(){r(Ms({result:Hl(o,i)})),r(Ty(o.raw.urihash))}}}function IP(t){return t.addReducers({configuration:K,attachedResults:Ls}),!0}function Fn(t){if(!wP(t))throw V;let e=Y(t),r=()=>t.state;return{...e,get state(){let a=r();return{hasError:a.search.error!==null,isLoading:a.search.isLoading,hasResults:!!a.search.results.length,firstSearchExecuted:_i(a)}}}}function wP(t){return t.addReducers({search:X}),!0}function Vy(t){if(!EP(t))throw V;let e=Y(t),r=Fn(t),a=()=>t.state,n=()=>{let o=a().search.duration/1e3;return Math.round((o+Number.EPSILON)*100)/100};return{...e,get state(){return{...r.state,durationInMilliseconds:a().search.duration,durationInSeconds:n(),firstResult:a().pagination.firstResult+1,hasDuration:a().search.duration!==0,hasQuery:a().search.queryExecuted!=="",lastResult:a().pagination.firstResult+a().search.results.length,query:a().search.queryExecuted,total:a().pagination.totalCountFiltered}}}}function EP(t){return t.addReducers({search:X,pagination:pa}),!0}function Ny(t){return Vy(t)}async function My(t,e){var c;let{platformUrl:r,accessToken:a,organizationId:n,analytics:o}=t.configuration,{insightId:i}=t.insightConfiguration,s=((c=t.query)==null?void 0:c.q)||"";return{url:jc({url:r,accessToken:a,organizationId:n,insightId:i}),accessToken:a,organizationId:n,enableNavigation:!1,...o.enabled&&{visitorId:await Qe(t.configuration.analytics)},q:s,...e,requestedOutputSize:e.requestedOutputSize||0}}var Ly=t=>fe("analytics/resultPreview/open",(e,r)=>{De(t);let a=Fe(t,r),n=ke(t);return e.makeDocumentQuickview(a,n)});function Qy(t,e,r,a,n){if(!qP(t))throw V;let{dispatch:o}=t,i=()=>t.state,s=Y(t),{result:u,maximumPreviewSize:c}=e.options,l=()=>{let{resultsWithPreview:f,position:p}=i().resultPreview;return f[p]},d=f=>{o(oo({uniqueId:f,requestedOutputSize:c,buildResultPreviewRequest:r,path:a})),e.options.onlyContentURL||o(Ga({uniqueId:f,requestedOutputSize:c})),n&&n()};return{...s,fetchResultContent(){d(u.uniqueId)},next(){o(ao()),d(l())},previous(){o(no()),d(l())},get state(){let f=i(),p=u.hasHtmlVersion,g=f.resultPreview,S=u.uniqueId===g.uniqueId?g.content:"",v=g.isLoading,F=g.contentURL,w=l();return{content:S,resultHasPreview:p,isLoading:v,contentURL:F,currentResultUniqueId:w}}}}function qP(t){return t.addReducers({configuration:K,resultPreview:Jr}),!0}function By(t,e){if(!kP(t))throw V;let r=()=>{t.dispatch(Ly(e.options.result))},a="/quickview",n={options:{...e.options,onlyContentURL:!0}};return Qy(t,n,(o,i)=>My(o,i),a,r)}function kP(t){return t.addReducers({configuration:K,resultPreview:Jr,insightInterface:mr}),!0}var OP=new ee({fieldsToInclude:new U({required:!1,each:new A({required:!0,emptyAllowed:!1})})});function Cc(t,e){if(!TP(t))throw V;let r=Y(t),a=Fn(t),{dispatch:n}=t,o=()=>t.state,i=qe(t,OP,e==null?void 0:e.options,"buildCoreResultList");i.fieldsToInclude&&n(kr(i.fieldsToInclude));let s=()=>t.state.search.results.length<t.state.search.response.totalCountFiltered,u=0,c=0,l=5,d=200,f=!1;return{...r,get state(){let g=o();return{...a.state,results:g.search.results,moreResultsAvailable:s(),searchResponseId:g.search.searchResponseId}},fetchMoreResults:()=>{if(t.state.search.isLoading)return;if(!s()){t.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-u<d){if(c++,c>=l){u=Date.now(),!f&&t.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${l} times, with little delay. Please verify the conditions under which the function is called.`),f=!0;return}}else c=0;f=!1,(e==null?void 0:e.fetchMoreResultsActionCreator)&&n(e==null?void 0:e.fetchMoreResultsActionCreator()).then(()=>u=Date.now())}}}function TP(t){return t.addReducers({search:X,configuration:K,fields:dn}),!0}function jy(t,e){return Cc(t,{...e,fetchMoreResultsActionCreator:za})}var DP=t=>T("analytics/folding/showMore",(e,r)=>(De(t),e.logShowMoreFoldedResults(Fe(t,r),ke(t),M(r.insightCaseContext)))),VP=()=>T("analytics/folding/showLess",(t,e)=>t.logShowLessFoldedResults(M(e.insightCaseContext))),Uy={logShowMoreFoldedResults:DP,logShowLessFoldedResults:VP};var u8=m("folding/register",t=>y(t,Ro)),_y=B("folding/loadCollection",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:a}})=>{let n=e(),o=Pg(n,t),s=(await zr(a,n,o,{origin:"foldingCollection"})).response;return oe(s)?r(s.error):{collectionId:t,results:s.success.results,rootResult:n.folding.collections[t].result}});var Rn=b(Se(),t=>t.addCase(Xe,(e,r)=>({...e,...r.payload})).addCase(Je,(e,r)=>{e.q=r.payload}).addCase(ta,(e,r)=>{e.q=r.payload.expression}).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.query)!=null?n:e}).addCase(le,(e,r)=>{var a,n;e.q=(a=r.payload.q)!=null?a:e.q,e.enableQuerySyntax=(n=r.payload.enableQuerySyntax)!=null?n:e.enableQuerySyntax}));var NP=new ee(Ro);function $y(t,e,r){var s;if(!MP(t))throw V;let a=Cc(t,e),{dispatch:n}=t,o=()=>t.state,i=((s=e.options)==null?void 0:s.folding)?qe(t,NP,e.options.folding,"buildFoldedResultList"):{};return n(qr({...i})),{...a,loadCollection:u=>{n(e.loadCollectionActionCreator(u.result.raw[t.state.folding.fields.collection])),n(r.logShowMoreFoldedResults(u.result))},logShowMoreFoldedResults:u=>{n(r.logShowMoreFoldedResults(u))},logShowLessFoldedResults:()=>{n(r.logShowLessFoldedResults())},findResultById(u){return zl(this.state.results,c=>c.result.uniqueId===u.result.uniqueId)},findResultByCollection(u){return zl(this.state.results,c=>c.result.raw.foldingcollection===u.result.raw.foldingcollection)},get state(){let u=o();return{...a.state,results:a.state.results.map(c=>{let l=c.raw[u.folding.fields.collection];return!l||!u.folding.collections[l]?{result:c,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:u.folding.collections[l]})}}}}function MP(t){return t.addReducers({search:X,configuration:Wi,folding:js,query:Rn}),!0}function zl(t,e){for(let r=0;r<t.length;r++){let a=t[r];if(e(a))return a;if(a.children.length){let n=zl(a.children,e);if(n)return n}}return null}function Hy(t,e={}){let r=$y(t,{...e,loadCollectionActionCreator:_y,fetchMoreResultsActionCreator:za},Uy);return{...r,get state(){return r.state}}}var zy=t=>T("analytics/insight/result/open",(e,r)=>{De(t);let a=M(r.insightCaseContext);return e.logDocumentOpen(Fe(t,r),ke(t),a)});function Dr(t,e,r){if(!LP(t))throw V;let a=1e3,n={selectionDelay:a,debounceWait:a,...e.options},o;return{select:Gi(r,n.debounceWait,{isImmediate:!0}),beginDelayedSelect(){o=setTimeout(r,n.selectionDelay)},cancelPendingSelect(){o&&clearTimeout(o)}}}function LP(t){return t.addReducers({configuration:K}),!0}function Wy(t,e){let r=!1,a=()=>{r||(r=!0,t.dispatch(zy(e.options.result)))};return Dr(t,e,()=>{a(),t.dispatch(_t(e.options.result))})}var Gy=()=>fe("analytics/pager/resize",(t,e)=>{var r;return t.makePagerResize({currentResultsPerPage:((r=e.pagination)==null?void 0:r.numberOfResults)||qt().numberOfResults})});var QP=new ee({numberOfResults:new k({min:0})});function Yy(t,e={}){if(!BP(t))throw V;let r=Y(t),{dispatch:a}=t,n=()=>t.state,i=xt(t,QP,e.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&a(Yn(i)),{...r,get state(){return{numberOfResults:n().pagination.numberOfResults}},set(s){a(Kn(s))},isSetTo(s){return s===this.state.numberOfResults}}}function BP(t){return t.addReducers({pagination:pa,configuration:K}),!0}function Ky(t,e={}){let r=Yy(t,e),{dispatch:a}=t;return{...r,get state(){return{...r.state}},set(n){r.set(n),a(G(Gy()))}}}var Jy=t=>fe("analytics/querySuggest",(e,r)=>{let a=jP(r,t);return e.makeOmniboxAnalytics(a)});function jP(t,e){let{id:r,suggestion:a}=e,n=t.querySuggest&&t.querySuggest[r];if(!n)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let o=n.completions.map(c=>c.expression),i=n.partialQueries.length-1,s=n.partialQueries[i]||"",u=n.responseId;return{suggestionRanking:o.indexOf(a),partialQuery:s,partialQueries:n.partialQueries,suggestions:o,querySuggestResponseId:u}}var Xy=()=>({});var Wl=b(Xy(),t=>t.addCase(go,(e,r)=>{let a=r.payload.id;a in e||(e[a]=UP(r.payload))}).addCase(Fm,(e,r)=>{delete e[r.payload.id]}).addCase(mo.pending,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.currentRequestId=r.meta.requestId,a.isLoading=!0)}).addCase(mo.fulfilled,(e,r)=>{let a=e[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{q:n}=r.payload;n&&a.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions,a.isLoading=!1,a.error=null}).addCase(mo.rejected,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.error=r.payload||null,a.isLoading=!1)}).addCase(ra,(e,r)=>{let a=e[r.payload.id];!a||(a.responseId="",a.completions=[],a.partialQueries=[])}));function UP(t){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...t}}var Zy=()=>fe("analytics/searchbox/submit",t=>t.makeSearchboxSubmit());var eS={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},Gl={open:new A,close:new A},_P={id:x,numberOfSuggestions:new k({min:0}),enableQuerySyntax:new j,highlightOptions:new R({values:{notMatchDelimiters:new R({values:Gl}),exactMatchDelimiters:new R({values:Gl}),correctionDelimiters:new R({values:Gl})}}),clearFilters:new j},tS=new ee(_P);function rS(t,e){var c,l;if(!HP(t))throw V;let r=Y(t),{dispatch:a}=t,n=()=>t.state,o=((c=e.options)==null?void 0:c.id)||Ld("search_box"),i={id:o,highlightOptions:{...(l=e.options)==null?void 0:l.highlightOptions},...eS,...e.options};qe(t,tS,i,"buildSearchBox"),a(aa({id:o,query:t.state.query.q})),i.numberOfSuggestions&&a(go({id:o,count:i.numberOfSuggestions}));let s=()=>t.state.querySet[i.id],u=async d=>{let{enableQuerySyntax:f,clearFilters:p}=i;a(Vg({q:s(),enableQuerySyntax:f,clearFilters:p})),e.isNextAnalyticsReady?a(e.executeSearchActionCreator(d)):a(e.executeSearchActionCreator(d.legacy))};return{...r,updateText(d){a(xr({id:o,query:d})),this.showSuggestions()},clear(){a(xr({id:o,query:""})),a(ra({id:o}))},showSuggestions(){i.numberOfSuggestions&&a(e.fetchQuerySuggestionsActionCreator({id:o}))},selectSuggestion(d){a(ta({id:o,expression:d})),u({legacy:Jy({id:o,suggestion:d}),next:{actionCause:mt.omniboxAnalytics,getEventExtraPayload:f=>new nt(()=>f).getOmniboxAnalyticsMetadata(o,d)}}).then(()=>{a(ra({id:o}))})},submit(d=Zy()){u({legacy:d}),a(ra({id:o}))},get state(){let d=n(),f=d.querySuggest[i.id],p=$P(f,i.highlightOptions),g=f?f.isLoading:!1;return{value:s(),suggestions:p,isLoading:d.search.isLoading,isLoadingSuggestions:g}}}}function $P(t,e){return t?t.completions.map(r=>({highlightedValue:wc(r.highlighted,e),rawValue:r.expression})):[]}function HP(t){return t.addReducers({query:Rn,querySuggest:Wl,configuration:K,querySet:Ka,search:X}),!0}function aS(t,e={}){let r=rS(t,{...e,executeSearchActionCreator:G,fetchQuerySuggestionsActionCreator:Di,isNextAnalyticsReady:!1});return{...r,submit(){r.submit(Ws())},get state(){return r.state}}}function nS(t){return Fn(t)}var oS={by:new ut({enum:mi,required:!0})},Oo=m("sortCriteria/register",t=>iS(t)),To=m("sortCriteria/update",t=>iS(t)),iS=t=>ha(t)?(t.forEach(e=>y(e,oS)),{payload:t}):y(t,oS);var Yl=b(at(),t=>{t.addCase(Oo,(e,r)=>Et(r.payload)).addCase(To,(e,r)=>Et(r.payload)).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.sortCriteria)!=null?n:e}).addCase(le,(e,r)=>{var a;return(a=r.payload.sortCriteria)!=null?a:e})});function zP(t,e){if(!e)return;let r=new ee({criterion:new U({each:_f})}),a=WP(e),n={...e,criterion:a};xt(t,r,n,"buildSort")}function WP(t){return t.criterion?ha(t.criterion)?t.criterion:[t.criterion]:[]}function sS(t,e){var i;if(!GP(t))throw V;let r=Y(t),{dispatch:a}=t,n=()=>t.state;zP(t,e.initialState);let o=(i=e.initialState)==null?void 0:i.criterion;return o&&a(Oo(o)),{...r,sortBy(s){a(To(s)),a(ht(1))},isSortedBy(s){return this.state.sortCriteria===Et(s)},get state(){return{sortCriteria:n().sortCriteria}}}}function GP(t){return t.addReducers({configuration:K,sortCriteria:Yl}),!0}function cS(t,e={}){let{dispatch:r}=t,a=sS(t,e),n=()=>r(G(sn()));return{...a,get state(){return a.state},sortBy(o){a.sortBy(o),n()}}}var Kl=b(Ei(),t=>{t.addCase(uo,(e,r)=>{let a=r.payload,{id:n}=a;n in e||(e[n]={...a,isActive:!1})}).addCase(Ot,(e,r)=>{let a=r.payload;uS(e,a)}).addCase(le,(e,r)=>{let a=r.payload.tab||"";uS(e,a)}).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.tabSet)!=null?n:e})});function uS(t,e){e in t&&Object.keys(t).forEach(a=>{t[a].isActive=a===e})}var YP=new ee({expression:ie,id:x}),KP=new ee({isActive:new j});function lS(t,e){if(XP(e.options.id),!JP(t))throw V;let r=Y(t),{dispatch:a}=t;qe(t,YP,e.options,"buildTab");let n=xt(t,KP,e.initialState,"buildTab"),{id:o,expression:i}=e.options;return a(uo({id:o,expression:i})),n.isActive&&a(Ot(o)),{...r,select(){a(Ot(o))},get state(){var u;return{isActive:(u=t.state.tabSet[o])==null?void 0:u.isActive}}}}function JP(t){return t.addReducers({configuration:K,tabSet:Kl}),!0}function XP(t){let e=zi().analytics.originLevel2;if(t===e)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${e}". Please specify a different value.`)}function dS(t,e){let{dispatch:r}=t,a=lS(t,e),n=()=>r(G(fr()));return{...a,get state(){return a.state},select(){a.select(),n()}}}function pS(t,e){if(!ZP(t))throw V;let r=f=>{var p,g;return(g=(p=t.state.facetOptions.facets[f])==null?void 0:p.enabled)!=null?g:!1},a=f=>{var p,g,S,v,F,w,D,N,Z,re,ae,J,_,ge,me,O;return(O=(me=(ae=(D=(S=(g=(p=t.state.facetSet)==null?void 0:p[f])==null?void 0:g.request)==null?void 0:S.currentValues)!=null?D:(w=(F=(v=t.state.categoryFacetSet)==null?void 0:v[f])==null?void 0:F.request)==null?void 0:w.currentValues)!=null?ae:(re=(Z=(N=t.state.numericFacetSet)==null?void 0:N[f])==null?void 0:Z.request)==null?void 0:re.currentValues)!=null?me:(ge=(_=(J=t.state.dateFacetSet)==null?void 0:J[f])==null?void 0:_.request)==null?void 0:ge.currentValues)!=null?O:null},n=f=>f in t.state.facetOptions.facets,o=()=>ya({isFacetRegistered:n(e.facetId),parentFacets:e.conditions.map(({parentFacetId:f})=>n(f)?{enabled:r(f),values:a(f)}:null)}),i=()=>{let f=o();return f===l?!1:(l=f,!0)},s=()=>e.conditions.some(f=>{if(!r(f.parentFacetId))return!1;let p=a(f.parentFacetId);return p===null?!1:f.condition(p)}),u=()=>{t.state.facetSet&&Object.entries(t.state.facetSet).forEach(([f,p])=>p.request.freezeCurrentValues&&t.dispatch(Fr({facetId:f,freezeCurrentValues:!1})))},c=()=>{if(!n(e.facetId))return;let f=r(e.facetId),p=s();f!==p&&(t.dispatch(p?$e(e.facetId):Ce(e.facetId)),u())};if(!e.conditions.length)return{stopWatching(){}};let l=o(),d=t.subscribe(()=>{i()&&c()});return c(),{stopWatching(){d()}}}function ZP(t){return t.addReducers({facetOptions:Ne}),!0}function fS(t,e){return pS(t,e)}function gS(t){if(!eI(t))throw V;let e=Y(t),{dispatch:r}=t,a=()=>t.state;return{...e,get state(){return a().insightInterface},fetch(){r(gr())}}}function eI(t){return t.addReducers({configuration:K,insightConfiguration:Ai,insightInterface:mr,searchHub:Ya}),!0}function or(t,e){var a,n;let r=e!=null?e:(n=(a=t.search)==null?void 0:a.questionAnswer)==null?void 0:n.documentId;return r&&t.search&&zg(t,r.contentIdKey,r.contentIdValue)}function ga(t,e){var n,o,i,s,u;let r=(o=(n=t.questionAnswering)==null?void 0:n.relatedQuestions.findIndex(c=>c.questionAnswerId===e))!=null?o:-1;if(r===-1)return null;let a=(u=(s=(i=t.search)==null?void 0:i.questionAnswer)==null?void 0:s.relatedQuestions)==null?void 0:u[r];return a!=null?a:null}var tI=()=>T("analytics/smartSnippet/expand",(t,e)=>t.logExpandSmartSnippet(M(e.insightCaseContext))),rI=()=>T("analytics/smartSnippet/collapse",(t,e)=>t.logCollapseSmartSnippet(M(e.insightCaseContext))),aI=()=>T("analytics/smartSnippet/like",(t,e)=>t.logLikeSmartSnippet(M(e.insightCaseContext))),nI=()=>T("analytics/smartSnippet/dislike",(t,e)=>t.logDislikeSmartSnippet(M(e.insightCaseContext))),oI=()=>T("analytics/smartSnippet/source/open",(t,e)=>{let r=or(e);return t.logOpenSmartSnippetSource(Fe(r,e),ke(r),M(e.insightCaseContext))}),Jl=t=>T("analytics/smartSnippet/source/open",(e,r)=>{y(t,ql());let a=or(r);return e.logOpenSmartSnippetInlineLink(Fe(a,r),{...ke(a),...t},M(r.insightCaseContext))}),iI=()=>T("analytics/smartSnippet/feedbackModal/open",(t,e)=>t.logOpenSmartSnippetFeedbackModal(M(e.insightCaseContext))),sI=()=>T("analytics/smartSnippet/feedbackModal/close",(t,e)=>t.logCloseSmartSnippetFeedbackModal(M(e.insightCaseContext))),cI=t=>T("analytics/smartSnippet/sendFeedback",(e,r)=>e.logSmartSnippetFeedbackReason(t,void 0,M(r.insightCaseContext))),uI=t=>T("analytics/smartSnippet/sendFeedback",(e,r)=>e.logSmartSnippetFeedbackReason("other",t,M(r.insightCaseContext))),lI=t=>T("analytics/smartSnippetSuggestion/expand",(e,r)=>{pn(t);let a=ga(r,t.questionAnswerId);return a?e.logExpandSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId},M(r.insightCaseContext)):null}),dI=t=>T("analytics/smartSnippetSuggestion/collapse",(e,r)=>{pn(t);let a=ga(r,t.questionAnswerId);return a?e.logCollapseSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId},M(r.insightCaseContext)):null}),Xl=t=>T("analytics/smartSnippetSuggestion/source/open",(e,r)=>{y(t,Qs());let a=ga(r,t.questionAnswerId);if(!a)return null;let n=or(r,a.documentId);return n?e.logOpenSmartSnippetSuggestionSource(Fe(n,r),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId},M(r.insightCaseContext)):null}),mS=(t,e)=>T("analytics/smartSnippetSuggestion/source/open",(r,a)=>{y(t,Qs()),y(e,ql());let n=ga(a,t.questionAnswerId);if(!n)return null;let o=or(a,n.documentId);return o?r.logOpenSmartSnippetSuggestionInlineLink(Fe(o,a),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId,linkText:e.linkText,linkURL:e.linkURL},M(a.insightCaseContext)):null}),vc={logExpandSmartSnippet:tI,logCollapseSmartSnippet:rI,logLikeSmartSnippet:aI,logDislikeSmartSnippet:nI,logOpenSmartSnippetSource:oI,logOpenSmartSnippetInlineLink:Jl,logOpenSmartSnippetFeedbackModal:iI,logCloseSmartSnippetFeedbackModal:sI,logSmartSnippetFeedback:cI,logSmartSnippetDetailedFeedback:uI,logExpandSmartSnippetSuggestion:lI,logCollapseSmartSnippetSuggestion:dI,logOpenSmartSnippetSuggestionSource:Xl};function hS(t,e,r){var u;if(!pI(t))throw V;let a=Y(t),n=()=>t.state,o=()=>or(n()),i=null,s=Dr(t,{options:{selectionDelay:(u=r==null?void 0:r.options)==null?void 0:u.selectionDelay}},()=>{let c=o();if(!c){i=null;return}let{searchResponseId:l}=n().search;i!==l&&(i=l,t.dispatch(e.logOpenSmartSnippetSource()),t.dispatch(_t(c)))});return{...a,get state(){let c=n();return{question:c.search.questionAnswer.question,answer:c.search.questionAnswer.answerSnippet,documentId:c.search.questionAnswer.documentId,expanded:c.questionAnswering.expanded,answerFound:c.search.questionAnswer.answerSnippet!=="",liked:c.questionAnswering.liked,disliked:c.questionAnswering.disliked,feedbackModalOpen:c.questionAnswering.feedbackModalOpen,source:o()}},expand(){t.dispatch(e.logExpandSmartSnippet()),t.dispatch(fn())},collapse(){t.dispatch(e.logCollapseSmartSnippet()),t.dispatch(gn())},like(){t.dispatch(e.logLikeSmartSnippet()),t.dispatch(mn())},dislike(){t.dispatch(e.logDislikeSmartSnippet()),t.dispatch(hn())},openFeedbackModal(){t.dispatch(e.logOpenSmartSnippetFeedbackModal()),t.dispatch(yn())},closeFeedbackModal(){t.dispatch(e.logCloseSmartSnippetFeedbackModal()),t.dispatch(Or())},sendFeedback(c){t.dispatch(e.logSmartSnippetFeedback(c)),t.dispatch(Or())},sendDetailedFeedback(c){t.dispatch(e.logSmartSnippetDetailedFeedback(c)),t.dispatch(Or())},selectSource(){s.select()},beginDelayedSelectSource(){s.beginDelayedSelect()},cancelPendingSelectSource(){s.cancelPendingSelect()}}}function pI(t){return t.addReducers({search:X,questionAnswering:$t}),!0}function Ac(t,e){if(!fI(t))throw V;let r=()=>t.state,a=new Set,n=l=>a.has(l)?!0:(a.add(l),!1),o=null,i=l=>{o!==l&&(o=l,u={},a.clear())},s=(l,d,f)=>{var p;return Dr(t,{options:{selectionDelay:(p=e==null?void 0:e.options)==null?void 0:p.selectionDelay}},()=>{n(d)||t.dispatch(f?mS({questionAnswerId:f},l):Jl(l))})},u={},c=(l,d)=>{let{searchResponseId:f}=r().search;i(f);let p=ya({...l,questionAnswerId:d});return p in u||(u[p]=s(l,p,d)),u[p]};return{selectInlineLink(l,d){var f;(f=c(l,d))==null||f.select()},beginDelayedSelectInlineLink(l,d){var f;(f=c(l,d))==null||f.beginDelayedSelect()},cancelPendingSelectInlineLink(l,d){var f;(f=c(l,d))==null||f.cancelPendingSelect()}}}function fI(t){return t.addReducers({search:X,questionAnswering:$t}),!0}function yS(t,e){var n;let r=hS(t,vc,e),a=Ac(t,{options:{selectionDelay:(n=e==null?void 0:e.options)==null?void 0:n.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(o){a.selectInlineLink(o)},beginDelayedSelectInlineLink(o){a.beginDelayedSelectInlineLink(o)},cancelPendingSelectInlineLink(o){a.cancelPendingSelectInlineLink(o)}}}function SS(t,e){if(!gI(t))throw V;let r=Y(t),a=()=>t.state,n=o=>{let{contentIdKey:i,contentIdValue:s}=o;return t.state.search.results.find(u=>Zt(u,i)===s)};return{...r,get state(){let o=a();return{questions:o.search.questionAnswer.relatedQuestions.map((i,s)=>({question:i.question,answer:i.answerSnippet,documentId:i.documentId,questionAnswerId:o.questionAnswering.relatedQuestions[s].questionAnswerId,expanded:o.questionAnswering.relatedQuestions[s].expanded,source:n(i.documentId)}))}},expand(o){let i={questionAnswerId:o};t.dispatch(e.logExpandSmartSnippetSuggestion(i)),t.dispatch(Sn(i))},collapse(o){let i={questionAnswerId:o};t.dispatch(e.logCollapseSmartSnippetSuggestion(i)),t.dispatch(Cn(i))}}}function gI(t){return t.addReducers({search:X,questionAnswering:$t}),!0}function CS(t,e){if(!mI(t))throw V;let r=()=>t.state,a=d=>{let f=r(),p=ga(f,d);return p?or(f,p.documentId):null},n=new Set,o=d=>n.has(d)?!0:(n.add(d),!1),i=null,s=d=>{i!==d&&(i=d,c={},n.clear())},u=(d,f)=>{var p;return Dr(t,{options:{selectionDelay:(p=e==null?void 0:e.options)==null?void 0:p.selectionDelay}},()=>{o(f)||(t.dispatch(Xl({questionAnswerId:f})),t.dispatch(_t(d)))})},c={},l=d=>{let{searchResponseId:f}=r().search;s(f);let p=a(d);return p?(d in c||(c[d]=u(p,d)),c[d]):null};return{selectSource(d){var f;(f=l(d))==null||f.select()},beginDelayedSelectSource(d){var f;(f=l(d))==null||f.beginDelayedSelect()},cancelPendingSelectSource(d){var f;(f=l(d))==null||f.cancelPendingSelect()}}}function mI(t){return t.addReducers({search:X,questionAnswering:$t}),!0}function vS(t,e){var o,i;let r=SS(t,vc),a=Ac(t,{options:{selectionDelay:(o=e==null?void 0:e.options)==null?void 0:o.selectionDelay}}),n=CS(t,{options:{selectionDelay:(i=e==null?void 0:e.options)==null?void 0:i.selectionDelay}});return{...r,get state(){return r.state},selectSource(s){n.selectSource(s)},beginDelayedSelectSource(s){n.beginDelayedSelectSource(s)},cancelPendingSelectSource(s){n.cancelPendingSelectSource(s)},selectInlineLink(s,u){a.selectInlineLink(u,s)},beginDelayedSelectInlineLink(s,u){a.beginDelayedSelectInlineLink(u,s)},cancelPendingSelectInlineLink(s,u){a.cancelPendingSelectInlineLink(u,s)}}}var hI=new ee({content:new de({required:!0}),conditions:new de({required:!0}),priority:new k({required:!1,default:0,min:0}),fields:new U({required:!1,each:x})});function Zl(t){if(!yI(t))throw V;let e=[],r=a=>{a.forEach(n=>{if(hI.validate(n),!n.conditions.every(i=>i instanceof Function))throw new Nr("Each result template conditions should be a function that takes a result as an argument and returns a boolean")})};return{registerTemplates(...a){let n=[];r(a),a.forEach(o=>{let i={...o,priority:o.priority||0,fields:o.fields||[]};e.push(i),n.push(...i.fields)}),e.sort((o,i)=>i.priority-o.priority),n.length&&t.dispatch(kr(n))},selectTemplate(a){let n=e.find(o=>o.conditions.every(i=>i(a)));return n?n.content:null}}}function yI(t){return t.addReducers({fields:dn}),!0}var Vr=()=>new A({required:!1,emptyAllowed:!0}),ed=m("advancedSearchQueries/update",t=>y(t,{aq:Vr(),cq:Vr(),lq:Vr(),dq:Vr()})),td=m("advancedSearchQueries/register",t=>y(t,{aq:Vr(),cq:Vr(),lq:Vr(),dq:Vr()}));var SI=b(ft(),t=>{t.addCase(ed,(e,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;xe(a)||(e.aq=a,e.aqWasSet=!0),xe(n)||(e.cq=n,e.cqWasSet=!0),xe(o)||(e.lq=o,e.lqWasSet=!0),xe(i)||(e.dq=i,e.dqWasSet=!0)}).addCase(td,(e,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;xe(a)||(e.defaultFilters.aq=a,e.aqWasSet||(e.aq=a)),xe(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),xe(o)||(e.defaultFilters.lq=o,e.lqWasSet||(e.lq=o)),xe(i)||(e.defaultFilters.dq=i,e.dqWasSet||(e.dq=i))}).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.advancedSearchQueries)!=null?n:e}).addCase(le,(e,r)=>{let{aq:a,cq:n}=r.payload;xe(a)||(e.aq=a,e.aqWasSet=!0),xe(n)||(e.cq=n,e.cqWasSet=!0)})});var rd=m("pipeline/set",t=>y(t,new A({required:!0,emptyAllowed:!0})));var AS=b(Ma(),t=>{t.addCase(rd,(e,r)=>r.payload).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.pipeline)!=null?n:e}).addCase(Zr,(e,r)=>r.payload.pipeline||e)});var CI=new U({each:x,required:!0}),xS=(t,e)=>(y(t,x),ma(e)?y(e,x):y(e,CI),{payload:{contextKey:t,contextValue:e}}),ad=m("context/set",t=>{for(let[e,r]of Object.entries(t))xS(e,r);return{payload:t}}),nd=m("context/add",t=>xS(t.contextKey,t.contextValue)),od=m("context/remove",t=>y(t,x));var vI=b(xi(),t=>{t.addCase(ad,(e,r)=>{e.contextValues=r.payload}).addCase(nd,(e,r)=>{e.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(od,(e,r)=>{delete e.contextValues[r.payload]}).addCase(ne.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.context.contextValues)})});var id=m("dictionaryFieldContext/set",t=>{let e=new R({options:{required:!0}}),r=y(t,e).error;if(r)return{payload:t,error:r};let a=Object.values(t),n=new U({each:ie}),o=y(a,n).error;return o?{payload:t,error:o}:{payload:t}}),sd=m("dictionaryFieldContext/add",t=>{let e=new R({options:{required:!0},values:{field:ie,key:ie}});return y(t,e)}),cd=m("dictionaryFieldContext/remove",t=>y(t,ie));var AI=b(Fi(),t=>{t.addCase(id,(e,r)=>{e.contextValues=r.payload}).addCase(sd,(e,r)=>{let{field:a,key:n}=r.payload;e.contextValues[a]=n}).addCase(cd,(e,r)=>{delete e.contextValues[r.payload]}).addCase(ne.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.dictionaryFieldContext.contextValues)})});var ud=m("debug/enable"),ld=m("debug/disable");var xI=b(Ba(),t=>{t.addCase(ud,()=>!0).addCase(ld,()=>!1).addCase(le,(e,r)=>{var a;return(a=r.payload.debug)!=null?a:e})});var lte=new R({options:{required:!1},values:{by:new ut({enum:Ct,required:!0}),fields:new U({each:new R({values:{field:new A({required:!0}),direction:new ut({enum:fs}),displayName:new A}})})}});var FS=t=>{let e=FI(t),{view:r,user:a,...n}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,...n,context:{user:a,view:r,cart:t.cart.cartItems.map(o=>t.cart.cart[o])},facets:e,...t.commercePagination&&{page:t.commercePagination.page},...t.commerceSort&&{sort:RI(t.commerceSort.appliedSort)}}};function FI(t){return!t.facetOrder||!t.commerceFacetSet?[]:t.facetOrder.map(e=>t.commerceFacetSet[e].request).filter(e=>e.values.length>0)}function RI(t){if(!!t)return t.by===Ct.Relevance?{sortCriteria:Ct.Relevance}:{sortCriteria:Ct.Fields,fields:t.fields.map(({name:e,direction:r})=>({field:e,direction:r}))}}var RS=()=>Gf("analytics/commerce/productListing/load",t=>t.makeInterfaceLoad(),t=>new ka(t));var bS=B("commerce/productListing/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:n})=>{let o=e(),{apiClient:i}=n,s=await i.getProductListing(FS(o));return oe(s)?(r(ot(s.error)),a(s.error)):{response:s.success,analyticsAction:RS()}});var bI=b(bi(),t=>{t.addCase(se.fulfilled,(e,r)=>r.payload.response.facets.map(a=>a.facetId)).addCase(bS.fulfilled,(e,r)=>{let a=n=>{var o;return(o=n.facetId)!=null?o:n.field};return r.payload.response.facets.map(a)}).addCase(ne.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOrder)!=null?n:e})});var PS=t=>({past:[],present:t,future:[]}),PI=t=>{let{past:e,present:r,future:a}=t;if(!r||e.length===0)return t;let n=e[e.length-1];return{past:e.slice(0,e.length-1),present:n,future:[r,...a]}},II=t=>{let{past:e,present:r,future:a}=t;if(!r||a.length===0)return t;let n=a[0],o=a.slice(1);return{past:[...e,r],present:n,future:o}},wI=t=>{let{action:e,state:r,reducer:a}=t,{past:n,present:o}=r,i=a(o,e);return o?o===i?r:{past:[...n,o],present:i,future:[]}:PS(i)},IS=t=>{let{actionTypes:e,reducer:r}=t,a=PS();return(n=a,o)=>{switch(o.type){case e.undo:return PI(n);case e.redo:return II(n);case e.snapshot:return wI({state:n,reducer:r,action:o});default:return n}}};var EI=b(ng(),t=>{t.addCase(Ve,(e,r)=>qI(e,r.payload)?void 0:r.payload)}),qI=(t,e)=>kI(t.context,e.context)&&OI(t.dictionaryFieldContext,e.dictionaryFieldContext)&&QI(t.advancedSearchQueries,e.advancedSearchQueries)&&TI(t.tabSet,e.tabSet)&&DI(t.staticFilterSet,e.staticFilterSet)&&dd(t.facetSet,e.facetSet)&&dd(t.dateFacetSet,e.dateFacetSet)&&dd(t.numericFacetSet,e.numericFacetSet)&&NI(t.automaticFacetSet,e.automaticFacetSet)&&VI(t.categoryFacetSet,e.categoryFacetSet)&&MI(t.pagination,e.pagination)&&LI(t.query,e.query)&&BI(t,e)&&jI(t.pipeline,e.pipeline)&&UI(t.searchHub,e.searchHub)&&_I(t.facetOrder,e.facetOrder)&&$I(t.debug,e.debug),kI=(t,e)=>JSON.stringify(t.contextValues)===JSON.stringify(e.contextValues),OI=(t,e)=>JSON.stringify(t.contextValues)===JSON.stringify(e.contextValues),TI=(t,e)=>{let r=wS(t),a=wS(e);return(r==null?void 0:r.id)===(a==null?void 0:a.id)},wS=t=>Object.values(t).find(e=>e.isActive),DI=(t,e)=>{for(let[r,a]of Object.entries(e)){if(!t[r])return!1;let n=ES(t[r]),o=ES(a);if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},ES=t=>t.values.filter(e=>e.state!=="idle"),dd=(t,e)=>{for(let[r,a]of Object.entries(e)){if(!t[r])return!1;let n=t[r].request.currentValues.filter(i=>i.state!=="idle"),o=a.request.currentValues.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},VI=(t,e)=>{var r;for(let[a,n]of Object.entries(e)){if(!t[a])return!1;let o=Ye((r=t[a])==null?void 0:r.request.currentValues).map(({value:s})=>s),i=Ye(n==null?void 0:n.request.currentValues).map(({value:s})=>s);if(JSON.stringify(o)!==JSON.stringify(i))return!1}return!0},NI=(t,e)=>{for(let[r,a]of Object.entries(e.set)){if(!t.set[r])return!1;let n=t.set[r].response.values.filter(i=>i.state!=="idle"),o=a.response.values.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},MI=(t,e)=>t.firstResult===e.firstResult&&t.numberOfResults===e.numberOfResults,LI=(t,e)=>JSON.stringify(t)===JSON.stringify(e),QI=(t,e)=>JSON.stringify(t)===JSON.stringify(e),BI=(t,e)=>t.sortCriteria===e.sortCriteria,jI=(t,e)=>t===e,UI=(t,e)=>t===e,_I=(t,e)=>Qh(t,e),$I=(t,e)=>t===e,HI=IS({actionTypes:{redo:Lu.type,undo:Mu.type,snapshot:Ve.type},reducer:EI});var zI=b(Pi(),t=>{t.addCase(Gu,(e,r)=>{let{id:a}=r.payload;e[a]||(e[a]={q:"",cache:{}})}),t.addCase(Gr,(e,r)=>{let{q:a,id:n}=r.payload;!a||(e[n].q=a)}),t.addCase(Yu,(e,r)=>{let{id:a}=r.payload;Object.entries(e[a].cache).forEach(([n,o])=>{ag(o)&&delete e[a].cache[n]})}),t.addCase(Ui.pending,(e,r)=>{for(let n in e)for(let o in e[n].cache)e[n].cache[o].isActive=!1;if(!xc(e,r.meta)){WI(e,r.meta);return}let a=xc(e,r.meta);a.isLoading=!0,a.isActive=!0,a.error=null}),t.addCase(Ui.fulfilled,(e,r)=>{let{results:a,searchUid:n,totalCountFiltered:o,duration:i}=r.payload,{cacheTimeout:s}=r.meta.arg,u=xc(e,r.meta);u.isActive=!0,u.searchUid=n,u.isLoading=!1,u.error=null,u.results=a,u.expiresAt=s?s+Date.now():0,u.totalCountFiltered=o,u.duration=i}),t.addCase(Ui.rejected,(e,r)=>{let a=xc(e,r.meta);a.error=r.error||null,a.isLoading=!1,a.isActive=!1})}),WI=(t,e)=>{let{q:r,id:a}=e.arg;t[a].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},xc=(t,e)=>{let{q:r,id:a}=e.arg;return t[a].cache[r]||null};function qS(t){return t.type==="redirect"}var pd=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(qS);return e.length?e[0].content:null}};var fd=m("standaloneSearchBox/register",t=>y(t,{id:x,redirectionUrl:x})),gd=m("standaloneSearchBox/reset",t=>y(t,{id:x})),md=m("standaloneSearchBox/updateAnalyticsToSearchFromLink",t=>y(t,{id:x})),hd=m("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Do=B("standaloneSearchBox/fetchRedirect",async(t,{dispatch:e,getState:r,rejectWithValue:a,extra:{apiClient:n,validatePayload:o}})=>{o(t,{id:new A({emptyAllowed:!1})});let i=await YI(r()),s=await n.plan(i);if(oe(s))return a(s.error);let{redirectionUrl:u}=new pd(s.success);return u&&e(GI(u)),u||""}),GI=t=>fe("analytics/standaloneSearchBox/redirect",e=>e.makeTriggerRedirect({redirectedTo:t})),YI=async t=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,q:t.query.q,...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await Qe(t.configuration.analytics)},...t.configuration.analytics.enabled&&await Sr(t.configuration.analytics),...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});function kS(){return{}}var KI=b(kS(),t=>t.addCase(fd,(e,r)=>{let{id:a,redirectionUrl:n}=r.payload;a in e||(e[a]=OS(n))}).addCase(gd,(e,r)=>{let{id:a}=r.payload,n=e[a];if(n){e[a]=OS(n.defaultRedirectionUrl);return}}).addCase(Do.pending,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.isLoading=!0)}).addCase(Do.fulfilled,(e,r)=>{let a=r.payload,n=e[r.meta.arg.id];!n||(n.redirectTo=a||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(Do.rejected,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.isLoading=!1)}).addCase(md,(e,r)=>{let a=e[r.payload.id];!a||(a.analytics.cause="searchFromLink")}).addCase(hd,(e,r)=>{let a=e[r.payload.id];!a||(a.analytics.cause="omniboxFromLink",a.analytics.metadata=r.payload.metadata)}));function OS(t){return{defaultRedirectionUrl:t,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var JI=b(wi(),t=>t.addCase(Ll,(e,r)=>{let a=r.payload,{id:n}=a;n in e||(e[n]=a)}).addCase(wo,(e,r)=>{let{id:a,value:n}=r.payload,o=e[a];if(!o)return;let i=o.values.find(u=>u.caption===n.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Eo,(e,r)=>{let{id:a,value:n}=r.payload,o=e[a];if(!o)return;let i=o.values.find(u=>u.caption===n.caption);if(!i)return;let s=i.state==="excluded";i.state=s?"idle":"excluded"}).addCase(Ql,(e,r)=>{let a=r.payload,n=e[a];!n||n.values.forEach(o=>o.state="idle")}).addCase(Pe,e=>{Object.values(e).forEach(r=>{r.values.forEach(a=>a.state="idle")})}).addCase(le,(e,r)=>{let a=r.payload.sf||{};Object.entries(e).forEach(([n,o])=>{let i=a[n]||[];o.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));var XI={queries:new U({required:!0,each:new A({emptyAllowed:!1})}),maxLength:new k({required:!0,min:1,default:10})},yd=m("recentQueries/registerRecentQueries",t=>y(t,XI)),Sd=m("recentQueries/clearRecentQueries");function TS(){return{queries:[],maxLength:10}}var ZI=b(TS(),t=>{t.addCase(yd,(e,r)=>{e.queries=r.payload.queries.slice(0,r.payload.maxLength),e.maxLength=r.payload.maxLength}).addCase(Sd,e=>{e.queries=[]}).addCase(se.fulfilled,(e,r)=>{let a=r.payload.queryExecuted.trim(),n=r.payload.response.results;if(!a.length||!n.length)return;e.queries=e.queries.filter(i=>i!==a);let o=e.queries.slice(0,e.maxLength-1);e.queries=[a,...o]})});var Cd=m("excerptLength/set",t=>y(t,new k({min:0,required:!0})));function DS(){return{length:void 0}}var ew=b(DS(),t=>{t.addCase(Cd,(e,r)=>{e.length=r.payload})});function VS(t){var e,r,a;return(a=(r=(e=t.search)==null?void 0:e.response)==null?void 0:r.extendedResults)==null?void 0:a.generativeQuestionAnsweringId}var NS=t=>fe("analytics/generatedAnswer/streamEnd",(e,r)=>{let a=VS(r);return a?e.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:a,answerGenerated:t}):null});var MS=async t=>{var e;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.platformUrl,streamId:(e=t.search.extendedResults)==null?void 0:e.generativeQuestionAnsweringId}};var LS=["default","bullet","step","concise"];var Vo=new A({required:!0}),QS=new A,vd=new j({required:!0}),tw={id:Vo,title:Vo,uri:Vo,permanentid:Vo,clickUri:QS},BS=m("generatedAnswer/setIsVisible",t=>y(t,vd)),Ad=m("generatedAnswer/updateMessage",t=>y(t,{textDelta:Vo})),xd=m("generatedAnswer/updateCitations",t=>y(t,{citations:new U({required:!0,each:new R({values:tw})})})),Fd=m("generatedAnswer/updateError",t=>y(t,{message:QS,code:new k({min:0})})),Fc=m("generatedAnswer/resetAnswer"),jS=m("generatedAnswer/like"),US=m("generatedAnswer/dislike"),_S=m("generatedAnswer/feedbackModal/open"),$S=m("generatedAnswer/feedbackModal/close"),HS=m("generatedAnswer/sendFeedback"),No=m("generatedAnswer/setIsLoading",t=>y(t,vd)),Rc=m("generatedAnswer/setIsStreaming",t=>y(t,vd)),zS=m("generatedAnswer/updateResponseFormat",t=>y(t,{answerStyle:new A({required:!0,constrainTo:LS})})),Dne=B("generatedAnswer/streamAnswer",async(t,e)=>{var l;let r=e.getState(),{dispatch:a,extra:n}=e,{setAbortControllerRef:o}=t,i=await MS(r),s=(d,f)=>{switch(d){case"genqa.messageType":a(Ad(JSON.parse(f)));break;case"genqa.citationsType":a(xd(JSON.parse(f)));break;case"genqa.endOfStreamType":a(Rc(!1)),a(NS(JSON.parse(f).answerGenerated));break;default:r.debug&&n.logger.warn(`Unknown payloadType: "${d}"`)}};a(No(!0));let u=d=>d.streamId===e.getState().search.extendedResults.generativeQuestionAnsweringId,c=(l=n.streamingClient)==null?void 0:l.streamGeneratedAnswer(i,{write:d=>{u(i)&&(a(No(!1)),d.payload&&d.payloadType&&s(d.payloadType,d.payload))},abort:d=>{u(i)&&a(Fd(d))},close:()=>{u(i)&&a(Rc(!1))},resetAnswer:()=>{u(i)&&a(Fc())}});c?o(c):a(No(!1))});var WS=1;function Rd(){return{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1,feedbackSubmitted:!1}}var rw=b(Rd(),t=>t.addCase(BS,(e,{payload:r})=>{e.isVisible=r}).addCase(Ad,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=r.textDelta,delete e.error}).addCase(xd,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!0,e.citations=e.citations.concat(r.citations),delete e.error}).addCase(Fd,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!1,e.error={...r,isRetryable:r.code===WS},e.citations=[],delete e.answer}).addCase(jS,e=>{e.liked=!0,e.disliked=!1}).addCase(US,e=>{e.liked=!1,e.disliked=!0}).addCase(_S,e=>{e.feedbackModalOpen=!0}).addCase($S,e=>{e.feedbackModalOpen=!1}).addCase(HS,e=>{e.feedbackSubmitted=!0}).addCase(Fc,e=>({...Rd(),responseFormat:e.responseFormat,isVisible:e.isVisible})).addCase(No,(e,{payload:r})=>{e.isLoading=r}).addCase(Rc,(e,{payload:r})=>{e.isStreaming=r}).addCase(zS,(e,{payload:r})=>{e.responseFormat=r}));var bc;(o=>{o.getResultProperty=Zt,o.fieldsMustBeDefined=jg,o.fieldsMustNotBeDefined=Ug,o.fieldMustMatch=_g,o.fieldMustNotMatch=$g})(bc||(bc={}));function GS(t){if(!aw(t))throw V;let e=Y(t),r=()=>t.state;return{...e,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function aw(t){return t.addReducers({search:X}),!0}function YS(t){return GS(t)}Id();
/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
}));
//# sourceMappingURL=headless.js.map
