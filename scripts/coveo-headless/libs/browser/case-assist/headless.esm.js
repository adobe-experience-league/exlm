/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vm=Object.create;var Ei=Object.defineProperty;var Am=Object.getOwnPropertyDescriptor;var Cm=Object.getOwnPropertyNames;var bm=Object.getPrototypeOf,Rm=Object.prototype.hasOwnProperty;var xm=t=>Ei(t,"__esModule",{value:!0});var Fm=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var oe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var wm=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Cm(e))!Rm.call(t,n)&&n!=="default"&&Ei(t,n,{get:()=>e[n],enumerable:!(r=Am(e,n))||r.enumerable});return t},qe=t=>wm(xm(Ei(t!=null?vm(bm(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var su=oe((Cb,ou)=>{ou.exports=fetch});var cu=oe(qr=>{"use strict";var _n=qr&&qr.__assign||function(){return _n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},_n.apply(this,arguments)};Object.defineProperty(qr,"__esModule",{value:!0});var qm={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function Tm(t){var e=_n(_n({},qm),t);return e.numOfAttempts<1&&(e.numOfAttempts=1),e}qr.getSanitizedOptions=Tm});var uu=oe(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});function Dm(t){var e=Math.random()*t;return Math.round(e)}Oi.fullJitter=Dm});var lu=oe(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});function Vm(t){return t}qi.noJitter=Vm});var du=oe(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});var Nm=uu(),Mm=lu();function Lm(t){switch(t.jitter){case"full":return Nm.fullJitter;case"none":default:return Mm.noJitter}}Ti.JitterFactory=Lm});var Vi=oe(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});var jm=du(),Um=function(){function t(e){this.options=e,this.attempt=0}return t.prototype.apply=function(){var e=this;return new Promise(function(r){return setTimeout(r,e.jitteredDelay)})},t.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(t.prototype,"jitteredDelay",{get:function(){var e=jm.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){var e=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,a=e*Math.pow(r,n);return Math.min(a,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),t}();Di.Delay=Um});var pu=oe(ot=>{"use strict";var Qm=ot&&ot.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bm=ot&&ot.__awaiter||function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(l){try{c(n.next(l))}catch(p){o(p)}}function u(l){try{c(n.throw(l))}catch(p){o(p)}}function c(l){l.done?i(l.value):a(l.value).then(s,u)}c((n=n.apply(t,e||[])).next())})},_m=ot&&ot.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ot,"__esModule",{value:!0});var $m=Vi(),Hm=function(t){Qm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.apply=function(){return Bm(this,void 0,void 0,function(){return _m(this,function(r){return[2,this.isFirstAttempt?!0:t.prototype.apply.call(this)]})})},Object.defineProperty(e.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),e}($m.Delay);ot.SkipFirstDelay=Hm});var fu=oe(Tr=>{"use strict";var zm=Tr&&Tr.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Tr,"__esModule",{value:!0});var Gm=Vi(),Wm=function(t){zm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Gm.Delay);Tr.AlwaysDelay=Wm});var mu=oe(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});var Ym=pu(),Km=fu();function Jm(t,e){var r=Xm(t);return r.setAttemptNumber(e),r}Ni.DelayFactory=Jm;function Xm(t){return t.delayFirstAttempt?new Km.AlwaysDelay(t):new Ym.SkipFirstDelay(t)}});var gu=oe(Vt=>{"use strict";var Mi=Vt&&Vt.__awaiter||function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(l){try{c(n.next(l))}catch(p){o(p)}}function u(l){try{c(n.throw(l))}catch(p){o(p)}}function c(l){l.done?i(l.value):a(l.value).then(s,u)}c((n=n.apply(t,e||[])).next())})},Li=Vt&&Vt.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Vt,"__esModule",{value:!0});var Zm=cu(),eg=mu();function tg(t,e){return e===void 0&&(e={}),Mi(this,void 0,void 0,function(){var r,n;return Li(this,function(a){switch(a.label){case 0:return r=Zm.getSanitizedOptions(e),n=new rg(t,r),[4,n.execute()];case 1:return[2,a.sent()]}})})}Vt.backOff=tg;var rg=function(){function t(e,r){this.request=e,this.options=r,this.attemptNumber=0}return t.prototype.execute=function(){return Mi(this,void 0,void 0,function(){var e,r;return Li(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return e=n.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(t.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),t.prototype.applyDelay=function(){return Mi(this,void 0,void 0,function(){var e;return Li(this,function(r){switch(r.label){case 0:return e=eg.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return r.sent(),[2]}})})},t}()});var hu=oe((qb,yu)=>{"use strict";function ng(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(t=`${t}`,t=t.replace(/[ \t\n\f\r]/g,""),t.length%4==0&&(t=t.replace(/==?$/,"")),t.length%4==1||/[^+/0-9A-Za-z]/.test(t))return null;let e="",r=0,n=0;for(let a=0;a<t.length;a++)r<<=6,r|=ig(t[a]),n+=6,n===24&&(e+=String.fromCharCode((r&16711680)>>16),e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,e+=String.fromCharCode(r)):n===18&&(r>>=2,e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255)),e}var ag="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function ig(t){let e=ag.indexOf(t);return e<0?void 0:e}yu.exports=ng});var vu=oe((Tb,Su)=>{"use strict";function og(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let e;for(t=`${t}`,e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return null;let r="";for(e=0;e<t.length;e+=3){let n=[void 0,void 0,void 0,void 0];n[0]=t.charCodeAt(e)>>2,n[1]=(t.charCodeAt(e)&3)<<4,t.length>e+1&&(n[1]|=t.charCodeAt(e+1)>>4,n[2]=(t.charCodeAt(e+1)&15)<<2),t.length>e+2&&(n[2]|=t.charCodeAt(e+2)>>6,n[3]=t.charCodeAt(e+2)&63);for(let a=0;a<n.length;a++)typeof n[a]=="undefined"?r+="=":r+=cg(n[a])}return r}var sg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function cg(t){if(t>=0&&t<64)return sg[t]}Su.exports=og});var Cu=oe((Db,Au)=>{"use strict";var ug=hu(),lg=vu();Au.exports={atob:ug,btoa:lg}});var hl=oe((eF,yl)=>{var fy=/(^|; )Coveo-Pendragon=([^;]*)/;yl.exports=()=>fy.exec(document.cookie)?.pop()||null});var ga=oe((Qo,Bo)=>{(function(t,e){typeof Qo=="object"&&typeof Bo!="undefined"?Bo.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs=e()})(Qo,function(){"use strict";var t=1e3,e=6e4,r=36e5,n="millisecond",a="second",i="minute",o="hour",s="day",u="week",c="month",l="quarter",p="year",g="date",d="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(E){var F=["th","st","nd","rd"],w=E%100;return"["+E+(F[(w-20)%10]||F[w]||F[0])+"]"}},b=function(E,F,w){var D=String(E);return!D||D.length>=F?E:""+Array(F+1-D.length).join(w)+E},k={s:b,z:function(E){var F=-E.utcOffset(),w=Math.abs(F),D=Math.floor(w/60),I=w%60;return(F<=0?"+":"-")+b(D,2,"0")+":"+b(I,2,"0")},m:function E(F,w){if(F.date()<w.date())return-E(w,F);var D=12*(w.year()-F.year())+(w.month()-F.month()),I=F.clone().add(D,c),M=w-I<0,j=F.clone().add(D+(M?-1:1),c);return+(-(D+(w-I)/(M?I-j:j-I))||0)},a:function(E){return E<0?Math.ceil(E)||0:Math.floor(E)},p:function(E){return{M:c,y:p,w:u,d:s,D:g,h:o,m:i,s:a,ms:n,Q:l}[E]||String(E||"").toLowerCase().replace(/s$/,"")},u:function(E){return E===void 0}},V="en",N={};N[V]=A;var z="$isDayjsObject",W=function(E){return E instanceof le||!(!E||!E[z])},J=function E(F,w,D){var I;if(!F)return V;if(typeof F=="string"){var M=F.toLowerCase();N[M]&&(I=M),w&&(N[M]=w,I=M);var j=F.split("-");if(!I&&j.length>1)return E(j[0])}else{var K=F.name;N[K]=F,I=K}return!D&&I&&(V=I),I||!D&&V},$=function(E,F){if(W(E))return E.clone();var w=typeof F=="object"?F:{};return w.date=E,w.args=arguments,new le(w)},L=k;L.l=J,L.i=W,L.w=function(E,F){return $(E,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var le=function(){function E(w){this.$L=J(w.locale,null,!0),this.parse(w),this.$x=this.$x||w.x||{},this[z]=!0}var F=E.prototype;return F.parse=function(w){this.$d=function(D){var I=D.date,M=D.utc;if(I===null)return new Date(NaN);if(L.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var j=I.match(y);if(j){var K=j[2]-1||0,ie=(j[7]||"0").substring(0,3);return M?new Date(Date.UTC(j[1],K,j[3]||1,j[4]||0,j[5]||0,j[6]||0,ie)):new Date(j[1],K,j[3]||1,j[4]||0,j[5]||0,j[6]||0,ie)}}return new Date(I)}(w),this.init()},F.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},F.$utils=function(){return L},F.isValid=function(){return this.$d.toString()!==d},F.isSame=function(w,D){var I=$(w);return this.startOf(D)<=I&&I<=this.endOf(D)},F.isAfter=function(w,D){return $(w)<this.startOf(D)},F.isBefore=function(w,D){return this.endOf(D)<$(w)},F.$g=function(w,D,I){return L.u(w)?this[D]:this.set(I,w)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(w,D){var I=this,M=!!L.u(D)||D,j=L.p(w),K=function(je,fe){var Pe=L.w(I.$u?Date.UTC(I.$y,fe,je):new Date(I.$y,fe,je),I);return M?Pe:Pe.endOf(s)},ie=function(je,fe){return L.w(I.toDate()[je].apply(I.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(fe)),I)},se=this.$W,pe=this.$M,xe=this.$D,ht="set"+(this.$u?"UTC":"");switch(j){case p:return M?K(1,0):K(31,11);case c:return M?K(1,pe):K(0,pe+1);case u:var Ge=this.$locale().weekStart||0,at=(se<Ge?se+7:se)-Ge;return K(M?xe-at:xe+(6-at),pe);case s:case g:return ie(ht+"Hours",0);case o:return ie(ht+"Minutes",1);case i:return ie(ht+"Seconds",2);case a:return ie(ht+"Milliseconds",3);default:return this.clone()}},F.endOf=function(w){return this.startOf(w,!1)},F.$set=function(w,D){var I,M=L.p(w),j="set"+(this.$u?"UTC":""),K=(I={},I[s]=j+"Date",I[g]=j+"Date",I[c]=j+"Month",I[p]=j+"FullYear",I[o]=j+"Hours",I[i]=j+"Minutes",I[a]=j+"Seconds",I[n]=j+"Milliseconds",I)[M],ie=M===s?this.$D+(D-this.$W):D;if(M===c||M===p){var se=this.clone().set(g,1);se.$d[K](ie),se.init(),this.$d=se.set(g,Math.min(this.$D,se.daysInMonth())).$d}else K&&this.$d[K](ie);return this.init(),this},F.set=function(w,D){return this.clone().$set(w,D)},F.get=function(w){return this[L.p(w)]()},F.add=function(w,D){var I,M=this;w=Number(w);var j=L.p(D),K=function(pe){var xe=$(M);return L.w(xe.date(xe.date()+Math.round(pe*w)),M)};if(j===c)return this.set(c,this.$M+w);if(j===p)return this.set(p,this.$y+w);if(j===s)return K(1);if(j===u)return K(7);var ie=(I={},I[i]=e,I[o]=r,I[a]=t,I)[j]||1,se=this.$d.getTime()+w*ie;return L.w(se,this)},F.subtract=function(w,D){return this.add(-1*w,D)},F.format=function(w){var D=this,I=this.$locale();if(!this.isValid())return I.invalidDate||d;var M=w||"YYYY-MM-DDTHH:mm:ssZ",j=L.z(this),K=this.$H,ie=this.$m,se=this.$M,pe=I.weekdays,xe=I.months,ht=I.meridiem,Ge=function(fe,Pe,it,St){return fe&&(fe[Pe]||fe(D,M))||it[Pe].slice(0,St)},at=function(fe){return L.s(K%12||12,fe,"0")},je=ht||function(fe,Pe,it){var St=fe<12?"AM":"PM";return it?St.toLowerCase():St};return M.replace(v,function(fe,Pe){return Pe||function(it){switch(it){case"YY":return String(D.$y).slice(-2);case"YYYY":return L.s(D.$y,4,"0");case"M":return se+1;case"MM":return L.s(se+1,2,"0");case"MMM":return Ge(I.monthsShort,se,xe,3);case"MMMM":return Ge(xe,se);case"D":return D.$D;case"DD":return L.s(D.$D,2,"0");case"d":return String(D.$W);case"dd":return Ge(I.weekdaysMin,D.$W,pe,2);case"ddd":return Ge(I.weekdaysShort,D.$W,pe,3);case"dddd":return pe[D.$W];case"H":return String(K);case"HH":return L.s(K,2,"0");case"h":return at(1);case"hh":return at(2);case"a":return je(K,ie,!0);case"A":return je(K,ie,!1);case"m":return String(ie);case"mm":return L.s(ie,2,"0");case"s":return String(D.$s);case"ss":return L.s(D.$s,2,"0");case"SSS":return L.s(D.$ms,3,"0");case"Z":return j}return null}(fe)||j.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(w,D,I){var M,j=this,K=L.p(D),ie=$(w),se=(ie.utcOffset()-this.utcOffset())*e,pe=this-ie,xe=function(){return L.m(j,ie)};switch(K){case p:M=xe()/12;break;case c:M=xe();break;case l:M=xe()/3;break;case u:M=(pe-se)/6048e5;break;case s:M=(pe-se)/864e5;break;case o:M=pe/r;break;case i:M=pe/e;break;case a:M=pe/t;break;default:M=pe}return I?M:L.a(M)},F.daysInMonth=function(){return this.endOf(c).$D},F.$locale=function(){return N[this.$L]},F.locale=function(w,D){if(!w)return this.$L;var I=this.clone(),M=J(w,D,!0);return M&&(I.$L=M),I},F.clone=function(){return L.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},E}(),de=le.prototype;return $.prototype=de,[["$ms",n],["$s",a],["$m",i],["$H",o],["$W",s],["$M",c],["$y",p],["$D",g]].forEach(function(E){de[E[1]]=function(F){return this.$g(F,E[0],E[1])}}),$.extend=function(E,F){return E.$i||(E(F,le,$),E.$i=!0),$},$.locale=J,$.isDayjs=W,$.unix=function(E){return $(1e3*E)},$.en=N[V],$.Ls=N,$.p={},$})});var Wl=oe((_o,$o)=>{(function(t,e){typeof _o=="object"&&typeof $o!="undefined"?$o.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_timezone=e()})(_o,function(){"use strict";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(r,n,a){var i,o=function(l,p,g){g===void 0&&(g={});var d=new Date(l),y=function(v,A){A===void 0&&(A={});var b=A.timeZoneName||"short",k=v+"|"+b,V=e[k];return V||(V=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),e[k]=V),V}(p,g);return y.formatToParts(d)},s=function(l,p){for(var g=o(l,p),d=[],y=0;y<g.length;y+=1){var v=g[y],A=v.type,b=v.value,k=t[A];k>=0&&(d[k]=parseInt(b,10))}var V=d[3],N=V===24?0:V,z=d[0]+"-"+d[1]+"-"+d[2]+" "+N+":"+d[4]+":"+d[5]+":000",W=+l;return(a.utc(z).valueOf()-(W-=W%1e3))/6e4},u=n.prototype;u.tz=function(l,p){l===void 0&&(l=i);var g=this.utcOffset(),d=this.toDate(),y=d.toLocaleString("en-US",{timeZone:l}),v=Math.round((d-new Date(y))/1e3/60),A=a(y,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(d.getTimezoneOffset()/15)-v,!0);if(p){var b=A.utcOffset();A=A.add(g-b,"minute")}return A.$x.$timezone=l,A},u.offsetName=function(l){var p=this.$x.$timezone||a.tz.guess(),g=o(this.valueOf(),p,{timeZoneName:l}).find(function(d){return d.type.toLowerCase()==="timezonename"});return g&&g.value};var c=u.startOf;u.startOf=function(l,p){if(!this.$x||!this.$x.$timezone)return c.call(this,l,p);var g=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(g,l,p).tz(this.$x.$timezone,!0)},a.tz=function(l,p,g){var d=g&&p,y=g||p||i,v=s(+a(),y);if(typeof l!="string")return a(l).tz(y);var A=function(N,z,W){var J=N-60*z*1e3,$=s(J,W);if(z===$)return[J,z];var L=s(J-=60*($-z)*1e3,W);return $===L?[J,$]:[N-60*Math.min($,L)*1e3,Math.max($,L)]}(a.utc(l,d).valueOf(),v,y),b=A[0],k=A[1],V=a(b).utcOffset(k);return V.$x.$timezone=y,V},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(l){i=l}}})});var Yl=oe((Ho,zo)=>{(function(t,e){typeof Ho=="object"&&typeof zo!="undefined"?zo.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_utc=e()})(Ho,function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,a,i){var o=a.prototype;i.utc=function(d){var y={date:d,utc:!0,args:arguments};return new a(y)},o.utc=function(d){var y=i(this.toDate(),{locale:this.$L,utc:!0});return d?y.add(this.utcOffset(),t):y},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(d){d.utc&&(this.$u=!0),this.$utils().u(d.$offset)||(this.$offset=d.$offset),s.call(this,d)};var u=o.init;o.init=function(){if(this.$u){var d=this.$d;this.$y=d.getUTCFullYear(),this.$M=d.getUTCMonth(),this.$D=d.getUTCDate(),this.$W=d.getUTCDay(),this.$H=d.getUTCHours(),this.$m=d.getUTCMinutes(),this.$s=d.getUTCSeconds(),this.$ms=d.getUTCMilliseconds()}else u.call(this)};var c=o.utcOffset;o.utcOffset=function(d,y){var v=this.$utils().u;if(v(d))return this.$u?0:v(this.$offset)?c.call(this):this.$offset;if(typeof d=="string"&&(d=function(V){V===void 0&&(V="");var N=V.match(e);if(!N)return null;var z=(""+N[0]).match(r)||["-",0,0],W=z[0],J=60*+z[1]+ +z[2];return J===0?0:W==="+"?J:-J}(d),d===null))return this;var A=Math.abs(d)<=16?60*d:d,b=this;if(y)return b.$offset=A,b.$u=d===0,b;if(d!==0){var k=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(A+k,t)).$offset=A,b.$x.$localOffset=k}else b=this.utc();return b};var l=o.format;o.format=function(d){var y=d||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,y)},o.valueOf=function(){var d=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*d},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var p=o.toDate;o.toDate=function(d){return d==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var g=o.diff;o.diff=function(d,y,v){if(d&&this.$u===d.$u)return g.call(this,d,y,v);var A=this.local(),b=i(d).local();return g.call(A,b,y,v)}}})});var ud=oe((cw,cd)=>{"use strict";function Hh(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}cd.exports=zh;function zh(t,e,r){var n=r&&r.stringify||Hh,a=1;if(typeof t=="object"&&t!==null){var i=e.length+a;if(i===1)return t;var o=new Array(i);o[0]=n(t);for(var s=1;s<i;s++)o[s]=n(e[s]);return o.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var c="",l=1-a,p=-1,g=t&&t.length||0,d=0;d<g;){if(t.charCodeAt(d)===37&&d+1<g){switch(p=p>-1?p:0,t.charCodeAt(d+1)){case 100:case 102:if(l>=u||e[l]==null)break;p<d&&(c+=t.slice(p,d)),c+=Number(e[l]),p=d+2,d++;break;case 105:if(l>=u||e[l]==null)break;p<d&&(c+=t.slice(p,d)),c+=Math.floor(Number(e[l])),p=d+2,d++;break;case 79:case 111:case 106:if(l>=u||e[l]===void 0)break;p<d&&(c+=t.slice(p,d));var y=typeof e[l];if(y==="string"){c+="'"+e[l]+"'",p=d+2,d++;break}if(y==="function"){c+=e[l].name||"<anonymous>",p=d+2,d++;break}c+=n(e[l]),p=d+2,d++;break;case 115:if(l>=u)break;p<d&&(c+=t.slice(p,d)),c+=String(e[l]),p=d+2,d++;break;case 37:p<d&&(c+=t.slice(p,d)),c+="%",p=d+2,d++,l--;break}++l}++d}return p===-1?t:(p<g&&(c+=t.slice(p)),c)}});var gd=oe((uw,Ca)=>{"use strict";var ld=ud();Ca.exports=lt;var Wr=sS().console||{},Gh={mapHttpRequest:Aa,mapHttpResponse:Aa,wrapRequestSerializer:Xo,wrapResponseSerializer:Xo,wrapErrorSerializer:Xo,req:Aa,res:Aa,err:pd,errWithCause:pd};function Sa(t,e){return t==="silent"?1/0:e.levels.values[t]}var Yo=Symbol("pino.logFuncs"),Ko=Symbol("pino.hierarchy"),Wh={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function dd(t,e){let r={logger:e,parent:t[Ko]};e[Ko]=r}function Yh(t,e,r){let n={};e.forEach(a=>{n[a]=r[a]?r[a]:Wr[a]||Wr[Wh[a]||"log"]||Yr}),t[Yo]=n}function Kh(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function lt(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||Wr;t.browser.write&&(t.browser.asObject=!0);let n=t.serializers||{},a=Kh(t.browser.serialize,n),i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);let o=Object.keys(t.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(o);typeof r=="function"&&s.forEach(function(v){r[v]=r}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");let u=t.level||"info",c=Object.create(r);c.log||(c.log=Yr),Yh(c,s,r),dd({},c),Object.defineProperty(c,"levelVal",{get:p}),Object.defineProperty(c,"level",{get:g,set:d});let l={transmit:e,serialize:a,asObject:t.browser.asObject,levels:s,timestamp:aS(t)};c.levels=Jh(t),c.level=u,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Yr,c.serializers=n,c._serialize=a,c._stdErrSerialize=i,c.child=y,e&&(c._logEvent=Jo());function p(){return Sa(this.level,this)}function g(){return this._level}function d(v){if(v!=="silent"&&!this.levels.values[v])throw Error("unknown level "+v);this._level=v,_t(this,l,c,"error"),_t(this,l,c,"fatal"),_t(this,l,c,"warn"),_t(this,l,c,"info"),_t(this,l,c,"debug"),_t(this,l,c,"trace"),o.forEach(A=>{_t(this,l,c,A)})}function y(v,A){if(!v)throw new Error("missing bindings for child Pino");A=A||{},a&&v.serializers&&(A.serializers=v.serializers);let b=A.serializers;if(a&&b){var k=Object.assign({},n,b),V=t.browser.serialize===!0?Object.keys(k):a;delete v.serializers,va([v],V,k,this._stdErrSerialize)}function N(W){this._childLevel=(W._childLevel|0)+1,this.bindings=v,k&&(this.serializers=k,this._serialize=V),e&&(this._logEvent=Jo([].concat(W._logEvent.bindings,v)))}N.prototype=this;let z=new N(this);return dd(this,z),z.level=this.level,z}return c}function Jh(t){let e=t.customLevels||{},r=Object.assign({},lt.levels.values,e),n=Object.assign({},lt.levels.labels,Xh(e));return{values:r,labels:n}}function Xh(t){let e={};return Object.keys(t).forEach(function(r){e[t[r]]=r}),e}lt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};lt.stdSerializers=Gh;lt.stdTimeFunctions=Object.assign({},{nullTime:fd,epochTime:md,unixTime:iS,isoTime:oS});function Zh(t){let e=[];t.bindings&&e.push(t.bindings);let r=t[Ko];for(;r.parent;)r=r.parent,r.logger.bindings&&e.push(r.logger.bindings);return e.reverse()}function _t(t,e,r,n){if(t[n]=Sa(t.level,r)>Sa(n,r)?Yr:r[Yo][n],!e.transmit&&t[n]===Yr)return;t[n]=tS(t,e,r,n);let a=Zh(t);a.length!==0&&(t[n]=eS(a,t[n]))}function eS(t,e){return function(){return e.apply(this,[...t,...arguments])}}function tS(t,e,r,n){return function(a){return function(){let o=e.timestamp(),s=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Wr?Wr:this;for(var c=0;c<s.length;c++)s[c]=arguments[c];if(e.serialize&&!e.asObject&&va(s,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?a.call(u,rS(this,n,s,o)):a.apply(u,s),e.transmit){let l=e.transmit.level||t._level,p=r.levels.values[l],g=r.levels.values[n];if(g<p)return;nS(this,{ts:o,methodLevel:n,methodValue:g,transmitLevel:l,transmitValue:r.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:Sa(t._level,r)},s)}}}(t[Yo][n])}function rS(t,e,r,n){t._serialize&&va(r,t._serialize,t.serializers,t._stdErrSerialize);let a=r.slice(),i=a[0],o={};n&&(o.time=n),o.level=t.levels.values[e];let s=(t._childLevel|0)+1;if(s<1&&(s=1),i!==null&&typeof i=="object"){for(;s--&&typeof a[0]=="object";)Object.assign(o,a.shift());i=a.length?ld(a.shift(),a):void 0}else typeof i=="string"&&(i=ld(a.shift(),a));return i!==void 0&&(o.msg=i),o}function va(t,e,r,n){for(let a in t)if(n&&t[a]instanceof Error)t[a]=lt.stdSerializers.err(t[a]);else if(typeof t[a]=="object"&&!Array.isArray(t[a]))for(let i in t[a])e&&e.indexOf(i)>-1&&i in r&&(t[a][i]=r[i](t[a][i]))}function nS(t,e,r){let n=e.send,a=e.ts,i=e.methodLevel,o=e.methodValue,s=e.val,u=t._logEvent.bindings;va(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=a,t._logEvent.messages=r.filter(function(c){return u.indexOf(c)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,n(i,t._logEvent,s),t._logEvent=Jo(u)}function Jo(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function pd(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function aS(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?fd:md}function Aa(){return{}}function Xo(t){return t}function Yr(){}function fd(){return!1}function md(){return Date.now()}function iS(){return Math.round(Date.now()/1e3)}function oS(){return new Date(Date.now()).toISOString()}function sS(){function t(e){return typeof e!="undefined"&&e}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}Ca.exports.default=lt;Ca.exports.pino=lt});var mp=oe((hs,Ss)=>{(function(t,e){typeof hs=="object"&&typeof Ss!="undefined"?Ss.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_quarterOfYear=e()})(hs,function(){"use strict";var t="month",e="quarter";return function(r,n){var a=n.prototype;a.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var i=a.add;a.add=function(s,u){return s=Number(s),this.$utils().p(u)===e?this.add(3*s,t):i.bind(this)(s,u)};var o=a.startOf;a.startOf=function(s,u){var c=this.$utils(),l=!!c.u(u)||u;if(c.p(s)===e){var p=this.quarter()-1;return l?this.month(3*p).startOf(t).startOf("day"):this.month(3*p+2).endOf(t).endOf("day")}return o.bind(this)(s,u)}}})});var gp=oe((vs,As)=>{(function(t,e){typeof vs=="object"&&typeof As!="undefined"?As.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_customParseFormat=e()})(vs,function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,i={},o=function(d){return(d=+d)+(d>68?1900:2e3)},s=function(d){return function(y){this[d]=+y}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(d){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var v=y.match(/([+-]|\d\d)/g),A=60*v[1]+(+v[2]||0);return A===0?0:v[0]==="+"?-A:A}(d)}],c=function(d){var y=i[d];return y&&(y.indexOf?y:y.s.concat(y.f))},l=function(d,y){var v,A=i.meridiem;if(A){for(var b=1;b<=24;b+=1)if(d.indexOf(A(b,0,y))>-1){v=b>12;break}}else v=d===(y?"pm":"PM");return v},p={A:[a,function(d){this.afternoon=l(d,!1)}],a:[a,function(d){this.afternoon=l(d,!0)}],S:[/\d/,function(d){this.milliseconds=100*+d}],SS:[r,function(d){this.milliseconds=10*+d}],SSS:[/\d{3}/,function(d){this.milliseconds=+d}],s:[n,s("seconds")],ss:[n,s("seconds")],m:[n,s("minutes")],mm:[n,s("minutes")],H:[n,s("hours")],h:[n,s("hours")],HH:[n,s("hours")],hh:[n,s("hours")],D:[n,s("day")],DD:[r,s("day")],Do:[a,function(d){var y=i.ordinal,v=d.match(/\d+/);if(this.day=v[0],y)for(var A=1;A<=31;A+=1)y(A).replace(/\[|\]/g,"")===d&&(this.day=A)}],M:[n,s("month")],MM:[r,s("month")],MMM:[a,function(d){var y=c("months"),v=(c("monthsShort")||y.map(function(A){return A.slice(0,3)})).indexOf(d)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[a,function(d){var y=c("months").indexOf(d)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(d){this.year=o(d)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function g(d){var y,v;y=d,v=i&&i.formats;for(var A=(d=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(J,$,L){var le=L&&L.toUpperCase();return $||v[L]||t[L]||v[le].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(de,E,F){return E||F.slice(1)})})).match(e),b=A.length,k=0;k<b;k+=1){var V=A[k],N=p[V],z=N&&N[0],W=N&&N[1];A[k]=W?{regex:z,parser:W}:V.replace(/^\[|\]$/g,"")}return function(J){for(var $={},L=0,le=0;L<b;L+=1){var de=A[L];if(typeof de=="string")le+=de.length;else{var E=de.regex,F=de.parser,w=J.slice(le),D=E.exec(w)[0];F.call($,D),J=J.replace(D,"")}}return function(I){var M=I.afternoon;if(M!==void 0){var j=I.hours;M?j<12&&(I.hours+=12):j===12&&(I.hours=0),delete I.afternoon}}($),$}}return function(d,y,v){v.p.customParseFormat=!0,d&&d.parseTwoDigitYear&&(o=d.parseTwoDigitYear);var A=y.prototype,b=A.parse;A.parse=function(k){var V=k.date,N=k.utc,z=k.args;this.$u=N;var W=z[1];if(typeof W=="string"){var J=z[2]===!0,$=z[3]===!0,L=J||$,le=z[2];$&&(le=z[2]),i=this.$locale(),!J&&le&&(i=v.Ls[le]),this.$d=function(w,D,I){try{if(["x","X"].indexOf(D)>-1)return new Date((D==="X"?1e3:1)*w);var M=g(D)(w),j=M.year,K=M.month,ie=M.day,se=M.hours,pe=M.minutes,xe=M.seconds,ht=M.milliseconds,Ge=M.zone,at=new Date,je=ie||(j||K?1:at.getDate()),fe=j||at.getFullYear(),Pe=0;j&&!K||(Pe=K>0?K-1:at.getMonth());var it=se||0,St=pe||0,Ii=xe||0,ki=ht||0;return Ge?new Date(Date.UTC(fe,Pe,je,it,St,Ii,ki+60*Ge.offset*1e3)):I?new Date(Date.UTC(fe,Pe,je,it,St,Ii,ki)):new Date(fe,Pe,je,it,St,Ii,ki)}catch{return new Date("")}}(V,W,N),this.init(),le&&le!==!0&&(this.$L=this.locale(le).$L),L&&V!=this.format(W)&&(this.$d=new Date("")),i={}}else if(W instanceof Array)for(var de=W.length,E=1;E<=de;E+=1){z[1]=W[E-1];var F=v.apply(this,z);if(F.isValid()){this.$d=F.$d,this.$L=F.$L,this.init();break}E===de&&(this.$d=new Date(""))}else b.call(this,k)}}})});var Or=()=>global.crypto,ru=()=>{typeof window=="undefined"&&(Or()||(global.crypto=Fm("crypto")),!Or().getRandomValues&&Or().webcrypto&&(global.crypto.getRandomValues=Or().webcrypto.getRandomValues.bind(Or().webcrypto)))};function Pm(t,e){let r=`
  The following properties are invalid:

    ${t.join(`
	`)}
  
  ${e}
  `;return new jn(r)}var jn=class extends Error{constructor(t){super(t);this.name="SchemaValidationError"}},he=class{constructor(t){this.definition=t}validate(t={},e=""){let r={...this.default,...t},n=[];for(let a in this.definition){let i=this.definition[a].validate(r[a]);i&&n.push(`${a}: ${i}`)}if(n.length)throw Pm(n,e);return r}get default(){let t={};for(let e in this.definition){let r=this.definition[e].default;r!==void 0&&(t[e]=r)}return t}},te=class{constructor(t={}){this.baseConfig=t}validate(t){return this.baseConfig.required&&H(t)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function ce(t){return t===void 0}function Im(t){return t===null}function H(t){return ce(t)||Im(t)}var q=class{constructor(t={}){this.config=t,this.value=new te(t)}validate(t){let e=this.value.validate(t);return e||(km(t)?t<this.config.min?`minimum value of ${this.config.min} not respected.`:t>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function km(t){return ce(t)||nu(t)}function nu(t){return typeof t=="number"&&!isNaN(t)}var U=class{constructor(t={}){this.value=new te(t)}validate(t){let e=this.value.validate(t);return e||(Em(t)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Em(t){return ce(t)||au(t)}function au(t){return typeof t=="boolean"}var Om=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,R=class{constructor(t={}){this.config={emptyAllowed:!0,url:!1,...t},this.value=new te(this.config)}validate(t){let{emptyAllowed:e,url:r,regex:n,constrainTo:a}=this.config,i=this.value.validate(t);return i||(ce(t)?null:Un(t)?!e&&!t.length?"value is an empty string.":r&&!Om.test(t)?"value is not a valid URL.":n&&!n.test(t)?`value did not match provided regex ${n}`:a&&!a.includes(t)?`value should be one of: ${a.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Un(t){return Object.prototype.toString.call(t)==="[object String]"}var O=class{constructor(t={}){this.config={options:{required:!1},values:{},...t}}validate(t){if(ce(t))return this.config.options.required?"value is required and is currently undefined":null;if(!iu(t))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&H(t[r]))return`value does not contain ${r}`;let e="";for(let[r,n]of Object.entries(this.config.values)){let a=t[r],i=n.validate(a);i!==null&&(e+=" "+i)}return e===""?null:e}get default(){}get required(){return!!this.config.options.required}};function iu(t){return t!==void 0&&typeof t=="object"}var Q=class{constructor(t={}){this.config=t,this.value=new te(this.config)}validate(t){if(!H(t)&&!Array.isArray(t))return"value is not an array";let e=this.value.validate(t);if(e!==null)return e;if(H(t))return null;if(this.config.max!==void 0&&t.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&t.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return t.forEach(n=>{this.config.each.required&&H(n)&&(r=`value is null or undefined: ${t.join(",")}`);let a=this.validatePrimitiveValue(n,this.config.each);a!==null&&(r+=" "+a)}),r===""?null:r}return null}validatePrimitiveValue(t,e){return au(t)||Un(t)||nu(t)||iu(t)?e.validate(t):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Qn(t){return Array.isArray(t)}var Ue=class{constructor(t){this.config=t,this.value=new te(t)}validate(t){let e=this.value.validate(t);return e!==null?e:ce(t)||Object.values(this.config.enum).find(n=>n===t)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var Bn=t=>t;var Iu=qe(su()),ku=qe(gu());var Ie=new Error("Failed to load reducers."),Dr=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Jt=class extends Error{constructor(e,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=r!=null?r:0}};var bu=qe(Cu());function $n(t){return Array.isArray(t)}function Ru(t,e){return[...t.reduce((r,n)=>{let a=e(n);return r.has(a)||r.set(a,n),r},new Map).values()]}function dg(t){return(typeof btoa!="undefined"?btoa:bu.btoa)(encodeURI(t))}function xu(t){return dg(JSON.stringify(t))}var pg=new Set(["1",1,"yes",!0]);function Hn(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;let t=navigator,e=window;return[t.globalPrivacyControl,t.doNotTrack,t.msDoNotTrack,e.doNotTrack].some(r=>pg.has(r))}function Fu(t){let e={};for(let[r,n]of t)e[r]=n;return e}function Vr(t){if(typeof t!="object"||!t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}function wu(t){let e=[];for(let r in t){let n=encodeURIComponent(r),a=encodeURIComponent(t[r]);e.push(`${n}=${a}`)}return e.join("&")}function Pu(t){return typeof t!="object"||!t?!1:Object.values(t).every(fg)}function fg(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function Eu(t){return t===429}var st=class{static async call(e){let r=mg(e),{logger:n}=e,a=await st.preprocessRequest(r,e);n.info(a,"Platform request");let{url:i,...o}=a,s=async()=>{let u=await(0,Iu.default)(i,o);if(Eu(u.status))throw u;return u};try{let u=await(0,ku.backOff)(s,{retry:c=>{let l=c&&Eu(c.status);return l&&n.info("Platform retrying request"),l}});if(u.status===419)throw n.info("Platform renewing token"),new Dr;if(u.status===404)throw new Jt(i,u.status);return n.info({response:u,requestInfo:a},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new Jt(i):u}}static async preprocessRequest(e,r){let{origin:n,preprocessRequest:a,logger:i,requestMetadata:o}=r,{signal:s,...u}=e,c=Vr(u);try{let l=await a(e,n,o);return{...e,...l}}catch(l){i.error(l,"Platform request preprocessing failed. Returning default request options.")}return c}};function Ou(t,e){let r=!e||!e.environment||e.environment==="prod"?"":e.environment,n=!e||!e.region||e.region==="us"?"":`-${e.region}`;return`https://${t}${r}${n}.cloud.coveo.com`}function ji(t,e="prod"){let r=e==="prod"?"":e,n=`https://${t}.org${r}.coveo.com`,a=`https://${t}.analytics.org${r}.coveo.com`,i=`${n}/rest/search/v2`,o=`https://${t}.admin.org${r}.coveo.com`;return{platform:n,analytics:a,search:i,admin:o}}function Ui(t){return(t==null?void 0:t.multiRegionSubDomain)?`https://${t.multiRegionSubDomain}.org.coveo.com`:Ou("platform",t)}function qu(t){return Ou("analytics",t)}function mg(t){let{url:e,method:r,requestParams:n,contentType:a,accessToken:i,signal:o}=t,s=t.method==="POST"||t.method==="PUT",u=gg(n,a);return{url:e,method:r,headers:{"Content-Type":a,Authorization:`Bearer ${i}`,...t.headers},...s&&{body:u},signal:o}}function gg(t,e){return e==="application/x-www-form-urlencoded"?Pu(t)?wu(t):"":JSON.stringify(t)}var Xt=class{constructor(e){this._params={};this._basePath=e}addParam(e,r){this._params={...this.params,[e]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([e,r])=>`${e}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},Tu=t=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(t),Du=(t,e)=>{let r=Qi(t);return r&&r.organizationId===e?r:null},Qi=t=>{let e=t.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(e==null?void 0:e.groups)?e.groups:null};function Bi(t){let{url:e,accessToken:r,organizationId:n,authentication:a,...i}=t;return i}var _i=t=>{let{response:e}=t;return e.body?yg(t):hg(e)},yg=t=>vg(t)?Ag(t):Sg(t)?t.body:{message:"unknown",statusCode:0,type:"unknown"},hg=t=>{let e=JSON.parse(JSON.stringify(t,Object.getOwnPropertyNames(t)));return{...e,message:`Client side error: ${e.message||""}`,statusCode:400,type:"ClientError"}};function Sg(t){return t.body.statusCode!==void 0}function vg(t){return t.body.exception!==void 0}var Ag=t=>({message:t.body.exception.code,statusCode:t.response.status,type:t.body.exception.code});function Vu(t){return((t.headers.get("content-type")||"").split(";").find(n=>n.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var $i=(t,e,r,n)=>{let a=new Xt(`${t.url}${n}`);return a.addParam("organizationId",t.organizationId),t.authentication&&a.addParam("authentication",t.authentication),{accessToken:t.accessToken,method:e,contentType:r,url:a.href,origin:"searchApiFetch"}};var Nu=(t,e)=>{let r=new Xt(`${t.url}${e}`);return r.addParam("access_token",t.accessToken),r.addParam("organizationId",t.organizationId),r.addParam("uniqueId",t.uniqueId),t.q!==void 0&&r.addParam("q",t.q),t.enableNavigation!==void 0&&r.addParam("enableNavigation",`${t.enableNavigation}`),t.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${t.requestedOutputSize}`),t.visitorId!==void 0&&r.addParam("visitorId",`${t.visitorId}`),r.href},Hi=async(t,e)=>{let r=await st.call({...$i(t,"POST","application/x-www-form-urlencoded","/html"),requestParams:Bi(t),requestMetadata:{method:"html"},...e});if(r instanceof Error)throw r;let n=Vu(r),a=await r.arrayBuffer(),o=new TextDecoder(n).decode(a);return Cg(o)?{success:o}:{error:_i({response:r,body:o})}};function Cg(t){return typeof t=="string"}function bg(t){return{statusCode:t.statusCode,type:t.name,message:t.message}}function Rg(t){return{statusCode:t.code,type:t.name,message:t.message,ignored:!0}}function zn(t,e){if(e&&t.name==="AbortError")return{error:Rg(t)};if(t instanceof Jt)return{error:bg(t)};throw t}var Gn=(t,e,r,n,a={})=>{xg(t);let i=`${t.url}/rest/organizations/${t.organizationId}/caseassists/${t.caseAssistId}${n}`,o=Fg(a),s=o?`${i}?${o}`:i;return{accessToken:t.accessToken,method:e,contentType:r,url:s,origin:"caseAssistApiFetch"}},Wn=t=>Object.keys(t).filter(e=>t[e].value!=="").reduce((e,r)=>({...e,[r]:t[r]}),{}),Yn=t=>Object.keys(t).filter(e=>t[e].value!=="").reduce((e,r)=>({...e,[r]:t[r].value}),{}),xg=t=>{if(!t.url)throw new Error("The 'url' attribute must contain a valid platform URL.");if(!t.organizationId)throw new Error("The 'organizationId' attribute must contain a valid organization ID.");if(!t.accessToken)throw new Error("The 'accessToken' attribute must contain a valid platform access token.");if(!t.caseAssistId)throw new Error("The 'caseAssistId' attribute must contain a valid Case Assist configuration ID.")},Fg=t=>Object.keys(t).map(e=>`${e}=${encodeURIComponent(t[e])}`).join("&");var Mu=t=>{let e=t.debug?{debug:"1"}:{};return{...Gn(t,"POST","application/json","/classify",e),requestParams:wg(t)}},wg=t=>({clientId:t.clientId,locale:t.locale,fields:Wn(t.fields)});var Lu=t=>{let e={};return t.debug&&(e.debug="1"),t.numberOfResults&&(e.numberOfResults=t.numberOfResults.toString()),{...Gn(t,"POST","application/json","/documents/suggest",e),requestParams:Pg(t)}},Pg=t=>({clientId:t.clientId,locale:t.locale,fields:Wn(t.fields),context:t.context});var zi=class{constructor(e){this.options=e}async getCaseClassifications(e){let r=await st.call({...Mu(e),...this.options});if(r instanceof Error)return zn(r);let n=await r.json();return r.ok?{success:n}:{error:n}}async getDocumentSuggestions(e){let r=await st.call({...Lu(e),...this.options});if(r instanceof Error)return zn(r);let n=await r.json();return r.ok?{success:n}:{error:n}}async html(e){return Hi(e,this.options)}};function Te(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(!1)var a,i;throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ct(t){return!!t&&!!t[ne]}function Qe(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===Vg}(t)||Array.isArray(t)||!!t[Yu]||!!((e=t.constructor)===null||e===void 0?void 0:e[Yu])||Gi(t)||Wi(t))}function Nt(t,e,r){r===void 0&&(r=!1),Zt(t)===0?(r?Object.keys:tr)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,a){return e(a,n,t)})}function Zt(t){var e=t[ne];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Gi(t)?2:Wi(t)?3:0}function er(t,e){return Zt(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Ig(t,e){return Zt(t)===2?t.get(e):t[e]}function ju(t,e,r){var n=Zt(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function Uu(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Gi(t){return Tg&&t instanceof Map}function Wi(t){return Dg&&t instanceof Set}function vt(t){return t.o||t.t}function Yi(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Ku(t);delete e[ne];for(var r=tr(e),n=0;n<r.length;n++){var a=r[n],i=e[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[a]})}return Object.create(Object.getPrototypeOf(t),e)}function Ki(t,e){return e===void 0&&(e=!1),Ji(t)||ct(t)||!Qe(t)||(Zt(t)>1&&(t.set=t.add=t.clear=t.delete=kg),Object.freeze(t),e&&Nt(t,function(r,n){return Ki(n,!0)},!0)),t}function kg(){Te(2)}function Ji(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function We(t){var e=oo[t];return e||Te(18,t),e}function Eg(t,e){oo[t]||(oo[t]=e)}function Xi(){return Nr}function Zi(t,e){e&&(We("Patches"),t.u=[],t.s=[],t.v=e)}function Kn(t){eo(t),t.p.forEach(Og),t.p=null}function eo(t){t===Nr&&(Nr=t.l)}function Qu(t){return Nr={p:[],l:Nr,h:t,m:!0,_:0}}function Og(t){var e=t[ne];e.i===0||e.i===1?e.j():e.g=!0}function to(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.O||We("ES5").S(e,t,n),n?(r[ne].P&&(Kn(e),Te(4)),Qe(t)&&(t=Jn(e,t),e.l||Xn(e,t)),e.u&&We("Patches").M(r[ne].t,t,e.u,e.s)):t=Jn(e,r,[]),Kn(e),e.u&&e.v(e.u,e.s),t!==Wu?t:void 0}function Jn(t,e,r){if(Ji(e))return e;var n=e[ne];if(!n)return Nt(e,function(s,u){return Bu(t,n,e,s,u,r)},!0),e;if(n.A!==t)return e;if(!n.P)return Xn(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=Yi(n.k):n.o,i=a,o=!1;n.i===3&&(i=new Set(a),a.clear(),o=!0),Nt(i,function(s,u){return Bu(t,n,a,s,u,r,o)}),Xn(t,a,!1),r&&t.u&&We("Patches").N(n,r,t.u,t.s)}return n.o}function Bu(t,e,r,n,a,i,o){if(ct(a)){var s=Jn(t,a,i&&e&&e.i!==3&&!er(e.R,n)?i.concat(n):void 0);if(ju(r,n,s),!ct(s))return;t.m=!1}else o&&r.add(a);if(Qe(a)&&!Ji(a)){if(!t.h.D&&t._<1)return;Jn(t,a),e&&e.A.l||Xn(t,a)}}function Xn(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&Ki(e,r)}function ro(t,e){var r=t[ne];return(r?vt(r):t)[e]}function _u(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function At(t){t.P||(t.P=!0,t.l&&At(t.l))}function no(t){t.o||(t.o=Yi(t.t))}function ao(t,e,r){var n=Gi(e)?We("MapSet").F(e,r):Wi(e)?We("MapSet").T(e,r):t.O?function(a,i){var o=Array.isArray(a),s={i:o?1:0,A:i?i.A:Xi(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},u=s,c=Mr;o&&(u=[s],c=Lr);var l=Proxy.revocable(u,c),p=l.revoke,g=l.proxy;return s.k=g,s.j=p,g}(e,r):We("ES5").J(e,r);return(r?r.A:Xi()).p.push(n),n}function qg(t){return ct(t)||Te(22,t),function e(r){if(!Qe(r))return r;var n,a=r[ne],i=Zt(r);if(a){if(!a.P&&(a.i<4||!We("ES5").K(a)))return a.t;a.I=!0,n=$u(r,i),a.I=!1}else n=$u(r,i);return Nt(n,function(o,s){a&&Ig(a.t,o)===s||ju(n,o,e(s))}),i===3?new Set(n):n}(t)}function $u(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Yi(t)}function Hu(){function t(o,s){var u=i[o];return u?u.enumerable=s:i[o]=u={configurable:!0,enumerable:s,get:function(){var c=this[ne];return Mr.get(c,o)},set:function(c){var l=this[ne];Mr.set(l,o,c)}},u}function e(o){for(var s=o.length-1;s>=0;s--){var u=o[s][ne];if(!u.P)switch(u.i){case 5:n(u)&&At(u);break;case 4:r(u)&&At(u)}}}function r(o){for(var s=o.t,u=o.k,c=tr(u),l=c.length-1;l>=0;l--){var p=c[l];if(p!==ne){var g=s[p];if(g===void 0&&!er(s,p))return!0;var d=u[p],y=d&&d[ne];if(y?y.t!==g:!Uu(d,g))return!0}}var v=!!s[ne];return c.length!==tr(s).length+(v?0:1)}function n(o){var s=o.k;if(s.length!==o.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var c=0;c<s.length;c++)if(!s.hasOwnProperty(c))return!0;return!1}function a(o){o.g&&Te(3,JSON.stringify(vt(o)))}var i={};Eg("ES5",{J:function(o,s){var u=Array.isArray(o),c=function(p,g){if(p){for(var d=Array(g.length),y=0;y<g.length;y++)Object.defineProperty(d,""+y,t(y,!0));return d}var v=Ku(g);delete v[ne];for(var A=tr(v),b=0;b<A.length;b++){var k=A[b];v[k]=t(k,p||!!v[k].enumerable)}return Object.create(Object.getPrototypeOf(g),v)}(u,o),l={i:u?5:4,A:s?s.A:Xi(),P:!1,I:!1,R:{},l:s,t:o,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,ne,{value:l,writable:!0}),c},S:function(o,s,u){u?ct(s)&&s[ne].A===o&&e(o.p):(o.u&&function c(l){if(l&&typeof l=="object"){var p=l[ne];if(p){var g=p.t,d=p.k,y=p.R,v=p.i;if(v===4)Nt(d,function(N){N!==ne&&(g[N]!==void 0||er(g,N)?y[N]||c(d[N]):(y[N]=!0,At(p)))}),Nt(g,function(N){d[N]!==void 0||er(d,N)||(y[N]=!1,At(p))});else if(v===5){if(n(p)&&(At(p),y.length=!0),d.length<g.length)for(var A=d.length;A<g.length;A++)y[A]=!1;else for(var b=g.length;b<d.length;b++)y[b]=!0;for(var k=Math.min(d.length,g.length),V=0;V<k;V++)d.hasOwnProperty(V)||(y[V]=!0),y[V]===void 0&&c(d[V])}}}}(o.p[0]),e(o.p))},K:function(o){return o.i===4?r(o):n(o)}})}var zu,Nr,io=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",Tg=typeof Map!="undefined",Dg=typeof Set!="undefined",Gu=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Wu=io?Symbol.for("immer-nothing"):((zu={})["immer-nothing"]=!0,zu),Yu=io?Symbol.for("immer-draftable"):"__$immer_draftable",ne=io?Symbol.for("immer-state"):"__$immer_state",SR=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var Vg=""+Object.prototype.constructor,tr=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Ku=Object.getOwnPropertyDescriptors||function(t){var e={};return tr(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},oo={},Mr={get:function(t,e){if(e===ne)return t;var r=vt(t);if(!er(r,e))return function(a,i,o){var s,u=_u(i,o);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(a.k):void 0}(t,r,e);var n=r[e];return t.I||!Qe(n)?n:n===ro(t.t,e)?(no(t),t.o[e]=ao(t.A.h,n,t)):n},has:function(t,e){return e in vt(t)},ownKeys:function(t){return Reflect.ownKeys(vt(t))},set:function(t,e,r){var n=_u(vt(t),e);if(n==null?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var a=ro(vt(t),e),i=a==null?void 0:a[ne];if(i&&i.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(Uu(r,a)&&(r!==void 0||er(t.t,e)))return!0;no(t),At(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return ro(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,no(t),At(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=vt(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){Te(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Te(12)}},Lr={};Nt(Mr,function(t,e){Lr[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Lr.deleteProperty=function(t,e){return Lr.set.call(this,t,e,void 0)},Lr.set=function(t,e,r){return Mr.set.call(this,t[0],e,r,t[0])};var Ng=function(){function t(r){var n=this;this.O=Gu,this.D=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var s=i;i=a;var u=n;return function(v){var A=this;v===void 0&&(v=s);for(var b=arguments.length,k=Array(b>1?b-1:0),V=1;V<b;V++)k[V-1]=arguments[V];return u.produce(v,function(N){var z;return(z=i).call.apply(z,[A,N].concat(k))})}}var c;if(typeof i!="function"&&Te(6),o!==void 0&&typeof o!="function"&&Te(7),Qe(a)){var l=Qu(n),p=ao(n,a,void 0),g=!0;try{c=i(p),g=!1}finally{g?Kn(l):eo(l)}return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(v){return Zi(l,o),to(v,l)},function(v){throw Kn(l),v}):(Zi(l,o),to(c,l))}if(!a||typeof a!="object"){if((c=i(a))===void 0&&(c=a),c===Wu&&(c=void 0),n.D&&Ki(c,!0),o){var d=[],y=[];We("Patches").M(a,c,d,y),o(d,y)}return c}Te(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(c){for(var l=arguments.length,p=Array(l>1?l-1:0),g=1;g<l;g++)p[g-1]=arguments[g];return n.produceWithPatches(c,function(d){return a.apply(void 0,[d].concat(p))})};var o,s,u=n.produce(a,i,function(c,l){o=c,s=l});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(c){return[c,o,s]}):[u,o,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){Qe(r)||Te(8),ct(r)&&(r=qg(r));var n=Qu(this),a=ao(this,r,void 0);return a[ne].C=!0,eo(n),a},e.finishDraft=function(r,n){var a=r&&r[ne],i=a.A;return Zi(i,n),to(void 0,i)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!Gu&&Te(20),this.O=r},e.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var o=We("Patches").$;return ct(r)?o(r,n):this.produce(r,function(s){return o(s,n)})},t}(),ke=new Ng,Mg=ke.produce,vR=ke.produceWithPatches.bind(ke),AR=ke.setAutoFreeze.bind(ke),CR=ke.setUseProxies.bind(ke),bR=ke.applyPatches.bind(ke),RR=ke.createDraft.bind(ke),xR=ke.finishDraft.bind(ke),Zn=Mg;function Ct(t){return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(t)}function so(t,e){if(Ct(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ct(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function co(t){var e=so(t,"string");return Ct(e)==="symbol"?e:String(e)}function uo(t,e,r){return e=co(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ju(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ea(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ju(Object(r),!0).forEach(function(n){uo(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ju(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Se(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Xu=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),lo=function(){return Math.random().toString(36).substring(7).split("").join(".")},ta={INIT:"@@redux/INIT"+lo(),REPLACE:"@@redux/REPLACE"+lo(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+lo()}};function Lg(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function po(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Se(0));if(typeof e=="function"&&typeof r=="undefined"&&(r=e,e=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(Se(1));return r(po)(t,e)}if(typeof t!="function")throw new Error(Se(2));var a=t,i=e,o=[],s=o,u=!1;function c(){s===o&&(s=o.slice())}function l(){if(u)throw new Error(Se(3));return i}function p(v){if(typeof v!="function")throw new Error(Se(4));if(u)throw new Error(Se(5));var A=!0;return c(),s.push(v),function(){if(!!A){if(u)throw new Error(Se(6));A=!1,c();var k=s.indexOf(v);s.splice(k,1),o=null}}}function g(v){if(!Lg(v))throw new Error(Se(7));if(typeof v.type=="undefined")throw new Error(Se(8));if(u)throw new Error(Se(9));try{u=!0,i=a(i,v)}finally{u=!1}for(var A=o=s,b=0;b<A.length;b++){var k=A[b];k()}return v}function d(v){if(typeof v!="function")throw new Error(Se(10));a=v,g({type:ta.REPLACE})}function y(){var v,A=p;return v={subscribe:function(k){if(typeof k!="object"||k===null)throw new Error(Se(11));function V(){k.next&&k.next(l())}V();var N=A(V);return{unsubscribe:N}}},v[Xu]=function(){return this},v}return g({type:ta.INIT}),n={dispatch:g,subscribe:p,getState:l,replaceReducer:d},n[Xu]=y,n}function jg(t){Object.keys(t).forEach(function(e){var r=t[e],n=r(void 0,{type:ta.INIT});if(typeof n=="undefined")throw new Error(Se(12));if(typeof r(void 0,{type:ta.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Se(13))})}function ra(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var a=e[n];typeof t[a]=="function"&&(r[a]=t[a])}var i=Object.keys(r),o,s;try{jg(r)}catch(u){s=u}return function(c,l){if(c===void 0&&(c={}),s)throw s;if(!1)var p;for(var g=!1,d={},y=0;y<i.length;y++){var v=i[y],A=r[v],b=c[v],k=A(b,l);if(typeof k=="undefined"){var V=l&&l.type;throw new Error(Se(14))}d[v]=k,g=g||k!==b}return g=g||i.length!==Object.keys(c).length,g?d:c}}function rr(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function Zu(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Se(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=e.map(function(u){return u(o)});return i=rr.apply(void 0,s)(a.dispatch),ea(ea({},a),{},{dispatch:i})}}}function el(t){var e=function(n){var a=n.dispatch,i=n.getState;return function(o){return function(s){return typeof s=="function"?s(a,i,t):o(s)}}};return e}var tl=el();tl.withExtraArgument=el;var fo=tl;var rl=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ug=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},nr=function(t,e){for(var r=0,n=e.length,a=t.length;r<n;r++,a++)t[a]=e[r];return t},Qg=Object.defineProperty,Bg=Object.defineProperties,_g=Object.getOwnPropertyDescriptors,nl=Object.getOwnPropertySymbols,$g=Object.prototype.hasOwnProperty,Hg=Object.prototype.propertyIsEnumerable,al=function(t,e,r){return e in t?Qg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},ar=function(t,e){for(var r in e||(e={}))$g.call(e,r)&&al(t,r,e[r]);if(nl)for(var n=0,a=nl(e);n<a.length;n++){var r=a[n];Hg.call(e,r)&&al(t,r,e[r])}return t},mo=function(t,e){return Bg(t,_g(e))},zg=function(t,e,r){return new Promise(function(n,a){var i=function(u){try{s(r.next(u))}catch(c){a(c)}},o=function(u){try{s(r.throw(u))}catch(c){a(c)}},s=function(u){return u.done?n(u.value):Promise.resolve(u.value).then(i,o)};s((r=r.apply(t,e)).next())})};var Gg=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?rr:rr.apply(null,arguments)},BR=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(t){return t}};function Wg(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}function m(t,e){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(e){var i=e.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return ar(ar({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:n[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(n){return n.type===t},r}var Yg=function(t){rl(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=t.apply(this,r)||this;return Object.setPrototypeOf(a,e.prototype),a}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,nr([void 0],r[0].concat(this)))):new(e.bind.apply(e,nr([void 0],r.concat(this))))},e}(Array),Kg=function(t){rl(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=t.apply(this,r)||this;return Object.setPrototypeOf(a,e.prototype),a}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,nr([void 0],r[0].concat(this)))):new(e.bind.apply(e,nr([void 0],r.concat(this))))},e}(Array);function il(t){return Qe(t)?Zn(t,function(){}):t}function Jg(t){return typeof t=="boolean"}function Xg(){return function(e){return Zg(e)}}function Zg(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e,n=t.immutableCheck,a=n===void 0?!0:n,i=t.serializableCheck,o=i===void 0?!0:i,s=t.actionCreatorCheck,u=s===void 0?!0:s,c=new Yg;if(r&&(Jg(r)?c.push(fo):c.push(fo.withExtraArgument(r.extraArgument))),!1){if(a)var l;if(o)var p;if(u)var g}return c}var go=!0;function ol(t){var e=Xg(),r=t||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,o=i===void 0?e():i,s=r.devTools,u=s===void 0?!0:s,c=r.preloadedState,l=c===void 0?void 0:c,p=r.enhancers,g=p===void 0?void 0:p,d;if(typeof a=="function")d=a;else if(Wg(a))d=ra(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;if(typeof y=="function"&&(y=y(e),!go&&!Array.isArray(y)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!go&&y.some(function(N){return typeof N!="function"}))throw new Error("each middleware provided to configureStore must be a function");var v=Zu.apply(void 0,y),A=rr;u&&(A=Gg(ar({trace:!go},typeof u=="object"&&u)));var b=new Kg(v),k=b;Array.isArray(g)?k=nr([v],g):typeof g=="function"&&(k=g(b));var V=A.apply(void 0,k);return po(d,l,V)}function ey(t){var e={},r=[],n,a={addCase:function(i,o){var s=typeof i=="string"?i:i.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[s]=o,a},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return t(a),[e,r,n]}function ty(t){return typeof t=="function"}function P(t,e,r,n){r===void 0&&(r=[]);var a=typeof e=="function"?ey(e):[e,r,n],i=a[0],o=a[1],s=a[2],u;if(ty(t))u=function(){return il(t())};else{var c=il(t);u=function(){return c}}function l(p,g){p===void 0&&(p=u());var d=nr([i[g.type]],o.filter(function(y){var v=y.matcher;return v(g)}).map(function(y){var v=y.reducer;return v}));return d.filter(function(y){return!!y}).length===0&&(d=[s]),d.reduce(function(y,v){if(v)if(ct(y)){var A=y,b=v(A,g);return b===void 0?y:b}else{if(Qe(y))return Zn(y,function(k){return v(k,g)});var b=v(y,g);if(b===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return y},p)}return l.getInitialState=u,l}var ry="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ny=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=ry[Math.random()*64|0];return e},ay=["name","message","stack","code"],yo=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),sl=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),iy=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,n=ay;r<n.length;r++){var a=n[r];typeof t[a]=="string"&&(e[a]=t[a])}return e}return{message:String(t)}},B=function(){function t(e,r,n){var a=m(e+"/fulfilled",function(l,p,g,d){return{payload:l,meta:mo(ar({},d||{}),{arg:g,requestId:p,requestStatus:"fulfilled"})}}),i=m(e+"/pending",function(l,p,g){return{payload:void 0,meta:mo(ar({},g||{}),{arg:p,requestId:l,requestStatus:"pending"})}}),o=m(e+"/rejected",function(l,p,g,d,y){return{payload:d,error:(n&&n.serializeError||iy)(l||"Rejected"),meta:mo(ar({},y||{}),{arg:g,requestId:p,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=!1,u=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function c(l){return function(p,g,d){var y=(n==null?void 0:n.idGenerator)?n.idGenerator(l):ny(),v=new u,A,b=!1;function k(N){A=N,v.abort()}var V=function(){return zg(this,null,function(){var N,z,W,J,$,L,le;return Ug(this,function(de){switch(de.label){case 0:return de.trys.push([0,4,,5]),J=(N=n==null?void 0:n.condition)==null?void 0:N.call(n,l,{getState:g,extra:d}),sy(J)?[4,J]:[3,2];case 1:J=de.sent(),de.label=2;case 2:if(J===!1||v.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return b=!0,$=new Promise(function(E,F){return v.signal.addEventListener("abort",function(){return F({name:"AbortError",message:A||"Aborted"})})}),p(i(y,l,(z=n==null?void 0:n.getPendingMeta)==null?void 0:z.call(n,{requestId:y,arg:l},{getState:g,extra:d}))),[4,Promise.race([$,Promise.resolve(r(l,{dispatch:p,getState:g,extra:d,requestId:y,signal:v.signal,abort:k,rejectWithValue:function(E,F){return new yo(E,F)},fulfillWithValue:function(E,F){return new sl(E,F)}})).then(function(E){if(E instanceof yo)throw E;return E instanceof sl?a(E.payload,y,l,E.meta):a(E,y,l)})])];case 3:return W=de.sent(),[3,5];case 4:return L=de.sent(),W=L instanceof yo?o(null,y,l,L.payload,L.meta):o(L,y,l),[3,5];case 5:return le=n&&!n.dispatchConditionRejection&&o.match(W)&&W.meta.condition,le||p(W),[2,W]}})})}();return Object.assign(V,{abort:k,requestId:y,arg:l,unwrap:function(){return V.then(oy)}})}}return Object.assign(c,{pending:i,rejected:o,fulfilled:a,typePrefix:e})}return t.withTypes=function(){return t},t}();function oy(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function sy(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var cy="task",cl="listener",ul="completed",ho="cancelled",zR="task-"+ho,GR="task-"+ul,WR=cl+"-"+ho,YR=cl+"-"+ul,KR=function(){function t(e){this.code=e,this.name="TaskAbortError",this.message=cy+" "+ho+" (reason: "+e+")"}return t}();var So="listenerMiddleware";var JR=m(So+"/add"),XR=m(So+"/removeAll"),ZR=m(So+"/remove");var ll,ex=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis):function(t){return(ll||(ll=Promise.resolve())).then(t).catch(function(e){return setTimeout(function(){throw e},0)})},uy=function(t){return function(e){setTimeout(e,t)}},tx=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:uy(10);Hu();var C=new R({required:!0,emptyAllowed:!1}),ae=new R({required:!1,emptyAllowed:!1}),X=new R({required:!0,emptyAllowed:!0}),ut=({message:t,name:e,stack:r})=>({message:t,name:e,stack:r}),De=(t,e)=>{if("required"in e)return{payload:new he({value:e}).validate({value:t}).value};let a=new O({options:{required:!0},values:e}).validate(t);if(a)throw new jn(a);return{payload:t}},h=(t,e)=>{try{return De(t,e)}catch(r){return{payload:t,error:ut(r)}}};var na=(t,e,r,n)=>{let a=`Check the options of ${n}`;return ly(t,e,r,a,"Controller initialization error")},ly=(t,e,r,n,a)=>{try{return e.validate(r,n)}catch(i){throw t.logger.error(i,a),i}};var aa=m("caseAssistConfiguration/set",t=>h(t,{caseAssistId:C,locale:ae}));var dl=()=>({caseAssistId:"",locale:"en-US"});var bt=P(dl(),t=>{t.addCase(aa,(e,r)=>{e.caseAssistId=r.payload.caseAssistId,e.locale=r.payload.locale})});var pl={q:new R,enableQuerySyntax:new U,aq:new R,cq:new R,firstResult:new q({min:0}),numberOfResults:new q({min:0}),sortCriteria:new R,f:new O,fExcluded:new O,cf:new O,nf:new O,df:new O,debug:new U,sf:new O,tab:new R,af:new O};var Z=m("searchParameters/restore",t=>h(t,pl));var vo=m("debug/enable"),Ao=m("debug/disable");var ia=()=>!1;var Co=P(ia(),t=>{t.addCase(vo,()=>!0).addCase(Ao,()=>!1).addCase(Z,(e,r)=>{var n;return(n=r.payload.debug)!=null?n:e})});var jr=m("searchHub/set",t=>h(t,new R({required:!0,emptyAllowed:!0})));var bo=()=>ae,fl=()=>C,Mt=m("configuration/updateBasicConfiguration",t=>h(t,{accessToken:ae,organizationId:ae,platformUrl:ae})),Lt=m("configuration/updateSearchConfiguration",t=>h(t,{apiBaseUrl:ae,pipeline:new R({required:!1,emptyAllowed:!0}),searchHub:ae,timezone:ae,locale:ae,authenticationProviders:new Q({required:!1,each:C})})),Ur=m("configuration/updateAnalyticsConfiguration",t=>(Hn()&&(t.enabled=!1),h(t,{enabled:new U({default:!0}),originContext:bo(),originLevel2:bo(),originLevel3:bo(),apiBaseUrl:ae,nextApiBaseUrl:ae,runtimeEnvironment:new te,anonymous:new U({default:!1}),deviceId:ae,userDisplayName:ae,documentLocation:ae,trackingId:ae,analyticsMode:new R({constrainTo:["legacy","next"],required:!1,default:"legacy"})}))),Qr=m("configuration/analytics/disable"),Br=m("configuration/analytics/enable"),Ro=m("configuration/analytics/originlevel2",t=>h(t,{originLevel2:fl()})),xo=m("configuration/analytics/originlevel3",t=>h(t,{originLevel3:fl()}));var Fo=m("history/undo"),wo=m("history/redo"),Be=m("history/snapshot"),dy=B("history/back",async(t,{dispatch:e})=>{e(Fo()),await e(Y())}),py=B("history/forward",async(t,{dispatch:e})=>{e(wo()),await e(Y())}),Y=B("history/change",async(t,{getState:e})=>e().history.present);var Rt=()=>"default";var oa=P(Rt(),t=>{t.addCase(jr,(e,r)=>r.payload).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.searchHub)!=null?a:e}).addCase(Lt,(e,r)=>r.payload.searchHub||e)});var sa="2.42.0";var ml=P(sa,t=>t);var gl=t=>e=>r=>{var i,o;let n=(i=r.payload)==null?void 0:i.analyticsAction;n!==void 0&&((o=r.payload)==null||delete o.analyticsAction);let a=e(r);return r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r),n!==void 0&&t.dispatch(n),a};var Zl=qe(hl());function Ye(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function S(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(l){try{c(n.next(l))}catch(p){o(p)}}function u(l){try{c(n.throw(l))}catch(p){o(p)}}function c(l){l.done?i(l.value):a(l.value).then(s,u)}c((n=n.apply(t,e||[])).next())})}var _;(function(t){t.search="search",t.click="click",t.custom="custom",t.view="view",t.collect="collect"})(_||(_={}));function my(){return typeof window!="undefined"}function Po(){return typeof navigator!="undefined"}function ir(){return typeof document!="undefined"}function Io(){try{return typeof localStorage!="undefined"}catch{return!1}}function gy(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function Sl(){return Po()&&navigator.cookieEnabled}var yy=[_.click,_.custom,_.search,_.view],hy=(t,e)=>yy.indexOf(t)!==-1?Object.assign({language:ir()?document.documentElement.lang:"unknown",userAgent:Po()?navigator.userAgent:"unknown"},e):e,or=class{static set(e,r,n){var a,i,o,s;n&&(i=new Date,i.setTime(i.getTime()+n)),s=window.location.hostname,s.indexOf(".")===-1?vl(e,r,i):(o=s.split("."),a=o[o.length-2]+"."+o[o.length-1],vl(e,r,i,a))}static get(e){for(var r=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){var i=n[a];if(i=i.replace(/^\s+/,""),i.lastIndexOf(r,0)===0)return i.substring(r.length,i.length)}return null}static erase(e){or.set(e,"",-1)}};function vl(t,e,r,n){document.cookie=`${t}=${e}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Sy(){return Io()?localStorage:Sl()?new xt:gy()?sessionStorage:new sr}var xt=class{getItem(e){return or.get(`${xt.prefix}${e}`)}removeItem(e){or.erase(`${xt.prefix}${e}`)}setItem(e,r,n){or.set(`${xt.prefix}${e}`,r,n)}};xt.prefix="coveo_";var Al=class{constructor(){this.cookieStorage=new xt}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,r){localStorage.setItem(e,r),this.cookieStorage.setItem(e,r,31556926e3)}},sr=class{getItem(e){return null}removeItem(e){}setItem(e,r){}},_r="__coveo.analytics.history",Cl=20,bl=1e3*60,Rl=75,$r=class{constructor(e){this.store=e||Sy()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])}addElementAsync(e){return S(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return S(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(_r);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return S(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(_r);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(_r,JSON.stringify(e.slice(0,Cl)))}catch{}}clear(){try{this.store.removeItem(_r)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((n,a)=>(a.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Rl)),e}isValidEntry(e){let r=this.getMostRecentElement();return r&&r.value==e.value?(e.internalTime||0)-(r.internalTime||0)>bl:!0}stripInternalTime(e){return Array.isArray(e)?e.map(r=>{let{name:n,time:a,value:i}=r;return{name:n,time:a,value:i}}):[]}stripEmptyQuery(e){let{name:r,time:n,value:a}=e;return r&&typeof a=="string"&&r.toLowerCase()==="query"&&a.trim()===""?{name:r,time:n}:e}stripEmptyQueries(e){return e.map(r=>this.stripEmptyQuery(r))}},xl=Object.freeze({__proto__:null,HistoryStore:$r,MAX_NUMBER_OF_HISTORY_ELEMENTS:Cl,MAX_VALUE_SIZE:Rl,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:bl,STORE_KEY:_r,default:$r}),vy=(t,e)=>S(void 0,void 0,void 0,function*(){return t===_.view?(yield Ay(e.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},e)):e}),Ay=t=>S(void 0,void 0,void 0,function*(){let e=new $r,r={name:"PageView",value:t,time:new Date().toISOString()};yield e.addElementAsync(r)}),ca,Cy=new Uint8Array(16);function by(){if(!ca&&(ca=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ca))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ca(Cy)}var Ry=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ua(t){return typeof t=="string"&&Ry.test(t)}var me=[];for(let t=0;t<256;++t)me.push((t+256).toString(16).slice(1));function Fl(t,e=0){return(me[t[e+0]]+me[t[e+1]]+me[t[e+2]]+me[t[e+3]]+"-"+me[t[e+4]]+me[t[e+5]]+"-"+me[t[e+6]]+me[t[e+7]]+"-"+me[t[e+8]]+me[t[e+9]]+"-"+me[t[e+10]]+me[t[e+11]]+me[t[e+12]]+me[t[e+13]]+me[t[e+14]]+me[t[e+15]]).toLowerCase()}function xy(t){if(!ua(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Fy(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var wy="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Py="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Iy(t,e,r){function n(a,i,o,s){var u;if(typeof a=="string"&&(a=Fy(a)),typeof i=="string"&&(i=xy(i)),((u=i)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+a.length);if(c.set(i),c.set(a,i.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){s=s||0;for(let l=0;l<16;++l)o[s+l]=c[l];return o}return Fl(c)}try{n.name=t}catch{}return n.DNS=wy,n.URL=Py,n}var ky=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wl={randomUUID:ky};function jt(t,e,r){if(wl.randomUUID&&!e&&!t)return wl.randomUUID();t=t||{};let n=t.random||(t.rng||by)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let a=0;a<16;++a)e[r+a]=n[a];return e}return Fl(n)}function Ey(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function ko(t,e){return t<<e|t>>>32-e}function Oy(t){let e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){let o=unescape(encodeURIComponent(t));t=[];for(let s=0;s<o.length;++s)t.push(o.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);let n=t.length/4+2,a=Math.ceil(n/16),i=new Array(a);for(let o=0;o<a;++o){let s=new Uint32Array(16);for(let u=0;u<16;++u)s[u]=t[o*64+u*4]<<24|t[o*64+u*4+1]<<16|t[o*64+u*4+2]<<8|t[o*64+u*4+3];i[o]=s}i[a-1][14]=(t.length-1)*8/Math.pow(2,32),i[a-1][14]=Math.floor(i[a-1][14]),i[a-1][15]=(t.length-1)*8&4294967295;for(let o=0;o<a;++o){let s=new Uint32Array(80);for(let d=0;d<16;++d)s[d]=i[o][d];for(let d=16;d<80;++d)s[d]=ko(s[d-3]^s[d-8]^s[d-14]^s[d-16],1);let u=r[0],c=r[1],l=r[2],p=r[3],g=r[4];for(let d=0;d<80;++d){let y=Math.floor(d/20),v=ko(u,5)+Ey(y,c,l,p)+g+e[y]+s[d]>>>0;g=p,p=l,l=ko(c,30)>>>0,c=u,u=v}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+p>>>0,r[4]=r[4]+g>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var qy=Iy("v5",80,Oy),Pl=qy,Il="2.28.23",kl=t=>`${t.protocol}//${t.hostname}${t.pathname.indexOf("/")===0?t.pathname:`/${t.pathname}`}${t.search}`,Hr={pageview:"pageview",event:"event"},Eo=class{constructor({client:e,uuidGenerator:r=jt}){this.client=e,this.uuidGenerator=r}},El=class extends Eo{constructor({client:e,uuidGenerator:r=jt}){super({client:e,uuidGenerator:r});this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=kl(window.location),this.lastReferrer=ir()?document.referrer:"",this.addHooks()}getApi(e){switch(e){case"setAction":return this.setAction;default:return null}}setAction(e,r){this.action=e,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,r){return Object.assign({hitType:e},this.getNextValues(e,r))}updateLocationInformation(e,r){this.updateLocationForNextPageView(e,r)}getDefaultContextInformation(e){let r={title:ir()?document.title:"",encoding:ir()?document.characterSet:"UTF-8"},n={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},a={language:navigator.language,userAgent:navigator.userAgent},i={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},i),n),a),r)}updateLocationForNextPageView(e,r){let{pageViewId:n,referrer:a,location:i}=this.getNextValues(e,r);this.lastReferrer=a,this.pageViewId=n,this.currentLocation=i,e===Hr.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,r){return{pageViewId:e===Hr.pageview?this.nextPageViewId:this.pageViewId,referrer:e===Hr.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===Hr.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(e){if(e.page){let r=a=>a.replace(/^\/?(.*)$/,"/$1");return`${(a=>a.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(e.page)}`}else return kl(window.location)}},Ke=class{constructor(e,r){if(!ua(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>Ke.expirationTime}validate(e,r){return!this.expired&&this.matchReferrer(e,r)}matchReferrer(e,r){try{let n=new URL(e);return r.some(a=>new RegExp(a.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(e){let r=e.split(".");if(r.length!==2)return null;let[n,a]=r;if(n.length!==32||isNaN(parseInt(a)))return null;let i=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return ua(i)?new Ke(i,Number.parseInt(a)*1e3):null}};Ke.cvo_cid="cvo_cid";Ke.expirationTime=120;var Ol=class extends Eo{constructor({client:e,uuidGenerator:r=jt}){super({client:e,uuidGenerator:r})}getApi(e){switch(e){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(e){return S(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(e),n=yield this.client.getCurrentVisitorId();return r.searchParams.set(Ke.cvo_cid,new Ke(n,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(e){this.client.setAcceptedLinkReferrers(e)}};Ol.Id="link";var Ve=Object.keys;function la(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}var Oo={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Ty=Ve(Oo).map(t=>Oo[t]),Dy=[...Ty].join("|"),Vy=new RegExp(`^(${Dy}$)`),Ny={svcAction:"svc_action",svcActionData:"svc_action_data"},My=t=>Ve(t).filter(e=>t[e]!==void 0).reduce((e,r)=>{let n=Oo[r]||r;return Object.assign(Object.assign({},e),{[n]:t[r]})},{}),Ly=t=>Vy.test(t),jy=[Ly],ql={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Tl={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},ve={action:"pa",list:"pal",listSource:"pls"},da={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Uy=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],qo={id:"quoteId",affiliation:"quoteAffiliation"},To={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Qy={add:ve,bookmark_add:ve,bookmark_remove:ve,click:ve,checkout:ve,checkout_option:ve,detail:ve,impression:ve,remove:ve,refund:Object.assign(Object.assign({},ve),da),purchase:Object.assign(Object.assign({},ve),da),quickview:ve,quote:Object.assign(Object.assign({},ve),qo),review:Object.assign(Object.assign({},ve),To)},By=Ve(ql).map(t=>ql[t]),_y=Ve(Tl).map(t=>Tl[t]),$y=Ve(ve).map(t=>ve[t]),Hy=Ve(da).map(t=>da[t]),zy=Ve(To).map(t=>To[t]),Gy=Ve(qo).map(t=>qo[t]),Wy=[...By,"custom"].join("|"),Yy=[..._y,"custom"].join("|"),Dl="(pr[0-9]+)",Vl="(il[0-9]+pi[0-9]+)",Ky=new RegExp(`^${Dl}(${Wy})$`),Jy=new RegExp(`^(${Vl}(${Yy}))|(il[0-9]+nm)$`),Xy=new RegExp(`^(${$y.join("|")})$`),Zy=new RegExp(`^(${Hy.join("|")})$`),eh=new RegExp(`^${Dl}custom$`),th=new RegExp(`^${Vl}custom$`),rh=new RegExp(`^(${[...Uy,...zy,...Gy].join("|")})$`),nh=t=>Ky.test(t),ah=t=>Jy.test(t),ih=t=>Xy.test(t),oh=t=>Zy.test(t),sh=t=>rh.test(t),ch=[ah,nh,ih,oh,sh],uh=[eh,th],lh={anonymizeIp:"aip"},dh={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},ph={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},fh=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],mh=Object.assign(Object.assign(Object.assign(Object.assign({},lh),dh),ph),fh.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:e}),{})),Do=Object.assign(Object.assign({},mh),Ny),gh=t=>{let e=!!t.action&&Qy[t.action]||{};return Ve(t).reduce((r,n)=>{let a=e[n]||Do[n]||n;return Object.assign(Object.assign({},r),{[a]:t[n]})},{})},yh=Ve(Do).map(t=>Do[t]),hh=t=>yh.indexOf(t)!==-1,Sh=t=>t==="custom",vh=t=>[...ch,...jy,hh,Sh].some(e=>e(t)),Ah=t=>Ve(t).reduce((e,r)=>{let n=Ch(r);return n?Object.assign(Object.assign({},e),bh(n,t[r])):Object.assign(Object.assign({},e),{[r]:t[r]})},{}),Ch=t=>{let e;return[...uh].every(r=>{var n;return e=(n=r.exec(t))===null||n===void 0?void 0:n[1],!Boolean(e)}),e},bh=(t,e)=>Ve(e).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${t}${n}`]:e[n]}),{}),Nl=class{constructor(e){this.opts=e}sendEvent(e,r){return S(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:a}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:o,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${e}?${i}`,r,a),u=this.encodeForEventType(e,s),c=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(o,c)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,r,n){return S(this,void 0,void 0,function*(){let a=e,i=r;if(n){let o=yield n({url:e,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:u}=o;a=s||e;try{i=JSON.parse(u)}catch(c){console.error("Unable to process the request body as a JSON string",c)}}return{payload:i,url:a}})}encodeForEventType(e,r){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(e){return S(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,a=yield n.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(e)?`access_token=${r}`:"",a?`visitorId=${a}`:"","discardVisitInfo=true"].filter(i=>!!i).join("&")})}isEventTypeLegacy(e){return[_.click,_.custom,_.search,_.view].indexOf(e)!==-1}encodeForLegacyType(e,r){return`${e}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter(r=>!!e[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(e[r]))}`).join("&")}encodeValue(e){return typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:JSON.stringify(e)}},Ml=class{sendEvent(e,r){return S(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return S(this,void 0,void 0,function*(){return Promise.resolve()})}},Ll=window.fetch,Vo=class{constructor(e){this.opts=e}sendEvent(e,r){return S(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:a,preprocessRequest:i}=this.opts,o=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",s={url:`${n}/analytics/${e}${o}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},s),i?yield i(s,"analyticsFetch"):{}),{url:c}=u,l=Ye(u,["url"]),p=yield Ll(c,l);if(p.ok){let g=yield p.json();return g.visitorId&&a.setCurrentVisitorId(g.visitorId),g}else{try{p.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,p,r),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return S(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts,r=`${e}/analytics/visit`;yield Ll(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return[_.click,_.custom,_.search,_.view].indexOf(e)!==-1}getVisitorIdParam(){return S(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,r=yield e.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},jl=class{constructor(e,r){Io()&&Sl()?this.storage=new Al:Io()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new sr),this.client=new Vo(e),this.beaconClient=new Nl(e),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:a,payload:i}of n)this.beaconClient.sendEvent(a,i)})}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Ul=class{constructor(e,r){this.storage=r||new sr,this.client=new Vo(e)}getClientDependingOnEventType(e){return this.client}},Ql=class{constructor(){this.storage=new sr,this.client=new Ml}getClientDependingOnEventType(e){return this.client}},Rh="xx",xh=t=>(t==null?void 0:t.startsWith(Rh))||!1,Fh=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function wh(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var Ph=["1",1,"yes",!0];function zr(){return Po()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(t=>Ph.indexOf(t)!==-1)}var Bl="v15",_l={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Ih(t=_l.default,e=Bl,r=!1){if(t=t.replace(/\/$/,""),r)return`${t}/${e}`;let n=t.endsWith("/rest")||t.endsWith("/rest/ua");return`${t}${n?"":"/rest"}/${e}`}var kh="38824e1f-37f5-42d3-8372-a4b8fa9df946",Re=class{get defaultOptions(){return{endpoint:_l.default,isCustomEndpoint:!1,token:"",version:Bl,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Il}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[vy,hy].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),zr()&&(this.clear(),this.runtime.storage=new sr),this.addEventTypeMapping(_.view,{newEventType:_.view,addClientIdParameter:!0}),this.addEventTypeMapping(_.click,{newEventType:_.click,addClientIdParameter:!0}),this.addEventTypeMapping(_.custom,{newEventType:_.custom,addClientIdParameter:!0}),this.addEventTypeMapping(_.search,{newEventType:_.search,addClientIdParameter:!0})}initRuntime(e){return my()&&ir()?new jl(e,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(wh()&&console.warn(Fh),new Ul(e))}get storage(){return this.runtime.storage}determineVisitorId(){return S(this,void 0,void 0,function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||jt()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),jt()}})}getCurrentVisitorId(){return S(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return S(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,r){return S(this,void 0,void 0,function*(){if(ua(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Pl(e,Pl(r,kh)))}})}getParameters(e,...r){return S(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...r)})}getPayload(e,...r){return S(this,void 0,void 0,function*(){let n=yield this.resolveParameters(e,...r);return yield this.resolvePayloadForParameters(e,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(jt()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(zr())return null;try{let r=new URL(e).searchParams.get(Ke.cvo_cid);if(r==null)return null;let n=Ke.fromString(r);return!n||!ir()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(e,...r){return S(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:a=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:o=!1}=this.eventTypeMapping[e]||{};return yield[d=>n.length>0?this.parseVariableArgumentsPayload(n,d):d[0],d=>S(this,void 0,void 0,function*(){return Object.assign(Object.assign({},d),{visitorId:a?yield this.getCurrentVisitorId():""})}),d=>S(this,void 0,void 0,function*(){return o?Object.assign(Object.assign({},d),{clientId:yield this.getCurrentVisitorId()}):d}),d=>i?this.ensureAnonymousUserWhenUsingApiKey(d):d,d=>this.beforeSendHooks.reduce((y,v)=>S(this,void 0,void 0,function*(){let A=yield y;return yield v(e,A)}),d)].reduce((d,y)=>S(this,void 0,void 0,function*(){let v=yield d;return yield y(v)}),Promise.resolve(r))})}resolvePayloadForParameters(e,r){return S(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[e]||{};return yield[p=>this.setTrackingIdIfTrackingIdNotPresent(p),p=>this.removeEmptyPayloadValues(p,e),p=>this.validateParams(p,e),p=>n?gh(p):p,p=>n?this.removeUnknownParameters(p):p,p=>n?this.processCustomParameters(p):this.mapCustomParametersToCustomData(p)].reduce((p,g)=>S(this,void 0,void 0,function*(){let d=yield p;return yield g(d)}),Promise.resolve(r))})}makeEvent(e,...r){return S(this,void 0,void 0,function*(){let{newEventType:n=e}=this.eventTypeMapping[e]||{},a=yield this.resolveParameters(e,...r),i=yield this.resolvePayloadForParameters(e,a);return{eventType:n,payload:i,log:o=>S(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},i),o)}),yield Promise.all(this.afterSendHooks.map(s=>s(e,Object.assign(Object.assign({},a),o)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e,...r){return S(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...r)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return S(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:r,payload:n}=e;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new $r().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return S(this,void 0,void 0,function*(){return this.makeEvent(_.search,e)})}sendSearchEvent(e){var{searchQueryUid:r}=e,n=Ye(e,["searchQueryUid"]);return S(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(e){return S(this,void 0,void 0,function*(){return this.makeEvent(_.click,e)})}sendClickEvent(e){var{searchQueryUid:r}=e,n=Ye(e,["searchQueryUid"]);return S(this,void 0,void 0,function*(){return(yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(e){return S(this,void 0,void 0,function*(){return this.makeEvent(_.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:r}=e,n=Ye(e,["lastSearchQueryUid"]);return S(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(e){return S(this,void 0,void 0,function*(){return this.makeEvent(_.view,e)})}sendViewEvent(e){return S(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return S(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return S(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,r){this.eventTypeMapping[e]=r}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(r=>typeof r=="string"))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,r){let n={};for(let a=0,i=r.length;a<i;a++){let o=r[a];if(typeof o=="string")n[e[a]]=o;else if(typeof o=="object")return Object.assign(Object.assign({},n),o)}return n}isKeyAllowedEmpty(e,r){return({[_.search]:["queryText"]}[e]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(e,r){let n=a=>typeof a!="undefined"&&a!==null&&a!=="";return Object.keys(e).filter(a=>this.isKeyAllowedEmpty(r,a)||n(e[a])).reduce((a,i)=>Object.assign(Object.assign({},a),{[i]:e[i]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(n=>{if(vh(n))return!0;console.log(n,"is not processed by coveoua")}).reduce((n,a)=>Object.assign(Object.assign({},n),{[a]:e[a]}),{})}processCustomParameters(e){let{custom:r}=e,n=Ye(e,["custom"]),a={};r&&la(r)&&(a=this.lowercaseKeys(r));let i=Ah(n);return Object.assign(Object.assign({},a),i)}mapCustomParametersToCustomData(e){let{custom:r}=e,n=Ye(e,["custom"]);if(r&&la(r)){let a=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},a),e.customData)})}else return e}lowercaseKeys(e){let r=Object.keys(e),n={};return r.forEach(a=>{n[a.toLowerCase()]=e[a]}),n}validateParams(e,r){let{anonymizeIp:n}=e,a=Ye(e,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(a.anonymizeIp=1),(r==_.view||r==_.click||r==_.search||r==_.custom)&&(a.originLevel3=this.limit(a.originLevel3,128)),r==_.view&&(a.location=this.limit(a.location,128)),(r=="pageview"||r=="event")&&(a.referrer=this.limit(a.referrer,2048),a.location=this.limit(a.location,2048),a.page=this.limit(a.page,2048)),a}ensureAnonymousUserWhenUsingApiKey(e){let{userId:r}=e,n=Ye(e,["userId"]);return xh(this.options.token)&&!r?(n.userId="anonymous",n):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:r}=e,n=Ye(e,["trackingId"]);return r?e:(n.hasOwnProperty("custom")&&la(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&la(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(e,r){return typeof e!="string"?e:e.substring(0,r)}get baseUrl(){return Ih(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},ge;(function(t){t.contextChanged="contextChanged",t.expandToFullUI="expandToFullUI",t.openUserActions="openUserActions",t.showPrecedingSessions="showPrecedingSessions",t.showFollowingSessions="showFollowingSessions",t.clickViewedDocument="clickViewedDocument",t.clickPageView="clickPageView",t.createArticle="createArticle"})(ge||(ge={}));var f;(function(t){t.interfaceLoad="interfaceLoad",t.interfaceChange="interfaceChange",t.didyoumeanAutomatic="didyoumeanAutomatic",t.didyoumeanClick="didyoumeanClick",t.resultsSort="resultsSort",t.searchboxSubmit="searchboxSubmit",t.searchboxClear="searchboxClear",t.searchboxAsYouType="searchboxAsYouType",t.breadcrumbFacet="breadcrumbFacet",t.breadcrumbResetAll="breadcrumbResetAll",t.documentQuickview="documentQuickview",t.documentOpen="documentOpen",t.omniboxAnalytics="omniboxAnalytics",t.omniboxFromLink="omniboxFromLink",t.searchFromLink="searchFromLink",t.triggerNotify="notify",t.triggerExecute="execute",t.triggerQuery="query",t.undoTriggerQuery="undoQuery",t.triggerRedirect="redirect",t.pagerResize="pagerResize",t.pagerNumber="pagerNumber",t.pagerNext="pagerNext",t.pagerPrevious="pagerPrevious",t.pagerScrolling="pagerScrolling",t.staticFilterClearAll="staticFilterClearAll",t.staticFilterSelect="staticFilterSelect",t.staticFilterDeselect="staticFilterDeselect",t.facetClearAll="facetClearAll",t.facetSearch="facetSearch",t.facetSelect="facetSelect",t.facetSelectAll="facetSelectAll",t.facetDeselect="facetDeselect",t.facetExclude="facetExclude",t.facetUnexclude="facetUnexclude",t.facetUpdateSort="facetUpdateSort",t.facetShowMore="showMoreFacetResults",t.facetShowLess="showLessFacetResults",t.queryError="query",t.queryErrorBack="errorBack",t.queryErrorClear="errorClearQuery",t.queryErrorRetry="errorRetry",t.recommendation="recommendation",t.recommendationInterfaceLoad="recommendationInterfaceLoad",t.recommendationOpen="recommendationOpen",t.likeSmartSnippet="likeSmartSnippet",t.dislikeSmartSnippet="dislikeSmartSnippet",t.expandSmartSnippet="expandSmartSnippet",t.collapseSmartSnippet="collapseSmartSnippet",t.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",t.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",t.sendSmartSnippetReason="sendSmartSnippetReason",t.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",t.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",t.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",t.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",t.openSmartSnippetSource="openSmartSnippetSource",t.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",t.openSmartSnippetInlineLink="openSmartSnippetInlineLink",t.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",t.recentQueryClick="recentQueriesClick",t.clearRecentQueries="clearRecentQueries",t.recentResultClick="recentResultClick",t.clearRecentResults="clearRecentResults",t.noResultsBack="noResultsBack",t.showMoreFoldedResults="showMoreFoldedResults",t.showLessFoldedResults="showLessFoldedResults",t.copyToClipboard="copyToClipboard",t.caseSendEmail="Case.SendEmail",t.feedItemTextPost="FeedItem.TextPost",t.caseAttach="caseAttach",t.caseDetach="caseDetach",t.retryGeneratedAnswer="retryGeneratedAnswer",t.likeGeneratedAnswer="likeGeneratedAnswer",t.dislikeGeneratedAnswer="dislikeGeneratedAnswer",t.openGeneratedAnswerSource="openGeneratedAnswerSource",t.generatedAnswerStreamEnd="generatedAnswerStreamEnd",t.generatedAnswerSourceHover="generatedAnswerSourceHover",t.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",t.generatedAnswerHideAnswers="generatedAnswerHideAnswers",t.generatedAnswerShowAnswers="generatedAnswerShowAnswers",t.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",t.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(f||(f={}));var No={[f.triggerNotify]:"queryPipelineTriggers",[f.triggerExecute]:"queryPipelineTriggers",[f.triggerQuery]:"queryPipelineTriggers",[f.triggerRedirect]:"queryPipelineTriggers",[f.queryError]:"errors",[f.queryErrorBack]:"errors",[f.queryErrorClear]:"errors",[f.queryErrorRetry]:"errors",[f.pagerNext]:"getMoreResults",[f.pagerPrevious]:"getMoreResults",[f.pagerNumber]:"getMoreResults",[f.pagerResize]:"getMoreResults",[f.pagerScrolling]:"getMoreResults",[f.facetSearch]:"facet",[f.facetShowLess]:"facet",[f.facetShowMore]:"facet",[f.recommendation]:"recommendation",[f.likeSmartSnippet]:"smartSnippet",[f.dislikeSmartSnippet]:"smartSnippet",[f.expandSmartSnippet]:"smartSnippet",[f.collapseSmartSnippet]:"smartSnippet",[f.openSmartSnippetFeedbackModal]:"smartSnippet",[f.closeSmartSnippetFeedbackModal]:"smartSnippet",[f.sendSmartSnippetReason]:"smartSnippet",[f.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.clearRecentQueries]:"recentQueries",[f.recentResultClick]:"recentlyClickedDocuments",[f.clearRecentResults]:"recentlyClickedDocuments",[f.showLessFoldedResults]:"folding",[f.caseDetach]:"case",[f.likeGeneratedAnswer]:"generatedAnswer",[f.dislikeGeneratedAnswer]:"generatedAnswer",[f.openGeneratedAnswerSource]:"generatedAnswer",[f.generatedAnswerStreamEnd]:"generatedAnswer",[f.generatedAnswerSourceHover]:"generatedAnswer",[f.generatedAnswerCopyToClipboard]:"generatedAnswer",[f.generatedAnswerHideAnswers]:"generatedAnswer",[f.generatedAnswerShowAnswers]:"generatedAnswer",[f.generatedAnswerFeedbackSubmit]:"generatedAnswer",[ge.expandToFullUI]:"interface",[ge.openUserActions]:"User Actions",[ge.showPrecedingSessions]:"User Actions",[ge.showFollowingSessions]:"User Actions",[ge.clickViewedDocument]:"User Actions",[ge.clickPageView]:"User Actions",[ge.createArticle]:"createArticle"},Ut=class{constructor(){this.runtime=new Ql,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(_.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(_.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(_.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(_.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Il}};function Eh(t){let e="";return t.filter(r=>{let n=r!==e;return e=r,n})}function Oh(t){return t.map(e=>e.replace(/;/g,""))}function $l(t){let e=256,r=t.join(";");return r.length<=e?r:$l(t.slice(1))}var Hl=t=>{let e=Oh(t),r=Eh(e);return $l(r)};function zl(t){let e=typeof t.partialQueries=="string"?t.partialQueries:Hl(t.partialQueries),r=typeof t.suggestions=="string"?t.suggestions:Hl(t.suggestions);return Object.assign(Object.assign({},t),{partialQueries:e,suggestions:r})}var Qt=class{constructor(e,r){this.opts=e,this.provider=r;let n=e.enableAnalytics===!1||zr();this.coveoAnalyticsClient=n?new Ut:new Re(e)}disable(){this.coveoAnalyticsClient instanceof Re&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Ut}enable(){this.coveoAnalyticsClient=new Re(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(f.interfaceLoad)}logInterfaceLoad(){return S(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(f.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return S(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(f.recommendation)}logRecommendation(){return S(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,r){return this.makeClickEvent(f.recommendationOpen,e,r)}logRecommendationOpen(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(f.staticFilterClearAll,e)}logStaticFilterClearAll(e){return S(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(f.staticFilterSelect,e)}logStaticFilterSelect(e){return S(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(f.staticFilterDeselect,e)}logStaticFilterDeselect(e){return S(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(f.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return S(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(f.interfaceChange,e)}logInterfaceChange(e){return S(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(f.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return S(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(f.didyoumeanClick)}logDidYouMeanClick(){return S(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(f.resultsSort,e)}logResultsSort(e){return S(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(f.searchboxSubmit)}logSearchboxSubmit(){return S(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(f.searchboxClear)}logSearchboxClear(){return S(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(f.searchboxAsYouType)}logSearchboxAsYouType(){return S(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(f.breadcrumbFacet,e)}logBreadcrumbFacet(e){return S(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(f.breadcrumbResetAll)}logBreadcrumbResetAll(){return S(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,r){return this.makeClickEvent(f.documentQuickview,e,r)}logDocumentQuickview(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,r){return this.makeClickEvent(f.documentOpen,e,r)}logDocumentOpen(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(f.omniboxAnalytics,zl(e))}logOmniboxAnalytics(e){return S(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(f.omniboxFromLink,zl(e))}logOmniboxFromLink(e){return S(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(f.searchFromLink)}logSearchFromLink(){return S(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(f.triggerNotify,e)}logTriggerNotify(e){return S(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(f.triggerExecute,e)}logTriggerExecute(e){return S(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(f.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return S(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(f.undoTriggerQuery,e)}logUndoTriggerQuery(e){return S(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(f.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return S(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(f.pagerResize,e)}logPagerResize(e){return S(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(f.pagerNumber,e)}logPagerNumber(e){return S(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(f.pagerNext,e)}logPagerNext(e){return S(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(f.pagerPrevious,e)}logPagerPrevious(e){return S(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(f.pagerScrolling)}logPagerScrolling(){return S(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(f.facetClearAll,e)}logFacetClearAll(e){return S(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(f.facetSearch,e)}logFacetSearch(e){return S(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(f.facetSelect,e)}logFacetSelect(e){return S(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(f.facetDeselect,e)}logFacetDeselect(e){return S(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(f.facetExclude,e)}logFacetExclude(e){return S(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(f.facetUnexclude,e)}logFacetUnexclude(e){return S(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(f.facetSelectAll,e)}logFacetSelectAll(e){return S(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(f.facetUpdateSort,e)}logFacetUpdateSort(e){return S(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(f.facetShowMore,e)}logFacetShowMore(e){return S(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(f.facetShowLess,e)}logFacetShowLess(e){return S(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(f.queryError,e)}logQueryError(e){return S(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return S(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(f.queryErrorBack);return{description:e.description,log:()=>S(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorBack)})}})}logQueryErrorBack(){return S(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return S(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(f.queryErrorRetry);return{description:e.description,log:()=>S(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorRetry)})}})}logQueryErrorRetry(){return S(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return S(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(f.queryErrorClear);return{description:e.description,log:()=>S(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorClear)})}})}logQueryErrorClear(){return S(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(f.likeSmartSnippet)}logLikeSmartSnippet(){return S(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(f.dislikeSmartSnippet)}logDislikeSmartSnippet(){return S(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(f.expandSmartSnippet)}logExpandSmartSnippet(){return S(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(f.collapseSmartSnippet)}logCollapseSmartSnippet(){return S(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(f.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return S(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(f.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return S(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,r){return this.makeCustomEvent(f.sendSmartSnippetReason,{reason:e,details:r})}logSmartSnippetFeedbackReason(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(f.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return S(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(f.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return S(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(f.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return S(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(f.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return S(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,r){return this.makeClickEvent(f.openSmartSnippetSource,e,r)}logOpenSmartSnippetSource(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,r){return this.makeClickEvent(f.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(e,r){return this.makeClickEvent(f.copyToClipboard,e,r)}logCopyToClipboard(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,r){return this.makeClickEvent(f.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,r){return this.makeClickEvent(f.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(f.recentQueryClick)}logRecentQueryClick(){return S(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(f.clearRecentQueries)}logClearRecentQueries(){return S(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,r){return this.makeCustomEvent(f.recentResultClick,{info:e,identifier:r})}logRecentResultClick(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(f.clearRecentResults)}logClearRecentResults(){return S(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(f.noResultsBack)}logNoResultsBack(){return S(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,r){return this.makeClickEvent(f.showMoreFoldedResults,e,r)}logShowMoreFoldedResults(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(f.showLessFoldedResults)}logShowLessFoldedResults(){return S(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,r){var n;return{actionCause:r,customData:(n=e.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(e,r,n=No[e]){return S(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(a)),{eventType:n,eventValue:e}),o=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(o,e),log:({searchUID:s})=>o.log({lastSearchQueryUid:s})}})}logCustomEvent(e,r,n=No[e]){return S(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,r,n)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,r,n){return S(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(a)),{eventType:r,eventValue:e}),o=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(o,e),log:({searchUID:s})=>o.log({lastSearchQueryUid:s})}})}logCustomEventWithType(e,r,n){return S(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,r){return S(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,r){return S(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(e,r),a=yield this.coveoAnalyticsClient.makeSearchEvent(n);return{description:this.makeEventDescription(a,e),log:({searchUID:i})=>a.log({searchQueryUid:i})}})}makeClickEvent(e,r,n,a){return S(this,void 0,void 0,function*(){let i=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),a))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),o=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(o,e),log:({searchUID:s})=>o.log({searchQueryUid:s})}})}logClickEvent(e,r,n,a){return S(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,r,n,a)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var n,a;return S(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(a=(n=this.provider).getGeneratedAnswerMetadata)===null||a===void 0?void 0:a.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return S(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Re?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(f.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return S(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(f.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return S(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(f.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return S(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(f.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return S(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(f.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return S(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(f.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return S(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(f.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return S(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(f.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return S(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(f.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return S(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(f.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return S(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(f.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return S(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}},pa=Object.assign({},Hr),Gl=Object.keys(pa).map(t=>pa[t]),Gr=class extends El{constructor({client:e,uuidGenerator:r=jt}){super({client:e,uuidGenerator:r});this.ticket={}}getApi(e){let r=super.getApi(e);if(r!==null)return r;switch(e){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((e,...[r])=>Gl.indexOf(e)!==-1?this.addSVCDataToPayload(e,r):r),this.client.registerAfterSendEventHook((e,...[r])=>(Gl.indexOf(e)!==-1&&this.updateLocationInformation(e,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(pa.pageview,{newEventType:_.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(pa.event,{newEventType:_.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,r){var n;let a=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,r)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys((n=this.actionData)!==null&&n!==void 0?n:{}).length>0?{svcActionData:this.actionData}:{}),i=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},i),a),r)}getTicketPayload(){return My(this.ticket)}};Gr.Id="svc";var fa;(function(t){t.click="click",t.flowStart="flowStart"})(fa||(fa={}));var _e;(function(t){t.enterInterface="ticket_create_start",t.fieldUpdate="ticket_field_update",t.fieldSuggestionClick="ticket_classification_click",t.suggestionClick="suggestion_click",t.suggestionRate="suggestion_rate",t.nextCaseStep="ticket_next_stage",t.caseCancelled="ticket_cancel",t.caseSolved="ticket_cancel",t.caseCreated="ticket_create"})(_e||(_e={}));var ma;(function(t){t.quit="Quit",t.solved="Solved"})(ma||(ma={}));var Mo=class{constructor(e,r){var n;this.options=e,this.provider=r;let a=((n=e.enableAnalytics)!==null&&n!==void 0?n:!0)&&!zr();this.coveoAnalyticsClient=a?new Re(e):new Ut,this.svc=new Gr({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof Re&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Ut,this.svc=new Gr({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Re(this.options),this.svc=new Gr({client:this.coveoAnalyticsClient})}logEnterInterface(e){return this.svc.setAction(_e.enterInterface),this.svc.setTicket(e.ticket),this.sendFlowStartEvent()}logUpdateCaseField(e){return this.svc.setAction(_e.fieldUpdate,{fieldName:e.fieldName}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectFieldSuggestion(e){return this.svc.setAction(_e.fieldSuggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(e){return this.svc.setAction(_e.suggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logRateDocumentSuggestion(e){return this.svc.setAction(_e.suggestionRate,Object.assign({rate:e.rating},e.suggestion)),this.svc.setTicket(e.ticket),this.sendClickEvent()}logMoveToNextCaseStep(e){return this.svc.setAction(_e.nextCaseStep,{stage:e==null?void 0:e.stage}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCancelled(e){return this.svc.setAction(_e.caseCancelled,{reason:ma.quit}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseSolved(e){return this.svc.setAction(_e.caseSolved,{reason:ma.solved}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCreated(e){return this.svc.setAction(_e.caseCreated),this.svc.setTicket(e.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",fa.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",fa.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},qh=t=>{let e={};return t.caseContext&&Object.keys(t.caseContext).forEach(r=>{var n;let a=(n=t.caseContext)===null||n===void 0?void 0:n[r];if(a){let i=`context_${r}`;e[i]=a}}),e},T=(t,e=!0)=>{let{caseContext:r,caseId:n,caseNumber:a}=t,i=Ye(t,["caseContext","caseId","caseNumber"]),o=qh(t);return Object.assign(Object.assign(Object.assign({CaseId:n,CaseNumber:a},i),!!o.context_Case_Subject&&{CaseSubject:o.context_Case_Subject}),e&&o)},Lo=class{constructor(e,r){this.opts=e,this.provider=r;let n=e.enableAnalytics===!1||zr();this.coveoAnalyticsClient=n?new Ut:new Re(e)}disable(){this.coveoAnalyticsClient instanceof Re&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Ut}enable(){this.coveoAnalyticsClient=new Re(this.opts)}logInterfaceLoad(e){if(e){let r=T(e);return this.logSearchEvent(f.interfaceLoad,r)}return this.logSearchEvent(f.interfaceLoad)}logInterfaceChange(e){let r=T(e);return this.logSearchEvent(f.interfaceChange,r)}logStaticFilterDeselect(e){let r=T(e);return this.logSearchEvent(f.staticFilterDeselect,r)}logFetchMoreResults(e){if(e){let r=T(e);return this.logCustomEvent(f.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(f.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(e){let r=T(e);return this.logSearchEvent(f.breadcrumbFacet,r)}logBreadcrumbResetAll(e){if(e){let r=T(e);return this.logSearchEvent(f.breadcrumbResetAll,r)}return this.logSearchEvent(f.breadcrumbResetAll)}logFacetSelect(e){let r=T(e);return this.logSearchEvent(f.facetSelect,r)}logFacetExclude(e){let r=T(e);return this.logSearchEvent(f.facetExclude,r)}logFacetDeselect(e){let r=T(e);return this.logSearchEvent(f.facetDeselect,r)}logFacetUpdateSort(e){let r=T(e);return this.logSearchEvent(f.facetUpdateSort,r)}logFacetClearAll(e){let r=T(e);return this.logSearchEvent(f.facetClearAll,r)}logFacetShowMore(e){let r=T(e,!1);return this.logCustomEvent(f.facetShowMore,r)}logFacetShowLess(e){let r=T(e,!1);return this.logCustomEvent(f.facetShowLess,r)}logQueryError(e){let r=T(e,!1);return this.logCustomEvent(f.queryError,r)}logPagerNumber(e){let r=T(e,!1);return this.logCustomEvent(f.pagerNumber,r)}logPagerNext(e){let r=T(e,!1);return this.logCustomEvent(f.pagerNext,r)}logPagerPrevious(e){let r=T(e,!1);return this.logCustomEvent(f.pagerPrevious,r)}logDidYouMeanAutomatic(e){if(e){let r=T(e);return this.logSearchEvent(f.didyoumeanAutomatic,r)}return this.logSearchEvent(f.didyoumeanAutomatic)}logDidYouMeanClick(e){if(e){let r=T(e);return this.logSearchEvent(f.didyoumeanClick,r)}return this.logSearchEvent(f.didyoumeanClick)}logResultsSort(e){let r=T(e);return this.logSearchEvent(f.resultsSort,r)}logSearchboxSubmit(e){if(e){let r=T(e);return this.logSearchEvent(f.searchboxSubmit,r)}return this.logSearchEvent(f.searchboxSubmit)}logContextChanged(e){let r=T(e);return this.logSearchEvent(ge.contextChanged,r)}logExpandToFullUI(e){let r=T(e);return this.logCustomEvent(ge.expandToFullUI,r)}logOpenUserActions(e){let r=T(e,!1);return this.logCustomEvent(ge.openUserActions,r)}logShowPrecedingSessions(e){let r=T(e,!1);return this.logCustomEvent(ge.showPrecedingSessions,r)}logShowFollowingSessions(e){let r=T(e,!1);return this.logCustomEvent(ge.showFollowingSessions,r)}logViewedDocumentClick(e,r){return this.logCustomEvent(ge.clickViewedDocument,Object.assign(Object.assign({},T(r,!1)),{document:e}))}logPageViewClick(e,r){return this.logCustomEvent(ge.clickPageView,Object.assign(Object.assign({},T(r,!1)),{pageView:e}))}logCreateArticle(e,r){return this.logCustomEvent(ge.createArticle,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logDocumentOpen(e,r,n){return this.logClickEvent(f.documentOpen,e,r,n?T(n,!1):void 0)}logCopyToClipboard(e,r,n){return this.logClickEvent(f.copyToClipboard,e,r,n?T(n,!1):void 0)}logCaseSendEmail(e,r,n){return this.logClickEvent(f.caseSendEmail,e,r,n?T(n,!1):void 0)}logFeedItemTextPost(e,r,n){return this.logClickEvent(f.feedItemTextPost,e,r,n?T(n,!1):void 0)}logDocumentQuickview(e,r,n){let a={documentTitle:e.documentTitle,documentURL:e.documentUrl};return this.logClickEvent(f.documentQuickview,e,r,n?Object.assign(Object.assign({},T(n,!1)),a):a)}logCaseAttach(e,r,n){let a={documentTitle:e.documentTitle,documentURL:e.documentUrl,resultUriHash:e.documentUriHash};return this.logClickEvent(f.caseAttach,e,r,n?Object.assign(Object.assign({},T(n,!1)),a):a)}logCaseDetach(e,r){return this.logCustomEvent(f.caseDetach,r?Object.assign(Object.assign({},T(r,!1)),{resultUriHash:e}):{resultUriHash:e})}logLikeSmartSnippet(e){return this.logCustomEvent(f.likeSmartSnippet,e?T(e,!1):void 0)}logDislikeSmartSnippet(e){return this.logCustomEvent(f.dislikeSmartSnippet,e?T(e,!1):void 0)}logExpandSmartSnippet(e){return this.logCustomEvent(f.expandSmartSnippet,e?T(e,!1):void 0)}logCollapseSmartSnippet(e){return this.logCustomEvent(f.collapseSmartSnippet,e?T(e,!1):void 0)}logOpenSmartSnippetFeedbackModal(e){return this.logCustomEvent(f.openSmartSnippetFeedbackModal,e?T(e,!1):void 0)}logCloseSmartSnippetFeedbackModal(e){return this.logCustomEvent(f.closeSmartSnippetFeedbackModal,e?T(e,!1):void 0)}logSmartSnippetFeedbackReason(e,r,n){return this.logCustomEvent(f.sendSmartSnippetReason,n?Object.assign(Object.assign({},T(n,!1)),{reason:e,details:r}):{reason:e,details:r})}logExpandSmartSnippetSuggestion(e,r){let n="documentId"in e?e:{documentId:e};return this.logCustomEvent(f.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},T(r,!1)),n):n)}logCollapseSmartSnippetSuggestion(e,r){let n="documentId"in e?e:{documentId:e};return this.logCustomEvent(f.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},T(r,!1)),n):n)}logOpenSmartSnippetSource(e,r,n){return this.logClickEvent(f.openSmartSnippetSource,e,r,n?T(n,!1):void 0)}logOpenSmartSnippetSuggestionSource(e,r,n){return this.logClickEvent(f.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},n?Object.assign(Object.assign({},T(n,!1)),r):r)}logOpenSmartSnippetInlineLink(e,r,n){return this.logClickEvent(f.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},n?Object.assign(Object.assign({},T(n,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(e,r,n){return this.logClickEvent(f.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},n?Object.assign(Object.assign({},T(n,!1)),r):r)}logLikeGeneratedAnswer(e,r){return this.logCustomEvent(f.likeGeneratedAnswer,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logDislikeGeneratedAnswer(e,r){return this.logCustomEvent(f.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logOpenGeneratedAnswerSource(e,r){return this.logCustomEvent(f.openGeneratedAnswerSource,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logGeneratedAnswerSourceHover(e,r){return this.logCustomEvent(f.generatedAnswerSourceHover,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logGeneratedAnswerCopyToClipboard(e,r){return this.logCustomEvent(f.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logGeneratedAnswerHideAnswers(e,r){return this.logCustomEvent(f.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logGeneratedAnswerShowAnswers(e,r){return this.logCustomEvent(f.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logGeneratedAnswerFeedbackSubmit(e,r){return this.logCustomEvent(f.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logRephraseGeneratedAnswer(e,r){return this.logSearchEvent(f.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logRetryGeneratedAnswer(e){return this.logSearchEvent(f.retryGeneratedAnswer,e?Object.assign({},T(e,!1)):{})}logGeneratedAnswerStreamEnd(e,r){return this.logCustomEvent(f.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},T(r,!1)),e):e)}logCustomEvent(e,r){return S(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(n)),{eventType:No[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(a)})}logSearchEvent(e,r){return S(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,r))})}logClickEvent(e,r,n,a){return S(this,void 0,void 0,function*(){let i=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),a))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(i)})}logShowMoreFoldedResults(e,r,n){return S(this,void 0,void 0,function*(){return this.logClickEvent(f.showMoreFoldedResults,e,r,n?T(n,!1):void 0)})}logShowLessFoldedResults(e){return S(this,void 0,void 0,function*(){return this.logCustomEvent(f.showLessFoldedResults,e?T(e,!1):void 0)})}getBaseCustomEventRequest(e){return S(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var n,a;return S(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(a=(n=this.provider).getGeneratedAnswerMetadata)===null||a===void 0?void 0:a.call(n)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return S(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Re?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};var Ae=t=>new Re(t).getCurrentVisitorId(),jo=t=>{let e=new Re(t);e.clear(),e.deleteHttpOnlyVisitorId()},Je=new xl.HistoryStore,Xe=(t,e)=>typeof e=="function"?(...r)=>{let n=Vr(r[0]);try{return e.apply(e,r)}catch(a){return t.error(a,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,Ze=(t,e)=>(...r)=>{let n=Vr(r[1]);try{return e.apply(e,r)}catch(a){return t.error(a,"Error in analytics hook. Returning original request."),n}};var Uo=m("tab/register",t=>{let e=new O({values:{id:C,expression:X}});return h(t,e)}),Bt=m("tab/updateActiveTab",t=>h(t,C));var ya=qe(ga()),Kl=qe(Wl()),Jl=qe(Yl());ya.default.extend(Jl.default);ya.default.extend(Kl.default);var Go="/rest/search/v2",Wo="/rest/ua",Xl=()=>({organizationId:"",accessToken:"",platformUrl:Ui(),search:{apiBaseUrl:`${Ui()}${Go}`,locale:"en-US",timezone:ya.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${qu()}${Wo}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}});function Th(t,e){if(Tu(t))return t.replace(/^(https:\/\/)platform/,"$1analytics")+Wo;let n=Du(t,e);return n?ji(e,n.environment).analytics:t}var ed=P(Xl(),t=>t.addCase(Mt,(e,r)=>{r.payload.accessToken&&(e.accessToken=r.payload.accessToken),r.payload.organizationId&&(e.organizationId=r.payload.organizationId),r.payload.platformUrl&&(e.platformUrl=r.payload.platformUrl,e.search.apiBaseUrl=`${r.payload.platformUrl}${Go}`,e.analytics.apiBaseUrl=Th(r.payload.platformUrl,e.organizationId))}).addCase(Lt,(e,r)=>{r.payload.apiBaseUrl&&(e.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(e.search.locale=r.payload.locale),r.payload.timezone&&(e.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(e.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(Ur,(e,r)=>{H(r.payload.enabled)||(!r.payload.enabled&&e.analytics.enabled&&jo(e.analytics),e.analytics.enabled=r.payload.enabled),H(r.payload.originContext)||(e.analytics.originContext=r.payload.originContext),H(r.payload.originLevel2)||(e.analytics.originLevel2=r.payload.originLevel2),H(r.payload.originLevel3)||(e.analytics.originLevel3=r.payload.originLevel3),H(r.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=r.payload.apiBaseUrl),H(r.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),H(r.payload.trackingId)||(e.analytics.trackingId=r.payload.trackingId),H(r.payload.analyticsMode)||(e.analytics.analyticsMode=r.payload.analyticsMode);let n=(0,Zl.default)();n&&(e.analytics.analyticsMode="next",e.analytics.trackingId=n),H(r.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),H(r.payload.anonymous)||(e.analytics.anonymous=r.payload.anonymous),H(r.payload.deviceId)||(e.analytics.deviceId=r.payload.deviceId),H(r.payload.userDisplayName)||(e.analytics.userDisplayName=r.payload.userDisplayName),H(r.payload.documentLocation)||(e.analytics.documentLocation=r.payload.documentLocation)}).addCase(Qr,e=>{e.analytics.enabled=!1,jo(e.analytics)}).addCase(Br,e=>{e.analytics.enabled=!0}).addCase(Ro,(e,r)=>{e.analytics.originLevel2=r.payload.originLevel2}).addCase(xo,(e,r)=>{e.analytics.originLevel3=r.payload.originLevel3}).addCase(Bt,(e,r)=>{e.analytics.originLevel2=r.payload}).addCase(Z,(e,r)=>{e.analytics.originLevel2=r.payload.tab||e.analytics.originLevel2}));var Fe=ed;function Dh(t){return t.instantlyCallable}var td=()=>t=>e=>t(Dh(e)?e():e);var rd=t=>()=>e=>r=>{var a;if(!r.error)return e(r);let n=r.error;if(((a=r.payload)==null?void 0:a.ignored)||t.error(n.stack||n.message||n.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return e(r)},nd=t=>e=>r=>n=>(t.debug({action:n,nextState:e.getState()},`Action dispatched: ${n.type}`),r(n));function ad(t,e){let r={...t},n,a=i=>(o,s)=>{let u=i(o,s);return n?n(u,s):u};return{get combinedReducer(){let i=Fu(Object.entries(e).filter(([o])=>!(o in r)).map(([o,s])=>[o,()=>s]));return a(ra({...i,...r}))},containsAll(i){return Object.keys(i).every(s=>s in r)},add(i){Object.keys(i).filter(o=>!(o in r)).forEach(o=>r[o]=i[o])},addCrossReducer(i){n=i}}}function ha(t,e,r){var n,a,i;e===void 0&&(e=50),r===void 0&&(r={});var o=(n=r.isImmediate)!=null&&n,s=(a=r.callback)!=null&&a,u=r.maxWait,c=Date.now(),l=[];function p(){if(u!==void 0){var d=Date.now()-c;if(d+e>=u)return u-d}return e}var g=function(){var d=[].slice.call(arguments),y=this;return new Promise(function(v,A){var b=o&&i===void 0;if(i!==void 0&&clearTimeout(i),i=setTimeout(function(){if(i=void 0,c=Date.now(),!o){var V=t.apply(y,d);s&&s(V),l.forEach(function(N){return(0,N.resolve)(V)}),l=[]}},p()),b){var k=t.apply(y,d);return s&&s(k),v(k)}l.push({resolve:v,reject:A})})};return g.cancel=function(d){i!==void 0&&clearTimeout(i),l.forEach(function(y){return(0,y.reject)(d)}),l=[]},g}function id(t,e){let r=0,n=ha(()=>r=0,500);return a=>i=>async o=>{if(!(typeof o=="function"))return i(o);let u=await i(o);if(!Vh(u))return u;if(typeof e!="function")return t.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return t.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let c=await Nh(e);a.dispatch(Mt({accessToken:c})),a.dispatch(o)}}function Vh(t){var e;return((e=t==null?void 0:t.error)==null?void 0:e.name)===new Dr().name}async function Nh(t){try{return await t()}catch(e){return""}}function od({reducer:t,preloadedState:e,middlewares:r=[],thunkExtraArguments:n,name:a}){return ol({reducer:t,preloadedState:e,devTools:{stateSanitizer:i=>i.history?{...i,history:"<<OMIT>>"}:i,name:a,shouldHotReload:!1},middleware:i=>[...r,...i({thunk:{extraArgument:n}}),nd(n.logger)]})}var Mh={configuration:Fe,version:ml};function Lh(t,e){var o,s;let r=((o=t.configuration.organizationEndpoints)==null?void 0:o.analytics)||void 0,{analyticsClientMiddleware:n,...a}=(s=t.configuration.analytics)!=null?s:{},i={...a,nextApiBaseUrl:`${r}/rest/organizations/${t.configuration.organizationId}/events/v1`,apiBaseUrl:r};return Hn()?(e.info("Analytics disabled since doNotTrack is active."),{...i,enabled:!1}):i}function sd(t,e){var u;let r=jh(t,e),{accessToken:n,organizationId:a}=t.configuration,{organizationEndpoints:i}=t.configuration,o=(i==null?void 0:i.platform)||t.configuration.platformUrl;_h(t)&&r.logger.warn(`The \`platformUrl\` (${t.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Bh(t)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):$h(t)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${t.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(u=t.configuration.organizationEndpoints)==null?void 0:u.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(Mt({accessToken:n,organizationId:a,platformUrl:o}));let s=Lh(t,r.logger);return s&&r.dispatch(Ur(s)),r}function jh(t,e){var o;let{reducers:r}=t,n=ad({...Mh,...r},(o=t.preloadedState)!=null?o:{});t.crossReducer&&n.addCrossReducer(t.crossReducer);let a=e.logger,i=Uh(t,e,n);return{addReducers(s){n.containsAll(s)||(n.add(s),i.replaceReducer(n.combinedReducer))},dispatch:i.dispatch,subscribe:i.subscribe,enableAnalytics(){i.dispatch(Br())},disableAnalytics(){i.dispatch(Qr())},get state(){return i.getState()},logger:a,store:i}}function Uh(t,e,r){let{preloadedState:n,configuration:a}=t,i=a.name||"coveo-headless",o=Qh(t,e.logger);return od({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:e,name:i})}function Qh(t,e){let{renewAccessToken:r}=t.configuration,n=id(e,r);return[td,n,rd(e),gl].concat(t.middlewares||[])}function Bh(t){return ce(t.configuration.organizationEndpoints)}function _h(t){var e;return!H(t.configuration.platformUrl)||H((e=t.configuration.organizationEndpoints)==null?void 0:e.platform)}function $h(t){let{platform:e}=t.configuration.organizationEndpoints;if(ce(e))return!1;let r=Qi(e);return r&&r.organizationId!==t.configuration.organizationId}var yd=qe(gd());function hd(t){return(0,yd.default)({name:"@coveo/headless",level:(t==null?void 0:t.level)||"warn",formatters:{log:t==null?void 0:t.logFormatter}})}function Sd(t,e){let r=cS(t),n=De,a=uS(t);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:a,logger:e}}function cS(t){let{analytics:e}=t,r=(n,a)=>a;return(e==null?void 0:e.analyticsClientMiddleware)||r}function uS(t){return t.preprocessRequest||Bn}var vd={organizationId:C,accessToken:C,platformUrl:new R({required:!1,emptyAllowed:!1}),name:new R({required:!1,emptyAllowed:!1}),analytics:new O({options:{required:!1},values:{enabled:new U({required:!1}),originContext:new R({required:!1}),originLevel2:new R({required:!1}),originLevel3:new R({required:!1}),analyticsMode:new R({constrainTo:["legacy","next"],required:!1})}})};var Ad=new he({...vd,caseAssistId:C,locale:ae});var lS={debug:Co,caseAssistConfiguration:bt,searchHub:oa};function dS(t){let e=hd(t.loggerOptions);pS(t.configuration,e);let r=fS(t.configuration,e),n={...Sd(t.configuration,e),apiClient:r},a={...t,reducers:lS},i=sd(a,n),{caseAssistId:o,locale:s,searchHub:u}=t.configuration;return i.dispatch(aa({caseAssistId:o,locale:s})),H(u)||i.dispatch(jr(u)),{...i,get state(){return i.state}}}function pS(t,e){try{Ad.validate(t)}catch(r){throw e.error(r,"Case Assist engine configuration error"),r}}function fS(t,e){return new zi({logger:e,preprocessRequest:t.preprocessRequest||Bn})}var $t=m("caseAssist/caseInput/update",t=>h(t,{fieldName:C,fieldValue:X}));var Cd=()=>({});var Ft=P(Cd(),t=>{t.addCase($t,(e,r)=>{e[r.payload.fieldName]={value:r.payload.fieldValue}})});function eP(t){return t.addReducers({caseInput:Ft}),{updateCaseInput:$t}}function Kr(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Ce(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:Kr(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:Kr(),extendedResults:{}}}var ba=t=>t.success!==void 0,re=t=>t.error!==void 0;var cr=m("caseAssist/caseField/register",t=>h(t,{fieldName:C,fieldValue:X})),ur=m("caseAssist/caseField/update",t=>h(t,{fieldName:C,fieldValue:X})),et=B("caseAssist/classifications/fetch",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:n}})=>{let a=e(),i=await n.getCaseClassifications(await gS(a));return re(i)?r(i.error):{response:i.success}}),gS=async t=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.platformUrl,caseAssistId:t.caseAssistConfiguration.caseAssistId,...t.configuration.analytics.enabled&&{clientId:await Ae(t.configuration.analytics)},fields:t.caseInput,context:t.caseField?Yn(t.caseField.fields):void 0,locale:t.caseAssistConfiguration.locale,debug:t.debug});var bd=()=>({status:{loading:!1,error:null,lastResponseId:""},fields:{}});var wt=P(bd(),t=>{t.addCase(cr,(e,r)=>{let{fieldName:n,fieldValue:a}=r.payload;e.fields[n]={value:a,suggestions:[]}}).addCase(ur,(e,r)=>{let{fieldName:n,fieldValue:a}=r.payload;e.fields[n].value=a}).addCase(et.rejected,(e,r)=>{var n;e.status.error=(n=r.payload)!=null?n:null,e.status.loading=!1}).addCase(et.fulfilled,(e,r)=>{let n={value:"",suggestions:[]};Object.entries(r.payload.response.fields).forEach(([a,i])=>{e.fields[a]||(e.fields[a]={...n}),e.fields[a].suggestions=i.predictions}),e.status.lastResponseId=r.payload.response.responseId,e.status.error=null,e.status.loading=!1}).addCase(et.pending,e=>{e.status.loading=!0})});function DP(t){return t.addReducers({caseField:wt}),{registerCaseField:cr,updateCaseField:ur,fetchCaseClassifications:et}}var Ne=B("caseAssist/documentSuggestions/fetch",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:n}})=>{let a=e(),i=await n.getDocumentSuggestions(await yS(a));return re(i)?r(i.error):{response:i.success}}),yS=async t=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.platformUrl,caseAssistId:t.caseAssistConfiguration.caseAssistId,...t.configuration.analytics.enabled&&{clientId:await Ae(t.configuration.analytics)},fields:t.caseInput,context:t.caseField?Yn(t.caseField.fields):void 0,locale:t.caseAssistConfiguration.locale,debug:t.debug});var Rd=()=>({status:{loading:!1,error:null,lastResponseId:""},documents:[]});var tt=P(Rd(),t=>{t.addCase(Ne.rejected,(e,r)=>{var n;e.status.error=(n=r.payload)!=null?n:null,e.status.loading=!1}).addCase(Ne.fulfilled,(e,r)=>{e.documents=r.payload.response.documents,e.status.lastResponseId=r.payload.response.responseId,e.status.error=null,e.status.loading=!1}).addCase(Ne.pending,e=>{e.status.loading=!0})});function KP(t){return t.addReducers({documentSuggestion:tt}),{fetchDocumentSuggestions:Ne}}var Ra=class{constructor(e){this.state=e()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||Rt()}},xd=({logger:t,getState:e,analyticsClientMiddleware:r=(i,o)=>o,preprocessRequest:n,provider:a=new Ra(e)})=>{let i=e(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,u=i.configuration.analytics.runtimeEnvironment,c=i.configuration.analytics.enabled,l=new Mo({enableAnalytics:c,token:o,endpoint:s,runtimeEnvironment:u,preprocessRequest:Xe(t,n),beforeSendHooks:[Ze(t,r),(p,g)=>(t.info({...g,type:p,endpoint:s,token:o},"Analytics request"),g)]},a);return c||l.disable(),l};var xa=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var hS=t=>{let e=t.configuration.search.locale.split("-")[0];return!e||e.length!==2?"en":e},dt=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return hS(this.state)}getBaseMetadata(){let{context:e}=this.state,r=(e==null?void 0:e.contextValues)||{},n={};for(let[a,i]of Object.entries(r)){let o=`context_${a}`;n[o]=i}return n.coveoHeadlessVersion=sa,n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Rt()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var lr=class extends dt{constructor(){super(...arguments);this.initialState=xa()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Fd=({logger:t,getState:e,analyticsClientMiddleware:r=(i,o)=>o,preprocessRequest:n,provider:a=new lr(e)})=>{let i=e(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,u=i.configuration.analytics.runtimeEnvironment,c=i.configuration.analytics.enabled,l=new Qt({token:o,endpoint:s,runtimeEnvironment:u,preprocessRequest:Xe(t,n),beforeSendHooks:[Ze(t,r),(p,g)=>(t.info({...g,type:p,endpoint:s,token:o},"Analytics request"),g)]},a);return c||l.disable(),l};var wd=1,Pd=10,Fa=5,Id=1,wa=8;function Pa(){return{desiredCount:Fa,numberOfValues:wa,set:{}}}function Pt(t){let{activeValue:e,ancestryMap:r}=SS(t);return e?vS(e,r):[]}function SS(t){let e=[...t],r=new Map;for(;e.length>0;){let n=e.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let a of n.children)r.set(a,n);e.unshift(...n.children)}return{}}function vS(t,e){let r=[];if(!t)return[];let n=t;do r.unshift(n),n=e.get(n);while(n);return r}var AS=(t,e)=>{var r;return(r=t.categoryFacetSet[e])==null?void 0:r.request};var Zo=(t,e)=>{var n;let r=AS(t,e);return Pt((n=r==null?void 0:r.currentValues)!=null?n:[])};function dr(){return{}}function kd(t){return{request:t}}function pr(){return{}}function Ed(t){return{request:t}}function fr(){return{}}function Od(t){return{request:t,hasBreadcrumbs:!0}}function mr(){return{}}function Ia(t){var e,r,n,a,i;return{facetSet:(e=t.facetSet)!=null?e:mr(),categoryFacetSet:(r=t.categoryFacetSet)!=null?r:dr(),dateFacetSet:(n=t.dateFacetSet)!=null?n:pr(),numericFacetSet:(a=t.numericFacetSet)!=null?a:fr(),automaticFacetSet:(i=t.automaticFacetSet)!=null?i:Pa()}}var ka=t=>{let e=[];return RS(t).forEach((r,n)=>{let a=OS(t,r.facetId),i=kS(r,n+1);if(bS(r)){if(!!!Zo(t,r.facetId).length)return;e.push({...i,...PS(t,r.facetId),facetType:a,state:"selected"});return}r.currentValues.forEach((o,s)=>{if(o.state==="idle")return;let u=qd(o,s+1,a),c=CS(r)?Td(o):FS(o);e.push({...i,...u,...c})})}),xS(t).forEach((r,n)=>{let a=IS(r,n+1);r.values.forEach((i,o)=>{if(i.state==="idle")return;let s=qd(i,o+1,"specific"),u=Td(i);e.push({...a,...s,...u})})}),e},CS=t=>t.type==="specific",bS=t=>t.type==="hierarchical",RS=t=>[...Object.values(t.facetSet),...Object.values(t.categoryFacetSet),...Object.values(t.dateFacetSet),...Object.values(t.numericFacetSet)].map(e=>e.request),xS=t=>[...Object.values(t.automaticFacetSet.set)].map(e=>e.response),qd=(t,e,r)=>({state:t.state,valuePosition:e,facetType:r}),FS=t=>({displayValue:`${t.start}..${t.end}`,value:`${t.start}..${t.end}`,start:t.start,end:t.end,endInclusive:t.endInclusive}),Td=t=>({displayValue:t.value,value:t.value}),wS=(t,e)=>Zo(t,e).map(n=>n.value).join(";"),PS=(t,e)=>{let r=1,n=wS(t,e);return{value:n,valuePosition:r,displayValue:n}},IS=(t,e)=>({title:Dd(t.field,t.field),field:t.field,id:t.field,facetPosition:e}),kS=(t,e)=>({title:Dd(t.field,t.facetId),field:t.field,id:t.facetId,facetPosition:e}),Dd=(t,e)=>`${t}_${e}`,ES=(t,e)=>{var r,n,a,i,o;return((r=t.facetSet[e])==null?void 0:r.request)||((n=t.categoryFacetSet[e])==null?void 0:n.request)||((a=t.dateFacetSet[e])==null?void 0:a.request)||((i=t.numericFacetSet[e])==null?void 0:i.request)||((o=t.automaticFacetSet.set[e])==null?void 0:o.response)},OS=(t,e)=>{let r=ES(t,e);return r?r.type:"specific"};var we=()=>({q:"",enableQuerySyntax:!1});var Ea=class extends dt{getSearchUID(){var r,n;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((n=e.search)==null?void 0:n.response.searchUid)||Ce().response.searchUid}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return ka(Ia(this.state))}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||we().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Ce().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.search)==null?void 0:e.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.results.length)||Ce().response.results.length}},Vd=({logger:t,getState:e,analyticsClientMiddleware:r=(i,o)=>o,preprocessRequest:n,provider:a=new Ea(e)})=>{let i=e(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,u=i.configuration.analytics.runtimeEnvironment,c=i.configuration.analytics.enabled,l=new Lo({enableAnalytics:c,token:o,endpoint:s,runtimeEnvironment:u,preprocessRequest:Xe(t,n),beforeSendHooks:[Ze(t,r),(p,g)=>(t.info({...g,type:p,endpoint:s,token:o},"Analytics request"),g)]},a);return c||l.disable(),l};var gr=class extends dt{constructor(){super(...arguments);this.initialState=xa()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Nd=({logger:t,getState:e,analyticsClientMiddleware:r=(i,o)=>o,preprocessRequest:n,provider:a=new gr(e)})=>{let i=e(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,u=i.configuration.analytics.runtimeEnvironment,c=i.configuration.analytics.enabled,l=new Qt({token:o,endpoint:s,runtimeEnvironment:u,preprocessRequest:Xe(t,n),beforeSendHooks:[Ze(t,r),(p,g)=>(t.info({...g,type:p,endpoint:s,token:o},"Analytics request"),g)]},a);return c||l.disable(),l};async function qS({config:t,environment:e,event:r,listenerManager:n}){let{url:a,token:i,mode:o}=t;o!=="disabled"&&(n.call(r),e.send(a,i,r))}var TS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function DS(t){return typeof t=="string"&&TS.test(t)}function VS(t){let e="visitorId";return{getClientId:()=>{let r=t.get(),n=r.storage,a=n.getItem(e),i=a&&DS(a)?a:r.generateUUID();return n.setItem(e,i),i},clear:()=>{t.get().storage.removeItem(e)}}}var Md="0.6.8";function NS(t){let{trackingId:e}=t;return{trackingId:e}}function MS(){return`relay@${Md}`}function Ld(t,e,r,n){let{getReferrer:a,getLocation:i,getUserAgent:o}=r,s=NS(e),u=n.getClientId();return Object.freeze({type:t,config:s,ts:Date.now(),source:MS(),clientId:u,userAgent:o(),referrer:a(),location:i()})}function LS(t,e,r,n,a){return{...e,meta:Ld(t,r,n,a)}}var jS="*";function US(){let t=[];function e({type:u,callback:c}){return t.findIndex(l=>l.type===u&&l.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function n(u){return e(u)<0&&t.push(u),()=>s(u.type,u.callback)}function a(u){t.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u)}catch(l){console.error(l)}})}function i(u){if(u===jS)t.length=0;else for(let c=t.length-1;c>=0;c--)t[c].type===u&&t.splice(c,1)}function o(u){let c=e(u);c>=0&&t.splice(c,1)}function s(u,c){c?o({type:u,callback:c}):i(u)}return{add:n,call:a,remove:s}}function jd({url:t,token:e,trackingId:r,...n}){return Object.freeze({url:t,token:e,trackingId:r,...!!n.mode&&{mode:n.mode}})}function QS(t){let e=jd(t);return{get:()=>e,update:r=>{e=jd({...e,...r})}}}function BS(){let t=typeof window!="undefined";return{sendMessage(e){t&&window.postMessage(e,"*")}}}var es=_S();function _S(){let t="coveo_",e=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${t}${r}=`,a=document.cookie.split(";");for(let i of a){let o=i.replace(/^\s+/,"");if(o.lastIndexOf(n,0)===0)return o.substring(n.length,o.length)}return null},setItem(r,n,a){let i=e(window.location.hostname),o=`;expires=${new Date(new Date().getTime()+a).toUTCString()}`,s=i?`;domain=${i}`:"";document.cookie=`${t}${r}=${n}${o}${s};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function $S(){return{getItem(t){return es.getItem(t)||localStorage.getItem(t)},removeItem(t){es.removeItem(t),localStorage.removeItem(t)},setItem(t,e){let r=31556952e3;localStorage.setItem(t,e),es.setItem(t,e,r)}}}async function ts(t,e){return fetch(t,e).catch(r=>{throw new Error(`${r.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:r})})}function HS(){let t=document.referrer;return t===""?null:t}function zS(){return{runtime:"browser",fetch:(t,e)=>ts(t,e),send:async(t,e,r)=>{let n=navigator.sendBeacon(`${t}?access_token=${e}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(BS().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:t,token:e}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>HS(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:$S()}}function Ud(){return{getItem(){return null},removeItem(){},setItem(){}}}function GS(){return{runtime:"node",fetch:(t,e)=>ts(t,e),send:async(t,e,r)=>{let n={"Content-Type":"application/json",Authorization:`Bearer ${e}`};ts(t,{method:"POST",body:JSON.stringify([r]),headers:n})},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:Ud()}}function WS(){return YS()?zS():GS()}function YS(){try{return typeof window=="object"}catch{return!1}}function KS(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:Ud()}}function JS(t){return t.get().mode=="disabled"?KS():WS()}function XS(t){return{get:()=>Object.freeze(JS(t))}}function Qd(t){let e=QS(t),r=US(),n=XS(e),a=VS(n);return{emit:(i,o)=>{let s=e.get(),u=n.get(),c=LS(i,o,s,u,a);return qS({config:s,environment:u,event:c,listenerManager:r})},getMeta:i=>Ld(i,e.get(),n.get(),a),on:(i,o)=>r.add({type:i,callback:o}),off:(i,o)=>r.remove(i,o),updateConfig:i=>e.update(i),version:Md,clearStorage:()=>{a.clear()}}}var Bd=(r=>(r.Ascending="ascending",r.Descending="descending",r))(Bd||{}),Oa=(i=>(i.Relevancy="relevancy",i.QRE="qre",i.Date="date",i.Field="field",i.NoSort="nosort",i))(Oa||{}),yr=t=>{if(Qn(t))return t.map(e=>yr(e)).join(",");switch(t.by){case"relevancy":case"qre":case"nosort":return t.by;case"date":return`date ${t.order}`;case"field":return`@${t.field} ${t.order}`;default:return""}},_d=()=>({by:"relevancy"});var rk=new O({values:{by:new Ue({enum:Oa,required:!0}),order:new Ue({enum:Bd}),field:new R}});function hr(){return yr(_d())}var qa=class extends dt{constructor(){super(...arguments);this.getFacetRequest=e=>{var r,n,a,i,o,s,u,c,l,p;return((n=(r=this.state.facetSet)==null?void 0:r[e])==null?void 0:n.request)||((i=(a=this.state.categoryFacetSet)==null?void 0:a[e])==null?void 0:i.request)||((s=(o=this.state.dateFacetSet)==null?void 0:o[e])==null?void 0:s.request)||((c=(u=this.state.numericFacetSet)==null?void 0:u[e])==null?void 0:c.request)||((p=(l=this.state.automaticFacetSet)==null?void 0:l.set[e])==null?void 0:p.response)}}getFacetState(){return ka(Ia(this.getState()))}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||qa.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,n;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((n=e.search)==null?void 0:n.response.searchUid)||Ce().response.searchUid}getSplitTestRunName(){var e;return(e=this.state.search)==null?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var n;let e=!!this.getSplitTestRunName(),r=((n=this.state.search)==null?void 0:n.response.pipeline)||this.state.pipeline||qa.fallbackPipelineName;return e?r:void 0}getBaseMetadata(){var a,i,o;let e=this.getState(),r=super.getBaseMetadata(),n=(o=(i=(a=e.search)==null?void 0:a.response)==null?void 0:i.extendedResults)==null?void 0:o.generativeQuestionAnsweringId;return n&&(r.generativeQuestionAnsweringId=n),r}getFacetMetadata(e,r){var i;let n=this.getFacetRequest(e),a=(i=n==null?void 0:n.field)!=null?i:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,facetValue:r,facetTitle:`${a}_${e}`}}getFacetClearAllMetadata(e){var a;let r=this.getFacetRequest(e),n=(a=r==null?void 0:r.field)!=null?a:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,facetTitle:`${n}_${e}`}}getFacetSortMetadata(e,r){var i;let n=this.getFacetRequest(e),a=(i=n==null?void 0:n.field)!=null?i:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,criteria:r,facetTitle:`${a}_${e}`}}getRangeFacetBreadcrumbMetadata(e,r){var i;let n=this.getFacetRequest(e),a=(i=n==null?void 0:n.field)!=null?i:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${a}_${e}`}}getResultSortMetadata(){var e;return{...this.getBaseMetadata(),resultsSortBy:(e=this.state.sortCriteria)!=null?e:hr()}}getStaticFilterToggleMetadata(e,r){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:r}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryFacetBreadcrumbMetadata(e,r){var i;let n=this.getFacetRequest(e),a=(i=n==null?void 0:n.field)!=null?i:"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:a,categoryFacetPath:r,categoryFacetTitle:`${a}_${e}`}}getOmniboxAnalyticsMetadata(e,r){let n=this.state.querySuggest&&this.state.querySuggest[e],a=n.completions.map(u=>u.expression),i=n.partialQueries.length-1,o=n.partialQueries[i]||"",s=n.responseId;return{...this.getBaseMetadata(),suggestionRanking:a.indexOf(r),partialQuery:o,partialQueries:n.partialQueries.length>0?n.partialQueries:"",suggestions:a.length>0?a:"",querySuggestResponseId:s}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){var n;let e=this.getState(),r={};return((n=e.generatedAnswer)==null?void 0:n.isVisible)!==void 0&&(r.showGeneratedAnswer=e.generatedAnswer.isVisible),r}get resultURIs(){var e;return(e=this.results)==null?void 0:e.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var e;return(e=this.state.search)==null?void 0:e.response.results}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||we().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Ce().duration}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.totalCountFiltered)||Ce().response.totalCountFiltered}},It=qa;It.fallbackPipelineName="default";var $d=t=>{let e=t.configuration.accessToken,r=t.configuration.analytics.trackingId,{emit:n}=Qd({url:t.configuration.analytics.nextApiBaseUrl,token:e,trackingId:r});return n},Hd=({logger:t,getState:e,analyticsClientMiddleware:r=(i,o)=>o,preprocessRequest:n,provider:a=new It(e)})=>{let i=e(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,u=i.configuration.analytics.runtimeEnvironment,c=i.configuration.analytics.enabled,l=new Qt({token:o,endpoint:s,runtimeEnvironment:u,preprocessRequest:Xe(t,n),beforeSendHooks:[Ze(t,r),(p,g)=>(t.info({...g,type:p,endpoint:s,token:o},"Analytics request"),g)]},a);return c||l.disable(),l},rs=()=>{let e=Je.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return e?e.value:""};function Ta(t){let e=zd(t),r=[t,...e].filter(a=>a.parentResult).map(a=>a.parentResult);return Ru([t,...e,...r],a=>a.uniqueId)}function zd(t){return t.childResults?t.childResults.flatMap(e=>[e,...zd(e)]):[]}var Sr=()=>"";function vr(t,e){return{...new It(e).getBaseMetadata(),actionCause:t,type:t}}function ZS(t){return Object.assign(t,{instantlyCallable:!0})}function ev(t,e){let r=i=>ZS(B(t,i)),n=r(async(i,{getState:o,extra:s})=>{let{analyticsClientMiddleware:u,preprocessRequest:c,logger:l}=s;return await(await e({getState:o,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})).log({state:o(),extra:s})});return Object.assign(n,{prepare:async({getState:i,analyticsClientMiddleware:o,preprocessRequest:s,logger:u})=>{let{description:c,log:l}=await e({getState:i,analyticsClientMiddleware:o,preprocessRequest:s,logger:u});return{description:c,action:r(async(p,{getState:g,extra:d})=>await l({state:g(),extra:d}))}}}),n}var Jr=(t,e,r)=>{function n(...a){let i=a.length===1?{...a[0],__legacy__getBuilder:e(a[0].__legacy__getBuilder),analyticsConfigurator:t,providerClass:r}:{prefix:a[0],__legacy__getBuilder:e(a[1]),__legacy__provider:a[2],analyticsConfigurator:t,providerClass:r};return nv(i)}return n},tv=t=>t.configuration.analytics.analyticsMode==="legacy",rv=t=>t.configuration.analytics.analyticsMode==="next",nv=({prefix:t,__legacy__getBuilder:e,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:a,analyticsConfigurator:i,providerClass:o})=>(r!=null||(r=s=>new o(s)),ev(t,async({getState:s,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})=>{let p=[],g={log:async({state:b})=>{for(let k of p)await k(b)}},d=s(),y=i({getState:s,logger:l,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(s)}),v=await e(y,s());g.description=v==null?void 0:v.description,p.push(async b=>{tv(b)&&await av(v,r,b,l,y.coveoAnalyticsClient)});let A=$d(d);return p.push(async b=>{if(rv(b)&&a&&n){let k=n(b);await dv(A,a,k)}}),g}));async function av(t,e,r,n,a){e(()=>r);let i=await(t==null?void 0:t.log({searchUID:e(()=>r).getSearchUID()}));n.info({client:a,response:i},"Analytics response")}var Gd=t=>(e,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async n=>{t(e,r)}}),ue=Jr(Hd,t=>t,It),Ee=Jr(xd,Gd,Ra),Mk=Jr(Vd,Gd,Ea),Wd=Jr(Fd,t=>t,lr),Yd=Jr(Nd,t=>t,gr);var ns=(t,e)=>{var i;let r=o=>{var s,u;return o+((u=(s=e.pagination)==null?void 0:s.firstResult)!=null?u:0)},n=-1,a=(i=e.search)==null?void 0:i.results;return n=Jd(t,a),n<0&&(n=lv(t,a)),n<0&&(n=0),iv(t,r(n),e)};function iv(t,e,r){let n=t.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:cv(t),documentPosition:e+1,documentTitle:t.title,documentUri:t.uri,documentUriHash:t.raw.urihash,documentUrl:t.clickUri,rankingModifier:t.rankingModifier||"",sourceName:uv(t),queryPipeline:r.pipeline||Sr()}}var as=t=>(t.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",t),{contentIDKey:"permanentid",contentIDValue:t.raw.permanentid||""}),Kd={urihash:new R,sourcetype:new R,permanentid:new R},Ar={uniqueId:C,raw:new O({values:Kd}),title:C,uri:C,clickUri:C,rankingModifier:new R({required:!1,emptyAllowed:!0})};function ov(t){return Object.assign({},...Object.keys(Kd).map(e=>({[e]:t[e]})))}function sv(t){return Object.assign({},...Object.keys(Ar).map(e=>({[e]:t[e]})),{raw:ov(t.raw)})}function cv(t){let e=t.raw.author;return H(e)?"unknown":Array.isArray(e)?e.join(";"):`${e}`}function uv(t){let e=t.raw.source;return H(e)?"unknown":e}var Xr=t=>new he(Ar).validate(sv(t));function lv(t,e){for(let[r,n]of e.entries()){let a=Ta(n);if(Jd(t,a)!==-1)return r}return-1}function Jd(t,e=[]){return e.findIndex(({uniqueId:r})=>r===t.uniqueId)}async function dv(t,e,r){await t(e,r)}var Xd=(i=>(i.id="id",i.subject="subject",i.description="description",i.category="category",i.productId="productId",i))(Xd||{}),Zd=t=>!Object.values(Xd).includes(t),Oe=t=>{let e=r=>{var n;return(n=pv(t,r))!=null?n:mv(t,r)};return{id:e("id"),subject:e("subject"),description:e("description"),category:e("category"),productId:e("productId"),custom:{...fv(t),...gv(t)}}},pv=(t,e)=>{var r,n;return(n=(r=t==null?void 0:t.caseInput)==null?void 0:r[e])==null?void 0:n.value},fv=t=>{var e;return Object.keys((e=t==null?void 0:t.caseInput)!=null?e:[]).reduce((r,n)=>{var a,i;if(Zd(n)){let o=(i=(a=t==null?void 0:t.caseInput)==null?void 0:a[n])==null?void 0:i.value;if(o)return{...r,[n]:o}}return r},{})},mv=(t,e)=>{var r,n;return(n=(r=t==null?void 0:t.caseField)==null?void 0:r.fields[e])==null?void 0:n.value},gv=t=>{var e,r;return Object.keys((r=(e=t==null?void 0:t.caseField)==null?void 0:e.fields)!=null?r:[]).reduce((n,a)=>{var i,o,s;if(Zd(a)){let u=(s=(o=(i=t==null?void 0:t.caseField)==null?void 0:i.fields)==null?void 0:o[a])==null?void 0:s.value;if(u)return{...n,[a]:u}}return n},{})},is=(t,e,r=!1)=>{var s,u,c,l,p,g,d,y;let n=Object.keys((u=(s=t==null?void 0:t.caseField)==null?void 0:s.fields)!=null?u:{}).find(v=>{var A;return(A=t==null?void 0:t.caseField)==null?void 0:A.fields[v].suggestions.some(b=>b.id===e)});if(!n)throw new Error(`Classification with ID '${e}' could not be found.`);let a=(c=t==null?void 0:t.caseField)==null?void 0:c.fields[n],i=a==null?void 0:a.suggestions.find(v=>v.id===e),o={classificationId:(l=i==null?void 0:i.id)!=null?l:"",responseId:(g=(p=t.caseField)==null?void 0:p.status.lastResponseId)!=null?g:"",fieldName:n,classification:{value:(d=i==null?void 0:i.value)!=null?d:"",confidence:(y=i==null?void 0:i.confidence)!=null?y:0}};return r?{...o,autoSelection:r}:o},Zr=(t,e,r=!1,n=!1)=>{var s,u,c;let a,i=(s=t.documentSuggestion)==null?void 0:s.documents.find((l,p)=>{let g=l.uniqueId===e;return g&&(a=p),g});if(!i)throw new Error(`Document Suggestion with ID '${e}' could not be found.`);let o={suggestionId:i.uniqueId,responseId:(c=(u=t.documentSuggestion)==null?void 0:u.status.lastResponseId)!=null?c:"",suggestion:{documentUri:i.fields.uri,documentUriHash:i.fields.urihash,documentTitle:i.title,documentUrl:i.clickUri,documentPosition:a!=null?a:0}};return r?{...o,fromQuickview:r}:n?{...o,openDocument:n}:o};var ep=()=>Ee("analytics/caseAssist/case/start",(t,e)=>t.logEnterInterface({ticket:Oe(e)})),tp=t=>Ee("analytics/caseAssist/case/nextStage",(e,r)=>e.logMoveToNextCaseStep({ticket:Oe(r),stage:t==null?void 0:t.stageName})),rp=()=>Ee("analytics/caseAssist/case/create",(t,e)=>t.logCaseCreated({ticket:Oe(e)})),np=()=>Ee("analytics/caseAssist/case/solve",(t,e)=>t.logCaseSolved({ticket:Oe(e)})),ap=()=>Ee("analytics/caseAssist/case/abandon",(t,e)=>t.logCaseCancelled({ticket:Oe(e)})),Cr=t=>Ee("analytics/caseAssist/case/field/update",(e,r)=>e.logUpdateCaseField({fieldName:t,ticket:Oe(r)})),ip=t=>Ee("analytics/caseAssist/classification/click",(e,r)=>e.logSelectFieldSuggestion({suggestion:is(r,t,!0),ticket:Oe(r)})),Da=t=>Ee("analytics/caseAssist/classification/click",(e,r)=>e.logSelectFieldSuggestion({suggestion:is(r,t),ticket:Oe(r)})),op=t=>Ee("analytics/caseAssist/documentSuggestion/click",(e,r)=>e.logSelectDocumentSuggestion({suggestion:Zr(r,t),ticket:Oe(r)})),Va=t=>Ee("analytics/caseAssist/documentSuggestion/click",(e,r)=>e.logSelectDocumentSuggestion({suggestion:Zr(r,t,!0),ticket:Oe(r)})),sp=t=>Ee("analytics/caseAssist/documentSuggestion/click",(e,r)=>e.logSelectDocumentSuggestion({suggestion:Zr(r,t,!1,!0),ticket:Oe(r)})),cp=(t,e)=>Ee("analytics/caseAssist/documentSuggestion/rate",(r,n)=>r.logRateDocumentSuggestion({rating:e,suggestion:Zr(n,t),ticket:Oe(n)}));function Hk(t){return t.addReducers({}),{logCaseStart:ep,logCaseNextStage:tp,logCreateCase:rp,logSolveCase:np,logAbandonCase:ap,logUpdateCaseField:Cr,logClassificationClick:Da,logDocumentSuggestionClick:op,logDocumentSuggestionRating:cp,logQuickviewDocumentSuggestionClick:Va}}var os=t=>h(t,{evt:C,type:ae}),up=t=>ue("analytics/generic/search",e=>{os(t);let{evt:r,meta:n}=t;return e.makeSearchEvent(r,n)}),lp=t=>ue("analytics/generic/click",(e,r)=>(Xr(t.result),os(t),e.makeClickEvent(t.evt,ns(t.result,r),as(t.result),t.meta))),dp=t=>ue("analytics/generic/custom",e=>(os(t),e.makeCustomEventWithType(t.evt,t.type,t.meta)));function nE(t){return t.addReducers({}),{logSearchEvent:up,logClickEvent:lp,logCustomEvent:dp}}function pt(t){let e,r=new Map,n=()=>r.size===0,a=i=>{try{let o=JSON.stringify(i),s=e!==o;return e=o,s}catch(o){return console.warn('Could not detect if state has changed, check the controller "get state method"',o),!0}};return{subscribe(i){i();let o=Symbol(),s;return n()&&(e=JSON.stringify(this.state),s=t.subscribe(()=>{a(this.state)&&r.forEach(u=>u())})),r.set(o,i),()=>{r.delete(o),n()&&s&&s()}},get state(){return{}}}}function yv(t,e){let r=new he({field:C});na(t,r,e,"buildCaseInput")}function hv(t,e){var s;if(!Sv(t))throw Ie;let r=pt(t),{dispatch:n}=t,a=()=>t.state;yv(t,e.options);let i=e.options.field;return((s=a().caseInput)==null?void 0:s[i])||n($t({fieldName:i,fieldValue:""})),{...r,update(u,c){n($t({fieldName:i,fieldValue:u})),n(Cr(i)),(c==null?void 0:c.caseClassifications)&&n(et()),(c==null?void 0:c.documentSuggestions)&&n(Ne())},get state(){return a().caseInput[i]}}}function Sv(t){return t.addReducers({configuration:Fe,caseAssistConfiguration:bt,caseInput:Ft,caseField:wt,documentSuggestion:tt}),!0}var vv=new he({field:C});function Av(t,e={}){var s,u;if(!Cv(t))throw Ie;let r=pt(t),{dispatch:n}=t,a=na(t,vv,e.options,"buildCaseField"),i=()=>t.state;return((u=(s=i().caseField)==null?void 0:s.fields)==null?void 0:u[a.field])||n(cr({fieldName:a.field,fieldValue:""})),{...r,get state(){var y,v,A,b,k,V,N,z,W,J;let c=(A=(v=(y=i().caseField)==null?void 0:y.status)==null?void 0:v.loading)!=null?A:!1,l=(V=(k=(b=i().caseField)==null?void 0:b.status)==null?void 0:k.error)!=null?V:null,p=(z=(N=i().caseField)==null?void 0:N.fields)==null?void 0:z[a.field],g=(W=p==null?void 0:p.value)!=null?W:"",d=(J=p==null?void 0:p.suggestions)!=null?J:[];return{loading:c,error:l,value:g,suggestions:d}},update(c,l,p){var d,y,v,A,b;let g=(b=(A=(v=(y=(d=i().caseField)==null?void 0:d.fields)==null?void 0:y[a.field])==null?void 0:v.suggestions)==null?void 0:A.find(k=>k.value===c))==null?void 0:b.id;g&&n(p?ip(g):Da(g)),n(ur({fieldName:a.field,fieldValue:c})),!p&&n(Cr(a.field)),(l==null?void 0:l.caseClassifications)&&n(et()),(l==null?void 0:l.documentSuggestions)&&n(Ne())}}}function Cv(t){return t.addReducers({configuration:Fe,caseAssistConfiguration:bt,caseInput:Ft,caseField:wt,documentSuggestion:tt}),!0}async function Na(t,e){var s;let{search:r,accessToken:n,organizationId:a,analytics:i}=t.configuration,o=((s=t.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:n,organizationId:a,enableNavigation:!1,...i.enabled&&{visitorId:await Ae(t.configuration.analytics)},q:o,...e,requestedOutputSize:e.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var br=B("resultPreview/fetchResultContent",async(t,{extra:e,getState:r,rejectWithValue:n})=>{let a=r(),i=await Na(a,t),o=await e.apiClient.html(i);return re(o)?n(o.error):{content:o.success,uniqueId:t.uniqueId}}),en=m("resultPreview/next"),tn=m("resultPreview/previous"),rn=m("resultPreview/prepare",t=>h(t,{results:new Q({required:!0})})),pp=2048,nn=B("resultPreview/updateContentURL",async(t,{getState:e,extra:r})=>{let n=e(),a=Nu(await t.buildResultPreviewRequest(n,{uniqueId:t.uniqueId,requestedOutputSize:t.requestedOutputSize}),t.path);return(a==null?void 0:a.length)>pp&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${pp} characters.`),{contentURL:a}});var Ht=(x=>(x.interfaceLoad="interfaceLoad",x.interfaceChange="interfaceChange",x.didyoumeanAutomatic="didyoumeanAutomatic",x.didyoumeanClick="didyoumeanClick",x.resultsSort="resultsSort",x.searchboxSubmit="searchboxSubmit",x.searchboxClear="searchboxClear",x.searchboxAsYouType="searchboxAsYouType",x.breadcrumbFacet="breadcrumbFacet",x.breadcrumbResetAll="breadcrumbResetAll",x.documentQuickview="documentQuickview",x.documentOpen="documentOpen",x.omniboxAnalytics="omniboxAnalytics",x.omniboxFromLink="omniboxFromLink",x.searchFromLink="searchFromLink",x.triggerNotify="notify",x.triggerExecute="execute",x.triggerQuery="query",x.undoTriggerQuery="undoQuery",x.triggerRedirect="redirect",x.pagerResize="pagerResize",x.pagerNumber="pagerNumber",x.pagerNext="pagerNext",x.pagerPrevious="pagerPrevious",x.pagerScrolling="pagerScrolling",x.staticFilterClearAll="staticFilterClearAll",x.staticFilterSelect="staticFilterSelect",x.staticFilterDeselect="staticFilterDeselect",x.facetClearAll="facetClearAll",x.facetSearch="facetSearch",x.facetSelect="facetSelect",x.facetSelectAll="facetSelectAll",x.facetDeselect="facetDeselect",x.facetExclude="facetExclude",x.facetUnexclude="facetUnexclude",x.facetUpdateSort="facetUpdateSort",x.facetShowMore="showMoreFacetResults",x.facetShowLess="showLessFacetResults",x.queryError="query",x.queryErrorBack="errorBack",x.queryErrorClear="errorClearQuery",x.queryErrorRetry="errorRetry",x.recommendation="recommendation",x.recommendationInterfaceLoad="recommendationInterfaceLoad",x.recommendationOpen="recommendationOpen",x.likeSmartSnippet="likeSmartSnippet",x.dislikeSmartSnippet="dislikeSmartSnippet",x.expandSmartSnippet="expandSmartSnippet",x.collapseSmartSnippet="collapseSmartSnippet",x.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",x.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",x.sendSmartSnippetReason="sendSmartSnippetReason",x.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",x.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",x.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",x.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",x.openSmartSnippetSource="openSmartSnippetSource",x.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",x.openSmartSnippetInlineLink="openSmartSnippetInlineLink",x.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",x.recentQueryClick="recentQueriesClick",x.clearRecentQueries="clearRecentQueries",x.recentResultClick="recentResultClick",x.clearRecentResults="clearRecentResults",x.noResultsBack="noResultsBack",x.showMoreFoldedResults="showMoreFoldedResults",x.showLessFoldedResults="showLessFoldedResults",x.copyToClipboard="copyToClipboard",x.caseSendEmail="Case.SendEmail",x.feedItemTextPost="FeedItem.TextPost",x.caseAttach="caseAttach",x.caseDetach="caseDetach",x.retryGeneratedAnswer="retryGeneratedAnswer",x.likeGeneratedAnswer="likeGeneratedAnswer",x.dislikeGeneratedAnswer="dislikeGeneratedAnswer",x.openGeneratedAnswerSource="openGeneratedAnswerSource",x.generatedAnswerStreamEnd="generatedAnswerStreamEnd",x.historyForward="historyForward",x.historyBackward="historyBackward",x))(Ht||{});var ye=m("breadcrumb/deselectAll"),zt=m("breadcrumb/deselectAllNonBreadcrumbs");var rt=m("facet/updateFacetAutoSelection",t=>h(t,{allow:new U({required:!0})}));var ss={id:C},bv={...ss,q:X},cs=m("instantResults/register",t=>h(t,ss)),Gt=m("instantResults/updateQuery",t=>h(t,bv)),us=m("instantResults/clearExpired",t=>h(t,ss));var Ma=new q({required:!0,min:0}),ls=m("pagination/registerNumberOfResults",t=>h(t,Ma)),ds=m("pagination/updateNumberOfResults",t=>h(t,Ma)),ps=m("pagination/registerPage",t=>h(t,Ma)),Wt=m("pagination/updatePage",t=>h(t,Ma)),fs=m("pagination/nextPage"),ms=m("pagination/previousPage");var $e=m("query/updateQuery",t=>h(t,{q:new R,enableQuerySyntax:new U}));var Rr=async(t,e)=>({analytics:{clientId:await Ae(t),clientTimestamp:new Date().toISOString(),documentReferrer:t.originLevel3,originContext:t.originContext,...e&&{actionCause:e.actionCause,customData:e.customData},...t.userDisplayName&&{userDisplayName:t.userDisplayName},...t.documentLocation&&{documentLocation:t.documentLocation},...t.deviceId&&{deviceId:t.deviceId},...rs()&&{pageId:rs()},...t.analyticsMode&&t.trackingId&&{trackingId:t.trackingId},capture:t.analyticsMode==="next"}});var kt=async(t,e)=>{var r,n,a,i;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,debug:t.debug,tab:t.configuration.analytics.originLevel2,referrer:t.configuration.analytics.originLevel3,timezone:t.configuration.search.timezone,...t.configuration.analytics.enabled&&{visitorId:await Ae(t.configuration.analytics),actionsHistory:Je.getHistory()},...((r=t.advancedSearchQueries)==null?void 0:r.aq)&&{aq:t.advancedSearchQueries.aq},...((n=t.advancedSearchQueries)==null?void 0:n.cq)&&{cq:t.advancedSearchQueries.cq},...((a=t.advancedSearchQueries)==null?void 0:a.lq)&&{lq:t.advancedSearchQueries.lq},...((i=t.advancedSearchQueries)==null?void 0:i.dq)&&{dq:t.advancedSearchQueries.dq},...t.context&&{context:t.context.contextValues},...t.fields&&!t.fields.fetchAllFields&&{fieldsToInclude:t.fields.fieldsToInclude},...t.dictionaryFieldContext&&{dictionaryFieldContext:t.dictionaryFieldContext.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.query&&{q:t.query.q,enableQuerySyntax:t.query.enableQuerySyntax},...t.searchHub&&{searchHub:t.searchHub},...t.sortCriteria&&{sortCriteria:t.sortCriteria},...t.configuration.analytics.enabled&&await Rr(t.configuration.analytics,e),...t.excerptLength&&!H(t.excerptLength.length)&&{excerptLength:t.excerptLength.length},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}};var gs=class extends It{constructor(e){super(e);this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let r in e)for(let n in e[r].cache)if(e[r].cache[n].isActive)return e[r].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let r in e)for(let n in e[r].cache)if(e[r].cache[n].isActive)return e[r].cache[n];return null}get results(){var e;return(e=this.activeInstantResultCache)==null?void 0:e.results}get queryText(){var e;return(e=this.activeInstantResultQuery)!=null?e:we().q}get responseTime(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.duration)!=null?r:Ce().duration}get numberOfResults(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.totalCountFiltered)!=null?r:Ce().response.totalCountFiltered}getSearchUID(){var r;return((r=this.activeInstantResultCache)==null?void 0:r.searchUid)||super.getSearchUID()}};var fp=()=>ue("analytics/instantResult/searchboxAsYouType",t=>t.makeSearchboxAsYouType(),t=>new gs(t));var Et=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var ys=()=>ue("search/logFetchMoreResults",t=>t.makeFetchMoreResults()),Me=t=>ue("search/queryError",(e,r)=>{var n,a,i,o;return e.makeQueryError({query:((n=r.query)==null?void 0:n.q)||we().q,aq:((a=r.advancedSearchQueries)==null?void 0:a.aq)||Et().aq,cq:((i=r.advancedSearchQueries)==null?void 0:i.cq)||Et().cq,dq:((o=r.advancedSearchQueries)==null?void 0:o.dq)||Et().dq,errorType:t.type,errorMessage:t.message})});var an=qe(ga()),vp=qe(mp());var La=qe(ga()),yp=qe(gp());La.default.extend(yp.default);var hp="YYYY/MM/DD@HH:mm:ss",Rv="1401-01-01";function xr(t,e){let r=(0,La.default)(t,e);return!r.isValid()&&!e?(0,La.default)(t,hp):r}function ja(t){return t.format(hp)}function Sp(t,e){let r=xr(t,e);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",a=` with the format "${e}""`;throw new Error(`Could not parse the provided date "${t}"${e?a:n}`)}Cs(r)}function Cs(t){if(t.isBefore(Rv))throw new Error(`Date is before year 1401, which is unsupported by the API: ${t}`)}an.default.extend(vp.default);var Ap=["past","now","next"],Cp=["minute","hour","day","week","month","quarter","year"],xv=t=>{let e=t==="now";return{amount:new q({required:!e,min:1}),unit:new R({required:!e,constrainTo:Cp}),period:new R({required:!0,constrainTo:Ap})}};function bs(t){if(typeof t=="string"&&!Ot(t))throw new Error(`The value "${t}" is not respecting the relative date format "period-amount-unit"`);let e=typeof t=="string"?wp(t):t;new he(xv(e.period)).validate(e);let r=Rp(e),n=JSON.stringify(e);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Cs(r)}function bp(t){let{period:e,amount:r,unit:n}=t;switch(e){case"past":case"next":return`${e}-${r}-${n}`;case"now":return e}}function Rp(t){let{period:e,amount:r,unit:n}=t;switch(e){case"past":return(0,an.default)().subtract(r,n);case"next":return(0,an.default)().add(r,n);case"now":return(0,an.default)()}}function on(t){return ja(Rp(wp(t)))}function xp(t){return t.toLocaleLowerCase().split("-")}function Ot(t){let[e,r,n]=xp(t);if(e==="now")return!0;if(!Ap.includes(e)||!Cp.includes(n))return!1;let a=parseInt(r);return!(isNaN(a)||a<=0)}function Fp(t){return!!t&&typeof t=="object"&&"period"in t}function wp(t){let[e,r,n]=xp(t);return e==="now"?{period:"now"}:{period:e,amount:r?parseInt(r):void 0,unit:n||void 0}}function Pp(t){return t.type==="dateRange"}function Ip(t){return`start${t}`}function kp(t){return`end${t}`}var Fv=()=>({dateFacetValueMap:{}});function wv(t,e,r){let n=t.start,a=t.end;return Ot(n)&&(n=on(n),r.dateFacetValueMap[e][Ip(n)]=t.start),Ot(a)&&(a=on(a),r.dateFacetValueMap[e][kp(a)]=t.end),{...t,start:n,end:a}}function Pv(t,e){if(Pp(t)){let{facetId:r,currentValues:n}=t;return e.dateFacetValueMap[r]={},{...t,currentValues:n.map(a=>wv(a,r,e))}}return t}function Fr(t){var n;let e=Fv();return{request:{...t,facets:(n=t.facets)==null?void 0:n.map(a=>Pv(a,e))},mappings:e}}function Iv(t,e,r){return{...t,start:r.dateFacetValueMap[e][Ip(t.start)]||t.start,end:r.dateFacetValueMap[e][kp(t.end)]||t.end}}function kv(t,e){return t.facetId in e.dateFacetValueMap}function Ev(t,e){return kv(t,e)?{...t,values:t.values.map(r=>Iv(r,t.facetId,e))}:t}function Ua(t,e){var r;return"success"in t?{success:{...t.success,facets:(r=t.success.facets)==null?void 0:r.map(a=>Ev(a,e))}}:t}function Qa(t,e){let r={};t.forEach(i=>r[i.facetId]=i);let n=[];e.forEach(i=>{i in r&&(n.push(r[i]),delete r[i])});let a=Object.values(r);return[...n,...a]}function ft(t){return Object.values(t).map(e=>e.request)}var Ep=1,sn=5e3;var be=async(t,e)=>{var s,u;let r=Mv(t),n=Ov(t),a=qv(t),i=await kt(t,e),o=()=>t.pagination?t.pagination.firstResult+t.pagination.numberOfResults>sn?sn-t.pagination.firstResult:t.pagination.numberOfResults:void 0;return Fr({...i,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},...r&&{cq:r},...n.length&&{facets:n},...t.pagination&&{numberOfResults:o(),firstResult:t.pagination.firstResult},...t.facetOptions&&{facetOptions:{freezeFacetOrder:t.facetOptions.freezeFacetOrder}},...((s=t.folding)==null?void 0:s.enabled)&&{filterField:t.folding.fields.collection,childField:t.folding.fields.parent,parentField:t.folding.fields.child,filterFieldRange:t.folding.filterFieldRange},...t.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:t.automaticFacetSet.desiredCount,numberOfValues:t.automaticFacetSet.numberOfValues,currentFacets:a}},...((u=t.generatedAnswer)==null?void 0:u.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:t.generatedAnswer.responseFormat}}}})};function Ov(t){var e;return Qa(Dv(t),(e=t.facetOrder)!=null?e:[])}function qv(t){var r;let e=(r=t.automaticFacetSet)==null?void 0:r.set;return e?Object.values(e).map(n=>n.response).map(Tv).filter(n=>n.currentValues.length>0):void 0}function Tv(t){let{field:e,label:r,values:n}=t,a=n.filter(i=>i.state==="selected");return{field:e,label:r,currentValues:a}}function Dv(t){return Vv(t).filter(({facetId:e})=>{var r,n,a;return(a=(n=(r=t.facetOptions)==null?void 0:r.facets[e])==null?void 0:n.enabled)!=null?a:!0})}function Vv(t){var e,r,n,a;return[...Nv((e=t.facetSet)!=null?e:{}),...Op((r=t.numericFacetSet)!=null?r:{}),...Op((n=t.dateFacetSet)!=null?n:{}),...ft((a=t.categoryFacetSet)!=null?a:{})]}function Nv(t){return ft(t).map(e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e)}function Op(t){return ft(t).map(e=>{let n=e.currentValues.some(({state:a})=>a!=="idle");return e.generateAutomaticRanges&&!n?{...e,currentValues:[]}:e})}function Mv(t){var i;let e=((i=t.advancedSearchQueries)==null?void 0:i.cq.trim())||"",r=Object.values(t.tabSet||{}).find(o=>o.isActive),n=(r==null?void 0:r.expression.trim())||"",a=Lv(t);return[e,n,...a].filter(o=>!!o).join(" AND ")}function Lv(t){return Object.values(t.staticFilterSet||{}).map(r=>{let n=r.values.filter(i=>i.state==="selected"&&!!i.expression.trim()),a=n.map(i=>i.expression).join(" OR ");return n.length>1?`(${a})`:a})}var Rs=m("didYouMean/enable"),xs=m("didYouMean/disable"),Fs=m("didYouMean/automaticCorrections/disable"),ws=m("didYouMean/automaticCorrections/enable"),mt=m("didYouMean/correction",t=>h(t,C));var qp=()=>ue("analytics/didyoumean/automatic",t=>t.makeDidYouMeanAutomatic());function Ba(){return{contextValues:{}}}function _a(){return{contextValues:{}}}function wr(){return{enabled:!0}}function $a(){return{freezeFacetOrder:!1,facets:{}}}function Ha(){return[]}function za(){return{}}function Tp(t){return t?t.expiresAt&&Date.now()>=t.expiresAt:!1}function cn(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Ga(){return{}}function Wa(){return{}}function Ya(){return{}}function Dp(){return gt({})}function gt(t){var e,r,n;return{context:t.context||Ba(),dictionaryFieldContext:t.dictionaryFieldContext||_a(),facetSet:t.facetSet||mr(),numericFacetSet:t.numericFacetSet||fr(),dateFacetSet:t.dateFacetSet||pr(),categoryFacetSet:t.categoryFacetSet||dr(),automaticFacetSet:(e=t.automaticFacetSet)!=null?e:Pa(),pagination:t.pagination||cn(),query:t.query||we(),tabSet:t.tabSet||Ya(),advancedSearchQueries:t.advancedSearchQueries||Et(),staticFilterSet:t.staticFilterSet||Wa(),querySet:t.querySet||Ga(),instantResults:t.instantResults||za(),sortCriteria:t.sortCriteria||hr(),pipeline:t.pipeline||Sr(),searchHub:t.searchHub||Rt(),facetOptions:t.facetOptions||$a(),facetOrder:(r=t.facetOrder)!=null?r:Ha(),debug:(n=t.debug)!=null?n:ia()}}var Uq=new O({values:{undoneQuery:X},options:{required:!0}}),Vp=()=>ue("analytics/trigger/query",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.queryModification.newQuery)?t.makeTriggerQuery():null});var Ka=m("trigger/query/ignore",t=>h(t,new R({emptyAllowed:!0,required:!0}))),Ja=m("trigger/query/modification",t=>h(t,new O({values:{originalQuery:ae,modification:ae}})));var Yt=class{constructor(e,r=n=>{this.dispatch($e({q:n}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},n){var u;let a=new Date().getTime(),i=Ua(await this.extra.apiClient.search(r,n),e),o=new Date().getTime()-a,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:i,duration:o,queryExecuted:s,requestExecuted:r}}async process(e){var r,n,a;return(a=(n=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?n:await this.processQueryTriggersOrContinue(e))!=null?a:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return re(e.response)?(this.dispatch(Me(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),n=this.getSuccessResponse(e);if(!n||!r.didYouMean)return null;let{enableDidYouMean:a,automaticallyCorrectQuery:i}=r.didYouMean,{results:o,queryCorrections:s}=n;if(!(o.length===0&&s.length!==0&&a&&i))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=n.queryCorrections[0],p=await this.automaticallyRetryQueryWithCorrection(l);return re(p.response)?(this.dispatch(Me(p.response.error)),this.rejectWithValue(p.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(e.queryExecuted,e.duration,r,n),this.extra),this.dispatch(Be(gt(this.getState()))),{...p,response:{...p.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:qp()})}async processQueryTriggersOrContinue(e){var s,u;let r=this.getSuccessResponse(e);if(!r)return null;let n=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!n)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===n)return this.dispatch(Ka("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let i=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithTriggerModification(n);return re(o.response)?(this.dispatch(Me(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(Be(gt(this.getState()))),{...o,response:{...o.response.success},automaticallyCorrected:!1,originalQuery:i,analyticsAction:Vp()})}processSuccessResponse(e){return this.dispatch(Be(gt(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return ba(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await be(this.getState()),{origin:"mainSearch"});return this.dispatch(mt(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Ja({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await be(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(e,r,n,a){var i,o;return{...n,query:{q:e,enableQuerySyntax:(o=(i=n.query)==null?void 0:i.enableQuerySyntax)!=null?o:we().enableQuerySyntax},search:{...Ce(),duration:r,response:a,results:a.results}}}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var ET=B("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;h(t,{q:new R,enableQuerySyntax:new U,clearFilters:new U}),t.clearFilters&&(r(ye()),r(zt())),r(rt({allow:!0})),r($e({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(Wt(1))}),un=B("search/executeSearch",async(t,e)=>{let r=e.getState();return await Xa(r,e,t)}),ln=B("search/fetchPage",async(t,e)=>{let r=e.getState();return await ks(r,e,t)}),dn=B("search/fetchMoreResults",async(t,e)=>{let r=e.getState();return await Es(e,r)}),Ps=B("search/fetchFacetValues",async(t,e)=>{let r=e.getState();return await _v(e,t,r)}),jv=B("search/fetchInstantResults",async(t,e)=>Is(t,e)),Uv=async(t,e)=>{var n,a,i,o;let r=await be(t,e);return r.request={...r.request,firstResult:((a=(n=t.pagination)==null?void 0:n.firstResult)!=null?a:0)+((o=(i=t.search)==null?void 0:i.results.length)!=null?o:0)},r},Qv=async(t,e,r)=>{let n=await kt(t);return Fr({...n,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},Bv=async(t,e)=>{let r=await be(t,e);return r.request.numberOfResults=0,r},Np=t=>{var e;t.configuration.analytics.enabled&&Je.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})};async function Is(t,e){h(t,{id:C,q:C,maxResultsPerQuery:new q({required:!0,min:1}),cacheTimeout:new q});let{q:r,maxResultsPerQuery:n}=t,a=e.getState(),i=new Yt({...e,analyticsAction:fp()},c=>{e.dispatch(Gt({q:c,id:t.id}))}),o=await Qv(a,r,n),s=await i.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),u=await i.process(s);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function ks(t,e,r){Np(t);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=e.extra,{description:o}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=new Yt({...e,analyticsAction:r}),u=await be(t,o),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}async function Es(t,e){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:a}=t.extra,{description:i}=await ys().prepare({getState:()=>t.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:a}),o=new Yt({...t,analyticsAction:ys()}),s=await Uv(e,i),u=await o.fetchFromAPI(s,{origin:"mainSearch"});return await o.process(u)}async function _v(t,e,r){let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:o}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=new Yt({...t,analyticsAction:e}),u=await Bv(r,o),c=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(c)}async function Xa(t,e,r){Np(t);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=e.extra,{description:o}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=await be(t,o),u=new Yt({...e,analyticsAction:r}),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}var Kt=class{constructor(e,r=n=>{this.dispatch($e({q:n}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},n){var u;let a=new Date().getTime(),i=Ua(await this.extra.apiClient.search(r,n),e),o=new Date().getTime()-a,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:i,duration:o,queryExecuted:s,requestExecuted:r}}async process(e){var r,n,a;return(a=(n=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?n:await this.processQueryTriggersOrContinue(e))!=null?a:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return re(e.response)?(this.dispatch(Me(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),n=this.getSuccessResponse(e);if(!n||!r.didYouMean)return null;let{enableDidYouMean:a,automaticallyCorrectQuery:i}=r.didYouMean,{results:o,queryCorrections:s}=n;if(!(o.length===0&&s.length!==0&&a&&i))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=n.queryCorrections[0],p=await this.automaticallyRetryQueryWithCorrection(l);return re(p.response)?(this.dispatch(Me(p.response.error)),this.rejectWithValue(p.response.error)):(this.dispatch(Be(gt(this.getState()))),{...p,response:{...p.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:vr(Ht.didyoumeanAutomatic,this.getState)})}async processQueryTriggersOrContinue(e){var s,u;let r=this.getSuccessResponse(e);if(!r)return null;let n=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!n)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===n)return this.dispatch(Ka("")),null;let i=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithTriggerModification(n);return re(o.response)?(this.dispatch(Me(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(Be(gt(this.getState()))),{...o,response:{...o.response.success},automaticallyCorrected:!1,originalQuery:i,analyticsAction:vr(Ht.triggerQuery,this.getState)})}processSuccessResponse(e){return this.dispatch(Be(gt(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return ba(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await be(this.getState()),{origin:"mainSearch"});return this.dispatch(mt(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Ja({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await be(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var h0=B("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;h(t,{q:new R,enableQuerySyntax:new U,clearFilters:new U}),t.clearFilters&&(r(ye()),r(zt())),r(rt({allow:!0})),r($e({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(Wt(1))}),ee=B("search/executeSearch",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return Xa(r,e,t.legacy);Mp(r);let n=Lp(t.next,r),a=await be(r,n),i=new Kt({...e,analyticsAction:n}),o=await i.fetchFromAPI(a,{origin:"mainSearch"});return await i.process(o)}),Za=B("search/fetchPage",async(t,e)=>{let r=e.getState();if(Mp(r),r.configuration.analytics.analyticsMode==="legacy"||!t.next)return ks(r,e,t.legacy);let n=new Kt({...e,analyticsAction:t.next}),a=await be(r,t.next),i=await n.fetchFromAPI(a,{origin:"mainSearch"});return await n.process(i)}),ei=B("search/fetchMoreResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Es(e,r);let n=vr(Ht.pagerScrolling,e.getState),a=new Kt({...e,analyticsAction:n}),i=await $v(r,n),o=await a.fetchFromAPI(i,{origin:"mainSearch"});return await a.process(o)}),ti=B("search/fetchFacetValues",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return Xa(r,e,t.legacy);let n=Lp(t.next,r),a=new Kt({...e,analyticsAction:n}),i=await zv(r,n),o=await a.fetchFromAPI(i,{origin:"facetValues"});return await a.process(o)}),ri=B("search/fetchInstantResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Is(t,e);h(t,{id:C,q:C,maxResultsPerQuery:new q({required:!0,min:1}),cacheTimeout:new q});let{q:n,maxResultsPerQuery:a}=t,i=vr(Ht.searchboxAsYouType,e.getState),o=new Kt({...e,analyticsAction:i},l=>{e.dispatch(Gt({q:l,id:t.id}))}),s=await Hv(r,n,a),u=await o.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),c=await o.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,analyticsAction:c.analyticsAction,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}),$v=async(t,e)=>{var n,a,i,o;let r=await be(t,e);return r.request={...r.request,firstResult:((a=(n=t.pagination)==null?void 0:n.firstResult)!=null?a:0)+((o=(i=t.search)==null?void 0:i.results.length)!=null?o:0)},r},Hv=async(t,e,r)=>{let n=await kt(t);return Fr({...n,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},zv=async(t,e)=>{let r=await be(t,e);return r.request.numberOfResults=0,r},Mp=t=>{var e;t.configuration.analytics.enabled&&Je.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})},Lp=(t,e)=>({customData:t.getEventExtraPayload(e),actionCause:t.actionCause,type:t.actionCause});function Os(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var qs=t=>{let{content:e,isLoading:r,uniqueId:n,contentURL:a}=Os();t.content=e,t.isLoading=r,t.uniqueId=n,t.contentURL=a},Ts=t=>t.filter(e=>e.hasHtmlVersion).map(e=>e.uniqueId),Ds=P(Os(),t=>{t.addCase(br.pending,e=>{e.isLoading=!0}).addCase(br.fulfilled,(e,r)=>{let{content:n,uniqueId:a}=r.payload;e.position=e.resultsWithPreview.indexOf(a),e.content=n,e.uniqueId=a,e.isLoading=!1}).addCase(ee.fulfilled,(e,r)=>{qs(e),e.resultsWithPreview=Ts(r.payload.response.results)}).addCase(ei.fulfilled,(e,r)=>{qs(e),e.resultsWithPreview=e.resultsWithPreview.concat(Ts(r.payload.response.results))}).addCase(Za.fulfilled,qs).addCase(rn,(e,r)=>{e.resultsWithPreview=Ts(r.payload.results)}).addCase(en,e=>{if(e.isLoading)return;let r=e.position+1;r>e.resultsWithPreview.length-1&&(r=0),e.position=r}).addCase(tn,e=>{if(e.isLoading)return;let r=e.position-1;r<0&&(r=e.resultsWithPreview.length-1),e.position=r}).addCase(nn.fulfilled,(e,r)=>{e.contentURL=r.payload.contentURL})});function jp(t,e,r,n,a){if(!Gv(t))throw Ie;let{dispatch:i}=t,o=()=>t.state,s=pt(t),{result:u,maximumPreviewSize:c}=e.options,l=()=>{let{resultsWithPreview:g,position:d}=o().resultPreview;return g[d]},p=g=>{i(nn({uniqueId:g,requestedOutputSize:c,buildResultPreviewRequest:r,path:n})),e.options.onlyContentURL||i(br({uniqueId:g,requestedOutputSize:c})),a&&a()};return{...s,fetchResultContent(){p(u.uniqueId)},next(){i(en()),p(l())},previous(){i(tn()),p(l())},get state(){let g=o(),d=u.hasHtmlVersion,y=g.resultPreview,v=u.uniqueId===y.uniqueId?y.content:"",A=y.isLoading,b=y.contentURL,k=l();return{content:v,resultHasPreview:d,isLoading:A,contentURL:b,currentResultUniqueId:k}}}}function Gv(t){return t.addReducers({configuration:Fe,resultPreview:Ds}),!0}function Up(t,e){if(!Wv(t))throw Ie;let{dispatch:r}=t,n=()=>t.state,a=()=>n().documentSuggestion.documents,s=jp(t,e,Na,"/html",()=>{t.dispatch(Va(e.options.result.uniqueId))});return r(rn({results:a()})),{...s,get state(){return{...s.state,currentDocument:a().findIndex(u=>u.uniqueId===s.state.currentResultUniqueId)+1,totalDocuments:a().length}}}}function Wv(t){return t.addReducers({documentSuggestion:tt}),!0}function Qp(t){if(!Yv(t))throw Ie;let e=pt(t),{dispatch:r}=t,n=()=>t.state;return{...e,fetch(){r(Ne())},get state(){let a=n().documentSuggestion;return{loading:a.status.loading,error:a.status.error,documents:a.documents}}}}function Yv(t){return t.addReducers({configuration:Fe,caseAssistConfiguration:bt,caseInput:Ft,caseField:wt,documentSuggestion:tt}),!0}function Bp(t,e,r){if(!Kv(t))throw Ie;let n=1e3,a={selectionDelay:n,debounceWait:n,...e.options},i;return{select:ha(r,a.debounceWait,{isImmediate:!0}),beginDelayedSelect(){i=setTimeout(r,a.selectionDelay)},cancelPendingSelect(){i&&clearTimeout(i)}}}function Kv(t){return t.addReducers({configuration:Fe}),!0}function _p(t,e){let r=!1;return Bp(t,e,()=>{r||(r=!0,t.dispatch(sp(e.options.result.uniqueId)))})}var pn=(t,e)=>{let r=t;return H(r[e])?H(t.raw[e])?null:t.raw[e]:r[e]},$p=t=>e=>t.every(r=>!H(pn(e,r))),Hp=t=>e=>t.every(r=>H(pn(e,r))),zp=(t,e)=>r=>{let n=Wp(t,r);return e.some(a=>n.some(i=>`${i}`.toLowerCase()===a.toLowerCase()))},Gp=(t,e)=>r=>{let n=Wp(t,r);return e.every(a=>n.every(i=>`${i}`.toLowerCase()!==a.toLowerCase()))},Wp=(t,e)=>{let r=pn(e,t);return $n(r)?r:[r]};var qt=()=>new R({required:!1,emptyAllowed:!0}),Vs=m("advancedSearchQueries/update",t=>h(t,{aq:qt(),cq:qt(),lq:qt(),dq:qt()})),Ns=m("advancedSearchQueries/register",t=>h(t,{aq:qt(),cq:qt(),lq:qt(),dq:qt()}));var Jv=P(Et(),t=>{t.addCase(Vs,(e,r)=>{let{aq:n,cq:a,lq:i,dq:o}=r.payload;ce(n)||(e.aq=n,e.aqWasSet=!0),ce(a)||(e.cq=a,e.cqWasSet=!0),ce(i)||(e.lq=i,e.lqWasSet=!0),ce(o)||(e.dq=o,e.dqWasSet=!0)}).addCase(Ns,(e,r)=>{let{aq:n,cq:a,lq:i,dq:o}=r.payload;ce(n)||(e.defaultFilters.aq=n,e.aqWasSet||(e.aq=n)),ce(a)||(e.defaultFilters.cq=a,e.cqWasSet||(e.cq=a)),ce(i)||(e.defaultFilters.lq=i,e.lqWasSet||(e.lq=i)),ce(o)||(e.defaultFilters.dq=o,e.dqWasSet||(e.dq=o))}).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.advancedSearchQueries)!=null?a:e}).addCase(Z,(e,r)=>{let{aq:n,cq:a}=r.payload;ce(n)||(e.aq=n,e.aqWasSet=!0),ce(a)||(e.cq=a,e.cqWasSet=!0)})});var G=C;var Ms=m("facetOptions/update",(t={freezeFacetOrder:!0})=>h(t,{freezeFacetOrder:new U({required:!1})})),Ls=m("facetOptions/facet/enable",t=>h(t,G)),He=m("facetOptions/facet/disable",t=>h(t,G));var fn={facetId:G,captions:new O({options:{required:!1}}),numberOfValues:new q({required:!1,min:1}),query:new R({required:!1,emptyAllowed:!0})};var Xv={path:new Q({required:!0,each:C}),displayValue:X,rawValue:X,count:new q({required:!0,min:0})},ni=m("categoryFacet/selectSearchResult",t=>h(t,{facetId:G,value:new O({values:Xv})})),_D=m("categoryFacetSearch/register",t=>h(t,fn));function Pr(t,e){var i;let{facetId:r,criterion:n}=e,a=(i=t[r])==null?void 0:i.request;!a||(a.sortCriteria=n)}function mn(t){!t||(t.currentValues=t.currentValues.map(e=>({...e,state:"idle"})),t.preventAutoSelect=!0)}function ai(t,e){!t||(t.numberOfValues=e)}function ii(t,e){let r=t[e];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function js(t,e,r){t.currentValues=Zv(e,r),t.numberOfValues=e.length?1:r,t.preventAutoSelect=!0}function Zv(t,e){if(!t.length)return[];let r=Yp(t[0],e),n=r;for(let a of t.splice(1)){let i=Yp(a,e);n.children.push(i),n=i}return n.state="selected",n.retrieveChildren=!0,[r]}function Yp(t,e){return{value:t,retrieveCount:e,children:[],state:"idle",retrieveChildren:!1}}var eA={state:new te({required:!0}),numberOfResults:new q({required:!0,min:0}),value:new R({required:!0,emptyAllowed:!0}),path:new Q({required:!0,each:C}),moreValuesAvailable:new U({required:!1})};function Us(t){t.children.forEach(e=>{Us(e)}),De({state:t.state,numberOfResults:t.numberOfResults,value:t.value,path:t.path,moreValuesAvailable:t.moreValuesAvailable},eA)}var Ir={facetId:G,field:C,delimitingCharacter:new R({required:!1,emptyAllowed:!0}),filterFacetCount:new U({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new te({required:!1}),basePath:new Q({required:!1,each:C}),filterByBasePath:new U({required:!1})},gn=m("categoryFacet/register",t=>h(t,Ir)),yn=m("categoryFacet/toggleSelectValue",t=>{try{return De(t.facetId,C),Us(t.selection),{payload:t,error:null}}catch(e){return{payload:t,error:ut(e)}}}),hn=m("categoryFacet/deselectAll",t=>h(t,Ir.facetId)),Qs=m("categoryFacet/updateNumberOfValues",t=>h(t,{facetId:Ir.facetId,numberOfValues:Ir.numberOfValues})),Bs=m("categoryFacet/updateSortCriterion",t=>h(t,{facetId:Ir.facetId,criterion:new te})),_s=m("categoryFacet/updateBasePath",t=>h(t,{facetId:Ir.facetId,basePath:new Q({each:C})}));var tA=P(dr(),t=>{t.addCase(gn,(e,r)=>{let n=r.payload,{facetId:a}=n;if(a in e)return;let i=aA(n),o=i.numberOfValues;e[a]={request:i,initialNumberOfValues:o}}).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.categoryFacetSet)!=null?a:e}).addCase(Z,(e,r)=>{let n=r.payload.cf||{};Object.keys(e).forEach(a=>{let i=e[a].request,o=n[a]||[];(o.length||i.currentValues.length)&&js(i,o,e[a].initialNumberOfValues)})}).addCase(Bs,(e,r)=>{var o;let{facetId:n,criterion:a}=r.payload,i=(o=e[n])==null?void 0:o.request;!i||(i.sortCriteria=a)}).addCase(_s,(e,r)=>{var o;let{facetId:n,basePath:a}=r.payload,i=(o=e[n])==null?void 0:o.request;!i||(i.basePath=[...a])}).addCase(yn,(e,r)=>{var p;let{facetId:n,selection:a,retrieveCount:i}=r.payload,o=(p=e[n])==null?void 0:p.request;if(!o)return;let{path:s}=a,u=s.slice(0,s.length-1),c=nA(o,u,i);if(c.length){let g=c[0];g.retrieveChildren=!0,g.state="selected",g.children=[];return}let l=Kp(a.value,i);l.state="selected",c.push(l),o.numberOfValues=1}).addCase(hn,(e,r)=>{let n=r.payload;ii(e,n)}).addCase(ye,e=>{Object.keys(e).forEach(r=>ii(e,r))}).addCase(rt,(e,r)=>Object.keys(e).forEach(n=>{e[n].request.preventAutoSelect=!r.payload.allow})).addCase(Qs,(e,r)=>{var o;let{facetId:n,numberOfValues:a}=r.payload,i=(o=e[n])==null?void 0:o.request;if(!!i){if(!i.currentValues.length)return ai(i,a);iA(e,r.payload)}}).addCase(ni,(e,r)=>{let{facetId:n,value:a}=r.payload,i=e[n];if(!i)return;let o=[...a.path,a.rawValue];js(i.request,o,i.initialNumberOfValues)}).addCase(ti.fulfilled,(e,r)=>{Jp(e,r.payload.response.facets)}).addCase(ee.fulfilled,(e,r)=>{Jp(e,r.payload.response.facets)}).addCase(He,(e,r)=>{ii(e,r.payload)})}),rA={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function nA(t,e,r){let n=t.currentValues;for(let a of e){let i=n[0];(!i||a!==i.value)&&(i=Kp(a,r),n.length=0,n.push(i)),i.retrieveChildren=!1,i.state="idle",n=i.children}return n}function aA(t){return{...rA,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...t}}function Kp(t,e){return{value:t,state:"idle",children:[],retrieveChildren:!0,retrieveCount:e}}function Jp(t,e){e.forEach(r=>{var o;if(!oA(t,r))return;let n=r.facetId,a=(o=t[n])==null?void 0:o.request;if(!a)return;let i=sA(a,r);a.currentValues=i?[]:a.currentValues,a.preventAutoSelect=!1})}function iA(t,e){var i;let{facetId:r,numberOfValues:n}=e,a=(i=t[r])==null?void 0:i.request.currentValues[0];if(!!a){for(;a.children.length&&(a==null?void 0:a.state)!=="selected";)a=a.children[0];a.retrieveCount=n}}function oA(t,e){return e.facetId in t}function sA(t,e){let r=Pt(t.currentValues),n=Pt(e.values);return r.length!==n.length}var ze=(r=>(r.Relevance="relevance",r.Fields="fields",r))(ze||{}),oi=(r=>(r.Ascending="asc",r.Descending="desc",r))(oi||{});var kV=new O({options:{required:!1},values:{by:new Ue({enum:ze,required:!0}),fields:new Q({each:new O({values:{name:new R,direction:new Ue({enum:oi})}})})}});var Xp=()=>Yd("analytics/productListing/load",t=>t.makeInterfaceLoad(),t=>new gr(t));var zV=m("productlisting/setUrl",t=>h(t,{url:new R({required:!0,url:!0})})),GV=m("productlisting/setAdditionalFields",t=>h(t,{additionalFields:new Q({required:!0,each:new R({required:!0,emptyAllowed:!1})})})),Tt=B("productlisting/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:n,extra:a})=>{let i=e(),{apiClient:o}=a,s=await o.getProducts(await cA(i));return re(s)?(r(Me(s.error)),n(s.error)):{response:s.success,analyticsAction:Xp()}}),cA=async t=>{var n,a,i;let e=lA(t),r=await Ae(t.configuration.analytics);return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,platformUrl:t.configuration.platformUrl,url:(n=t.productListing)==null?void 0:n.url,...t.configuration.analytics.enabled&&r?{clientId:r}:{},...((a=t.productListing.additionalFields)==null?void 0:a.length)?{additionalFields:t.productListing.additionalFields}:{},...t.productListing.advancedParameters&&uA(t.productListing.advancedParameters)?{advancedParameters:t.productListing.advancedParameters||{}}:{},...e.length&&{facets:{requests:e}},...t.pagination&&{pagination:{numberOfValues:t.pagination.numberOfResults,page:Math.ceil(t.pagination.firstResult/(t.pagination.numberOfResults||1))+1}},...(((i=t.sort)==null?void 0:i.by)||ze.Relevance)!==ze.Relevance&&{sort:t.sort},...t.context&&{userContext:t.context.contextValues}}};function uA(t){return t.debug}function lA(t){var e;return Qa(dA(t),(e=t.facetOrder)!=null?e:[])}function dA(t){var e,r,n,a;return[...ft((e=t.facetSet)!=null?e:{}),...ft((r=t.numericFacetSet)!=null?r:{}),...ft((n=t.dateFacetSet)!=null?n:{}),...ft((a=t.categoryFacetSet)!=null?a:{})]}var Zp={facetId:G,value:new O({values:{displayValue:X,rawValue:X,count:new q({required:!0,min:0})}})},eN=m("facetSearch/register",t=>h(t,fn)),tN=m("facetSearch/update",t=>h(t,fn)),si=m("facetSearch/toggleSelectValue",t=>h(t,Zp)),ef=m("facetSearch/toggleExcludeValue",t=>h(t,Zp));var iN=new R({regex:/^[a-zA-Z0-9-_]+$/}),oN=new R({required:!0}),sN=new Q({each:new R}),cN=new R,uN=new U,lN=new U,dN=new q({min:0}),pA=new q({min:1}),pN=new U({required:!0}),fA=new O,mA=new R,gA={captions:fA,numberOfValues:pA,query:mA},fN=new O({values:gA}),tf=new O({options:{required:!1},values:{type:new R({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new Q({required:!0,max:25,each:new R({emptyAllowed:!1,required:!0})})}}),mN=new U,rf=new Q({min:1,max:25,required:!1,each:new R({emptyAllowed:!1,required:!0})});var Sn={value:C,numberOfResults:new q({min:0}),state:C};var yA={facetId:G,field:new R({required:!0,emptyAllowed:!0}),filterFacetCount:new U({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new te({required:!1}),resultsMustMatch:new te({required:!1}),allowedValues:tf,customSort:rf},vn=m("facet/register",t=>h(t,yA)),An=m("facet/toggleSelectValue",t=>h(t,{facetId:G,selection:new O({values:Sn})})),$s=m("facet/toggleExcludeValue",t=>h(t,{facetId:G,selection:new O({values:Sn})})),yt=m("facet/deselectAll",t=>h(t,G)),Hs=m("facet/updateSortCriterion",t=>h(t,{facetId:G,criterion:new te({required:!0})})),zs=m("facet/updateNumberOfValues",t=>h(t,{facetId:G,numberOfValues:new q({required:!0,min:1})})),Gs=m("facet/updateIsFieldExpanded",t=>h(t,{facetId:G,isFieldExpanded:new U({required:!0})})),Ws=m("facet/updateFreezeCurrentValues",t=>h(t,{facetId:G,freezeCurrentValues:new U({required:!0})}));var hA=P(mr(),t=>{t.addCase(vn,(e,r)=>{let{facetId:n}=r.payload;n in e||(e[n]=Od(vA(r.payload)))}).addCase(Y.fulfilled,(e,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(Z,(e,r)=>{let n=r.payload.f||{},a=r.payload.fExcluded||{};Object.keys(e).forEach(o=>{let{request:s}=e[o],u=n[o]||[],c=a[o]||[],l=s.currentValues.filter(p=>!u.includes(p.value)&&!c.includes(p.value));s.currentValues=[...u.map(nf),...c.map(af),...l.map(CA)],s.preventAutoSelect=u.length>0,s.numberOfValues=Math.max(u.length+c.length,s.numberOfValues)})}).addCase(An,(e,r)=>{var u;let{facetId:n,selection:a}=r.payload,i=(u=e[n])==null?void 0:u.request;if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find(c=>c.value===a.value);if(!o){ci(i,a);return}let s=o.state==="selected";o.state=s?"idle":"selected",i.freezeCurrentValues=!0}).addCase($s,(e,r)=>{var u;let{facetId:n,selection:a}=r.payload,i=(u=e[n])==null?void 0:u.request;if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find(c=>c.value===a.value);if(!o){ci(i,a);return}let s=o.state==="excluded";o.state=s?"idle":"excluded",i.freezeCurrentValues=!0}).addCase(Ws,(e,r)=>{var o;let{facetId:n,freezeCurrentValues:a}=r.payload,i=(o=e[n])==null?void 0:o.request;!i||(i.freezeCurrentValues=a)}).addCase(yt,(e,r)=>{var n;mn((n=e[r.payload])==null?void 0:n.request)}).addCase(ye,e=>{Object.values(e).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>mn(r))}).addCase(zt,e=>{Object.values(e).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>mn(r))}).addCase(rt,(e,r)=>Object.values(e).forEach(n=>{n.request.preventAutoSelect=!r.payload.allow})).addCase(Hs,(e,r)=>{Pr(e,r.payload)}).addCase(zs,(e,r)=>{var i;let{facetId:n,numberOfValues:a}=r.payload;ai((i=e[n])==null?void 0:i.request,a)}).addCase(Gs,(e,r)=>{var o;let{facetId:n,isFieldExpanded:a}=r.payload,i=(o=e[n])==null?void 0:o.request;!i||(i.isFieldExpanded=a)}).addCase(ee.fulfilled,(e,r)=>{r.payload.response.facets.forEach(a=>{var i;return Ys((i=e[a.facetId])==null?void 0:i.request,a)})}).addCase(Tt.fulfilled,(e,r)=>{var a,i;(((i=(a=r.payload.response)==null?void 0:a.facets)==null?void 0:i.results)||[]).forEach(o=>{var s;return Ys((s=e[o.facetId])==null?void 0:s.request,o)})}).addCase(ti.fulfilled,(e,r)=>{r.payload.response.facets.forEach(a=>{var i;return Ys((i=e[a.facetId])==null?void 0:i.request,a)})}).addCase(si,(e,r)=>{var l;let{facetId:n,value:a}=r.payload,i=(l=e[n])==null?void 0:l.request;if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,u=s.find(p=>p.value===o);if(u){u.state="selected";return}let c=nf(o);ci(i,c),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase(ef,(e,r)=>{var l;let{facetId:n,value:a}=r.payload,i=(l=e[n])==null?void 0:l.request;if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,u=s.find(p=>p.value===o);if(u){u.state="excluded";return}let c=af(o);ci(i,c),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase(He,(e,r)=>{if(!(r.payload in e))return;let{request:n}=e[r.payload];mn(n)})});function ci(t,e){let{currentValues:r}=t,n=r.findIndex(s=>s.state==="idle"),a=n===-1?r.length:n,i=r.slice(0,a),o=r.slice(a+1);t.currentValues=[...i,e,...o],t.numberOfValues=t.currentValues.length}function Ys(t,e){!t||(t.currentValues=e.values.map(AA),t.freezeCurrentValues=!1,t.preventAutoSelect=!1)}var SA={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function vA(t){return{...SA,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...t}}function AA(t){let{value:e,state:r}=t;return{value:e,state:r}}function nf(t){return{value:t,state:"selected"}}function af(t){return{value:t,state:"excluded"}}function CA(t){return{...t,state:"idle"}}var Ks=m("pipeline/set",t=>h(t,new R({required:!0,emptyAllowed:!0})));var of=P(Sr(),t=>{t.addCase(Ks,(e,r)=>r.payload).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.pipeline)!=null?a:e}).addCase(Lt,(e,r)=>r.payload.pipeline||e)});var bA=new Q({each:C,required:!0}),sf=(t,e)=>(h(t,C),Un(e)?h(e,C):h(e,bA),{payload:{contextKey:t,contextValue:e}}),Js=m("context/set",t=>{for(let[e,r]of Object.entries(t))sf(e,r);return{payload:t}}),Xs=m("context/add",t=>sf(t.contextKey,t.contextValue)),Zs=m("context/remove",t=>h(t,C));var RA=P(Ba(),t=>{t.addCase(Js,(e,r)=>{e.contextValues=r.payload}).addCase(Xs,(e,r)=>{e.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Zs,(e,r)=>{delete e.contextValues[r.payload]}).addCase(Y.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.context.contextValues)})});var ec=m("dictionaryFieldContext/set",t=>{let e=new O({options:{required:!0}}),r=h(t,e).error;if(r)return{payload:t,error:r};let n=Object.values(t),a=new Q({each:X}),i=h(n,a).error;return i?{payload:t,error:i}:{payload:t}}),tc=m("dictionaryFieldContext/add",t=>{let e=new O({options:{required:!0},values:{field:X,key:X}});return h(t,e)}),rc=m("dictionaryFieldContext/remove",t=>h(t,X));var xA=P(_a(),t=>{t.addCase(ec,(e,r)=>{e.contextValues=r.payload}).addCase(tc,(e,r)=>{let{field:n,key:a}=r.payload;e.contextValues[n]=a}).addCase(rc,(e,r)=>{delete e.contextValues[r.payload]}).addCase(Y.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.dictionaryFieldContext.contextValues)})});var ui={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function li(t,e){let{request:r}=e,{facetId:n}=r;if(n in t)return;let a=cf(r);r.numberOfValues=a,t[n]=e}function di(t,e,r){var a;let n=(a=t[e])==null?void 0:a.request;!n||(n.currentValues=r,n.numberOfValues=cf(n))}function pi(t,e,r){var o;let n=(o=t[e])==null?void 0:o.request;if(!n)return;let a=gi(n.currentValues,r);if(!a)return;let i=a.state==="selected";a.state=i?"idle":"selected",n.preventAutoSelect=!0}function fi(t,e,r){var o;let n=(o=t[e])==null?void 0:o.request;if(!n)return;let a=gi(n.currentValues,r);if(!a)return;let i=a.state==="excluded";a.state=i?"idle":"excluded",n.preventAutoSelect=!0}function Dt(t,e){var n;let r=(n=t[e])==null?void 0:n.request;!r||r.currentValues.forEach(a=>a.state="idle")}function mi(t,e){Object.entries(t).forEach(([r,{request:n}])=>{let a=e[r]||[];n.currentValues.forEach(s=>{let u=!!gi(a,s);return s.state=u?"selected":"idle",s});let i=a.filter(s=>!gi(n.currentValues,s)),o=n.currentValues;o.push(...i),n.numberOfValues=Math.max(n.numberOfValues,o.length)})}function kr(t,e,r){e.forEach(n=>{var s;let a=n.facetId,i=(s=t[a])==null?void 0:s.request;if(!i)return;let o=r(n.values);i.currentValues=o,i.preventAutoSelect=!1})}function gi(t,e){let{start:r,end:n}=e;return t.find(a=>a.start===r&&a.end===n)}function cf(t){let{generateAutomaticRanges:e,currentValues:r,numberOfValues:n}=t;return e?Math.max(n,r.length):r.length}function uf(t){var i,o;let e=lf(t.start,t),r=lf(t.end,t),n=(i=t.endInclusive)!=null?i:!1,a=(o=t.state)!=null?o:"idle";return{start:e,end:r,endInclusive:n,state:a}}function lf(t,e){let{dateFormat:r}=e;return Fp(t)?(bs(t),bp(t)):typeof t=="string"&&Ot(t)?(bs(t),t):(Sp(t,r),ja(xr(t,r)))}var yi=m("rangeFacet/updateSortCriterion",t=>h(t,{facetId:G,criterion:new te({required:!0})}));var hi={state:C,start:new q({required:!0}),end:new q({required:!0}),endInclusive:new U({required:!0}),numberOfResults:new q({required:!0,min:0})},Si={start:C,end:C,endInclusive:new U({required:!0}),state:C,numberOfResults:new q({required:!0,min:0})};var FA={start:C,end:C,endInclusive:new U({required:!0}),state:C},wA={facetId:G,field:C,currentValues:new Q({required:!1,each:new O({values:FA})}),generateAutomaticRanges:new U({required:!0}),filterFacetCount:new U({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new te({required:!1}),rangeAlgorithm:new te({required:!1})};function df(t){return Ot(t)?on(t):t}function pf(t){!t.currentValues||t.currentValues.forEach(e=>{let{start:r,end:n}=uf(e);if(xr(df(r)).isAfter(xr(df(n))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)})}var Cn=m("dateFacet/register",t=>{try{return De(t,wA),pf(t),{payload:t,error:null}}catch(e){return{payload:t,error:ut(e)}}}),bn=m("dateFacet/toggleSelectValue",t=>h(t,{facetId:G,selection:new O({values:Si})})),nc=m("dateFacet/toggleExcludeValue",t=>h(t,{facetId:G,selection:new O({values:Si})})),Rn=m("dateFacet/updateFacetValues",t=>{try{return De(t,{facetId:G,values:new Q({each:new O({values:Si})})}),pf({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:ut(e)}}}),ac=yi,ic=yt;var PA=P(pr(),t=>{t.addCase(Cn,(e,r)=>{let{payload:n}=r,a=IA(n);li(e,kd(a))}).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.dateFacetSet)!=null?a:e}).addCase(Z,(e,r)=>{let n=r.payload.df||{};mi(e,n)}).addCase(bn,(e,r)=>{let{facetId:n,selection:a}=r.payload;pi(e,n,a)}).addCase(nc,(e,r)=>{let{facetId:n,selection:a}=r.payload;fi(e,n,a)}).addCase(Rn,(e,r)=>{let{facetId:n,values:a}=r.payload;di(e,n,a)}).addCase(ic,(e,r)=>{Dt(e,r.payload)}).addCase(ye,e=>{Object.keys(e).forEach(r=>{Dt(e,r)})}).addCase(ac,(e,r)=>{Pr(e,r.payload)}).addCase(ee.fulfilled,(e,r)=>{let n=r.payload.response.facets;kr(e,n,ff)}).addCase(Tt.fulfilled,(e,r)=>{var a,i;let n=((i=(a=r.payload.response)==null?void 0:a.facets)==null?void 0:i.results)||[];kr(e,n,ff)}).addCase(He,(e,r)=>{Dt(e,r.payload)})});function IA(t){return{...ui,currentValues:[],preventAutoSelect:!1,type:"dateRange",...t}}function ff(t){return t.map(e=>{let{numberOfResults:r,...n}=e;return n})}var kA={state:C,start:new q({required:!0}),end:new q({required:!0}),endInclusive:new U({required:!0})},EA={facetId:G,field:C,currentValues:new Q({required:!1,each:new O({values:kA})}),generateAutomaticRanges:new U({required:!0}),filterFacetCount:new U({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new te({required:!1}),rangeAlgorithm:new te({required:!1})};function mf(t){!t.currentValues||t.currentValues.forEach(({start:e,end:r})=>{if(e>r)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${r}`)})}var xn=m("numericFacet/register",t=>{try{return h(t,EA),mf(t),{payload:t,error:null}}catch(e){return{payload:t,error:ut(e)}}}),Fn=m("numericFacet/toggleSelectValue",t=>h(t,{facetId:G,selection:new O({values:hi})})),oc=m("numericFacet/toggleExcludeValue",t=>h(t,{facetId:G,selection:new O({values:hi})})),wn=m("numericFacet/updateFacetValues",t=>{try{return De(t,{facetId:G,values:new Q({each:new O({values:hi})})}),mf({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:ut(e)}}}),sc=yi,cc=yt;var OA=P($a(),t=>{t.addCase(Ms,(e,r)=>({...e,...r.payload})).addCase(ee.fulfilled,e=>{e.freezeFacetOrder=!1}).addCase(ee.rejected,e=>{e.freezeFacetOrder=!1}).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.facetOptions)!=null?a:e}).addCase(gn,(e,r)=>{e.facets[r.payload.facetId]=wr()}).addCase(vn,(e,r)=>{e.facets[r.payload.facetId]=wr()}).addCase(Cn,(e,r)=>{e.facets[r.payload.facetId]=wr()}).addCase(xn,(e,r)=>{e.facets[r.payload.facetId]=wr()}).addCase(Ls,(e,r)=>{e.facets[r.payload].enabled=!0}).addCase(He,(e,r)=>{e.facets[r.payload].enabled=!1}).addCase(Z,(e,r)=>{var n,a,i,o,s;[...Object.keys((n=r.payload.f)!=null?n:{}),...Object.keys((a=r.payload.fExcluded)!=null?a:{}),...Object.keys((i=r.payload.cf)!=null?i:{}),...Object.keys((o=r.payload.nf)!=null?o:{}),...Object.keys((s=r.payload.df)!=null?s:{})].forEach(u=>{u in e||(e.facets[u]=wr()),e.facets[u].enabled=!0})})});var vi=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function gf(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:vi(),originalQuery:"",automaticallyCorrectQuery:!0}}var qA=P(gf(),t=>{t.addCase(Rs,e=>{e.enableDidYouMean=!0}).addCase(xs,e=>{e.enableDidYouMean=!1}).addCase(ws,e=>{e.automaticallyCorrectQuery=!0}).addCase(Fs,e=>{e.automaticallyCorrectQuery=!1}).addCase(ee.pending,e=>{e.queryCorrection=vi(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""}).addCase(ee.fulfilled,(e,r)=>{e.queryCorrection=r.payload.response.queryCorrections[0]||vi(),e.originalQuery=r.payload.originalQuery,e.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(mt,(e,r)=>{e.wasCorrectedTo=r.payload})});var Pn={id:C},uc=m("querySuggest/register",t=>h(t,{...Pn,count:new q({min:0})})),yf=m("querySuggest/unregister",t=>h(t,Pn)),In=m("querySuggest/selectSuggestion",t=>h(t,{...Pn,expression:X})),lc=m("querySuggest/clear",t=>h(t,Pn)),kn=B("querySuggest/fetch",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:n,validatePayload:a}})=>{a(t,Pn);let i=t.id,o=await TA(i,e()),s=await n.querySuggest(o);return re(s)?r(s.error):{id:i,q:o.q,...s.success}}),TA=async(t,e)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,count:e.querySuggest[t].count,q:e.querySet[t],locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,actionsHistory:e.configuration.analytics.enabled?Je.getHistory():[],...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await Ae(e.configuration.analytics),...e.configuration.analytics.enabled&&await Rr(e.configuration.analytics)},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var hf=P(we(),t=>t.addCase($e,(e,r)=>({...e,...r.payload})).addCase(mt,(e,r)=>{e.q=r.payload}).addCase(In,(e,r)=>{e.q=r.payload.expression}).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.query)!=null?a:e}).addCase(Z,(e,r)=>{var n,a;e.q=(n=r.payload.q)!=null?n:e.q,e.enableQuerySyntax=(a=r.payload.enableQuerySyntax)!=null?a:e.enableQuerySyntax}));var DA={collectionField:new R({emptyAllowed:!1,required:!1}),parentField:new R({emptyAllowed:!1,required:!1}),childField:new R({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new q({min:0,required:!1})},En=m("folding/register",t=>h(t,DA)),On=B("folding/loadCollection",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:n}})=>{let a=e(),i=await kt(a),o=await n.search({...i,q:VA(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}="${t}"`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return re(o)?r(o.error):{collectionId:t,results:o.success.results,rootResult:a.folding.collections[t].result}});function VA(t){return t.query.q===""?"":t.query.enableQuerySyntax?`${t.query.q} OR @uri`:`( <@- ${t.query.q} -@> ) OR @uri`}var Ai=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});var NA=new Q({each:C,required:!0}),Ci=m("fields/registerFieldsToInclude",t=>h(t,NA)),dc=m("fields/fetchall/enable"),pc=m("fields/fetchall/disable"),fc=B("fields/fetchDescription",async(t,{extra:e,getState:r,rejectWithValue:n})=>{let a=r(),{accessToken:i,organizationId:o}=a.configuration,{apiBaseUrl:s}=a.configuration.search,u=await e.apiClient.fieldDescriptions({accessToken:i,organizationId:o,url:s});return re(u)?n(u.error):u.success.fields});var Sf=["author","language","urihash","objecttype","collection","source","permanentid"],MA=[...Sf,"date","filetype","parents"],eU=[...MA,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],vf=()=>({fieldsToInclude:Sf,fetchAllFields:!1,fieldsDescription:[]});var Af=P(vf(),t=>t.addCase(Ci,(e,r)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(r.payload))]}).addCase(dc,e=>{e.fetchAllFields=!0}).addCase(pc,e=>{e.fetchAllFields=!1}).addCase(fc.fulfilled,(e,{payload:r})=>{e.fieldsDescription=r}).addCase(En,(e,{payload:r})=>{var a,i,o;let n=Ai().fields;e.fieldsToInclude.push((a=r.collectionField)!=null?a:n.collection,(i=r.parentField)!=null?i:n.parent,(o=r.childField)!=null?o:n.child)}));var hU=new O({options:{required:!1},values:{by:new Ue({enum:ze,required:!0}),fields:new Q({each:new O({values:{field:new R({required:!0}),direction:new Ue({enum:oi}),displayName:new R}})})}});var Cf=t=>{let e=LA(t),{view:r,user:n,...a}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,...a,context:{user:n,view:r,cart:t.cart.cartItems.map(i=>t.cart.cart[i])},facets:e,...t.commercePagination&&{page:t.commercePagination.page},...t.commerceSort&&{sort:jA(t.commerceSort.appliedSort)}}};function LA(t){return!t.facetOrder||!t.commerceFacetSet?[]:t.facetOrder.map(e=>t.commerceFacetSet[e].request).filter(e=>e.values.length>0)}function jA(t){if(!!t)return t.by===ze.Relevance?{sortCriteria:ze.Relevance}:{sortCriteria:ze.Fields,fields:t.fields.map(({name:e,direction:r})=>({field:e,direction:r}))}}var bf=()=>Wd("analytics/commerce/productListing/load",t=>t.makeInterfaceLoad(),t=>new lr(t));var Rf=B("commerce/productListing/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:n,extra:a})=>{let i=e(),{apiClient:o}=a,s=await o.getProductListing(Cf(i));return re(s)?(r(Me(s.error)),n(s.error)):{response:s.success,analyticsAction:bf()}});var UA=P(Ha(),t=>{t.addCase(ee.fulfilled,(e,r)=>r.payload.response.facets.map(n=>n.facetId)).addCase(Rf.fulfilled,(e,r)=>{let n=a=>{var i;return(i=a.facetId)!=null?i:a.field};return r.payload.response.facets.map(n)}).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.facetOrder)!=null?a:e})});var xf=t=>({past:[],present:t,future:[]}),QA=t=>{let{past:e,present:r,future:n}=t;if(!r||e.length===0)return t;let a=e[e.length-1];return{past:e.slice(0,e.length-1),present:a,future:[r,...n]}},BA=t=>{let{past:e,present:r,future:n}=t;if(!r||n.length===0)return t;let a=n[0],i=n.slice(1);return{past:[...e,r],present:a,future:i}},_A=t=>{let{action:e,state:r,reducer:n}=t,{past:a,present:i}=r,o=n(i,e);return i?i===o?r:{past:[...a,i],present:o,future:[]}:xf(o)},Ff=t=>{let{actionTypes:e,reducer:r}=t,n=xf();return(a=n,i)=>{switch(i.type){case e.undo:return QA(a);case e.redo:return BA(a);case e.snapshot:return _A({state:a,reducer:r,action:i});default:return a}}};var $A=Object.getOwnPropertyNames,HA=Object.getOwnPropertySymbols,zA=Object.prototype.hasOwnProperty;function wf(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function bi(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);var i=a.cache,o=i.get(r),s=i.get(n);if(o&&s)return o===n&&s===r;i.set(r,n),i.set(n,r);var u=t(r,n,a);return i.delete(r),i.delete(n),u}}function Pf(t){return $A(t).concat(HA(t))}var If=Object.hasOwn||function(t,e){return zA.call(t,e)};function Er(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var kf="_owner",Ef=Object.getOwnPropertyDescriptor,Of=Object.keys;function GA(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function WA(t,e){return Er(t.getTime(),e.getTime())}function qf(t,e,r){if(t.size!==e.size)return!1;for(var n={},a=t.entries(),i=0,o,s;(o=a.next())&&!o.done;){for(var u=e.entries(),c=!1,l=0;(s=u.next())&&!s.done;){var p=o.value,g=p[0],d=p[1],y=s.value,v=y[0],A=y[1];!c&&!n[l]&&(c=r.equals(g,v,i,l,t,e,r)&&r.equals(d,A,g,v,t,e,r))&&(n[l]=!0),l++}if(!c)return!1;i++}return!0}function YA(t,e,r){var n=Of(t),a=n.length;if(Of(e).length!==a)return!1;for(var i;a-- >0;)if(i=n[a],i===kf&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!If(e,i)||!r.equals(t[i],e[i],i,i,t,e,r))return!1;return!0}function qn(t,e,r){var n=Pf(t),a=n.length;if(Pf(e).length!==a)return!1;for(var i,o,s;a-- >0;)if(i=n[a],i===kf&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!If(e,i)||!r.equals(t[i],e[i],i,i,t,e,r)||(o=Ef(t,i),s=Ef(e,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function KA(t,e){return Er(t.valueOf(),e.valueOf())}function JA(t,e){return t.source===e.source&&t.flags===e.flags}function Tf(t,e,r){if(t.size!==e.size)return!1;for(var n={},a=t.values(),i,o;(i=a.next())&&!i.done;){for(var s=e.values(),u=!1,c=0;(o=s.next())&&!o.done;)!u&&!n[c]&&(u=r.equals(i.value,o.value,i.value,o.value,t,e,r))&&(n[c]=!0),c++;if(!u)return!1}return!0}function XA(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var ZA="[object Arguments]",eC="[object Boolean]",tC="[object Date]",rC="[object Map]",nC="[object Number]",aC="[object Object]",iC="[object RegExp]",oC="[object Set]",sC="[object String]",cC=Array.isArray,Df=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Vf=Object.assign,uC=Object.prototype.toString.call.bind(Object.prototype.toString);function lC(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areMapsEqual,a=t.areObjectsEqual,i=t.arePrimitiveWrappersEqual,o=t.areRegExpsEqual,s=t.areSetsEqual,u=t.areTypedArraysEqual;return function(l,p,g){if(l===p)return!0;if(l==null||p==null||typeof l!="object"||typeof p!="object")return l!==l&&p!==p;var d=l.constructor;if(d!==p.constructor)return!1;if(d===Object)return a(l,p,g);if(cC(l))return e(l,p,g);if(Df!=null&&Df(l))return u(l,p,g);if(d===Date)return r(l,p,g);if(d===RegExp)return o(l,p,g);if(d===Map)return n(l,p,g);if(d===Set)return s(l,p,g);var y=uC(l);return y===tC?r(l,p,g):y===iC?o(l,p,g):y===rC?n(l,p,g):y===oC?s(l,p,g):y===aC?typeof l.then!="function"&&typeof p.then!="function"&&a(l,p,g):y===ZA?a(l,p,g):y===eC||y===nC||y===sC?i(l,p,g):!1}}function dC(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,a={areArraysEqual:n?qn:GA,areDatesEqual:WA,areMapsEqual:n?wf(qf,qn):qf,areObjectsEqual:n?qn:YA,arePrimitiveWrappersEqual:KA,areRegExpsEqual:JA,areSetsEqual:n?wf(Tf,qn):Tf,areTypedArraysEqual:n?qn:XA};if(r&&(a=Vf({},a,r(a))),e){var i=bi(a.areArraysEqual),o=bi(a.areMapsEqual),s=bi(a.areObjectsEqual),u=bi(a.areSetsEqual);a=Vf({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:u})}return a}function pC(t){return function(e,r,n,a,i,o,s){return t(e,r,s)}}function fC(t){var e=t.circular,r=t.comparator,n=t.createState,a=t.equals,i=t.strict;if(n)return function(u,c){var l=n(),p=l.cache,g=p===void 0?e?new WeakMap:void 0:p,d=l.meta;return r(u,c,{cache:g,equals:a,meta:d,strict:i})};if(e)return function(u,c){return r(u,c,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(u,c){return r(u,c,o)}}var BU=nt(),_U=nt({strict:!0}),$U=nt({circular:!0}),HU=nt({circular:!0,strict:!0}),zU=nt({createInternalComparator:function(){return Er}}),GU=nt({strict:!0,createInternalComparator:function(){return Er}}),WU=nt({circular:!0,createInternalComparator:function(){return Er}}),YU=nt({circular:!0,createInternalComparator:function(){return Er},strict:!0});function nt(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,a=t.createState,i=t.strict,o=i===void 0?!1:i,s=dC(t),u=lC(s),c=n?n(u):pC(u);return fC({circular:r,comparator:u,createState:a,equals:c,strict:o})}function Nf(t,e,r=(n,a)=>n===a){return t.length===e.length&&t.findIndex((n,a)=>!r(e[a],n))===-1}function mC(t,e){return t.length!==e.length?!1:t.every(r=>e.findIndex(n=>gC(r,n))!==-1)}var gC=nt({createCustomConfig:t=>({...t,areArraysEqual:mC})});var yC=P(Dp(),t=>{t.addCase(Be,(e,r)=>hC(e,r.payload)?void 0:r.payload)}),hC=(t,e)=>SC(t.context,e.context)&&vC(t.dictionaryFieldContext,e.dictionaryFieldContext)&&wC(t.advancedSearchQueries,e.advancedSearchQueries)&&AC(t.tabSet,e.tabSet)&&CC(t.staticFilterSet,e.staticFilterSet)&&mc(t.facetSet,e.facetSet)&&mc(t.dateFacetSet,e.dateFacetSet)&&mc(t.numericFacetSet,e.numericFacetSet)&&RC(t.automaticFacetSet,e.automaticFacetSet)&&bC(t.categoryFacetSet,e.categoryFacetSet)&&xC(t.pagination,e.pagination)&&FC(t.query,e.query)&&PC(t,e)&&IC(t.pipeline,e.pipeline)&&kC(t.searchHub,e.searchHub)&&EC(t.facetOrder,e.facetOrder)&&OC(t.debug,e.debug),SC=(t,e)=>JSON.stringify(t.contextValues)===JSON.stringify(e.contextValues),vC=(t,e)=>JSON.stringify(t.contextValues)===JSON.stringify(e.contextValues),AC=(t,e)=>{let r=Mf(t),n=Mf(e);return(r==null?void 0:r.id)===(n==null?void 0:n.id)},Mf=t=>Object.values(t).find(e=>e.isActive),CC=(t,e)=>{for(let[r,n]of Object.entries(e)){if(!t[r])return!1;let a=Lf(t[r]),i=Lf(n);if(JSON.stringify(a)!==JSON.stringify(i))return!1}return!0},Lf=t=>t.values.filter(e=>e.state!=="idle"),mc=(t,e)=>{for(let[r,n]of Object.entries(e)){if(!t[r])return!1;let a=t[r].request.currentValues.filter(o=>o.state!=="idle"),i=n.request.currentValues.filter(o=>o.state!=="idle");if(JSON.stringify(a)!==JSON.stringify(i))return!1}return!0},bC=(t,e)=>{var r;for(let[n,a]of Object.entries(e)){if(!t[n])return!1;let i=Pt((r=t[n])==null?void 0:r.request.currentValues).map(({value:s})=>s),o=Pt(a==null?void 0:a.request.currentValues).map(({value:s})=>s);if(JSON.stringify(i)!==JSON.stringify(o))return!1}return!0},RC=(t,e)=>{for(let[r,n]of Object.entries(e.set)){if(!t.set[r])return!1;let a=t.set[r].response.values.filter(o=>o.state!=="idle"),i=n.response.values.filter(o=>o.state!=="idle");if(JSON.stringify(a)!==JSON.stringify(i))return!1}return!0},xC=(t,e)=>t.firstResult===e.firstResult&&t.numberOfResults===e.numberOfResults,FC=(t,e)=>JSON.stringify(t)===JSON.stringify(e),wC=(t,e)=>JSON.stringify(t)===JSON.stringify(e),PC=(t,e)=>t.sortCriteria===e.sortCriteria,IC=(t,e)=>t===e,kC=(t,e)=>t===e,EC=(t,e)=>Nf(t,e),OC=(t,e)=>t===e,qC=Ff({actionTypes:{redo:wo.type,undo:Fo.type,snapshot:Be.type},reducer:yC});var TC=P(fr(),t=>{t.addCase(xn,(e,r)=>{let{payload:n}=r,a=DC(n);li(e,Ed(a))}).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.numericFacetSet)!=null?a:e}).addCase(Z,(e,r)=>{let n=r.payload.nf||{};mi(e,n)}).addCase(Fn,(e,r)=>{let{facetId:n,selection:a}=r.payload;pi(e,n,a)}).addCase(oc,(e,r)=>{let{facetId:n,selection:a}=r.payload;fi(e,n,a)}).addCase(wn,(e,r)=>{let{facetId:n,values:a}=r.payload;di(e,n,a)}).addCase(cc,(e,r)=>{Dt(e,r.payload)}).addCase(ye,e=>{Object.keys(e).forEach(r=>{Dt(e,r)})}).addCase(sc,(e,r)=>{Pr(e,r.payload)}).addCase(ee.fulfilled,(e,r)=>{let n=r.payload.response.facets;kr(e,n,jf)}).addCase(Tt.fulfilled,(e,r)=>{var a,i;let n=((i=(a=r.payload.response)==null?void 0:a.facets)==null?void 0:i.results)||[];kr(e,n,jf)}).addCase(He,(e,r)=>{Dt(e,r.payload)})});function DC(t){return{...ui,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...t}}function jf(t){return t.map(e=>{let{numberOfResults:r,...n}=e;return n})}function VC(t,e){return t.raw[e.collection]}function gc(t,e){return t.raw[e.parent]}function Tn(t,e){let r=t.raw[e.child];return $n(r)?r[0]:r}function NC(t,e){return(t||e)!==void 0&&t===e}function Uf(t,e,r,n=[]){let a=Tn(t,r);return a?n.indexOf(a)!==-1?[]:e.filter(i=>{let o=Tn(i,r)===Tn(t,r);return gc(i,r)===a&&!o}).map(i=>({result:i,children:Uf(i,e,r,[...n,a])})):[]}function MC(t,e){return t.find(r=>{let n=gc(r,e)===void 0,a=NC(gc(r,e),Tn(r,e));return n||a})}function Qf(t){return t.parentResult?Qf(t.parentResult):t}function LC(t,e,r){var i;let n=Ta(t),a=(i=r!=null?r:MC(n,e))!=null?i:Qf(t);return{result:a,children:Uf(a,n,e),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Ri(t,e,r){let n={};return t.forEach(a=>{let i=VC(a,e);!i||!Tn(a,e)&&!a.parentResult||(n[i]=LC(a,e,r))}),n}function Bf(t,e){if(!t.collections[e])throw new Error(`Missing collection ${e} from ${Object.keys(t.collections)}: Folding most probably in an invalid state...`);return t.collections[e]}var jC=P(Ai(),t=>t.addCase(ee.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?Ri(r.response.results,e.fields):{}}).addCase(Za.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?Ri(r.response.results,e.fields):{}}).addCase(ei.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?{...e.collections,...Ri(r.response.results,e.fields)}:{}}).addCase(En,(e,{payload:r})=>{var n,a,i,o;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:(n=r.collectionField)!=null?n:e.fields.collection,parent:(a=r.parentField)!=null?a:e.fields.parent,child:(i=r.childField)!=null?i:e.fields.child},filterFieldRange:(o=r.numberOfFoldedResults)!=null?o:e.filterFieldRange}}).addCase(On.pending,(e,{meta:r})=>{let n=r.arg;Bf(e,n).isLoadingMoreResults=!0}).addCase(On.rejected,(e,{meta:r})=>{let n=r.arg;Bf(e,n).isLoadingMoreResults=!1}).addCase(On.fulfilled,(e,{payload:{collectionId:r,results:n,rootResult:a}})=>{let i=Ri(n,e.fields,a);if(!i||!i[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(n)}. Folding most probably in an invalid state... `);e.collections[r]=i[r],e.collections[r].moreResultsAvailable=!1}));var UC=new q({min:Id,default:wa,required:!1}),QC=new q({min:wd,max:Pd,default:Fa,required:!1}),BC={desiredCount:QC,numberOfValues:UC},tB=m("automaticFacet/setOptions",t=>h(t,BC)),rB=m("automaticFacet/deselectAll",t=>h(t,G)),_C=C,_f=m("automaticFacet/toggleSelectValue",t=>h(t,{field:_C,selection:new O({values:Sn})}));var $C=P(cn(),t=>{t.addCase(ls,(e,r)=>{let n=yc(e),a=r.payload;e.defaultNumberOfResults=e.numberOfResults=a,e.firstResult=Dn(n,a)}).addCase(ds,(e,r)=>{e.numberOfResults=r.payload,e.firstResult=0}).addCase(Bt,e=>{e.firstResult=0}).addCase(ps,(e,r)=>{let n=r.payload;e.firstResult=Dn(n,e.numberOfResults)}).addCase(Wt,(e,r)=>{let n=r.payload;e.firstResult=Dn(n,e.numberOfResults)}).addCase(ms,e=>{let r=yc(e),n=Math.max(r-1,Ep);e.firstResult=Dn(n,e.numberOfResults)}).addCase(fs,e=>{let r=yc(e),n=HC(e),a=Math.min(r+1,n);e.firstResult=Dn(a,e.numberOfResults)}).addCase(Y.fulfilled,(e,r)=>{r.payload&&(e.numberOfResults=r.payload.pagination.numberOfResults,e.firstResult=r.payload.pagination.firstResult)}).addCase(Z,(e,r)=>{var n,a;e.firstResult=(n=r.payload.firstResult)!=null?n:e.firstResult,e.numberOfResults=(a=r.payload.numberOfResults)!=null?a:e.defaultNumberOfResults}).addCase(ee.fulfilled,(e,r)=>{let{response:n}=r.payload;e.totalCountFiltered=n.totalCountFiltered}).addCase(Tt.fulfilled,(e,r)=>{let{response:n}=r.payload;e.totalCountFiltered=n.pagination.totalCount}).addCase(yt,e=>{Le(e)}).addCase(An,e=>{Le(e)}).addCase(hn,e=>{Le(e)}).addCase(yn,e=>{Le(e)}).addCase(ni,e=>{Le(e)}).addCase(bn,e=>{Le(e)}).addCase(Fn,e=>{Le(e)}).addCase(ye,e=>{Le(e)}).addCase(Rn,e=>{Le(e)}).addCase(wn,e=>{Le(e)}).addCase(si,e=>{Le(e)}).addCase(_f,e=>{Le(e)})});function Le(t){t.firstResult=cn().firstResult}function yc(t){let{firstResult:e,numberOfResults:r}=t;return zC(e,r)}function HC(t){let{totalCountFiltered:e,numberOfResults:r}=t;return GC(e,r)}function Dn(t,e){return(t-1)*e}function zC(t,e){return Math.round(t/e)+1}function GC(t,e){let r=Math.min(t,sn);return Math.ceil(r/e)}var $f={id:C,query:X},hc=m("querySet/register",t=>h(t,$f)),Sc=m("querySet/update",t=>h(t,$f));var Hf=P(Ga(),t=>{t.addCase(hc,(e,r)=>{let{id:n,query:a}=r.payload;n in e||(e[n]=a)}).addCase(Sc,(e,r)=>{let{id:n,query:a}=r.payload;vc(e,n,a)}).addCase(In,(e,r)=>{let{id:n,expression:a}=r.payload;vc(e,n,a)}).addCase(ee.fulfilled,(e,r)=>{let{queryExecuted:n}=r.payload;zf(e,n)}).addCase(Z,(e,r)=>{H(r.payload.q)||zf(e,r.payload.q)}).addCase(Y.fulfilled,(e,r)=>{if(!!r.payload)for(let[n,a]of Object.entries(r.payload.querySet))vc(e,n,a)})});function zf(t,e){Object.keys(t).forEach(r=>t[r]=e)}var vc=(t,e,r)=>{e in t&&(t[e]=r)};var WC=P(za(),t=>{t.addCase(cs,(e,r)=>{let{id:n}=r.payload;e[n]||(e[n]={q:"",cache:{}})}),t.addCase(Gt,(e,r)=>{let{q:n,id:a}=r.payload;!n||(e[a].q=n)}),t.addCase(us,(e,r)=>{let{id:n}=r.payload;Object.entries(e[n].cache).forEach(([a,i])=>{Tp(i)&&delete e[n].cache[a]})}),t.addCase(ri.pending,(e,r)=>{for(let a in e)for(let i in e[a].cache)e[a].cache[i].isActive=!1;if(!xi(e,r.meta)){YC(e,r.meta);return}let n=xi(e,r.meta);n.isLoading=!0,n.isActive=!0,n.error=null}),t.addCase(ri.fulfilled,(e,r)=>{let{results:n,searchUid:a,totalCountFiltered:i,duration:o}=r.payload,{cacheTimeout:s}=r.meta.arg,u=xi(e,r.meta);u.isActive=!0,u.searchUid=a,u.isLoading=!1,u.error=null,u.results=n,u.expiresAt=s?s+Date.now():0,u.totalCountFiltered=i,u.duration=o}),t.addCase(ri.rejected,(e,r)=>{let n=xi(e,r.meta);n.error=r.error||null,n.isLoading=!1,n.isActive=!1})}),YC=(t,e)=>{let{q:r,id:n}=e.arg;t[n].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},xi=(t,e)=>{let{q:r,id:n}=e.arg;return t[n].cache[r]||null};var Gf=()=>({});var KC=P(Gf(),t=>t.addCase(uc,(e,r)=>{let n=r.payload.id;n in e||(e[n]=JC(r.payload))}).addCase(yf,(e,r)=>{delete e[r.payload.id]}).addCase(kn.pending,(e,r)=>{let n=e[r.meta.arg.id];!n||(n.currentRequestId=r.meta.requestId,n.isLoading=!0)}).addCase(kn.fulfilled,(e,r)=>{let n=e[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:a}=r.payload;a&&n.partialQueries.push(a.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null}).addCase(kn.rejected,(e,r)=>{let n=e[r.meta.arg.id];!n||(n.error=r.payload||null,n.isLoading=!1)}).addCase(lc,(e,r)=>{let n=e[r.payload.id];!n||(n.responseId="",n.completions=[],n.partialQueries=[])}));function JC(t){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...t}}function Ac(t,e){var n;let r=(n=e.payload)!=null?n:null;r&&(t.response=Ce().response,t.results=[],t.questionAnswer=Kr()),t.error=r,t.isLoading=!1}function Cc(t,e){t.error=null,t.response=e.payload.response,t.queryExecuted=e.payload.queryExecuted,t.duration=e.payload.duration,t.isLoading=!1}function XC(t,e){Cc(t,e),t.results=e.payload.response.results,t.searchResponseId=e.payload.response.searchUid,t.questionAnswer=e.payload.response.questionAnswer,t.extendedResults=e.payload.response.extendedResults}function bc(t,e){t.isLoading=!0,t.requestId=e.meta.requestId}var ZC=P(Ce(),t=>{t.addCase(un.rejected,(e,r)=>Ac(e,r)),t.addCase(dn.rejected,(e,r)=>Ac(e,r)),t.addCase(ln.rejected,(e,r)=>Ac(e,r)),t.addCase(un.fulfilled,(e,r)=>{XC(e,r)}),t.addCase(dn.fulfilled,(e,r)=>{Cc(e,r),e.results=[...e.results,...r.payload.response.results]}),t.addCase(ln.fulfilled,(e,r)=>{Cc(e,r),e.results=r.payload.response.results}),t.addCase(Ps.fulfilled,(e,r)=>{e.response.facets=r.payload.response.facets,e.response.searchUid=r.payload.response.searchUid}),t.addCase(un.pending,bc),t.addCase(dn.pending,bc),t.addCase(ln.pending,bc)});var Wf={by:new Ue({enum:Oa,required:!0})},Rc=m("sortCriteria/register",t=>Yf(t)),xc=m("sortCriteria/update",t=>Yf(t)),Yf=t=>Qn(t)?(t.forEach(e=>h(e,Wf)),{payload:t}):h(t,Wf);var eb=P(hr(),t=>{t.addCase(Rc,(e,r)=>yr(r.payload)).addCase(xc,(e,r)=>yr(r.payload)).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.sortCriteria)!=null?a:e}).addCase(Z,(e,r)=>{var n;return(n=r.payload.sortCriteria)!=null?n:e})});function Kf(t){return t.type==="redirect"}var Fc=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(Kf);return e.length?e[0].content:null}};var wc=m("standaloneSearchBox/register",t=>h(t,{id:C,redirectionUrl:C})),Pc=m("standaloneSearchBox/reset",t=>h(t,{id:C})),Ic=m("standaloneSearchBox/updateAnalyticsToSearchFromLink",t=>h(t,{id:C})),kc=m("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Vn=B("standaloneSearchBox/fetchRedirect",async(t,{dispatch:e,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(t,{id:new R({emptyAllowed:!1})});let o=await rb(r()),s=await a.plan(o);if(re(s))return n(s.error);let{redirectionUrl:u}=new Fc(s.success);return u&&e(tb(u)),u||""}),tb=t=>ue("analytics/standaloneSearchBox/redirect",e=>e.makeTriggerRedirect({redirectedTo:t})),rb=async t=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,q:t.query.q,...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await Ae(t.configuration.analytics)},...t.configuration.analytics.enabled&&await Rr(t.configuration.analytics),...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});function Jf(){return{}}var nb=P(Jf(),t=>t.addCase(wc,(e,r)=>{let{id:n,redirectionUrl:a}=r.payload;n in e||(e[n]=Xf(a))}).addCase(Pc,(e,r)=>{let{id:n}=r.payload,a=e[n];if(a){e[n]=Xf(a.defaultRedirectionUrl);return}}).addCase(Vn.pending,(e,r)=>{let n=e[r.meta.arg.id];!n||(n.isLoading=!0)}).addCase(Vn.fulfilled,(e,r)=>{let n=r.payload,a=e[r.meta.arg.id];!a||(a.redirectTo=n||a.defaultRedirectionUrl,a.isLoading=!1)}).addCase(Vn.rejected,(e,r)=>{let n=e[r.meta.arg.id];!n||(n.isLoading=!1)}).addCase(Ic,(e,r)=>{let n=e[r.payload.id];!n||(n.analytics.cause="searchFromLink")}).addCase(kc,(e,r)=>{let n=e[r.payload.id];!n||(n.analytics.cause="omniboxFromLink",n.analytics.metadata=r.payload.metadata)}));function Xf(t){return{defaultRedirectionUrl:t,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var Nn=C,Fi=new O({options:{required:!0},values:{caption:X,expression:X,state:new R({constrainTo:["idle","selected","excluded"]})}}),Zf=new Q({required:!0,each:Fi});var Ec=m("staticFilter/register",t=>h(t,{id:Nn,values:Zf})),Oc=m("staticFilter/toggleSelect",t=>h(t,{id:Nn,value:Fi})),qc=m("staticFilter/toggleExclude",t=>h(t,{id:Nn,value:Fi})),Tc=m("staticFilter/deselectAllFilterValues",t=>h(t,Nn));var ab=P(Wa(),t=>t.addCase(Ec,(e,r)=>{let n=r.payload,{id:a}=n;a in e||(e[a]=n)}).addCase(Oc,(e,r)=>{let{id:n,value:a}=r.payload,i=e[n];if(!i)return;let o=i.values.find(u=>u.caption===a.caption);if(!o)return;let s=o.state==="selected";o.state=s?"idle":"selected"}).addCase(qc,(e,r)=>{let{id:n,value:a}=r.payload,i=e[n];if(!i)return;let o=i.values.find(u=>u.caption===a.caption);if(!o)return;let s=o.state==="excluded";o.state=s?"idle":"excluded"}).addCase(Tc,(e,r)=>{let n=r.payload,a=e[n];!a||a.values.forEach(i=>i.state="idle")}).addCase(ye,e=>{Object.values(e).forEach(r=>{r.values.forEach(n=>n.state="idle")})}).addCase(Z,(e,r)=>{let n=r.payload.sf||{};Object.entries(e).forEach(([a,i])=>{let o=n[a]||[];i.values.forEach(s=>{s.state=o.includes(s.caption)?"selected":"idle"})})}));var ib=P(Ya(),t=>{t.addCase(Uo,(e,r)=>{let n=r.payload,{id:a}=n;a in e||(e[a]={...n,isActive:!1})}).addCase(Bt,(e,r)=>{let n=r.payload;em(e,n)}).addCase(Z,(e,r)=>{let n=r.payload.tab||"";em(e,n)}).addCase(Y.fulfilled,(e,r)=>{var n,a;return(a=(n=r.payload)==null?void 0:n.tabSet)!=null?a:e})});function em(t,e){e in t&&Object.keys(t).forEach(n=>{t[n].isActive=n===e})}var ob=()=>new O({values:{questionAnswerId:C},options:{required:!0}});function Dc(t){return h(t,ob())}var Vc=m("smartSnippet/expand"),Nc=m("smartSnippet/collapse"),Mc=m("smartSnippet/like"),Lc=m("smartSnippet/dislike"),jc=m("smartSnippet/feedbackModal/open"),Uc=m("smartSnippet/feedbackModal/close"),Qc=m("smartSnippet/related/expand",t=>Dc(t)),Bc=m("smartSnippet/related/collapse",t=>Dc(t));var _c=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var tm=(t,e)=>t.findIndex(r=>r.questionAnswerId===e.questionAnswerId);function rm({question:t,answerSnippet:e,documentId:{contentIdKey:r,contentIdValue:n}}){return xu({question:t,answerSnippet:e,contentIdKey:r,contentIdValue:n})}function sb(t,e){let r=rm(t);return e&&r===e.questionAnswerId?e:{contentIdKey:t.documentId.contentIdKey,contentIdValue:t.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var cb=P(_c(),t=>t.addCase(Vc,e=>{e.expanded=!0}).addCase(Nc,e=>{e.expanded=!1}).addCase(Mc,e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1}).addCase(Lc,e=>{e.liked=!1,e.disliked=!0}).addCase(jc,e=>{e.feedbackModalOpen=!0}).addCase(Uc,e=>{e.feedbackModalOpen=!1}).addCase(ee.fulfilled,(e,r)=>{let n=r.payload.response.questionAnswer.relatedQuestions.map((i,o)=>sb(i,e.relatedQuestions[o])),a=rm(r.payload.response.questionAnswer);return e.questionAnswerId===a?{...e,relatedQuestions:n}:{..._c(),relatedQuestions:n,questionAnswerId:a}}).addCase(Qc,(e,r)=>{let n=tm(e.relatedQuestions,r.payload);n!==-1&&(e.relatedQuestions[n].expanded=!0)}).addCase(Bc,(e,r)=>{let n=tm(e.relatedQuestions,r.payload);n!==-1&&(e.relatedQuestions[n].expanded=!1)}));var ub={queries:new Q({required:!0,each:new R({emptyAllowed:!1})}),maxLength:new q({required:!0,min:1,default:10})},$c=m("recentQueries/registerRecentQueries",t=>h(t,ub)),Hc=m("recentQueries/clearRecentQueries");function nm(){return{queries:[],maxLength:10}}var lb=P(nm(),t=>{t.addCase($c,(e,r)=>{e.queries=r.payload.queries.slice(0,r.payload.maxLength),e.maxLength=r.payload.maxLength}).addCase(Hc,e=>{e.queries=[]}).addCase(ee.fulfilled,(e,r)=>{let n=r.payload.queryExecuted.trim(),a=r.payload.response.results;if(!n.length||!a.length)return;e.queries=e.queries.filter(o=>o!==n);let i=e.queries.slice(0,e.maxLength-1);e.queries=[n,...i]})});var db={results:new Q({required:!0,each:new O({values:Ar})}),maxLength:new q({required:!0,min:1,default:10})},zc=m("recentResults/registerRecentResults",t=>h(t,db)),Gc=m("recentResults/pushRecentResult",t=>(Xr(t),{payload:t})),Wc=m("recentResults/clearRecentResults");function am(){return{results:[],maxLength:10}}var pb=P(am(),t=>{t.addCase(zc,(e,r)=>{e.results=r.payload.results.slice(0,r.payload.maxLength),e.maxLength=r.payload.maxLength}).addCase(Wc,e=>{e.results=[]}).addCase(Gc,(e,r)=>{let n=r.payload;e.results=e.results.filter(i=>i.uniqueId!==n.uniqueId);let a=e.results.slice(0,e.maxLength-1);e.results=[n,...a]})});var Yc=m("excerptLength/set",t=>h(t,new q({min:0,required:!0})));function im(){return{length:void 0}}var fb=P(im(),t=>{t.addCase(Yc,(e,r)=>{e.length=r.payload})});function om(t){var e,r,n;return(n=(r=(e=t.search)==null?void 0:e.response)==null?void 0:r.extendedResults)==null?void 0:n.generativeQuestionAnsweringId}var sm=t=>ue("analytics/generatedAnswer/streamEnd",(e,r)=>{let n=om(r);return n?e.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:t}):null});var cm=async t=>{var e;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.platformUrl,streamId:(e=t.search.extendedResults)==null?void 0:e.generativeQuestionAnsweringId}};var um=["default","bullet","step","concise"];var Mn=new R({required:!0}),lm=new R,Kc=new U({required:!0}),mb={id:Mn,title:Mn,uri:Mn,permanentid:Mn,clickUri:lm},dm=m("generatedAnswer/setIsVisible",t=>h(t,Kc)),Jc=m("generatedAnswer/updateMessage",t=>h(t,{textDelta:Mn})),Xc=m("generatedAnswer/updateCitations",t=>h(t,{citations:new Q({required:!0,each:new O({values:mb})})})),Zc=m("generatedAnswer/updateError",t=>h(t,{message:lm,code:new q({min:0})})),wi=m("generatedAnswer/resetAnswer"),pm=m("generatedAnswer/like"),fm=m("generatedAnswer/dislike"),mm=m("generatedAnswer/feedbackModal/open"),gm=m("generatedAnswer/feedbackModal/close"),ym=m("generatedAnswer/sendFeedback"),Ln=m("generatedAnswer/setIsLoading",t=>h(t,Kc)),Pi=m("generatedAnswer/setIsStreaming",t=>h(t,Kc)),hm=m("generatedAnswer/updateResponseFormat",t=>h(t,{answerStyle:new R({required:!0,constrainTo:um})})),_H=B("generatedAnswer/streamAnswer",async(t,e)=>{var l;let r=e.getState(),{dispatch:n,extra:a}=e,{setAbortControllerRef:i}=t,o=await cm(r),s=(p,g)=>{switch(p){case"genqa.messageType":n(Jc(JSON.parse(g)));break;case"genqa.citationsType":n(Xc(JSON.parse(g)));break;case"genqa.endOfStreamType":n(Pi(!1)),n(sm(JSON.parse(g).answerGenerated));break;default:r.debug&&a.logger.warn(`Unknown payloadType: "${p}"`)}};n(Ln(!0));let u=p=>p.streamId===e.getState().search.extendedResults.generativeQuestionAnsweringId,c=(l=a.streamingClient)==null?void 0:l.streamGeneratedAnswer(o,{write:p=>{u(o)&&(n(Ln(!1)),p.payload&&p.payloadType&&s(p.payloadType,p.payload))},abort:p=>{u(o)&&n(Zc(p))},close:()=>{u(o)&&n(Pi(!1))},resetAnswer:()=>{u(o)&&n(wi())}});c?i(c):n(Ln(!1))});var Sm=1;function eu(){return{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1,feedbackSubmitted:!1}}var gb=P(eu(),t=>t.addCase(dm,(e,{payload:r})=>{e.isVisible=r}).addCase(Jc,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=r.textDelta,delete e.error}).addCase(Xc,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!0,e.citations=e.citations.concat(r.citations),delete e.error}).addCase(Zc,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!1,e.error={...r,isRetryable:r.code===Sm},e.citations=[],delete e.answer}).addCase(pm,e=>{e.liked=!0,e.disliked=!1}).addCase(fm,e=>{e.liked=!1,e.disliked=!0}).addCase(mm,e=>{e.feedbackModalOpen=!0}).addCase(gm,e=>{e.feedbackModalOpen=!1}).addCase(ym,e=>{e.feedbackSubmitted=!0}).addCase(wi,e=>({...eu(),responseFormat:e.responseFormat,isVisible:e.isVisible})).addCase(Ln,(e,{payload:r})=>{e.isLoading=r}).addCase(Pi,(e,{payload:r})=>{e.isStreaming=r}).addCase(hm,(e,{payload:r})=>{e.responseFormat=r}));var l2=new he({content:new te({required:!0}),conditions:new te({required:!0}),priority:new q({required:!1,default:0,min:0}),fields:new Q({required:!1,each:C})});var tu;(i=>{i.getResultProperty=pn,i.fieldsMustBeDefined=$p,i.fieldsMustNotBeDefined=Hp,i.fieldMustMatch=zp,i.fieldMustNotMatch=Gp})(tu||(tu={}));ru();export{tu as ResultTemplatesHelpers,dS as buildCaseAssistEngine,_p as buildCaseAssistInteractiveResult,Up as buildCaseAssistQuickview,Av as buildCaseField,hv as buildCaseInput,pt as buildController,Qp as buildDocumentSuggestion,Qp as buildDocumentSuggestionList,_p as buildInteractiveResult,Up as buildQuickview,Hk as loadCaseAssistAnalyticsActions,DP as loadCaseFieldActions,eP as loadCaseInputActions,KP as loadDocumentSuggestionActions,nE as loadGenericAnalyticsActions};
/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=headless.esm.js.map
