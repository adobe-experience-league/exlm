/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function (global, factory) {
    const isCommonjs = typeof exports === 'object' && typeof module !== 'undefined';
    
    if (isCommonjs) {
      return factory(exports);
    }
    
    const isAmd = typeof define === 'function' && define.amd;

    if (isAmd) {
      return define(['exports'], factory);
    }

    global = typeof globalThis !== 'undefined' ? globalThis : global || self;
    factory(global.CoveoHeadlessRecommendation = {});
  })(this, (function (exports) { 'use strict';
var Ml=Object.create;var Br=Object.defineProperty;var Nl=Object.getOwnPropertyDescriptor;var Vl=Object.getOwnPropertyNames;var jl=Object.getPrototypeOf,Ll=Object.prototype.hasOwnProperty;var pa=t=>Br(t,"__esModule",{value:!0});var X=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),fa=(t,e)=>{pa(t);for(var r in e)Br(t,r,{get:e[r],enumerable:!0})},Ul=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Vl(e))!Ll.call(t,n)&&n!=="default"&&Br(t,n,{get:()=>e[n],enumerable:!(r=Nl(e,n))||r.enumerable});return t},we=t=>Ul(pa(Br(t!=null?Ml(jl(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var ba=X((Wh,va)=>{"use strict";function zl(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(t=`${t}`,t=t.replace(/[ \t\n\f\r]/g,""),t.length%4==0&&(t=t.replace(/==?$/,"")),t.length%4==1||/[^+/0-9A-Za-z]/.test(t))return null;let e="",r=0,n=0;for(let i=0;i<t.length;i++)r<<=6,r|=Kl(t[i]),n+=6,n===24&&(e+=String.fromCharCode((r&16711680)>>16),e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,e+=String.fromCharCode(r)):n===18&&(r>>=2,e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255)),e}var Wl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Kl(t){let e=Wl.indexOf(t);return e<0?void 0:e}va.exports=zl});var Ca=X((Kh,Aa)=>{"use strict";function Yl(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let e;for(t=`${t}`,e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return null;let r="";for(e=0;e<t.length;e+=3){let n=[void 0,void 0,void 0,void 0];n[0]=t.charCodeAt(e)>>2,n[1]=(t.charCodeAt(e)&3)<<4,t.length>e+1&&(n[1]|=t.charCodeAt(e+1)>>4,n[2]=(t.charCodeAt(e+1)&15)<<2),t.length>e+2&&(n[2]|=t.charCodeAt(e+2)>>6,n[3]=t.charCodeAt(e+2)&63);for(let i=0;i<n.length;i++)typeof n[i]=="undefined"?r+="=":r+=Jl(n[i])}return r}var Gl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Jl(t){if(t>=0&&t<64)return Gl[t]}Aa.exports=Yl});var Ra=X((Yh,xa)=>{"use strict";var Zl=ba(),Xl=Ca();xa.exports={atob:Zl,btoa:Xl}});var qa=X((oy,Ta)=>{Ta.exports=fetch});var Ma=X(vr=>{"use strict";var Wr=vr&&vr.__assign||function(){return Wr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Wr.apply(this,arguments)};Object.defineProperty(vr,"__esModule",{value:!0});var ud={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function ld(t){var e=Wr(Wr({},ud),t);return e.numOfAttempts<1&&(e.numOfAttempts=1),e}vr.getSanitizedOptions=ld});var Na=X(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});function dd(t){var e=Math.random()*t;return Math.round(e)}Ii.fullJitter=dd});var Va=X(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});function pd(t){return t}Ei.noJitter=pd});var ja=X(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});var fd=Na(),md=Va();function gd(t){switch(t.jitter){case"full":return fd.fullJitter;case"none":default:return md.noJitter}}ki.JitterFactory=gd});var Di=X(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});var hd=ja(),yd=function(){function t(e){this.options=e,this.attempt=0}return t.prototype.apply=function(){var e=this;return new Promise(function(r){return setTimeout(r,e.jitteredDelay)})},t.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(t.prototype,"jitteredDelay",{get:function(){var e=hd.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){var e=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,i=e*Math.pow(r,n);return Math.min(i,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),t}();Oi.Delay=yd});var La=X(Ge=>{"use strict";var Sd=Ge&&Ge.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vd=Ge&&Ge.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function c(l){try{s(n.next(l))}catch(f){a(f)}}function u(l){try{s(n.throw(l))}catch(f){a(f)}}function s(l){l.done?o(l.value):i(l.value).then(c,u)}s((n=n.apply(t,e||[])).next())})},bd=Ge&&Ge.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(l){return u([s,l])}}function u(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(l){s=[6,l],i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Ge,"__esModule",{value:!0});var Ad=Di(),Cd=function(t){Sd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.apply=function(){return vd(this,void 0,void 0,function(){return bd(this,function(r){return[2,this.isFirstAttempt?!0:t.prototype.apply.call(this)]})})},Object.defineProperty(e.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),e}(Ad.Delay);Ge.SkipFirstDelay=Cd});var Ua=X(br=>{"use strict";var xd=br&&br.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(br,"__esModule",{value:!0});var Rd=Di(),wd=function(t){xd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Rd.Delay);br.AlwaysDelay=wd});var Ba=X(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});var Pd=La(),Fd=Ua();function Id(t,e){var r=Ed(t);return r.setAttemptNumber(e),r}Ti.DelayFactory=Id;function Ed(t){return t.delayFirstAttempt?new Fd.AlwaysDelay(t):new Pd.SkipFirstDelay(t)}});var _a=X(Ct=>{"use strict";var qi=Ct&&Ct.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function c(l){try{s(n.next(l))}catch(f){a(f)}}function u(l){try{s(n.throw(l))}catch(f){a(f)}}function s(l){l.done?o(l.value):i(l.value).then(c,u)}s((n=n.apply(t,e||[])).next())})},Mi=Ct&&Ct.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(l){return u([s,l])}}function u(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(l){s=[6,l],i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Ct,"__esModule",{value:!0});var kd=Ma(),Od=Ba();function Dd(t,e){return e===void 0&&(e={}),qi(this,void 0,void 0,function(){var r,n;return Mi(this,function(i){switch(i.label){case 0:return r=kd.getSanitizedOptions(e),n=new Td(t,r),[4,n.execute()];case 1:return[2,i.sent()]}})})}Ct.backOff=Dd;var Td=function(){function t(e,r){this.request=e,this.options=r,this.attemptNumber=0}return t.prototype.execute=function(){return qi(this,void 0,void 0,function(){var e,r;return Mi(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return e=n.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(t.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),t.prototype.applyDelay=function(){return qi(this,void 0,void 0,function(){var e;return Mi(this,function(r){switch(r.label){case 0:return e=Od.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return r.sent(),[2]}})})},t}()});var Ja=X((Ay,Ga)=>{"use strict";var Vi=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!Vi)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!Vi.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');Ga.exports.AbortController=Vi.AbortController});var zc=X((tC,Hc)=>{var Qm=/(^|; )Coveo-Pendragon=([^;]*)/;Hc.exports=()=>Qm.exec(document.cookie)?.pop()||null});var Ln=X((Mo,No)=>{(function(t,e){typeof Mo=="object"&&typeof No!="undefined"?No.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs=e()})(Mo,function(){"use strict";var t=1e3,e=6e4,r=36e5,n="millisecond",i="second",o="minute",a="hour",c="day",u="week",s="month",l="quarter",f="year",h="date",d="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(I){var C=["th","st","nd","rd"],R=I%100;return"["+I+(C[(R-20)%10]||C[R]||C[0])+"]"}},x=function(I,C,R){var O=String(I);return!O||O.length>=C?I:""+Array(C+1-O.length).join(R)+I},F={s:x,z:function(I){var C=-I.utcOffset(),R=Math.abs(C),O=Math.floor(R/60),w=R%60;return(C<=0?"+":"-")+x(O,2,"0")+":"+x(w,2,"0")},m:function I(C,R){if(C.date()<R.date())return-I(R,C);var O=12*(R.year()-C.year())+(R.month()-C.month()),w=C.clone().add(O,s),M=R-w<0,j=C.clone().add(O+(M?-1:1),s);return+(-(O+(R-w)/(M?w-j:j-w))||0)},a:function(I){return I<0?Math.ceil(I)||0:Math.floor(I)},p:function(I){return{M:s,y:f,w:u,d:c,D:h,h:a,m:o,s:i,ms:n,Q:l}[I]||String(I||"").toLowerCase().replace(/s$/,"")},u:function(I){return I===void 0}},q="en",N={};N[q]=b;var Q="$isDayjsObject",H=function(I){return I instanceof ie||!(!I||!I[Q])},Y=function I(C,R,O){var w;if(!C)return q;if(typeof C=="string"){var M=C.toLowerCase();N[M]&&(w=M),R&&(N[M]=R,w=M);var j=C.split("-");if(!w&&j.length>1)return I(j[0])}else{var z=C.name;N[z]=C,w=z}return!O&&w&&(q=w),w||!O&&q},_=function(I,C){if(H(I))return I.clone();var R=typeof C=="object"?C:{};return R.date=I,R.args=arguments,new ie(R)},V=F;V.l=Y,V.i=H,V.w=function(I,C){return _(I,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var ie=function(){function I(R){this.$L=Y(R.locale,null,!0),this.parse(R),this.$x=this.$x||R.x||{},this[Q]=!0}var C=I.prototype;return C.parse=function(R){this.$d=function(O){var w=O.date,M=O.utc;if(w===null)return new Date(NaN);if(V.u(w))return new Date;if(w instanceof Date)return new Date(w);if(typeof w=="string"&&!/Z$/i.test(w)){var j=w.match(g);if(j){var z=j[2]-1||0,Z=(j[7]||"0").substring(0,3);return M?new Date(Date.UTC(j[1],z,j[3]||1,j[4]||0,j[5]||0,j[6]||0,Z)):new Date(j[1],z,j[3]||1,j[4]||0,j[5]||0,j[6]||0,Z)}}return new Date(w)}(R),this.init()},C.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},C.$utils=function(){return V},C.isValid=function(){return this.$d.toString()!==d},C.isSame=function(R,O){var w=_(R);return this.startOf(O)<=w&&w<=this.endOf(O)},C.isAfter=function(R,O){return _(R)<this.startOf(O)},C.isBefore=function(R,O){return this.endOf(O)<_(R)},C.$g=function(R,O,w){return V.u(R)?this[O]:this.set(w,R)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(R,O){var w=this,M=!!V.u(O)||O,j=V.p(R),z=function(ke,se){var be=V.w(w.$u?Date.UTC(w.$y,se,ke):new Date(w.$y,se,ke),w);return M?be:be.endOf(c)},Z=function(ke,se){return V.w(w.toDate()[ke].apply(w.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(se)),w)},re=this.$W,ae=this.$M,ye=this.$D,tt="set"+(this.$u?"UTC":"");switch(j){case f:return M?z(1,0):z(31,11);case s:return M?z(1,ae):z(0,ae+1);case u:var qe=this.$locale().weekStart||0,ze=(re<qe?re+7:re)-qe;return z(M?ye-ze:ye+(6-ze),ae);case c:case h:return Z(tt+"Hours",0);case a:return Z(tt+"Minutes",1);case o:return Z(tt+"Seconds",2);case i:return Z(tt+"Milliseconds",3);default:return this.clone()}},C.endOf=function(R){return this.startOf(R,!1)},C.$set=function(R,O){var w,M=V.p(R),j="set"+(this.$u?"UTC":""),z=(w={},w[c]=j+"Date",w[h]=j+"Date",w[s]=j+"Month",w[f]=j+"FullYear",w[a]=j+"Hours",w[o]=j+"Minutes",w[i]=j+"Seconds",w[n]=j+"Milliseconds",w)[M],Z=M===c?this.$D+(O-this.$W):O;if(M===s||M===f){var re=this.clone().set(h,1);re.$d[z](Z),re.init(),this.$d=re.set(h,Math.min(this.$D,re.daysInMonth())).$d}else z&&this.$d[z](Z);return this.init(),this},C.set=function(R,O){return this.clone().$set(R,O)},C.get=function(R){return this[V.p(R)]()},C.add=function(R,O){var w,M=this;R=Number(R);var j=V.p(O),z=function(ae){var ye=_(M);return V.w(ye.date(ye.date()+Math.round(ae*R)),M)};if(j===s)return this.set(s,this.$M+R);if(j===f)return this.set(f,this.$y+R);if(j===c)return z(1);if(j===u)return z(7);var Z=(w={},w[o]=e,w[a]=r,w[i]=t,w)[j]||1,re=this.$d.getTime()+R*Z;return V.w(re,this)},C.subtract=function(R,O){return this.add(-1*R,O)},C.format=function(R){var O=this,w=this.$locale();if(!this.isValid())return w.invalidDate||d;var M=R||"YYYY-MM-DDTHH:mm:ssZ",j=V.z(this),z=this.$H,Z=this.$m,re=this.$M,ae=w.weekdays,ye=w.months,tt=w.meridiem,qe=function(se,be,We,rt){return se&&(se[be]||se(O,M))||We[be].slice(0,rt)},ze=function(se){return V.s(z%12||12,se,"0")},ke=tt||function(se,be,We){var rt=se<12?"AM":"PM";return We?rt.toLowerCase():rt};return M.replace(y,function(se,be){return be||function(We){switch(We){case"YY":return String(O.$y).slice(-2);case"YYYY":return V.s(O.$y,4,"0");case"M":return re+1;case"MM":return V.s(re+1,2,"0");case"MMM":return qe(w.monthsShort,re,ye,3);case"MMMM":return qe(ye,re);case"D":return O.$D;case"DD":return V.s(O.$D,2,"0");case"d":return String(O.$W);case"dd":return qe(w.weekdaysMin,O.$W,ae,2);case"ddd":return qe(w.weekdaysShort,O.$W,ae,3);case"dddd":return ae[O.$W];case"H":return String(z);case"HH":return V.s(z,2,"0");case"h":return ze(1);case"hh":return ze(2);case"a":return ke(z,Z,!0);case"A":return ke(z,Z,!1);case"m":return String(Z);case"mm":return V.s(Z,2,"0");case"s":return String(O.$s);case"ss":return V.s(O.$s,2,"0");case"SSS":return V.s(O.$ms,3,"0");case"Z":return j}return null}(se)||j.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(R,O,w){var M,j=this,z=V.p(O),Z=_(R),re=(Z.utcOffset()-this.utcOffset())*e,ae=this-Z,ye=function(){return V.m(j,Z)};switch(z){case f:M=ye()/12;break;case s:M=ye();break;case l:M=ye()/3;break;case u:M=(ae-re)/6048e5;break;case c:M=(ae-re)/864e5;break;case a:M=ae/r;break;case o:M=ae/e;break;case i:M=ae/t;break;default:M=ae}return w?M:V.a(M)},C.daysInMonth=function(){return this.endOf(s).$D},C.$locale=function(){return N[this.$L]},C.locale=function(R,O){if(!R)return this.$L;var w=this.clone(),M=Y(R,O,!0);return M&&(w.$L=M),w},C.clone=function(){return V.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},I}(),oe=ie.prototype;return _.prototype=oe,[["$ms",n],["$s",i],["$m",o],["$H",a],["$W",c],["$M",s],["$y",f],["$D",h]].forEach(function(I){oe[I[1]]=function(C){return this.$g(C,I[0],I[1])}}),_.extend=function(I,C){return I.$i||(I(C,ie,_),I.$i=!0),_},_.locale=Y,_.isDayjs=H,_.unix=function(I){return _(1e3*I)},_.en=N[q],_.Ls=N,_.p={},_})});var Wc=X((Vo,jo)=>{(function(t,e){typeof Vo=="object"&&typeof jo!="undefined"?jo.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_timezone=e()})(Vo,function(){"use strict";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(r,n,i){var o,a=function(l,f,h){h===void 0&&(h={});var d=new Date(l),g=function(y,b){b===void 0&&(b={});var x=b.timeZoneName||"short",F=y+"|"+x,q=e[F];return q||(q=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:x}),e[F]=q),q}(f,h);return g.formatToParts(d)},c=function(l,f){for(var h=a(l,f),d=[],g=0;g<h.length;g+=1){var y=h[g],b=y.type,x=y.value,F=t[b];F>=0&&(d[F]=parseInt(x,10))}var q=d[3],N=q===24?0:q,Q=d[0]+"-"+d[1]+"-"+d[2]+" "+N+":"+d[4]+":"+d[5]+":000",H=+l;return(i.utc(Q).valueOf()-(H-=H%1e3))/6e4},u=n.prototype;u.tz=function(l,f){l===void 0&&(l=o);var h=this.utcOffset(),d=this.toDate(),g=d.toLocaleString("en-US",{timeZone:l}),y=Math.round((d-new Date(g))/1e3/60),b=i(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(d.getTimezoneOffset()/15)-y,!0);if(f){var x=b.utcOffset();b=b.add(h-x,"minute")}return b.$x.$timezone=l,b},u.offsetName=function(l){var f=this.$x.$timezone||i.tz.guess(),h=a(this.valueOf(),f,{timeZoneName:l}).find(function(d){return d.type.toLowerCase()==="timezonename"});return h&&h.value};var s=u.startOf;u.startOf=function(l,f){if(!this.$x||!this.$x.$timezone)return s.call(this,l,f);var h=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return s.call(h,l,f).tz(this.$x.$timezone,!0)},i.tz=function(l,f,h){var d=h&&f,g=h||f||o,y=c(+i(),g);if(typeof l!="string")return i(l).tz(g);var b=function(N,Q,H){var Y=N-60*Q*1e3,_=c(Y,H);if(Q===_)return[Y,Q];var V=c(Y-=60*(_-Q)*1e3,H);return _===V?[Y,_]:[N-60*Math.min(_,V)*1e3,Math.max(_,V)]}(i.utc(l,d).valueOf(),y,g),x=b[0],F=b[1],q=i(x).utcOffset(F);return q.$x.$timezone=g,q},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(l){o=l}}})});var Kc=X((Lo,Uo)=>{(function(t,e){typeof Lo=="object"&&typeof Uo!="undefined"?Uo.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_utc=e()})(Lo,function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,o){var a=i.prototype;o.utc=function(d){var g={date:d,utc:!0,args:arguments};return new i(g)},a.utc=function(d){var g=o(this.toDate(),{locale:this.$L,utc:!0});return d?g.add(this.utcOffset(),t):g},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var c=a.parse;a.parse=function(d){d.utc&&(this.$u=!0),this.$utils().u(d.$offset)||(this.$offset=d.$offset),c.call(this,d)};var u=a.init;a.init=function(){if(this.$u){var d=this.$d;this.$y=d.getUTCFullYear(),this.$M=d.getUTCMonth(),this.$D=d.getUTCDate(),this.$W=d.getUTCDay(),this.$H=d.getUTCHours(),this.$m=d.getUTCMinutes(),this.$s=d.getUTCSeconds(),this.$ms=d.getUTCMilliseconds()}else u.call(this)};var s=a.utcOffset;a.utcOffset=function(d,g){var y=this.$utils().u;if(y(d))return this.$u?0:y(this.$offset)?s.call(this):this.$offset;if(typeof d=="string"&&(d=function(q){q===void 0&&(q="");var N=q.match(e);if(!N)return null;var Q=(""+N[0]).match(r)||["-",0,0],H=Q[0],Y=60*+Q[1]+ +Q[2];return Y===0?0:H==="+"?Y:-Y}(d),d===null))return this;var b=Math.abs(d)<=16?60*d:d,x=this;if(g)return x.$offset=b,x.$u=d===0,x;if(d!==0){var F=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(x=this.local().add(b+F,t)).$offset=b,x.$x.$localOffset=F}else x=this.utc();return x};var l=a.format;a.format=function(d){var g=d||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,g)},a.valueOf=function(){var d=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*d},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var f=a.toDate;a.toDate=function(d){return d==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var h=a.diff;a.diff=function(d,g,y){if(d&&this.$u===d.$u)return h.call(this,d,g,y);var b=this.local(),x=o(d).local();return h.call(b,x,g,y)}}})});var cu=X((ix,su)=>{"use strict";function rg(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}su.exports=ng;function ng(t,e,r){var n=r&&r.stringify||rg,i=1;if(typeof t=="object"&&t!==null){var o=e.length+i;if(o===1)return t;var a=new Array(o);a[0]=n(t);for(var c=1;c<o;c++)a[c]=n(e[c]);return a.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var s="",l=1-i,f=-1,h=t&&t.length||0,d=0;d<h;){if(t.charCodeAt(d)===37&&d+1<h){switch(f=f>-1?f:0,t.charCodeAt(d+1)){case 100:case 102:if(l>=u||e[l]==null)break;f<d&&(s+=t.slice(f,d)),s+=Number(e[l]),f=d+2,d++;break;case 105:if(l>=u||e[l]==null)break;f<d&&(s+=t.slice(f,d)),s+=Math.floor(Number(e[l])),f=d+2,d++;break;case 79:case 111:case 106:if(l>=u||e[l]===void 0)break;f<d&&(s+=t.slice(f,d));var g=typeof e[l];if(g==="string"){s+="'"+e[l]+"'",f=d+2,d++;break}if(g==="function"){s+=e[l].name||"<anonymous>",f=d+2,d++;break}s+=n(e[l]),f=d+2,d++;break;case 115:if(l>=u)break;f<d&&(s+=t.slice(f,d)),s+=String(e[l]),f=d+2,d++;break;case 37:f<d&&(s+=t.slice(f,d)),s+="%",f=d+2,d++,l--;break}++l}++d}return f===-1?t:(f<h&&(s+=t.slice(f)),s)}});var mu=X((ox,Hn)=>{"use strict";var uu=cu();Hn.exports=Xe;var Or=Sg().console||{},ig={mapHttpRequest:$n,mapHttpResponse:$n,wrapRequestSerializer:zo,wrapResponseSerializer:zo,wrapErrorSerializer:zo,req:$n,res:$n,err:du,errWithCause:du};function _n(t,e){return t==="silent"?1/0:e.levels.values[t]}var Qo=Symbol("pino.logFuncs"),$o=Symbol("pino.hierarchy"),og={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function lu(t,e){let r={logger:e,parent:t[$o]};e[$o]=r}function ag(t,e,r){let n={};e.forEach(i=>{n[i]=r[i]?r[i]:Or[i]||Or[og[i]||"log"]||Dr}),t[Qo]=n}function sg(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Xe(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||Or;t.browser.write&&(t.browser.asObject=!0);let n=t.serializers||{},i=sg(t.browser.serialize,n),o=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let a=Object.keys(t.customLevels||{}),c=["error","fatal","warn","info","debug","trace"].concat(a);typeof r=="function"&&c.forEach(function(y){r[y]=r}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");let u=t.level||"info",s=Object.create(r);s.log||(s.log=Dr),ag(s,c,r),lu({},s),Object.defineProperty(s,"levelVal",{get:f}),Object.defineProperty(s,"level",{get:h,set:d});let l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:c,timestamp:gg(t)};s.levels=cg(t),s.level=u,s.setMaxListeners=s.getMaxListeners=s.emit=s.addListener=s.on=s.prependListener=s.once=s.prependOnceListener=s.removeListener=s.removeAllListeners=s.listeners=s.listenerCount=s.eventNames=s.write=s.flush=Dr,s.serializers=n,s._serialize=i,s._stdErrSerialize=o,s.child=g,e&&(s._logEvent=Ho());function f(){return _n(this.level,this)}function h(){return this._level}function d(y){if(y!=="silent"&&!this.levels.values[y])throw Error("unknown level "+y);this._level=y,It(this,l,s,"error"),It(this,l,s,"fatal"),It(this,l,s,"warn"),It(this,l,s,"info"),It(this,l,s,"debug"),It(this,l,s,"trace"),a.forEach(b=>{It(this,l,s,b)})}function g(y,b){if(!y)throw new Error("missing bindings for child Pino");b=b||{},i&&y.serializers&&(b.serializers=y.serializers);let x=b.serializers;if(i&&x){var F=Object.assign({},n,x),q=t.browser.serialize===!0?Object.keys(F):i;delete y.serializers,Qn([y],q,F,this._stdErrSerialize)}function N(H){this._childLevel=(H._childLevel|0)+1,this.bindings=y,F&&(this.serializers=F,this._serialize=q),e&&(this._logEvent=Ho([].concat(H._logEvent.bindings,y)))}N.prototype=this;let Q=new N(this);return lu(this,Q),Q.level=this.level,Q}return s}function cg(t){let e=t.customLevels||{},r=Object.assign({},Xe.levels.values,e),n=Object.assign({},Xe.levels.labels,ug(e));return{values:r,labels:n}}function ug(t){let e={};return Object.keys(t).forEach(function(r){e[t[r]]=r}),e}Xe.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Xe.stdSerializers=ig;Xe.stdTimeFunctions=Object.assign({},{nullTime:pu,epochTime:fu,unixTime:hg,isoTime:yg});function lg(t){let e=[];t.bindings&&e.push(t.bindings);let r=t[$o];for(;r.parent;)r=r.parent,r.logger.bindings&&e.push(r.logger.bindings);return e.reverse()}function It(t,e,r,n){if(t[n]=_n(t.level,r)>_n(n,r)?Dr:r[Qo][n],!e.transmit&&t[n]===Dr)return;t[n]=pg(t,e,r,n);let i=lg(t);i.length!==0&&(t[n]=dg(i,t[n]))}function dg(t,e){return function(){return e.apply(this,[...t,...arguments])}}function pg(t,e,r,n){return function(i){return function(){let a=e.timestamp(),c=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Or?Or:this;for(var s=0;s<c.length;s++)c[s]=arguments[s];if(e.serialize&&!e.asObject&&Qn(c,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?i.call(u,fg(this,n,c,a)):i.apply(u,c),e.transmit){let l=e.transmit.level||t._level,f=r.levels.values[l],h=r.levels.values[n];if(h<f)return;mg(this,{ts:a,methodLevel:n,methodValue:h,transmitLevel:l,transmitValue:r.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:_n(t._level,r)},c)}}}(t[Qo][n])}function fg(t,e,r,n){t._serialize&&Qn(r,t._serialize,t.serializers,t._stdErrSerialize);let i=r.slice(),o=i[0],a={};n&&(a.time=n),a.level=t.levels.values[e];let c=(t._childLevel|0)+1;if(c<1&&(c=1),o!==null&&typeof o=="object"){for(;c--&&typeof i[0]=="object";)Object.assign(a,i.shift());o=i.length?uu(i.shift(),i):void 0}else typeof o=="string"&&(o=uu(i.shift(),i));return o!==void 0&&(a.msg=o),a}function Qn(t,e,r,n){for(let i in t)if(n&&t[i]instanceof Error)t[i]=Xe.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(let o in t[i])e&&e.indexOf(o)>-1&&o in r&&(t[i][o]=r[o](t[i][o]))}function mg(t,e,r){let n=e.send,i=e.ts,o=e.methodLevel,a=e.methodValue,c=e.val,u=t._logEvent.bindings;Qn(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(s){return u.indexOf(s)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=a,n(o,t._logEvent,c),t._logEvent=Ho(u)}function Ho(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function du(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function gg(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?pu:fu}function $n(){return{}}function zo(t){return t}function Dr(){}function pu(){return!1}function fu(){return Date.now()}function hg(){return Math.round(Date.now()/1e3)}function yg(){return new Date(Date.now()).toISOString()}function Sg(){function t(e){return typeof e!="undefined"&&e}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}Hn.exports.default=Xe;Hn.exports.pino=Xe});var qu=X((Go,Jo)=>{(function(t,e){typeof Go=="object"&&typeof Jo!="undefined"?Jo.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_customParseFormat=e()})(Go,function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,o={},a=function(d){return(d=+d)+(d>68?1900:2e3)},c=function(d){return function(g){this[d]=+g}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(d){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var y=g.match(/([+-]|\d\d)/g),b=60*y[1]+(+y[2]||0);return b===0?0:y[0]==="+"?-b:b}(d)}],s=function(d){var g=o[d];return g&&(g.indexOf?g:g.s.concat(g.f))},l=function(d,g){var y,b=o.meridiem;if(b){for(var x=1;x<=24;x+=1)if(d.indexOf(b(x,0,g))>-1){y=x>12;break}}else y=d===(g?"pm":"PM");return y},f={A:[i,function(d){this.afternoon=l(d,!1)}],a:[i,function(d){this.afternoon=l(d,!0)}],S:[/\d/,function(d){this.milliseconds=100*+d}],SS:[r,function(d){this.milliseconds=10*+d}],SSS:[/\d{3}/,function(d){this.milliseconds=+d}],s:[n,c("seconds")],ss:[n,c("seconds")],m:[n,c("minutes")],mm:[n,c("minutes")],H:[n,c("hours")],h:[n,c("hours")],HH:[n,c("hours")],hh:[n,c("hours")],D:[n,c("day")],DD:[r,c("day")],Do:[i,function(d){var g=o.ordinal,y=d.match(/\d+/);if(this.day=y[0],g)for(var b=1;b<=31;b+=1)g(b).replace(/\[|\]/g,"")===d&&(this.day=b)}],M:[n,c("month")],MM:[r,c("month")],MMM:[i,function(d){var g=s("months"),y=(s("monthsShort")||g.map(function(b){return b.slice(0,3)})).indexOf(d)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[i,function(d){var g=s("months").indexOf(d)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[r,function(d){this.year=a(d)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function h(d){var g,y;g=d,y=o&&o.formats;for(var b=(d=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Y,_,V){var ie=V&&V.toUpperCase();return _||y[V]||t[V]||y[ie].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(oe,I,C){return I||C.slice(1)})})).match(e),x=b.length,F=0;F<x;F+=1){var q=b[F],N=f[q],Q=N&&N[0],H=N&&N[1];b[F]=H?{regex:Q,parser:H}:q.replace(/^\[|\]$/g,"")}return function(Y){for(var _={},V=0,ie=0;V<x;V+=1){var oe=b[V];if(typeof oe=="string")ie+=oe.length;else{var I=oe.regex,C=oe.parser,R=Y.slice(ie),O=I.exec(R)[0];C.call(_,O),Y=Y.replace(O,"")}}return function(w){var M=w.afternoon;if(M!==void 0){var j=w.hours;M?j<12&&(w.hours+=12):j===12&&(w.hours=0),delete w.afternoon}}(_),_}}return function(d,g,y){y.p.customParseFormat=!0,d&&d.parseTwoDigitYear&&(a=d.parseTwoDigitYear);var b=g.prototype,x=b.parse;b.parse=function(F){var q=F.date,N=F.utc,Q=F.args;this.$u=N;var H=Q[1];if(typeof H=="string"){var Y=Q[2]===!0,_=Q[3]===!0,V=Y||_,ie=Q[2];_&&(ie=Q[2]),o=this.$locale(),!Y&&ie&&(o=y.Ls[ie]),this.$d=function(R,O,w){try{if(["x","X"].indexOf(O)>-1)return new Date((O==="X"?1e3:1)*R);var M=h(O)(R),j=M.year,z=M.month,Z=M.day,re=M.hours,ae=M.minutes,ye=M.seconds,tt=M.milliseconds,qe=M.zone,ze=new Date,ke=Z||(j||z?1:ze.getDate()),se=j||ze.getFullYear(),be=0;j&&!z||(be=z>0?z-1:ze.getMonth());var We=re||0,rt=ae||0,Ri=ye||0,wi=tt||0;return qe?new Date(Date.UTC(se,be,ke,We,rt,Ri,wi+60*qe.offset*1e3)):w?new Date(Date.UTC(se,be,ke,We,rt,Ri,wi)):new Date(se,be,ke,We,rt,Ri,wi)}catch{return new Date("")}}(q,H,N),this.init(),ie&&ie!==!0&&(this.$L=this.locale(ie).$L),V&&q!=this.format(H)&&(this.$d=new Date("")),o={}}else if(H instanceof Array)for(var oe=H.length,I=1;I<=oe;I+=1){Q[1]=H[I-1];var C=y.apply(this,Q);if(C.isValid()){this.$d=C.$d,this.$L=C.$L,this.init();break}I===oe&&(this.$d=new Date(""))}else x.call(this,F)}}})});var ju=X((Xo,ea)=>{(function(t,e){typeof Xo=="object"&&typeof ea!="undefined"?ea.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_quarterOfYear=e()})(Xo,function(){"use strict";var t="month",e="quarter";return function(r,n){var i=n.prototype;i.quarter=function(c){return this.$utils().u(c)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(c-1))};var o=i.add;i.add=function(c,u){return c=Number(c),this.$utils().p(u)===e?this.add(3*c,t):o.bind(this)(c,u)};var a=i.startOf;i.startOf=function(c,u){var s=this.$utils(),l=!!s.u(u)||u;if(s.p(c)===e){var f=this.quarter()-1;return l?this.month(3*f).startOf(t).startOf("day"):this.month(3*f+2).endOf(t).endOf("day")}return a.bind(this)(c,u)}}})});fa(exports,{DefaultFieldsToInclude:()=>Ko,EcommerceDefaultFieldsToInclude:()=>Pu,HighlightUtils:()=>Fi,MinimumFieldsToInclude:()=>ti,ResultTemplatesHelpers:()=>da,buildContext:()=>Dl,buildController:()=>At,buildDictionaryFieldContext:()=>Tl,buildInteractiveResult:()=>kl,buildRecommendationEngine:()=>Au,buildRecommendationList:()=>Il,buildResultTemplatesManager:()=>ql,getOrganizationEndpoints:()=>jt,getSampleRecommendationEngineConfiguration:()=>Wo,loadAdvancedSearchQueryActions:()=>Pg,loadClickAnalyticsActions:()=>jg,loadConfigurationActions:()=>Rg,loadContextActions:()=>Ig,loadDebugActions:()=>Ng,loadDictionaryFieldContextActions:()=>Eg,loadFieldActions:()=>Tg,loadPaginationActions:()=>ua,loadPipelineActions:()=>qg,loadRecommendationActions:()=>Vg,loadSearchConfigurationActions:()=>wg,loadSearchHubActions:()=>Mg});var gr=()=>global.crypto,ma=()=>{typeof window=="undefined"&&(gr()||(global.crypto=require("crypto")),!gr().getRandomValues&&gr().webcrypto&&(global.crypto.getRandomValues=gr().webcrypto.getRandomValues.bind(gr().webcrypto)))};function Bl(t,e){let r=`
  The following properties are invalid:

    ${t.join(`
	`)}
  
  ${e}
  `;return new hr(r)}var hr=class extends Error{constructor(t){super(t);this.name="SchemaValidationError"}},ge=class{constructor(t){this.definition=t}validate(t={},e=""){let r={...this.default,...t},n=[];for(let i in this.definition){let o=this.definition[i].validate(r[i]);o&&n.push(`${i}: ${o}`)}if(n.length)throw Bl(n,e);return r}get default(){let t={};for(let e in this.definition){let r=this.definition[e].default;r!==void 0&&(t[e]=r)}return t}},G=class{constructor(t={}){this.baseConfig=t}validate(t){return this.baseConfig.required&&U(t)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function ne(t){return t===void 0}function _l(t){return t===null}function U(t){return ne(t)||_l(t)}var T=class{constructor(t={}){this.config=t,this.value=new G(t)}validate(t){let e=this.value.validate(t);return e||(Ql(t)?t<this.config.min?`minimum value of ${this.config.min} not respected.`:t>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Ql(t){return ne(t)||ga(t)}function ga(t){return typeof t=="number"&&!isNaN(t)}var L=class{constructor(t={}){this.value=new G(t)}validate(t){let e=this.value.validate(t);return e||($l(t)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function $l(t){return ne(t)||ha(t)}function ha(t){return typeof t=="boolean"}var Hl=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,P=class{constructor(t={}){this.config={emptyAllowed:!0,url:!1,...t},this.value=new G(this.config)}validate(t){let{emptyAllowed:e,url:r,regex:n,constrainTo:i}=this.config,o=this.value.validate(t);return o||(ne(t)?null:_r(t)?!e&&!t.length?"value is an empty string.":r&&!Hl.test(t)?"value is not a valid URL.":n&&!n.test(t)?`value did not match provided regex ${n}`:i&&!i.includes(t)?`value should be one of: ${i.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function _r(t){return Object.prototype.toString.call(t)==="[object String]"}var D=class{constructor(t={}){this.config={options:{required:!1},values:{},...t}}validate(t){if(ne(t))return this.config.options.required?"value is required and is currently undefined":null;if(!ya(t))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&U(t[r]))return`value does not contain ${r}`;let e="";for(let[r,n]of Object.entries(this.config.values)){let i=t[r],o=n.validate(i);o!==null&&(e+=" "+o)}return e===""?null:e}get default(){}get required(){return!!this.config.options.required}};function ya(t){return t!==void 0&&typeof t=="object"}var W=class{constructor(t={}){this.config=t,this.value=new G(this.config)}validate(t){if(!U(t)&&!Array.isArray(t))return"value is not an array";let e=this.value.validate(t);if(e!==null)return e;if(U(t))return null;if(this.config.max!==void 0&&t.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&t.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return t.forEach(n=>{this.config.each.required&&U(n)&&(r=`value is null or undefined: ${t.join(",")}`);let i=this.validatePrimitiveValue(n,this.config.each);i!==null&&(r+=" "+i)}),r===""?null:r}return null}validatePrimitiveValue(t,e){return ha(t)||_r(t)||ga(t)||ya(t)?e.validate(t):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Sa(t){return Array.isArray(t)}var Mt=class{constructor(t){this.config=t,this.value=new G(t)}validate(t){let e=this.value.validate(t);return e!==null?e:ne(t)||Object.values(this.config.enum).find(n=>n===t)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var ed=we(Ra());function wa(t){return Array.isArray(t)}function Qr(t){return t.trim()===""}function Pa(t,e){return[...t.reduce((r,n)=>{let i=e(n);return r.has(i)||r.set(i,n),r},new Map).values()]}var td=new Set(["1",1,"yes",!0]);function $r(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;let t=navigator,e=window;return[t.globalPrivacyControl,t.doNotTrack,t.msDoNotTrack,e.doNotTrack].some(r=>td.has(r))}function Fa(t){let e={};for(let[r,n]of t)e[r]=n;return e}function yr(t){if(typeof t!="object"||!t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}var Sr=(t,e)=>{let r=t;return U(r[e])?U(t.raw[e])?null:t.raw[e]:r[e]},Ia=t=>e=>t.every(r=>!U(Sr(e,r))),Ea=t=>e=>t.every(r=>U(Sr(e,r))),ka=(t,e)=>r=>{let n=Da(t,r);return e.some(i=>n.some(o=>`${o}`.toLowerCase()===i.toLowerCase()))},Oa=(t,e)=>r=>{let n=Da(t,r);return e.every(i=>n.every(o=>`${o}`.toLowerCase()!==i.toLowerCase()))},Da=(t,e)=>{let r=Sr(e,t);return wa(r)?r:[r]};var Fi={};fa(Fi,{escape:()=>Nt,getHighlightedSuggestion:()=>nd,highlightString:()=>rd});function rd(t){if(Qr(t.openingDelimiter)||Qr(t.closingDelimiter))throw Error("delimiters should be a non-empty string");if(U(t.content)||Qr(t.content))return t.content;if(t.highlights.length===0)return Nt(t.content);let e=t.content.length,r="",n=0;for(let i=0;i<t.highlights.length;i++){let o=t.highlights[i],a=o.offset,c=a+o.length;if(c>e)break;r+=Nt(t.content.slice(n,a)),r+=t.openingDelimiter,r+=Nt(t.content.slice(a,c)),r+=t.closingDelimiter,n=c}return n!==e&&(r+=Nt(t.content.slice(n))),r}function nd(t,e){return t=Nt(t),t.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,n,i,o)=>n?Pi(n,e.notMatchDelimiters):i?Pi(i,e.exactMatchDelimiters):o?Pi(o,e.correctionDelimiters):r)}function Pi(t,e){return e?e.open+t+e.close:t}function Nt(t){let e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return n.test(t)?t.replace(i,o=>e[o]):t}var Hr=t=>t;function zr(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Ae(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:zr(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:zr(),extendedResults:{}}}function Ke(t){let{url:e,accessToken:r,organizationId:n,authentication:i,...o}=t;return o}var Ye=t=>{let{response:e}=t;return e.body?id(t):od(e)},id=t=>sd(t)?cd(t):ad(t)?t.body:{message:"unknown",statusCode:0,type:"unknown"},od=t=>{let e=JSON.parse(JSON.stringify(t,Object.getOwnPropertyNames(t)));return{...e,message:`Client side error: ${e.message||""}`,statusCode:400,type:"ClientError"}};function ad(t){return t.body.statusCode!==void 0}function sd(t){return t.body.exception!==void 0}var cd=t=>({message:t.body.exception.code,statusCode:t.response.status,type:t.body.exception.code});var Ha=we(qa()),za=we(_a());var Me=new Error("Failed to load reducers."),Ar=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Vt=class extends Error{constructor(e,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=r!=null?r:0}};function Qa(t){let e=[];for(let r in t){let n=encodeURIComponent(r),i=encodeURIComponent(t[r]);e.push(`${n}=${i}`)}return e.join("&")}function $a(t){return typeof t!="object"||!t?!1:Object.values(t).every(qd)}function qd(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function Wa(t){return t===429}var Ce=class{static async call(e){let r=Md(e),{logger:n}=e,i=await Ce.preprocessRequest(r,e);n.info(i,"Platform request");let{url:o,...a}=i,c=async()=>{let u=await(0,Ha.default)(o,a);if(Wa(u.status))throw u;return u};try{let u=await(0,za.backOff)(c,{retry:s=>{let l=s&&Wa(s.status);return l&&n.info("Platform retrying request"),l}});if(u.status===419)throw n.info("Platform renewing token"),new Ar;if(u.status===404)throw new Vt(o,u.status);return n.info({response:u,requestInfo:i},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new Vt(o):u}}static async preprocessRequest(e,r){let{origin:n,preprocessRequest:i,logger:o,requestMetadata:a}=r,{signal:c,...u}=e,s=yr(u);try{let l=await i(e,n,a);return{...e,...l}}catch(l){o.error(l,"Platform request preprocessing failed. Returning default request options.")}return s}};function Ka(t,e){let r=!e||!e.environment||e.environment==="prod"?"":e.environment,n=!e||!e.region||e.region==="us"?"":`-${e.region}`;return`https://${t}${r}${n}.cloud.coveo.com`}function jt(t,e="prod"){let r=e==="prod"?"":e,n=`https://${t}.org${r}.coveo.com`,i=`https://${t}.analytics.org${r}.coveo.com`,o=`${n}/rest/search/v2`,a=`https://${t}.admin.org${r}.coveo.com`;return{platform:n,analytics:i,search:o,admin:a}}function Ni(t){return(t==null?void 0:t.multiRegionSubDomain)?`https://${t.multiRegionSubDomain}.org.coveo.com`:Ka("platform",t)}function Ya(t){return Ka("analytics",t)}function Md(t){let{url:e,method:r,requestParams:n,contentType:i,accessToken:o,signal:a}=t,c=t.method==="POST"||t.method==="PUT",u=Nd(n,i);return{url:e,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${o}`,...t.headers},...c&&{body:u},signal:a}}function Nd(t,e){return e==="application/x-www-form-urlencoded"?$a(t)?Qa(t):"":JSON.stringify(t)}function Za(){if(typeof window=="undefined"){let{AbortController:t}=Ja();return new t}return typeof AbortController=="undefined"?null:new AbortController}var xt=class{constructor(){this.currentAbortController=null}async enqueue(e,r){var o;let n=this.currentAbortController,i=this.currentAbortController=Za();n&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),n.abort());try{return await e((o=i==null?void 0:i.signal)!=null?o:null)}finally{this.currentAbortController===i&&(this.currentAbortController=null)}}};var Kr=class{constructor(e){this._params={};this._basePath=e}addParam(e,r){this._params={...this.params,[e]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([e,r])=>`${e}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},Xa=t=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(t),es=(t,e)=>{let r=ji(t);return r&&r.organizationId===e?r:null},ji=t=>{let e=t.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(e==null?void 0:e.groups)?e.groups:null};function ts(t){return((t.headers.get("content-type")||"").split(";").find(n=>n.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var Ne=(t,e,r,n)=>{let i=new Kr(`${t.url}${n}`);return i.addParam("organizationId",t.organizationId),t.authentication&&i.addParam("authentication",t.authentication),{accessToken:t.accessToken,method:e,contentType:r,url:i.href,origin:"searchApiFetch"}};var rs=async(t,e)=>{let r=await Ce.call({...Ne(t,"POST","application/x-www-form-urlencoded","/html"),requestParams:Ke(t),requestMetadata:{method:"html"},...e});if(r instanceof Error)throw r;let n=ts(r),i=await r.arrayBuffer(),a=new TextDecoder(n).decode(i);return Vd(a)?{success:a}:{error:Ye({response:r,body:a})}};function Vd(t){return typeof t=="string"}function jd(t){return{statusCode:t.statusCode,type:t.name,message:t.message}}function Ld(t){return{statusCode:t.code,type:t.name,message:t.message,ignored:!0}}function Yr(t,e){if(e&&t.name==="AbortError")return{error:Ld(t)};if(t instanceof Vt)return{error:jd(t)};throw t}var Li=class{constructor(e){this.options=e;this.apiCallsQueues={unknown:new xt,mainSearch:new xt,facetValues:new xt,foldingCollection:new xt,instantResults:new xt}}async plan(e){let r=await Ce.call({...Ne(e,"POST","application/json","/plan"),requestParams:Ke(e),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return Yr(r);let n=await r.json();return _d(n)?{success:n}:{error:Ye({response:r,body:n})}}async querySuggest(e){let r=await Ce.call({...Ne(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:Ke(e),...this.options});if(r instanceof Error)return Yr(r);let n=await r.json(),i={response:r,body:n};return Bd(n)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(i)).body}:{error:Ye(i)}}async search(e,r){var c;let n=(c=r==null?void 0:r.origin)!=null?c:"unknown",i=await this.apiCallsQueues[n].enqueue(u=>Ce.call({...Ne(e,"POST","application/json",""),requestParams:Ke(e),requestMetadata:{method:"search",origin:r==null?void 0:r.origin},...this.options,signal:u!=null?u:void 0}),{logger:this.options.logger,warnOnAbort:!(r==null?void 0:r.disableAbortWarning)});if(i instanceof Error)return Yr(i,r==null?void 0:r.disableAbortWarning);let o=await i.json(),a={response:i,body:o};return Ui(o)?(a.body=Ud(o),{success:(await this.options.postprocessSearchResponseMiddleware(a)).body}):{error:Ye(a)}}async facetSearch(e){let r=await Ce.call({...Ne(e,"POST","application/json","/facet"),requestParams:Ke(e),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let n=await r.json(),i={response:r,body:n};return(await this.options.postprocessFacetSearchResponseMiddleware(i)).body}async recommendations(e){let r=await Ce.call({...Ne(e,"POST","application/json",""),requestParams:Ke(e),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return Ui(n)?{success:n}:{error:Ye({response:r,body:n})}}async html(e){return rs(e,{...this.options})}async productRecommendations(e){let r=await Ce.call({...Ne(e,"POST","application/json",""),requestParams:Ke(e),requestMetadata:{method:"productRecommendations"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return Ui(n)?{success:n}:{error:Ye({response:r,body:n})}}async fieldDescriptions(e){let r=await Ce.call({...Ne(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return Qd(n)?{success:n}:{error:Ye({response:r,body:n})}}},Gr=t=>t.success!==void 0,de=t=>t.error!==void 0;function Ui(t){return t.results!==void 0}function Ud(t){let e=zr();return U(t.questionAnswer)?(t.questionAnswer=e,t):(t.questionAnswer={...e,...t.questionAnswer},t)}function Bd(t){return t.completions!==void 0}function _d(t){return t.preprocessingOutput!==void 0}function Qd(t){return t.fields!==void 0}var ns=t=>t,is=t=>t,os=t=>t;function Pe(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(!1)var i,o;throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Je(t){return!!t&&!!t[J]}function Oe(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Jd}(t)||Array.isArray(t)||!!t[hs]||!!((e=t.constructor)===null||e===void 0?void 0:e[hs])||Bi(t)||_i(t))}function Rt(t,e,r){r===void 0&&(r=!1),Lt(t)===0?(r?Object.keys:Bt)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function Lt(t){var e=t[J];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Bi(t)?2:_i(t)?3:0}function Ut(t,e){return Lt(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function $d(t,e){return Lt(t)===2?t.get(e):t[e]}function as(t,e,r){var n=Lt(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function ss(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Bi(t){return Yd&&t instanceof Map}function _i(t){return Gd&&t instanceof Set}function nt(t){return t.o||t.t}function Qi(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=ys(t);delete e[J];for(var r=Bt(e),n=0;n<r.length;n++){var i=r[n],o=e[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function $i(t,e){return e===void 0&&(e=!1),Hi(t)||Je(t)||!Oe(t)||(Lt(t)>1&&(t.set=t.add=t.clear=t.delete=Hd),Object.freeze(t),e&&Rt(t,function(r,n){return $i(n,!0)},!0)),t}function Hd(){Pe(2)}function Hi(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Ve(t){var e=eo[t];return e||Pe(18,t),e}function zd(t,e){eo[t]||(eo[t]=e)}function zi(){return Cr}function Wi(t,e){e&&(Ve("Patches"),t.u=[],t.s=[],t.v=e)}function Jr(t){Ki(t),t.p.forEach(Wd),t.p=null}function Ki(t){t===Cr&&(Cr=t.l)}function cs(t){return Cr={p:[],l:Cr,h:t,m:!0,_:0}}function Wd(t){var e=t[J];e.i===0||e.i===1?e.j():e.g=!0}function Yi(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.O||Ve("ES5").S(e,t,n),n?(r[J].P&&(Jr(e),Pe(4)),Oe(t)&&(t=Zr(e,t),e.l||Xr(e,t)),e.u&&Ve("Patches").M(r[J].t,t,e.u,e.s)):t=Zr(e,r,[]),Jr(e),e.u&&e.v(e.u,e.s),t!==gs?t:void 0}function Zr(t,e,r){if(Hi(e))return e;var n=e[J];if(!n)return Rt(e,function(c,u){return us(t,n,e,c,u,r)},!0),e;if(n.A!==t)return e;if(!n.P)return Xr(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=Qi(n.k):n.o,o=i,a=!1;n.i===3&&(o=new Set(i),i.clear(),a=!0),Rt(o,function(c,u){return us(t,n,i,c,u,r,a)}),Xr(t,i,!1),r&&t.u&&Ve("Patches").N(n,r,t.u,t.s)}return n.o}function us(t,e,r,n,i,o,a){if(Je(i)){var c=Zr(t,i,o&&e&&e.i!==3&&!Ut(e.R,n)?o.concat(n):void 0);if(as(r,n,c),!Je(c))return;t.m=!1}else a&&r.add(i);if(Oe(i)&&!Hi(i)){if(!t.h.D&&t._<1)return;Zr(t,i),e&&e.A.l||Xr(t,i)}}function Xr(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&$i(e,r)}function Gi(t,e){var r=t[J];return(r?nt(r):t)[e]}function ls(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function it(t){t.P||(t.P=!0,t.l&&it(t.l))}function Ji(t){t.o||(t.o=Qi(t.t))}function Zi(t,e,r){var n=Bi(e)?Ve("MapSet").F(e,r):_i(e)?Ve("MapSet").T(e,r):t.O?function(i,o){var a=Array.isArray(i),c={i:a?1:0,A:o?o.A:zi(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},u=c,s=xr;a&&(u=[c],s=Rr);var l=Proxy.revocable(u,s),f=l.revoke,h=l.proxy;return c.k=h,c.j=f,h}(e,r):Ve("ES5").J(e,r);return(r?r.A:zi()).p.push(n),n}function Kd(t){return Je(t)||Pe(22,t),function e(r){if(!Oe(r))return r;var n,i=r[J],o=Lt(r);if(i){if(!i.P&&(i.i<4||!Ve("ES5").K(i)))return i.t;i.I=!0,n=ds(r,o),i.I=!1}else n=ds(r,o);return Rt(n,function(a,c){i&&$d(i.t,a)===c||as(n,a,e(c))}),o===3?new Set(n):n}(t)}function ds(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Qi(t)}function ps(){function t(a,c){var u=o[a];return u?u.enumerable=c:o[a]=u={configurable:!0,enumerable:c,get:function(){var s=this[J];return xr.get(s,a)},set:function(s){var l=this[J];xr.set(l,a,s)}},u}function e(a){for(var c=a.length-1;c>=0;c--){var u=a[c][J];if(!u.P)switch(u.i){case 5:n(u)&&it(u);break;case 4:r(u)&&it(u)}}}function r(a){for(var c=a.t,u=a.k,s=Bt(u),l=s.length-1;l>=0;l--){var f=s[l];if(f!==J){var h=c[f];if(h===void 0&&!Ut(c,f))return!0;var d=u[f],g=d&&d[J];if(g?g.t!==h:!ss(d,h))return!0}}var y=!!c[J];return s.length!==Bt(c).length+(y?0:1)}function n(a){var c=a.k;if(c.length!==a.t.length)return!0;var u=Object.getOwnPropertyDescriptor(c,c.length-1);if(u&&!u.get)return!0;for(var s=0;s<c.length;s++)if(!c.hasOwnProperty(s))return!0;return!1}function i(a){a.g&&Pe(3,JSON.stringify(nt(a)))}var o={};zd("ES5",{J:function(a,c){var u=Array.isArray(a),s=function(f,h){if(f){for(var d=Array(h.length),g=0;g<h.length;g++)Object.defineProperty(d,""+g,t(g,!0));return d}var y=ys(h);delete y[J];for(var b=Bt(y),x=0;x<b.length;x++){var F=b[x];y[F]=t(F,f||!!y[F].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(u,a),l={i:u?5:4,A:c?c.A:zi(),P:!1,I:!1,R:{},l:c,t:a,k:s,o:null,g:!1,C:!1};return Object.defineProperty(s,J,{value:l,writable:!0}),s},S:function(a,c,u){u?Je(c)&&c[J].A===a&&e(a.p):(a.u&&function s(l){if(l&&typeof l=="object"){var f=l[J];if(f){var h=f.t,d=f.k,g=f.R,y=f.i;if(y===4)Rt(d,function(N){N!==J&&(h[N]!==void 0||Ut(h,N)?g[N]||s(d[N]):(g[N]=!0,it(f)))}),Rt(h,function(N){d[N]!==void 0||Ut(d,N)||(g[N]=!1,it(f))});else if(y===5){if(n(f)&&(it(f),g.length=!0),d.length<h.length)for(var b=d.length;b<h.length;b++)g[b]=!1;else for(var x=h.length;x<d.length;x++)g[x]=!0;for(var F=Math.min(d.length,h.length),q=0;q<F;q++)d.hasOwnProperty(q)||(g[q]=!0),g[q]===void 0&&s(d[q])}}}}(a.p[0]),e(a.p))},K:function(a){return a.i===4?r(a):n(a)}})}var fs,Cr,Xi=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",Yd=typeof Map!="undefined",Gd=typeof Set!="undefined",ms=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",gs=Xi?Symbol.for("immer-nothing"):((fs={})["immer-nothing"]=!0,fs),hs=Xi?Symbol.for("immer-draftable"):"__$immer_draftable",J=Xi?Symbol.for("immer-state"):"__$immer_state",Yy=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var Jd=""+Object.prototype.constructor,Bt=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,ys=Object.getOwnPropertyDescriptors||function(t){var e={};return Bt(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},eo={},xr={get:function(t,e){if(e===J)return t;var r=nt(t);if(!Ut(r,e))return function(i,o,a){var c,u=ls(o,a);return u?"value"in u?u.value:(c=u.get)===null||c===void 0?void 0:c.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!Oe(n)?n:n===Gi(t.t,e)?(Ji(t),t.o[e]=Zi(t.A.h,n,t)):n},has:function(t,e){return e in nt(t)},ownKeys:function(t){return Reflect.ownKeys(nt(t))},set:function(t,e,r){var n=ls(nt(t),e);if(n==null?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=Gi(nt(t),e),o=i==null?void 0:i[J];if(o&&o.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(ss(r,i)&&(r!==void 0||Ut(t.t,e)))return!0;Ji(t),it(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Gi(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Ji(t),it(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=nt(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){Pe(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Pe(12)}},Rr={};Rt(xr,function(t,e){Rr[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Rr.deleteProperty=function(t,e){return Rr.set.call(this,t,e,void 0)},Rr.set=function(t,e,r){return xr.set.call(this,t[0],e,r,t[0])};var Zd=function(){function t(r){var n=this;this.O=ms,this.D=!0,this.produce=function(i,o,a){if(typeof i=="function"&&typeof o!="function"){var c=o;o=i;var u=n;return function(y){var b=this;y===void 0&&(y=c);for(var x=arguments.length,F=Array(x>1?x-1:0),q=1;q<x;q++)F[q-1]=arguments[q];return u.produce(y,function(N){var Q;return(Q=o).call.apply(Q,[b,N].concat(F))})}}var s;if(typeof o!="function"&&Pe(6),a!==void 0&&typeof a!="function"&&Pe(7),Oe(i)){var l=cs(n),f=Zi(n,i,void 0),h=!0;try{s=o(f),h=!1}finally{h?Jr(l):Ki(l)}return typeof Promise!="undefined"&&s instanceof Promise?s.then(function(y){return Wi(l,a),Yi(y,l)},function(y){throw Jr(l),y}):(Wi(l,a),Yi(s,l))}if(!i||typeof i!="object"){if((s=o(i))===void 0&&(s=i),s===gs&&(s=void 0),n.D&&$i(s,!0),a){var d=[],g=[];Ve("Patches").M(i,s,d,g),a(d,g)}return s}Pe(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(s){for(var l=arguments.length,f=Array(l>1?l-1:0),h=1;h<l;h++)f[h-1]=arguments[h];return n.produceWithPatches(s,function(d){return i.apply(void 0,[d].concat(f))})};var a,c,u=n.produce(i,o,function(s,l){a=s,c=l});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(s){return[s,a,c]}):[u,a,c]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){Oe(r)||Pe(8),Je(r)&&(r=Kd(r));var n=cs(this),i=Zi(this,r,void 0);return i[J].C=!0,Ki(n),i},e.finishDraft=function(r,n){var i=r&&r[J],o=i.A;return Wi(o,n),Yi(void 0,o)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!ms&&Pe(20),this.O=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var o=n[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(n=n.slice(i+1));var a=Ve("Patches").$;return Je(r)?a(r,n):this.produce(r,function(c){return a(c,n)})},t}(),xe=new Zd,Xd=xe.produce,Gy=xe.produceWithPatches.bind(xe),Jy=xe.setAutoFreeze.bind(xe),Zy=xe.setUseProxies.bind(xe),Xy=xe.applyPatches.bind(xe),eS=xe.createDraft.bind(xe),tS=xe.finishDraft.bind(xe),en=Xd;function ot(t){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(t)}function to(t,e){if(ot(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ot(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ro(t){var e=to(t,"string");return ot(e)==="symbol"?e:String(e)}function no(t,e,r){return e=ro(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ss(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ss(Object(r),!0).forEach(function(n){no(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ss(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pe(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var vs=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),io=function(){return Math.random().toString(36).substring(7).split("").join(".")},rn={INIT:"@@redux/INIT"+io(),REPLACE:"@@redux/REPLACE"+io(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+io()}};function ep(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function oo(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(pe(0));if(typeof e=="function"&&typeof r=="undefined"&&(r=e,e=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(pe(1));return r(oo)(t,e)}if(typeof t!="function")throw new Error(pe(2));var i=t,o=e,a=[],c=a,u=!1;function s(){c===a&&(c=a.slice())}function l(){if(u)throw new Error(pe(3));return o}function f(y){if(typeof y!="function")throw new Error(pe(4));if(u)throw new Error(pe(5));var b=!0;return s(),c.push(y),function(){if(!!b){if(u)throw new Error(pe(6));b=!1,s();var F=c.indexOf(y);c.splice(F,1),a=null}}}function h(y){if(!ep(y))throw new Error(pe(7));if(typeof y.type=="undefined")throw new Error(pe(8));if(u)throw new Error(pe(9));try{u=!0,o=i(o,y)}finally{u=!1}for(var b=a=c,x=0;x<b.length;x++){var F=b[x];F()}return y}function d(y){if(typeof y!="function")throw new Error(pe(10));i=y,h({type:rn.REPLACE})}function g(){var y,b=f;return y={subscribe:function(F){if(typeof F!="object"||F===null)throw new Error(pe(11));function q(){F.next&&F.next(l())}q();var N=b(q);return{unsubscribe:N}}},y[vs]=function(){return this},y}return h({type:rn.INIT}),n={dispatch:h,subscribe:f,getState:l,replaceReducer:d},n[vs]=g,n}function tp(t){Object.keys(t).forEach(function(e){var r=t[e],n=r(void 0,{type:rn.INIT});if(typeof n=="undefined")throw new Error(pe(12));if(typeof r(void 0,{type:rn.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(pe(13))})}function nn(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var i=e[n];typeof t[i]=="function"&&(r[i]=t[i])}var o=Object.keys(r),a,c;try{tp(r)}catch(u){c=u}return function(s,l){if(s===void 0&&(s={}),c)throw c;if(!1)var f;for(var h=!1,d={},g=0;g<o.length;g++){var y=o[g],b=r[y],x=s[y],F=b(x,l);if(typeof F=="undefined"){var q=l&&l.type;throw new Error(pe(14))}d[y]=F,h=h||F!==x}return h=h||o.length!==Object.keys(s).length,h?d:s}}function _t(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function bs(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),o=function(){throw new Error(pe(15))},a={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},c=e.map(function(u){return u(a)});return o=_t.apply(void 0,c)(i.dispatch),tn(tn({},i),{},{dispatch:o})}}}function As(t){var e=function(n){var i=n.dispatch,o=n.getState;return function(a){return function(c){return typeof c=="function"?c(i,o,t):a(c)}}};return e}var Cs=As();Cs.withExtraArgument=As;var ao=Cs;var xs=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rp=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(l){return u([s,l])}}function u(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(l){s=[6,l],i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Qt=function(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t},np=Object.defineProperty,ip=Object.defineProperties,op=Object.getOwnPropertyDescriptors,Rs=Object.getOwnPropertySymbols,ap=Object.prototype.hasOwnProperty,sp=Object.prototype.propertyIsEnumerable,ws=function(t,e,r){return e in t?np(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},$t=function(t,e){for(var r in e||(e={}))ap.call(e,r)&&ws(t,r,e[r]);if(Rs)for(var n=0,i=Rs(e);n<i.length;n++){var r=i[n];sp.call(e,r)&&ws(t,r,e[r])}return t},so=function(t,e){return ip(t,op(e))},cp=function(t,e,r){return new Promise(function(n,i){var o=function(u){try{c(r.next(u))}catch(s){i(s)}},a=function(u){try{c(r.throw(u))}catch(s){i(s)}},c=function(u){return u.done?n(u.value):Promise.resolve(u.value).then(o,a)};c((r=r.apply(t,e)).next())})};var up=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_t:_t.apply(null,arguments)},vS=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(t){return t}};function lp(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}function S(t,e){function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(e){var o=e.apply(void 0,n);if(!o)throw new Error("prepareAction did not return an object");return $t($t({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:n[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(n){return n.type===t},r}var dp=function(t){xs(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(this,r)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Qt([void 0],r[0].concat(this)))):new(e.bind.apply(e,Qt([void 0],r.concat(this))))},e}(Array),pp=function(t){xs(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(this,r)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Qt([void 0],r[0].concat(this)))):new(e.bind.apply(e,Qt([void 0],r.concat(this))))},e}(Array);function Ps(t){return Oe(t)?en(t,function(){}):t}function fp(t){return typeof t=="boolean"}function mp(){return function(e){return gp(e)}}function gp(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e,n=t.immutableCheck,i=n===void 0?!0:n,o=t.serializableCheck,a=o===void 0?!0:o,c=t.actionCreatorCheck,u=c===void 0?!0:c,s=new dp;if(r&&(fp(r)?s.push(ao):s.push(ao.withExtraArgument(r.extraArgument))),!1){if(i)var l;if(a)var f;if(u)var h}return s}var co=!0;function Fs(t){var e=mp(),r=t||{},n=r.reducer,i=n===void 0?void 0:n,o=r.middleware,a=o===void 0?e():o,c=r.devTools,u=c===void 0?!0:c,s=r.preloadedState,l=s===void 0?void 0:s,f=r.enhancers,h=f===void 0?void 0:f,d;if(typeof i=="function")d=i;else if(lp(i))d=nn(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=a;if(typeof g=="function"&&(g=g(e),!co&&!Array.isArray(g)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!co&&g.some(function(N){return typeof N!="function"}))throw new Error("each middleware provided to configureStore must be a function");var y=bs.apply(void 0,g),b=_t;u&&(b=up($t({trace:!co},typeof u=="object"&&u)));var x=new pp(y),F=x;Array.isArray(h)?F=Qt([y],h):typeof h=="function"&&(F=h(x));var q=b.apply(void 0,F);return oo(d,l,q)}function hp(t){var e={},r=[],n,i={addCase:function(o,a){var c=typeof o=="string"?o:o.type;if(!c)throw new Error("`builder.addCase` cannot be called with an empty action type");if(c in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[c]=a,i},addMatcher:function(o,a){return r.push({matcher:o,reducer:a}),i},addDefaultCase:function(o){return n=o,i}};return t(i),[e,r,n]}function yp(t){return typeof t=="function"}function ee(t,e,r,n){r===void 0&&(r=[]);var i=typeof e=="function"?hp(e):[e,r,n],o=i[0],a=i[1],c=i[2],u;if(yp(t))u=function(){return Ps(t())};else{var s=Ps(t);u=function(){return s}}function l(f,h){f===void 0&&(f=u());var d=Qt([o[h.type]],a.filter(function(g){var y=g.matcher;return y(h)}).map(function(g){var y=g.reducer;return y}));return d.filter(function(g){return!!g}).length===0&&(d=[c]),d.reduce(function(g,y){if(y)if(Je(g)){var b=g,x=y(b,h);return x===void 0?g:x}else{if(Oe(g))return en(g,function(F){return y(F,h)});var x=y(g,h);if(x===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return g},f)}return l.getInitialState=u,l}var Sp="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",vp=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=Sp[Math.random()*64|0];return e},bp=["name","message","stack","code"],uo=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),Is=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),Ap=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,n=bp;r<n.length;r++){var i=n[r];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}},K=function(){function t(e,r,n){var i=S(e+"/fulfilled",function(l,f,h,d){return{payload:l,meta:so($t({},d||{}),{arg:h,requestId:f,requestStatus:"fulfilled"})}}),o=S(e+"/pending",function(l,f,h){return{payload:void 0,meta:so($t({},h||{}),{arg:f,requestId:l,requestStatus:"pending"})}}),a=S(e+"/rejected",function(l,f,h,d,g){return{payload:d,error:(n&&n.serializeError||Ap)(l||"Rejected"),meta:so($t({},g||{}),{arg:h,requestId:f,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),c=!1,u=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function s(l){return function(f,h,d){var g=(n==null?void 0:n.idGenerator)?n.idGenerator(l):vp(),y=new u,b,x=!1;function F(N){b=N,y.abort()}var q=function(){return cp(this,null,function(){var N,Q,H,Y,_,V,ie;return rp(this,function(oe){switch(oe.label){case 0:return oe.trys.push([0,4,,5]),Y=(N=n==null?void 0:n.condition)==null?void 0:N.call(n,l,{getState:h,extra:d}),xp(Y)?[4,Y]:[3,2];case 1:Y=oe.sent(),oe.label=2;case 2:if(Y===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return x=!0,_=new Promise(function(I,C){return y.signal.addEventListener("abort",function(){return C({name:"AbortError",message:b||"Aborted"})})}),f(o(g,l,(Q=n==null?void 0:n.getPendingMeta)==null?void 0:Q.call(n,{requestId:g,arg:l},{getState:h,extra:d}))),[4,Promise.race([_,Promise.resolve(r(l,{dispatch:f,getState:h,extra:d,requestId:g,signal:y.signal,abort:F,rejectWithValue:function(I,C){return new uo(I,C)},fulfillWithValue:function(I,C){return new Is(I,C)}})).then(function(I){if(I instanceof uo)throw I;return I instanceof Is?i(I.payload,g,l,I.meta):i(I,g,l)})])];case 3:return H=oe.sent(),[3,5];case 4:return V=oe.sent(),H=V instanceof uo?a(null,g,l,V.payload,V.meta):a(V,g,l),[3,5];case 5:return ie=n&&!n.dispatchConditionRejection&&a.match(H)&&H.meta.condition,ie||f(H),[2,H]}})})}();return Object.assign(q,{abort:F,requestId:g,arg:l,unwrap:function(){return q.then(Cp)}})}}return Object.assign(s,{pending:o,rejected:a,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t}();function Cp(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function xp(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Rp="task",Es="listener",ks="completed",lo="cancelled",xS="task-"+lo,RS="task-"+ks,wS=Es+"-"+lo,PS=Es+"-"+ks,FS=function(){function t(e){this.code=e,this.name="TaskAbortError",this.message=Rp+" "+lo+" (reason: "+e+")"}return t}();var po="listenerMiddleware";var IS=S(po+"/add"),ES=S(po+"/removeAll"),kS=S(po+"/remove");var Os,OS=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis):function(t){return(Os||(Os=Promise.resolve())).then(t).catch(function(e){return setTimeout(function(){throw e},0)})},wp=function(t){return function(e){setTimeout(e,t)}},DS=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:wp(10);ps();var E=new P({required:!0,emptyAllowed:!1}),te=new P({required:!1,emptyAllowed:!1}),ce=new P({required:!0,emptyAllowed:!0}),Ze=({message:t,name:e,stack:r})=>({message:t,name:e,stack:r}),Fe=(t,e)=>{if("required"in e)return{payload:new ge({value:e}).validate({value:t}).value};let i=new D({options:{required:!0},values:e}).validate(t);if(i)throw new hr(i);return{payload:t}},v=(t,e)=>{try{return Fe(t,e)}catch(r){return{payload:t,error:Ze(r)}}},Ds=(t,e,r,n)=>{let i=`Check the initialState of ${n}`;return qs(t,e,r,i,"Controller initialization error")},Ts=(t,e,r,n)=>{let i=`Check the options of ${n}`;return qs(t,e,r,i,"Controller initialization error")},qs=(t,e,r,n,i)=>{try{return e.validate(r,n)}catch(o){throw t.logger.error(o,i),o}};var fo=()=>te,Ms=()=>E,at=S("configuration/updateBasicConfiguration",t=>v(t,{accessToken:te,organizationId:te,platformUrl:te})),je=S("configuration/updateSearchConfiguration",t=>v(t,{apiBaseUrl:te,pipeline:new P({required:!1,emptyAllowed:!0}),searchHub:te,timezone:te,locale:te,authenticationProviders:new W({required:!1,each:E})})),Ht=S("configuration/updateAnalyticsConfiguration",t=>($r()&&(t.enabled=!1),v(t,{enabled:new L({default:!0}),originContext:fo(),originLevel2:fo(),originLevel3:fo(),apiBaseUrl:te,nextApiBaseUrl:te,runtimeEnvironment:new G,anonymous:new L({default:!1}),deviceId:te,userDisplayName:te,documentLocation:te,trackingId:te,analyticsMode:new P({constrainTo:["legacy","next"],required:!1,default:"legacy"})}))),zt=S("configuration/analytics/disable"),Wt=S("configuration/analytics/enable"),on=S("configuration/analytics/originlevel2",t=>v(t,{originLevel2:Ms()})),an=S("configuration/analytics/originlevel3",t=>v(t,{originLevel3:Ms()}));var Ns={q:new P,enableQuerySyntax:new L,aq:new P,cq:new P,firstResult:new T({min:0}),numberOfResults:new T({min:0}),sortCriteria:new P,f:new D,fExcluded:new D,cf:new D,nf:new D,df:new D,debug:new L,sf:new D,tab:new P,af:new D};var st=S("searchParameters/restore",t=>v(t,Ns));var sn=S("debug/enable"),cn=S("debug/disable");var un=()=>!1;var ln=ee(un(),t=>{t.addCase(sn,()=>!0).addCase(cn,()=>!1).addCase(st,(e,r)=>{var n;return(n=r.payload.debug)!=null?n:e})});var Kt=S("pipeline/set",t=>v(t,new P({required:!0,emptyAllowed:!0})));var Pp=S("history/undo"),Fp=S("history/redo"),ct=S("history/snapshot"),lv=K("history/back",async(t,{dispatch:e})=>{e(Pp()),await e(Se())}),dv=K("history/forward",async(t,{dispatch:e})=>{e(Fp()),await e(Se())}),Se=K("history/change",async(t,{getState:e})=>e().history.present);var Yt=()=>"";var Gt=ee(Yt(),t=>{t.addCase(Kt,(e,r)=>r.payload).addCase(Se.fulfilled,(e,r)=>{var n,i;return(i=(n=r.payload)==null?void 0:n.pipeline)!=null?i:e}).addCase(je,(e,r)=>r.payload.pipeline||e)});function Le(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function m(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function c(l){try{s(n.next(l))}catch(f){a(f)}}function u(l){try{s(n.throw(l))}catch(f){a(f)}}function s(l){l.done?o(l.value):i(l.value).then(c,u)}s((n=n.apply(t,e||[])).next())})}var B;(function(t){t.search="search",t.click="click",t.custom="custom",t.view="view",t.collect="collect"})(B||(B={}));function Ip(){return typeof window!="undefined"}function mo(){return typeof navigator!="undefined"}function Jt(){return typeof document!="undefined"}function go(){try{return typeof localStorage!="undefined"}catch{return!1}}function Ep(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function Vs(){return mo()&&navigator.cookieEnabled}var kp=[B.click,B.custom,B.search,B.view],Op=(t,e)=>kp.indexOf(t)!==-1?Object.assign({language:Jt()?document.documentElement.lang:"unknown",userAgent:mo()?navigator.userAgent:"unknown"},e):e,Zt=class{static set(e,r,n){var i,o,a,c;n&&(o=new Date,o.setTime(o.getTime()+n)),c=window.location.hostname,c.indexOf(".")===-1?js(e,r,o):(a=c.split("."),i=a[a.length-2]+"."+a[a.length-1],js(e,r,o,i))}static get(e){for(var r=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var o=n[i];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(e){Zt.set(e,"",-1)}};function js(t,e,r,n){document.cookie=`${t}=${e}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Dp(){return go()?localStorage:Vs()?new ut:Ep()?sessionStorage:new Xt}var ut=class{getItem(e){return Zt.get(`${ut.prefix}${e}`)}removeItem(e){Zt.erase(`${ut.prefix}${e}`)}setItem(e,r,n){Zt.set(`${ut.prefix}${e}`,r,n)}};ut.prefix="coveo_";var Ls=class{constructor(){this.cookieStorage=new ut}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,r){localStorage.setItem(e,r),this.cookieStorage.setItem(e,r,31556926e3)}},Xt=class{getItem(e){return null}removeItem(e){}setItem(e,r){}},wr="__coveo.analytics.history",Us=20,Bs=1e3*60,_s=75,Pr=class{constructor(e){this.store=e||Dp()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])}addElementAsync(e){return m(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return m(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(wr);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return m(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(wr);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(wr,JSON.stringify(e.slice(0,Us)))}catch{}}clear(){try{this.store.removeItem(wr)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((n,i)=>(i.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,_s)),e}isValidEntry(e){let r=this.getMostRecentElement();return r&&r.value==e.value?(e.internalTime||0)-(r.internalTime||0)>Bs:!0}stripInternalTime(e){return Array.isArray(e)?e.map(r=>{let{name:n,time:i,value:o}=r;return{name:n,time:i,value:o}}):[]}stripEmptyQuery(e){let{name:r,time:n,value:i}=e;return r&&typeof i=="string"&&r.toLowerCase()==="query"&&i.trim()===""?{name:r,time:n}:e}stripEmptyQueries(e){return e.map(r=>this.stripEmptyQuery(r))}},Qs=Object.freeze({__proto__:null,HistoryStore:Pr,MAX_NUMBER_OF_HISTORY_ELEMENTS:Us,MAX_VALUE_SIZE:_s,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Bs,STORE_KEY:wr,default:Pr}),Tp=(t,e)=>m(void 0,void 0,void 0,function*(){return t===B.view?(yield qp(e.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},e)):e}),qp=t=>m(void 0,void 0,void 0,function*(){let e=new Pr,r={name:"PageView",value:t,time:new Date().toISOString()};yield e.addElementAsync(r)}),dn,Mp=new Uint8Array(16);function Np(){if(!dn&&(dn=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dn(Mp)}var Vp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function pn(t){return typeof t=="string"&&Vp.test(t)}var ue=[];for(let t=0;t<256;++t)ue.push((t+256).toString(16).slice(1));function $s(t,e=0){return(ue[t[e+0]]+ue[t[e+1]]+ue[t[e+2]]+ue[t[e+3]]+"-"+ue[t[e+4]]+ue[t[e+5]]+"-"+ue[t[e+6]]+ue[t[e+7]]+"-"+ue[t[e+8]]+ue[t[e+9]]+"-"+ue[t[e+10]]+ue[t[e+11]]+ue[t[e+12]]+ue[t[e+13]]+ue[t[e+14]]+ue[t[e+15]]).toLowerCase()}function jp(t){if(!pn(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Lp(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var Up="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Bp="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function _p(t,e,r){function n(i,o,a,c){var u;if(typeof i=="string"&&(i=Lp(i)),typeof o=="string"&&(o=jp(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+i.length);if(s.set(o),s.set(i,o.length),s=r(s),s[6]=s[6]&15|e,s[8]=s[8]&63|128,a){c=c||0;for(let l=0;l<16;++l)a[c+l]=s[l];return a}return $s(s)}try{n.name=t}catch{}return n.DNS=Up,n.URL=Bp,n}var Qp=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Hs={randomUUID:Qp};function wt(t,e,r){if(Hs.randomUUID&&!e&&!t)return Hs.randomUUID();t=t||{};let n=t.random||(t.rng||Np)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return $s(n)}function $p(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function ho(t,e){return t<<e|t>>>32-e}function Hp(t){let e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){let a=unescape(encodeURIComponent(t));t=[];for(let c=0;c<a.length;++c)t.push(a.charCodeAt(c))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);let n=t.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let a=0;a<i;++a){let c=new Uint32Array(16);for(let u=0;u<16;++u)c[u]=t[a*64+u*4]<<24|t[a*64+u*4+1]<<16|t[a*64+u*4+2]<<8|t[a*64+u*4+3];o[a]=c}o[i-1][14]=(t.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(t.length-1)*8&4294967295;for(let a=0;a<i;++a){let c=new Uint32Array(80);for(let d=0;d<16;++d)c[d]=o[a][d];for(let d=16;d<80;++d)c[d]=ho(c[d-3]^c[d-8]^c[d-14]^c[d-16],1);let u=r[0],s=r[1],l=r[2],f=r[3],h=r[4];for(let d=0;d<80;++d){let g=Math.floor(d/20),y=ho(u,5)+$p(g,s,l,f)+h+e[g]+c[d]>>>0;h=f,f=l,l=ho(s,30)>>>0,s=u,u=y}r[0]=r[0]+u>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+f>>>0,r[4]=r[4]+h>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var zp=_p("v5",80,Hp),zs=zp,Ws="2.28.23",Ks=t=>`${t.protocol}//${t.hostname}${t.pathname.indexOf("/")===0?t.pathname:`/${t.pathname}`}${t.search}`,Fr={pageview:"pageview",event:"event"},yo=class{constructor({client:e,uuidGenerator:r=wt}){this.client=e,this.uuidGenerator=r}},Ys=class extends yo{constructor({client:e,uuidGenerator:r=wt}){super({client:e,uuidGenerator:r});this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=Ks(window.location),this.lastReferrer=Jt()?document.referrer:"",this.addHooks()}getApi(e){switch(e){case"setAction":return this.setAction;default:return null}}setAction(e,r){this.action=e,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,r){return Object.assign({hitType:e},this.getNextValues(e,r))}updateLocationInformation(e,r){this.updateLocationForNextPageView(e,r)}getDefaultContextInformation(e){let r={title:Jt()?document.title:"",encoding:Jt()?document.characterSet:"UTF-8"},n={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},i={language:navigator.language,userAgent:navigator.userAgent},o={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},o),n),i),r)}updateLocationForNextPageView(e,r){let{pageViewId:n,referrer:i,location:o}=this.getNextValues(e,r);this.lastReferrer=i,this.pageViewId=n,this.currentLocation=o,e===Fr.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,r){return{pageViewId:e===Fr.pageview?this.nextPageViewId:this.pageViewId,referrer:e===Fr.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===Fr.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(e){if(e.page){let r=i=>i.replace(/^\/?(.*)$/,"/$1");return`${(i=>i.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(e.page)}`}else return Ks(window.location)}},Ue=class{constructor(e,r){if(!pn(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>Ue.expirationTime}validate(e,r){return!this.expired&&this.matchReferrer(e,r)}matchReferrer(e,r){try{let n=new URL(e);return r.some(i=>new RegExp(i.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(e){let r=e.split(".");if(r.length!==2)return null;let[n,i]=r;if(n.length!==32||isNaN(parseInt(i)))return null;let o=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return pn(o)?new Ue(o,Number.parseInt(i)*1e3):null}};Ue.cvo_cid="cvo_cid";Ue.expirationTime=120;var Gs=class extends yo{constructor({client:e,uuidGenerator:r=wt}){super({client:e,uuidGenerator:r})}getApi(e){switch(e){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(e){return m(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(e),n=yield this.client.getCurrentVisitorId();return r.searchParams.set(Ue.cvo_cid,new Ue(n,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(e){this.client.setAcceptedLinkReferrers(e)}};Gs.Id="link";var Ie=Object.keys;function fn(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}var So={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Wp=Ie(So).map(t=>So[t]),Kp=[...Wp].join("|"),Yp=new RegExp(`^(${Kp}$)`),Gp={svcAction:"svc_action",svcActionData:"svc_action_data"},Jp=t=>Ie(t).filter(e=>t[e]!==void 0).reduce((e,r)=>{let n=So[r]||r;return Object.assign(Object.assign({},e),{[n]:t[r]})},{}),Zp=t=>Yp.test(t),Xp=[Zp],Js={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Zs={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},fe={action:"pa",list:"pal",listSource:"pls"},mn={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},ef=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],vo={id:"quoteId",affiliation:"quoteAffiliation"},bo={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},tf={add:fe,bookmark_add:fe,bookmark_remove:fe,click:fe,checkout:fe,checkout_option:fe,detail:fe,impression:fe,remove:fe,refund:Object.assign(Object.assign({},fe),mn),purchase:Object.assign(Object.assign({},fe),mn),quickview:fe,quote:Object.assign(Object.assign({},fe),vo),review:Object.assign(Object.assign({},fe),bo)},rf=Ie(Js).map(t=>Js[t]),nf=Ie(Zs).map(t=>Zs[t]),of=Ie(fe).map(t=>fe[t]),af=Ie(mn).map(t=>mn[t]),sf=Ie(bo).map(t=>bo[t]),cf=Ie(vo).map(t=>vo[t]),uf=[...rf,"custom"].join("|"),lf=[...nf,"custom"].join("|"),Xs="(pr[0-9]+)",ec="(il[0-9]+pi[0-9]+)",df=new RegExp(`^${Xs}(${uf})$`),pf=new RegExp(`^(${ec}(${lf}))|(il[0-9]+nm)$`),ff=new RegExp(`^(${of.join("|")})$`),mf=new RegExp(`^(${af.join("|")})$`),gf=new RegExp(`^${Xs}custom$`),hf=new RegExp(`^${ec}custom$`),yf=new RegExp(`^(${[...ef,...sf,...cf].join("|")})$`),Sf=t=>df.test(t),vf=t=>pf.test(t),bf=t=>ff.test(t),Af=t=>mf.test(t),Cf=t=>yf.test(t),xf=[vf,Sf,bf,Af,Cf],Rf=[gf,hf],wf={anonymizeIp:"aip"},Pf={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},Ff={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},If=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],Ef=Object.assign(Object.assign(Object.assign(Object.assign({},wf),Pf),Ff),If.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:e}),{})),Ao=Object.assign(Object.assign({},Ef),Gp),kf=t=>{let e=!!t.action&&tf[t.action]||{};return Ie(t).reduce((r,n)=>{let i=e[n]||Ao[n]||n;return Object.assign(Object.assign({},r),{[i]:t[n]})},{})},Of=Ie(Ao).map(t=>Ao[t]),Df=t=>Of.indexOf(t)!==-1,Tf=t=>t==="custom",qf=t=>[...xf,...Xp,Df,Tf].some(e=>e(t)),Mf=t=>Ie(t).reduce((e,r)=>{let n=Nf(r);return n?Object.assign(Object.assign({},e),Vf(n,t[r])):Object.assign(Object.assign({},e),{[r]:t[r]})},{}),Nf=t=>{let e;return[...Rf].every(r=>{var n;return e=(n=r.exec(t))===null||n===void 0?void 0:n[1],!Boolean(e)}),e},Vf=(t,e)=>Ie(e).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${t}${n}`]:e[n]}),{}),tc=class{constructor(e){this.opts=e}sendEvent(e,r){return m(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:i}=this.opts,o=yield this.getQueryParamsForEventType(e),{url:a,payload:c}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${e}?${o}`,r,i),u=this.encodeForEventType(e,c),s=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,s)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,r,n){return m(this,void 0,void 0,function*(){let i=e,o=r;if(n){let a=yield n({url:e,body:JSON.stringify(r)},"analyticsBeacon"),{url:c,body:u}=a;i=c||e;try{o=JSON.parse(u)}catch(s){console.error("Unable to process the request body as a JSON string",s)}}return{payload:o,url:i}})}encodeForEventType(e,r){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(e){return m(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,i=yield n.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(e)?`access_token=${r}`:"",i?`visitorId=${i}`:"","discardVisitInfo=true"].filter(o=>!!o).join("&")})}isEventTypeLegacy(e){return[B.click,B.custom,B.search,B.view].indexOf(e)!==-1}encodeForLegacyType(e,r){return`${e}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter(r=>!!e[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(e[r]))}`).join("&")}encodeValue(e){return typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:JSON.stringify(e)}},rc=class{sendEvent(e,r){return m(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return m(this,void 0,void 0,function*(){return Promise.resolve()})}},nc=window.fetch,Co=class{constructor(e){this.opts=e}sendEvent(e,r){return m(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:i,preprocessRequest:o}=this.opts,a=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",c={url:`${n}/analytics/${e}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},c),o?yield o(c,"analyticsFetch"):{}),{url:s}=u,l=Le(u,["url"]),f=yield nc(s,l);if(f.ok){let h=yield f.json();return h.visitorId&&i.setCurrentVisitorId(h.visitorId),h}else{try{f.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,f,r),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return m(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts,r=`${e}/analytics/visit`;yield nc(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return[B.click,B.custom,B.search,B.view].indexOf(e)!==-1}getVisitorIdParam(){return m(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,r=yield e.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},ic=class{constructor(e,r){go()&&Vs()?this.storage=new Ls:go()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Xt),this.client=new Co(e),this.beaconClient=new tc(e),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:i,payload:o}of n)this.beaconClient.sendEvent(i,o)})}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},oc=class{constructor(e,r){this.storage=r||new Xt,this.client=new Co(e)}getClientDependingOnEventType(e){return this.client}},ac=class{constructor(){this.storage=new Xt,this.client=new rc}getClientDependingOnEventType(e){return this.client}},jf="xx",Lf=t=>(t==null?void 0:t.startsWith(jf))||!1,Uf=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function Bf(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var _f=["1",1,"yes",!0];function Ir(){return mo()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(t=>_f.indexOf(t)!==-1)}var sc="v15",cc={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Qf(t=cc.default,e=sc,r=!1){if(t=t.replace(/\/$/,""),r)return`${t}/${e}`;let n=t.endsWith("/rest")||t.endsWith("/rest/ua");return`${t}${n?"":"/rest"}/${e}`}var $f="38824e1f-37f5-42d3-8372-a4b8fa9df946",he=class{get defaultOptions(){return{endpoint:cc.default,isCustomEndpoint:!1,token:"",version:sc,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Ws}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Tp,Op].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),Ir()&&(this.clear(),this.runtime.storage=new Xt),this.addEventTypeMapping(B.view,{newEventType:B.view,addClientIdParameter:!0}),this.addEventTypeMapping(B.click,{newEventType:B.click,addClientIdParameter:!0}),this.addEventTypeMapping(B.custom,{newEventType:B.custom,addClientIdParameter:!0}),this.addEventTypeMapping(B.search,{newEventType:B.search,addClientIdParameter:!0})}initRuntime(e){return Ip()&&Jt()?new ic(e,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(Bf()&&console.warn(Uf),new oc(e))}get storage(){return this.runtime.storage}determineVisitorId(){return m(this,void 0,void 0,function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||wt()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),wt()}})}getCurrentVisitorId(){return m(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return m(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,r){return m(this,void 0,void 0,function*(){if(pn(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(zs(e,zs(r,$f)))}})}getParameters(e,...r){return m(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...r)})}getPayload(e,...r){return m(this,void 0,void 0,function*(){let n=yield this.resolveParameters(e,...r);return yield this.resolvePayloadForParameters(e,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(wt()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Ir())return null;try{let r=new URL(e).searchParams.get(Ue.cvo_cid);if(r==null)return null;let n=Ue.fromString(r);return!n||!Jt()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(e,...r){return m(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:i=!1,usesMeasurementProtocol:o=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[e]||{};return yield[d=>n.length>0?this.parseVariableArgumentsPayload(n,d):d[0],d=>m(this,void 0,void 0,function*(){return Object.assign(Object.assign({},d),{visitorId:i?yield this.getCurrentVisitorId():""})}),d=>m(this,void 0,void 0,function*(){return a?Object.assign(Object.assign({},d),{clientId:yield this.getCurrentVisitorId()}):d}),d=>o?this.ensureAnonymousUserWhenUsingApiKey(d):d,d=>this.beforeSendHooks.reduce((g,y)=>m(this,void 0,void 0,function*(){let b=yield g;return yield y(e,b)}),d)].reduce((d,g)=>m(this,void 0,void 0,function*(){let y=yield d;return yield g(y)}),Promise.resolve(r))})}resolvePayloadForParameters(e,r){return m(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[e]||{};return yield[f=>this.setTrackingIdIfTrackingIdNotPresent(f),f=>this.removeEmptyPayloadValues(f,e),f=>this.validateParams(f,e),f=>n?kf(f):f,f=>n?this.removeUnknownParameters(f):f,f=>n?this.processCustomParameters(f):this.mapCustomParametersToCustomData(f)].reduce((f,h)=>m(this,void 0,void 0,function*(){let d=yield f;return yield h(d)}),Promise.resolve(r))})}makeEvent(e,...r){return m(this,void 0,void 0,function*(){let{newEventType:n=e}=this.eventTypeMapping[e]||{},i=yield this.resolveParameters(e,...r),o=yield this.resolvePayloadForParameters(e,i);return{eventType:n,payload:o,log:a=>m(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},o),a)}),yield Promise.all(this.afterSendHooks.map(c=>c(e,Object.assign(Object.assign({},i),a)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e,...r){return m(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...r)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return m(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:r,payload:n}=e;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new Pr().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return m(this,void 0,void 0,function*(){return this.makeEvent(B.search,e)})}sendSearchEvent(e){var{searchQueryUid:r}=e,n=Le(e,["searchQueryUid"]);return m(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(e){return m(this,void 0,void 0,function*(){return this.makeEvent(B.click,e)})}sendClickEvent(e){var{searchQueryUid:r}=e,n=Le(e,["searchQueryUid"]);return m(this,void 0,void 0,function*(){return(yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(e){return m(this,void 0,void 0,function*(){return this.makeEvent(B.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:r}=e,n=Le(e,["lastSearchQueryUid"]);return m(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(e){return m(this,void 0,void 0,function*(){return this.makeEvent(B.view,e)})}sendViewEvent(e){return m(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return m(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return m(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,r){this.eventTypeMapping[e]=r}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(r=>typeof r=="string"))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,r){let n={};for(let i=0,o=r.length;i<o;i++){let a=r[i];if(typeof a=="string")n[e[i]]=a;else if(typeof a=="object")return Object.assign(Object.assign({},n),a)}return n}isKeyAllowedEmpty(e,r){return({[B.search]:["queryText"]}[e]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(e,r){let n=i=>typeof i!="undefined"&&i!==null&&i!=="";return Object.keys(e).filter(i=>this.isKeyAllowedEmpty(r,i)||n(e[i])).reduce((i,o)=>Object.assign(Object.assign({},i),{[o]:e[o]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(n=>{if(qf(n))return!0;console.log(n,"is not processed by coveoua")}).reduce((n,i)=>Object.assign(Object.assign({},n),{[i]:e[i]}),{})}processCustomParameters(e){let{custom:r}=e,n=Le(e,["custom"]),i={};r&&fn(r)&&(i=this.lowercaseKeys(r));let o=Mf(n);return Object.assign(Object.assign({},i),o)}mapCustomParametersToCustomData(e){let{custom:r}=e,n=Le(e,["custom"]);if(r&&fn(r)){let i=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},i),e.customData)})}else return e}lowercaseKeys(e){let r=Object.keys(e),n={};return r.forEach(i=>{n[i.toLowerCase()]=e[i]}),n}validateParams(e,r){let{anonymizeIp:n}=e,i=Le(e,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(i.anonymizeIp=1),(r==B.view||r==B.click||r==B.search||r==B.custom)&&(i.originLevel3=this.limit(i.originLevel3,128)),r==B.view&&(i.location=this.limit(i.location,128)),(r=="pageview"||r=="event")&&(i.referrer=this.limit(i.referrer,2048),i.location=this.limit(i.location,2048),i.page=this.limit(i.page,2048)),i}ensureAnonymousUserWhenUsingApiKey(e){let{userId:r}=e,n=Le(e,["userId"]);return Lf(this.options.token)&&!r?(n.userId="anonymous",n):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:r}=e,n=Le(e,["trackingId"]);return r?e:(n.hasOwnProperty("custom")&&fn(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&fn(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(e,r){return typeof e!="string"?e:e.substring(0,r)}get baseUrl(){return Qf(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},le;(function(t){t.contextChanged="contextChanged",t.expandToFullUI="expandToFullUI",t.openUserActions="openUserActions",t.showPrecedingSessions="showPrecedingSessions",t.showFollowingSessions="showFollowingSessions",t.clickViewedDocument="clickViewedDocument",t.clickPageView="clickPageView",t.createArticle="createArticle"})(le||(le={}));var p;(function(t){t.interfaceLoad="interfaceLoad",t.interfaceChange="interfaceChange",t.didyoumeanAutomatic="didyoumeanAutomatic",t.didyoumeanClick="didyoumeanClick",t.resultsSort="resultsSort",t.searchboxSubmit="searchboxSubmit",t.searchboxClear="searchboxClear",t.searchboxAsYouType="searchboxAsYouType",t.breadcrumbFacet="breadcrumbFacet",t.breadcrumbResetAll="breadcrumbResetAll",t.documentQuickview="documentQuickview",t.documentOpen="documentOpen",t.omniboxAnalytics="omniboxAnalytics",t.omniboxFromLink="omniboxFromLink",t.searchFromLink="searchFromLink",t.triggerNotify="notify",t.triggerExecute="execute",t.triggerQuery="query",t.undoTriggerQuery="undoQuery",t.triggerRedirect="redirect",t.pagerResize="pagerResize",t.pagerNumber="pagerNumber",t.pagerNext="pagerNext",t.pagerPrevious="pagerPrevious",t.pagerScrolling="pagerScrolling",t.staticFilterClearAll="staticFilterClearAll",t.staticFilterSelect="staticFilterSelect",t.staticFilterDeselect="staticFilterDeselect",t.facetClearAll="facetClearAll",t.facetSearch="facetSearch",t.facetSelect="facetSelect",t.facetSelectAll="facetSelectAll",t.facetDeselect="facetDeselect",t.facetExclude="facetExclude",t.facetUnexclude="facetUnexclude",t.facetUpdateSort="facetUpdateSort",t.facetShowMore="showMoreFacetResults",t.facetShowLess="showLessFacetResults",t.queryError="query",t.queryErrorBack="errorBack",t.queryErrorClear="errorClearQuery",t.queryErrorRetry="errorRetry",t.recommendation="recommendation",t.recommendationInterfaceLoad="recommendationInterfaceLoad",t.recommendationOpen="recommendationOpen",t.likeSmartSnippet="likeSmartSnippet",t.dislikeSmartSnippet="dislikeSmartSnippet",t.expandSmartSnippet="expandSmartSnippet",t.collapseSmartSnippet="collapseSmartSnippet",t.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",t.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",t.sendSmartSnippetReason="sendSmartSnippetReason",t.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",t.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",t.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",t.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",t.openSmartSnippetSource="openSmartSnippetSource",t.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",t.openSmartSnippetInlineLink="openSmartSnippetInlineLink",t.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",t.recentQueryClick="recentQueriesClick",t.clearRecentQueries="clearRecentQueries",t.recentResultClick="recentResultClick",t.clearRecentResults="clearRecentResults",t.noResultsBack="noResultsBack",t.showMoreFoldedResults="showMoreFoldedResults",t.showLessFoldedResults="showLessFoldedResults",t.copyToClipboard="copyToClipboard",t.caseSendEmail="Case.SendEmail",t.feedItemTextPost="FeedItem.TextPost",t.caseAttach="caseAttach",t.caseDetach="caseDetach",t.retryGeneratedAnswer="retryGeneratedAnswer",t.likeGeneratedAnswer="likeGeneratedAnswer",t.dislikeGeneratedAnswer="dislikeGeneratedAnswer",t.openGeneratedAnswerSource="openGeneratedAnswerSource",t.generatedAnswerStreamEnd="generatedAnswerStreamEnd",t.generatedAnswerSourceHover="generatedAnswerSourceHover",t.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",t.generatedAnswerHideAnswers="generatedAnswerHideAnswers",t.generatedAnswerShowAnswers="generatedAnswerShowAnswers",t.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",t.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(p||(p={}));var xo={[p.triggerNotify]:"queryPipelineTriggers",[p.triggerExecute]:"queryPipelineTriggers",[p.triggerQuery]:"queryPipelineTriggers",[p.triggerRedirect]:"queryPipelineTriggers",[p.queryError]:"errors",[p.queryErrorBack]:"errors",[p.queryErrorClear]:"errors",[p.queryErrorRetry]:"errors",[p.pagerNext]:"getMoreResults",[p.pagerPrevious]:"getMoreResults",[p.pagerNumber]:"getMoreResults",[p.pagerResize]:"getMoreResults",[p.pagerScrolling]:"getMoreResults",[p.facetSearch]:"facet",[p.facetShowLess]:"facet",[p.facetShowMore]:"facet",[p.recommendation]:"recommendation",[p.likeSmartSnippet]:"smartSnippet",[p.dislikeSmartSnippet]:"smartSnippet",[p.expandSmartSnippet]:"smartSnippet",[p.collapseSmartSnippet]:"smartSnippet",[p.openSmartSnippetFeedbackModal]:"smartSnippet",[p.closeSmartSnippetFeedbackModal]:"smartSnippet",[p.sendSmartSnippetReason]:"smartSnippet",[p.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[p.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[p.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[p.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[p.clearRecentQueries]:"recentQueries",[p.recentResultClick]:"recentlyClickedDocuments",[p.clearRecentResults]:"recentlyClickedDocuments",[p.showLessFoldedResults]:"folding",[p.caseDetach]:"case",[p.likeGeneratedAnswer]:"generatedAnswer",[p.dislikeGeneratedAnswer]:"generatedAnswer",[p.openGeneratedAnswerSource]:"generatedAnswer",[p.generatedAnswerStreamEnd]:"generatedAnswer",[p.generatedAnswerSourceHover]:"generatedAnswer",[p.generatedAnswerCopyToClipboard]:"generatedAnswer",[p.generatedAnswerHideAnswers]:"generatedAnswer",[p.generatedAnswerShowAnswers]:"generatedAnswer",[p.generatedAnswerFeedbackSubmit]:"generatedAnswer",[le.expandToFullUI]:"interface",[le.openUserActions]:"User Actions",[le.showPrecedingSessions]:"User Actions",[le.showFollowingSessions]:"User Actions",[le.clickViewedDocument]:"User Actions",[le.clickPageView]:"User Actions",[le.createArticle]:"createArticle"},Pt=class{constructor(){this.runtime=new ac,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(B.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(B.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(B.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(B.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Ws}};function Hf(t){let e="";return t.filter(r=>{let n=r!==e;return e=r,n})}function zf(t){return t.map(e=>e.replace(/;/g,""))}function uc(t){let e=256,r=t.join(";");return r.length<=e?r:uc(t.slice(1))}var lc=t=>{let e=zf(t),r=Hf(e);return uc(r)};function dc(t){let e=typeof t.partialQueries=="string"?t.partialQueries:lc(t.partialQueries),r=typeof t.suggestions=="string"?t.suggestions:lc(t.suggestions);return Object.assign(Object.assign({},t),{partialQueries:e,suggestions:r})}var Ft=class{constructor(e,r){this.opts=e,this.provider=r;let n=e.enableAnalytics===!1||Ir();this.coveoAnalyticsClient=n?new Pt:new he(e)}disable(){this.coveoAnalyticsClient instanceof he&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Pt}enable(){this.coveoAnalyticsClient=new he(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(p.interfaceLoad)}logInterfaceLoad(){return m(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(p.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return m(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(p.recommendation)}logRecommendation(){return m(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,r){return this.makeClickEvent(p.recommendationOpen,e,r)}logRecommendationOpen(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(p.staticFilterClearAll,e)}logStaticFilterClearAll(e){return m(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(p.staticFilterSelect,e)}logStaticFilterSelect(e){return m(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(p.staticFilterDeselect,e)}logStaticFilterDeselect(e){return m(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(p.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return m(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(p.interfaceChange,e)}logInterfaceChange(e){return m(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(p.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return m(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(p.didyoumeanClick)}logDidYouMeanClick(){return m(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(p.resultsSort,e)}logResultsSort(e){return m(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(p.searchboxSubmit)}logSearchboxSubmit(){return m(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(p.searchboxClear)}logSearchboxClear(){return m(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(p.searchboxAsYouType)}logSearchboxAsYouType(){return m(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(p.breadcrumbFacet,e)}logBreadcrumbFacet(e){return m(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(p.breadcrumbResetAll)}logBreadcrumbResetAll(){return m(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,r){return this.makeClickEvent(p.documentQuickview,e,r)}logDocumentQuickview(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,r){return this.makeClickEvent(p.documentOpen,e,r)}logDocumentOpen(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(p.omniboxAnalytics,dc(e))}logOmniboxAnalytics(e){return m(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(p.omniboxFromLink,dc(e))}logOmniboxFromLink(e){return m(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(p.searchFromLink)}logSearchFromLink(){return m(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(p.triggerNotify,e)}logTriggerNotify(e){return m(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(p.triggerExecute,e)}logTriggerExecute(e){return m(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(p.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return m(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(p.undoTriggerQuery,e)}logUndoTriggerQuery(e){return m(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(p.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return m(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(p.pagerResize,e)}logPagerResize(e){return m(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(p.pagerNumber,e)}logPagerNumber(e){return m(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(p.pagerNext,e)}logPagerNext(e){return m(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(p.pagerPrevious,e)}logPagerPrevious(e){return m(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(p.pagerScrolling)}logPagerScrolling(){return m(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(p.facetClearAll,e)}logFacetClearAll(e){return m(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(p.facetSearch,e)}logFacetSearch(e){return m(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(p.facetSelect,e)}logFacetSelect(e){return m(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(p.facetDeselect,e)}logFacetDeselect(e){return m(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(p.facetExclude,e)}logFacetExclude(e){return m(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(p.facetUnexclude,e)}logFacetUnexclude(e){return m(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(p.facetSelectAll,e)}logFacetSelectAll(e){return m(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(p.facetUpdateSort,e)}logFacetUpdateSort(e){return m(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(p.facetShowMore,e)}logFacetShowMore(e){return m(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(p.facetShowLess,e)}logFacetShowLess(e){return m(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(p.queryError,e)}logQueryError(e){return m(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return m(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(p.queryErrorBack);return{description:e.description,log:()=>m(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(p.queryErrorBack)})}})}logQueryErrorBack(){return m(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return m(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(p.queryErrorRetry);return{description:e.description,log:()=>m(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(p.queryErrorRetry)})}})}logQueryErrorRetry(){return m(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return m(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(p.queryErrorClear);return{description:e.description,log:()=>m(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(p.queryErrorClear)})}})}logQueryErrorClear(){return m(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(p.likeSmartSnippet)}logLikeSmartSnippet(){return m(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(p.dislikeSmartSnippet)}logDislikeSmartSnippet(){return m(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(p.expandSmartSnippet)}logExpandSmartSnippet(){return m(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(p.collapseSmartSnippet)}logCollapseSmartSnippet(){return m(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(p.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return m(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(p.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return m(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,r){return this.makeCustomEvent(p.sendSmartSnippetReason,{reason:e,details:r})}logSmartSnippetFeedbackReason(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(p.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return m(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(p.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return m(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(p.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return m(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(p.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return m(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,r){return this.makeClickEvent(p.openSmartSnippetSource,e,r)}logOpenSmartSnippetSource(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,r){return this.makeClickEvent(p.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(e,r){return this.makeClickEvent(p.copyToClipboard,e,r)}logCopyToClipboard(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,r){return this.makeClickEvent(p.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,r){return this.makeClickEvent(p.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(p.recentQueryClick)}logRecentQueryClick(){return m(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(p.clearRecentQueries)}logClearRecentQueries(){return m(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,r){return this.makeCustomEvent(p.recentResultClick,{info:e,identifier:r})}logRecentResultClick(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(p.clearRecentResults)}logClearRecentResults(){return m(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(p.noResultsBack)}logNoResultsBack(){return m(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,r){return this.makeClickEvent(p.showMoreFoldedResults,e,r)}logShowMoreFoldedResults(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(p.showLessFoldedResults)}logShowLessFoldedResults(){return m(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,r){var n;return{actionCause:r,customData:(n=e.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(e,r,n=xo[e]){return m(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let i=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(i)),{eventType:n,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(a,e),log:({searchUID:c})=>a.log({lastSearchQueryUid:c})}})}logCustomEvent(e,r,n=xo[e]){return m(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,r,n)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,r,n){return m(this,void 0,void 0,function*(){let i=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(i)),{eventType:r,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(a,e),log:({searchUID:c})=>a.log({lastSearchQueryUid:c})}})}logCustomEventWithType(e,r,n){return m(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,r){return m(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,r){return m(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(e,r),i=yield this.coveoAnalyticsClient.makeSearchEvent(n);return{description:this.makeEventDescription(i,e),log:({searchUID:o})=>i.log({searchQueryUid:o})}})}makeClickEvent(e,r,n,i){return m(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),i))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),a=yield this.coveoAnalyticsClient.makeClickEvent(o);return{description:this.makeEventDescription(a,e),log:({searchUID:c})=>a.log({searchQueryUid:c})}})}logClickEvent(e,r,n,i){return m(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,r,n,i)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var n,i;return m(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(i=(n=this.provider).getGeneratedAnswerMetadata)===null||i===void 0?void 0:i.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return m(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof he?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(p.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return m(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(p.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return m(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(p.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return m(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(p.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return m(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(p.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return m(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(p.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return m(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(p.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return m(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(p.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return m(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(p.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return m(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(p.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return m(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(p.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return m(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}},gn=Object.assign({},Fr),pc=Object.keys(gn).map(t=>gn[t]),Er=class extends Ys{constructor({client:e,uuidGenerator:r=wt}){super({client:e,uuidGenerator:r});this.ticket={}}getApi(e){let r=super.getApi(e);if(r!==null)return r;switch(e){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((e,...[r])=>pc.indexOf(e)!==-1?this.addSVCDataToPayload(e,r):r),this.client.registerAfterSendEventHook((e,...[r])=>(pc.indexOf(e)!==-1&&this.updateLocationInformation(e,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(gn.pageview,{newEventType:B.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(gn.event,{newEventType:B.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,r){var n;let i=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,r)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys((n=this.actionData)!==null&&n!==void 0?n:{}).length>0?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},o),i),r)}getTicketPayload(){return Jp(this.ticket)}};Er.Id="svc";var hn;(function(t){t.click="click",t.flowStart="flowStart"})(hn||(hn={}));var De;(function(t){t.enterInterface="ticket_create_start",t.fieldUpdate="ticket_field_update",t.fieldSuggestionClick="ticket_classification_click",t.suggestionClick="suggestion_click",t.suggestionRate="suggestion_rate",t.nextCaseStep="ticket_next_stage",t.caseCancelled="ticket_cancel",t.caseSolved="ticket_cancel",t.caseCreated="ticket_create"})(De||(De={}));var yn;(function(t){t.quit="Quit",t.solved="Solved"})(yn||(yn={}));var Ro=class{constructor(e,r){var n;this.options=e,this.provider=r;let i=((n=e.enableAnalytics)!==null&&n!==void 0?n:!0)&&!Ir();this.coveoAnalyticsClient=i?new he(e):new Pt,this.svc=new Er({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof he&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Pt,this.svc=new Er({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new he(this.options),this.svc=new Er({client:this.coveoAnalyticsClient})}logEnterInterface(e){return this.svc.setAction(De.enterInterface),this.svc.setTicket(e.ticket),this.sendFlowStartEvent()}logUpdateCaseField(e){return this.svc.setAction(De.fieldUpdate,{fieldName:e.fieldName}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectFieldSuggestion(e){return this.svc.setAction(De.fieldSuggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(e){return this.svc.setAction(De.suggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logRateDocumentSuggestion(e){return this.svc.setAction(De.suggestionRate,Object.assign({rate:e.rating},e.suggestion)),this.svc.setTicket(e.ticket),this.sendClickEvent()}logMoveToNextCaseStep(e){return this.svc.setAction(De.nextCaseStep,{stage:e==null?void 0:e.stage}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCancelled(e){return this.svc.setAction(De.caseCancelled,{reason:yn.quit}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseSolved(e){return this.svc.setAction(De.caseSolved,{reason:yn.solved}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCreated(e){return this.svc.setAction(De.caseCreated),this.svc.setTicket(e.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",hn.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",hn.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},Wf=t=>{let e={};return t.caseContext&&Object.keys(t.caseContext).forEach(r=>{var n;let i=(n=t.caseContext)===null||n===void 0?void 0:n[r];if(i){let o=`context_${r}`;e[o]=i}}),e},k=(t,e=!0)=>{let{caseContext:r,caseId:n,caseNumber:i}=t,o=Le(t,["caseContext","caseId","caseNumber"]),a=Wf(t);return Object.assign(Object.assign(Object.assign({CaseId:n,CaseNumber:i},o),!!a.context_Case_Subject&&{CaseSubject:a.context_Case_Subject}),e&&a)},wo=class{constructor(e,r){this.opts=e,this.provider=r;let n=e.enableAnalytics===!1||Ir();this.coveoAnalyticsClient=n?new Pt:new he(e)}disable(){this.coveoAnalyticsClient instanceof he&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Pt}enable(){this.coveoAnalyticsClient=new he(this.opts)}logInterfaceLoad(e){if(e){let r=k(e);return this.logSearchEvent(p.interfaceLoad,r)}return this.logSearchEvent(p.interfaceLoad)}logInterfaceChange(e){let r=k(e);return this.logSearchEvent(p.interfaceChange,r)}logStaticFilterDeselect(e){let r=k(e);return this.logSearchEvent(p.staticFilterDeselect,r)}logFetchMoreResults(e){if(e){let r=k(e);return this.logCustomEvent(p.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(p.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(e){let r=k(e);return this.logSearchEvent(p.breadcrumbFacet,r)}logBreadcrumbResetAll(e){if(e){let r=k(e);return this.logSearchEvent(p.breadcrumbResetAll,r)}return this.logSearchEvent(p.breadcrumbResetAll)}logFacetSelect(e){let r=k(e);return this.logSearchEvent(p.facetSelect,r)}logFacetExclude(e){let r=k(e);return this.logSearchEvent(p.facetExclude,r)}logFacetDeselect(e){let r=k(e);return this.logSearchEvent(p.facetDeselect,r)}logFacetUpdateSort(e){let r=k(e);return this.logSearchEvent(p.facetUpdateSort,r)}logFacetClearAll(e){let r=k(e);return this.logSearchEvent(p.facetClearAll,r)}logFacetShowMore(e){let r=k(e,!1);return this.logCustomEvent(p.facetShowMore,r)}logFacetShowLess(e){let r=k(e,!1);return this.logCustomEvent(p.facetShowLess,r)}logQueryError(e){let r=k(e,!1);return this.logCustomEvent(p.queryError,r)}logPagerNumber(e){let r=k(e,!1);return this.logCustomEvent(p.pagerNumber,r)}logPagerNext(e){let r=k(e,!1);return this.logCustomEvent(p.pagerNext,r)}logPagerPrevious(e){let r=k(e,!1);return this.logCustomEvent(p.pagerPrevious,r)}logDidYouMeanAutomatic(e){if(e){let r=k(e);return this.logSearchEvent(p.didyoumeanAutomatic,r)}return this.logSearchEvent(p.didyoumeanAutomatic)}logDidYouMeanClick(e){if(e){let r=k(e);return this.logSearchEvent(p.didyoumeanClick,r)}return this.logSearchEvent(p.didyoumeanClick)}logResultsSort(e){let r=k(e);return this.logSearchEvent(p.resultsSort,r)}logSearchboxSubmit(e){if(e){let r=k(e);return this.logSearchEvent(p.searchboxSubmit,r)}return this.logSearchEvent(p.searchboxSubmit)}logContextChanged(e){let r=k(e);return this.logSearchEvent(le.contextChanged,r)}logExpandToFullUI(e){let r=k(e);return this.logCustomEvent(le.expandToFullUI,r)}logOpenUserActions(e){let r=k(e,!1);return this.logCustomEvent(le.openUserActions,r)}logShowPrecedingSessions(e){let r=k(e,!1);return this.logCustomEvent(le.showPrecedingSessions,r)}logShowFollowingSessions(e){let r=k(e,!1);return this.logCustomEvent(le.showFollowingSessions,r)}logViewedDocumentClick(e,r){return this.logCustomEvent(le.clickViewedDocument,Object.assign(Object.assign({},k(r,!1)),{document:e}))}logPageViewClick(e,r){return this.logCustomEvent(le.clickPageView,Object.assign(Object.assign({},k(r,!1)),{pageView:e}))}logCreateArticle(e,r){return this.logCustomEvent(le.createArticle,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logDocumentOpen(e,r,n){return this.logClickEvent(p.documentOpen,e,r,n?k(n,!1):void 0)}logCopyToClipboard(e,r,n){return this.logClickEvent(p.copyToClipboard,e,r,n?k(n,!1):void 0)}logCaseSendEmail(e,r,n){return this.logClickEvent(p.caseSendEmail,e,r,n?k(n,!1):void 0)}logFeedItemTextPost(e,r,n){return this.logClickEvent(p.feedItemTextPost,e,r,n?k(n,!1):void 0)}logDocumentQuickview(e,r,n){let i={documentTitle:e.documentTitle,documentURL:e.documentUrl};return this.logClickEvent(p.documentQuickview,e,r,n?Object.assign(Object.assign({},k(n,!1)),i):i)}logCaseAttach(e,r,n){let i={documentTitle:e.documentTitle,documentURL:e.documentUrl,resultUriHash:e.documentUriHash};return this.logClickEvent(p.caseAttach,e,r,n?Object.assign(Object.assign({},k(n,!1)),i):i)}logCaseDetach(e,r){return this.logCustomEvent(p.caseDetach,r?Object.assign(Object.assign({},k(r,!1)),{resultUriHash:e}):{resultUriHash:e})}logLikeSmartSnippet(e){return this.logCustomEvent(p.likeSmartSnippet,e?k(e,!1):void 0)}logDislikeSmartSnippet(e){return this.logCustomEvent(p.dislikeSmartSnippet,e?k(e,!1):void 0)}logExpandSmartSnippet(e){return this.logCustomEvent(p.expandSmartSnippet,e?k(e,!1):void 0)}logCollapseSmartSnippet(e){return this.logCustomEvent(p.collapseSmartSnippet,e?k(e,!1):void 0)}logOpenSmartSnippetFeedbackModal(e){return this.logCustomEvent(p.openSmartSnippetFeedbackModal,e?k(e,!1):void 0)}logCloseSmartSnippetFeedbackModal(e){return this.logCustomEvent(p.closeSmartSnippetFeedbackModal,e?k(e,!1):void 0)}logSmartSnippetFeedbackReason(e,r,n){return this.logCustomEvent(p.sendSmartSnippetReason,n?Object.assign(Object.assign({},k(n,!1)),{reason:e,details:r}):{reason:e,details:r})}logExpandSmartSnippetSuggestion(e,r){let n="documentId"in e?e:{documentId:e};return this.logCustomEvent(p.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},k(r,!1)),n):n)}logCollapseSmartSnippetSuggestion(e,r){let n="documentId"in e?e:{documentId:e};return this.logCustomEvent(p.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},k(r,!1)),n):n)}logOpenSmartSnippetSource(e,r,n){return this.logClickEvent(p.openSmartSnippetSource,e,r,n?k(n,!1):void 0)}logOpenSmartSnippetSuggestionSource(e,r,n){return this.logClickEvent(p.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},n?Object.assign(Object.assign({},k(n,!1)),r):r)}logOpenSmartSnippetInlineLink(e,r,n){return this.logClickEvent(p.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},n?Object.assign(Object.assign({},k(n,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(e,r,n){return this.logClickEvent(p.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},n?Object.assign(Object.assign({},k(n,!1)),r):r)}logLikeGeneratedAnswer(e,r){return this.logCustomEvent(p.likeGeneratedAnswer,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logDislikeGeneratedAnswer(e,r){return this.logCustomEvent(p.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logOpenGeneratedAnswerSource(e,r){return this.logCustomEvent(p.openGeneratedAnswerSource,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logGeneratedAnswerSourceHover(e,r){return this.logCustomEvent(p.generatedAnswerSourceHover,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logGeneratedAnswerCopyToClipboard(e,r){return this.logCustomEvent(p.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logGeneratedAnswerHideAnswers(e,r){return this.logCustomEvent(p.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logGeneratedAnswerShowAnswers(e,r){return this.logCustomEvent(p.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logGeneratedAnswerFeedbackSubmit(e,r){return this.logCustomEvent(p.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logRephraseGeneratedAnswer(e,r){return this.logSearchEvent(p.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logRetryGeneratedAnswer(e){return this.logSearchEvent(p.retryGeneratedAnswer,e?Object.assign({},k(e,!1)):{})}logGeneratedAnswerStreamEnd(e,r){return this.logCustomEvent(p.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},k(r,!1)),e):e)}logCustomEvent(e,r){return m(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(n)),{eventType:xo[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(i)})}logSearchEvent(e,r){return m(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,r))})}logClickEvent(e,r,n,i){return m(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),i))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(o)})}logShowMoreFoldedResults(e,r,n){return m(this,void 0,void 0,function*(){return this.logClickEvent(p.showMoreFoldedResults,e,r,n?k(n,!1):void 0)})}logShowLessFoldedResults(e){return m(this,void 0,void 0,function*(){return this.logCustomEvent(p.showLessFoldedResults,e?k(e,!1):void 0)})}getBaseCustomEventRequest(e){return m(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var n,i;return m(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(i=(n=this.provider).getGeneratedAnswerMetadata)===null||i===void 0?void 0:i.call(n)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return m(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof he?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};var lt=t=>new he(t).getCurrentVisitorId(),Po=t=>{let e=new he(t);e.clear(),e.deleteHttpOnlyVisitorId()},Be=new Qs.HistoryStore,_e=(t,e)=>typeof e=="function"?(...r)=>{let n=yr(r[0]);try{return e.apply(e,r)}catch(i){return t.error(i,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,Qe=(t,e)=>(...r)=>{let n=yr(r[1]);try{return e.apply(e,r)}catch(i){return t.error(i,"Error in analytics hook. Returning original request."),n}};async function Kf({config:t,environment:e,event:r,listenerManager:n}){let{url:i,token:o,mode:a}=t;a!=="disabled"&&(n.call(r),e.send(i,o,r))}var Yf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Gf(t){return typeof t=="string"&&Yf.test(t)}function Jf(t){let e="visitorId";return{getClientId:()=>{let r=t.get(),n=r.storage,i=n.getItem(e),o=i&&Gf(i)?i:r.generateUUID();return n.setItem(e,o),o},clear:()=>{t.get().storage.removeItem(e)}}}var fc="0.6.8";function Zf(t){let{trackingId:e}=t;return{trackingId:e}}function Xf(){return`relay@${fc}`}function mc(t,e,r,n){let{getReferrer:i,getLocation:o,getUserAgent:a}=r,c=Zf(e),u=n.getClientId();return Object.freeze({type:t,config:c,ts:Date.now(),source:Xf(),clientId:u,userAgent:a(),referrer:i(),location:o()})}function em(t,e,r,n,i){return{...e,meta:mc(t,r,n,i)}}var tm="*";function rm(){let t=[];function e({type:u,callback:s}){return t.findIndex(l=>l.type===u&&l.callback===s)}function r(u,s){return u.type==="*"||s===u.type}function n(u){return e(u)<0&&t.push(u),()=>c(u.type,u.callback)}function i(u){t.forEach(s=>{if(r(s,u.meta.type))try{s.callback(u)}catch(l){console.error(l)}})}function o(u){if(u===tm)t.length=0;else for(let s=t.length-1;s>=0;s--)t[s].type===u&&t.splice(s,1)}function a(u){let s=e(u);s>=0&&t.splice(s,1)}function c(u,s){s?a({type:u,callback:s}):o(u)}return{add:n,call:i,remove:c}}function gc({url:t,token:e,trackingId:r,...n}){return Object.freeze({url:t,token:e,trackingId:r,...!!n.mode&&{mode:n.mode}})}function nm(t){let e=gc(t);return{get:()=>e,update:r=>{e=gc({...e,...r})}}}function im(){let t=typeof window!="undefined";return{sendMessage(e){t&&window.postMessage(e,"*")}}}var Fo=om();function om(){let t="coveo_",e=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${t}${r}=`,i=document.cookie.split(";");for(let o of i){let a=o.replace(/^\s+/,"");if(a.lastIndexOf(n,0)===0)return a.substring(n.length,a.length)}return null},setItem(r,n,i){let o=e(window.location.hostname),a=`;expires=${new Date(new Date().getTime()+i).toUTCString()}`,c=o?`;domain=${o}`:"";document.cookie=`${t}${r}=${n}${a}${c};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function am(){return{getItem(t){return Fo.getItem(t)||localStorage.getItem(t)},removeItem(t){Fo.removeItem(t),localStorage.removeItem(t)},setItem(t,e){let r=31556952e3;localStorage.setItem(t,e),Fo.setItem(t,e,r)}}}async function Io(t,e){return fetch(t,e).catch(r=>{throw new Error(`${r.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:r})})}function sm(){let t=document.referrer;return t===""?null:t}function cm(){return{runtime:"browser",fetch:(t,e)=>Io(t,e),send:async(t,e,r)=>{let n=navigator.sendBeacon(`${t}?access_token=${e}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(im().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:t,token:e}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>sm(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:am()}}function hc(){return{getItem(){return null},removeItem(){},setItem(){}}}function um(){return{runtime:"node",fetch:(t,e)=>Io(t,e),send:async(t,e,r)=>{let n={"Content-Type":"application/json",Authorization:`Bearer ${e}`};Io(t,{method:"POST",body:JSON.stringify([r]),headers:n})},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:hc()}}function lm(){return dm()?cm():um()}function dm(){try{return typeof window=="object"}catch{return!1}}function pm(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:hc()}}function fm(t){return t.get().mode=="disabled"?pm():lm()}function mm(t){return{get:()=>Object.freeze(fm(t))}}function yc(t){let e=nm(t),r=rm(),n=mm(e),i=Jf(n);return{emit:(o,a)=>{let c=e.get(),u=n.get(),s=em(o,a,c,u,i);return Kf({config:c,environment:u,event:s,listenerManager:r})},getMeta:o=>mc(o,e.get(),n.get(),i),on:(o,a)=>r.add({type:o,callback:a}),off:(o,a)=>r.remove(o,a),updateConfig:o=>e.update(o),version:fc,clearStorage:()=>{i.clear()}}}var Sc=1,vc=10,Sn=5,bc=1,vn=8;function bn(){return{desiredCount:Sn,numberOfValues:vn,set:{}}}function Ac(t){let{activeValue:e,ancestryMap:r}=gm(t);return e?hm(e,r):[]}function gm(t){let e=[...t],r=new Map;for(;e.length>0;){let n=e.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let i of n.children)r.set(i,n);e.unshift(...n.children)}return{}}function hm(t,e){let r=[];if(!t)return[];let n=t;do r.unshift(n),n=e.get(n);while(n);return r}var ym=(t,e)=>{var r;return(r=t.categoryFacetSet[e])==null?void 0:r.request};var Eo=(t,e)=>{var n;let r=ym(t,e);return Ac((n=r==null?void 0:r.currentValues)!=null?n:[])};function An(){return{}}function Cn(){return{}}function xn(){return{}}function Rn(){return{}}function wn(t){var e,r,n,i,o;return{facetSet:(e=t.facetSet)!=null?e:Rn(),categoryFacetSet:(r=t.categoryFacetSet)!=null?r:An(),dateFacetSet:(n=t.dateFacetSet)!=null?n:Cn(),numericFacetSet:(i=t.numericFacetSet)!=null?i:xn(),automaticFacetSet:(o=t.automaticFacetSet)!=null?o:bn()}}var Pn=t=>{let e=[];return bm(t).forEach((r,n)=>{let i=Im(t,r.facetId),o=Pm(r,n+1);if(vm(r)){if(!!!Eo(t,r.facetId).length)return;e.push({...o,...Rm(t,r.facetId),facetType:i,state:"selected"});return}r.currentValues.forEach((a,c)=>{if(a.state==="idle")return;let u=Cc(a,c+1,i),s=Sm(r)?xc(a):Cm(a);e.push({...o,...u,...s})})}),Am(t).forEach((r,n)=>{let i=wm(r,n+1);r.values.forEach((o,a)=>{if(o.state==="idle")return;let c=Cc(o,a+1,"specific"),u=xc(o);e.push({...i,...c,...u})})}),e},Sm=t=>t.type==="specific",vm=t=>t.type==="hierarchical",bm=t=>[...Object.values(t.facetSet),...Object.values(t.categoryFacetSet),...Object.values(t.dateFacetSet),...Object.values(t.numericFacetSet)].map(e=>e.request),Am=t=>[...Object.values(t.automaticFacetSet.set)].map(e=>e.response),Cc=(t,e,r)=>({state:t.state,valuePosition:e,facetType:r}),Cm=t=>({displayValue:`${t.start}..${t.end}`,value:`${t.start}..${t.end}`,start:t.start,end:t.end,endInclusive:t.endInclusive}),xc=t=>({displayValue:t.value,value:t.value}),xm=(t,e)=>Eo(t,e).map(n=>n.value).join(";"),Rm=(t,e)=>{let r=1,n=xm(t,e);return{value:n,valuePosition:r,displayValue:n}},wm=(t,e)=>({title:Rc(t.field,t.field),field:t.field,id:t.field,facetPosition:e}),Pm=(t,e)=>({title:Rc(t.field,t.facetId),field:t.field,id:t.facetId,facetPosition:e}),Rc=(t,e)=>`${t}_${e}`,Fm=(t,e)=>{var r,n,i,o,a;return((r=t.facetSet[e])==null?void 0:r.request)||((n=t.categoryFacetSet[e])==null?void 0:n.request)||((i=t.dateFacetSet[e])==null?void 0:i.request)||((o=t.numericFacetSet[e])==null?void 0:o.request)||((a=t.automaticFacetSet.set[e])==null?void 0:a.response)},Im=(t,e)=>{let r=Fm(t,e);return r?r.type:"specific"};var ve=()=>({q:"",enableQuerySyntax:!1});var wc=(r=>(r.Ascending="ascending",r.Descending="descending",r))(wc||{}),Pc=(o=>(o.Relevancy="relevancy",o.QRE="qre",o.Date="date",o.Field="field",o.NoSort="nosort",o))(Pc||{}),ko=t=>{if(Sa(t))return t.map(e=>ko(e)).join(",");switch(t.by){case"relevancy":case"qre":case"nosort":return t.by;case"date":return`date ${t.order}`;case"field":return`@${t.field} ${t.order}`;default:return""}},Fc=()=>({by:"relevancy"});var Gv=new D({values:{by:new Mt({enum:Pc,required:!0}),order:new Mt({enum:wc}),field:new P}});function Fn(){return ko(Fc())}var dt=()=>"default";var In="2.42.0";var Em=t=>{let e=t.configuration.search.locale.split("-")[0];return!e||e.length!==2?"en":e},Te=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return Em(this.state)}getBaseMetadata(){let{context:e}=this.state,r=(e==null?void 0:e.contextValues)||{},n={};for(let[i,o]of Object.entries(r)){let a=`context_${i}`;n[a]=o}return n.coveoHeadlessVersion=In,n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||dt()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var En=class extends Te{constructor(){super(...arguments);this.getFacetRequest=e=>{var r,n,i,o,a,c,u,s,l,f;return((n=(r=this.state.facetSet)==null?void 0:r[e])==null?void 0:n.request)||((o=(i=this.state.categoryFacetSet)==null?void 0:i[e])==null?void 0:o.request)||((c=(a=this.state.dateFacetSet)==null?void 0:a[e])==null?void 0:c.request)||((s=(u=this.state.numericFacetSet)==null?void 0:u[e])==null?void 0:s.request)||((f=(l=this.state.automaticFacetSet)==null?void 0:l.set[e])==null?void 0:f.response)}}getFacetState(){return Pn(wn(this.getState()))}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||En.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,n;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((n=e.search)==null?void 0:n.response.searchUid)||Ae().response.searchUid}getSplitTestRunName(){var e;return(e=this.state.search)==null?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var n;let e=!!this.getSplitTestRunName(),r=((n=this.state.search)==null?void 0:n.response.pipeline)||this.state.pipeline||En.fallbackPipelineName;return e?r:void 0}getBaseMetadata(){var i,o,a;let e=this.getState(),r=super.getBaseMetadata(),n=(a=(o=(i=e.search)==null?void 0:i.response)==null?void 0:o.extendedResults)==null?void 0:a.generativeQuestionAnsweringId;return n&&(r.generativeQuestionAnsweringId=n),r}getFacetMetadata(e,r){var o;let n=this.getFacetRequest(e),i=(o=n==null?void 0:n.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:i,facetValue:r,facetTitle:`${i}_${e}`}}getFacetClearAllMetadata(e){var i;let r=this.getFacetRequest(e),n=(i=r==null?void 0:r.field)!=null?i:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,facetTitle:`${n}_${e}`}}getFacetSortMetadata(e,r){var o;let n=this.getFacetRequest(e),i=(o=n==null?void 0:n.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:i,criteria:r,facetTitle:`${i}_${e}`}}getRangeFacetBreadcrumbMetadata(e,r){var o;let n=this.getFacetRequest(e),i=(o=n==null?void 0:n.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:i,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${i}_${e}`}}getResultSortMetadata(){var e;return{...this.getBaseMetadata(),resultsSortBy:(e=this.state.sortCriteria)!=null?e:Fn()}}getStaticFilterToggleMetadata(e,r){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:r}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryFacetBreadcrumbMetadata(e,r){var o;let n=this.getFacetRequest(e),i=(o=n==null?void 0:n.field)!=null?o:"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:i,categoryFacetPath:r,categoryFacetTitle:`${i}_${e}`}}getOmniboxAnalyticsMetadata(e,r){let n=this.state.querySuggest&&this.state.querySuggest[e],i=n.completions.map(u=>u.expression),o=n.partialQueries.length-1,a=n.partialQueries[o]||"",c=n.responseId;return{...this.getBaseMetadata(),suggestionRanking:i.indexOf(r),partialQuery:a,partialQueries:n.partialQueries.length>0?n.partialQueries:"",suggestions:i.length>0?i:"",querySuggestResponseId:c}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){var n;let e=this.getState(),r={};return((n=e.generatedAnswer)==null?void 0:n.isVisible)!==void 0&&(r.showGeneratedAnswer=e.generatedAnswer.isVisible),r}get resultURIs(){var e;return(e=this.results)==null?void 0:e.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var e;return(e=this.state.search)==null?void 0:e.response.results}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||ve().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Ae().duration}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.totalCountFiltered)||Ae().response.totalCountFiltered}},pt=En;pt.fallbackPipelineName="default";var Ic=t=>{let e=t.configuration.accessToken,r=t.configuration.analytics.trackingId,{emit:n}=yc({url:t.configuration.analytics.nextApiBaseUrl,token:e,trackingId:r});return n},Ec=({logger:t,getState:e,analyticsClientMiddleware:r=(o,a)=>a,preprocessRequest:n,provider:i=new pt(e)})=>{let o=e(),a=o.configuration.accessToken,c=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,s=o.configuration.analytics.enabled,l=new Ft({token:a,endpoint:c,runtimeEnvironment:u,preprocessRequest:_e(t,n),beforeSendHooks:[Qe(t,r),(f,h)=>(t.info({...h,type:f,endpoint:c,token:a},"Analytics request"),h)]},i);return s||l.disable(),l},Oo=()=>{let e=Be.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return e?e.value:""};var kn=async(t,e)=>({analytics:{clientId:await lt(t),clientTimestamp:new Date().toISOString(),documentReferrer:t.originLevel3,originContext:t.originContext,...e&&{actionCause:e.actionCause,customData:e.customData},...t.userDisplayName&&{userDisplayName:t.userDisplayName},...t.documentLocation&&{documentLocation:t.documentLocation},...t.deviceId&&{deviceId:t.deviceId},...Oo()&&{pageId:Oo()},...t.analyticsMode&&t.trackingId&&{trackingId:t.trackingId},capture:t.analyticsMode==="next"}});var er=()=>({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:"",splitTestRun:"",pipeline:""});var On=class extends Te{getPipeline(){var e;return this.state.pipeline||((e=this.state.recommendation)==null?void 0:e.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:ve().q,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().recommendation)==null?void 0:r.searchUid)||er().searchUid}getSplitTestRunName(){var e;return(e=this.state.recommendation)==null?void 0:e.splitTestRun}getSplitTestRunVersion(){var n;let e=!!this.getSplitTestRunName(),r=((n=this.state.recommendation)==null?void 0:n.pipeline)||this.state.pipeline||"default";return e?r:void 0}get responseTime(){var e;return((e=this.state.recommendation)==null?void 0:e.duration)||er().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.recommendation)==null?void 0:e.recommendations.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.recommendation)==null?void 0:e.recommendations.length)||er().recommendations.length}};var Dn=class{constructor(e){this.state=e()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||dt()}},kc=({logger:t,getState:e,analyticsClientMiddleware:r=(o,a)=>a,preprocessRequest:n,provider:i=new Dn(e)})=>{let o=e(),a=o.configuration.accessToken,c=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,s=o.configuration.analytics.enabled,l=new Ro({enableAnalytics:s,token:a,endpoint:c,runtimeEnvironment:u,preprocessRequest:_e(t,n),beforeSendHooks:[Qe(t,r),(f,h)=>(t.info({...h,type:f,endpoint:c,token:a},"Analytics request"),h)]},i);return s||l.disable(),l};var Tn=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var qn=class extends Te{constructor(){super(...arguments);this.initialState=Tn()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Oc=({logger:t,getState:e,analyticsClientMiddleware:r=(o,a)=>a,preprocessRequest:n,provider:i=new qn(e)})=>{let o=e(),a=o.configuration.accessToken,c=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,s=o.configuration.analytics.enabled,l=new Ft({token:a,endpoint:c,runtimeEnvironment:u,preprocessRequest:_e(t,n),beforeSendHooks:[Qe(t,r),(f,h)=>(t.info({...h,type:f,endpoint:c,token:a},"Analytics request"),h)]},i);return s||l.disable(),l};var Mn=class extends Te{getSearchUID(){var r,n;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((n=e.search)==null?void 0:n.response.searchUid)||Ae().response.searchUid}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return Pn(wn(this.state))}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||ve().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||Ae().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.search)==null?void 0:e.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.results.length)||Ae().response.results.length}},Dc=({logger:t,getState:e,analyticsClientMiddleware:r=(o,a)=>a,preprocessRequest:n,provider:i=new Mn(e)})=>{let o=e(),a=o.configuration.accessToken,c=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,s=o.configuration.analytics.enabled,l=new wo({enableAnalytics:s,token:a,endpoint:c,runtimeEnvironment:u,preprocessRequest:_e(t,n),beforeSendHooks:[Qe(t,r),(f,h)=>(t.info({...h,type:f,endpoint:c,token:a},"Analytics request"),h)]},i);return s||l.disable(),l};var tr=class extends Te{constructor(){super(...arguments);this.initialState=Tn()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Tc=({logger:t,getState:e,analyticsClientMiddleware:r=(o,a)=>a,preprocessRequest:n,provider:i=new tr(e)})=>{let o=e(),a=o.configuration.accessToken,c=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,s=o.configuration.analytics.enabled,l=new Ft({token:a,endpoint:c,runtimeEnvironment:u,preprocessRequest:_e(t,n),beforeSendHooks:[Qe(t,r),(f,h)=>(t.info({...h,type:f,endpoint:c,token:a},"Analytics request"),h)]},i);return s||l.disable(),l};function qc(t){let e=Mc(t),r=[t,...e].filter(i=>i.parentResult).map(i=>i.parentResult);return Pa([t,...e,...r],i=>i.uniqueId)}function Mc(t){return t.childResults?t.childResults.flatMap(e=>[e,...Mc(e)]):[]}function rr(t,e){return{...new pt(e).getBaseMetadata(),actionCause:t,type:t}}function km(t){return Object.assign(t,{instantlyCallable:!0})}function Om(t,e){let r=o=>km(K(t,o)),n=r(async(o,{getState:a,extra:c})=>{let{analyticsClientMiddleware:u,preprocessRequest:s,logger:l}=c;return await(await e({getState:a,analyticsClientMiddleware:u,preprocessRequest:s,logger:l})).log({state:a(),extra:c})});return Object.assign(n,{prepare:async({getState:o,analyticsClientMiddleware:a,preprocessRequest:c,logger:u})=>{let{description:s,log:l}=await e({getState:o,analyticsClientMiddleware:a,preprocessRequest:c,logger:u});return{description:s,action:r(async(f,{getState:h,extra:d})=>await l({state:h(),extra:d}))}}}),n}var kr=(t,e,r)=>{function n(...i){let o=i.length===1?{...i[0],__legacy__getBuilder:e(i[0].__legacy__getBuilder),analyticsConfigurator:t,providerClass:r}:{prefix:i[0],__legacy__getBuilder:e(i[1]),__legacy__provider:i[2],analyticsConfigurator:t,providerClass:r};return qm(o)}return n},Dm=t=>t.configuration.analytics.analyticsMode==="legacy",Tm=t=>t.configuration.analytics.analyticsMode==="next",qm=({prefix:t,__legacy__getBuilder:e,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:o,providerClass:a})=>(r!=null||(r=c=>new a(c)),Om(t,async({getState:c,analyticsClientMiddleware:u,preprocessRequest:s,logger:l})=>{let f=[],h={log:async({state:x})=>{for(let F of f)await F(x)}},d=c(),g=o({getState:c,logger:l,analyticsClientMiddleware:u,preprocessRequest:s,provider:r(c)}),y=await e(g,c());h.description=y==null?void 0:y.description,f.push(async x=>{Dm(x)&&await Mm(y,r,x,l,g.coveoAnalyticsClient)});let b=Ic(d);return f.push(async x=>{if(Tm(x)&&i&&n){let F=n(x);await Bm(b,i,F)}}),h}));async function Mm(t,e,r,n,i){e(()=>r);let o=await(t==null?void 0:t.log({searchUID:e(()=>r).getSearchUID()}));n.info({client:i,response:o},"Analytics response")}var Nc=t=>(e,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async n=>{t(e,r)}}),Re=kr(Ec,t=>t,pt),bA=kr(kc,Nc,Dn),AA=kr(Dc,Nc,Mn),CA=kr(Oc,t=>t,qn),Vc=kr(Tc,t=>t,tr);var Do=(t,e)=>{var o;let r=a=>{var c,u;return a+((u=(c=e.pagination)==null?void 0:c.firstResult)!=null?u:0)},n=-1,i=(o=e.search)==null?void 0:o.results;return n=Bc(t,i),n<0&&(n=Um(t,i)),n<0&&(n=0),Lc(t,r(n),e)},jc=(t,e)=>{var n;let r=((n=e.recommendation)==null?void 0:n.recommendations.findIndex(({uniqueId:i})=>t.uniqueId===i))||0;return Lc(t,r,e)};function Lc(t,e,r){let n=t.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:jm(t),documentPosition:e+1,documentTitle:t.title,documentUri:t.uri,documentUriHash:t.raw.urihash,documentUrl:t.clickUri,rankingModifier:t.rankingModifier||"",sourceName:Lm(t),queryPipeline:r.pipeline||Yt()}}var Nn=t=>(t.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",t),{contentIDKey:"permanentid",contentIDValue:t.raw.permanentid||""}),Uc={urihash:new P,sourcetype:new P,permanentid:new P},To={uniqueId:E,raw:new D({values:Uc}),title:E,uri:E,clickUri:E,rankingModifier:new P({required:!1,emptyAllowed:!0})};function Nm(t){return Object.assign({},...Object.keys(Uc).map(e=>({[e]:t[e]})))}function Vm(t){return Object.assign({},...Object.keys(To).map(e=>({[e]:t[e]})),{raw:Nm(t.raw)})}function jm(t){let e=t.raw.author;return U(e)?"unknown":Array.isArray(e)?e.join(";"):`${e}`}function Lm(t){let e=t.raw.source;return U(e)?"unknown":e}var qo=t=>new ge(To).validate(Vm(t));function Um(t,e){for(let[r,n]of e.entries()){let i=qc(n);if(Bc(t,i)!==-1)return r}return-1}function Bc(t,e=[]){return e.findIndex(({uniqueId:r})=>r===t.uniqueId)}async function Bm(t,e,r){await t(e,r)}var _c=()=>Re("analytics/recommendation/update",t=>t.makeRecommendationInterfaceLoad(),t=>new On(t)),Vn=t=>Re({prefix:"analytics/recommendation/open",__legacy__getBuilder:(e,r)=>(qo(t),e.makeRecommendationOpen(jc(t,r),Nn(t))),__legacy__provider:e=>new On(e),analyticsType:"itemClick",analyticsPayloadBuilder:e=>{var i,o;let r=Do(t,e),n=Nn(t);return{searchUid:(o=(i=e.search)==null?void 0:i.response.searchUid)!=null?o:"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});var nr=S("recommendation/set",t=>v(t,{id:E})),ft=K("recommendation/get",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:n}})=>{let i=e(),o=new Date().getTime(),a=await n.recommendations(await _m(i)),c=new Date().getTime()-o;return de(a)?r(a.error):{recommendations:a.success.results,analyticsAction:_c(),duration:c,searchUid:a.success.searchUid,splitTestRun:a.success.splitTestRun,pipeline:a.success.pipeline}}),_m=async t=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,recommendation:t.recommendation.id,tab:t.configuration.analytics.originLevel2,referrer:t.configuration.analytics.originLevel3,timezone:t.configuration.search.timezone,locale:t.configuration.search.locale,actionsHistory:t.configuration.analytics.enabled?Be.getHistory():[],...t.advancedSearchQueries&&{aq:t.advancedSearchQueries.aq,cq:t.advancedSearchQueries.cq},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.context&&{context:t.context.contextValues},...t.dictionaryFieldContext&&{dictionaryFieldContext:t.dictionaryFieldContext.contextValues},...t.fields&&{fieldsToInclude:t.fields.fieldsToInclude},...t.configuration.analytics.enabled&&{visitorId:await lt(t.configuration.analytics)},...t.configuration.analytics.enabled&&await kn(t.configuration.analytics),...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},...t.pagination&&{numberOfResults:t.pagination.numberOfResults}});var ir=ee(er(),t=>{t.addCase(nr,(e,r)=>{e.id=r.payload.id}).addCase(ft.rejected,(e,r)=>{e.error=r.payload?r.payload:null,e.isLoading=!1}).addCase(ft.fulfilled,(e,r)=>{e.error=null,e.recommendations=r.payload.recommendations,e.duration=r.payload.duration,e.isLoading=!1,e.searchUid=r.payload.searchUid,e.splitTestRun=r.payload.splitTestRun,e.pipeline=r.payload.pipeline}).addCase(ft.pending,e=>{e.isLoading=!0})});var or=S("searchHub/set",t=>v(t,new P({required:!0,emptyAllowed:!0})));var ar=ee(dt(),t=>{t.addCase(or,(e,r)=>r.payload).addCase(Se.fulfilled,(e,r)=>{var n,i;return(i=(n=r.payload)==null?void 0:n.searchHub)!=null?i:e}).addCase(je,(e,r)=>r.payload.searchHub||e)});var Qc=ee(In,t=>t);var $c=t=>e=>r=>{var o,a;let n=(o=r.payload)==null?void 0:o.analyticsAction;n!==void 0&&((a=r.payload)==null||delete a.analyticsAction);let i=e(r);return r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r),n!==void 0&&t.dispatch(n),i};var Zc=we(zc());var oC=S("tab/register",t=>{let e=new D({values:{id:E,expression:ce}});return v(t,e)}),jn=S("tab/updateActiveTab",t=>v(t,E));var Un=we(Ln()),Yc=we(Wc()),Gc=we(Kc());Un.default.extend(Gc.default);Un.default.extend(Yc.default);var Bo="/rest/search/v2",_o="/rest/ua",Jc=()=>({organizationId:"",accessToken:"",platformUrl:Ni(),search:{apiBaseUrl:`${Ni()}${Bo}`,locale:"en-US",timezone:Un.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Ya()}${_o}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}});function $m(t,e){if(Xa(t))return t.replace(/^(https:\/\/)platform/,"$1analytics")+_o;let n=es(t,e);return n?jt(e,n.environment).analytics:t}var Xc=ee(Jc(),t=>t.addCase(at,(e,r)=>{r.payload.accessToken&&(e.accessToken=r.payload.accessToken),r.payload.organizationId&&(e.organizationId=r.payload.organizationId),r.payload.platformUrl&&(e.platformUrl=r.payload.platformUrl,e.search.apiBaseUrl=`${r.payload.platformUrl}${Bo}`,e.analytics.apiBaseUrl=$m(r.payload.platformUrl,e.organizationId))}).addCase(je,(e,r)=>{r.payload.apiBaseUrl&&(e.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(e.search.locale=r.payload.locale),r.payload.timezone&&(e.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(e.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(Ht,(e,r)=>{U(r.payload.enabled)||(!r.payload.enabled&&e.analytics.enabled&&Po(e.analytics),e.analytics.enabled=r.payload.enabled),U(r.payload.originContext)||(e.analytics.originContext=r.payload.originContext),U(r.payload.originLevel2)||(e.analytics.originLevel2=r.payload.originLevel2),U(r.payload.originLevel3)||(e.analytics.originLevel3=r.payload.originLevel3),U(r.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=r.payload.apiBaseUrl),U(r.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),U(r.payload.trackingId)||(e.analytics.trackingId=r.payload.trackingId),U(r.payload.analyticsMode)||(e.analytics.analyticsMode=r.payload.analyticsMode);let n=(0,Zc.default)();n&&(e.analytics.analyticsMode="next",e.analytics.trackingId=n),U(r.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),U(r.payload.anonymous)||(e.analytics.anonymous=r.payload.anonymous),U(r.payload.deviceId)||(e.analytics.deviceId=r.payload.deviceId),U(r.payload.userDisplayName)||(e.analytics.userDisplayName=r.payload.userDisplayName),U(r.payload.documentLocation)||(e.analytics.documentLocation=r.payload.documentLocation)}).addCase(zt,e=>{e.analytics.enabled=!1,Po(e.analytics)}).addCase(Wt,e=>{e.analytics.enabled=!0}).addCase(on,(e,r)=>{e.analytics.originLevel2=r.payload.originLevel2}).addCase(an,(e,r)=>{e.analytics.originLevel3=r.payload.originLevel3}).addCase(jn,(e,r)=>{e.analytics.originLevel2=r.payload}).addCase(st,(e,r)=>{e.analytics.originLevel2=r.payload.tab||e.analytics.originLevel2}));var $e=Xc;function Hm(t){return t.instantlyCallable}var eu=()=>t=>e=>t(Hm(e)?e():e);var tu=t=>()=>e=>r=>{var i;if(!r.error)return e(r);let n=r.error;if(((i=r.payload)==null?void 0:i.ignored)||t.error(n.stack||n.message||n.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return e(r)},ru=t=>e=>r=>n=>(t.debug({action:n,nextState:e.getState()},`Action dispatched: ${n.type}`),r(n));function nu(t,e){let r={...t},n,i=o=>(a,c)=>{let u=o(a,c);return n?n(u,c):u};return{get combinedReducer(){let o=Fa(Object.entries(e).filter(([a])=>!(a in r)).map(([a,c])=>[a,()=>c]));return i(nn({...o,...r}))},containsAll(o){return Object.keys(o).every(c=>c in r)},add(o){Object.keys(o).filter(a=>!(a in r)).forEach(a=>r[a]=o[a])},addCrossReducer(o){n=o}}}function Bn(t,e,r){var n,i,o;e===void 0&&(e=50),r===void 0&&(r={});var a=(n=r.isImmediate)!=null&&n,c=(i=r.callback)!=null&&i,u=r.maxWait,s=Date.now(),l=[];function f(){if(u!==void 0){var d=Date.now()-s;if(d+e>=u)return u-d}return e}var h=function(){var d=[].slice.call(arguments),g=this;return new Promise(function(y,b){var x=a&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,s=Date.now(),!a){var q=t.apply(g,d);c&&c(q),l.forEach(function(N){return(0,N.resolve)(q)}),l=[]}},f()),x){var F=t.apply(g,d);return c&&c(F),y(F)}l.push({resolve:y,reject:b})})};return h.cancel=function(d){o!==void 0&&clearTimeout(o),l.forEach(function(g){return(0,g.reject)(d)}),l=[]},h}function iu(t,e){let r=0,n=Bn(()=>r=0,500);return i=>o=>async a=>{if(!(typeof a=="function"))return o(a);let u=await o(a);if(!zm(u))return u;if(typeof e!="function")return t.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return t.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let s=await Wm(e);i.dispatch(at({accessToken:s})),i.dispatch(a)}}function zm(t){var e;return((e=t==null?void 0:t.error)==null?void 0:e.name)===new Ar().name}async function Wm(t){try{return await t()}catch(e){return""}}function ou({reducer:t,preloadedState:e,middlewares:r=[],thunkExtraArguments:n,name:i}){return Fs({reducer:t,preloadedState:e,devTools:{stateSanitizer:o=>o.history?{...o,history:"<<OMIT>>"}:o,name:i,shouldHotReload:!1},middleware:o=>[...r,...o({thunk:{extraArgument:n}}),ru(n.logger)]})}var Km={configuration:$e,version:Qc};function Ym(t,e){var a,c;let r=((a=t.configuration.organizationEndpoints)==null?void 0:a.analytics)||void 0,{analyticsClientMiddleware:n,...i}=(c=t.configuration.analytics)!=null?c:{},o={...i,nextApiBaseUrl:`${r}/rest/organizations/${t.configuration.organizationId}/events/v1`,apiBaseUrl:r};return $r()?(e.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function au(t,e){var u;let r=Gm(t,e),{accessToken:n,organizationId:i}=t.configuration,{organizationEndpoints:o}=t.configuration,a=(o==null?void 0:o.platform)||t.configuration.platformUrl;eg(t)&&r.logger.warn(`The \`platformUrl\` (${t.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Xm(t)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):tg(t)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${t.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(u=t.configuration.organizationEndpoints)==null?void 0:u.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(at({accessToken:n,organizationId:i,platformUrl:a}));let c=Ym(t,r.logger);return c&&r.dispatch(Ht(c)),r}function Gm(t,e){var a;let{reducers:r}=t,n=nu({...Km,...r},(a=t.preloadedState)!=null?a:{});t.crossReducer&&n.addCrossReducer(t.crossReducer);let i=e.logger,o=Jm(t,e,n);return{addReducers(c){n.containsAll(c)||(n.add(c),o.replaceReducer(n.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(Wt())},disableAnalytics(){o.dispatch(zt())},get state(){return o.getState()},logger:i,store:o}}function Jm(t,e,r){let{preloadedState:n,configuration:i}=t,o=i.name||"coveo-headless",a=Zm(t,e.logger);return ou({preloadedState:n,reducer:r.combinedReducer,middlewares:a,thunkExtraArguments:e,name:o})}function Zm(t,e){let{renewAccessToken:r}=t.configuration,n=iu(e,r);return[eu,n,tu(e),$c].concat(t.middlewares||[])}function Xm(t){return ne(t.configuration.organizationEndpoints)}function eg(t){var e;return!U(t.configuration.platformUrl)||U((e=t.configuration.organizationEndpoints)==null?void 0:e.platform)}function tg(t){let{platform:e}=t.configuration.organizationEndpoints;if(ne(e))return!1;let r=ji(e);return r&&r.organizationId!==t.configuration.organizationId}var gu=we(mu());function hu(t){return(0,gu.default)({name:"@coveo/headless",level:(t==null?void 0:t.level)||"warn",formatters:{log:t==null?void 0:t.logFormatter}})}function yu(t,e){let r=vg(t),n=Fe,i=bg(t);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:i,logger:e}}function vg(t){let{analytics:e}=t,r=(n,i)=>i;return(e==null?void 0:e.analyticsClientMiddleware)||r}function bg(t){return t.preprocessRequest||Hr}var Su={organizationId:E,accessToken:E,platformUrl:new P({required:!1,emptyAllowed:!1}),name:new P({required:!1,emptyAllowed:!1}),analytics:new D({options:{required:!1},values:{enabled:new L({required:!1}),originContext:new P({required:!1}),originLevel2:new P({required:!1}),originLevel3:new P({required:!1}),analyticsMode:new P({constrainTo:["legacy","next"],required:!1})}})};function vu(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:jt("searchuisamples")}}var bu=new ge({...Su,pipeline:new P({required:!1,emptyAllowed:!0}),searchHub:te,locale:te,timezone:te});function Wo(){return{...vu(),searchHub:"default"}}var Ag={debug:ln,pipeline:Gt,searchHub:ar,recommendation:ir};function Au(t){let e=hu(t.loggerOptions);Cg(t.configuration,e);let r=xg(t.configuration,e),n={...yu(t.configuration,e),apiClient:r},i={...t,reducers:Ag},o=au(i,n),{pipeline:a,searchHub:c,timezone:u,locale:s}=t.configuration;return o.dispatch(je({timezone:u,locale:s})),U(a)||o.dispatch(Kt(a)),U(c)||o.dispatch(or(c)),{...o,get state(){return o.state}}}function Cg(t,e){try{bu.validate(t)}catch(r){throw e.error(r,"Recommendation engine configuration error"),r}}function xg(t,e){return new Li({logger:e,preprocessRequest:t.preprocessRequest||Hr,postprocessSearchResponseMiddleware:ns,postprocessFacetSearchResponseMiddleware:is,postprocessQuerySuggestResponseMiddleware:os})}function Rg(t){return t.addReducers({configuration:$e}),{disableAnalytics:zt,enableAnalytics:Wt,setOriginLevel2:on,setOriginLevel3:an,updateAnalyticsConfiguration:Ht,updateBasicConfiguration:at}}function wg(t){return t.addReducers({configuration:$e,pipeline:Gt,searchHub:ar}),{updateSearchConfiguration:je}}var mt=()=>new P({required:!1,emptyAllowed:!0}),zn=S("advancedSearchQueries/update",t=>v(t,{aq:mt(),cq:mt(),lq:mt(),dq:mt()})),Wn=S("advancedSearchQueries/register",t=>v(t,{aq:mt(),cq:mt(),lq:mt(),dq:mt()}));var gt=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var Cu=ee(gt(),t=>{t.addCase(zn,(e,r)=>{let{aq:n,cq:i,lq:o,dq:a}=r.payload;ne(n)||(e.aq=n,e.aqWasSet=!0),ne(i)||(e.cq=i,e.cqWasSet=!0),ne(o)||(e.lq=o,e.lqWasSet=!0),ne(a)||(e.dq=a,e.dqWasSet=!0)}).addCase(Wn,(e,r)=>{let{aq:n,cq:i,lq:o,dq:a}=r.payload;ne(n)||(e.defaultFilters.aq=n,e.aqWasSet||(e.aq=n)),ne(i)||(e.defaultFilters.cq=i,e.cqWasSet||(e.cq=i)),ne(o)||(e.defaultFilters.lq=o,e.lqWasSet||(e.lq=o)),ne(a)||(e.defaultFilters.dq=a,e.dqWasSet||(e.dq=a))}).addCase(Se.fulfilled,(e,r)=>{var n,i;return(i=(n=r.payload)==null?void 0:n.advancedSearchQueries)!=null?i:e}).addCase(st,(e,r)=>{let{aq:n,cq:i}=r.payload;ne(n)||(e.aq=n,e.aqWasSet=!0),ne(i)||(e.cq=i,e.cqWasSet=!0)})});function Pg(t){return t.addReducers({advancedSearchQueries:Cu}),{updateAdvancedSearchQueries:zn,registerAdvancedSearchQueries:Wn}}var Fg=new W({each:E,required:!0}),xu=(t,e)=>(v(t,E),_r(e)?v(e,E):v(e,Fg),{payload:{contextKey:t,contextValue:e}}),Et=S("context/set",t=>{for(let[e,r]of Object.entries(t))xu(e,r);return{payload:t}}),kt=S("context/add",t=>xu(t.contextKey,t.contextValue)),Ot=S("context/remove",t=>v(t,E));function Kn(){return{contextValues:{}}}var Yn=ee(Kn(),t=>{t.addCase(Et,(e,r)=>{e.contextValues=r.payload}).addCase(kt,(e,r)=>{e.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Ot,(e,r)=>{delete e.contextValues[r.payload]}).addCase(Se.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.context.contextValues)})});function Ig(t){return t.addReducers({context:Yn}),{addContext:kt,removeContext:Ot,setContext:Et}}var sr=S("dictionaryFieldContext/set",t=>{let e=new D({options:{required:!0}}),r=v(t,e).error;if(r)return{payload:t,error:r};let n=Object.values(t),i=new W({each:ce}),o=v(n,i).error;return o?{payload:t,error:o}:{payload:t}}),cr=S("dictionaryFieldContext/add",t=>{let e=new D({options:{required:!0},values:{field:ce,key:ce}});return v(t,e)}),ur=S("dictionaryFieldContext/remove",t=>v(t,ce));function Gn(){return{contextValues:{}}}var Jn=ee(Gn(),t=>{t.addCase(sr,(e,r)=>{e.contextValues=r.payload}).addCase(cr,(e,r)=>{let{field:n,key:i}=r.payload;e.contextValues[n]=i}).addCase(ur,(e,r)=>{delete e.contextValues[r.payload]}).addCase(Se.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function Eg(t){return t.addReducers({dictionaryFieldContext:Jn}),{addContext:cr,removeContext:ur,setContext:sr}}var ht=async(t,e)=>{var r,n,i,o;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,debug:t.debug,tab:t.configuration.analytics.originLevel2,referrer:t.configuration.analytics.originLevel3,timezone:t.configuration.search.timezone,...t.configuration.analytics.enabled&&{visitorId:await lt(t.configuration.analytics),actionsHistory:Be.getHistory()},...((r=t.advancedSearchQueries)==null?void 0:r.aq)&&{aq:t.advancedSearchQueries.aq},...((n=t.advancedSearchQueries)==null?void 0:n.cq)&&{cq:t.advancedSearchQueries.cq},...((i=t.advancedSearchQueries)==null?void 0:i.lq)&&{lq:t.advancedSearchQueries.lq},...((o=t.advancedSearchQueries)==null?void 0:o.dq)&&{dq:t.advancedSearchQueries.dq},...t.context&&{context:t.context.contextValues},...t.fields&&!t.fields.fetchAllFields&&{fieldsToInclude:t.fields.fieldsToInclude},...t.dictionaryFieldContext&&{dictionaryFieldContext:t.dictionaryFieldContext.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.query&&{q:t.query.q,enableQuerySyntax:t.query.enableQuerySyntax},...t.searchHub&&{searchHub:t.searchHub},...t.sortCriteria&&{sortCriteria:t.sortCriteria},...t.configuration.analytics.enabled&&await kn(t.configuration.analytics,e),...t.excerptLength&&!U(t.excerptLength.length)&&{excerptLength:t.excerptLength.length},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}};var kg={collectionField:new P({emptyAllowed:!1,required:!1}),parentField:new P({emptyAllowed:!1,required:!1}),childField:new P({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new T({min:0,required:!1})},Ru=S("folding/register",t=>v(t,kg)),nw=K("folding/loadCollection",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:n}})=>{let i=e(),o=await ht(i),a=await n.search({...o,q:Og(i),enableQuerySyntax:!0,cq:`@${i.folding.fields.collection}="${t}"`,filterField:i.folding.fields.collection,childField:i.folding.fields.parent,parentField:i.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return de(a)?r(a.error):{collectionId:t,results:a.success.results,rootResult:i.folding.collections[t].result}});function Og(t){return t.query.q===""?"":t.query.enableQuerySyntax?`${t.query.q} OR @uri`:`( <@- ${t.query.q} -@> ) OR @uri`}var wu=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});var Dg=new W({each:E,required:!0}),lr=S("fields/registerFieldsToInclude",t=>v(t,Dg)),Zn=S("fields/fetchall/enable"),Xn=S("fields/fetchall/disable"),ei=K("fields/fetchDescription",async(t,{extra:e,getState:r,rejectWithValue:n})=>{let i=r(),{accessToken:o,organizationId:a}=i.configuration,{apiBaseUrl:c}=i.configuration.search,u=await e.apiClient.fieldDescriptions({accessToken:o,organizationId:a,url:c});return de(u)?n(u.error):u.success.fields});var ti=["author","language","urihash","objecttype","collection","source","permanentid"],Ko=[...ti,"date","filetype","parents"],Pu=[...Ko,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Fu=()=>({fieldsToInclude:ti,fetchAllFields:!1,fieldsDescription:[]});var ri=ee(Fu(),t=>t.addCase(lr,(e,r)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(r.payload))]}).addCase(Zn,e=>{e.fetchAllFields=!0}).addCase(Xn,e=>{e.fetchAllFields=!1}).addCase(ei.fulfilled,(e,{payload:r})=>{e.fieldsDescription=r}).addCase(Ru,(e,{payload:r})=>{var i,o,a;let n=wu().fields;e.fieldsToInclude.push((i=r.collectionField)!=null?i:n.collection,(o=r.parentField)!=null?o:n.parent,(a=r.childField)!=null?a:n.child)}));function Tg(t){return t.addReducers({fields:ri}),{registerFieldsToInclude:lr,enableFetchAllFields:Zn,disableFetchAllFields:Xn,fetchFieldsDescription:ei}}function qg(t){return t.addReducers({pipeline:Gt}),{setPipeline:Kt}}function Mg(t){return t.addReducers({searchHub:ar}),{setSearchHub:or}}function Ng(t){return t.addReducers({debug:ln}),{disableDebug:cn,enableDebug:sn}}function Vg(t){return t.addReducers({recommendation:ir}),{getRecommendations:ft,setRecommendationId:nr}}function jg(t){return t.addReducers({}),{logRecommendationOpen:Vn}}var dr=S("breadcrumb/deselectAll"),ni=S("breadcrumb/deselectAllNonBreadcrumbs");var Tr={value:E,numberOfResults:new T({min:0}),state:E};var $=E;var Lg=new T({min:bc,default:vn,required:!1}),Ug=new T({min:Sc,max:vc,default:Sn,required:!1}),Bg={desiredCount:Ug,numberOfValues:Lg},Zw=S("automaticFacet/setOptions",t=>v(t,Bg)),Xw=S("automaticFacet/deselectAll",t=>v(t,$)),_g=E,Iu=S("automaticFacet/toggleSelectValue",t=>v(t,{field:_g,selection:new D({values:Tr})}));var Qg={state:new G({required:!0}),numberOfResults:new T({required:!0,min:0}),value:new P({required:!0,emptyAllowed:!0}),path:new W({required:!0,each:E}),moreValuesAvailable:new L({required:!1})};function Yo(t){t.children.forEach(e=>{Yo(e)}),Fe({state:t.state,numberOfResults:t.numberOfResults,value:t.value,path:t.path,moreValuesAvailable:t.moreValuesAvailable},Qg)}var pr={facetId:$,field:E,delimitingCharacter:new P({required:!1,emptyAllowed:!0}),filterFacetCount:new L({required:!1}),injectionDepth:new T({required:!1,min:0}),numberOfValues:new T({required:!1,min:1}),sortCriteria:new G({required:!1}),basePath:new W({required:!1,each:E}),filterByBasePath:new L({required:!1})},uP=S("categoryFacet/register",t=>v(t,pr)),Eu=S("categoryFacet/toggleSelectValue",t=>{try{return Fe(t.facetId,E),Yo(t.selection),{payload:t,error:null}}catch(e){return{payload:t,error:Ze(e)}}}),ku=S("categoryFacet/deselectAll",t=>v(t,pr.facetId)),lP=S("categoryFacet/updateNumberOfValues",t=>v(t,{facetId:pr.facetId,numberOfValues:pr.numberOfValues})),dP=S("categoryFacet/updateSortCriterion",t=>v(t,{facetId:pr.facetId,criterion:new G})),pP=S("categoryFacet/updateBasePath",t=>v(t,{facetId:pr.facetId,basePath:new W({each:E})}));var qr={facetId:$,captions:new D({options:{required:!1}}),numberOfValues:new T({required:!1,min:1}),query:new P({required:!1,emptyAllowed:!0})};var $g={path:new W({required:!0,each:E}),displayValue:ce,rawValue:ce,count:new T({required:!0,min:0})},Ou=S("categoryFacet/selectSearchResult",t=>v(t,{facetId:$,value:new D({values:$g})})),CP=S("categoryFacetSearch/register",t=>v(t,qr));var Du={facetId:$,value:new D({values:{displayValue:ce,rawValue:ce,count:new T({required:!0,min:0})}})},EP=S("facetSearch/register",t=>v(t,qr)),kP=S("facetSearch/update",t=>v(t,qr)),Tu=S("facetSearch/toggleSelectValue",t=>v(t,Du)),OP=S("facetSearch/toggleExcludeValue",t=>v(t,Du));var ii=we(Ln()),Mu=we(qu());ii.default.extend(Mu.default);var Nu="YYYY/MM/DD@HH:mm:ss",Hg="1401-01-01";function fr(t,e){let r=(0,ii.default)(t,e);return!r.isValid()&&!e?(0,ii.default)(t,Nu):r}function oi(t){return t.format(Nu)}function Vu(t,e){let r=fr(t,e);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",i=` with the format "${e}""`;throw new Error(`Could not parse the provided date "${t}"${e?i:n}`)}Zo(r)}function Zo(t){if(t.isBefore(Hg))throw new Error(`Date is before year 1401, which is unsupported by the API: ${t}`)}var Mr=we(Ln()),Lu=we(ju());Mr.default.extend(Lu.default);var Uu=["past","now","next"],Bu=["minute","hour","day","week","month","quarter","year"],zg=t=>{let e=t==="now";return{amount:new T({required:!e,min:1}),unit:new P({required:!e,constrainTo:Bu}),period:new P({required:!0,constrainTo:Uu})}};function ta(t){if(typeof t=="string"&&!yt(t))throw new Error(`The value "${t}" is not respecting the relative date format "period-amount-unit"`);let e=typeof t=="string"?zu(t):t;new ge(zg(e.period)).validate(e);let r=Qu(e),n=JSON.stringify(e);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Zo(r)}function _u(t){let{period:e,amount:r,unit:n}=t;switch(e){case"past":case"next":return`${e}-${r}-${n}`;case"now":return e}}function Qu(t){let{period:e,amount:r,unit:n}=t;switch(e){case"past":return(0,Mr.default)().subtract(r,n);case"next":return(0,Mr.default)().add(r,n);case"now":return(0,Mr.default)()}}function Nr(t){return oi(Qu(zu(t)))}function $u(t){return t.toLocaleLowerCase().split("-")}function yt(t){let[e,r,n]=$u(t);if(e==="now")return!0;if(!Uu.includes(e)||!Bu.includes(n))return!1;let i=parseInt(r);return!(isNaN(i)||i<=0)}function Hu(t){return!!t&&typeof t=="object"&&"period"in t}function zu(t){let[e,r,n]=$u(t);return e==="now"?{period:"now"}:{period:e,amount:r?parseInt(r):void 0,unit:n||void 0}}function Wu(t){var o,a;let e=Ku(t.start,t),r=Ku(t.end,t),n=(o=t.endInclusive)!=null?o:!1,i=(a=t.state)!=null?a:"idle";return{start:e,end:r,endInclusive:n,state:i}}function Ku(t,e){let{dateFormat:r}=e;return Hu(t)?(ta(t),_u(t)):typeof t=="string"&&yt(t)?(ta(t),t):(Vu(t,r),oi(fr(t,r)))}var zP=new P({regex:/^[a-zA-Z0-9-_]+$/}),WP=new P({required:!0}),KP=new W({each:new P}),YP=new P,GP=new L,JP=new L,ZP=new T({min:0}),Wg=new T({min:1}),XP=new L({required:!0}),Kg=new D,Yg=new P,Gg={captions:Kg,numberOfValues:Wg,query:Yg},eF=new D({values:Gg}),Yu=new D({options:{required:!1},values:{type:new P({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new W({required:!0,max:25,each:new P({emptyAllowed:!1,required:!0})})}}),tF=new L,Gu=new W({min:1,max:25,required:!1,each:new P({emptyAllowed:!1,required:!0})});var Jg={facetId:$,field:new P({required:!0,emptyAllowed:!0}),filterFacetCount:new L({required:!1}),injectionDepth:new T({required:!1,min:0}),numberOfValues:new T({required:!1,min:1}),sortCriteria:new G({required:!1}),resultsMustMatch:new G({required:!1}),allowedValues:Yu,customSort:Gu},uF=S("facet/register",t=>v(t,Jg)),Ju=S("facet/toggleSelectValue",t=>v(t,{facetId:$,selection:new D({values:Tr})})),lF=S("facet/toggleExcludeValue",t=>v(t,{facetId:$,selection:new D({values:Tr})})),ai=S("facet/deselectAll",t=>v(t,$)),dF=S("facet/updateSortCriterion",t=>v(t,{facetId:$,criterion:new G({required:!0})})),pF=S("facet/updateNumberOfValues",t=>v(t,{facetId:$,numberOfValues:new T({required:!0,min:1})})),fF=S("facet/updateIsFieldExpanded",t=>v(t,{facetId:$,isFieldExpanded:new L({required:!0})})),mF=S("facet/updateFreezeCurrentValues",t=>v(t,{facetId:$,freezeCurrentValues:new L({required:!0})}));var Zu=S("rangeFacet/updateSortCriterion",t=>v(t,{facetId:$,criterion:new G({required:!0})}));var si={state:E,start:new T({required:!0}),end:new T({required:!0}),endInclusive:new L({required:!0}),numberOfResults:new T({required:!0,min:0})},ci={start:E,end:E,endInclusive:new L({required:!0}),state:E,numberOfResults:new T({required:!0,min:0})};var Zg={start:E,end:E,endInclusive:new L({required:!0}),state:E},Xg={facetId:$,field:E,currentValues:new W({required:!1,each:new D({values:Zg})}),generateAutomaticRanges:new L({required:!0}),filterFacetCount:new L({required:!1}),injectionDepth:new T({required:!1,min:0}),numberOfValues:new T({required:!1,min:1}),sortCriteria:new G({required:!1}),rangeAlgorithm:new G({required:!1})};function Xu(t){return yt(t)?Nr(t):t}function el(t){!t.currentValues||t.currentValues.forEach(e=>{let{start:r,end:n}=Wu(e);if(fr(Xu(r)).isAfter(fr(Xu(n))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)})}var MF=S("dateFacet/register",t=>{try{return Fe(t,Xg),el(t),{payload:t,error:null}}catch(e){return{payload:t,error:Ze(e)}}}),tl=S("dateFacet/toggleSelectValue",t=>v(t,{facetId:$,selection:new D({values:ci})})),NF=S("dateFacet/toggleExcludeValue",t=>v(t,{facetId:$,selection:new D({values:ci})})),rl=S("dateFacet/updateFacetValues",t=>{try{return Fe(t,{facetId:$,values:new W({each:new D({values:ci})})}),el({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:Ze(e)}}});var eh={state:E,start:new T({required:!0}),end:new T({required:!0}),endInclusive:new L({required:!0})},th={facetId:$,field:E,currentValues:new W({required:!1,each:new D({values:eh})}),generateAutomaticRanges:new L({required:!0}),filterFacetCount:new L({required:!1}),injectionDepth:new T({required:!1,min:0}),numberOfValues:new T({required:!1,min:1}),sortCriteria:new G({required:!1}),rangeAlgorithm:new G({required:!1})};function nl(t){!t.currentValues||t.currentValues.forEach(({start:e,end:r})=>{if(e>r)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${r}`)})}var HF=S("numericFacet/register",t=>{try{return v(t,th),nl(t),{payload:t,error:null}}catch(e){return{payload:t,error:Ze(e)}}}),il=S("numericFacet/toggleSelectValue",t=>v(t,{facetId:$,selection:new D({values:si})})),zF=S("numericFacet/toggleExcludeValue",t=>v(t,{facetId:$,selection:new D({values:si})})),ol=S("numericFacet/updateFacetValues",t=>{try{return Fe(t,{facetId:$,values:new W({each:new D({values:si})})}),nl({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:Ze(e)}}});function ui(t,e){let r={};t.forEach(o=>r[o.facetId]=o);let n=[];e.forEach(o=>{o in r&&(n.push(r[o]),delete r[o])});let i=Object.values(r);return[...n,...i]}function et(t){return Object.values(t).map(e=>e.request)}var ra=()=>Re("search/logFetchMoreResults",t=>t.makeFetchMoreResults()),He=t=>Re("search/queryError",(e,r)=>{var n,i,o,a;return e.makeQueryError({query:((n=r.query)==null?void 0:n.q)||ve().q,aq:((i=r.advancedSearchQueries)==null?void 0:i.aq)||gt().aq,cq:((o=r.advancedSearchQueries)==null?void 0:o.cq)||gt().cq,dq:((a=r.advancedSearchQueries)==null?void 0:a.dq)||gt().dq,errorType:t.type,errorMessage:t.message})});var Vr=(r=>(r.Relevance="relevance",r.Fields="fields",r))(Vr||{}),al=(r=>(r.Ascending="asc",r.Descending="desc",r))(al||{});var rI=new D({options:{required:!1},values:{by:new Mt({enum:Vr,required:!0}),fields:new W({each:new D({values:{name:new P,direction:new Mt({enum:al})}})})}});var sl=()=>Vc("analytics/productListing/load",t=>t.makeInterfaceLoad(),t=>new tr(t));var vI=S("productlisting/setUrl",t=>v(t,{url:new P({required:!0,url:!0})})),bI=S("productlisting/setAdditionalFields",t=>v(t,{additionalFields:new W({required:!0,each:new P({required:!0,emptyAllowed:!1})})})),cl=K("productlisting/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:n,extra:i})=>{let o=e(),{apiClient:a}=i,c=await a.getProducts(await rh(o));return de(c)?(r(He(c.error)),n(c.error)):{response:c.success,analyticsAction:sl()}}),rh=async t=>{var n,i,o;let e=ih(t),r=await lt(t.configuration.analytics);return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,platformUrl:t.configuration.platformUrl,url:(n=t.productListing)==null?void 0:n.url,...t.configuration.analytics.enabled&&r?{clientId:r}:{},...((i=t.productListing.additionalFields)==null?void 0:i.length)?{additionalFields:t.productListing.additionalFields}:{},...t.productListing.advancedParameters&&nh(t.productListing.advancedParameters)?{advancedParameters:t.productListing.advancedParameters||{}}:{},...e.length&&{facets:{requests:e}},...t.pagination&&{pagination:{numberOfValues:t.pagination.numberOfResults,page:Math.ceil(t.pagination.firstResult/(t.pagination.numberOfResults||1))+1}},...(((o=t.sort)==null?void 0:o.by)||Vr.Relevance)!==Vr.Relevance&&{sort:t.sort},...t.context&&{userContext:t.context.contextValues}}};function nh(t){return t.debug}function ih(t){var e;return ui(oh(t),(e=t.facetOrder)!=null?e:[])}function oh(t){var e,r,n,i;return[...et((e=t.facetSet)!=null?e:{}),...et((r=t.numericFacetSet)!=null?r:{}),...et((n=t.dateFacetSet)!=null?n:{}),...et((i=t.categoryFacetSet)!=null?i:{})]}var Dt=(A=>(A.interfaceLoad="interfaceLoad",A.interfaceChange="interfaceChange",A.didyoumeanAutomatic="didyoumeanAutomatic",A.didyoumeanClick="didyoumeanClick",A.resultsSort="resultsSort",A.searchboxSubmit="searchboxSubmit",A.searchboxClear="searchboxClear",A.searchboxAsYouType="searchboxAsYouType",A.breadcrumbFacet="breadcrumbFacet",A.breadcrumbResetAll="breadcrumbResetAll",A.documentQuickview="documentQuickview",A.documentOpen="documentOpen",A.omniboxAnalytics="omniboxAnalytics",A.omniboxFromLink="omniboxFromLink",A.searchFromLink="searchFromLink",A.triggerNotify="notify",A.triggerExecute="execute",A.triggerQuery="query",A.undoTriggerQuery="undoQuery",A.triggerRedirect="redirect",A.pagerResize="pagerResize",A.pagerNumber="pagerNumber",A.pagerNext="pagerNext",A.pagerPrevious="pagerPrevious",A.pagerScrolling="pagerScrolling",A.staticFilterClearAll="staticFilterClearAll",A.staticFilterSelect="staticFilterSelect",A.staticFilterDeselect="staticFilterDeselect",A.facetClearAll="facetClearAll",A.facetSearch="facetSearch",A.facetSelect="facetSelect",A.facetSelectAll="facetSelectAll",A.facetDeselect="facetDeselect",A.facetExclude="facetExclude",A.facetUnexclude="facetUnexclude",A.facetUpdateSort="facetUpdateSort",A.facetShowMore="showMoreFacetResults",A.facetShowLess="showLessFacetResults",A.queryError="query",A.queryErrorBack="errorBack",A.queryErrorClear="errorClearQuery",A.queryErrorRetry="errorRetry",A.recommendation="recommendation",A.recommendationInterfaceLoad="recommendationInterfaceLoad",A.recommendationOpen="recommendationOpen",A.likeSmartSnippet="likeSmartSnippet",A.dislikeSmartSnippet="dislikeSmartSnippet",A.expandSmartSnippet="expandSmartSnippet",A.collapseSmartSnippet="collapseSmartSnippet",A.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",A.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",A.sendSmartSnippetReason="sendSmartSnippetReason",A.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",A.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",A.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",A.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",A.openSmartSnippetSource="openSmartSnippetSource",A.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",A.openSmartSnippetInlineLink="openSmartSnippetInlineLink",A.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",A.recentQueryClick="recentQueriesClick",A.clearRecentQueries="clearRecentQueries",A.recentResultClick="recentResultClick",A.clearRecentResults="clearRecentResults",A.noResultsBack="noResultsBack",A.showMoreFoldedResults="showMoreFoldedResults",A.showLessFoldedResults="showLessFoldedResults",A.copyToClipboard="copyToClipboard",A.caseSendEmail="Case.SendEmail",A.feedItemTextPost="FeedItem.TextPost",A.caseAttach="caseAttach",A.caseDetach="caseDetach",A.retryGeneratedAnswer="retryGeneratedAnswer",A.likeGeneratedAnswer="likeGeneratedAnswer",A.dislikeGeneratedAnswer="dislikeGeneratedAnswer",A.openGeneratedAnswerSource="openGeneratedAnswerSource",A.generatedAnswerStreamEnd="generatedAnswerStreamEnd",A.historyForward="historyForward",A.historyBackward="historyBackward",A))(Dt||{});var li=S("facet/updateFacetAutoSelection",t=>v(t,{allow:new L({required:!0})}));var na={id:E},ah={...na,q:ce},EI=S("instantResults/register",t=>v(t,na)),di=S("instantResults/updateQuery",t=>v(t,ah)),kI=S("instantResults/clearExpired",t=>v(t,na));var pi=new T({required:!0,min:0}),fi=S("pagination/registerNumberOfResults",t=>v(t,pi)),mi=S("pagination/updateNumberOfResults",t=>v(t,pi)),gi=S("pagination/registerPage",t=>v(t,pi)),St=S("pagination/updatePage",t=>v(t,pi)),hi=S("pagination/nextPage"),yi=S("pagination/previousPage");var vt=S("query/updateQuery",t=>v(t,{q:new P,enableQuerySyntax:new L}));var ia=class extends pt{constructor(e){super(e);this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let r in e)for(let n in e[r].cache)if(e[r].cache[n].isActive)return e[r].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let r in e)for(let n in e[r].cache)if(e[r].cache[n].isActive)return e[r].cache[n];return null}get results(){var e;return(e=this.activeInstantResultCache)==null?void 0:e.results}get queryText(){var e;return(e=this.activeInstantResultQuery)!=null?e:ve().q}get responseTime(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.duration)!=null?r:Ae().duration}get numberOfResults(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.totalCountFiltered)!=null?r:Ae().response.totalCountFiltered}getSearchUID(){var r;return((r=this.activeInstantResultCache)==null?void 0:r.searchUid)||super.getSearchUID()}};var ul=()=>Re("analytics/instantResult/searchboxAsYouType",t=>t.makeSearchboxAsYouType(),t=>new ia(t));function ll(t){return t.type==="dateRange"}function dl(t){return`start${t}`}function pl(t){return`end${t}`}var sh=()=>({dateFacetValueMap:{}});function ch(t,e,r){let n=t.start,i=t.end;return yt(n)&&(n=Nr(n),r.dateFacetValueMap[e][dl(n)]=t.start),yt(i)&&(i=Nr(i),r.dateFacetValueMap[e][pl(i)]=t.end),{...t,start:n,end:i}}function uh(t,e){if(ll(t)){let{facetId:r,currentValues:n}=t;return e.dateFacetValueMap[r]={},{...t,currentValues:n.map(i=>ch(i,r,e))}}return t}function mr(t){var n;let e=sh();return{request:{...t,facets:(n=t.facets)==null?void 0:n.map(i=>uh(i,e))},mappings:e}}function lh(t,e,r){return{...t,start:r.dateFacetValueMap[e][dl(t.start)]||t.start,end:r.dateFacetValueMap[e][pl(t.end)]||t.end}}function dh(t,e){return t.facetId in e.dateFacetValueMap}function ph(t,e){return dh(t,e)?{...t,values:t.values.map(r=>lh(r,t.facetId,e))}:t}function Si(t,e){var r;return"success"in t?{success:{...t.success,facets:(r=t.success.facets)==null?void 0:r.map(i=>ph(i,e))}}:t}var fl=1,jr=5e3;var me=async(t,e)=>{var c,u;let r=vh(t),n=fh(t),i=mh(t),o=await ht(t,e),a=()=>t.pagination?t.pagination.firstResult+t.pagination.numberOfResults>jr?jr-t.pagination.firstResult:t.pagination.numberOfResults:void 0;return mr({...o,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},...r&&{cq:r},...n.length&&{facets:n},...t.pagination&&{numberOfResults:a(),firstResult:t.pagination.firstResult},...t.facetOptions&&{facetOptions:{freezeFacetOrder:t.facetOptions.freezeFacetOrder}},...((c=t.folding)==null?void 0:c.enabled)&&{filterField:t.folding.fields.collection,childField:t.folding.fields.parent,parentField:t.folding.fields.child,filterFieldRange:t.folding.filterFieldRange},...t.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:t.automaticFacetSet.desiredCount,numberOfValues:t.automaticFacetSet.numberOfValues,currentFacets:i}},...((u=t.generatedAnswer)==null?void 0:u.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:t.generatedAnswer.responseFormat}}}})};function fh(t){var e;return ui(hh(t),(e=t.facetOrder)!=null?e:[])}function mh(t){var r;let e=(r=t.automaticFacetSet)==null?void 0:r.set;return e?Object.values(e).map(n=>n.response).map(gh).filter(n=>n.currentValues.length>0):void 0}function gh(t){let{field:e,label:r,values:n}=t,i=n.filter(o=>o.state==="selected");return{field:e,label:r,currentValues:i}}function hh(t){return yh(t).filter(({facetId:e})=>{var r,n,i;return(i=(n=(r=t.facetOptions)==null?void 0:r.facets[e])==null?void 0:n.enabled)!=null?i:!0})}function yh(t){var e,r,n,i;return[...Sh((e=t.facetSet)!=null?e:{}),...ml((r=t.numericFacetSet)!=null?r:{}),...ml((n=t.dateFacetSet)!=null?n:{}),...et((i=t.categoryFacetSet)!=null?i:{})]}function Sh(t){return et(t).map(e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e)}function ml(t){return et(t).map(e=>{let n=e.currentValues.some(({state:i})=>i!=="idle");return e.generateAutomaticRanges&&!n?{...e,currentValues:[]}:e})}function vh(t){var o;let e=((o=t.advancedSearchQueries)==null?void 0:o.cq.trim())||"",r=Object.values(t.tabSet||{}).find(a=>a.isActive),n=(r==null?void 0:r.expression.trim())||"",i=bh(t);return[e,n,...i].filter(a=>!!a).join(" AND ")}function bh(t){return Object.values(t.staticFilterSet||{}).map(r=>{let n=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),i=n.map(o=>o.expression).join(" OR ");return n.length>1?`(${i})`:i})}var dE=S("didYouMean/enable"),pE=S("didYouMean/disable"),fE=S("didYouMean/automaticCorrections/disable"),mE=S("didYouMean/automaticCorrections/enable"),vi=S("didYouMean/correction",t=>v(t,E));var gl=()=>Re("analytics/didyoumean/automatic",t=>t.makeDidYouMeanAutomatic());function hl(){return{freezeFacetOrder:!1,facets:{}}}function yl(){return[]}function Sl(){return{}}function Lr(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function vl(){return{}}function bl(){return{}}function Al(){return{}}function bt(t){var e,r,n;return{context:t.context||Kn(),dictionaryFieldContext:t.dictionaryFieldContext||Gn(),facetSet:t.facetSet||Rn(),numericFacetSet:t.numericFacetSet||xn(),dateFacetSet:t.dateFacetSet||Cn(),categoryFacetSet:t.categoryFacetSet||An(),automaticFacetSet:(e=t.automaticFacetSet)!=null?e:bn(),pagination:t.pagination||Lr(),query:t.query||ve(),tabSet:t.tabSet||Al(),advancedSearchQueries:t.advancedSearchQueries||gt(),staticFilterSet:t.staticFilterSet||bl(),querySet:t.querySet||vl(),instantResults:t.instantResults||Sl(),sortCriteria:t.sortCriteria||Fn(),pipeline:t.pipeline||Yt(),searchHub:t.searchHub||dt(),facetOptions:t.facetOptions||hl(),facetOrder:(r=t.facetOrder)!=null?r:yl(),debug:(n=t.debug)!=null?n:un()}}var JE=new D({values:{undoneQuery:ce},options:{required:!0}}),Cl=()=>Re("analytics/trigger/query",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.queryModification.newQuery)?t.makeTriggerQuery():null});var bi=S("trigger/query/ignore",t=>v(t,new P({emptyAllowed:!0,required:!0}))),Ai=S("trigger/query/modification",t=>v(t,new D({values:{originalQuery:te,modification:te}})));var Tt=class{constructor(e,r=n=>{this.dispatch(vt({q:n}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},n){var u;let i=new Date().getTime(),o=Si(await this.extra.apiClient.search(r,n),e),a=new Date().getTime()-i,c=((u=this.getState().query)==null?void 0:u.q)||"";return{response:o,duration:a,queryExecuted:c,requestExecuted:r}}async process(e){var r,n,i;return(i=(n=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?n:await this.processQueryTriggersOrContinue(e))!=null?i:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return de(e.response)?(this.dispatch(He(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),n=this.getSuccessResponse(e);if(!n||!r.didYouMean)return null;let{enableDidYouMean:i,automaticallyCorrectQuery:o}=r.didYouMean,{results:a,queryCorrections:c}=n;if(!(a.length===0&&c.length!==0&&i&&o))return null;let s=this.getCurrentQuery(),{correctedQuery:l}=n.queryCorrections[0],f=await this.automaticallyRetryQueryWithCorrection(l);return de(f.response)?(this.dispatch(He(f.response.error)),this.rejectWithValue(f.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(e.queryExecuted,e.duration,r,n),this.extra),this.dispatch(ct(bt(this.getState()))),{...f,response:{...f.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:s,analyticsAction:gl()})}async processQueryTriggersOrContinue(e){var c,u;let r=this.getSuccessResponse(e);if(!r)return null;let n=((c=r.triggers.find(s=>s.type==="query"))==null?void 0:c.content)||"";if(!n)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===n)return this.dispatch(bi("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let o=this.getCurrentQuery(),a=await this.automaticallyRetryQueryWithTriggerModification(n);return de(a.response)?(this.dispatch(He(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(ct(bt(this.getState()))),{...a,response:{...a.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:Cl()})}processSuccessResponse(e){return this.dispatch(ct(bt(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Gr(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await me(this.getState()),{origin:"mainSearch"});return this.dispatch(vi(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Ai({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await me(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(e,r,n,i){var o,a;return{...n,query:{q:e,enableQuerySyntax:(a=(o=n.query)==null?void 0:o.enableQuerySyntax)!=null?a:ve().enableQuerySyntax},search:{...Ae(),duration:r,response:i,results:i.results}}}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var Bk=K("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;v(t,{q:new P,enableQuerySyntax:new L,clearFilters:new L}),t.clearFilters&&(r(dr()),r(ni())),r(li({allow:!0})),r(vt({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(St(1))}),_k=K("search/executeSearch",async(t,e)=>{let r=e.getState();return await Ci(r,e,t)}),Qk=K("search/fetchPage",async(t,e)=>{let r=e.getState();return await aa(r,e,t)}),$k=K("search/fetchMoreResults",async(t,e)=>{let r=e.getState();return await sa(e,r)}),Hk=K("search/fetchFacetValues",async(t,e)=>{let r=e.getState();return await Rh(e,t,r)}),zk=K("search/fetchInstantResults",async(t,e)=>oa(t,e)),Ah=async(t,e)=>{var n,i,o,a;let r=await me(t,e);return r.request={...r.request,firstResult:((i=(n=t.pagination)==null?void 0:n.firstResult)!=null?i:0)+((a=(o=t.search)==null?void 0:o.results.length)!=null?a:0)},r},Ch=async(t,e,r)=>{let n=await ht(t);return mr({...n,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},xh=async(t,e)=>{let r=await me(t,e);return r.request.numberOfResults=0,r},xl=t=>{var e;t.configuration.analytics.enabled&&Be.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})};async function oa(t,e){v(t,{id:E,q:E,maxResultsPerQuery:new T({required:!0,min:1}),cacheTimeout:new T});let{q:r,maxResultsPerQuery:n}=t,i=e.getState(),o=new Tt({...e,analyticsAction:ul()},s=>{e.dispatch(di({q:s,id:t.id}))}),a=await Ch(i,r,n),c=await o.fetchFromAPI(a,{origin:"instantResults",disableAbortWarning:!0}),u=await o.process(c);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function aa(t,e,r){xl(t);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:o}=e.extra,{description:a}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:o}),c=new Tt({...e,analyticsAction:r}),u=await me(t,a),s=await c.fetchFromAPI(u,{origin:"mainSearch"});return await c.process(s)}async function sa(t,e){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:i}=t.extra,{description:o}=await ra().prepare({getState:()=>t.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:i}),a=new Tt({...t,analyticsAction:ra()}),c=await Ah(e,o),u=await a.fetchFromAPI(c,{origin:"mainSearch"});return await a.process(u)}async function Rh(t,e,r){let{analyticsClientMiddleware:n,preprocessRequest:i,logger:o}=t.extra,{description:a}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:o}),c=new Tt({...t,analyticsAction:e}),u=await xh(r,a),s=await c.fetchFromAPI(u,{origin:"facetValues"});return await c.process(s)}async function Ci(t,e,r){xl(t);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:o}=e.extra,{description:a}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:o}),c=await me(t,a),u=new Tt({...e,analyticsAction:r}),s=await u.fetchFromAPI(c,{origin:"mainSearch"});return await u.process(s)}var qt=class{constructor(e,r=n=>{this.dispatch(vt({q:n}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},n){var u;let i=new Date().getTime(),o=Si(await this.extra.apiClient.search(r,n),e),a=new Date().getTime()-i,c=((u=this.getState().query)==null?void 0:u.q)||"";return{response:o,duration:a,queryExecuted:c,requestExecuted:r}}async process(e){var r,n,i;return(i=(n=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?n:await this.processQueryTriggersOrContinue(e))!=null?i:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return de(e.response)?(this.dispatch(He(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),n=this.getSuccessResponse(e);if(!n||!r.didYouMean)return null;let{enableDidYouMean:i,automaticallyCorrectQuery:o}=r.didYouMean,{results:a,queryCorrections:c}=n;if(!(a.length===0&&c.length!==0&&i&&o))return null;let s=this.getCurrentQuery(),{correctedQuery:l}=n.queryCorrections[0],f=await this.automaticallyRetryQueryWithCorrection(l);return de(f.response)?(this.dispatch(He(f.response.error)),this.rejectWithValue(f.response.error)):(this.dispatch(ct(bt(this.getState()))),{...f,response:{...f.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:s,analyticsAction:rr(Dt.didyoumeanAutomatic,this.getState)})}async processQueryTriggersOrContinue(e){var c,u;let r=this.getSuccessResponse(e);if(!r)return null;let n=((c=r.triggers.find(s=>s.type==="query"))==null?void 0:c.content)||"";if(!n)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===n)return this.dispatch(bi("")),null;let o=this.getCurrentQuery(),a=await this.automaticallyRetryQueryWithTriggerModification(n);return de(a.response)?(this.dispatch(He(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(ct(bt(this.getState()))),{...a,response:{...a.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:rr(Dt.triggerQuery,this.getState)})}processSuccessResponse(e){return this.dispatch(ct(bt(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Gr(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await me(this.getState()),{origin:"mainSearch"});return this.dispatch(vi(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Ai({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await me(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var TO=K("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;v(t,{q:new P,enableQuerySyntax:new L,clearFilters:new L}),t.clearFilters&&(r(dr()),r(ni())),r(li({allow:!0})),r(vt({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(St(1))}),Rl=K("search/executeSearch",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return Ci(r,e,t.legacy);wl(r);let n=Pl(t.next,r),i=await me(r,n),o=new qt({...e,analyticsAction:n}),a=await o.fetchFromAPI(i,{origin:"mainSearch"});return await o.process(a)}),qO=K("search/fetchPage",async(t,e)=>{let r=e.getState();if(wl(r),r.configuration.analytics.analyticsMode==="legacy"||!t.next)return aa(r,e,t.legacy);let n=new qt({...e,analyticsAction:t.next}),i=await me(r,t.next),o=await n.fetchFromAPI(i,{origin:"mainSearch"});return await n.process(o)}),MO=K("search/fetchMoreResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return sa(e,r);let n=rr(Dt.pagerScrolling,e.getState),i=new qt({...e,analyticsAction:n}),o=await wh(r,n),a=await i.fetchFromAPI(o,{origin:"mainSearch"});return await i.process(a)}),NO=K("search/fetchFacetValues",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return Ci(r,e,t.legacy);let n=Pl(t.next,r),i=new qt({...e,analyticsAction:n}),o=await Fh(r,n),a=await i.fetchFromAPI(o,{origin:"facetValues"});return await i.process(a)}),VO=K("search/fetchInstantResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return oa(t,e);v(t,{id:E,q:E,maxResultsPerQuery:new T({required:!0,min:1}),cacheTimeout:new T});let{q:n,maxResultsPerQuery:i}=t,o=rr(Dt.searchboxAsYouType,e.getState),a=new qt({...e,analyticsAction:o},l=>{e.dispatch(di({q:l,id:t.id}))}),c=await Ph(r,n,i),u=await a.fetchFromAPI(c,{origin:"instantResults",disableAbortWarning:!0}),s=await a.process(u);return"response"in s?{results:s.response.results,searchUid:s.response.searchUid,analyticsAction:s.analyticsAction,totalCountFiltered:s.response.totalCountFiltered,duration:s.duration}:s}),wh=async(t,e)=>{var n,i,o,a;let r=await me(t,e);return r.request={...r.request,firstResult:((i=(n=t.pagination)==null?void 0:n.firstResult)!=null?i:0)+((a=(o=t.search)==null?void 0:o.results.length)!=null?a:0)},r},Ph=async(t,e,r)=>{let n=await ht(t);return mr({...n,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},Fh=async(t,e)=>{let r=await me(t,e);return r.request.numberOfResults=0,r},wl=t=>{var e;t.configuration.analytics.enabled&&Be.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})},Pl=(t,e)=>({customData:t.getEventExtraPayload(e),actionCause:t.actionCause,type:t.actionCause});var Fl=ee(Lr(),t=>{t.addCase(fi,(e,r)=>{let n=ca(e),i=r.payload;e.defaultNumberOfResults=e.numberOfResults=i,e.firstResult=Ur(n,i)}).addCase(mi,(e,r)=>{e.numberOfResults=r.payload,e.firstResult=0}).addCase(jn,e=>{e.firstResult=0}).addCase(gi,(e,r)=>{let n=r.payload;e.firstResult=Ur(n,e.numberOfResults)}).addCase(St,(e,r)=>{let n=r.payload;e.firstResult=Ur(n,e.numberOfResults)}).addCase(yi,e=>{let r=ca(e),n=Math.max(r-1,fl);e.firstResult=Ur(n,e.numberOfResults)}).addCase(hi,e=>{let r=ca(e),n=Ih(e),i=Math.min(r+1,n);e.firstResult=Ur(i,e.numberOfResults)}).addCase(Se.fulfilled,(e,r)=>{r.payload&&(e.numberOfResults=r.payload.pagination.numberOfResults,e.firstResult=r.payload.pagination.firstResult)}).addCase(st,(e,r)=>{var n,i;e.firstResult=(n=r.payload.firstResult)!=null?n:e.firstResult,e.numberOfResults=(i=r.payload.numberOfResults)!=null?i:e.defaultNumberOfResults}).addCase(Rl.fulfilled,(e,r)=>{let{response:n}=r.payload;e.totalCountFiltered=n.totalCountFiltered}).addCase(cl.fulfilled,(e,r)=>{let{response:n}=r.payload;e.totalCountFiltered=n.pagination.totalCount}).addCase(ai,e=>{Ee(e)}).addCase(Ju,e=>{Ee(e)}).addCase(ku,e=>{Ee(e)}).addCase(Eu,e=>{Ee(e)}).addCase(Ou,e=>{Ee(e)}).addCase(tl,e=>{Ee(e)}).addCase(il,e=>{Ee(e)}).addCase(dr,e=>{Ee(e)}).addCase(rl,e=>{Ee(e)}).addCase(ol,e=>{Ee(e)}).addCase(Tu,e=>{Ee(e)}).addCase(Iu,e=>{Ee(e)})});function Ee(t){t.firstResult=Lr().firstResult}function ca(t){let{firstResult:e,numberOfResults:r}=t;return Eh(e,r)}function Ih(t){let{totalCountFiltered:e,numberOfResults:r}=t;return kh(e,r)}function Ur(t,e){return(t-1)*e}function Eh(t,e){return Math.round(t/e)+1}function kh(t,e){let r=Math.min(t,jr);return Math.ceil(r/e)}function ua(t){return t.addReducers({pagination:Fl}),{nextPage:hi,previousPage:yi,registerNumberOfResults:fi,registerPage:gi,updateNumberOfResults:mi,updatePage:St}}function At(t){let e,r=new Map,n=()=>r.size===0,i=o=>{try{let a=JSON.stringify(o),c=e!==a;return e=a,c}catch(a){return console.warn('Could not detect if state has changed, check the controller "get state method"',a),!0}};return{subscribe(o){o();let a=Symbol(),c;return n()&&(e=JSON.stringify(this.state),c=t.subscribe(()=>{i(this.state)&&r.forEach(u=>u())})),r.set(a,o),()=>{r.delete(a),n()&&c&&c()}},get state(){return{}}}}var Oh=new ge({id:new P({emptyAllowed:!0,required:!1,default:""}),numberOfRecommendations:new T({min:0})});function Il(t,e={}){if(!Dh(t))throw Me;let r=At(t),{dispatch:n}=t,i=()=>t.state,o=Ts(t,Oh,e.options,"buildRecommendationList");return o.id!==""&&n(nr({id:o.id})),o.numberOfRecommendations&&n(ua(t).updateNumberOfResults(o.numberOfRecommendations)),{...r,refresh(){n(ft())},get state(){let a=i();return{recommendations:a.recommendation.recommendations,error:a.recommendation.error,isLoading:a.recommendation.isLoading,searchResponseId:a.recommendation.searchUid}}}}function Dh(t){return t.addReducers({recommendation:ir,configuration:$e}),!0}function El(t,e,r){if(!Th(t))throw Me;let n=1e3,i={selectionDelay:n,debounceWait:n,...e.options},o;return{select:Bn(r,i.debounceWait,{isImmediate:!0}),beginDelayedSelect(){o=setTimeout(r,i.selectionDelay)},cancelPendingSelect(){o&&clearTimeout(o)}}}function Th(t){return t.addReducers({configuration:$e}),!0}function kl(t,e){let r=!1,n=()=>{r||(r=!0,t.dispatch(Vn(e.options.result)))};return El(t,e,()=>{n()})}var qh=["caseId","caseNumber"],Mh={caseId:"caseContext",caseNumber:"caseContext"},xi=class extends Error{constructor(e){super(`The key "${e}" is reserved for internal use. Use ${Mh[e]} to set this value.}`)}};function la(t){return qh.includes(t)}var Nh=new ge({values:new D({options:{required:!1}})});function Ol(t,e={}){if(!Lh(t))throw Me;let r=At(t),{dispatch:n}=t,i=()=>t.state,o=Ds(t,Nh,e.initialState,"buildContext");return o.values&&n(Et(o.values)),{...r,get state(){return{values:i().context.contextValues}},set(a){n(Et(a))},...i().configuration.analytics.analyticsMode==="legacy"?Vh(n):jh(n)}}var Vh=t=>({add(e,r){t(kt({contextKey:e,contextValue:r}))},remove(e){t(Ot(e))}}),jh=t=>({add(e,r){if(la(e))throw new xi(e);t(kt({contextKey:e,contextValue:r}))},remove(e){if(la(e))throw new xi(e);t(Ot(e))}});function Lh(t){return t.addReducers({context:Yn}),!0}function Dl(t,e){return Ol(t,e)}function Tl(t){if(!Uh(t))throw Me;let e=At(t),{dispatch:r}=t,n=()=>t.state;return{...e,get state(){return{values:n().dictionaryFieldContext.contextValues}},set(i){r(sr(i))},add(i,o){r(cr({field:i,key:o}))},remove(i){r(ur(i))}}}function Uh(t){return t.addReducers({dictionaryFieldContext:Jn}),!0}var Bh=new ge({content:new G({required:!0}),conditions:new G({required:!0}),priority:new T({required:!1,default:0,min:0}),fields:new W({required:!1,each:E})});function ql(t){if(!_h(t))throw Me;let e=[],r=n=>{n.forEach(i=>{if(Bh.validate(i),!i.conditions.every(a=>a instanceof Function))throw new hr("Each result template conditions should be a function that takes a result as an argument and returns a boolean")})};return{registerTemplates(...n){let i=[];r(n),n.forEach(o=>{let a={...o,priority:o.priority||0,fields:o.fields||[]};e.push(a),i.push(...a.fields)}),e.sort((o,a)=>a.priority-o.priority),i.length&&t.dispatch(lr(i))},selectTemplate(n){let i=e.find(o=>o.conditions.every(a=>a(n)));return i?i.content:null}}}function _h(t){return t.addReducers({fields:ri}),!0}ma();var da;(o=>{o.getResultProperty=Sr,o.fieldsMustBeDefined=Ia,o.fieldsMustNotBeDefined=Ea,o.fieldMustMatch=ka,o.fieldMustNotMatch=Oa})(da||(da={}));
/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
}));
//# sourceMappingURL=headless.js.map
