/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function (global, factory) {
    const isCommonjs = typeof exports === 'object' && typeof module !== 'undefined';
    
    if (isCommonjs) {
      return factory(exports);
    }
    
    const isAmd = typeof define === 'function' && define.amd;

    if (isAmd) {
      return define(['exports'], factory);
    }

    global = typeof globalThis !== 'undefined' ? globalThis : global || self;
    factory(global.CoveoHeadless = {});
  })(this, (function (exports) { 'use strict';
var Kb=Object.create;var Ws=Object.defineProperty;var Jb=Object.getOwnPropertyDescriptor;var Xb=Object.getOwnPropertyNames;var Zb=Object.getPrototypeOf,eF=Object.prototype.hasOwnProperty;var Fm=e=>Ws(e,"__esModule",{value:!0});var de=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Od=(e,t)=>{Fm(e);for(var r in t)Ws(e,r,{get:t[r],enumerable:!0})},A=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Xb(t))!eF.call(e,a)&&a!=="default"&&Ws(e,a,{get:()=>t[a],enumerable:!(r=Jb(t,a))||r.enumerable});return e},Ee=e=>A(Fm(Ws(e!=null?Kb(Zb(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var zd=de((UD,kr)=>{function Hd(e){return kr.exports=Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kr.exports.__esModule=!0,kr.exports.default=kr.exports,Hd(e)}kr.exports=Hd,kr.exports.__esModule=!0,kr.exports.default=kr.exports});var Qm=de((_D,Mi)=>{var Lm=zd().default;function lF(e,t){if(Lm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Lm(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Mi.exports=lF,Mi.exports.__esModule=!0,Mi.exports.default=Mi.exports});var Bm=de(($D,Ni)=>{var dF=zd().default,pF=Qm();function fF(e){var t=pF(e,"string");return dF(t)==="symbol"?t:String(t)}Ni.exports=fF,Ni.exports.__esModule=!0,Ni.exports.default=Ni.exports});var jm=de((HD,Li)=>{var mF=Bm();function gF(e,t,r){return t=mF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Li.exports=gF,Li.exports.__esModule=!0,Li.exports.default=Li.exports});var _m=de((zD,Qi)=>{var hF=jm();function Um(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function SF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Um(Object(r),!0).forEach(function(a){hF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Um(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}Qi.exports=SF,Qi.exports.__esModule=!0,Qi.exports.default=Qi.exports});var ji=de(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});var yF=_m();function CF(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var $m=CF(yF);function Qe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Hm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Gd=function(){return Math.random().toString(36).substring(7).split("").join(".")},Bi={INIT:"@@redux/INIT"+Gd(),REPLACE:"@@redux/REPLACE"+Gd(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Gd()}};function vF(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Wd(e,t,r){var a;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Qe(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(Qe(1));return r(Wd)(e,t)}if(typeof e!="function")throw new Error(Qe(2));var n=e,o=t,i=[],s=i,u=!1;function c(){s===i&&(s=i.slice())}function l(){if(u)throw new Error(Qe(3));return o}function d(g){if(typeof g!="function")throw new Error(Qe(4));if(u)throw new Error(Qe(5));var y=!0;return c(),s.push(g),function(){if(!!y){if(u)throw new Error(Qe(6));y=!1,c();var C=s.indexOf(g);s.splice(C,1),i=null}}}function f(g){if(!vF(g))throw new Error(Qe(7));if(typeof g.type=="undefined")throw new Error(Qe(8));if(u)throw new Error(Qe(9));try{u=!0,o=n(o,g)}finally{u=!1}for(var y=i=s,S=0;S<y.length;S++){var C=y[S];C()}return g}function p(g){if(typeof g!="function")throw new Error(Qe(10));n=g,f({type:Bi.REPLACE})}function m(){var g,y=d;return g={subscribe:function(C){if(typeof C!="object"||C===null)throw new Error(Qe(11));function R(){C.next&&C.next(l())}R();var P=y(R);return{unsubscribe:P}}},g[Hm]=function(){return this},g}return f({type:Bi.INIT}),a={dispatch:f,subscribe:d,getState:l,replaceReducer:p},a[Hm]=m,a}var xF=Wd;function bF(e){Object.keys(e).forEach(function(t){var r=e[t],a=r(void 0,{type:Bi.INIT});if(typeof a=="undefined")throw new Error(Qe(12));if(typeof r(void 0,{type:Bi.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Qe(13))})}function FF(e){for(var t=Object.keys(e),r={},a=0;a<t.length;a++){var n=t[a];typeof e[n]=="function"&&(r[n]=e[n])}var o=Object.keys(r),i,s;try{bF(r)}catch(u){s=u}return function(c,l){if(c===void 0&&(c={}),s)throw s;if(!1)var d;for(var f=!1,p={},m=0;m<o.length;m++){var g=o[m],y=r[g],S=c[g],C=y(S,l);if(typeof C=="undefined"){var R=l&&l.type;throw new Error(Qe(14))}p[g]=C,f=f||C!==S}return f=f||o.length!==Object.keys(c).length,f?p:c}}function zm(e,t){return function(){return t(e.apply(this,arguments))}}function RF(e,t){if(typeof e=="function")return zm(e,t);if(typeof e!="object"||e===null)throw new Error(Qe(16));var r={};for(var a in e){var n=e[a];typeof n=="function"&&(r[a]=zm(n,t))}return r}function Gm(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return a}:t.length===1?t[0]:t.reduce(function(a,n){return function(){return a(n.apply(void 0,arguments))}})}function AF(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){return function(){var n=a.apply(void 0,arguments),o=function(){throw new Error(Qe(15))},i={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(u){return u(i)});return o=Gm.apply(void 0,s)(n.dispatch),$m.default($m.default({},n),{},{dispatch:o})}}}Or.__DO_NOT_USE__ActionTypes=Bi;Or.applyMiddleware=AF;Or.bindActionCreators=RF;Or.combineReducers=FF;Or.compose=Gm;Or.createStore=Wd;Or.legacy_createStore=xF});var Bg=de((uV,Qg)=>{"use strict";function FR(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Qg.exports=RR;function RR(e,t,r){var a=r&&r.stringify||FR,n=1;if(typeof e=="object"&&e!==null){var o=t.length+n;if(o===1)return e;var i=new Array(o);i[0]=a(e);for(var s=1;s<o;s++)i[s]=a(t[s]);return i.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",l=1-n,d=-1,f=e&&e.length||0,p=0;p<f;){if(e.charCodeAt(p)===37&&p+1<f){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(l>=u||t[l]==null)break;d<p&&(c+=e.slice(d,p)),c+=Number(t[l]),d=p+2,p++;break;case 105:if(l>=u||t[l]==null)break;d<p&&(c+=e.slice(d,p)),c+=Math.floor(Number(t[l])),d=p+2,p++;break;case 79:case 111:case 106:if(l>=u||t[l]===void 0)break;d<p&&(c+=e.slice(d,p));var m=typeof t[l];if(m==="string"){c+="'"+t[l]+"'",d=p+2,p++;break}if(m==="function"){c+=t[l].name||"<anonymous>",d=p+2,p++;break}c+=a(t[l]),d=p+2,p++;break;case 115:if(l>=u)break;d<p&&(c+=e.slice(d,p)),c+=String(t[l]),d=p+2,p++;break;case 37:d<p&&(c+=e.slice(d,p)),c+="%",d=p+2,p++,l--;break}++l}++p}return d===-1?e:(d<f&&(c+=e.slice(d)),c)}});var Xi=de((lV,uc)=>{"use strict";var jg=Bg();uc.exports=Tr;var Ki=QR().console||{},AR={mapHttpRequest:cc,mapHttpResponse:cc,wrapRequestSerializer:fp,wrapResponseSerializer:fp,wrapErrorSerializer:fp,req:cc,res:cc,err:_g,errWithCause:_g};function ic(e,t){return e==="silent"?1/0:t.levels.values[e]}var lp=Symbol("pino.logFuncs"),dp=Symbol("pino.hierarchy"),PR={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Ug(e,t){let r={logger:t,parent:e[dp]};t[dp]=r}function wR(e,t,r){let a={};t.forEach(n=>{a[n]=r[n]?r[n]:Ki[n]||Ki[PR[n]||"log"]||Ji}),e[lp]=a}function ER(e,t){return Array.isArray(e)?e.filter(function(a){return a!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Tr(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||Ki;e.browser.write&&(e.browser.asObject=!0);let a=e.serializers||{},n=ER(e.browser.serialize,a),o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let i=Object.keys(e.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(i);typeof r=="function"&&s.forEach(function(g){r[g]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let u=e.level||"info",c=Object.create(r);c.log||(c.log=Ji),wR(c,s,r),Ug({},c),Object.defineProperty(c,"levelVal",{get:d}),Object.defineProperty(c,"level",{get:f,set:p});let l={transmit:t,serialize:n,asObject:e.browser.asObject,levels:s,timestamp:MR(e)};c.levels=IR(e),c.level=u,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Ji,c.serializers=a,c._serialize=n,c._stdErrSerialize=o,c.child=m,t&&(c._logEvent=pp());function d(){return ic(this.level,this)}function f(){return this._level}function p(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,Qa(this,l,c,"error"),Qa(this,l,c,"fatal"),Qa(this,l,c,"warn"),Qa(this,l,c,"info"),Qa(this,l,c,"debug"),Qa(this,l,c,"trace"),i.forEach(y=>{Qa(this,l,c,y)})}function m(g,y){if(!g)throw new Error("missing bindings for child Pino");y=y||{},n&&g.serializers&&(y.serializers=g.serializers);let S=y.serializers;if(n&&S){var C=Object.assign({},a,S),R=e.browser.serialize===!0?Object.keys(C):n;delete g.serializers,sc([g],R,C,this._stdErrSerialize)}function P(G){this._childLevel=(G._childLevel|0)+1,this.bindings=g,C&&(this.serializers=C,this._serialize=R),t&&(this._logEvent=pp([].concat(G._logEvent.bindings,g)))}P.prototype=this;let Q=new P(this);return Ug(this,Q),Q.level=this.level,Q}return c}function IR(e){let t=e.customLevels||{},r=Object.assign({},Tr.levels.values,t),a=Object.assign({},Tr.levels.labels,kR(t));return{values:r,labels:a}}function kR(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}Tr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Tr.stdSerializers=AR;Tr.stdTimeFunctions=Object.assign({},{nullTime:$g,epochTime:Hg,unixTime:NR,isoTime:LR});function OR(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[dp];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function Qa(e,t,r,a){if(e[a]=ic(e.level,r)>ic(a,r)?Ji:r[lp][a],!t.transmit&&e[a]===Ji)return;e[a]=TR(e,t,r,a);let n=OR(e);n.length!==0&&(e[a]=qR(n,e[a]))}function qR(e,t){return function(){return t.apply(this,[...e,...arguments])}}function TR(e,t,r,a){return function(n){return function(){let i=t.timestamp(),s=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Ki?Ki:this;for(var c=0;c<s.length;c++)s[c]=arguments[c];if(t.serialize&&!t.asObject&&sc(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(u,DR(this,a,s,i)):n.apply(u,s),t.transmit){let l=t.transmit.level||e._level,d=r.levels.values[l],f=r.levels.values[a];if(f<d)return;VR(this,{ts:i,methodLevel:a,methodValue:f,transmitLevel:l,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:ic(e._level,r)},s)}}}(e[lp][a])}function DR(e,t,r,a){e._serialize&&sc(r,e._serialize,e.serializers,e._stdErrSerialize);let n=r.slice(),o=n[0],i={};a&&(i.time=a),i.level=e.levels.values[t];let s=(e._childLevel|0)+1;if(s<1&&(s=1),o!==null&&typeof o=="object"){for(;s--&&typeof n[0]=="object";)Object.assign(i,n.shift());o=n.length?jg(n.shift(),n):void 0}else typeof o=="string"&&(o=jg(n.shift(),n));return o!==void 0&&(i.msg=o),i}function sc(e,t,r,a){for(let n in e)if(a&&e[n]instanceof Error)e[n]=Tr.stdSerializers.err(e[n]);else if(typeof e[n]=="object"&&!Array.isArray(e[n]))for(let o in e[n])t&&t.indexOf(o)>-1&&o in r&&(e[n][o]=r[o](e[n][o]))}function VR(e,t,r){let a=t.send,n=t.ts,o=t.methodLevel,i=t.methodValue,s=t.val,u=e._logEvent.bindings;sc(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(c){return u.indexOf(c)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=i,a(o,e._logEvent,s),e._logEvent=pp(u)}function pp(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function _g(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function MR(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?$g:Hg}function cc(){return{}}function fp(e){return e}function Ji(){}function $g(){return!1}function Hg(){return Date.now()}function NR(){return Math.round(Date.now()/1e3)}function LR(){return new Date(Date.now()).toISOString()}function QR(){function e(t){return typeof t!="undefined"&&t}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}uc.exports.default=Tr;uc.exports.pino=Tr});var Yg=de((dV,Wg)=>{var BR="[object Object]";function jR(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function UR(e,t){return function(r){return e(t(r))}}var _R=Function.prototype,zg=Object.prototype,Gg=_R.toString,$R=zg.hasOwnProperty,HR=Gg.call(Object),zR=zg.toString,GR=UR(Object.getPrototypeOf,Object);function WR(e){return!!e&&typeof e=="object"}function YR(e){if(!WR(e)||zR.call(e)!=BR||jR(e))return!1;var t=GR(e);if(t===null)return!0;var r=$R.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Gg.call(r)==HR}Wg.exports=YR});var Kg=de(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.default=tA;var KR=ji(),JR=Yg(),XR=ZR(JR);function ZR(e){return e&&e.__esModule?e:{default:e}}function eA(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else return Array.from(e)}var mp=function(t){return typeof t=="function"};function tA(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function a(){var o=[],i=[],s={getState:function(){return mp(r)?r(o):r},getActions:function(){return o},dispatch:function(c){if(!(0,XR.default)(c))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof c.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(c));o.push(c);for(var l=0;l<i.length;l++)i[l]();return c},clearActions:function(){o=[]},subscribe:function(c){return mp(c)&&i.push(c),function(){var l=i.indexOf(c);l<0||i.splice(l,1)}},replaceReducer:function(c){if(!mp(c))throw new Error("Expected the nextReducer to be a function.")}};return s}var n=KR.applyMiddleware.apply(void 0,eA(e))(a);return n()}}});var mc=de((hp,Sp)=>{(function(e,t){typeof hp=="object"&&typeof Sp!="undefined"?Sp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs=t()})(hp,function(){"use strict";var e=1e3,t=6e4,r=36e5,a="millisecond",n="second",o="minute",i="hour",s="day",u="week",c="month",l="quarter",d="year",f="date",p="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_){var N=["th","st","nd","rd"],B=_%100;return"["+_+(N[(B-20)%10]||N[B]||N[0])+"]"}},S=function(_,N,B){var Y=String(_);return!Y||Y.length>=N?_:""+Array(N+1-Y.length).join(B)+_},C={s:S,z:function(_){var N=-_.utcOffset(),B=Math.abs(N),Y=Math.floor(B/60),j=B%60;return(N<=0?"+":"-")+S(Y,2,"0")+":"+S(j,2,"0")},m:function _(N,B){if(N.date()<B.date())return-_(B,N);var Y=12*(B.year()-N.year())+(B.month()-N.month()),j=N.clone().add(Y,c),re=B-j<0,ne=N.clone().add(Y+(re?-1:1),c);return+(-(Y+(B-j)/(re?j-ne:ne-j))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:c,y:d,w:u,d:s,D:f,h:i,m:o,s:n,ms:a,Q:l}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},R="en",P={};P[R]=y;var Q="$isDayjsObject",G=function(_){return _ instanceof pe||!(!_||!_[Q])},Z=function _(N,B,Y){var j;if(!N)return R;if(typeof N=="string"){var re=N.toLowerCase();P[re]&&(j=re),B&&(P[re]=B,j=re);var ne=N.split("-");if(!j&&ne.length>1)return _(ne[0])}else{var le=N.name;P[le]=N,j=le}return!Y&&j&&(R=j),j||!Y&&R},$=function(_,N){if(G(_))return _.clone();var B=typeof N=="object"?N:{};return B.date=_,B.args=arguments,new pe(B)},H=C;H.l=Z,H.i=G,H.w=function(_,N){return $(_,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var pe=function(){function _(B){this.$L=Z(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[Q]=!0}var N=_.prototype;return N.parse=function(B){this.$d=function(Y){var j=Y.date,re=Y.utc;if(j===null)return new Date(NaN);if(H.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var ne=j.match(m);if(ne){var le=ne[2]-1||0,be=(ne[7]||"0").substring(0,3);return re?new Date(Date.UTC(ne[1],le,ne[3]||1,ne[4]||0,ne[5]||0,ne[6]||0,be)):new Date(ne[1],le,ne[3]||1,ne[4]||0,ne[5]||0,ne[6]||0,be)}}return new Date(j)}(B),this.init()},N.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},N.$utils=function(){return H},N.isValid=function(){return this.$d.toString()!==p},N.isSame=function(B,Y){var j=$(B);return this.startOf(Y)<=j&&j<=this.endOf(Y)},N.isAfter=function(B,Y){return $(B)<this.startOf(Y)},N.isBefore=function(B,Y){return this.endOf(Y)<$(B)},N.$g=function(B,Y,j){return H.u(B)?this[Y]:this.set(j,B)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(B,Y){var j=this,re=!!H.u(Y)||Y,ne=H.p(B),le=function(wt,Ve){var it=H.w(j.$u?Date.UTC(j.$y,Ve,wt):new Date(j.$y,Ve,wt),j);return re?it:it.endOf(s)},be=function(wt,Ve){return H.w(j.toDate()[wt].apply(j.toDate("s"),(re?[0,0,0,0]:[23,59,59,999]).slice(Ve)),j)},we=this.$W,De=this.$M,Xe=this.$D,Kr="set"+(this.$u?"UTC":"");switch(ne){case d:return re?le(1,0):le(31,11);case c:return re?le(1,De):le(0,De+1);case u:var Bt=this.$locale().weekStart||0,Er=(we<Bt?we+7:we)-Bt;return le(re?Xe-Er:Xe+(6-Er),De);case s:case f:return be(Kr+"Hours",0);case i:return be(Kr+"Minutes",1);case o:return be(Kr+"Seconds",2);case n:return be(Kr+"Milliseconds",3);default:return this.clone()}},N.endOf=function(B){return this.startOf(B,!1)},N.$set=function(B,Y){var j,re=H.p(B),ne="set"+(this.$u?"UTC":""),le=(j={},j[s]=ne+"Date",j[f]=ne+"Date",j[c]=ne+"Month",j[d]=ne+"FullYear",j[i]=ne+"Hours",j[o]=ne+"Minutes",j[n]=ne+"Seconds",j[a]=ne+"Milliseconds",j)[re],be=re===s?this.$D+(Y-this.$W):Y;if(re===c||re===d){var we=this.clone().set(f,1);we.$d[le](be),we.init(),this.$d=we.set(f,Math.min(this.$D,we.daysInMonth())).$d}else le&&this.$d[le](be);return this.init(),this},N.set=function(B,Y){return this.clone().$set(B,Y)},N.get=function(B){return this[H.p(B)]()},N.add=function(B,Y){var j,re=this;B=Number(B);var ne=H.p(Y),le=function(De){var Xe=$(re);return H.w(Xe.date(Xe.date()+Math.round(De*B)),re)};if(ne===c)return this.set(c,this.$M+B);if(ne===d)return this.set(d,this.$y+B);if(ne===s)return le(1);if(ne===u)return le(7);var be=(j={},j[o]=t,j[i]=r,j[n]=e,j)[ne]||1,we=this.$d.getTime()+B*be;return H.w(we,this)},N.subtract=function(B,Y){return this.add(-1*B,Y)},N.format=function(B){var Y=this,j=this.$locale();if(!this.isValid())return j.invalidDate||p;var re=B||"YYYY-MM-DDTHH:mm:ssZ",ne=H.z(this),le=this.$H,be=this.$m,we=this.$M,De=j.weekdays,Xe=j.months,Kr=j.meridiem,Bt=function(Ve,it,Ir,Jr){return Ve&&(Ve[it]||Ve(Y,re))||Ir[it].slice(0,Jr)},Er=function(Ve){return H.s(le%12||12,Ve,"0")},wt=Kr||function(Ve,it,Ir){var Jr=Ve<12?"AM":"PM";return Ir?Jr.toLowerCase():Jr};return re.replace(g,function(Ve,it){return it||function(Ir){switch(Ir){case"YY":return String(Y.$y).slice(-2);case"YYYY":return H.s(Y.$y,4,"0");case"M":return we+1;case"MM":return H.s(we+1,2,"0");case"MMM":return Bt(j.monthsShort,we,Xe,3);case"MMMM":return Bt(Xe,we);case"D":return Y.$D;case"DD":return H.s(Y.$D,2,"0");case"d":return String(Y.$W);case"dd":return Bt(j.weekdaysMin,Y.$W,De,2);case"ddd":return Bt(j.weekdaysShort,Y.$W,De,3);case"dddd":return De[Y.$W];case"H":return String(le);case"HH":return H.s(le,2,"0");case"h":return Er(1);case"hh":return Er(2);case"a":return wt(le,be,!0);case"A":return wt(le,be,!1);case"m":return String(be);case"mm":return H.s(be,2,"0");case"s":return String(Y.$s);case"ss":return H.s(Y.$s,2,"0");case"SSS":return H.s(Y.$ms,3,"0");case"Z":return ne}return null}(Ve)||ne.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(B,Y,j){var re,ne=this,le=H.p(Y),be=$(B),we=(be.utcOffset()-this.utcOffset())*t,De=this-be,Xe=function(){return H.m(ne,be)};switch(le){case d:re=Xe()/12;break;case c:re=Xe();break;case l:re=Xe()/3;break;case u:re=(De-we)/6048e5;break;case s:re=(De-we)/864e5;break;case i:re=De/r;break;case o:re=De/t;break;case n:re=De/e;break;default:re=De}return j?re:H.a(re)},N.daysInMonth=function(){return this.endOf(c).$D},N.$locale=function(){return P[this.$L]},N.locale=function(B,Y){if(!B)return this.$L;var j=this.clone(),re=Z(B,Y,!0);return re&&(j.$L=re),j},N.clone=function(){return H.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},_}(),he=pe.prototype;return $.prototype=he,[["$ms",a],["$s",n],["$m",o],["$H",i],["$W",s],["$M",c],["$y",d],["$D",f]].forEach(function(_){he[_[1]]=function(N){return this.$g(N,_[0],_[1])}}),$.extend=function(_,N){return _.$i||(_(N,pe,$),_.$i=!0),$},$.locale=Z,$.isDayjs=G,$.unix=function(_){return $(1e3*_)},$.en=P[R],$.Ls=P,$.p={},$})});var th=de((yp,Cp)=>{(function(e,t){typeof yp=="object"&&typeof Cp!="undefined"?Cp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_timezone=t()})(yp,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,a,n){var o,i=function(l,d,f){f===void 0&&(f={});var p=new Date(l),m=function(g,y){y===void 0&&(y={});var S=y.timeZoneName||"short",C=g+"|"+S,R=t[C];return R||(R=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:S}),t[C]=R),R}(d,f);return m.formatToParts(p)},s=function(l,d){for(var f=i(l,d),p=[],m=0;m<f.length;m+=1){var g=f[m],y=g.type,S=g.value,C=e[y];C>=0&&(p[C]=parseInt(S,10))}var R=p[3],P=R===24?0:R,Q=p[0]+"-"+p[1]+"-"+p[2]+" "+P+":"+p[4]+":"+p[5]+":000",G=+l;return(n.utc(Q).valueOf()-(G-=G%1e3))/6e4},u=a.prototype;u.tz=function(l,d){l===void 0&&(l=o);var f=this.utcOffset(),p=this.toDate(),m=p.toLocaleString("en-US",{timeZone:l}),g=Math.round((p-new Date(m))/1e3/60),y=n(m,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(p.getTimezoneOffset()/15)-g,!0);if(d){var S=y.utcOffset();y=y.add(f-S,"minute")}return y.$x.$timezone=l,y},u.offsetName=function(l){var d=this.$x.$timezone||n.tz.guess(),f=i(this.valueOf(),d,{timeZoneName:l}).find(function(p){return p.type.toLowerCase()==="timezonename"});return f&&f.value};var c=u.startOf;u.startOf=function(l,d){if(!this.$x||!this.$x.$timezone)return c.call(this,l,d);var f=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(f,l,d).tz(this.$x.$timezone,!0)},n.tz=function(l,d,f){var p=f&&d,m=f||d||o,g=s(+n(),m);if(typeof l!="string")return n(l).tz(m);var y=function(P,Q,G){var Z=P-60*Q*1e3,$=s(Z,G);if(Q===$)return[Z,Q];var H=s(Z-=60*($-Q)*1e3,G);return $===H?[Z,$]:[P-60*Math.min($,H)*1e3,Math.max($,H)]}(n.utc(l,p).valueOf(),g,m),S=y[0],C=y[1],R=n(S).utcOffset(C);return R.$x.$timezone=m,R},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(l){o=l}}})});var rh=de((vp,xp)=>{(function(e,t){typeof vp=="object"&&typeof xp!="undefined"?xp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_utc=t()})(vp,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(a,n,o){var i=n.prototype;o.utc=function(p){var m={date:p,utc:!0,args:arguments};return new n(m)},i.utc=function(p){var m=o(this.toDate(),{locale:this.$L,utc:!0});return p?m.add(this.utcOffset(),e):m},i.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),s.call(this,p)};var u=i.init;i.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else u.call(this)};var c=i.utcOffset;i.utcOffset=function(p,m){var g=this.$utils().u;if(g(p))return this.$u?0:g(this.$offset)?c.call(this):this.$offset;if(typeof p=="string"&&(p=function(R){R===void 0&&(R="");var P=R.match(t);if(!P)return null;var Q=(""+P[0]).match(r)||["-",0,0],G=Q[0],Z=60*+Q[1]+ +Q[2];return Z===0?0:G==="+"?Z:-Z}(p),p===null))return this;var y=Math.abs(p)<=16?60*p:p,S=this;if(m)return S.$offset=y,S.$u=p===0,S;if(p!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(S=this.local().add(y+C,e)).$offset=y,S.$x.$localOffset=C}else S=this.utc();return S};var l=i.format;i.format=function(p){var m=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,m)},i.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(p){return p==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=i.diff;i.diff=function(p,m,g){if(p&&this.$u===p.$u)return f.call(this,p,m,g);var y=this.local(),S=o(p).local();return f.call(y,S,m,g)}}})});var nh=de((RV,ah)=>{ah.exports=fetch});var oh=de(es=>{"use strict";var gc=es&&es.__assign||function(){return gc=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},gc.apply(this,arguments)};Object.defineProperty(es,"__esModule",{value:!0});var cA={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function uA(e){var t=gc(gc({},cA),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}es.getSanitizedOptions=uA});var ih=de(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});function lA(e){var t=Math.random()*e;return Math.round(t)}bp.fullJitter=lA});var sh=de(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});function dA(e){return e}Fp.noJitter=dA});var ch=de(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});var pA=ih(),fA=sh();function mA(e){switch(e.jitter){case"full":return pA.fullJitter;case"none":default:return fA.noJitter}}Rp.JitterFactory=mA});var Pp=de(Ap=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});var gA=ch(),hA=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=gA.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,a=this.numOfDelayedAttempts,n=t*Math.pow(r,a);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();Ap.Delay=hA});var uh=de(Vr=>{"use strict";var SA=Vr&&Vr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),yA=Vr&&Vr.__awaiter||function(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(e,t||[])).next())})},CA=Vr&&Vr.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Vr,"__esModule",{value:!0});var vA=Pp(),xA=function(e){SA(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return yA(this,void 0,void 0,function(){return CA(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(vA.Delay);Vr.SkipFirstDelay=xA});var lh=de(ts=>{"use strict";var bA=ts&&ts.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(ts,"__esModule",{value:!0});var FA=Pp(),RA=function(e){bA(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(FA.Delay);ts.AlwaysDelay=RA});var dh=de(wp=>{"use strict";Object.defineProperty(wp,"__esModule",{value:!0});var AA=uh(),PA=lh();function wA(e,t){var r=EA(e);return r.setAttemptNumber(t),r}wp.DelayFactory=wA;function EA(e){return e.delayFirstAttempt?new PA.AlwaysDelay(e):new AA.SkipFirstDelay(e)}});var ph=de(Ba=>{"use strict";var Ep=Ba&&Ba.__awaiter||function(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(e,t||[])).next())})},Ip=Ba&&Ba.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Ba,"__esModule",{value:!0});var IA=oh(),kA=dh();function OA(e,t){return t===void 0&&(t={}),Ep(this,void 0,void 0,function(){var r,a;return Ip(this,function(n){switch(n.label){case 0:return r=IA.getSanitizedOptions(t),a=new qA(e,r),[4,a.execute()];case 1:return[2,n.sent()]}})})}Ba.backOff=OA;var qA=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return Ep(this,void 0,void 0,function(){var t,r;return Ip(this,function(a){switch(a.label){case 0:if(this.attemptLimitReached)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return a.sent(),[4,this.request()];case 3:return[2,a.sent()];case 4:return t=a.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=a.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return Ep(this,void 0,void 0,function(){var t;return Ip(this,function(r){switch(r.label){case 0:return t=kA.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var mh=de((VV,fh)=>{"use strict";function TA(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,a=0;for(let n=0;n<e.length;n++)r<<=6,r|=VA(e[n]),a+=6,a===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=a=0);return a===12?(r>>=4,t+=String.fromCharCode(r)):a===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var DA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function VA(e){let t=DA.indexOf(e);return t<0?void 0:t}fh.exports=TA});var hh=de((MV,gh)=>{"use strict";function MA(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let a=[void 0,void 0,void 0,void 0];a[0]=e.charCodeAt(t)>>2,a[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(a[1]|=e.charCodeAt(t+1)>>4,a[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(a[2]|=e.charCodeAt(t+2)>>6,a[3]=e.charCodeAt(t+2)&63);for(let n=0;n<a.length;n++)typeof a[n]=="undefined"?r+="=":r+=LA(a[n])}return r}var NA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function LA(e){if(e>=0&&e<64)return NA[e]}gh.exports=MA});var kp=de((NV,Sh)=>{"use strict";var QA=mh(),BA=hh();Sh.exports={atob:QA,btoa:BA}});var qh=de((XM,Oh)=>{"use strict";var Tp=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!Tp)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!Tp.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');Oh.exports.AbortController=Tp.AbortController});var gy=de((yf,Cf)=>{(function(e,t){typeof yf=="object"&&typeof Cf!="undefined"?Cf.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_quarterOfYear=t()})(yf,function(){"use strict";var e="month",t="quarter";return function(r,a){var n=a.prototype;n.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var o=n.add;n.add=function(s,u){return s=Number(s),this.$utils().p(u)===t?this.add(3*s,e):o.bind(this)(s,u)};var i=n.startOf;n.startOf=function(s,u){var c=this.$utils(),l=!!c.u(u)||u;if(c.p(s)===t){var d=this.quarter()-1;return l?this.month(3*d).startOf(e).startOf("day"):this.month(3*d+2).endOf(e).endOf("day")}return i.bind(this)(s,u)}}})});var hy=de((vf,xf)=>{(function(e,t){typeof vf=="object"&&typeof xf!="undefined"?xf.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_customParseFormat=t()})(vf,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,o={},i=function(p){return(p=+p)+(p>68?1900:2e3)},s=function(p){return function(m){this[p]=+m}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(m){if(!m||m==="Z")return 0;var g=m.match(/([+-]|\d\d)/g),y=60*g[1]+(+g[2]||0);return y===0?0:g[0]==="+"?-y:y}(p)}],c=function(p){var m=o[p];return m&&(m.indexOf?m:m.s.concat(m.f))},l=function(p,m){var g,y=o.meridiem;if(y){for(var S=1;S<=24;S+=1)if(p.indexOf(y(S,0,m))>-1){g=S>12;break}}else g=p===(m?"pm":"PM");return g},d={A:[n,function(p){this.afternoon=l(p,!1)}],a:[n,function(p){this.afternoon=l(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[a,s("seconds")],ss:[a,s("seconds")],m:[a,s("minutes")],mm:[a,s("minutes")],H:[a,s("hours")],h:[a,s("hours")],HH:[a,s("hours")],hh:[a,s("hours")],D:[a,s("day")],DD:[r,s("day")],Do:[n,function(p){var m=o.ordinal,g=p.match(/\d+/);if(this.day=g[0],m)for(var y=1;y<=31;y+=1)m(y).replace(/\[|\]/g,"")===p&&(this.day=y)}],M:[a,s("month")],MM:[r,s("month")],MMM:[n,function(p){var m=c("months"),g=(c("monthsShort")||m.map(function(y){return y.slice(0,3)})).indexOf(p)+1;if(g<1)throw new Error;this.month=g%12||g}],MMMM:[n,function(p){var m=c("months").indexOf(p)+1;if(m<1)throw new Error;this.month=m%12||m}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(p){this.year=i(p)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function f(p){var m,g;m=p,g=o&&o.formats;for(var y=(p=m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Z,$,H){var pe=H&&H.toUpperCase();return $||g[H]||e[H]||g[pe].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(he,_,N){return _||N.slice(1)})})).match(t),S=y.length,C=0;C<S;C+=1){var R=y[C],P=d[R],Q=P&&P[0],G=P&&P[1];y[C]=G?{regex:Q,parser:G}:R.replace(/^\[|\]$/g,"")}return function(Z){for(var $={},H=0,pe=0;H<S;H+=1){var he=y[H];if(typeof he=="string")pe+=he.length;else{var _=he.regex,N=he.parser,B=Z.slice(pe),Y=_.exec(B)[0];N.call($,Y),Z=Z.replace(Y,"")}}return function(j){var re=j.afternoon;if(re!==void 0){var ne=j.hours;re?ne<12&&(j.hours+=12):ne===12&&(j.hours=0),delete j.afternoon}}($),$}}return function(p,m,g){g.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(i=p.parseTwoDigitYear);var y=m.prototype,S=y.parse;y.parse=function(C){var R=C.date,P=C.utc,Q=C.args;this.$u=P;var G=Q[1];if(typeof G=="string"){var Z=Q[2]===!0,$=Q[3]===!0,H=Z||$,pe=Q[2];$&&(pe=Q[2]),o=this.$locale(),!Z&&pe&&(o=g.Ls[pe]),this.$d=function(B,Y,j){try{if(["x","X"].indexOf(Y)>-1)return new Date((Y==="X"?1e3:1)*B);var re=f(Y)(B),ne=re.year,le=re.month,be=re.day,we=re.hours,De=re.minutes,Xe=re.seconds,Kr=re.milliseconds,Bt=re.zone,Er=new Date,wt=be||(ne||le?1:Er.getDate()),Ve=ne||Er.getFullYear(),it=0;ne&&!le||(it=le>0?le-1:Er.getMonth());var Ir=we||0,Jr=De||0,Id=Xe||0,kd=Kr||0;return Bt?new Date(Date.UTC(Ve,it,wt,Ir,Jr,Id,kd+60*Bt.offset*1e3)):j?new Date(Date.UTC(Ve,it,wt,Ir,Jr,Id,kd)):new Date(Ve,it,wt,Ir,Jr,Id,kd)}catch{return new Date("")}}(R,G,P),this.init(),pe&&pe!==!0&&(this.$L=this.locale(pe).$L),H&&R!=this.format(G)&&(this.$d=new Date("")),o={}}else if(G instanceof Array)for(var he=G.length,_=1;_<=he;_+=1){Q[1]=G[_-1];var N=g.apply(this,Q);if(N.isValid()){this.$d=N.$d,this.$L=N.$L,this.init();break}_===he&&(this.$d=new Date(""))}else S.call(this,C)}}})});var $y=de((KH,_y)=>{var aI=/(^|; )Coveo-Pendragon=([^;]*)/;_y.exports=()=>aI.exec(document.cookie)?.pop()||null});Od(exports,{API_DATE_FORMAT:()=>go,DefaultFieldsToInclude:()=>Vp,EcommerceDefaultFieldsToInclude:()=>_h,HighlightUtils:()=>jp,MinimumFieldsToInclude:()=>wc,ResultTemplatesHelpers:()=>bm,SortBy:()=>Ot,SortOrder:()=>Nr,TestUtils:()=>kD,VERSION:()=>Gn,analyticsUrl:()=>vc,baseFacetResponseSelector:()=>Dt,buildAutomaticFacetGenerator:()=>Sb,buildBreadcrumbManager:()=>mx,buildCategoryFacet:()=>BC,buildCategoryFieldSuggestions:()=>fb,buildContext:()=>SC,buildController:()=>V,buildCriterionExpression:()=>Wt,buildDateFacet:()=>iv,buildDateFilter:()=>xv,buildDateRange:()=>Fa,buildDateSortCriterion:()=>Ec,buildDictionaryFieldContext:()=>yC,buildDidYouMean:()=>vC,buildExecuteTrigger:()=>Yx,buildFacet:()=>XC,buildFacetConditionsManager:()=>db,buildFacetManager:()=>px,buildFieldSortCriterion:()=>Ic,buildFieldSuggestions:()=>pb,buildFoldedResultList:()=>zx,buildGeneratedAnswer:()=>Tb,buildHistoryManager:()=>Nv,buildInstantResults:()=>rx,buildInteractiveCitation:()=>Db,buildInteractiveInstantResult:()=>Gv,buildInteractiveRecentResult:()=>lb,buildInteractiveResult:()=>zv,buildNoSortCriterion:()=>Oc,buildNotifyTrigger:()=>Kx,buildNumericFacet:()=>dv,buildNumericFilter:()=>hv,buildNumericRange:()=>Wo,buildPager:()=>Bv,buildQueryError:()=>Uv,buildQueryExpression:()=>ED,buildQueryRankingExpressionSortCriterion:()=>kc,buildQuerySummary:()=>$v,buildQueryTrigger:()=>Wx,buildQuickview:()=>Bx,buildRecentQueriesList:()=>ib,buildRecentResultsList:()=>ub,buildRedirectionTrigger:()=>Gx,buildRelevanceInspector:()=>mC,buildRelevanceSortCriterion:()=>Ln,buildResultList:()=>Hv,buildResultTemplatesManager:()=>Nb,buildResultsPerPage:()=>Yv,buildSearchBox:()=>Ul,buildSearchEngine:()=>uC,buildSearchParameterManager:()=>id,buildSearchParameterSerializer:()=>Bs,buildSearchStatus:()=>Mx,buildSmartSnippet:()=>eb,buildSmartSnippetQuestionsList:()=>ab,buildSort:()=>ix,buildStandaloneSearchBox:()=>yx,buildStaticFilter:()=>sx,buildStaticFilterValue:()=>Kf,buildTab:()=>lx,buildUrlManager:()=>Vx,createAction:()=>v,createAsyncThunk:()=>ae,createReducer:()=>T,currentPageSelector:()=>zr,currentPagesSelector:()=>Vl,deserializeRelativeDate:()=>Py,facetRequestSelector:()=>Xc,facetResponseSelectedValuesSelector:()=>VS,facetResponseSelector:()=>Hn,getOrganizationEndpoints:()=>On,getSampleSearchEngineConfiguration:()=>qf,loadAdvancedSearchQueryActions:()=>QT,loadBreadcrumbActions:()=>fD,loadCategoryFacetSetActions:()=>BT,loadClickAnalyticsActions:()=>bD,loadConfigurationActions:()=>UT,loadContextActions:()=>$T,loadDateFacetSetActions:()=>GT,loadDebugActions:()=>zT,loadDictionaryFieldContextActions:()=>HT,loadDidYouMeanActions:()=>YT,loadExcerptLengthActions:()=>hD,loadFacetOptionsActions:()=>WT,loadFacetSetActions:()=>jT,loadFieldActions:()=>KT,loadFoldingActions:()=>ZT,loadGeneratedAnswerActions:()=>yD,loadGenericAnalyticsActions:()=>FD,loadHistoryActions:()=>JT,loadInstantResultsActions:()=>nD,loadNumericFacetSetActions:()=>XT,loadPaginationActions:()=>eD,loadPipelineActions:()=>tD,loadQueryActions:()=>rD,loadQuerySetActions:()=>aD,loadQuerySuggestActions:()=>oD,loadQuestionAnsweringActions:()=>pD,loadRecentQueriesActions:()=>mD,loadRecentResultsActions:()=>gD,loadResultPreviewActions:()=>SD,loadSearchActions:()=>iD,loadSearchAnalyticsActions:()=>xD,loadSearchConfigurationActions:()=>_T,loadSearchHubActions:()=>sD,loadSortCriteriaActions:()=>cD,loadStandaloneSearchBoxSetActions:()=>uD,loadStaticFilterSetActions:()=>lD,loadTabSetActions:()=>dD,maxPageSelector:()=>Ds,parseCriterionExpression:()=>Lb,platformUrl:()=>ns,validateRelativeDate:()=>fa});var ki=()=>global.crypto,Rm=()=>{typeof window=="undefined"&&(ki()||(global.crypto=require("crypto")),!ki().getRandomValues&&ki().webcrypto&&(global.crypto.getRandomValues=ki().webcrypto.getRandomValues.bind(ki().webcrypto)))};var h={};Od(h,{EnhancerArray:()=>ig,MiddlewareArray:()=>og,SHOULD_AUTOBATCH:()=>up,TaskAbortError:()=>Wi,addListener:()=>Dg,autoBatchEnhancer:()=>bR,clearAllListeners:()=>Vg,configureStore:()=>tp,createAction:()=>v,createActionCreatorInvariantMiddleware:()=>BF,createAsyncThunk:()=>ae,createDraftSafeSelector:()=>qr,createEntityAdapter:()=>aR,createImmutableStateInvariantMiddleware:()=>HF,createListenerMiddleware:()=>yR,createNextState:()=>ea,createReducer:()=>T,createSelector:()=>Zs,createSerializableStateInvariantMiddleware:()=>zF,createSlice:()=>JF,current:()=>qi,findNonSerializableValue:()=>tc,freeze:()=>Oi,getDefaultMiddleware:()=>rc,getType:()=>LF,isAction:()=>Jd,isActionCreator:()=>rg,isAllOf:()=>np,isAnyOf:()=>zi,isAsyncThunkAction:()=>Fg,isDraft:()=>$e,isFluxStandardAction:()=>ag,isFulfilled:()=>bg,isImmutableDefault:()=>ug,isPending:()=>vg,isPlain:()=>Zd,isPlainObject:()=>ec,isRejected:()=>nc,isRejectedWithValue:()=>xg,miniSerializeError:()=>Sg,nanoid:()=>rp,original:()=>Am,prepareAutoBatched:()=>CR,removeListener:()=>Mg,unwrapResult:()=>yg});function st(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!1)var n,o;throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function $e(e){return!!e&&!!e[ye]}function Et(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var n=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===sF}(e)||Array.isArray(e)||!!e[Mm]||!!((t=e.constructor)===null||t===void 0?void 0:t[Mm])||qd(e)||Td(e))}function Am(e){return $e(e)||st(23,e),e[ye].t}function Na(e,t,r){r===void 0&&(r=!1),xn(e)===0?(r?Object.keys:Fn)(e).forEach(function(a){r&&typeof a=="symbol"||t(a,e[a],e)}):e.forEach(function(a,n){return t(n,a,e)})}function xn(e){var t=e[ye];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:qd(e)?2:Td(e)?3:0}function bn(e,t){return xn(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function tF(e,t){return xn(e)===2?e.get(t):e[t]}function Pm(e,t,r){var a=xn(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function wm(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function qd(e){return oF&&e instanceof Map}function Td(e){return iF&&e instanceof Set}function Xr(e){return e.o||e.t}function Dd(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Nm(e);delete t[ye];for(var r=Fn(t),a=0;a<r.length;a++){var n=r[a],o=t[n];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[n]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[n]})}return Object.create(Object.getPrototypeOf(e),t)}function Oi(e,t){return t===void 0&&(t=!1),Vd(e)||$e(e)||!Et(e)||(xn(e)>1&&(e.set=e.add=e.clear=e.delete=rF),Object.freeze(e),t&&Na(e,function(r,a){return Oi(a,!0)},!0)),e}function rF(){st(2)}function Vd(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function jt(e){var t=$d[e];return t||st(18,e),t}function aF(e,t){$d[e]||($d[e]=t)}function Md(){return Ti}function Nd(e,t){t&&(jt("Patches"),e.u=[],e.s=[],e.v=t)}function Ys(e){Ld(e),e.p.forEach(nF),e.p=null}function Ld(e){e===Ti&&(Ti=e.l)}function Em(e){return Ti={p:[],l:Ti,h:e,m:!0,_:0}}function nF(e){var t=e[ye];t.i===0||t.i===1?t.j():t.g=!0}function Qd(e,t){t._=t.p.length;var r=t.p[0],a=e!==void 0&&e!==r;return t.h.O||jt("ES5").S(t,e,a),a?(r[ye].P&&(Ys(t),st(4)),Et(e)&&(e=Ks(t,e),t.l||Js(t,e)),t.u&&jt("Patches").M(r[ye].t,e,t.u,t.s)):e=Ks(t,r,[]),Ys(t),t.u&&t.v(t.u,t.s),e!==Vm?e:void 0}function Ks(e,t,r){if(Vd(t))return t;var a=t[ye];if(!a)return Na(t,function(s,u){return Im(e,a,t,s,u,r)},!0),t;if(a.A!==e)return t;if(!a.P)return Js(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var n=a.i===4||a.i===5?a.o=Dd(a.k):a.o,o=n,i=!1;a.i===3&&(o=new Set(n),n.clear(),i=!0),Na(o,function(s,u){return Im(e,a,n,s,u,r,i)}),Js(e,n,!1),r&&e.u&&jt("Patches").N(a,r,e.u,e.s)}return a.o}function Im(e,t,r,a,n,o,i){if($e(n)){var s=Ks(e,n,o&&t&&t.i!==3&&!bn(t.R,a)?o.concat(a):void 0);if(Pm(r,a,s),!$e(s))return;e.m=!1}else i&&r.add(n);if(Et(n)&&!Vd(n)){if(!e.h.D&&e._<1)return;Ks(e,n),t&&t.A.l||Js(e,n)}}function Js(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Oi(t,r)}function Bd(e,t){var r=e[ye];return(r?Xr(r):e)[t]}function km(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Object.getPrototypeOf(r)}}function Zr(e){e.P||(e.P=!0,e.l&&Zr(e.l))}function jd(e){e.o||(e.o=Dd(e.t))}function Ud(e,t,r){var a=qd(t)?jt("MapSet").F(t,r):Td(t)?jt("MapSet").T(t,r):e.O?function(n,o){var i=Array.isArray(n),s={i:i?1:0,A:o?o.A:Md(),P:!1,I:!1,R:{},l:o,t:n,k:null,o:null,j:null,C:!1},u=s,c=Di;i&&(u=[s],c=Vi);var l=Proxy.revocable(u,c),d=l.revoke,f=l.proxy;return s.k=f,s.j=d,f}(t,r):jt("ES5").J(t,r);return(r?r.A:Md()).p.push(a),a}function qi(e){return $e(e)||st(22,e),function t(r){if(!Et(r))return r;var a,n=r[ye],o=xn(r);if(n){if(!n.P&&(n.i<4||!jt("ES5").K(n)))return n.t;n.I=!0,a=Om(r,o),n.I=!1}else a=Om(r,o);return Na(a,function(i,s){n&&tF(n.t,i)===s||Pm(a,i,t(s))}),o===3?new Set(a):a}(e)}function Om(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Dd(e)}function qm(){function e(i,s){var u=o[i];return u?u.enumerable=s:o[i]=u={configurable:!0,enumerable:s,get:function(){var c=this[ye];return Di.get(c,i)},set:function(c){var l=this[ye];Di.set(l,i,c)}},u}function t(i){for(var s=i.length-1;s>=0;s--){var u=i[s][ye];if(!u.P)switch(u.i){case 5:a(u)&&Zr(u);break;case 4:r(u)&&Zr(u)}}}function r(i){for(var s=i.t,u=i.k,c=Fn(u),l=c.length-1;l>=0;l--){var d=c[l];if(d!==ye){var f=s[d];if(f===void 0&&!bn(s,d))return!0;var p=u[d],m=p&&p[ye];if(m?m.t!==f:!wm(p,f))return!0}}var g=!!s[ye];return c.length!==Fn(s).length+(g?0:1)}function a(i){var s=i.k;if(s.length!==i.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var c=0;c<s.length;c++)if(!s.hasOwnProperty(c))return!0;return!1}function n(i){i.g&&st(3,JSON.stringify(Xr(i)))}var o={};aF("ES5",{J:function(i,s){var u=Array.isArray(i),c=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,e(m,!0));return p}var g=Nm(f);delete g[ye];for(var y=Fn(g),S=0;S<y.length;S++){var C=y[S];g[C]=e(C,d||!!g[C].enumerable)}return Object.create(Object.getPrototypeOf(f),g)}(u,i),l={i:u?5:4,A:s?s.A:Md(),P:!1,I:!1,R:{},l:s,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,ye,{value:l,writable:!0}),c},S:function(i,s,u){u?$e(s)&&s[ye].A===i&&t(i.p):(i.u&&function c(l){if(l&&typeof l=="object"){var d=l[ye];if(d){var f=d.t,p=d.k,m=d.R,g=d.i;if(g===4)Na(p,function(P){P!==ye&&(f[P]!==void 0||bn(f,P)?m[P]||c(p[P]):(m[P]=!0,Zr(d)))}),Na(f,function(P){p[P]!==void 0||bn(p,P)||(m[P]=!1,Zr(d))});else if(g===5){if(a(d)&&(Zr(d),m.length=!0),p.length<f.length)for(var y=p.length;y<f.length;y++)m[y]=!1;else for(var S=f.length;S<p.length;S++)m[S]=!0;for(var C=Math.min(p.length,f.length),R=0;R<C;R++)p.hasOwnProperty(R)||(m[R]=!0),m[R]===void 0&&c(p[R])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var Tm,Ti,_d=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",oF=typeof Map!="undefined",iF=typeof Set!="undefined",Dm=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Vm=_d?Symbol.for("immer-nothing"):((Tm={})["immer-nothing"]=!0,Tm),Mm=_d?Symbol.for("immer-draftable"):"__$immer_draftable",ye=_d?Symbol.for("immer-state"):"__$immer_state",DD=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var sF=""+Object.prototype.constructor,Fn=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Nm=Object.getOwnPropertyDescriptors||function(e){var t={};return Fn(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},$d={},Di={get:function(e,t){if(t===ye)return e;var r=Xr(e);if(!bn(r,t))return function(n,o,i){var s,u=km(o,i);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(n.k):void 0}(e,r,t);var a=r[t];return e.I||!Et(a)?a:a===Bd(e.t,t)?(jd(e),e.o[t]=Ud(e.A.h,a,e)):a},has:function(e,t){return t in Xr(e)},ownKeys:function(e){return Reflect.ownKeys(Xr(e))},set:function(e,t,r){var a=km(Xr(e),t);if(a==null?void 0:a.set)return a.set.call(e.k,r),!0;if(!e.P){var n=Bd(Xr(e),t),o=n==null?void 0:n[ye];if(o&&o.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(wm(r,n)&&(r!==void 0||bn(e.t,t)))return!0;jd(e),Zr(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return Bd(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,jd(e),Zr(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Xr(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty:function(){st(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){st(12)}},Vi={};Na(Di,function(e,t){Vi[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Vi.deleteProperty=function(e,t){return Vi.set.call(this,e,t,void 0)},Vi.set=function(e,t,r){return Di.set.call(this,e[0],t,r,e[0])};var cF=function(){function e(r){var a=this;this.O=Dm,this.D=!0,this.produce=function(n,o,i){if(typeof n=="function"&&typeof o!="function"){var s=o;o=n;var u=a;return function(g){var y=this;g===void 0&&(g=s);for(var S=arguments.length,C=Array(S>1?S-1:0),R=1;R<S;R++)C[R-1]=arguments[R];return u.produce(g,function(P){var Q;return(Q=o).call.apply(Q,[y,P].concat(C))})}}var c;if(typeof o!="function"&&st(6),i!==void 0&&typeof i!="function"&&st(7),Et(n)){var l=Em(a),d=Ud(a,n,void 0),f=!0;try{c=o(d),f=!1}finally{f?Ys(l):Ld(l)}return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(g){return Nd(l,i),Qd(g,l)},function(g){throw Ys(l),g}):(Nd(l,i),Qd(c,l))}if(!n||typeof n!="object"){if((c=o(n))===void 0&&(c=n),c===Vm&&(c=void 0),a.D&&Oi(c,!0),i){var p=[],m=[];jt("Patches").M(n,c,p,m),i(p,m)}return c}st(21,n)},this.produceWithPatches=function(n,o){if(typeof n=="function")return function(c){for(var l=arguments.length,d=Array(l>1?l-1:0),f=1;f<l;f++)d[f-1]=arguments[f];return a.produceWithPatches(c,function(p){return n.apply(void 0,[p].concat(d))})};var i,s,u=a.produce(n,o,function(c,l){i=c,s=l});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(c){return[c,i,s]}):[u,i,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Et(r)||st(8),$e(r)&&(r=qi(r));var a=Em(this),n=Ud(this,r,void 0);return n[ye].C=!0,Ld(a),n},t.finishDraft=function(r,a){var n=r&&r[ye],o=n.A;return Nd(o,a),Qd(void 0,o)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!Dm&&st(20),this.O=r},t.applyPatches=function(r,a){var n;for(n=a.length-1;n>=0;n--){var o=a[n];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}n>-1&&(a=a.slice(n+1));var i=jt("Patches").$;return $e(r)?i(r,a):this.produce(r,function(s){return i(s,a)})},e}(),ct=new cF,uF=ct.produce,VD=ct.produceWithPatches.bind(ct),MD=ct.setAutoFreeze.bind(ct),ND=ct.setUseProxies.bind(ct),LD=ct.applyPatches.bind(ct),QD=ct.createDraft.bind(ct),BD=ct.finishDraft.bind(ct),ea=uF;A(h,Ee(ji()));var Xs="NOT_FOUND";function PF(e){var t;return{get:function(a){return t&&e(t.key,a)?t.value:Xs},put:function(a,n){t={key:a,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function wF(e,t){var r=[];function a(s){var u=r.findIndex(function(l){return t(s,l.key)});if(u>-1){var c=r[u];return u>0&&(r.splice(u,1),r.unshift(c)),c.value}return Xs}function n(s,u){a(s)===Xs&&(r.unshift({key:s,value:u}),r.length>e&&r.pop())}function o(){return r}function i(){r=[]}return{get:a,put:n,getEntries:o,clear:i}}var Wm=function(t,r){return t===r};function EF(e){return function(r,a){if(r===null||a===null||r.length!==a.length)return!1;for(var n=r.length,o=0;o<n;o++)if(!e(r[o],a[o]))return!1;return!0}}function Ym(e,t){var r=typeof t=="object"?t:{equalityCheck:t},a=r.equalityCheck,n=a===void 0?Wm:a,o=r.maxSize,i=o===void 0?1:o,s=r.resultEqualityCheck,u=EF(n),c=i===1?PF(u):wF(i,u);function l(){var d=c.get(arguments);if(d===Xs){if(d=e.apply(null,arguments),s){var f=c.getEntries(),p=f.find(function(m){return s(m.value,d)});p&&(d=p.value)}c.put(arguments,d)}return d}return l.clearCache=function(){return c.clear()},l}function IF(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(a){return typeof a=="function"})){var r=t.map(function(a){return typeof a=="function"?"function "+(a.name||"unnamed")+"()":typeof a}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}function kF(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var n=function(){for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];var c=0,l,d={memoizeOptions:void 0},f=s.pop();if(typeof f=="object"&&(d=f,f=s.pop()),typeof f!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof f+"]");var p=d,m=p.memoizeOptions,g=m===void 0?r:m,y=Array.isArray(g)?g:[g],S=IF(s),C=e.apply(void 0,[function(){return c++,f.apply(null,arguments)}].concat(y)),R=e(function(){for(var Q=[],G=S.length,Z=0;Z<G;Z++)Q.push(S[Z].apply(null,arguments));return l=C.apply(null,Q),l});return Object.assign(R,{resultFunc:f,memoizedResultFunc:C,dependencies:S,lastResult:function(){return l},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),R};return n}var Zs=kF(Ym);var ra=Ee(ji()),Kd=Ee(ji());function Km(e){var t=function(a){var n=a.dispatch,o=a.getState;return function(i){return function(s){return typeof s=="function"?s(n,o,e):i(s)}}};return t}var Jm=Km();Jm.withExtraArgument=Km;var Ui=Jm;var Xm=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),_i=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ta=function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e},OF=Object.defineProperty,qF=Object.defineProperties,TF=Object.getOwnPropertyDescriptors,Zm=Object.getOwnPropertySymbols,DF=Object.prototype.hasOwnProperty,VF=Object.prototype.propertyIsEnumerable,eg=function(e,t,r){return t in e?OF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Ze=function(e,t){for(var r in t||(t={}))DF.call(t,r)&&eg(e,r,t[r]);if(Zm)for(var a=0,n=Zm(t);a<n.length;a++){var r=n[a];VF.call(t,r)&&eg(e,r,t[r])}return e},Yd=function(e,t){return qF(e,TF(t))},$i=function(e,t,r){return new Promise(function(a,n){var o=function(u){try{s(r.next(u))}catch(c){n(c)}},i=function(u){try{s(r.throw(u))}catch(c){n(c)}},s=function(u){return u.done?a(u.value):Promise.resolve(u.value).then(o,i)};s((r=r.apply(e,t)).next())})},qr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Zs.apply(void 0,e),a=function(n){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return r.apply(void 0,ta([$e(n)?qi(n):n],o))};return a},MF=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Kd.compose:Kd.compose.apply(null,arguments)},aV=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}};function ec(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var tg=function(e){return e&&typeof e.match=="function"};function v(e,t){function r(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(t){var o=t.apply(void 0,a);if(!o)throw new Error("prepareAction did not return an object");return Ze(Ze({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:a[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(a){return a.type===e},r}function Jd(e){return ec(e)&&"type"in e}function rg(e){return typeof e=="function"&&"type"in e&&tg(e)}function ag(e){return Jd(e)&&typeof e.type=="string"&&Object.keys(e).every(NF)}function NF(e){return["type","payload","error","meta"].indexOf(e)>-1}function LF(e){return""+e}function QF(e){var t=e?(""+e).split("/"):[],r=t[t.length-1]||"actionCreator";return'Detected an action creator with type "'+(e||"unknown")+`" being dispatched. 
Make sure you're calling the action creator before dispatching, i.e. \`dispatch(`+r+"())` instead of `dispatch("+r+")`. This is necessary even if the action has no payload."}function BF(e){return e===void 0&&(e={}),function(){return function(a){return function(n){return a(n)}}};var t=e.isActionCreator,r=t===void 0?rg:t;return function(){return function(a){return function(n){return r(n)&&console.warn(QF(n.type)),a(n)}}}}function ng(e,t){var r=0;return{measureTime:function(a){var n=Date.now();try{return a()}finally{var o=Date.now();r+=o-n}},warnIfExceeded:function(){r>e&&console.warn(t+" took "+r+"ms, which is more than the warning threshold of "+e+`ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var og=function(e){Xm(t,e);function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,ta([void 0],r[0].concat(this)))):new(t.bind.apply(t,ta([void 0],r.concat(this))))},t}(Array),ig=function(e){Xm(t,e);function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,ta([void 0],r[0].concat(this)))):new(t.bind.apply(t,ta([void 0],r.concat(this))))},t}(Array);function Xd(e){return Et(e)?ea(e,function(){}):e}var jF=!0,sg="Invariant failed";function cg(e,t){if(!e)throw jF?new Error(sg):new Error(sg+": "+(t||""))}function UF(e,t,r,a){return JSON.stringify(e,_F(t,a),r)}function _F(e,t){var r=[],a=[];return t||(t=function(n,o){return r[0]===o?"[Circular ~]":"[Circular ~."+a.slice(0,r.indexOf(o)).join(".")+"]"}),function(n,o){if(r.length>0){var i=r.indexOf(this);~i?r.splice(i+1):r.push(this),~i?a.splice(i,1/0,n):a.push(n),~r.indexOf(o)&&(o=t.call(this,n,o))}else r.push(o);return e==null?o:e.call(this,n,o)}}function ug(e){return typeof e!="object"||e==null||Object.isFrozen(e)}function $F(e,t,r){var a=lg(e,t,r);return{detectMutations:function(){return dg(e,t,a,r)}}}function lg(e,t,r,a,n){t===void 0&&(t=[]),a===void 0&&(a=""),n===void 0&&(n=new Set);var o={value:r};if(!e(r)&&!n.has(r)){n.add(r),o.children={};for(var i in r){var s=a?a+"."+i:i;t.length&&t.indexOf(s)!==-1||(o.children[i]=lg(e,t,r[i],s))}}return o}function dg(e,t,r,a,n,o){t===void 0&&(t=[]),n===void 0&&(n=!1),o===void 0&&(o="");var i=r?r.value:void 0,s=i===a;if(n&&!s&&!Number.isNaN(a))return{wasMutated:!0,path:o};if(e(i)||e(a))return{wasMutated:!1};var u={};for(var c in r.children)u[c]=!0;for(var c in a)u[c]=!0;var l=t.length>0,d=function(p){var m=o?o+"."+p:p;if(l){var g=t.some(function(S){return S instanceof RegExp?S.test(m):m===S});if(g)return"continue"}var y=dg(e,t,r.children[p],a[p],s,m);if(y.wasMutated)return{value:y}};for(var c in u){var f=d(c);if(typeof f=="object")return f.value}return{wasMutated:!1}}function HF(e){return e===void 0&&(e={}),function(){return function(u){return function(c){return u(c)}}};var t=e.isImmutable,r=t===void 0?ug:t,a=e.ignoredPaths,n=e.warnAfter,o=n===void 0?32:n,i=e.ignore;a=a||i;var s=$F.bind(null,r,a);return function(u){var c=u.getState,l=c(),d=s(l),f;return function(p){return function(m){var g=ng(o,"ImmutableStateInvariantMiddleware");g.measureTime(function(){l=c(),f=d.detectMutations(),d=s(l),cg(!f.wasMutated,"A state mutation was detected between dispatches, in the path '"+(f.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")});var y=p(m);return g.measureTime(function(){l=c(),f=d.detectMutations(),d=s(l),f.wasMutated&&cg(!f.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(f.path||"")+". Take a look at the reducer(s) handling the action "+UF(m)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}),g.warnIfExceeded(),y}}}}function Zd(e){var t=typeof e;return e==null||t==="string"||t==="boolean"||t==="number"||Array.isArray(e)||ec(e)}function tc(e,t,r,a,n,o){t===void 0&&(t=""),r===void 0&&(r=Zd),n===void 0&&(n=[]);var i;if(!r(e))return{keyPath:t||"<root>",value:e};if(typeof e!="object"||e===null||(o==null?void 0:o.has(e)))return!1;for(var s=a!=null?a(e):Object.entries(e),u=n.length>0,c=function(y,S){var C=t?t+"."+y:y;if(u){var R=n.some(function(P){return P instanceof RegExp?P.test(C):C===P});if(R)return"continue"}if(!r(S))return{value:{keyPath:C,value:S}};if(typeof S=="object"&&(i=tc(S,C,r,a,n,o),i))return{value:i}},l=0,d=s;l<d.length;l++){var f=d[l],p=f[0],m=f[1],g=c(p,m);if(typeof g=="object")return g.value}return o&&pg(e)&&o.add(e),!1}function pg(e){if(!Object.isFrozen(e))return!1;for(var t=0,r=Object.values(e);t<r.length;t++){var a=r[t];if(!(typeof a!="object"||a===null)&&!pg(a))return!1}return!0}function zF(e){return e===void 0&&(e={}),function(){return function(R){return function(P){return R(P)}}};var t=e.isSerializable,r=t===void 0?Zd:t,a=e.getEntries,n=e.ignoredActions,o=n===void 0?[]:n,i=e.ignoredActionPaths,s=i===void 0?["meta.arg","meta.baseQueryMeta"]:i,u=e.ignoredPaths,c=u===void 0?[]:u,l=e.warnAfter,d=l===void 0?32:l,f=e.ignoreState,p=f===void 0?!1:f,m=e.ignoreActions,g=m===void 0?!1:m,y=e.disableCache,S=y===void 0?!1:y,C=!S&&WeakSet?new WeakSet:void 0;return function(R){return function(P){return function(Q){var G=P(Q),Z=ng(d,"SerializableStateInvariantMiddleware");return!g&&!(o.length&&o.indexOf(Q.type)!==-1)&&Z.measureTime(function(){var $=tc(Q,"",r,a,s,C);if($){var H=$.keyPath,pe=$.value;console.error("A non-serializable value was detected in an action, in the path: `"+H+"`. Value:",pe,`
Take a look at the logic that dispatched this action: `,Q,`
(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)`,`
(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)`)}}),p||(Z.measureTime(function(){var $=R.getState(),H=tc($,"",r,a,c,C);if(H){var pe=H.keyPath,he=H.value;console.error("A non-serializable value was detected in the state, in the path: `"+pe+"`. Value:",he,`
Take a look at the reducer(s) handling this action type: `+Q.type+`.
(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`)}}),Z.warnIfExceeded()),G}}}}function GF(e){return typeof e=="boolean"}function WF(){return function(t){return rc(t)}}function rc(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t,a=e.immutableCheck,n=a===void 0?!0:a,o=e.serializableCheck,i=o===void 0?!0:o,s=e.actionCreatorCheck,u=s===void 0?!0:s,c=new og;if(r&&(GF(r)?c.push(Ui):c.push(Ui.withExtraArgument(r.extraArgument))),!1){if(n)var l;if(i)var d;if(u)var f}return c}var ep=!0;function tp(e){var t=WF(),r=e||{},a=r.reducer,n=a===void 0?void 0:a,o=r.middleware,i=o===void 0?t():o,s=r.devTools,u=s===void 0?!0:s,c=r.preloadedState,l=c===void 0?void 0:c,d=r.enhancers,f=d===void 0?void 0:d,p;if(typeof n=="function")p=n;else if(ec(n))p=(0,ra.combineReducers)(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=i;if(typeof m=="function"&&(m=m(t),!ep&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!ep&&m.some(function(P){return typeof P!="function"}))throw new Error("each middleware provided to configureStore must be a function");var g=ra.applyMiddleware.apply(void 0,m),y=ra.compose;u&&(y=MF(Ze({trace:!ep},typeof u=="object"&&u)));var S=new ig(g),C=S;Array.isArray(f)?C=ta([g],f):typeof f=="function"&&(C=f(S));var R=y.apply(void 0,C);return(0,ra.createStore)(p,l,R)}function fg(e){var t={},r=[],a,n={addCase:function(o,i){var s=typeof o=="string"?o:o.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[s]=i,n},addMatcher:function(o,i){return r.push({matcher:o,reducer:i}),n},addDefaultCase:function(o){return a=o,n}};return e(n),[t,r,a]}function YF(e){return typeof e=="function"}function T(e,t,r,a){r===void 0&&(r=[]);var n=typeof t=="function"?fg(t):[t,r,a],o=n[0],i=n[1],s=n[2],u;if(YF(e))u=function(){return Xd(e())};else{var c=Xd(e);u=function(){return c}}function l(d,f){d===void 0&&(d=u());var p=ta([o[f.type]],i.filter(function(m){var g=m.matcher;return g(f)}).map(function(m){var g=m.reducer;return g}));return p.filter(function(m){return!!m}).length===0&&(p=[s]),p.reduce(function(m,g){if(g)if($e(m)){var y=m,S=g(y,f);return S===void 0?m:S}else{if(Et(m))return ea(m,function(C){return g(C,f)});var S=g(m,f);if(S===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}return m},d)}return l.getInitialState=u,l}function KF(e,t){return e+"/"+t}function JF(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:Xd(e.initialState),a=e.reducers||{},n=Object.keys(a),o={},i={},s={};n.forEach(function(l){var d=a[l],f=KF(t,l),p,m;"reducer"in d?(p=d.reducer,m=d.prepare):p=d,o[l]=p,i[f]=p,s[l]=m?v(f,m):v(f)});function u(){var l=typeof e.extraReducers=="function"?fg(e.extraReducers):[e.extraReducers],d=l[0],f=d===void 0?{}:d,p=l[1],m=p===void 0?[]:p,g=l[2],y=g===void 0?void 0:g,S=Ze(Ze({},f),i);return T(r,function(C){for(var R in S)C.addCase(R,S[R]);for(var P=0,Q=m;P<Q.length;P++){var G=Q[P];C.addMatcher(G.matcher,G.reducer)}y&&C.addDefaultCase(y)})}var c;return{name:t,reducer:function(l,d){return c||(c=u()),c(l,d)},actions:s,caseReducers:o,getInitialState:function(){return c||(c=u()),c.getInitialState()}}}function XF(){return{ids:[],entities:{}}}function ZF(){function e(t){return t===void 0&&(t={}),Object.assign(XF(),t)}return{getInitialState:e}}function eR(){function e(t){var r=function(c){return c.ids},a=function(c){return c.entities},n=qr(r,a,function(c,l){return c.map(function(d){return l[d]})}),o=function(c,l){return l},i=function(c,l){return c[l]},s=qr(r,function(c){return c.length});if(!t)return{selectIds:r,selectEntities:a,selectAll:n,selectTotal:s,selectById:qr(a,o,i)};var u=qr(t,a);return{selectIds:qr(t,r),selectEntities:u,selectAll:qr(t,n),selectTotal:qr(t,s),selectById:qr(u,o,i)}}return{getSelectors:e}}function tR(e){var t=Ae(function(r,a){return e(a)});return function(a){return t(a,void 0)}}function Ae(e){return function(r,a){function n(i){return ag(i)}var o=function(i){n(a)?e(a.payload,i):e(a,i)};return $e(r)?(o(r),r):ea(r,o)}}function Hi(e,t){var r=t(e);return r}function La(e){return Array.isArray(e)||(e=Object.values(e)),e}function mg(e,t,r){e=La(e);for(var a=[],n=[],o=0,i=e;o<i.length;o++){var s=i[o],u=Hi(s,t);u in r.entities?n.push({id:u,changes:s}):a.push(s)}return[a,n]}function gg(e){function t(m,g){var y=Hi(m,e);y in g.entities||(g.ids.push(y),g.entities[y]=m)}function r(m,g){m=La(m);for(var y=0,S=m;y<S.length;y++){var C=S[y];t(C,g)}}function a(m,g){var y=Hi(m,e);y in g.entities||g.ids.push(y),g.entities[y]=m}function n(m,g){m=La(m);for(var y=0,S=m;y<S.length;y++){var C=S[y];a(C,g)}}function o(m,g){m=La(m),g.ids=[],g.entities={},r(m,g)}function i(m,g){return s([m],g)}function s(m,g){var y=!1;m.forEach(function(S){S in g.entities&&(delete g.entities[S],y=!0)}),y&&(g.ids=g.ids.filter(function(S){return S in g.entities}))}function u(m){Object.assign(m,{ids:[],entities:{}})}function c(m,g,y){var S=y.entities[g.id],C=Object.assign({},S,g.changes),R=Hi(C,e),P=R!==g.id;return P&&(m[g.id]=R,delete y.entities[g.id]),y.entities[R]=C,P}function l(m,g){return d([m],g)}function d(m,g){var y={},S={};m.forEach(function(P){P.id in g.entities&&(S[P.id]={id:P.id,changes:Ze(Ze({},S[P.id]?S[P.id].changes:null),P.changes)})}),m=Object.values(S);var C=m.length>0;if(C){var R=m.filter(function(P){return c(y,P,g)}).length>0;R&&(g.ids=Object.keys(g.entities))}}function f(m,g){return p([m],g)}function p(m,g){var y=mg(m,e,g),S=y[0],C=y[1];d(C,g),r(S,g)}return{removeAll:tR(u),addOne:Ae(t),addMany:Ae(r),setOne:Ae(a),setMany:Ae(n),setAll:Ae(o),updateOne:Ae(l),updateMany:Ae(d),upsertOne:Ae(f),upsertMany:Ae(p),removeOne:Ae(i),removeMany:Ae(s)}}function rR(e,t){var r=gg(e),a=r.removeOne,n=r.removeMany,o=r.removeAll;function i(C,R){return s([C],R)}function s(C,R){C=La(C);var P=C.filter(function(Q){return!(Hi(Q,e)in R.entities)});P.length!==0&&y(P,R)}function u(C,R){return c([C],R)}function c(C,R){C=La(C),C.length!==0&&y(C,R)}function l(C,R){C=La(C),R.entities={},R.ids=[],s(C,R)}function d(C,R){return f([C],R)}function f(C,R){for(var P=!1,Q=0,G=C;Q<G.length;Q++){var Z=G[Q],$=R.entities[Z.id];if(!!$){P=!0,Object.assign($,Z.changes);var H=e($);Z.id!==H&&(delete R.entities[Z.id],R.entities[H]=$)}}P&&S(R)}function p(C,R){return m([C],R)}function m(C,R){var P=mg(C,e,R),Q=P[0],G=P[1];f(G,R),s(Q,R)}function g(C,R){if(C.length!==R.length)return!1;for(var P=0;P<C.length&&P<R.length;P++)if(C[P]!==R[P])return!1;return!0}function y(C,R){C.forEach(function(P){R.entities[e(P)]=P}),S(R)}function S(C){var R=Object.values(C.entities);R.sort(t);var P=R.map(e),Q=C.ids;g(Q,P)||(C.ids=P)}return{removeOne:a,removeMany:n,removeAll:o,addOne:Ae(i),updateOne:Ae(d),upsertOne:Ae(p),setOne:Ae(u),setMany:Ae(c),setAll:Ae(l),addMany:Ae(s),updateMany:Ae(f),upsertMany:Ae(m)}}function aR(e){e===void 0&&(e={});var t=Ze({sortComparer:!1,selectId:function(s){return s.id}},e),r=t.selectId,a=t.sortComparer,n=ZF(),o=eR(),i=a?rR(r,a):gg(r);return Ze(Ze(Ze({selectId:r,sortComparer:a},n),o),i)}var nR="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rp=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=nR[Math.random()*64|0];return t},oR=["name","message","stack","code"],ap=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),hg=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),Sg=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,a=oR;r<a.length;r++){var n=a[r];typeof e[n]=="string"&&(t[n]=e[n])}return t}return{message:String(e)}},ae=function(){function e(t,r,a){var n=v(t+"/fulfilled",function(l,d,f,p){return{payload:l,meta:Yd(Ze({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),o=v(t+"/pending",function(l,d,f){return{payload:void 0,meta:Yd(Ze({},f||{}),{arg:d,requestId:l,requestStatus:"pending"})}}),i=v(t+"/rejected",function(l,d,f,p,m){return{payload:p,error:(a&&a.serializeError||Sg)(l||"Rejected"),meta:Yd(Ze({},m||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=!1,u=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function c(l){return function(d,f,p){var m=(a==null?void 0:a.idGenerator)?a.idGenerator(l):rp(),g=new u,y,S=!1;function C(P){y=P,g.abort()}var R=function(){return $i(this,null,function(){var P,Q,G,Z,$,H,pe;return _i(this,function(he){switch(he.label){case 0:return he.trys.push([0,4,,5]),Z=(P=a==null?void 0:a.condition)==null?void 0:P.call(a,l,{getState:f,extra:p}),iR(Z)?[4,Z]:[3,2];case 1:Z=he.sent(),he.label=2;case 2:if(Z===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=!0,$=new Promise(function(_,N){return g.signal.addEventListener("abort",function(){return N({name:"AbortError",message:y||"Aborted"})})}),d(o(m,l,(Q=a==null?void 0:a.getPendingMeta)==null?void 0:Q.call(a,{requestId:m,arg:l},{getState:f,extra:p}))),[4,Promise.race([$,Promise.resolve(r(l,{dispatch:d,getState:f,extra:p,requestId:m,signal:g.signal,abort:C,rejectWithValue:function(_,N){return new ap(_,N)},fulfillWithValue:function(_,N){return new hg(_,N)}})).then(function(_){if(_ instanceof ap)throw _;return _ instanceof hg?n(_.payload,m,l,_.meta):n(_,m,l)})])];case 3:return G=he.sent(),[3,5];case 4:return H=he.sent(),G=H instanceof ap?i(null,m,l,H.payload,H.meta):i(H,m,l),[3,5];case 5:return pe=a&&!a.dispatchConditionRejection&&i.match(G)&&G.meta.condition,pe||d(G),[2,G]}})})}();return Object.assign(R,{abort:C,requestId:m,arg:l,unwrap:function(){return R.then(yg)}})}}return Object.assign(c,{pending:o,rejected:i,fulfilled:n,typePrefix:t})}return e.withTypes=function(){return e},e}();function yg(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function iR(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Cg=function(e,t){return tg(e)?e.match(t):e(t)};function zi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.some(function(a){return Cg(a,r)})}}function np(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.every(function(a){return Cg(a,r)})}}function ac(e,t){if(!e||!e.meta)return!1;var r=typeof e.meta.requestId=="string",a=t.indexOf(e.meta.requestStatus)>-1;return r&&a}function Gi(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function vg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return ac(r,["pending"])}:Gi(e)?function(r){var a=e.map(function(o){return o.pending}),n=zi.apply(void 0,a);return n(r)}:vg()(e[0])}function nc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return ac(r,["rejected"])}:Gi(e)?function(r){var a=e.map(function(o){return o.rejected}),n=zi.apply(void 0,a);return n(r)}:nc()(e[0])}function xg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(a){return a&&a.meta&&a.meta.rejectedWithValue};return e.length===0?function(a){var n=np(nc.apply(void 0,e),r);return n(a)}:Gi(e)?function(a){var n=np(nc.apply(void 0,e),r);return n(a)}:xg()(e[0])}function bg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return ac(r,["fulfilled"])}:Gi(e)?function(r){var a=e.map(function(o){return o.fulfilled}),n=zi.apply(void 0,a);return n(r)}:bg()(e[0])}function Fg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return ac(r,["pending","fulfilled","rejected"])}:Gi(e)?function(r){for(var a=[],n=0,o=e;n<o.length;n++){var i=o[n];a.push(i.pending,i.rejected,i.fulfilled)}var s=zi.apply(void 0,a);return s(r)}:Fg()(e[0])}var op=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},ip=function(){},Rg=function(e,t){return t===void 0&&(t=ip),e.catch(t),e},Ag=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Rn=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},sR="task",Pg="listener",wg="completed",sp="cancelled",cR="task-"+sp,uR="task-"+wg,Eg=Pg+"-"+sp,lR=Pg+"-"+wg,Wi=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=sR+" "+sp+" (reason: "+t+")"}return e}(),An=function(e){if(e.aborted)throw new Wi(e.reason)};function Ig(e,t){var r=ip;return new Promise(function(a,n){var o=function(){return n(new Wi(e.reason))};if(e.aborted){o();return}r=Ag(e,o),t.finally(function(){return r()}).then(a,n)}).finally(function(){r=ip})}var dR=function(e,t){return $i(void 0,null,function(){var r,a;return _i(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return n.sent(),[4,e()];case 2:return r=n.sent(),[2,{status:"ok",value:r}];case 3:return a=n.sent(),[2,{status:a instanceof Wi?"cancelled":"rejected",error:a}];case 4:return t==null||t(),[7];case 5:return[2]}})})},oc=function(e){return function(t){return Rg(Ig(e,t).then(function(r){return An(e),r}))}},kg=function(e){var t=oc(e);return function(r){return t(new Promise(function(a){return setTimeout(a,r)}))}},pR=Object.assign,Og={},Yi="listenerMiddleware",fR=function(e,t){var r=function(a){return Ag(e,function(){return Rn(a,e.reason)})};return function(a,n){op(a,"taskExecutor");var o=new AbortController;r(o);var i=dR(function(){return $i(void 0,null,function(){var s;return _i(this,function(u){switch(u.label){case 0:return An(e),An(o.signal),[4,a({pause:oc(o.signal),delay:kg(o.signal),signal:o.signal})];case 1:return s=u.sent(),An(o.signal),[2,s]}})})},function(){return Rn(o,uR)});return(n==null?void 0:n.autoJoin)&&t.push(i),{result:oc(e)(i),cancel:function(){Rn(o,cR)}}}},mR=function(e,t){var r=function(a,n){return $i(void 0,null,function(){var o,i,s,u;return _i(this,function(c){switch(c.label){case 0:An(t),o=function(){},i=new Promise(function(l,d){var f=e({predicate:a,effect:function(p,m){m.unsubscribe(),l([p,m.getState(),m.getOriginalState()])}});o=function(){f(),d()}}),s=[i],n!=null&&s.push(new Promise(function(l){return setTimeout(l,n,null)})),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,Ig(t,Promise.race(s))];case 2:return u=c.sent(),An(t),[2,u];case 3:return o(),[7];case 4:return[2]}})})};return function(a,n){return Rg(r(a,n))}},qg=function(e){var t=e.type,r=e.actionCreator,a=e.matcher,n=e.predicate,o=e.effect;if(t)n=v(t).match;else if(r)t=r.type,n=r.match;else if(a)n=a;else if(!n)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return op(o,"options.listener"),{predicate:n,type:t,effect:o}},gR=function(e){var t=qg(e),r=t.type,a=t.predicate,n=t.effect,o=rp(),i={id:o,effect:n,type:r,predicate:a,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return i},cp=function(e){e.pending.forEach(function(t){Rn(t,Eg)})},hR=function(e){return function(){e.forEach(cp),e.clear()}},Tg=function(e,t,r){try{e(t,r)}catch(a){setTimeout(function(){throw a},0)}},Dg=v(Yi+"/add"),Vg=v(Yi+"/removeAll"),Mg=v(Yi+"/remove"),SR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,ta([Yi+"/error"],e))};function yR(e){var t=this;e===void 0&&(e={});var r=new Map,a=e.extra,n=e.onError,o=n===void 0?SR:n;op(o,"onError");var i=function(p){return p.unsubscribe=function(){return r.delete(p.id)},r.set(p.id,p),function(m){p.unsubscribe(),(m==null?void 0:m.cancelActive)&&cp(p)}},s=function(p){for(var m=0,g=Array.from(r.values());m<g.length;m++){var y=g[m];if(p(y))return y}},u=function(p){var m=s(function(g){return g.effect===p.effect});return m||(m=gR(p)),i(m)},c=function(p){var m=qg(p),g=m.type,y=m.effect,S=m.predicate,C=s(function(R){var P=typeof g=="string"?R.type===g:R.predicate===S;return P&&R.effect===y});return C&&(C.unsubscribe(),p.cancelActive&&cp(C)),!!C},l=function(p,m,g,y){return $i(t,null,function(){var S,C,R,P;return _i(this,function(Q){switch(Q.label){case 0:S=new AbortController,C=mR(u,S.signal),R=[],Q.label=1;case 1:return Q.trys.push([1,3,4,6]),p.pending.add(S),[4,Promise.resolve(p.effect(m,pR({},g,{getOriginalState:y,condition:function(G,Z){return C(G,Z).then(Boolean)},take:C,delay:kg(S.signal),pause:oc(S.signal),extra:a,signal:S.signal,fork:fR(S.signal,R),unsubscribe:p.unsubscribe,subscribe:function(){r.set(p.id,p)},cancelActiveListeners:function(){p.pending.forEach(function(G,Z,$){G!==S&&(Rn(G,Eg),$.delete(G))})}})))];case 2:return Q.sent(),[3,6];case 3:return P=Q.sent(),P instanceof Wi||Tg(o,P,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(R)];case 5:return Q.sent(),Rn(S,lR),p.pending.delete(S),[7];case 6:return[2]}})})},d=hR(r),f=function(p){return function(m){return function(g){if(!Jd(g))return m(g);if(Dg.match(g))return u(g.payload);if(Vg.match(g)){d();return}if(Mg.match(g))return c(g.payload);var y=p.getState(),S=function(){if(y===Og)throw new Error(Yi+": getOriginalState can only be called synchronously");return y},C;try{if(C=m(g),r.size>0)for(var R=p.getState(),P=Array.from(r.values()),Q=0,G=P;Q<G.length;Q++){var Z=G[Q],$=!1;try{$=Z.predicate(g,R,y)}catch(H){$=!1,Tg(o,H,{raisedBy:"predicate"})}!$||l(Z,g,p,S)}}finally{y=Og}return C}}};return{middleware:f,startListening:u,stopListening:c,clearListeners:d}}var up="RTK_autoBatch",CR=function(){return function(e){var t;return{payload:e,meta:(t={},t[up]=!0,t)}}},Ng,vR=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis):function(e){return(Ng||(Ng=Promise.resolve())).then(e).catch(function(t){return setTimeout(function(){throw t},0)})},Lg=function(e){return function(t){setTimeout(t,e)}},xR=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:Lg(10),bR=function(e){return e===void 0&&(e={type:"raf"}),function(t){return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(void 0,r),o=!0,i=!1,s=!1,u=new Set,c=e.type==="tick"?vR:e.type==="raf"?xR:e.type==="callback"?e.queueNotification:Lg(e.timeout),l=function(){s=!1,i&&(i=!1,u.forEach(function(d){return d()}))};return Object.assign({},n,{subscribe:function(d){var f=function(){return o&&d()},p=n.subscribe(f);return u.add(d),function(){p(),u.delete(d)}},dispatch:function(d){var f;try{return o=!((f=d==null?void 0:d.meta)==null?void 0:f[up]),i=!o,i&&(s||(s=!0,c(l))),n.dispatch(d)}finally{o=!0}}})}}};qm();var Jh=Ee(Xi()),Xh=Ee(Kg());var lc=e=>t=>r=>{var o,i;let a=(o=r.payload)==null?void 0:o.analyticsAction;a!==void 0&&((i=r.payload)==null||delete i.analyticsAction);let n=t(r);return r.type==="search/executeSearch/fullfilled"&&a===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with product recommendation:",r),a!==void 0&&e.dispatch(a),n};function rA(e){return e.instantlyCallable}var dc=()=>e=>t=>e(rA(t)?t():t);var pc=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let a=r.error;if(((n=r.payload)==null?void 0:n.ignored)||e.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return t(r)},fc=e=>t=>r=>a=>(e.debug({action:a,nextState:t.getState()},`Action dispatched: ${a.type}`),r(a));function aA(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Zi(r)}var Zi=class extends Error{constructor(e){super(e);this.name="SchemaValidationError"}},ee=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},a=[];for(let n in this.definition){let o=this.definition[n].validate(r[n]);o&&a.push(`${n}: ${o}`)}if(a.length)throw aA(a,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},fe=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&oe(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Ie(e){return e===void 0}function nA(e){return e===null}function oe(e){return Ie(e)||nA(e)}var D=class{constructor(e={}){this.config=e,this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t||(oA(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function oA(e){return Ie(e)||Jg(e)}function Jg(e){return typeof e=="number"&&!isNaN(e)}var K=class{constructor(e={}){this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t||(iA(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function iA(e){return Ie(e)||Xg(e)}function Xg(e){return typeof e=="boolean"}var sA=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,w=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new fe(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:a,constrainTo:n}=this.config,o=this.value.validate(e);return o||(Ie(e)?null:Pn(e)?!t&&!e.length?"value is an empty string.":r&&!sA.test(e)?"value is not a valid URL.":a&&!a.test(e)?`value did not match provided regex ${a}`:n&&!n.includes(e)?`value should be one of: ${n.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Pn(e){return Object.prototype.toString.call(e)==="[object String]"}var q=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(Ie(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Zg(e))return"value is not an object";for(let[r,a]of Object.entries(this.config.values))if(a.required&&oe(e[r]))return`value does not contain ${r}`;let t="";for(let[r,a]of Object.entries(this.config.values)){let n=e[r],o=a.validate(n);o!==null&&(t+=" "+o)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Zg(e){return e!==void 0&&typeof e=="object"}var X=class{constructor(e={}){this.config=e,this.value=new fe(this.config)}validate(e){if(!oe(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(oe(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(a=>{this.config.each.required&&oe(a)&&(r=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(a,this.config.each);n!==null&&(r+=" "+n)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Xg(e)||Pn(e)||Jg(e)||Zg(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function wn(e){return Array.isArray(e)}var It=class{constructor(e){this.config=e,this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Ie(e)||Object.values(this.config.enum).find(a=>a===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var O=new w({required:!0,emptyAllowed:!1}),Se=new w({required:!1,emptyAllowed:!1}),me=new w({required:!0,emptyAllowed:!0}),Dr=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),et=(e,t)=>{if("required"in t)return{payload:new ee({value:t}).validate({value:e}).value};let n=new q({options:{required:!0},values:t}).validate(e);if(n)throw new Zi(n);return{payload:e}},b=(e,t)=>{try{return et(e,t)}catch(r){return{payload:e,error:Dr(r)}}},ke=(e,t,r,a)=>{let n=`Check the initialState of ${a}`;return eh(e,t,r,n,"Controller initialization error")},ge=(e,t,r,a)=>{let n=`Check the options of ${a}`;return eh(e,t,r,n,"Controller initialization error")},eh=(e,t,r,a,n)=>{try{return t.validate(r,a)}catch(o){throw e.logger.error(o,n),o}};var xc=Ee(mc()),Eh=Ee(th()),Ih=Ee(rh());var Rh=Ee(nh()),Ah=Ee(ph());var I=new Error("Failed to load reducers."),rs=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},En=class extends Error{constructor(t,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${t}`,this.statusCode=r!=null?r:0}};var yh=Ee(kp()),In=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function hc(e){return Array.isArray(e)}function Sc(e){return e.trim()===""}function Ch(e,t){return[...e.reduce((r,a)=>{let n=t(a);return r.has(n)||r.set(n,a),r},new Map).values()]}function jA(e){return(typeof btoa!="undefined"?btoa:yh.btoa)(encodeURI(e))}function yc(e,t){let{[e]:r,...a}=t;return a}function kn(e){return jA(JSON.stringify(e))}var UA=new Set(["1",1,"yes",!0]);function Cc(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>UA.has(r))}function vh(e){let t={};for(let[r,a]of e)t[r]=a;return t}function xh(e,t,r){return clearTimeout(t),setTimeout(e,r)}function as(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function bh(e){let t=[];for(let r in e){let a=encodeURIComponent(r),n=encodeURIComponent(e[r]);t.push(`${a}=${n}`)}return t.join("&")}function Fh(e){return typeof e!="object"||!e?!1:Object.values(e).every(_A)}function _A(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Ph(e){return e===429}var tt=class{static async call(t){let r=$A(t),{logger:a}=t,n=await tt.preprocessRequest(r,t);a.info(n,"Platform request");let{url:o,...i}=n,s=async()=>{let u=await(0,Rh.default)(o,i);if(Ph(u.status))throw u;return u};try{let u=await(0,Ah.backOff)(s,{retry:c=>{let l=c&&Ph(c.status);return l&&a.info("Platform retrying request"),l}});if(u.status===419)throw a.info("Platform renewing token"),new rs;if(u.status===404)throw new En(o,u.status);return a.info({response:u,requestInfo:n},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new En(o):u}}static async preprocessRequest(t,r){let{origin:a,preprocessRequest:n,logger:o,requestMetadata:i}=r,{signal:s,...u}=t,c=as(u);try{let l=await n(t,a,i);return{...t,...l}}catch(l){o.error(l,"Platform request preprocessing failed. Returning default request options.")}return c}};function wh(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,a=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${a}.cloud.coveo.com`}function On(e,t="prod"){let r=t==="prod"?"":t,a=`https://${e}.org${r}.coveo.com`,n=`https://${e}.analytics.org${r}.coveo.com`,o=`${a}/rest/search/v2`,i=`https://${e}.admin.org${r}.coveo.com`;return{platform:a,analytics:n,search:o,admin:i}}function ns(e){return(e==null?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:wh("platform",e)}function vc(e){return wh("analytics",e)}function $A(e){let{url:t,method:r,requestParams:a,contentType:n,accessToken:o,signal:i}=e,s=e.method==="POST"||e.method==="PUT",u=HA(a,n);return{url:t,method:r,headers:{"Content-Type":n,Authorization:`Bearer ${o}`,...e.headers},...s&&{body:u},signal:i}}function HA(e,t){return t==="application/x-www-form-urlencoded"?Fh(e)?bh(e):"":JSON.stringify(e)}xc.default.extend(Ih.default);xc.default.extend(Eh.default);var Op="/rest/search/v2",qp="/rest/ua",rt=()=>({organizationId:"",accessToken:"",platformUrl:ns(),search:{apiBaseUrl:`${ns()}${Op}`,locale:"en-US",timezone:xc.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${vc()}${qp}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}});var pt=()=>!1;function ja(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var He=()=>"default";var kt=(r=>(r.Relevance="relevance",r.Fields="fields",r))(kt||{}),bc=(r=>(r.Ascending="asc",r.Descending="desc",r))(bc||{});var SM=new q({options:{required:!1},values:{by:new It({enum:kt,required:!0}),fields:new X({each:new q({values:{name:new w,direction:new It({enum:bc})}})})}});var RM=new q({options:{required:!1},values:{by:new It({enum:kt,required:!0}),fields:new X({each:new q({values:{field:new w({required:!0}),direction:new It({enum:bc}),displayName:new w}})})}});function aa(){return[]}var nP=Ee(Xi());var Ua=e=>e;function qn(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function qe(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:qn(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:qn(),extendedResults:{}}}function Ut(e){let{url:t,accessToken:r,organizationId:a,authentication:n,...o}=e;return o}var Mr=e=>{let{response:t}=e;return t.body?zA(e):GA(t)},zA=e=>YA(e)?KA(e):WA(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},GA=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function WA(e){return e.body.statusCode!==void 0}function YA(e){return e.body.exception!==void 0}var KA=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});function Fc(){if(typeof window=="undefined"){let{AbortController:e}=qh();return new e}return typeof AbortController=="undefined"?null:new AbortController}var _a=class{constructor(){this.currentAbortController=null}async enqueue(t,r){var o;let a=this.currentAbortController,n=this.currentAbortController=Fc();a&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),a.abort());try{return await t((o=n==null?void 0:n.signal)!=null?o:null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}};var $a=class{constructor(t){this._params={};this._basePath=t}addParam(t,r){this._params={...this.params,[t]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},Th=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),Dh=(e,t)=>{let r=Dp(e);return r&&r.organizationId===t?r:null},Dp=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(t==null?void 0:t.groups)?t.groups:null};function Vh(e){return((e.headers.get("content-type")||"").split(";").find(a=>a.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var _t=(e,t,r,a)=>{let n=new $a(`${e.url}${a}`);return n.addParam("organizationId",e.organizationId),e.authentication&&n.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:n.href,origin:"searchApiFetch"}};var Mh=(e,t)=>{let r=new $a(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),e.visitorId!==void 0&&r.addParam("visitorId",`${e.visitorId}`),r.href},Nh=async(e,t)=>{let r=await tt.call({..._t(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Ut(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let a=Vh(r),n=await r.arrayBuffer(),i=new TextDecoder(a).decode(n);return JA(i)?{success:i}:{error:Mr({response:r,body:i})}};function JA(e){return typeof e=="string"}function XA(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function ZA(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function os(e,t){if(t&&e.name==="AbortError")return{error:ZA(e)};if(e instanceof En)return{error:XA(e)};throw e}var is=class{constructor(t){this.options=t;this.apiCallsQueues={unknown:new _a,mainSearch:new _a,facetValues:new _a,foldingCollection:new _a,instantResults:new _a}}async plan(t){let r=await tt.call({..._t(t,"POST","application/json","/plan"),requestParams:Ut(t),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return os(r);let a=await r.json();return tP(a)?{success:a}:{error:Mr({response:r,body:a})}}async querySuggest(t){let r=await tt.call({..._t(t,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:Ut(t),...this.options});if(r instanceof Error)return os(r);let a=await r.json(),n={response:r,body:a};return eP(a)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:Mr(n)}}async search(t,r){var s;let a=(s=r==null?void 0:r.origin)!=null?s:"unknown",n=await this.apiCallsQueues[a].enqueue(u=>tt.call({..._t(t,"POST","application/json",""),requestParams:Ut(t),requestMetadata:{method:"search",origin:r==null?void 0:r.origin},...this.options,signal:u!=null?u:void 0}),{logger:this.options.logger,warnOnAbort:!(r==null?void 0:r.disableAbortWarning)});if(n instanceof Error)return os(n,r==null?void 0:r.disableAbortWarning);let o=await n.json(),i={response:n,body:o};return Ac(o)?(i.body=Lh(o),{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}):{error:Mr(i)}}async facetSearch(t){let r=await tt.call({..._t(t,"POST","application/json","/facet"),requestParams:Ut(t),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let a=await r.json(),n={response:r,body:a};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(t){let r=await tt.call({..._t(t,"POST","application/json",""),requestParams:Ut(t),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return Ac(a)?{success:a}:{error:Mr({response:r,body:a})}}async html(t){return Nh(t,{...this.options})}async productRecommendations(t){let r=await tt.call({..._t(t,"POST","application/json",""),requestParams:Ut(t),requestMetadata:{method:"productRecommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return Ac(a)?{success:a}:{error:Mr({response:r,body:a})}}async fieldDescriptions(t){let r=await tt.call({..._t(t,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return rP(a)?{success:a}:{error:Mr({response:r,body:a})}}},Rc=e=>e.success!==void 0,Fe=e=>e.error!==void 0;function Ac(e){return e.results!==void 0}function Lh(e){let t=qn();return oe(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function eP(e){return e.completions!==void 0}function tP(e){return e.preprocessingOutput!==void 0}function rP(e){return e.fields!==void 0}var Pc=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function ss(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Pc(),originalQuery:"",automaticallyCorrectQuery:!0}}function Tn(){return{enabled:!0}}function na(){return{freezeFacetOrder:!1,facets:{}}}function $t(){return{}}function Dn(){return{}}function Bh(e){return{request:e,hasBreadcrumbs:!0}}function Ht(){return{}}function jh(e){return{request:e}}function zt(){return{}}function Uh(e){return{request:e}}function Gt(){return{}}var wc=["author","language","urihash","objecttype","collection","source","permanentid"],Vp=[...wc,"date","filetype","parents"],_h=[...Vp,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Vn=()=>({fieldsToInclude:wc,fetchAllFields:!1,fieldsDescription:[]});var Ha=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function Mn(){return{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1,feedbackSubmitted:!1}}function Be(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function za(){return{}}var Mp=()=>({});var Ce=()=>({q:"",enableQuerySyntax:!1});var Nn=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var Nr=(r=>(r.Ascending="ascending",r.Descending="descending",r))(Nr||{}),Ot=(o=>(o.Relevancy="relevancy",o.QRE="qre",o.Date="date",o.Field="field",o.NoSort="nosort",o))(Ot||{}),Wt=e=>{if(wn(e))return e.map(t=>Wt(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Ln=()=>({by:"relevancy"}),Ec=e=>({by:"date",order:e}),Ic=(e,t)=>({by:"field",order:t,field:e}),kc=()=>({by:"qre"}),Oc=()=>({by:"nosort"}),$h=new q({values:{by:new It({enum:Ot,required:!0}),order:new It({enum:Nr}),field:new w}});function Ke(){return Wt(Ln())}function Ga(){return{}}function Wa(){return{}}function Lr(){return{contextValues:{}}}function cs(){return{}}var us=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});function oa(){return{contextValues:{}}}var at=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var qt=()=>"";var Hh=Ee(Xi());var qc=e=>e,Tc=e=>e,Dc=e=>e;function zh(e){return new is({logger:(0,Hh.default)({level:"silent"}),preprocessRequest:Ua,postprocessSearchResponseMiddleware:qc,postprocessFacetSearchResponseMiddleware:Tc,postprocessQuerySuggestResponseMiddleware:Dc,...e})}var Vc=e=>({past:[],present:e,future:[]}),oP=e=>{let{past:t,present:r,future:a}=e;if(!r||t.length===0)return e;let n=t[t.length-1];return{past:t.slice(0,t.length-1),present:n,future:[r,...a]}},iP=e=>{let{past:t,present:r,future:a}=e;if(!r||a.length===0)return e;let n=a[0],o=a.slice(1);return{past:[...t,r],present:n,future:o}},sP=e=>{let{action:t,state:r,reducer:a}=e,{past:n,present:o}=r,i=a(o,t);return o?o===i?r:{past:[...n,o],present:i,future:[]}:Vc(i)},Gh=e=>{let{actionTypes:t,reducer:r}=e,a=Vc();return(n=a,o)=>{switch(o.type){case t.undo:return oP(n);case t.redo:return iP(n);case t.snapshot:return sP({state:n,reducer:r,action:o});default:return n}}};function Mc(){return{length:void 0}}var Wh=1,Yh=10,Nc=5,Kh=1,Lc=8;function ia(){return{desiredCount:Nc,numberOfValues:Lc,set:{}}}function Qn(){return{}}function Qc(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}function Bc(){return Qr({})}function Qr(e){var t,r,a;return{context:e.context||Lr(),dictionaryFieldContext:e.dictionaryFieldContext||oa(),facetSet:e.facetSet||Ht(),numericFacetSet:e.numericFacetSet||Gt(),dateFacetSet:e.dateFacetSet||zt(),categoryFacetSet:e.categoryFacetSet||$t(),automaticFacetSet:(t=e.automaticFacetSet)!=null?t:ia(),pagination:e.pagination||Be(),query:e.query||Ce(),tabSet:e.tabSet||Wa(),advancedSearchQueries:e.advancedSearchQueries||at(),staticFilterSet:e.staticFilterSet||Ga(),querySet:e.querySet||za(),instantResults:e.instantResults||Qn(),sortCriteria:e.sortCriteria||Ke(),pipeline:e.pipeline||qt(),searchHub:e.searchHub||He(),facetOptions:e.facetOptions||na(),facetOrder:(r=e.facetOrder)!=null?r:aa(),debug:(a=e.debug)!=null?a:pt()}}function jc(){return{queries:[],maxLength:10}}function Uc(){return{results:[],maxLength:10}}function _c(){return{}}var $c=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});function ls(e={}){return{configuration:rt(),advancedSearchQueries:at(),staticFilterSet:Ga(),facetSet:Ht(),dateFacetSet:zt(),numericFacetSet:Gt(),categoryFacetSet:$t(),facetSearchSet:Dn(),categoryFacetSearchSet:cs(),facetOptions:na(),pagination:Be(),query:Ce(),querySet:za(),instantResults:Qn(),tabSet:Wa(),querySuggest:{},search:qe(),sortCriteria:Ke(),context:Lr(),dictionaryFieldContext:oa(),didYouMean:ss(),fields:Vn(),history:Vc(Bc()),pipeline:qt(),facetOrder:aa(),searchHub:He(),debug:pt(),resultPreview:ja(),version:"unit-testing-version",folding:Ha(),triggers:$c(),questionAnswering:Nn(),standaloneSearchBoxSet:_c(),recentResults:Uc(),recentQueries:jc(),excerptLength:Mc(),automaticFacetSet:ia(),generatedAnswer:Mn(),...e}}function Np(e={}){let t=cP(e,ls);return{...t,executeFirstSearch:jest.fn(),executeFirstSearchAfterStandaloneSearchBoxRedirect:jest.fn(),apiClient:t.apiClient}}function cP(e={},t,r=uP){let a=(0,Jh.default)({level:"silent"}),n=Zh(e,t),{store:o,apiClient:i}=r(a,n),s=o(n),u=()=>{},{state:c,...l}=e;return{store:s,apiClient:i,state:Zh(e,t),subscribe:jest.fn(()=>u),get dispatch(){return s.dispatch},get actions(){return s.getActions()},findAsyncAction(d){let f=this.actions.find(p=>p.type===d.type);return lP(f)?f:void 0},logger:a,addReducers:jest.fn(),enableAnalytics:jest.fn(),disableAnalytics:jest.fn(),...l}}function Zh(e,t){let r=e.state||t();return r.configuration.analytics.enabled=!1,r}var uP=e=>{let t={apiClient:zh({logger:e}),validatePayload:et,logger:e};return{store:(0,Xh.default)([dc,pc(e),lc,Ui.withExtraArgument(t),...rc(),fc(e)]),apiClient:t.apiClient}};function lP(e){return e?"meta"in e:!1}function Bn(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}function Lp(e={}){return{title:"",uri:"",printableUri:"",clickUri:"",uniqueId:"",excerpt:"",firstSentences:"",summary:null,flags:"",hasHtmlVersion:!1,score:0,percentScore:0,rankingInfo:null,isTopResult:!1,isRecommendation:!1,titleHighlights:[],firstSentencesHighlights:[],excerptHighlights:[],printableUriHighlights:[],summaryHighlights:[],absentTerms:[],raw:Bn(),isUserActionView:!1,...e}}var zB={title:"example documentTitle",uri:"example documentUri",printableUri:"printable-uri",clickUri:"example documentUrl",uniqueId:"unique-id",excerpt:"excerpt",firstSentences:"first-sentences",flags:"flags",rankingModifier:"example rankingModifier",raw:Bn({urihash:"example documentUriHash",source:"example sourceName",collection:"example collectionName",permanentid:"example contentIDValue"})};var jp={};Od(jp,{escape:()=>jn,getHighlightedSuggestion:()=>Qp,highlightString:()=>dP});function dP(e){if(Sc(e.openingDelimiter)||Sc(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(oe(e.content)||Sc(e.content))return e.content;if(e.highlights.length===0)return jn(e.content);let t=e.content.length,r="",a=0;for(let n=0;n<e.highlights.length;n++){let o=e.highlights[n],i=o.offset,s=i+o.length;if(s>t)break;r+=jn(e.content.slice(a,i)),r+=e.openingDelimiter,r+=jn(e.content.slice(i,s)),r+=e.closingDelimiter,a=s}return a!==t&&(r+=jn(e.content.slice(a))),r}function Qp(e,t){return e=jn(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,a,n,o)=>a?Bp(a,t.notMatchDelimiters):n?Bp(n,t.exactMatchDelimiters):o?Bp(o,t.correctionDelimiters):r)}function Bp(e,t){return t?t.open+e+t.close:e}function jn(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",a=RegExp(r),n=RegExp(r,"g");return a.test(e)?e.replace(n,o=>t[o]):e}async function pP({config:e,environment:t,event:r,listenerManager:a}){let{url:n,token:o,mode:i}=e;i!=="disabled"&&(a.call(r),t.send(n,o,r))}var fP=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function mP(e){return typeof e=="string"&&fP.test(e)}function gP(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),a=r.storage,n=a.getItem(t),o=n&&mP(n)?n:r.generateUUID();return a.setItem(t,o),o},clear:()=>{e.get().storage.removeItem(t)}}}var eS="0.6.8";function hP(e){let{trackingId:t}=e;return{trackingId:t}}function SP(){return`relay@${eS}`}function tS(e,t,r,a){let{getReferrer:n,getLocation:o,getUserAgent:i}=r,s=hP(t),u=a.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:SP(),clientId:u,userAgent:i(),referrer:n(),location:o()})}function yP(e,t,r,a,n){return{...t,meta:tS(e,r,a,n)}}var CP="*";function vP(){let e=[];function t({type:u,callback:c}){return e.findIndex(l=>l.type===u&&l.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function a(u){return t(u)<0&&e.push(u),()=>s(u.type,u.callback)}function n(u){e.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u)}catch(l){console.error(l)}})}function o(u){if(u===CP)e.length=0;else for(let c=e.length-1;c>=0;c--)e[c].type===u&&e.splice(c,1)}function i(u){let c=t(u);c>=0&&e.splice(c,1)}function s(u,c){c?i({type:u,callback:c}):o(u)}return{add:a,call:n,remove:s}}function rS({url:e,token:t,trackingId:r,...a}){return Object.freeze({url:e,token:t,trackingId:r,...!!a.mode&&{mode:a.mode}})}function xP(e){let t=rS(e);return{get:()=>t,update:r=>{t=rS({...t,...r})}}}function bP(){let e=typeof window!="undefined";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var Up=FP();function FP(){let e="coveo_",t=r=>{let a=r.split(".").slice(-2);return a.length==2?a.join("."):""};return{getItem(r){let a=`${e}${r}=`,n=document.cookie.split(";");for(let o of n){let i=o.replace(/^\s+/,"");if(i.lastIndexOf(a,0)===0)return i.substring(a.length,i.length)}return null},setItem(r,a,n){let o=t(window.location.hostname),i=`;expires=${new Date(new Date().getTime()+n).toUTCString()}`,s=o?`;domain=${o}`:"";document.cookie=`${e}${r}=${a}${i}${s};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function RP(){return{getItem(e){return Up.getItem(e)||localStorage.getItem(e)},removeItem(e){Up.removeItem(e),localStorage.removeItem(e)},setItem(e,t){let r=31556952e3;localStorage.setItem(e,t),Up.setItem(e,t,r)}}}async function _p(e,t){return fetch(e,t).catch(r=>{throw new Error(`${r.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:r})})}function AP(){let e=document.referrer;return e===""?null:e}function PP(){return{runtime:"browser",fetch:(e,t)=>_p(e,t),send:async(e,t,r)=>{let a=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(bP().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!a)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>AP(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:RP()}}function aS(){return{getItem(){return null},removeItem(){},setItem(){}}}function wP(){return{runtime:"node",fetch:(e,t)=>_p(e,t),send:async(e,t,r)=>{let a={"Content-Type":"application/json",Authorization:`Bearer ${t}`};_p(e,{method:"POST",body:JSON.stringify([r]),headers:a})},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:aS()}}function EP(){return IP()?PP():wP()}function IP(){try{return typeof window=="object"}catch{return!1}}function kP(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:aS()}}function OP(e){return e.get().mode=="disabled"?kP():EP()}function qP(e){return{get:()=>Object.freeze(OP(e))}}function nS(e){let t=xP(e),r=vP(),a=qP(t),n=gP(a);return{emit:(o,i)=>{let s=t.get(),u=a.get(),c=yP(o,i,s,u,n);return pP({config:s,environment:u,event:c,listenerManager:r})},getMeta:o=>tS(o,t.get(),a.get(),n),on:(o,i)=>r.add({type:o,callback:i}),off:(o,i)=>r.remove(o,i),updateConfig:o=>t.update(o),version:eS,clearStorage:()=>{n.clear()}}}function Yt(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}function F(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(e,t||[])).next())})}var se;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(se||(se={}));function TP(){return typeof window!="undefined"}function $p(){return typeof navigator!="undefined"}function Un(){return typeof document!="undefined"}function Hp(){try{return typeof localStorage!="undefined"}catch{return!1}}function DP(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function oS(){return $p()&&navigator.cookieEnabled}var VP=[se.click,se.custom,se.search,se.view],MP=(e,t)=>VP.indexOf(e)!==-1?Object.assign({language:Un()?document.documentElement.lang:"unknown",userAgent:$p()?navigator.userAgent:"unknown"},t):t,_n=class{static set(t,r,a){var n,o,i,s;a&&(o=new Date,o.setTime(o.getTime()+a)),s=window.location.hostname,s.indexOf(".")===-1?iS(t,r,o):(i=s.split("."),n=i[i.length-2]+"."+i[i.length-1],iS(t,r,o,n))}static get(t){for(var r=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(t){_n.set(t,"",-1)}};function iS(e,t,r,a){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(a?`;domain=${a}`:"")+";path=/;SameSite=Lax"}function NP(){return Hp()?localStorage:oS()?new sa:DP()?sessionStorage:new $n}var sa=class{getItem(t){return _n.get(`${sa.prefix}${t}`)}removeItem(t){_n.erase(`${sa.prefix}${t}`)}setItem(t,r,a){_n.set(`${sa.prefix}${t}`,r,a)}};sa.prefix="coveo_";var sS=class{constructor(){this.cookieStorage=new sa}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},$n=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},ds="__coveo.analytics.history",cS=20,uS=1e3*60,lS=75,ps=class{constructor(t){this.store=t||NP()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return F(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return F(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(ds);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return F(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(ds);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(ds,JSON.stringify(t.slice(0,cS)))}catch{}}clear(){try{this.store.removeItem(ds)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((a,n)=>(n.internalTime||0)-(a.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,lS)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>uS:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:a,time:n,value:o}=r;return{name:a,time:n,value:o}}):[]}stripEmptyQuery(t){let{name:r,time:a,value:n}=t;return r&&typeof n=="string"&&r.toLowerCase()==="query"&&n.trim()===""?{name:r,time:a}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}},dS=Object.freeze({__proto__:null,HistoryStore:ps,MAX_NUMBER_OF_HISTORY_ELEMENTS:cS,MAX_VALUE_SIZE:lS,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:uS,STORE_KEY:ds,default:ps}),LP=(e,t)=>F(void 0,void 0,void 0,function*(){return e===se.view?(yield QP(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),QP=e=>F(void 0,void 0,void 0,function*(){let t=new ps,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),Hc,BP=new Uint8Array(16);function jP(){if(!Hc&&(Hc=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Hc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hc(BP)}var UP=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function zc(e){return typeof e=="string"&&UP.test(e)}var je=[];for(let e=0;e<256;++e)je.push((e+256).toString(16).slice(1));function pS(e,t=0){return(je[e[t+0]]+je[e[t+1]]+je[e[t+2]]+je[e[t+3]]+"-"+je[e[t+4]]+je[e[t+5]]+"-"+je[e[t+6]]+je[e[t+7]]+"-"+je[e[t+8]]+je[e[t+9]]+"-"+je[e[t+10]]+je[e[t+11]]+je[e[t+12]]+je[e[t+13]]+je[e[t+14]]+je[e[t+15]]).toLowerCase()}function _P(e){if(!zc(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function $P(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var HP="6ba7b810-9dad-11d1-80b4-00c04fd430c8",zP="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function GP(e,t,r){function a(n,o,i,s){var u;if(typeof n=="string"&&(n=$P(n)),typeof o=="string"&&(o=_P(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+n.length);if(c.set(o),c.set(n,o.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=c[l];return i}return pS(c)}try{a.name=e}catch{}return a.DNS=HP,a.URL=zP,a}var WP=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fS={randomUUID:WP};function Ya(e,t,r){if(fS.randomUUID&&!t&&!e)return fS.randomUUID();e=e||{};let a=e.random||(e.rng||jP)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=a[n];return t}return pS(a)}function YP(e,t,r,a){switch(e){case 0:return t&r^~t&a;case 1:return t^r^a;case 2:return t&r^t&a^r&a;case 3:return t^r^a}}function zp(e,t){return e<<t|e>>>32-t}function KP(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let i=unescape(encodeURIComponent(e));e=[];for(let s=0;s<i.length;++s)e.push(i.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let a=e.length/4+2,n=Math.ceil(a/16),o=new Array(n);for(let i=0;i<n;++i){let s=new Uint32Array(16);for(let u=0;u<16;++u)s[u]=e[i*64+u*4]<<24|e[i*64+u*4+1]<<16|e[i*64+u*4+2]<<8|e[i*64+u*4+3];o[i]=s}o[n-1][14]=(e.length-1)*8/Math.pow(2,32),o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=(e.length-1)*8&4294967295;for(let i=0;i<n;++i){let s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=o[i][p];for(let p=16;p<80;++p)s[p]=zp(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let u=r[0],c=r[1],l=r[2],d=r[3],f=r[4];for(let p=0;p<80;++p){let m=Math.floor(p/20),g=zp(u,5)+YP(m,c,l,d)+f+t[m]+s[p]>>>0;f=d,d=l,l=zp(c,30)>>>0,c=u,u=g}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var JP=GP("v5",80,KP),mS=JP,gS="2.28.23",hS=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,fs={pageview:"pageview",event:"event"},Gp=class{constructor({client:t,uuidGenerator:r=Ya}){this.client=t,this.uuidGenerator=r}},SS=class extends Gp{constructor({client:t,uuidGenerator:r=Ya}){super({client:t,uuidGenerator:r});this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=hS(window.location),this.lastReferrer=Un()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:Un()?document.title:"",encoding:Un()?document.characterSet:"UTF-8"},a={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},o={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},o),a),n),r)}updateLocationForNextPageView(t,r){let{pageViewId:a,referrer:n,location:o}=this.getNextValues(t,r);this.lastReferrer=n,this.pageViewId=a,this.currentLocation=o,t===fs.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===fs.pageview?this.nextPageViewId:this.pageViewId,referrer:t===fs.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===fs.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=n=>n.replace(/^\/?(.*)$/,"/$1");return`${(n=>n.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return hS(window.location)}},Kt=class{constructor(t,r){if(!zc(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>Kt.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let a=new URL(t);return r.some(n=>new RegExp(n.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(a.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[a,n]=r;if(a.length!==32||isNaN(parseInt(n)))return null;let o=a.substring(0,8)+"-"+a.substring(8,12)+"-"+a.substring(12,16)+"-"+a.substring(16,20)+"-"+a.substring(20,32);return zc(o)?new Kt(o,Number.parseInt(n)*1e3):null}};Kt.cvo_cid="cvo_cid";Kt.expirationTime=120;var yS=class extends Gp{constructor({client:t,uuidGenerator:r=Ya}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return F(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),a=yield this.client.getCurrentVisitorId();return r.searchParams.set(Kt.cvo_cid,new Kt(a,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};yS.Id="link";var ft=Object.keys;function Gc(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Wp={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},XP=ft(Wp).map(e=>Wp[e]),ZP=[...XP].join("|"),ew=new RegExp(`^(${ZP}$)`),tw={svcAction:"svc_action",svcActionData:"svc_action_data"},rw=e=>ft(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let a=Wp[r]||r;return Object.assign(Object.assign({},t),{[a]:e[r]})},{}),aw=e=>ew.test(e),nw=[aw],CS={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},vS={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},ze={action:"pa",list:"pal",listSource:"pls"},Wc={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},ow=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Yp={id:"quoteId",affiliation:"quoteAffiliation"},Kp={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},iw={add:ze,bookmark_add:ze,bookmark_remove:ze,click:ze,checkout:ze,checkout_option:ze,detail:ze,impression:ze,remove:ze,refund:Object.assign(Object.assign({},ze),Wc),purchase:Object.assign(Object.assign({},ze),Wc),quickview:ze,quote:Object.assign(Object.assign({},ze),Yp),review:Object.assign(Object.assign({},ze),Kp)},sw=ft(CS).map(e=>CS[e]),cw=ft(vS).map(e=>vS[e]),uw=ft(ze).map(e=>ze[e]),lw=ft(Wc).map(e=>Wc[e]),dw=ft(Kp).map(e=>Kp[e]),pw=ft(Yp).map(e=>Yp[e]),fw=[...sw,"custom"].join("|"),mw=[...cw,"custom"].join("|"),xS="(pr[0-9]+)",bS="(il[0-9]+pi[0-9]+)",gw=new RegExp(`^${xS}(${fw})$`),hw=new RegExp(`^(${bS}(${mw}))|(il[0-9]+nm)$`),Sw=new RegExp(`^(${uw.join("|")})$`),yw=new RegExp(`^(${lw.join("|")})$`),Cw=new RegExp(`^${xS}custom$`),vw=new RegExp(`^${bS}custom$`),xw=new RegExp(`^(${[...ow,...dw,...pw].join("|")})$`),bw=e=>gw.test(e),Fw=e=>hw.test(e),Rw=e=>Sw.test(e),Aw=e=>yw.test(e),Pw=e=>xw.test(e),ww=[Fw,bw,Rw,Aw,Pw],Ew=[Cw,vw],Iw={anonymizeIp:"aip"},kw={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},Ow={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},qw=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],Tw=Object.assign(Object.assign(Object.assign(Object.assign({},Iw),kw),Ow),qw.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Jp=Object.assign(Object.assign({},Tw),tw),Dw=e=>{let t=!!e.action&&iw[e.action]||{};return ft(e).reduce((r,a)=>{let n=t[a]||Jp[a]||a;return Object.assign(Object.assign({},r),{[n]:e[a]})},{})},Vw=ft(Jp).map(e=>Jp[e]),Mw=e=>Vw.indexOf(e)!==-1,Nw=e=>e==="custom",Lw=e=>[...ww,...nw,Mw,Nw].some(t=>t(e)),Qw=e=>ft(e).reduce((t,r)=>{let a=Bw(r);return a?Object.assign(Object.assign({},t),jw(a,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),Bw=e=>{let t;return[...Ew].every(r=>{var a;return t=(a=r.exec(e))===null||a===void 0?void 0:a[1],!Boolean(t)}),t},jw=(e,t)=>ft(t).reduce((r,a)=>Object.assign(Object.assign({},r),{[`${e}${a}`]:t[a]}),{}),FS=class{constructor(t){this.opts=t}sendEvent(t,r){return F(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:a,preprocessRequest:n}=this.opts,o=yield this.getQueryParamsForEventType(t),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${a}/analytics/${t}?${o}`,r,n),u=this.encodeForEventType(t,s),c=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,c)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,a){return F(this,void 0,void 0,function*(){let n=t,o=r;if(a){let i=yield a({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:u}=i;n=s||t;try{o=JSON.parse(u)}catch(c){console.error("Unable to process the request body as a JSON string",c)}}return{payload:o,url:n}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeForLegacyType(t,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(t){return F(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:a}=this.opts,n=yield a.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(o=>!!o).join("&")})}isEventTypeLegacy(t){return[se.click,se.custom,se.search,se.view].indexOf(t)!==-1}encodeForLegacyType(t,r){return`${t}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(t){return Object.keys(t).filter(r=>!!t[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(t[r]))}`).join("&")}encodeValue(t){return typeof t=="number"||typeof t=="string"||typeof t=="boolean"?t:JSON.stringify(t)}},RS=class{sendEvent(t,r){return F(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return F(this,void 0,void 0,function*(){return Promise.resolve()})}},AS=window.fetch,Xp=class{constructor(t){this.opts=t}sendEvent(t,r){return F(this,void 0,void 0,function*(){let{baseUrl:a,visitorIdProvider:n,preprocessRequest:o}=this.opts,i=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",s={url:`${a}/analytics/${t}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},s),o?yield o(s,"analyticsFetch"):{}),{url:c}=u,l=Yt(u,["url"]),d=yield AS(c,l);if(d.ok){let f=yield d.json();return f.visitorId&&n.setCurrentVisitorId(f.visitorId),f}else{try{d.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,d,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return F(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield AS(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[se.click,se.custom,se.search,se.view].indexOf(t)!==-1}getVisitorIdParam(){return F(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},PS=class{constructor(t,r){Hp()&&oS()?this.storage=new sS:Hp()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new $n),this.client=new Xp(t),this.beaconClient=new FS(t),window.addEventListener("beforeunload",()=>{let a=r();for(let{eventType:n,payload:o}of a)this.beaconClient.sendEvent(n,o)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},wS=class{constructor(t,r){this.storage=r||new $n,this.client=new Xp(t)}getClientDependingOnEventType(t){return this.client}},ES=class{constructor(){this.storage=new $n,this.client=new RS}getClientDependingOnEventType(t){return this.client}},Uw="xx",_w=e=>(e==null?void 0:e.startsWith(Uw))||!1,$w=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function Hw(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var zw=["1",1,"yes",!0];function ms(){return $p()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>zw.indexOf(e)!==-1)}var IS="v15",kS={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Gw(e=kS.default,t=IS,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let a=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${a?"":"/rest"}/${t}`}var Ww="38824e1f-37f5-42d3-8372-a4b8fa9df946",Je=class{get defaultOptions(){return{endpoint:kS.default,isCustomEndpoint:!1,token:"",version:IS,beforeSendHooks:[],afterSendHooks:[]}}get version(){return gS}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[LP,MP].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),ms()&&(this.clear(),this.runtime.storage=new $n),this.addEventTypeMapping(se.view,{newEventType:se.view,addClientIdParameter:!0}),this.addEventTypeMapping(se.click,{newEventType:se.click,addClientIdParameter:!0}),this.addEventTypeMapping(se.custom,{newEventType:se.custom,addClientIdParameter:!0}),this.addEventTypeMapping(se.search,{newEventType:se.search,addClientIdParameter:!0})}initRuntime(t){return TP()&&Un()?new PS(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(Hw()&&console.warn($w),new wS(t))}get storage(){return this.runtime.storage}determineVisitorId(){return F(this,void 0,void 0,function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Ya()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),Ya()}})}getCurrentVisitorId(){return F(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return F(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return F(this,void 0,void 0,function*(){if(zc(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(mS(t,mS(r,Ww)))}})}getParameters(t,...r){return F(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return F(this,void 0,void 0,function*(){let a=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,a)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Ya()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(ms())return null;try{let r=new URL(t).searchParams.get(Kt.cvo_cid);if(r==null)return null;let a=Kt.fromString(r);return!a||!Un()||!a.validate(document.referrer,this.acceptedLinkReferrers)?null:a.clientId}catch{}return null}resolveParameters(t,...r){return F(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:a=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:o=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[t]||{};return yield[p=>a.length>0?this.parseVariableArgumentsPayload(a,p):p[0],p=>F(this,void 0,void 0,function*(){return Object.assign(Object.assign({},p),{visitorId:n?yield this.getCurrentVisitorId():""})}),p=>F(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},p),{clientId:yield this.getCurrentVisitorId()}):p}),p=>o?this.ensureAnonymousUserWhenUsingApiKey(p):p,p=>this.beforeSendHooks.reduce((m,g)=>F(this,void 0,void 0,function*(){let y=yield m;return yield g(t,y)}),p)].reduce((p,m)=>F(this,void 0,void 0,function*(){let g=yield p;return yield m(g)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return F(this,void 0,void 0,function*(){let{usesMeasurementProtocol:a=!1}=this.eventTypeMapping[t]||{};return yield[d=>this.setTrackingIdIfTrackingIdNotPresent(d),d=>this.removeEmptyPayloadValues(d,t),d=>this.validateParams(d,t),d=>a?Dw(d):d,d=>a?this.removeUnknownParameters(d):d,d=>a?this.processCustomParameters(d):this.mapCustomParametersToCustomData(d)].reduce((d,f)=>F(this,void 0,void 0,function*(){let p=yield d;return yield f(p)}),Promise.resolve(r))})}makeEvent(t,...r){return F(this,void 0,void 0,function*(){let{newEventType:a=t}=this.eventTypeMapping[t]||{},n=yield this.resolveParameters(t,...r),o=yield this.resolvePayloadForParameters(t,n);return{eventType:a,payload:o,log:i=>F(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:a,payload:Object.assign(Object.assign({},o),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(t,Object.assign(Object.assign({},n),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return F(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return F(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:a}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,a)}})}clear(){this.storage.removeItem("visitorId"),new ps().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.search,t)})}sendSearchEvent(t){var{searchQueryUid:r}=t,a=Yt(t,["searchQueryUid"]);return F(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(a)).log({searchQueryUid:r})})}makeClickEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.click,t)})}sendClickEvent(t){var{searchQueryUid:r}=t,a=Yt(t,["searchQueryUid"]);return F(this,void 0,void 0,function*(){return(yield this.makeClickEvent(a)).log({searchQueryUid:r})})}makeCustomEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.custom,t)})}sendCustomEvent(t){var{lastSearchQueryUid:r}=t,a=Yt(t,["lastSearchQueryUid"]);return F(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(a)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.view,t)})}sendViewEvent(t){return F(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return F(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return F(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let a={};for(let n=0,o=r.length;n<o;n++){let i=r[n];if(typeof i=="string")a[t[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},a),i)}return a}isKeyAllowedEmpty(t,r){return({[se.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let a=n=>typeof n!="undefined"&&n!==null&&n!=="";return Object.keys(t).filter(n=>this.isKeyAllowedEmpty(r,n)||a(t[n])).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(a=>{if(Lw(a))return!0;console.log(a,"is not processed by coveoua")}).reduce((a,n)=>Object.assign(Object.assign({},a),{[n]:t[n]}),{})}processCustomParameters(t){let{custom:r}=t,a=Yt(t,["custom"]),n={};r&&Gc(r)&&(n=this.lowercaseKeys(r));let o=Qw(a);return Object.assign(Object.assign({},n),o)}mapCustomParametersToCustomData(t){let{custom:r}=t,a=Yt(t,["custom"]);if(r&&Gc(r)){let n=this.lowercaseKeys(r);return Object.assign(Object.assign({},a),{customData:Object.assign(Object.assign({},n),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),a={};return r.forEach(n=>{a[n.toLowerCase()]=t[n]}),a}validateParams(t,r){let{anonymizeIp:a}=t,n=Yt(t,["anonymizeIp"]);return a!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${a}`.toLowerCase())==-1&&(n.anonymizeIp=1),(r==se.view||r==se.click||r==se.search||r==se.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),r==se.view&&(n.location=this.limit(n.location,128)),(r=="pageview"||r=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,a=Yt(t,["userId"]);return _w(this.options.token)&&!r?(a.userId="anonymous",a):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,a=Yt(t,["trackingId"]);return r?t:(a.hasOwnProperty("custom")&&Gc(a.custom)&&(a.custom.hasOwnProperty("context_website")||a.custom.hasOwnProperty("siteName"))&&(a.trackingId=a.custom.context_website||a.custom.siteName),a.hasOwnProperty("customData")&&Gc(a.customData)&&(a.customData.hasOwnProperty("context_website")||a.customData.hasOwnProperty("siteName"))&&(a.trackingId=a.customData.context_website||a.customData.siteName),a)}limit(t,r){return typeof t!="string"?t:t.substring(0,r)}get baseUrl(){return Gw(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Ue;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Ue||(Ue={}));var x;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(x||(x={}));var Zp={[x.triggerNotify]:"queryPipelineTriggers",[x.triggerExecute]:"queryPipelineTriggers",[x.triggerQuery]:"queryPipelineTriggers",[x.triggerRedirect]:"queryPipelineTriggers",[x.queryError]:"errors",[x.queryErrorBack]:"errors",[x.queryErrorClear]:"errors",[x.queryErrorRetry]:"errors",[x.pagerNext]:"getMoreResults",[x.pagerPrevious]:"getMoreResults",[x.pagerNumber]:"getMoreResults",[x.pagerResize]:"getMoreResults",[x.pagerScrolling]:"getMoreResults",[x.facetSearch]:"facet",[x.facetShowLess]:"facet",[x.facetShowMore]:"facet",[x.recommendation]:"recommendation",[x.likeSmartSnippet]:"smartSnippet",[x.dislikeSmartSnippet]:"smartSnippet",[x.expandSmartSnippet]:"smartSnippet",[x.collapseSmartSnippet]:"smartSnippet",[x.openSmartSnippetFeedbackModal]:"smartSnippet",[x.closeSmartSnippetFeedbackModal]:"smartSnippet",[x.sendSmartSnippetReason]:"smartSnippet",[x.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[x.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[x.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[x.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[x.clearRecentQueries]:"recentQueries",[x.recentResultClick]:"recentlyClickedDocuments",[x.clearRecentResults]:"recentlyClickedDocuments",[x.showLessFoldedResults]:"folding",[x.caseDetach]:"case",[x.likeGeneratedAnswer]:"generatedAnswer",[x.dislikeGeneratedAnswer]:"generatedAnswer",[x.openGeneratedAnswerSource]:"generatedAnswer",[x.generatedAnswerStreamEnd]:"generatedAnswer",[x.generatedAnswerSourceHover]:"generatedAnswer",[x.generatedAnswerCopyToClipboard]:"generatedAnswer",[x.generatedAnswerHideAnswers]:"generatedAnswer",[x.generatedAnswerShowAnswers]:"generatedAnswer",[x.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Ue.expandToFullUI]:"interface",[Ue.openUserActions]:"User Actions",[Ue.showPrecedingSessions]:"User Actions",[Ue.showFollowingSessions]:"User Actions",[Ue.clickViewedDocument]:"User Actions",[Ue.clickPageView]:"User Actions",[Ue.createArticle]:"createArticle"},Ka=class{constructor(){this.runtime=new ES,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(se.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(se.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(se.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(se.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return gS}};function Yw(e){let t="";return e.filter(r=>{let a=r!==t;return t=r,a})}function Kw(e){return e.map(t=>t.replace(/;/g,""))}function OS(e){let t=256,r=e.join(";");return r.length<=t?r:OS(e.slice(1))}var qS=e=>{let t=Kw(e),r=Yw(t);return OS(r)};function TS(e){let t=typeof e.partialQueries=="string"?e.partialQueries:qS(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:qS(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Ja=class{constructor(t,r){this.opts=t,this.provider=r;let a=t.enableAnalytics===!1||ms();this.coveoAnalyticsClient=a?new Ka:new Je(t)}disable(){this.coveoAnalyticsClient instanceof Je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Ka}enable(){this.coveoAnalyticsClient=new Je(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(x.interfaceLoad)}logInterfaceLoad(){return F(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(x.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return F(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(x.recommendation)}logRecommendation(){return F(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(x.recommendationOpen,t,r)}logRecommendationOpen(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(x.staticFilterClearAll,t)}logStaticFilterClearAll(t){return F(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(x.staticFilterSelect,t)}logStaticFilterSelect(t){return F(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(x.staticFilterDeselect,t)}logStaticFilterDeselect(t){return F(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(x.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return F(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(x.interfaceChange,t)}logInterfaceChange(t){return F(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(x.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return F(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(x.didyoumeanClick)}logDidYouMeanClick(){return F(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(x.resultsSort,t)}logResultsSort(t){return F(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(x.searchboxSubmit)}logSearchboxSubmit(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(x.searchboxClear)}logSearchboxClear(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(x.searchboxAsYouType)}logSearchboxAsYouType(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(x.breadcrumbFacet,t)}logBreadcrumbFacet(t){return F(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(x.breadcrumbResetAll)}logBreadcrumbResetAll(){return F(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(x.documentQuickview,t,r)}logDocumentQuickview(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(x.documentOpen,t,r)}logDocumentOpen(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(x.omniboxAnalytics,TS(t))}logOmniboxAnalytics(t){return F(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(x.omniboxFromLink,TS(t))}logOmniboxFromLink(t){return F(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(x.searchFromLink)}logSearchFromLink(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(x.triggerNotify,t)}logTriggerNotify(t){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(x.triggerExecute,t)}logTriggerExecute(t){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(x.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(x.undoTriggerQuery,t)}logUndoTriggerQuery(t){return F(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(x.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(x.pagerResize,t)}logPagerResize(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(x.pagerNumber,t)}logPagerNumber(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(x.pagerNext,t)}logPagerNext(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(x.pagerPrevious,t)}logPagerPrevious(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(x.pagerScrolling)}logPagerScrolling(){return F(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(x.facetClearAll,t)}logFacetClearAll(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(x.facetSearch,t)}logFacetSearch(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(x.facetSelect,t)}logFacetSelect(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(x.facetDeselect,t)}logFacetDeselect(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(x.facetExclude,t)}logFacetExclude(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(x.facetUnexclude,t)}logFacetUnexclude(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(x.facetSelectAll,t)}logFacetSelectAll(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(x.facetUpdateSort,t)}logFacetUpdateSort(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(x.facetShowMore,t)}logFacetShowMore(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(x.facetShowLess,t)}logFacetShowLess(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(x.queryError,t)}logQueryError(t){return F(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return F(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(x.queryErrorBack);return{description:t.description,log:()=>F(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(x.queryErrorBack)})}})}logQueryErrorBack(){return F(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return F(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(x.queryErrorRetry);return{description:t.description,log:()=>F(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(x.queryErrorRetry)})}})}logQueryErrorRetry(){return F(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return F(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(x.queryErrorClear);return{description:t.description,log:()=>F(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(x.queryErrorClear)})}})}logQueryErrorClear(){return F(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(x.likeSmartSnippet)}logLikeSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(x.dislikeSmartSnippet)}logDislikeSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(x.expandSmartSnippet)}logExpandSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(x.collapseSmartSnippet)}logCollapseSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(x.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(x.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return F(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(x.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(x.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(x.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(x.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(x.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(x.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(x.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(x.copyToClipboard,t,r)}logCopyToClipboard(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(x.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(x.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(x.recentQueryClick)}logRecentQueryClick(){return F(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(x.clearRecentQueries)}logClearRecentQueries(){return F(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(x.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(x.clearRecentResults)}logClearRecentResults(){return F(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(x.noResultsBack)}logNoResultsBack(){return F(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(x.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(x.showLessFoldedResults)}logShowLessFoldedResults(){return F(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var a;return{actionCause:r,customData:(a=t.payload)===null||a===void 0?void 0:a.customData}}makeCustomEvent(t,r,a=Zp[t]){return F(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:a,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(t,r,a=Zp[t]){return F(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(t,r,a)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,a){return F(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),a),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(t,r,a){return F(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,a)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return F(this,void 0,void 0,function*(){let a=yield this.getBaseSearchEventRequest(t,r),n=yield this.coveoAnalyticsClient.makeSearchEvent(a);return{description:this.makeEventDescription(n,t),log:({searchUID:o})=>n.log({searchQueryUid:o})}})}makeClickEvent(t,r,a,n){return F(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),i=yield this.coveoAnalyticsClient.makeClickEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(t,r,a,n){return F(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,a,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var a,n;return F(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return F(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Je?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(x.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return F(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(x.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return F(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(x.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return F(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(x.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(x.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(x.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(x.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(x.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(x.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return F(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(x.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return F(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(x.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},Yc=Object.assign({},fs),DS=Object.keys(Yc).map(e=>Yc[e]),gs=class extends SS{constructor({client:t,uuidGenerator:r=Ya}){super({client:t,uuidGenerator:r});this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>DS.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(DS.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(Yc.pageview,{newEventType:se.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(Yc.event,{newEventType:se.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var a;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((a=this.actionData)!==null&&a!==void 0?a:{}).length>0?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},o),n),r)}getTicketPayload(){return rw(this.ticket)}};gs.Id="svc";var Kc;(function(e){e.click="click",e.flowStart="flowStart"})(Kc||(Kc={}));var Tt;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Tt||(Tt={}));var Jc;(function(e){e.quit="Quit",e.solved="Solved"})(Jc||(Jc={}));var ef=class{constructor(t,r){var a;this.options=t,this.provider=r;let n=((a=t.enableAnalytics)!==null&&a!==void 0?a:!0)&&!ms();this.coveoAnalyticsClient=n?new Je(t):new Ka,this.svc=new gs({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof Je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Ka,this.svc=new gs({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Je(this.options),this.svc=new gs({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(Tt.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(Tt.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(Tt.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.svc.setAction(Tt.suggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logRateDocumentSuggestion(t){return this.svc.setAction(Tt.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(Tt.nextCaseStep,{stage:t==null?void 0:t.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(Tt.caseCancelled,{reason:Jc.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(Tt.caseSolved,{reason:Jc.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(Tt.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Kc.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Kc.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},Jw=e=>{let t={};return e.caseContext&&Object.keys(e.caseContext).forEach(r=>{var a;let n=(a=e.caseContext)===null||a===void 0?void 0:a[r];if(n){let o=`context_${r}`;t[o]=n}}),t},W=(e,t=!0)=>{let{caseContext:r,caseId:a,caseNumber:n}=e,o=Yt(e,["caseContext","caseId","caseNumber"]),i=Jw(e);return Object.assign(Object.assign(Object.assign({CaseId:a,CaseNumber:n},o),!!i.context_Case_Subject&&{CaseSubject:i.context_Case_Subject}),t&&i)},tf=class{constructor(t,r){this.opts=t,this.provider=r;let a=t.enableAnalytics===!1||ms();this.coveoAnalyticsClient=a?new Ka:new Je(t)}disable(){this.coveoAnalyticsClient instanceof Je&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Ka}enable(){this.coveoAnalyticsClient=new Je(this.opts)}logInterfaceLoad(t){if(t){let r=W(t);return this.logSearchEvent(x.interfaceLoad,r)}return this.logSearchEvent(x.interfaceLoad)}logInterfaceChange(t){let r=W(t);return this.logSearchEvent(x.interfaceChange,r)}logStaticFilterDeselect(t){let r=W(t);return this.logSearchEvent(x.staticFilterDeselect,r)}logFetchMoreResults(t){if(t){let r=W(t);return this.logCustomEvent(x.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(x.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(t){let r=W(t);return this.logSearchEvent(x.breadcrumbFacet,r)}logBreadcrumbResetAll(t){if(t){let r=W(t);return this.logSearchEvent(x.breadcrumbResetAll,r)}return this.logSearchEvent(x.breadcrumbResetAll)}logFacetSelect(t){let r=W(t);return this.logSearchEvent(x.facetSelect,r)}logFacetExclude(t){let r=W(t);return this.logSearchEvent(x.facetExclude,r)}logFacetDeselect(t){let r=W(t);return this.logSearchEvent(x.facetDeselect,r)}logFacetUpdateSort(t){let r=W(t);return this.logSearchEvent(x.facetUpdateSort,r)}logFacetClearAll(t){let r=W(t);return this.logSearchEvent(x.facetClearAll,r)}logFacetShowMore(t){let r=W(t,!1);return this.logCustomEvent(x.facetShowMore,r)}logFacetShowLess(t){let r=W(t,!1);return this.logCustomEvent(x.facetShowLess,r)}logQueryError(t){let r=W(t,!1);return this.logCustomEvent(x.queryError,r)}logPagerNumber(t){let r=W(t,!1);return this.logCustomEvent(x.pagerNumber,r)}logPagerNext(t){let r=W(t,!1);return this.logCustomEvent(x.pagerNext,r)}logPagerPrevious(t){let r=W(t,!1);return this.logCustomEvent(x.pagerPrevious,r)}logDidYouMeanAutomatic(t){if(t){let r=W(t);return this.logSearchEvent(x.didyoumeanAutomatic,r)}return this.logSearchEvent(x.didyoumeanAutomatic)}logDidYouMeanClick(t){if(t){let r=W(t);return this.logSearchEvent(x.didyoumeanClick,r)}return this.logSearchEvent(x.didyoumeanClick)}logResultsSort(t){let r=W(t);return this.logSearchEvent(x.resultsSort,r)}logSearchboxSubmit(t){if(t){let r=W(t);return this.logSearchEvent(x.searchboxSubmit,r)}return this.logSearchEvent(x.searchboxSubmit)}logContextChanged(t){let r=W(t);return this.logSearchEvent(Ue.contextChanged,r)}logExpandToFullUI(t){let r=W(t);return this.logCustomEvent(Ue.expandToFullUI,r)}logOpenUserActions(t){let r=W(t,!1);return this.logCustomEvent(Ue.openUserActions,r)}logShowPrecedingSessions(t){let r=W(t,!1);return this.logCustomEvent(Ue.showPrecedingSessions,r)}logShowFollowingSessions(t){let r=W(t,!1);return this.logCustomEvent(Ue.showFollowingSessions,r)}logViewedDocumentClick(t,r){return this.logCustomEvent(Ue.clickViewedDocument,Object.assign(Object.assign({},W(r,!1)),{document:t}))}logPageViewClick(t,r){return this.logCustomEvent(Ue.clickPageView,Object.assign(Object.assign({},W(r,!1)),{pageView:t}))}logCreateArticle(t,r){return this.logCustomEvent(Ue.createArticle,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logDocumentOpen(t,r,a){return this.logClickEvent(x.documentOpen,t,r,a?W(a,!1):void 0)}logCopyToClipboard(t,r,a){return this.logClickEvent(x.copyToClipboard,t,r,a?W(a,!1):void 0)}logCaseSendEmail(t,r,a){return this.logClickEvent(x.caseSendEmail,t,r,a?W(a,!1):void 0)}logFeedItemTextPost(t,r,a){return this.logClickEvent(x.feedItemTextPost,t,r,a?W(a,!1):void 0)}logDocumentQuickview(t,r,a){let n={documentTitle:t.documentTitle,documentURL:t.documentUrl};return this.logClickEvent(x.documentQuickview,t,r,a?Object.assign(Object.assign({},W(a,!1)),n):n)}logCaseAttach(t,r,a){let n={documentTitle:t.documentTitle,documentURL:t.documentUrl,resultUriHash:t.documentUriHash};return this.logClickEvent(x.caseAttach,t,r,a?Object.assign(Object.assign({},W(a,!1)),n):n)}logCaseDetach(t,r){return this.logCustomEvent(x.caseDetach,r?Object.assign(Object.assign({},W(r,!1)),{resultUriHash:t}):{resultUriHash:t})}logLikeSmartSnippet(t){return this.logCustomEvent(x.likeSmartSnippet,t?W(t,!1):void 0)}logDislikeSmartSnippet(t){return this.logCustomEvent(x.dislikeSmartSnippet,t?W(t,!1):void 0)}logExpandSmartSnippet(t){return this.logCustomEvent(x.expandSmartSnippet,t?W(t,!1):void 0)}logCollapseSmartSnippet(t){return this.logCustomEvent(x.collapseSmartSnippet,t?W(t,!1):void 0)}logOpenSmartSnippetFeedbackModal(t){return this.logCustomEvent(x.openSmartSnippetFeedbackModal,t?W(t,!1):void 0)}logCloseSmartSnippetFeedbackModal(t){return this.logCustomEvent(x.closeSmartSnippetFeedbackModal,t?W(t,!1):void 0)}logSmartSnippetFeedbackReason(t,r,a){return this.logCustomEvent(x.sendSmartSnippetReason,a?Object.assign(Object.assign({},W(a,!1)),{reason:t,details:r}):{reason:t,details:r})}logExpandSmartSnippetSuggestion(t,r){let a="documentId"in t?t:{documentId:t};return this.logCustomEvent(x.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},W(r,!1)),a):a)}logCollapseSmartSnippetSuggestion(t,r){let a="documentId"in t?t:{documentId:t};return this.logCustomEvent(x.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},W(r,!1)),a):a)}logOpenSmartSnippetSource(t,r,a){return this.logClickEvent(x.openSmartSnippetSource,t,r,a?W(a,!1):void 0)}logOpenSmartSnippetSuggestionSource(t,r,a){return this.logClickEvent(x.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},W(a,!1)),r):r)}logOpenSmartSnippetInlineLink(t,r,a){return this.logClickEvent(x.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},a?Object.assign(Object.assign({},W(a,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(t,r,a){return this.logClickEvent(x.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},W(a,!1)),r):r)}logLikeGeneratedAnswer(t,r){return this.logCustomEvent(x.likeGeneratedAnswer,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logDislikeGeneratedAnswer(t,r){return this.logCustomEvent(x.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logOpenGeneratedAnswerSource(t,r){return this.logCustomEvent(x.openGeneratedAnswerSource,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logGeneratedAnswerSourceHover(t,r){return this.logCustomEvent(x.generatedAnswerSourceHover,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logGeneratedAnswerCopyToClipboard(t,r){return this.logCustomEvent(x.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logGeneratedAnswerHideAnswers(t,r){return this.logCustomEvent(x.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logGeneratedAnswerShowAnswers(t,r){return this.logCustomEvent(x.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logGeneratedAnswerFeedbackSubmit(t,r){return this.logCustomEvent(x.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logRephraseGeneratedAnswer(t,r){return this.logSearchEvent(x.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logRetryGeneratedAnswer(t){return this.logSearchEvent(x.retryGeneratedAnswer,t?Object.assign({},W(t,!1)):{})}logGeneratedAnswerStreamEnd(t,r){return this.logCustomEvent(x.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},W(r,!1)),t):t)}logCustomEvent(t,r){return F(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(a)),{eventType:Zp[t],eventValue:t});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logSearchEvent(t,r){return F(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(t,r))})}logClickEvent(t,r,a,n){return F(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(o)})}logShowMoreFoldedResults(t,r,a){return F(this,void 0,void 0,function*(){return this.logClickEvent(x.showMoreFoldedResults,t,r,a?W(a,!1):void 0)})}logShowLessFoldedResults(t){return F(this,void 0,void 0,function*(){return this.logCustomEvent(x.showLessFoldedResults,t?W(t,!1):void 0)})}getBaseCustomEventRequest(t){return F(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var a,n;return F(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return F(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Je?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};var Dt=(e,t)=>{let r=a=>a.facetId===t;if("productListing"in e&&e.productListing&&"facets"in e.productListing&&"results"in e.productListing.facets)return e.productListing.facets.results.find(r);if("search"in e&&e.search)return e.search.response.facets.find(r)},Xc=(e,t)=>{var r;return(r=e.facetSet[t])==null?void 0:r.request};function Xw(e,t){return!!t&&t.facetId in e.facetSet}var Hn=(e,t)=>{let r=Dt(e,t);if(Xw(e,r))return r},VS=(e,t)=>{let r=Hn(e,t);return r?r.values.filter(a=>a.state==="selected"):[]},MS=(e,t)=>{let r=Hn(e,t);return r?r.values.filter(a=>a.state!=="idle"):[]},Jt=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function NS(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let a=r.find(n=>n.state==="selected");return a&&(t=[...t,a],r=[]),{parents:t,values:r}}function ut(e){let{activeValue:t,ancestryMap:r}=Zw(e);return t?eE(t,r):[]}function Zw(e){let t=[...e],r=new Map;for(;t.length>0;){let a=t.shift();if(a.state==="selected")return{activeValue:a,ancestryMap:r};if(r)for(let n of a.children)r.set(n,a);t.unshift(...a.children)}return{}}function eE(e,t){let r=[];if(!e)return[];let a=e;do r.unshift(a),a=t.get(a);while(a);return r}function tE(e,t){return!!t&&t.facetId in e.categoryFacetSet}var rf=(e,t)=>{let r=Dt(e,t);if(tE(e,r))return r},af=(e,t)=>{var r;return(r=e.categoryFacetSet[t])==null?void 0:r.request},LS=(e,t)=>{var a;let r=rf(e,t);return ut((a=r==null?void 0:r.values)!=null?a:[])},nf=(e,t)=>{var a;let r=af(e,t);return ut((a=r==null?void 0:r.currentValues)!=null?a:[])};var zn=(e,t)=>{let r=US(t,e),a=r?r.field:"",n=of(a,e);return{facetId:e,facetField:a,facetTitle:n}};function hs(e,t){let{facetId:r,facetValue:a}=e,n=zn(r,t),o=_S(t,r);return{...n,facetValue:o==="hierarchical"?jS(t,r):a}}function lt(e){var t,r,a,n,o;return{facetSet:(t=e.facetSet)!=null?t:Ht(),categoryFacetSet:(r=e.categoryFacetSet)!=null?r:$t(),dateFacetSet:(a=e.dateFacetSet)!=null?a:zt(),numericFacetSet:(n=e.numericFacetSet)!=null?n:Gt(),automaticFacetSet:(o=e.automaticFacetSet)!=null?o:ia()}}var Zc=e=>{let t=[];return nE(e).forEach((r,a)=>{let n=_S(e,r.facetId),o=uE(r,a+1);if(aE(r)){if(!!!nf(e,r.facetId).length)return;t.push({...o,...sE(e,r.facetId),facetType:n,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let u=QS(i,s+1,n),c=rE(r)?BS(i):iE(i);t.push({...o,...u,...c})})}),oE(e).forEach((r,a)=>{let n=cE(r,a+1);r.values.forEach((o,i)=>{if(o.state==="idle")return;let s=QS(o,i+1,"specific"),u=BS(o);t.push({...n,...s,...u})})}),t},rE=e=>e.type==="specific",aE=e=>e.type==="hierarchical",nE=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),oE=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),QS=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),iE=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),BS=e=>({displayValue:e.value,value:e.value}),jS=(e,t)=>nf(e,t).map(a=>a.value).join(";"),sE=(e,t)=>{let r=1,a=jS(e,t);return{value:a,valuePosition:r,displayValue:a}},cE=(e,t)=>({title:of(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),uE=(e,t)=>({title:of(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),of=(e,t)=>`${e}_${t}`,US=(e,t)=>{var r,a,n,o,i;return((r=e.facetSet[t])==null?void 0:r.request)||((a=e.categoryFacetSet[t])==null?void 0:a.request)||((n=e.dateFacetSet[t])==null?void 0:n.request)||((o=e.numericFacetSet[t])==null?void 0:o.request)||((i=e.automaticFacetSet.set[t])==null?void 0:i.response)},_S=(e,t)=>{let r=US(e,t);return r?r.type:"specific"};var Gn="2.42.0";var lE=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Br=class{constructor(t){this.getState=t;this.state=t()}getLanguage(){return lE(this.state)}getBaseMetadata(){let{context:t}=this.state,r=(t==null?void 0:t.contextValues)||{},a={};for(let[n,o]of Object.entries(r)){let i=`context_${n}`;a[i]=o}return a.coveoHeadlessVersion=Gn,a}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||He()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var mt=e=>new Je(e).getCurrentVisitorId(),sf=e=>{let t=new Je(e);t.clear(),t.deleteHttpOnlyVisitorId()},Xt=new dS.HistoryStore,Zt=(e,t)=>typeof t=="function"?(...r)=>{let a=as(r[0]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics preprocessRequest. Returning original request."),a}}:void 0,er=(e,t)=>(...r)=>{let a=as(r[1]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics hook. Returning original request."),a}};var eu=class extends Br{constructor(){super(...arguments);this.getFacetRequest=t=>{var r,a,n,o,i,s,u,c,l,d;return((a=(r=this.state.facetSet)==null?void 0:r[t])==null?void 0:a.request)||((o=(n=this.state.categoryFacetSet)==null?void 0:n[t])==null?void 0:o.request)||((s=(i=this.state.dateFacetSet)==null?void 0:i[t])==null?void 0:s.request)||((c=(u=this.state.numericFacetSet)==null?void 0:u[t])==null?void 0:c.request)||((d=(l=this.state.automaticFacetSet)==null?void 0:l.set[t])==null?void 0:d.response)}}getFacetState(){return Zc(lt(this.getState()))}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||eu.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,a;let t=this.getState();return((r=t.search)==null?void 0:r.searchResponseId)||((a=t.search)==null?void 0:a.response.searchUid)||qe().response.searchUid}getSplitTestRunName(){var t;return(t=this.state.search)==null?void 0:t.response.splitTestRun}getSplitTestRunVersion(){var a;let t=!!this.getSplitTestRunName(),r=((a=this.state.search)==null?void 0:a.response.pipeline)||this.state.pipeline||eu.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var n,o,i;let t=this.getState(),r=super.getBaseMetadata(),a=(i=(o=(n=t.search)==null?void 0:n.response)==null?void 0:o.extendedResults)==null?void 0:i.generativeQuestionAnsweringId;return a&&(r.generativeQuestionAnsweringId=a),r}getFacetMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:t,facetField:n,facetValue:r,facetTitle:`${n}_${t}`}}getFacetClearAllMetadata(t){var n;let r=this.getFacetRequest(t),a=(n=r==null?void 0:r.field)!=null?n:"";return{...this.getBaseMetadata(),facetId:t,facetField:a,facetTitle:`${a}_${t}`}}getFacetSortMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:t,facetField:n,criteria:r,facetTitle:`${n}_${t}`}}getRangeFacetBreadcrumbMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:t,facetField:n,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${n}_${t}`}}getResultSortMetadata(){var t;return{...this.getBaseMetadata(),resultsSortBy:(t=this.state.sortCriteria)!=null?t:Ke()}}getStaticFilterToggleMetadata(t,r){return{...this.getBaseMetadata(),staticFilterId:t,staticFilterValue:r}}getStaticFilterClearAllMetadata(t){return{...this.getBaseMetadata(),staticFilterId:t}}getUndoTriggerQueryMetadata(t){return{...this.getBaseMetadata(),undoneQuery:t}}getCategoryFacetBreadcrumbMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),categoryFacetId:t,categoryFacetField:n,categoryFacetPath:r,categoryFacetTitle:`${n}_${t}`}}getOmniboxAnalyticsMetadata(t,r){let a=this.state.querySuggest&&this.state.querySuggest[t],n=a.completions.map(u=>u.expression),o=a.partialQueries.length-1,i=a.partialQueries[o]||"",s=a.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(r),partialQuery:i,partialQueries:a.partialQueries.length>0?a.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:s}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(t){return{...this.getBaseMetadata(),...t}}getGeneratedAnswerMetadata(){var a;let t=this.getState(),r={};return((a=t.generatedAnswer)==null?void 0:a.isVisible)!==void 0&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var t;return(t=this.results)==null?void 0:t.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var t;return(t=this.state.search)==null?void 0:t.response.results}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||Ce().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||qe().duration}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.totalCountFiltered)||qe().response.totalCountFiltered}},U=eu;U.fallbackPipelineName="default";var $S=e=>{let t=e.configuration.accessToken,r=e.configuration.analytics.trackingId,{emit:a}=nS({url:e.configuration.analytics.nextApiBaseUrl,token:t,trackingId:r});return a},HS=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new U(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ja({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Zt(e,a),beforeSendHooks:[er(e,r),(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l},cf=()=>{let t=Xt.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};async function zS(e,t){let r=e.getReader(),a;for(;!(a=await r.read()).done;)t(a.value)}function GS(e){let t,r,a,n=!1;return function(i){t===void 0?(t=i,r=0,a=-1):t=dE(t,i);let s=t.length,u=0;for(;r<s;){n&&(t[r]===10&&(u=++r),n=!1);let c=-1;for(;r<s&&c===-1;++r)switch(t[r]){case 58:a===-1&&(a=r-u);break;case 13:n=!0;case 10:c=r;break}if(c===-1)break;e(t.subarray(u,c),a),u=r,a=-1}u===s?t=void 0:u!==0&&(t=t.subarray(u),r-=u)}}function WS(e,t,r){let a=YS(),n=new TextDecoder;return function(i,s){if(i.length===0)r==null||r(a),a=YS();else if(s>0){let u=n.decode(i.subarray(0,s)),c=s+(i[s+1]===32?2:1),l=n.decode(i.subarray(c));switch(u){case"data":a.data=a.data?a.data+`
`+l:l;break;case"event":a.event=l;break;case"id":e(a.id=l);break;case"retry":let d=parseInt(l,10);isNaN(d)||t(a.retry=d);break}}}}function dE(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function YS(){return{data:"",event:"",id:"",retry:void 0}}var pE=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},tu="text/event-stream",fE=1e3,KS="last-event-id";function uf(e,t){var{signal:r,headers:a,onopen:n,onmessage:o,onclose:i,onerror:s,openWhenHidden:u,fetch:c}=t,l=pE(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,f)=>{let p=Object.assign({},a);p.accept||(p.accept=tu);let m;function g(){m?.abort(),document.hidden||Q()}u||document.addEventListener("visibilitychange",g);let y=fE,S=0;function C(){document.removeEventListener("visibilitychange",g),window.clearTimeout(S),m?.abort()}r==null||r.addEventListener("abort",()=>{C(),d()});let R=c??window.fetch,P=n??mE;async function Q(){var G;m=typeof AbortController=="undefined"?null:new AbortController;try{let Z=await R(e,Object.assign(Object.assign({},l),{headers:p,signal:m?.signal}));await P(Z),await zS(Z.body,GS(WS($=>{$?p[KS]=$:delete p[KS]},$=>{y=$},o))),i==null||i(),C(),d()}catch(Z){if(!m?.signal.aborted)try{let $=(G=s==null?void 0:s(Z))!==null&&G!==void 0?G:y;window.clearTimeout(S),S=window.setTimeout(Q,$)}catch($){C(),f($)}}}Q()})}function mE(e){let t=e.headers.get("content-type");if(!(t==null?void 0:t.startsWith(tu)))throw new Error(`Expected content-type to be ${tu}, Actual: ${t}`)}var gE=(e,t,r)=>new $a(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,JS=3,hE=5e3,SE="text/event-stream",lf=1,XS=class extends Error{},ru=class extends Error{constructor(t){super(t.message);this.payload=t}},df=class{constructor(t){this.logger=t.logger}streamGeneratedAnswer(t,r){let{url:a,organizationId:n,streamId:o,accessToken:i}=t,{write:s,abort:u,close:c,resetAnswer:l}=r;if(!o){this.logger.error("No stream ID found");return}let d=0,f,p=()=>{g==null||g.abort(),l(),y()},m=()=>{f=xh(p,f,hE)},g=Fc(),y=()=>uf(gE(a,n,o),{method:"GET",headers:{Authorization:`Bearer ${i}`,accept:"*/*"},signal:g==null?void 0:g.signal,async onopen(S){if(S.ok&&S.headers.get("content-type")===SE)return;throw S.status>=400&&S.status<500&&S.status!==429?new ru({message:"Error opening stream",code:S.status}):new XS},onmessage:S=>{let C=JSON.parse(S.data);if(C.finishReason==="ERROR"){clearTimeout(f),g==null||g.abort(),u({message:C.errorMessage,code:C.statusCode});return}s(C),d=0,C.finishReason==="COMPLETED"?(clearTimeout(f),c()):m()},onerror:S=>{if(clearTimeout(f),S instanceof ru)throw g==null||g.abort(),u(S),S;if(++d>JS){this.logger.info("Maximum retry exceeded.");let C={message:"Failed to complete stream.",code:lf};throw g==null||g.abort(),u(C),new ru(C)}this.logger.info(`Retrying...(${d}/${JS})`),l()}});return y(),g}};var au=class{constructor(t){this.state=t()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||He()}},ZS=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new au(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new ef({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Zt(e,a),beforeSendHooks:[er(e,r),(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};var Wn=class extends Br{constructor(){super(...arguments);this.initialState=us()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var t;return(t=this.state.productListing)==null?void 0:t.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},ey=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new Wn(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ja({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Zt(e,a),beforeSendHooks:[er(e,r),(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};var nu=class extends Br{getSearchUID(){var r,a;let t=this.getState();return((r=t.search)==null?void 0:r.searchResponseId)||((a=t.search)==null?void 0:a.response.searchUid)||qe().response.searchUid}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return Zc(lt(this.state))}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||Ce().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||qe().duration}mapResultsToAnalyticsDocument(){var t;return(t=this.state.search)==null?void 0:t.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.results.length)||qe().response.results.length}},ty=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new nu(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new tf({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Zt(e,a),beforeSendHooks:[er(e,r),(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};var Yn=class extends Br{constructor(){super(...arguments);this.initialState=us()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var t;return(t=this.state.productListing)==null?void 0:t.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},ry=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new Yn(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ja({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Zt(e,a),beforeSendHooks:[er(e,r),(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return c||l.disable(),l};function ou(e){let t=ay(e),r=[e,...t].filter(n=>n.parentResult).map(n=>n.parentResult);return Ch([e,...t,...r],n=>n.uniqueId)}function ay(e){return e.childResults?e.childResults.flatMap(t=>[t,...ay(t)]):[]}function Kn(e,t){return{...new U(t).getBaseMetadata(),actionCause:e,type:e}}function yE(e){return Object.assign(e,{instantlyCallable:!0})}function CE(e,t){let r=o=>yE(ae(e,o)),a=r(async(o,{getState:i,extra:s})=>{let{analyticsClientMiddleware:u,preprocessRequest:c,logger:l}=s;return await(await t({getState:i,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})).log({state:i(),extra:s})});return Object.assign(a,{prepare:async({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:u})=>{let{description:c,log:l}=await t({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:u});return{description:c,action:r(async(d,{getState:f,extra:p})=>await l({state:f(),extra:p}))}}}),a}var Ss=(e,t,r)=>{function a(...n){let o=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return bE(o)}return a},vE=e=>e.configuration.analytics.analyticsMode==="legacy",xE=e=>e.configuration.analytics.analyticsMode==="next",bE=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:a,analyticsType:n,analyticsConfigurator:o,providerClass:i})=>(r!=null||(r=s=>new i(s)),CE(e,async({getState:s,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})=>{let d=[],f={log:async({state:S})=>{for(let C of d)await C(S)}},p=s(),m=o({getState:s,logger:l,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(s)}),g=await t(m,s());f.description=g==null?void 0:g.description,d.push(async S=>{vE(S)&&await FE(g,r,S,l,m.coveoAnalyticsClient)});let y=$S(p);return d.push(async S=>{if(xE(S)&&n&&a){let C=a(S);await kE(y,n,C)}}),f}));async function FE(e,t,r,a,n){t(()=>r);let o=await(e==null?void 0:e.log({searchUID:t(()=>r).getSearchUID()}));a.info({client:n,response:o},"Analytics response")}var ny=e=>(t,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async a=>{e(t,r)}}),k=Ss(HS,e=>e,U),zU=Ss(ZS,ny,au),GU=Ss(ty,ny,nu),oy=Ss(ey,e=>e,Wn),iy=Ss(ry,e=>e,Yn);var Te=(e,t)=>{var o;let r=i=>{var s,u;return i+((u=(s=t.pagination)==null?void 0:s.firstResult)!=null?u:0)},a=-1,n=(o=t.search)==null?void 0:o.results;return a=cy(e,n),a<0&&(a=IE(e,n)),a<0&&(a=0),RE(e,r(a),t)};function RE(e,t,r){let a=e.raw.collection;return{collectionName:typeof a=="string"?a:"default",documentAuthor:wE(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:EE(e),queryPipeline:r.pipeline||qt()}}var _e=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),sy={urihash:new w,sourcetype:new w,permanentid:new w},Jn={uniqueId:O,raw:new q({values:sy}),title:O,uri:O,clickUri:O,rankingModifier:new w({required:!1,emptyAllowed:!0})};function AE(e){return Object.assign({},...Object.keys(sy).map(t=>({[t]:e[t]})))}function PE(e){return Object.assign({},...Object.keys(Jn).map(t=>({[t]:e[t]})),{raw:AE(e.raw)})}function wE(e){let t=e.raw.author;return oe(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function EE(e){let t=e.raw.source;return oe(t)?"unknown":t}var nt=e=>new ee(Jn).validate(PE(e));function IE(e,t){for(let[r,a]of t.entries()){let n=ou(a);if(cy(e,n)!==-1)return r}return-1}function cy(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}async function kE(e,t,r){await e(t,r)}var pf=e=>b(e,{evt:O,type:Se}),uy=e=>k("analytics/generic/search",t=>{pf(e);let{evt:r,meta:a}=e;return t.makeSearchEvent(r,a)}),ly=e=>k("analytics/generic/click",(t,r)=>(nt(e.result),pf(e),t.makeClickEvent(e.evt,Te(e.result,r),_e(e.result),e.meta))),dy=e=>k("analytics/generic/custom",t=>(pf(e),t.makeCustomEventWithType(e.evt,e.type,e.meta))),iu=()=>k("analytics/interface/load",e=>e.makeInterfaceLoad()),ca=()=>k("analytics/interface/change",(e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),su=()=>k("analytics/interface/searchFromLink",e=>e.makeSearchFromLink()),cu=e=>k("analytics/interface/omniboxFromLink",t=>t.makeOmniboxFromLink(e));var L=(M=>(M.interfaceLoad="interfaceLoad",M.interfaceChange="interfaceChange",M.didyoumeanAutomatic="didyoumeanAutomatic",M.didyoumeanClick="didyoumeanClick",M.resultsSort="resultsSort",M.searchboxSubmit="searchboxSubmit",M.searchboxClear="searchboxClear",M.searchboxAsYouType="searchboxAsYouType",M.breadcrumbFacet="breadcrumbFacet",M.breadcrumbResetAll="breadcrumbResetAll",M.documentQuickview="documentQuickview",M.documentOpen="documentOpen",M.omniboxAnalytics="omniboxAnalytics",M.omniboxFromLink="omniboxFromLink",M.searchFromLink="searchFromLink",M.triggerNotify="notify",M.triggerExecute="execute",M.triggerQuery="query",M.undoTriggerQuery="undoQuery",M.triggerRedirect="redirect",M.pagerResize="pagerResize",M.pagerNumber="pagerNumber",M.pagerNext="pagerNext",M.pagerPrevious="pagerPrevious",M.pagerScrolling="pagerScrolling",M.staticFilterClearAll="staticFilterClearAll",M.staticFilterSelect="staticFilterSelect",M.staticFilterDeselect="staticFilterDeselect",M.facetClearAll="facetClearAll",M.facetSearch="facetSearch",M.facetSelect="facetSelect",M.facetSelectAll="facetSelectAll",M.facetDeselect="facetDeselect",M.facetExclude="facetExclude",M.facetUnexclude="facetUnexclude",M.facetUpdateSort="facetUpdateSort",M.facetShowMore="showMoreFacetResults",M.facetShowLess="showLessFacetResults",M.queryError="query",M.queryErrorBack="errorBack",M.queryErrorClear="errorClearQuery",M.queryErrorRetry="errorRetry",M.recommendation="recommendation",M.recommendationInterfaceLoad="recommendationInterfaceLoad",M.recommendationOpen="recommendationOpen",M.likeSmartSnippet="likeSmartSnippet",M.dislikeSmartSnippet="dislikeSmartSnippet",M.expandSmartSnippet="expandSmartSnippet",M.collapseSmartSnippet="collapseSmartSnippet",M.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",M.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",M.sendSmartSnippetReason="sendSmartSnippetReason",M.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",M.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",M.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",M.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",M.openSmartSnippetSource="openSmartSnippetSource",M.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",M.openSmartSnippetInlineLink="openSmartSnippetInlineLink",M.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",M.recentQueryClick="recentQueriesClick",M.clearRecentQueries="clearRecentQueries",M.recentResultClick="recentResultClick",M.clearRecentResults="clearRecentResults",M.noResultsBack="noResultsBack",M.showMoreFoldedResults="showMoreFoldedResults",M.showLessFoldedResults="showLessFoldedResults",M.copyToClipboard="copyToClipboard",M.caseSendEmail="Case.SendEmail",M.feedItemTextPost="FeedItem.TextPost",M.caseAttach="caseAttach",M.caseDetach="caseDetach",M.retryGeneratedAnswer="retryGeneratedAnswer",M.likeGeneratedAnswer="likeGeneratedAnswer",M.dislikeGeneratedAnswer="dislikeGeneratedAnswer",M.openGeneratedAnswerSource="openGeneratedAnswerSource",M.generatedAnswerStreamEnd="generatedAnswerStreamEnd",M.historyForward="historyForward",M.historyBackward="historyBackward",M))(L||{});var ff=()=>Se,py=()=>O,tr=v("configuration/updateBasicConfiguration",e=>b(e,{accessToken:Se,organizationId:Se,platformUrl:Se})),gt=v("configuration/updateSearchConfiguration",e=>b(e,{apiBaseUrl:Se,pipeline:new w({required:!1,emptyAllowed:!0}),searchHub:Se,timezone:Se,locale:Se,authenticationProviders:new X({required:!1,each:O})})),ua=v("configuration/updateAnalyticsConfiguration",e=>(Cc()&&(e.enabled=!1),b(e,{enabled:new K({default:!0}),originContext:ff(),originLevel2:ff(),originLevel3:ff(),apiBaseUrl:Se,nextApiBaseUrl:Se,runtimeEnvironment:new fe,anonymous:new K({default:!1}),deviceId:Se,userDisplayName:Se,documentLocation:Se,trackingId:Se,analyticsMode:new w({constrainTo:["legacy","next"],required:!1,default:"legacy"})}))),Xn=v("configuration/analytics/disable"),Zn=v("configuration/analytics/enable"),uu=v("configuration/analytics/originlevel2",e=>b(e,{originLevel2:py()})),lu=v("configuration/analytics/originlevel3",e=>b(e,{originLevel3:py()}));var du={q:new w,enableQuerySyntax:new K,aq:new w,cq:new w,firstResult:new D({min:0}),numberOfResults:new D({min:0}),sortCriteria:new w,f:new q,fExcluded:new q,cf:new q,nf:new q,df:new q,debug:new K,sf:new q,tab:new w,af:new q};var ue=v("searchParameters/restore",e=>b(e,du));var la=v("debug/enable"),eo=v("debug/disable");var to=T(pt(),e=>{e.addCase(la,()=>!0).addCase(eo,()=>!1).addCase(ue,(t,r)=>{var a;return(a=r.payload.debug)!=null?a:t})});var mf=v("history/undo"),gf=v("history/redo"),Vt=v("history/snapshot"),ys=ae("history/back",async(e,{dispatch:t})=>{t(mf()),await t(ce())}),pu=ae("history/forward",async(e,{dispatch:t})=>{t(gf()),await t(ce())}),ce=ae("history/change",async(e,{getState:t})=>t().history.present);var ro=v("pipeline/set",e=>b(e,new w({required:!0,emptyAllowed:!0})));var ao=T(qt(),e=>{e.addCase(ro,(t,r)=>r.payload).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.pipeline)!=null?n:t}).addCase(gt,(t,r)=>r.payload.pipeline||t)});var no=v("searchHub/set",e=>b(e,new w({required:!0,emptyAllowed:!0})));var oo=T(He(),e=>{e.addCase(no,(t,r)=>r.payload).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.searchHub)!=null?n:t}).addCase(gt,(t,r)=>r.payload.searchHub||t)});var Re=v("breadcrumb/deselectAll"),da=v("breadcrumb/deselectAllNonBreadcrumbs");var ht=v("facet/updateFacetAutoSelection",e=>b(e,{allow:new K({required:!0})}));var hf={id:O},OE={...hf,q:me},io=v("instantResults/register",e=>b(e,hf)),rr=v("instantResults/updateQuery",e=>b(e,OE)),so=v("instantResults/clearExpired",e=>b(e,hf));var fu=new D({required:!0,min:0}),co=v("pagination/registerNumberOfResults",e=>b(e,fu)),uo=v("pagination/updateNumberOfResults",e=>b(e,fu)),lo=v("pagination/registerPage",e=>b(e,fu)),St=v("pagination/updatePage",e=>b(e,fu)),po=v("pagination/nextPage"),fo=v("pagination/previousPage");var Ge=v("query/updateQuery",e=>b(e,{q:new w,enableQuerySyntax:new K}));var mo=async(e,t)=>({analytics:{clientId:await mt(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...cf()&&{pageId:cf()},...e.analyticsMode&&e.trackingId&&{trackingId:e.trackingId},capture:e.analyticsMode==="next"}});var pa=async(e,t)=>{var r,a,n,o;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await mt(e.configuration.analytics),actionsHistory:Xt.getHistory()},...((r=e.advancedSearchQueries)==null?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...((a=e.advancedSearchQueries)==null?void 0:a.cq)&&{cq:e.advancedSearchQueries.cq},...((n=e.advancedSearchQueries)==null?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...((o=e.advancedSearchQueries)==null?void 0:o.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await mo(e.configuration.analytics,t),...e.excerptLength&&!oe(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}};var mu=class extends U{constructor(t){super(t);this.getState=t}get activeInstantResultQuery(){let t=this.getState().instantResults;for(let r in t)for(let a in t[r].cache)if(t[r].cache[a].isActive)return t[r].q;return null}get activeInstantResultCache(){let t=this.getState().instantResults;for(let r in t)for(let a in t[r].cache)if(t[r].cache[a].isActive)return t[r].cache[a];return null}get results(){var t;return(t=this.activeInstantResultCache)==null?void 0:t.results}get queryText(){var t;return(t=this.activeInstantResultQuery)!=null?t:Ce().q}get responseTime(){var t,r;return(r=(t=this.activeInstantResultCache)==null?void 0:t.duration)!=null?r:qe().duration}get numberOfResults(){var t,r;return(r=(t=this.activeInstantResultCache)==null?void 0:t.totalCountFiltered)!=null?r:qe().response.totalCountFiltered}getSearchUID(){var r;return((r=this.activeInstantResultCache)==null?void 0:r.searchUid)||super.getSearchUID()}};var fy=e=>k({prefix:"analytics/instantResult/open",__legacy__getBuilder:(t,r)=>(nt(e),t.makeDocumentOpen(Te(e,r),_e(e))),__legacy__provider:t=>new mu(t),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{var n,o;let r=Te(e,t),a=_e(e);return{searchUid:(o=(n=t.search)==null?void 0:n.response.searchUid)!=null?o:"",position:r.documentPosition,itemMetadata:{uniqueFieldName:a.contentIDKey,uniqueFieldValue:a.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}}),my=()=>k("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new mu(e));var Sf=()=>k("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),yt=e=>k("search/queryError",(t,r)=>{var a,n,o,i;return t.makeQueryError({query:((a=r.query)==null?void 0:a.q)||Ce().q,aq:((n=r.advancedSearchQueries)==null?void 0:n.aq)||at().aq,cq:((o=r.advancedSearchQueries)==null?void 0:o.cq)||at().cq,dq:((i=r.advancedSearchQueries)==null?void 0:i.dq)||at().dq,errorType:e.type,errorMessage:e.message})});var vs=Ee(mc()),Cy=Ee(gy());var gu=Ee(mc()),Sy=Ee(hy());gu.default.extend(Sy.default);var go="YYYY/MM/DD@HH:mm:ss",qE="1401-01-01";function Xa(e,t){let r=(0,gu.default)(e,t);return!r.isValid()&&!t?(0,gu.default)(e,go):r}function Cs(e){return e.format(go)}function yy(e){return Cs(Xa(e))===e}function hu(e,t){let r=Xa(e,t);if(!r.isValid()){let a=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?n:a}`)}bf(r)}function bf(e){if(e.isBefore(qE))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}vs.default.extend(Cy.default);var vy=["past","now","next"],xy=["minute","hour","day","week","month","quarter","year"],TE=e=>{let t=e==="now";return{amount:new D({required:!t,min:1}),unit:new w({required:!t,constrainTo:xy}),period:new w({required:!0,constrainTo:vy})}};function fa(e){if(typeof e=="string"&&!ar(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Ff(e):e;new ee(TE(t.period)).validate(t);let r=Fy(t),a=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${a}`);bf(r)}function by(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":case"next":return`${t}-${r}-${a}`;case"now":return t}}function Fy(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":return(0,vs.default)().subtract(r,a);case"next":return(0,vs.default)().add(r,a);case"now":return(0,vs.default)()}}function xs(e){return Cs(Fy(Ff(e)))}function Ry(e){return e.toLocaleLowerCase().split("-")}function ar(e){let[t,r,a]=Ry(e);if(t==="now")return!0;if(!vy.includes(t)||!xy.includes(a))return!1;let n=parseInt(r);return!(isNaN(n)||n<=0)}function Ay(e){return!!e&&typeof e=="object"&&"period"in e}function Ff(e){let[t,r,a]=Ry(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:a||void 0}}function Py(e){return fa(e),Ff(e)}function wy(e){return e.type==="dateRange"}function Ey(e){return`start${e}`}function Iy(e){return`end${e}`}var DE=()=>({dateFacetValueMap:{}});function VE(e,t,r){let a=e.start,n=e.end;return ar(a)&&(a=xs(a),r.dateFacetValueMap[t][Ey(a)]=e.start),ar(n)&&(n=xs(n),r.dateFacetValueMap[t][Iy(n)]=e.end),{...e,start:a,end:n}}function ME(e,t){if(wy(e)){let{facetId:r,currentValues:a}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:a.map(n=>VE(n,r,t))}}return e}function ho(e){var a;let t=DE();return{request:{...e,facets:(a=e.facets)==null?void 0:a.map(n=>ME(n,t))},mappings:t}}function NE(e,t,r){return{...e,start:r.dateFacetValueMap[t][Ey(e.start)]||e.start,end:r.dateFacetValueMap[t][Iy(e.end)]||e.end}}function LE(e,t){return e.facetId in t.dateFacetValueMap}function QE(e,t){return LE(e,t)?{...e,values:e.values.map(r=>NE(r,e.facetId,t))}:e}function Su(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(n=>QE(n,t))}}:e}function So(e,t){let r={};e.forEach(o=>r[o.facetId]=o);let a=[];t.forEach(o=>{o in r&&(a.push(r[o]),delete r[o])});let n=Object.values(r);return[...a,...n]}function jr(e){return Object.values(e).map(t=>t.request)}var Za=1,bs=5e3;var Oe=async(e,t)=>{var s,u;let r=zE(e),a=BE(e),n=jE(e),o=await pa(e,t),i=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>bs?bs-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return ho({...o,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...r&&{cq:r},...a.length&&{facets:a},...e.pagination&&{numberOfResults:i(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((s=e.folding)==null?void 0:s.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:n}},...((u=e.generatedAnswer)==null?void 0:u.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat}}}})};function BE(e){var t;return So(_E(e),(t=e.facetOrder)!=null?t:[])}function jE(e){var r;let t=(r=e.automaticFacetSet)==null?void 0:r.set;return t?Object.values(t).map(a=>a.response).map(UE).filter(a=>a.currentValues.length>0):void 0}function UE(e){let{field:t,label:r,values:a}=e,n=a.filter(o=>o.state==="selected");return{field:t,label:r,currentValues:n}}function _E(e){return $E(e).filter(({facetId:t})=>{var r,a,n;return(n=(a=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:a.enabled)!=null?n:!0})}function $E(e){var t,r,a,n;return[...HE((t=e.facetSet)!=null?t:{}),...ky((r=e.numericFacetSet)!=null?r:{}),...ky((a=e.dateFacetSet)!=null?a:{}),...jr((n=e.categoryFacetSet)!=null?n:{})]}function HE(e){return jr(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function ky(e){return jr(e).map(t=>{let a=t.currentValues.some(({state:n})=>n!=="idle");return t.generateAutomaticRanges&&!a?{...t,currentValues:[]}:t})}function zE(e){var o;let t=((o=e.advancedSearchQueries)==null?void 0:o.cq.trim())||"",r=Object.values(e.tabSet||{}).find(i=>i.isActive),a=(r==null?void 0:r.expression.trim())||"",n=GE(e);return[t,a,...n].filter(i=>!!i).join(" AND ")}function GE(e){return Object.values(e.staticFilterSet||{}).map(r=>{let a=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),n=a.map(o=>o.expression).join(" OR ");return a.length>1?`(${n})`:n})}var yo=v("didYouMean/enable"),yu=v("didYouMean/disable"),Co=v("didYouMean/automaticCorrections/disable"),Cu=v("didYouMean/automaticCorrections/enable"),Ct=v("didYouMean/correction",e=>b(e,O));var vu=()=>k("analytics/didyoumean/click",e=>e.makeDidYouMeanClick()),Oy=()=>k("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic());var WE=new q({values:{undoneQuery:me},options:{required:!0}}),xu=()=>k("analytics/trigger/query",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.queryModification.newQuery)?e.makeTriggerQuery():null}),bu=e=>k("analytics/trigger/query/undo",t=>(b(e,WE),t.makeUndoTriggerQuery(e))),Fu=()=>k("analytics/trigger/notify",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.notifications.length)?e.makeTriggerNotify({notifications:t.triggers.notifications}):null}),Ru=()=>k("analytics/trigger/redirect",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.redirectTo)?e.makeTriggerRedirect({redirectedTo:t.triggers.redirectTo}):null}),Au=()=>k("analytics/trigger/execute",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.executions.length)?e.makeTriggerExecute({executions:t.triggers.executions}):null});var ma=v("trigger/query/ignore",e=>b(e,new w({emptyAllowed:!0,required:!0}))),vo=v("trigger/query/modification",e=>b(e,new q({values:{originalQuery:Se,modification:Se}})));var en=class{constructor(t,r=a=>{this.dispatch(Ge({q:a}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},a){var u;let n=new Date().getTime(),o=Su(await this.extra.apiClient.search(r,a),t),i=new Date().getTime()-n,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(t))!=null?r:await this.processQueryCorrectionsOrContinue(t))!=null?a:await this.processQueryTriggersOrContinue(t))!=null?n:this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Fe(t.response)?(this.dispatch(yt(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),a=this.getSuccessResponse(t);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return Fe(d.response)?(this.dispatch(yt(d.response.error)),this.rejectWithValue(d.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,a),this.extra),this.dispatch(Vt(Qr(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:Oy()})}async processQueryTriggersOrContinue(t){var s,u;let r=this.getSuccessResponse(t);if(!r)return null;let a=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===a)return this.dispatch(ma("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return Fe(i.response)?(this.dispatch(yt(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Vt(Qr(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:xu()})}processSuccessResponse(t){return this.dispatch(Vt(Qr(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return Rc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Oe(this.getState()),{origin:"mainSearch"});return this.dispatch(Ct(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(vo({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Oe(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(t,r,a,n){var o,i;return{...a,query:{q:t,enableQuerySyntax:(i=(o=a.query)==null?void 0:o.enableQuerySyntax)!=null?i:Ce().enableQuerySyntax},search:{...qe(),duration:r,response:n,results:n.results}}}getCurrentQuery(){var r;let t=this.getState();return((r=t.query)==null?void 0:r.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var W$=ae("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;b(e,{q:new w,enableQuerySyntax:new K,clearFilters:new K}),e.clearFilters&&(r(Re()),r(da())),r(ht({allow:!0})),r(Ge({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(St(1))}),xo=ae("search/executeSearch",async(e,t)=>{let r=t.getState();return await wu(r,t,e)}),bo=ae("search/fetchPage",async(e,t)=>{let r=t.getState();return await Af(r,t,e)}),Fo=ae("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await Pf(t,r)}),Pu=ae("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await XE(t,e,r)}),qy=ae("search/fetchInstantResults",async(e,t)=>Rf(e,t)),YE=async(e,t)=>{var a,n,o,i;let r=await Oe(e,t);return r.request={...r.request,firstResult:((n=(a=e.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=e.search)==null?void 0:o.results.length)!=null?i:0)},r},KE=async(e,t,r)=>{let a=await pa(e);return ho({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},JE=async(e,t)=>{let r=await Oe(e,t);return r.request.numberOfResults=0,r},Ty=e=>{var t;e.configuration.analytics.enabled&&Xt.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})};async function Rf(e,t){b(e,{id:O,q:O,maxResultsPerQuery:new D({required:!0,min:1}),cacheTimeout:new D});let{q:r,maxResultsPerQuery:a}=e,n=t.getState(),o=new en({...t,analyticsAction:my()},c=>{t.dispatch(rr({q:c,id:e.id}))}),i=await KE(n,r,a),s=await o.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),u=await o.process(s);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function Af(e,t,r){Ty(e);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new en({...t,analyticsAction:r}),u=await Oe(e,i),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}async function Pf(e,t){let{analyticsClientMiddleware:r,preprocessRequest:a,logger:n}=e.extra,{description:o}=await Sf().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:a,logger:n}),i=new en({...e,analyticsAction:Sf()}),s=await YE(t,o),u=await i.fetchFromAPI(s,{origin:"mainSearch"});return await i.process(u)}async function XE(e,t,r){let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=e.extra,{description:i}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new en({...e,analyticsAction:t}),u=await JE(r,i),c=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(c)}async function wu(e,t,r){Ty(e);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=await Oe(e,i),u=new en({...t,analyticsAction:r}),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}var tn=class{constructor(t,r=a=>{this.dispatch(Ge({q:a}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},a){var u;let n=new Date().getTime(),o=Su(await this.extra.apiClient.search(r,a),t),i=new Date().getTime()-n,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(t))!=null?r:await this.processQueryCorrectionsOrContinue(t))!=null?a:await this.processQueryTriggersOrContinue(t))!=null?n:this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Fe(t.response)?(this.dispatch(yt(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),a=this.getSuccessResponse(t);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return Fe(d.response)?(this.dispatch(yt(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(Vt(Qr(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:Kn(L.didyoumeanAutomatic,this.getState)})}async processQueryTriggersOrContinue(t){var s,u;let r=this.getSuccessResponse(t);if(!r)return null;let a=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===a)return this.dispatch(ma("")),null;let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return Fe(i.response)?(this.dispatch(yt(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Vt(Qr(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:Kn(L.triggerQuery,this.getState)})}processSuccessResponse(t){return this.dispatch(Vt(Qr(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return Rc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Oe(this.getState()),{origin:"mainSearch"});return this.dispatch(Ct(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(vo({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Oe(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var r;let t=this.getState();return((r=t.query)==null?void 0:r.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var Eu=ae("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;b(e,{q:new w,enableQuerySyntax:new K,clearFilters:new K}),e.clearFilters&&(r(Re()),r(da())),r(ht({allow:!0})),r(Ge({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(St(1))}),E=ae("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return wu(r,t,e.legacy);Dy(r);let a=Vy(e.next,r),n=await Oe(r,a),o=new tn({...t,analyticsAction:a}),i=await o.fetchFromAPI(n,{origin:"mainSearch"});return await o.process(i)}),nr=ae("search/fetchPage",async(e,t)=>{let r=t.getState();if(Dy(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Af(r,t,e.legacy);let a=new tn({...t,analyticsAction:e.next}),n=await Oe(r,e.next),o=await a.fetchFromAPI(n,{origin:"mainSearch"});return await a.process(o)}),ga=ae("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Pf(t,r);let a=Kn(L.pagerScrolling,t.getState),n=new tn({...t,analyticsAction:a}),o=await ZE(r,a),i=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(i)}),or=ae("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return wu(r,t,e.legacy);let a=Vy(e.next,r),n=new tn({...t,analyticsAction:a}),o=await tI(r,a),i=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(i)}),Ro=ae("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Rf(e,t);b(e,{id:O,q:O,maxResultsPerQuery:new D({required:!0,min:1}),cacheTimeout:new D});let{q:a,maxResultsPerQuery:n}=e,o=Kn(L.searchboxAsYouType,t.getState),i=new tn({...t,analyticsAction:o},l=>{t.dispatch(rr({q:l,id:e.id}))}),s=await eI(r,a,n),u=await i.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),c=await i.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,analyticsAction:c.analyticsAction,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}),ZE=async(e,t)=>{var a,n,o,i;let r=await Oe(e,t);return r.request={...r.request,firstResult:((n=(a=e.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=e.search)==null?void 0:o.results.length)!=null?i:0)},r},eI=async(e,t,r)=>{let a=await pa(e);return ho({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},tI=async(e,t)=>{let r=await Oe(e,t);return r.request.numberOfResults=0,r},Dy=e=>{var t;e.configuration.analytics.enabled&&Xt.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},Vy=(e,t)=>({customData:e.getEventExtraPayload(t),actionCause:e.actionCause,type:e.actionCause});var Ur=(e,t)=>{let r=e;return oe(r[t])?oe(e.raw[t])?null:e.raw[t]:r[t]},My=e=>t=>e.every(r=>!oe(Ur(t,r))),Ny=e=>t=>e.every(r=>oe(Ur(t,r))),Ly=(e,t)=>r=>{let a=By(e,r);return t.some(n=>a.some(o=>`${o}`.toLowerCase()===n.toLowerCase()))},Qy=(e,t)=>r=>{let a=By(e,r);return t.every(n=>a.every(o=>`${o}`.toLowerCase()!==n.toLowerCase()))},By=(e,t)=>{let r=Ur(t,e);return hc(r)?r:[r]};function Fs(e){return e.search.response.searchUid!==""}function jy(e,t,r){return e.search.results.find(a=>Ur(a,t)===r)}function wf(e,t){var a;let r=(a=t.payload)!=null?a:null;r&&(e.response=qe().response,e.results=[],e.questionAnswer=qn()),e.error=r,e.isLoading=!1}function Ef(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function rI(e,t){Ef(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function If(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var J=T(qe(),e=>{e.addCase(xo.rejected,(t,r)=>wf(t,r)),e.addCase(Fo.rejected,(t,r)=>wf(t,r)),e.addCase(bo.rejected,(t,r)=>wf(t,r)),e.addCase(xo.fulfilled,(t,r)=>{rI(t,r)}),e.addCase(Fo.fulfilled,(t,r)=>{Ef(t,r),t.results=[...t.results,...r.payload.response.results]}),e.addCase(bo.fulfilled,(t,r)=>{Ef(t,r),t.results=r.payload.response.results}),e.addCase(Pu.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(xo.pending,If),e.addCase(Fo.pending,If),e.addCase(bo.pending,If)});var Uy=T(Gn,e=>e);var Hy=Ee($y());var Ao=v("tab/register",e=>{let t=new q({values:{id:O,expression:me}});return b(e,t)}),Mt=v("tab/updateActiveTab",e=>b(e,O));function nI(e,t){if(Th(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+qp;let a=Dh(e,t);return a?On(t,a.environment).analytics:e}var Iu=T(rt(),e=>e.addCase(tr,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${Op}`,t.analytics.apiBaseUrl=nI(r.payload.platformUrl,t.organizationId))}).addCase(gt,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(ua,(t,r)=>{oe(r.payload.enabled)||(!r.payload.enabled&&t.analytics.enabled&&sf(t.analytics),t.analytics.enabled=r.payload.enabled),oe(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),oe(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),oe(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),oe(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),oe(r.payload.nextApiBaseUrl)||(t.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),oe(r.payload.trackingId)||(t.analytics.trackingId=r.payload.trackingId),oe(r.payload.analyticsMode)||(t.analytics.analyticsMode=r.payload.analyticsMode);let a=(0,Hy.default)();a&&(t.analytics.analyticsMode="next",t.analytics.trackingId=a),oe(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),oe(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),oe(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),oe(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),oe(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase(Xn,t=>{t.analytics.enabled=!1,sf(t.analytics)}).addCase(Zn,t=>{t.analytics.enabled=!0}).addCase(uu,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(lu,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(Mt,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(ue,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2}));var z=Iu;function zy(e,t){let r={...e},a,n=o=>(i,s)=>{let u=o(i,s);return a?a(u,s):u};return{get combinedReducer(){let o=vh(Object.entries(t).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return n((0,h.combineReducers)({...o,...r}))},containsAll(o){return Object.keys(o).every(s=>s in r)},add(o){Object.keys(o).filter(i=>!(i in r)).forEach(i=>r[i]=o[i])},addCrossReducer(o){a=o}}}function ku(e,t,r){var a,n,o;t===void 0&&(t=50),r===void 0&&(r={});var i=(a=r.isImmediate)!=null&&a,s=(n=r.callback)!=null&&n,u=r.maxWait,c=Date.now(),l=[];function d(){if(u!==void 0){var p=Date.now()-c;if(p+t>=u)return u-p}return t}var f=function(){var p=[].slice.call(arguments),m=this;return new Promise(function(g,y){var S=i&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,c=Date.now(),!i){var R=e.apply(m,p);s&&s(R),l.forEach(function(P){return(0,P.resolve)(R)}),l=[]}},d()),S){var C=e.apply(m,p);return s&&s(C),g(C)}l.push({resolve:g,reject:y})})};return f.cancel=function(p){o!==void 0&&clearTimeout(o),l.forEach(function(m){return(0,m.reject)(p)}),l=[]},f}function Gy(e,t){let r=0,a=ku(()=>r=0,500);return n=>o=>async i=>{if(!(typeof i=="function"))return o(i);let u=await o(i);if(!oI(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,a();let c=await iI(t);n.dispatch(tr({accessToken:c})),n.dispatch(i)}}function oI(e){var t;return((t=e==null?void 0:e.error)==null?void 0:t.name)===new rs().name}async function iI(e){try{return await e()}catch(t){return""}}function Wy({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:a,name:n}){return tp({reducer:e,preloadedState:t,devTools:{stateSanitizer:o=>o.history?{...o,history:"<<OMIT>>"}:o,name:n,shouldHotReload:!1},middleware:o=>[...r,...o({thunk:{extraArgument:a}}),fc(a.logger)]})}var sI={configuration:z,version:Uy};function cI(e,t){var i,s;let r=((i=e.configuration.organizationEndpoints)==null?void 0:i.analytics)||void 0,{analyticsClientMiddleware:a,...n}=(s=e.configuration.analytics)!=null?s:{},o={...n,nextApiBaseUrl:`${r}/rest/organizations/${e.configuration.organizationId}/events/v1`,apiBaseUrl:r};return Cc()?(t.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function Yy(e,t){var u;let r=uI(e,t),{accessToken:a,organizationId:n}=e.configuration,{organizationEndpoints:o}=e.configuration,i=(o==null?void 0:o.platform)||e.configuration.platformUrl;fI(e)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),pI(e)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):mI(e)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(u=e.configuration.organizationEndpoints)==null?void 0:u.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(tr({accessToken:a,organizationId:n,platformUrl:i}));let s=cI(e,r.logger);return s&&r.dispatch(ua(s)),r}function uI(e,t){var i;let{reducers:r}=e,a=zy({...sI,...r},(i=e.preloadedState)!=null?i:{});e.crossReducer&&a.addCrossReducer(e.crossReducer);let n=t.logger,o=lI(e,t,a);return{addReducers(s){a.containsAll(s)||(a.add(s),o.replaceReducer(a.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(Zn())},disableAnalytics(){o.dispatch(Xn())},get state(){return o.getState()},logger:n,store:o}}function lI(e,t,r){let{preloadedState:a,configuration:n}=e,o=n.name||"coveo-headless",i=dI(e,t.logger);return Wy({preloadedState:a,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:t,name:o})}function dI(e,t){let{renewAccessToken:r}=e.configuration,a=Gy(t,r);return[dc,a,pc(t),lc].concat(e.middlewares||[])}function pI(e){return Ie(e.configuration.organizationEndpoints)}function fI(e){var t;return!oe(e.configuration.platformUrl)||oe((t=e.configuration.organizationEndpoints)==null?void 0:t.platform)}function mI(e){let{platform:t}=e.configuration.organizationEndpoints;if(Ie(t))return!1;let r=Dp(t);return r&&r.organizationId!==e.configuration.organizationId}var Ky=Ee(Xi());function Jy(e){return(0,Ky.default)({name:"@coveo/headless",level:(e==null?void 0:e.level)||"warn",formatters:{log:e==null?void 0:e.logFormatter}})}function Xy(e,t){let r=gI(e),a=et,n=hI(e);return{analyticsClientMiddleware:r,validatePayload:a,preprocessRequest:n,logger:t}}function gI(e){let{analytics:t}=e,r=(a,n)=>n;return(t==null?void 0:t.analyticsClientMiddleware)||r}function hI(e){return e.preprocessRequest||Ua}var Zy=Ee(kp());var kf=(e,t,r,a,n,o)=>{let i=e[t];oe(i)||oe(n)||n!==i&&n!==a&&(o.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),o.warn(`To remove this warning, make sure that access token value [${i}] matches engine configuration value [${r}]`))},Of=(e,t)=>!(oe(e)||t===e),Rs=e=>{try{let t=typeof atob!="undefined"?atob:Zy.atob,a=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=t(a);if(!n)return!1;let o=decodeURIComponent(n.split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(o)}catch(t){return!1}},eC=(e,t)=>(Of(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),tC=(e,t,r,a)=>(kf(e,"searchHub",t.searchHub,He(),r,a),eC(e,t)),rC=(e,t)=>(Of(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),aC=(e,t,r,a)=>(kf(e,"pipeline",t.pipeline,qt(),r,a),rC(e,t)),nC=(e,t)=>(Of(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),SI=(e,t,r,a)=>(kf(e,"userDisplayName",t.configuration.analytics.userDisplayName,rt().analytics.userDisplayName,r,a),nC(e,t)),oC=e=>T({},t=>{t.addCase(no,(r,a)=>{let n=Rs(r.configuration.accessToken);return n?tC(n,r,a.payload,e):r}).addCase(ro,(r,a)=>{let n=Rs(r.configuration.accessToken);return n?aC(n,r,a.payload,e):r}).addCase(tr,(r,a)=>{if(r.configuration.accessToken!==a.payload.accessToken)return r;let{accessToken:n}=a.payload;if(!n)return r;let o=Rs(n);return o?[rC,eC,nC].reduce((i,s)=>s(o,i),r):r}).addCase(gt,(r,a)=>{var s;let n=Rs(r.configuration.accessToken);if(!n)return r;let o=tC(n,r,a.payload.searchHub,e);return aC(n,o,(s=a.payload)==null?void 0:s.pipeline,e)}).addCase(ua,(r,a)=>{let n=Rs(r.configuration.accessToken);return n?SI(n,r,a.payload.userDisplayName,e):r})});var iC={organizationId:O,accessToken:O,platformUrl:new w({required:!1,emptyAllowed:!1}),name:new w({required:!1,emptyAllowed:!1}),analytics:new q({options:{required:!1},values:{enabled:new K({required:!1}),originContext:new w({required:!1}),originLevel2:new w({required:!1}),originLevel3:new w({required:!1}),analyticsMode:new w({constrainTo:["legacy","next"],required:!1})}})};function sC(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:On("searchuisamples")}}var cC=new ee({...iC,search:new q({options:{required:!1},values:{pipeline:new w({required:!1,emptyAllowed:!0}),searchHub:Se,locale:Se,timezone:Se,authenticationProviders:new X({required:!1,each:O})}})});function qf(){return{...sC(),search:{searchHub:"default"}}}var yI={debug:to,pipeline:ao,searchHub:oo,search:J};function CI(e){var n;let t=e.configuration.search,r=((n=e.configuration.organizationEndpoints)==null?void 0:n.search)||void 0;return{...t,apiBaseUrl:r}}function uC(e){let t=Jy(e.loggerOptions);vI(e.configuration,t);let r=xI(e.configuration,t),a=bI(t),n={...Xy(e.configuration,t),apiClient:r,streamingClient:a},o={...e,reducers:yI,crossReducer:oC(t)},i=Yy(o,n),s=CI(e);return s&&i.dispatch(gt(s)),{...i,get state(){return i.state},executeFirstSearch(u=iu()){if(Fs(i.state))return;let c=E({legacy:u,next:{actionCause:L.interfaceLoad,getEventExtraPayload:l=>new U(()=>l).getBaseMetadata()}});i.dispatch(c)},executeFirstSearchAfterStandaloneSearchBoxRedirect(u){let{cause:c,metadata:l}=u;if(Fs(i.state))return;let d=l&&c==="omniboxFromLink",f=E({legacy:d?cu(l):su(),next:{actionCause:d?L.omniboxFromLink:L.searchFromLink,getEventExtraPayload:d?p=>new U(()=>p).getOmniboxFromLinkMetadata(l):p=>new U(()=>p).getBaseMetadata()}});i.dispatch(f)}}}function vI(e,t){try{cC.validate(e)}catch(r){throw t.error(r,"Search engine configuration error"),r}}function xI(e,t){let{search:r}=e;return new is({logger:t,preprocessRequest:e.preprocessRequest||Ua,postprocessSearchResponseMiddleware:(r==null?void 0:r.preprocessSearchResponseMiddleware)||qc,postprocessFacetSearchResponseMiddleware:(r==null?void 0:r.preprocessFacetSearchResponseMiddleware)||Tc,postprocessQuerySuggestResponseMiddleware:(r==null?void 0:r.preprocessQuerySuggestResponseMiddleware)||Dc})}function bI(e){return new df({logger:e})}function V(e){let t,r=new Map,a=()=>r.size===0,n=o=>{try{let i=JSON.stringify(o),s=t!==i;return t=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(o){o();let i=Symbol(),s;return a()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{n(this.state)&&r.forEach(u=>u())})),r.set(i,o),()=>{r.delete(i),a()&&s&&s()}},get state(){return{}}}}var lC=e=>{let t=/Document weights:\n((?:.)*?)\n+/g,r=/Terms weights:\n((?:.|\n)*)\n+/g,a=/Total weight: ([0-9]+)/g;if(!e)return null;let n=t.exec(e),o=r.exec(e),i=a.exec(e),s=RI(e),u=dC(n?n[1]:null),c=FI(o),l=i?Number(i[1]):null;return{documentWeights:u,termsWeight:c,totalWeight:l,qreWeights:s}},dC=e=>{let t=/(\w+(?:\s\w+)*): ([-0-9]+)/g,r=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let a=e.match(t);if(!a)return null;let n={};for(let o of a){let i=o.match(r);if(i){let s=i[1],u=i[2];n[s]=Number(u)}}return n},pC=(e,t)=>{let r=[],a;for(;(a=t.exec(e))!==null;)r.push(a);return r},FI=e=>{let t=/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g,r=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let a=pC(e[1],t);if(!a)return null;let n={};for(let o of a){let i=pC(o[1],r),s={};for(let c of i)s[c[1]]={Correlation:Number(c[2]),"TF-IDF":Number(c[3])};let u=dC(o[2]);n[Object.keys(s).join(", ")]={terms:s,Weights:u}}return n},RI=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=t.exec(e),a=[];for(;r;)a.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return a};function fC(e){return e.search.response.results.map(r=>{let a=lC(r.rankingInfo);return{result:r,ranking:a}})}var AI=new X({each:O,required:!0}),ha=v("fields/registerFieldsToInclude",e=>b(e,AI)),Po=v("fields/fetchall/enable"),rn=v("fields/fetchall/disable"),wo=ae("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let n=r(),{accessToken:o,organizationId:i}=n.configuration,{apiBaseUrl:s}=n.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:o,organizationId:i,url:s});return Fe(u)?a(u.error):u.success.fields});var Tf={collectionField:new w({emptyAllowed:!1,required:!1}),parentField:new w({emptyAllowed:!1,required:!1}),childField:new w({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new D({min:0,required:!1})},Sa=v("folding/register",e=>b(e,Tf)),ya=ae("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a}})=>{let n=t(),o=await pa(n),i=await a.search({...o,q:PI(n),enableQuerySyntax:!0,cq:`@${n.folding.fields.collection}="${e}"`,filterField:n.folding.fields.collection,childField:n.folding.fields.parent,parentField:n.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Fe(i)?r(i.error):{collectionId:e,results:i.success.results,rootResult:n.folding.collections[e].result}});function PI(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var Ca=T(Vn(),e=>e.addCase(ha,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(Po,t=>{t.fetchAllFields=!0}).addCase(rn,t=>{t.fetchAllFields=!1}).addCase(wo.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(Sa,(t,{payload:r})=>{var n,o,i;let a=Ha().fields;t.fieldsToInclude.push((n=r.collectionField)!=null?n:a.collection,(o=r.parentField)!=null?o:a.parent,(i=r.childField)!=null?i:a.child)}));var wI=new ee({enabled:new K({default:!1})});function mC(e,t={}){if(!EI(e))throw I;let r=V(e),{dispatch:a}=e,n=()=>e.state;ke(e,wI,t.initialState,"buildRelevanceInspector").enabled&&a(la());let i=s=>{e.logger.warn(`Flag [ ${s} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let s=n(),u=s.debug;if(!s.debug)return{isEnabled:u};let{executionReport:c,basicExpression:l,advancedExpression:d,constantExpression:f,userIdentities:p,rankingExpressions:m}=s.search.response,{fieldsDescription:g,fetchAllFields:y}=s.fields;return{isEnabled:u,rankingInformation:fC(s),executionReport:c,expressions:{basicExpression:l,advancedExpression:d,constantExpression:f},userIdentities:p,rankingExpressions:m,fieldsDescription:g,fetchAllFields:y}},enable(){a(la()),i("debug")},disable(){a(eo()),a(rn())},enableFetchAllFields(){a(Po()),i("fetchAllFields")},disableFetchAllFields(){a(rn())},fetchFieldsDescription(){!this.state.isEnabled&&a(la()),a(wo()),i("fieldsDescription"),e.logger.warn(`For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.
        
        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions
        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude`)}}}function EI(e){return e.addReducers({debug:to,search:J,configuration:z,fields:Ca}),!0}var II=new X({each:O,required:!0}),gC=(e,t)=>(b(e,O),Pn(t)?b(t,O):b(t,II),{payload:{contextKey:e,contextValue:t}}),an=v("context/set",e=>{for(let[t,r]of Object.entries(e))gC(t,r);return{payload:e}}),nn=v("context/add",e=>gC(e.contextKey,e.contextValue)),on=v("context/remove",e=>b(e,O));var Ou=T(Lr(),e=>{e.addCase(an,(t,r)=>{t.contextValues=r.payload}).addCase(nn,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(on,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ce.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.context.contextValues)})});var kI=["caseId","caseNumber"],OI={caseId:"caseContext",caseNumber:"caseContext"},qu=class extends Error{constructor(t){super(`The key "${t}" is reserved for internal use. Use ${OI[t]} to set this value.}`)}};function Df(e){return kI.includes(e)}var qI=new ee({values:new q({options:{required:!1}})});function hC(e,t={}){if(!VI(e))throw I;let r=V(e),{dispatch:a}=e,n=()=>e.state,o=ke(e,qI,t.initialState,"buildContext");return o.values&&a(an(o.values)),{...r,get state(){return{values:n().context.contextValues}},set(i){a(an(i))},...n().configuration.analytics.analyticsMode==="legacy"?TI(a):DI(a)}}var TI=e=>({add(t,r){e(nn({contextKey:t,contextValue:r}))},remove(t){e(on(t))}}),DI=e=>({add(t,r){if(Df(t))throw new qu(t);e(nn({contextKey:t,contextValue:r}))},remove(t){if(Df(t))throw new qu(t);e(on(t))}});function VI(e){return e.addReducers({context:Ou}),!0}function SC(e,t){return hC(e,t)}var Eo=v("dictionaryFieldContext/set",e=>{let t=new q({options:{required:!0}}),r=b(e,t).error;if(r)return{payload:e,error:r};let a=Object.values(e),n=new X({each:me}),o=b(a,n).error;return o?{payload:e,error:o}:{payload:e}}),Io=v("dictionaryFieldContext/add",e=>{let t=new q({options:{required:!0},values:{field:me,key:me}});return b(e,t)}),ko=v("dictionaryFieldContext/remove",e=>b(e,me));var Tu=T(oa(),e=>{e.addCase(Eo,(t,r)=>{t.contextValues=r.payload}).addCase(Io,(t,r)=>{let{field:a,key:n}=r.payload;t.contextValues[a]=n}).addCase(ko,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ce.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function yC(e){if(!MI(e))throw I;let t=V(e),{dispatch:r}=e,a=()=>e.state;return{...t,get state(){return{values:a().dictionaryFieldContext.contextValues}},set(n){r(Eo(n))},add(n,o){r(Io({field:n,key:o}))},remove(n){r(ko(n))}}}function MI(e){return e.addReducers({dictionaryFieldContext:Tu}),!0}var Du=T(ss(),e=>{e.addCase(yo,t=>{t.enableDidYouMean=!0}).addCase(yu,t=>{t.enableDidYouMean=!1}).addCase(Cu,t=>{t.automaticallyCorrectQuery=!0}).addCase(Co,t=>{t.automaticallyCorrectQuery=!1}).addCase(E.pending,t=>{t.queryCorrection=Pc(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(E.fulfilled,(t,r)=>{t.queryCorrection=r.payload.response.queryCorrections[0]||Pc(),t.originalQuery=r.payload.originalQuery,t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(Ct,(t,r)=>{t.wasCorrectedTo=r.payload})});function CC(e,t={}){if(!NI(e))throw I;let r=V(e),{dispatch:a}=e;a(yo()),t.automaticallyCorrectQuery===!1&&a(Co());let n=()=>e.state;return{...r,get state(){let o=n();return{originalQuery:o.didYouMean.originalQuery,wasCorrectedTo:o.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:o.didYouMean.wasAutomaticallyCorrected,queryCorrection:o.didYouMean.queryCorrection,hasQueryCorrection:o.didYouMean.queryCorrection.correctedQuery!==""||o.didYouMean.wasCorrectedTo!==""}},applyCorrection(){a(Ct(this.state.queryCorrection.correctedQuery))}}}function NI(e){return e.addReducers({configuration:z,didYouMean:Du}),!0}function vC(e){let t=CC(e),{dispatch:r}=e;return{...t,get state(){return t.state},applyCorrection(){t.applyCorrection(),r(E({legacy:vu(),next:{actionCause:L.didyoumeanClick,getEventExtraPayload:a=>new U(()=>a).getBaseMetadata()}}))}}}var te=O;var ie=v("facetOptions/update",(e={freezeFacetOrder:!0})=>b(e,{freezeFacetOrder:new K({required:!1})})),We=v("facetOptions/facet/enable",e=>b(e,te)),ve=v("facetOptions/facet/disable",e=>b(e,te));var As={facetId:te,captions:new q({options:{required:!1}}),numberOfValues:new D({required:!1,min:1}),query:new w({required:!1,emptyAllowed:!0})};var LI={path:new X({required:!0,each:O}),displayValue:me,rawValue:me,count:new D({required:!0,min:0})},Oo=v("categoryFacet/selectSearchResult",e=>b(e,{facetId:te,value:new q({values:LI})})),qo=v("categoryFacetSearch/register",e=>b(e,As));function To(e,t){var o;let{facetId:r,criterion:a}=t,n=(o=e[r])==null?void 0:o.request;!n||(n.sortCriteria=a)}function Ps(e){!e||(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function Vu(e,t){!e||(e.numberOfValues=t)}function Mu(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function Vf(e,t,r){e.currentValues=QI(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function QI(e,t){if(!e.length)return[];let r=xC(e[0],t),a=r;for(let n of e.splice(1)){let o=xC(n,t);a.children.push(o),a=o}return a.state="selected",a.retrieveChildren=!0,[r]}function xC(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var BI={state:new fe({required:!0}),numberOfResults:new D({required:!0,min:0}),value:new w({required:!0,emptyAllowed:!0}),path:new X({required:!0,each:O}),moreValuesAvailable:new K({required:!1})};function Mf(e){e.children.forEach(t=>{Mf(t)}),et({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},BI)}var Do={facetId:te,field:O,delimitingCharacter:new w({required:!1,emptyAllowed:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new fe({required:!1}),basePath:new X({required:!1,each:O}),filterByBasePath:new K({required:!1})},ir=v("categoryFacet/register",e=>b(e,Do)),va=v("categoryFacet/toggleSelectValue",e=>{try{return et(e.facetId,O),Mf(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Dr(t)}}}),sr=v("categoryFacet/deselectAll",e=>b(e,Do.facetId)),sn=v("categoryFacet/updateNumberOfValues",e=>b(e,{facetId:Do.facetId,numberOfValues:Do.numberOfValues})),Vo=v("categoryFacet/updateSortCriterion",e=>b(e,{facetId:Do.facetId,criterion:new fe})),Nu=v("categoryFacet/updateBasePath",e=>b(e,{facetId:Do.facetId,basePath:new X({each:O})}));var cr=T($t(),e=>{e.addCase(ir,(t,r)=>{let a=r.payload,{facetId:n}=a;if(n in t)return;let o=UI(a),i=o.numberOfValues;t[n]={request:o,initialNumberOfValues:i}}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.categoryFacetSet)!=null?n:t}).addCase(ue,(t,r)=>{let a=r.payload.cf||{};Object.keys(t).forEach(n=>{let o=t[n].request,i=a[n]||[];(i.length||o.currentValues.length)&&Vf(o,i,t[n].initialNumberOfValues)})}).addCase(Vo,(t,r)=>{var i;let{facetId:a,criterion:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.sortCriteria=n)}).addCase(Nu,(t,r)=>{var i;let{facetId:a,basePath:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.basePath=[...n])}).addCase(va,(t,r)=>{var d;let{facetId:a,selection:n,retrieveCount:o}=r.payload,i=(d=t[a])==null?void 0:d.request;if(!i)return;let{path:s}=n,u=s.slice(0,s.length-1),c=jI(i,u,o);if(c.length){let f=c[0];f.retrieveChildren=!0,f.state="selected",f.children=[];return}let l=bC(n.value,o);l.state="selected",c.push(l),i.numberOfValues=1}).addCase(sr,(t,r)=>{let a=r.payload;Mu(t,a)}).addCase(Re,t=>{Object.keys(t).forEach(r=>Mu(t,r))}).addCase(ht,(t,r)=>Object.keys(t).forEach(a=>{t[a].request.preventAutoSelect=!r.payload.allow})).addCase(sn,(t,r)=>{var i;let{facetId:a,numberOfValues:n}=r.payload,o=(i=t[a])==null?void 0:i.request;if(!!o){if(!o.currentValues.length)return Vu(o,n);_I(t,r.payload)}}).addCase(Oo,(t,r)=>{let{facetId:a,value:n}=r.payload,o=t[a];if(!o)return;let i=[...n.path,n.rawValue];Vf(o.request,i,o.initialNumberOfValues)}).addCase(or.fulfilled,(t,r)=>{FC(t,r.payload.response.facets)}).addCase(E.fulfilled,(t,r)=>{FC(t,r.payload.response.facets)}).addCase(ve,(t,r)=>{Mu(t,r.payload)})}),ws={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function jI(e,t,r){let a=e.currentValues;for(let n of t){let o=a[0];(!o||n!==o.value)&&(o=bC(n,r),a.length=0,a.push(o)),o.retrieveChildren=!1,o.state="idle",a=o.children}return a}function UI(e){return{...ws,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function bC(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function FC(e,t){t.forEach(r=>{var i;if(!$I(e,r))return;let a=r.facetId,n=(i=e[a])==null?void 0:i.request;if(!n)return;let o=HI(n,r);n.currentValues=o?[]:n.currentValues,n.preventAutoSelect=!1})}function _I(e,t){var o;let{facetId:r,numberOfValues:a}=t,n=(o=e[r])==null?void 0:o.request.currentValues[0];if(!!n){for(;n.children.length&&(n==null?void 0:n.state)!=="selected";)n=n.children[0];n.retrieveCount=a}}function $I(e,t){return t.facetId in e}function HI(e,t){let r=ut(e.currentValues),a=ut(t.values);return r.length!==a.length}function Lu(e,t,r){let{facetId:a}=t;if(e[a])return;let n=!1,o={...ur,...t},i=r();e[a]={options:o,isLoading:n,response:i,initialNumberOfValues:o.numberOfValues,requestId:""}}function Qu(e,t){let{facetId:r,...a}=t,n=e[r];!n||(n.options={...n.options,...a})}function Bu(e,t,r){let a=e[t];!a||(a.requestId=r,a.isLoading=!0)}function ju(e,t){let r=e[t];!r||(r.isLoading=!1)}function Uu(e,t,r){let{facetId:a,response:n}=t,o=e[a];!o||o.requestId===r&&(o.isLoading=!1,o.response=n)}function Es(e,t,r){let{facetId:a}=t,n=e[a];!n||(n.requestId="",n.isLoading=!1,n.response=r(),n.options.numberOfValues=n.initialNumberOfValues,n.options.query=ur.query)}function _u(e,t){Object.keys(e).forEach(r=>Es(e,{facetId:r},t))}var ur={captions:{},numberOfValues:10,query:""};var RC=async(e,t,r)=>{let a=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:o,query:i,numberOfValues:s}=a,{field:u,delimitingCharacter:c,basePath:l,filterFacetCount:d}=n,f=zI(n),p=f.length?[f]:[],m=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:l,captions:o,numberOfValues:s,query:m,field:u,delimitingCharacter:c,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await Oe(t)).request}}},zI=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var AC=async(e,t,r)=>{let{captions:a,query:n,numberOfValues:o}=t.facetSearchSet[e].options,{field:i,currentValues:s,filterFacetCount:u}=t.facetSet[e].request,c=s.filter(d=>d.state!=="idle").map(d=>d.value),l=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:o,query:l,field:i,ignoreValues:c,filterFacetCount:u,type:"specific",...r?{}:{searchContext:(await Oe(t)).request}}};var PC=e=>async(t,{getState:r,extra:{apiClient:a,validatePayload:n}})=>{let o=r(),i;n(t,O),GI(o,t)?i=await AC(t,o,e):i=await RC(t,o,e);let s=await a.facetSearch(i);return{facetId:t,response:s}},Nt=ae("facetSearch/executeSearch",PC(!1)),Nf=ae("facetSearch/executeSearch",PC(!0)),Mo=v("facetSearch/clearResults",e=>b(e,{facetId:te})),GI=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;var wC={facetId:te,value:new q({values:{displayValue:me,rawValue:me,count:new D({required:!0,min:0})}})},$u=v("facetSearch/register",e=>b(e,As)),xa=v("facetSearch/update",e=>b(e,As)),cn=v("facetSearch/toggleSelectValue",e=>b(e,wC)),Is=v("facetSearch/toggleExcludeValue",e=>b(e,wC));var No=T(cs(),e=>{e.addCase(qo,(t,r)=>{let a=r.payload;Lu(t,a,Lf)}).addCase(xa,(t,r)=>{Qu(t,r.payload)}).addCase(Nt.pending,(t,r)=>{let a=r.meta.arg;Bu(t,a,r.meta.requestId)}).addCase(Nt.rejected,(t,r)=>{let a=r.meta.arg;ju(t,a)}).addCase(Nt.fulfilled,(t,r)=>{Uu(t,r.payload,r.meta.requestId)}).addCase(Mo,(t,{payload:{facetId:r}})=>{Es(t,{facetId:r},Lf)}).addCase(E.fulfilled,t=>{_u(t,Lf)})});function Lf(){return{moreValuesAvailable:!1,values:[]}}var Lo=e=>k("analytics/facet/showMore",(t,r)=>{b(e,te);let a=zn(e,lt(r));return t.makeFacetShowMore(a)}),Qo=e=>k("analytics/facet/showLess",(t,r)=>{b(e,te);let a=zn(e,lt(r));return t.makeFacetShowLess(a)}),lr=e=>k("analytics/facet/sortChange",(t,r)=>{b(e,{facetId:te,criterion:new fe({required:!0})});let{facetId:a,criterion:n}=e,o=lt(r),s={...zn(a,o),criteria:n};return t.makeFacetUpdateSort(s)}),Me=e=>k("analytics/facet/reset",(t,r)=>{b(e,te);let a=lt(r),n=zn(e,a);return t.makeFacetClearAll(n)}),Pe=e=>k("analytics/facet/select",(t,r)=>{b(e,{facetId:te,facetValue:O});let a=lt(r),n=hs(e,a);return t.makeFacetSelect(n)}),Lt=e=>k("analytics/facet/exclude",(t,r)=>{b(e,{facetId:te,facetValue:O});let a=lt(r),n=hs(e,a);return t.makeFacetExclude(n)}),dt=e=>k("analytics/facet/deselect",(t,r)=>{b(e,{facetId:te,facetValue:O});let a=lt(r),n=hs(e,a);return t.makeFacetDeselect(n)}),Bo=e=>k("analytics/facet/breadcrumb",(t,r)=>{b(e,{facetId:te,facetValue:O});let a=hs(e,lt(r));return t.makeBreadcrumbFacet(a)});var dr=(e,t)=>{var r,a;return(a=(r=e.facetOptions.facets[t])==null?void 0:r.enabled)!=null?a:!0};var pr=new w({regex:/^[a-zA-Z0-9-_]+$/}),fr=new w({required:!0}),EC=new X({each:new w}),IC=new w,kC=new K,mr=new K,gr=new D({min:0}),Qt=new D({min:1}),Hu=new K({required:!0}),WI=new q,YI=new w,KI={captions:WI,numberOfValues:Qt,query:YI},jo=new q({values:KI}),zu=new q({options:{required:!1},values:{type:new w({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new X({required:!0,max:25,each:new w({emptyAllowed:!1,required:!0})})}}),OC=new K,Gu=new X({min:1,max:25,required:!1,each:new w({emptyAllowed:!1,required:!0})});var un={value:O,numberOfResults:new D({min:0}),state:O};var JI={facetId:te,field:new w({required:!0,emptyAllowed:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new fe({required:!1}),resultsMustMatch:new fe({required:!1}),allowedValues:zu,customSort:Gu},hr=v("facet/register",e=>b(e,JI)),Sr=v("facet/toggleSelectValue",e=>b(e,{facetId:te,selection:new q({values:un})})),ba=v("facet/toggleExcludeValue",e=>b(e,{facetId:te,selection:new q({values:un})})),xe=v("facet/deselectAll",e=>b(e,te)),Uo=v("facet/updateSortCriterion",e=>b(e,{facetId:te,criterion:new fe({required:!0})})),ln=v("facet/updateNumberOfValues",e=>b(e,{facetId:te,numberOfValues:new D({required:!0,min:1})})),dn=v("facet/updateIsFieldExpanded",e=>b(e,{facetId:te,isFieldExpanded:new K({required:!0})})),_r=v("facet/updateFreezeCurrentValues",e=>b(e,{facetId:te,freezeCurrentValues:new K({required:!0})}));function Fa(e){var o,i;let t=qC(e.start,e),r=qC(e.end,e),a=(o=e.endInclusive)!=null?o:!1,n=(i=e.state)!=null?i:"idle";return{start:t,end:r,endInclusive:a,state:n}}function qC(e,t){let{dateFormat:r}=t;return Ay(e)?(fa(e),by(e)):typeof e=="string"&&ar(e)?(fa(e),e):(hu(e,r),Cs(Xa(e,r)))}var _o=v("rangeFacet/updateSortCriterion",e=>b(e,{facetId:te,criterion:new fe({required:!0})}));var pn={state:O,start:new D({required:!0}),end:new D({required:!0}),endInclusive:new K({required:!0}),numberOfResults:new D({required:!0,min:0})},fn={start:O,end:O,endInclusive:new K({required:!0}),state:O,numberOfResults:new D({required:!0,min:0})},mn=e=>({facetId:te,selection:typeof e.start=="string"?new q({values:fn}):new q({values:pn})});var XI={start:O,end:O,endInclusive:new K({required:!0}),state:O},ZI={facetId:te,field:O,currentValues:new X({required:!1,each:new q({values:XI})}),generateAutomaticRanges:new K({required:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new fe({required:!1}),rangeAlgorithm:new fe({required:!1})};function TC(e){return ar(e)?xs(e):e}function Wu(e){!e.currentValues||e.currentValues.forEach(t=>{let{start:r,end:a}=Fa(t);if(Xa(TC(r)).isAfter(Xa(TC(a))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var yr=v("dateFacet/register",e=>{try{return et(e,ZI),Wu(e),{payload:e,error:null}}catch(t){return{payload:e,error:Dr(t)}}}),Cr=v("dateFacet/toggleSelectValue",e=>b(e,{facetId:te,selection:new q({values:fn})})),Ra=v("dateFacet/toggleExcludeValue",e=>b(e,{facetId:te,selection:new q({values:fn})})),$r=v("dateFacet/updateFacetValues",e=>{try{return et(e,{facetId:te,values:new X({each:new q({values:fn})})}),Wu({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Dr(t)}}}),Yu=_o,Ku=xe;var ek={state:O,start:new D({required:!0}),end:new D({required:!0}),endInclusive:new K({required:!0})},tk={facetId:te,field:O,currentValues:new X({required:!1,each:new q({values:ek})}),generateAutomaticRanges:new K({required:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new fe({required:!1}),rangeAlgorithm:new fe({required:!1})};function Ju(e){!e.currentValues||e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var vr=v("numericFacet/register",e=>{try{return b(e,tk),Ju(e),{payload:e,error:null}}catch(t){return{payload:e,error:Dr(t)}}}),xr=v("numericFacet/toggleSelectValue",e=>b(e,{facetId:te,selection:new q({values:pn})})),Aa=v("numericFacet/toggleExcludeValue",e=>b(e,{facetId:te,selection:new q({values:pn})})),Hr=v("numericFacet/updateFacetValues",e=>{try{return et(e,{facetId:te,values:new X({each:new q({values:pn})})}),Ju({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Dr(t)}}}),Xu=_o,Zu=xe;var Ne=T(na(),e=>{e.addCase(ie,(t,r)=>({...t,...r.payload})).addCase(E.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(E.rejected,t=>{t.freezeFacetOrder=!1}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOptions)!=null?n:t}).addCase(ir,(t,r)=>{t.facets[r.payload.facetId]=Tn()}).addCase(hr,(t,r)=>{t.facets[r.payload.facetId]=Tn()}).addCase(yr,(t,r)=>{t.facets[r.payload.facetId]=Tn()}).addCase(vr,(t,r)=>{t.facets[r.payload.facetId]=Tn()}).addCase(We,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(ve,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(ue,(t,r)=>{var a,n,o,i,s;[...Object.keys((a=r.payload.f)!=null?a:{}),...Object.keys((n=r.payload.fExcluded)!=null?n:{}),...Object.keys((o=r.payload.cf)!=null?o:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((s=r.payload.df)!=null?s:{})].forEach(u=>{u in t||(t.facets[u]=Tn()),t.facets[u].enabled=!0})})});function DC(e,t){let{field:r,state:a}=e;if(!rk(e))return r;let n=`${r}_`,o=ak(n,a);return ok(r,t),`${n}${o}`}function rk(e){let{field:t,state:r}=e;return VC(r).some(n=>n&&t in n)}function ak(e,t){let a=VC(t).map(n=>Object.keys(n||{})).reduce((n,o)=>n.concat(o),[]);return nk(a,e)+1}function VC(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:a,categoryFacetSet:n}=e;return[t,r,a,n]}function nk(e,t){let r=0,n=e.map(o=>{let i=o.split(t)[1],s=parseInt(i,10);return Number.isNaN(s)?r:s}).sort().pop();return n!=null?n:r}function ok(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function Ye(e,t){let{state:r,logger:a}=e,{field:n,facetId:o}=t;return o||DC({field:n,state:r},a)}var MC=["alphanumeric","occurrences"];var NC=new ee({field:fr,basePath:EC,delimitingCharacter:IC,facetId:pr,facetSearch:jo,filterByBasePath:kC,filterFacetCount:mr,injectionDepth:gr,numberOfValues:Qt,sortCriteria:new w({constrainTo:MC})});function LC(e,t){if(!ik(e))throw I;let r=V(e),{dispatch:a}=e,n=Ye(e,t.options),o={...ws,...yc("facetSearch",t.options),field:t.options.field,facetId:n},i={facetSearch:{...ur,...t.options.facetSearch},...o};ge(e,NC,i,"buildCategoryFacet");let s=()=>af(e.state,n),u=()=>rf(e.state,n),c=()=>Jt(e.state),l=()=>dr(e.state,n);return a(ir(o)),{...r,toggleSelect(d){let f=i.numberOfValues;a(va({facetId:n,selection:d,retrieveCount:f})),a(ie())},deselectAll(){a(sr(n)),a(ie())},sortBy(d){a(Vo({facetId:n,criterion:d})),a(ie())},isSortedBy(d){return s().sortCriteria===d},showMoreValues(){var g;let{numberOfValues:d}=i,{activeValue:f,valuesAsTrees:p}=this.state,m=((g=f==null?void 0:f.children.length)!=null?g:p.length)+d;a(sn({facetId:n,numberOfValues:m})),a(ie())},showLessValues(){let{numberOfValues:d}=i;a(sn({facetId:n,numberOfValues:d})),a(ie())},enable(){a(We(n))},disable(){a(ve(n))},get state(){var $,H,pe,he;let d=s(),f=u(),p=c(),m=l(),g=($=f==null?void 0:f.values)!=null?$:[],y=(H=g.some(_=>_.children.length>0))!=null?H:!1,{parents:S,values:C}=NS(f==null?void 0:f.values),R=ut(g),P=R.length?R[R.length-1]:void 0,Q=!!P,G=(he=(pe=P==null?void 0:P.moreValuesAvailable)!=null?pe:f==null?void 0:f.moreValuesAvailable)!=null?he:!1,Z=P?P.children.length>i.numberOfValues:g.length>i.numberOfValues;return{facetId:n,parents:S,selectedValueAncestry:R,values:C,isHierarchical:y,valuesAsTrees:g,activeValue:P,isLoading:p,hasActiveValues:Q,canShowMoreValues:G,canShowLessValues:Z,sortCriteria:d.sortCriteria,enabled:m}}}}function ik(e){return e.addReducers({categoryFacetSet:cr,categoryFacetSearchSet:No,facetOptions:Ne,configuration:z,search:J}),!0}function $o(e,t){let r=e.dispatch,{options:a,getFacetSearch:n}=t,{facetId:o}=a;return{updateText(i){r(xa({facetId:o,query:i,numberOfValues:n().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:i,options:s}=n();r(xa({facetId:o,numberOfValues:s.numberOfValues+i})),r(t.isForFieldSuggestions?Nf(o):Nt(o))},search(){r(t.isForFieldSuggestions?Nf(o):Nt(o))},clear(){r(Mo({facetId:o}))},updateCaptions(i){r(xa({facetId:o,captions:i}))},get state(){let{response:i,isLoading:s,options:u}=n(),{query:c}=u,l=i.values;return{...i,values:l,isLoading:s,query:c}}}}function QC(e,t){let{dispatch:r}=e,a={...ur,...t.options},{facetId:n}=a,o=()=>e.state.categoryFacetSearchSet[n];r(qo(a));let i=$o(e,{options:a,getFacetSearch:o,isForFieldSuggestions:t.isForFieldSuggestions});return{...i,select(s){r(Oo({facetId:n,value:s}))},get state(){return i.state}}}function el(e,t){let{dispatch:r}=e,a={...ur,...t.options},{facetId:n}=a,o=()=>e.state.categoryFacetSearchSet[n],i=QC(e,{options:{...a},isForFieldSuggestions:t.isForFieldSuggestions});r(qo(a));let s=$o(e,{options:a,getFacetSearch:o,isForFieldSuggestions:t.isForFieldSuggestions});return{...s,...i,select:u=>{i.select(u),r(ie()),r(E({legacy:Pe({facetId:n,facetValue:u.rawValue}),next:{actionCause:L.facetSelect,getEventExtraPayload:c=>new U(()=>c).getFacetMetadata(n,u.rawValue)}}))},get state(){return{...s.state,...i.state}}}}function BC(e,t){if(!sk(e))throw I;let r=LC(e,t),{dispatch:a}=e,n=()=>r.state.facetId,o=el(e,{options:{facetId:n(),...t.options.facetSearch},isForFieldSuggestions:!1}),{state:i,...s}=o;return{...r,facetSearch:s,toggleSelect(u){r.toggleSelect(u),a(E({legacy:ck(n(),u),next:uk(n(),u)}))},deselectAll(){r.deselectAll(),a(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:u=>new U(()=>u).getFacetClearAllMetadata(n())}}))},sortBy(u){r.sortBy(u),a(E({legacy:lr({facetId:n(),criterion:u}),next:{actionCause:L.facetUpdateSort,getEventExtraPayload:c=>new U(()=>c).getFacetSortMetadata(n(),u)}}))},showMoreValues(){r.showMoreValues(),a(or({legacy:Lo(n())}))},showLessValues(){r.showLessValues(),a(or({legacy:Qo(n())}))},get state(){return{...r.state,facetSearch:o.state}}}}function sk(e){return e.addReducers({categoryFacetSet:cr,categoryFacetSearchSet:No,configuration:z,search:J}),!0}function ck(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?dt(r):Pe(r)}function uk(e,t){return{actionCause:t.state==="selected"?L.facetDeselect:L.facetSelect,getEventExtraPayload:a=>new U(()=>a).getFacetMetadata(e,t.value)}}var Ho=T(Dn(),e=>{e.addCase($u,(t,r)=>{let a=r.payload;Lu(t,a,Qf)}).addCase(xa,(t,r)=>{Qu(t,r.payload)}).addCase(Nt.pending,(t,r)=>{let a=r.meta.arg;Bu(t,a,r.meta.requestId)}).addCase(Nt.rejected,(t,r)=>{let a=r.meta.arg;ju(t,a)}).addCase(Nt.fulfilled,(t,r)=>{Uu(t,r.payload,r.meta.requestId)}).addCase(Mo,(t,{payload:r})=>{Es(t,r,Qf)}).addCase(E.fulfilled,t=>{_u(t,Qf)})});function Qf(){return{moreValuesAvailable:!1,values:[]}}var jC=()=>iy("analytics/productListing/load",e=>e.makeInterfaceLoad(),e=>new Yn(e));var W4=v("productlisting/setUrl",e=>b(e,{url:new w({required:!0,url:!0})})),Y4=v("productlisting/setAdditionalFields",e=>b(e,{additionalFields:new X({required:!0,each:new w({required:!0,emptyAllowed:!1})})})),Pa=ae("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let o=t(),{apiClient:i}=n,s=await i.getProducts(await lk(o));return Fe(s)?(r(yt(s.error)),a(s.error)):{response:s.success,analyticsAction:jC()}}),lk=async e=>{var a,n,o;let t=pk(e),r=await mt(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(a=e.productListing)==null?void 0:a.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...((n=e.productListing.additionalFields)==null?void 0:n.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&dk(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((o=e.sort)==null?void 0:o.by)||kt.Relevance)!==kt.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function dk(e){return e.debug}function pk(e){var t;return So(fk(e),(t=e.facetOrder)!=null?t:[])}function fk(e){var t,r,a,n;return[...jr((t=e.facetSet)!=null?t:{}),...jr((r=e.numericFacetSet)!=null?r:{}),...jr((a=e.dateFacetSet)!=null?a:{}),...jr((n=e.categoryFacetSet)!=null?n:{})]}var br=T(Ht(),e=>{e.addCase(hr,(t,r)=>{let{facetId:a}=r.payload;a in t||(t[a]=Bh(mk(r.payload)))}).addCase(ce.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(ue,(t,r)=>{let a=r.payload.f||{},n=r.payload.fExcluded||{};Object.keys(t).forEach(i=>{let{request:s}=t[i],u=a[i]||[],c=n[i]||[],l=s.currentValues.filter(d=>!u.includes(d.value)&&!c.includes(d.value));s.currentValues=[...u.map(UC),...c.map(_C),...l.map(hk)],s.preventAutoSelect=u.length>0,s.numberOfValues=Math.max(u.length+c.length,s.numberOfValues)})}).addCase(Sr,(t,r)=>{var u;let{facetId:a,selection:n}=r.payload,o=(u=t[a])==null?void 0:u.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(c=>c.value===n.value);if(!i){tl(o,n);return}let s=i.state==="selected";i.state=s?"idle":"selected",o.freezeCurrentValues=!0}).addCase(ba,(t,r)=>{var u;let{facetId:a,selection:n}=r.payload,o=(u=t[a])==null?void 0:u.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(c=>c.value===n.value);if(!i){tl(o,n);return}let s=i.state==="excluded";i.state=s?"idle":"excluded",o.freezeCurrentValues=!0}).addCase(_r,(t,r)=>{var i;let{facetId:a,freezeCurrentValues:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.freezeCurrentValues=n)}).addCase(xe,(t,r)=>{var a;Ps((a=t[r.payload])==null?void 0:a.request)}).addCase(Re,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Ps(r))}).addCase(da,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Ps(r))}).addCase(ht,(t,r)=>Object.values(t).forEach(a=>{a.request.preventAutoSelect=!r.payload.allow})).addCase(Uo,(t,r)=>{To(t,r.payload)}).addCase(ln,(t,r)=>{var o;let{facetId:a,numberOfValues:n}=r.payload;Vu((o=t[a])==null?void 0:o.request,n)}).addCase(dn,(t,r)=>{var i;let{facetId:a,isFieldExpanded:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.isFieldExpanded=n)}).addCase(E.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>{var o;return Bf((o=t[n.facetId])==null?void 0:o.request,n)})}).addCase(Pa.fulfilled,(t,r)=>{var n,o;(((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[]).forEach(i=>{var s;return Bf((s=t[i.facetId])==null?void 0:s.request,i)})}).addCase(or.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>{var o;return Bf((o=t[n.facetId])==null?void 0:o.request,n)})}).addCase(cn,(t,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=t[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,u=s.find(d=>d.value===i);if(u){u.state="selected";return}let c=UC(i);tl(o,c),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(Is,(t,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=t[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,u=s.find(d=>d.value===i);if(u){u.state="excluded";return}let c=_C(i);tl(o,c),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(ve,(t,r)=>{if(!(r.payload in t))return;let{request:a}=t[r.payload];Ps(a)})});function tl(e,t){let{currentValues:r}=e,a=r.findIndex(s=>s.state==="idle"),n=a===-1?r.length:a,o=r.slice(0,n),i=r.slice(n+1);e.currentValues=[...o,t,...i],e.numberOfValues=e.currentValues.length}function Bf(e,t){!e||(e.currentValues=t.values.map(gk),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var ks={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function mk(e){return{...ks,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function gk(e){let{value:t,state:r}=e;return{value:t,state:r}}function UC(e){return{value:e,state:"selected"}}function _C(e){return{value:e,state:"excluded"}}function hk(e){return{...e,state:"idle"}}var rl=e=>e.state==="selected",al=e=>e.state==="excluded",nl=(e,t)=>{let r={facetId:e,facetValue:t.value};return rl(t)?dt(r):Pe(r)},ol=(e,t)=>({actionCause:rl(t)?L.facetDeselect:L.facetSelect,getEventExtraPayload:r=>new U(()=>r).getFacetMetadata(e,t.value)}),$C=(e,t)=>{let r={facetId:e,facetValue:t.value};return al(t)?dt(r):Lt(r)},HC=(e,t)=>({actionCause:al(t)?L.facetUnexclude:L.facetExclude,getEventExtraPayload:r=>new U(()=>r).getFacetMetadata(e,t.value)});function il(e,t){let{dispatch:r}=e,{options:a,select:n,exclude:o,isForFieldSuggestions:i}=t,{facetId:s}=a,u=()=>e.state.facetSearchSet[s];r($u(a));let c=$o(e,{options:a,getFacetSearch:u,isForFieldSuggestions:i});return{...c,select(l){r(cn({facetId:s,value:l})),n(l)},exclude(l){r(Is({facetId:s,value:l})),o(l)},singleSelect(l){r(xe(s)),r(cn({facetId:s,value:l})),n(l)},singleExclude(l){r(xe(s)),r(Is({facetId:s,value:l})),o(l)},get state(){let{values:l}=c.state;return{...c.state,values:l.map(({count:d,displayValue:f,rawValue:p})=>({count:d,displayValue:f,rawValue:p}))}}}}var zC={facetId:te,selection:new q({values:un})},GC=ae("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:e,selection:t},zC),a(Sr({facetId:e,selection:t})),a(ie())}),WC=ae("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:e,selection:t},zC),a(ba({facetId:e,selection:t})),a(ie())});var zo=["allValues","atLeastOneValue"];var sl=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var YC=new ee({facetId:pr,field:fr,filterFacetCount:mr,injectionDepth:gr,numberOfValues:Qt,sortCriteria:new w({constrainTo:sl}),resultsMustMatch:new w({constrainTo:zo}),facetSearch:jo});function KC(e,t,r=YC){if(!Sk(e))throw I;let{dispatch:a}=e,n=V(e),o=Ye(e,t.options),i={...ks,...yc("facetSearch",t.options),field:t.options.field,facetId:o},s={facetSearch:{...ur,...t.options.facetSearch},...i};ge(e,r,s,"buildFacet");let u=()=>Xc(e.state,o),c=()=>Hn(e.state,o),l=()=>Jt(e.state),d=()=>dr(e.state,o),f=()=>{let{currentValues:m}=u();return m.filter(g=>g.state!=="idle").length},p=()=>{let{currentValues:m}=u(),g=s.numberOfValues,y=!!m.find(S=>S.state==="idle");return g<m.length&&y};return a(hr(i)),{...n,toggleSelect:m=>a(GC({facetId:s.facetId,selection:m})),toggleExclude:m=>a(WC({facetId:s.facetId,selection:m})),toggleSingleSelect:function(m){m.state==="idle"&&a(xe(o)),this.toggleSelect(m)},toggleSingleExclude:function(m){m.state==="idle"&&a(xe(o)),this.toggleExclude(m)},isValueSelected:rl,isValueExcluded:al,deselectAll(){a(xe(o)),a(ie())},sortBy(m){a(Uo({facetId:o,criterion:m})),a(ie())},isSortedBy(m){return this.state.sortCriterion===m},showMoreValues(){let m=u().numberOfValues,g=s.numberOfValues,y=g-m%g,S=m+y;a(ln({facetId:o,numberOfValues:S})),a(dn({facetId:o,isFieldExpanded:!0})),a(ie())},showLessValues(){let m=s.numberOfValues,g=Math.max(m,f());a(ln({facetId:o,numberOfValues:g})),a(dn({facetId:o,isFieldExpanded:!1})),a(ie())},enable(){a(We(o))},disable(){a(ve(o))},get state(){let m=u(),g=c(),y=l(),S=d(),C;typeof m.sortCriteria=="object"?C=m.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":C=m.sortCriteria;let R=g?g.values:[],P=R.some(Z=>Z.state!=="idle"),Q=g?g.moreValuesAvailable:!1,G=m.resultsMustMatch;return{facetId:o,values:R,sortCriterion:C,resultsMustMatch:G,isLoading:y,hasActiveValues:P,canShowMoreValues:Q,canShowLessValues:p(),enabled:S}}}}function Sk(e){return e.addReducers({facetSet:br,facetOptions:Ne,configuration:z,facetSearchSet:Ho}),!0}var JC=new ee({facetId:pr,field:fr,filterFacetCount:mr,injectionDepth:gr,numberOfValues:Qt,sortCriteria:new w({constrainTo:sl}),resultsMustMatch:new w({constrainTo:zo}),facetSearch:jo,allowedValues:zu,hasBreadcrumbs:OC,customSort:Gu});function XC(e,t){if(!yk(e))throw I;let{dispatch:r}=e,a=KC(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},JC),n=()=>a.state.facetId,i=(()=>{let{facetSearch:c}=t.options;return il(e,{options:{facetId:n(),...c},select:l=>{r(ie()),r(E({legacy:Pe({facetId:n(),facetValue:l.rawValue}),next:{actionCause:L.facetSelect,getEventExtraPayload:d=>new U(()=>d).getFacetMetadata(n(),l.rawValue)}}))},exclude:l=>{r(ie()),r(E({legacy:Lt({facetId:n(),facetValue:l.rawValue}),next:{actionCause:L.facetExclude,getEventExtraPayload:d=>new U(()=>d).getFacetMetadata(n(),l.rawValue)}}))},isForFieldSuggestions:!1})})(),{state:s,...u}=i;return{...a,facetSearch:u,toggleSelect(c){a.toggleSelect(c),r(E({legacy:nl(n(),c),next:ol(n(),c)}))},toggleExclude(c){a.toggleExclude(c),r(E({legacy:$C(n(),c),next:HC(n(),c)}))},deselectAll(){a.deselectAll(),r(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:c=>new U(()=>c).getFacetClearAllMetadata(n())}}))},sortBy(c){a.sortBy(c),r(E({legacy:lr({facetId:n(),criterion:c}),next:{actionCause:L.facetUpdateSort,getEventExtraPayload:l=>new U(()=>l).getFacetSortMetadata(n(),c)}}))},isSortedBy(c){return this.state.sortCriterion===c},showMoreValues(){a.showMoreValues(),r(or({legacy:Lo(n())}))},showLessValues(){a.showLessValues(),r(or({legacy:Qo(n())}))},get state(){return{...a.state,facetSearch:i.state}}}}function yk(e){return e.addReducers({facetSet:br,configuration:z,facetSearchSet:Ho,search:J}),!0}var cl=e=>e.state==="selected",jf=e=>e.state==="excluded",ul=(e,t)=>{let r=`${t.start}..${t.end}`,a={facetId:e,facetValue:r};return cl(t)?dt(a):Pe(a)},ll=(e,t)=>({actionCause:cl(t)?L.facetSelect:L.facetDeselect,getEventExtraPayload:r=>new U(()=>r).getFacetMetadata(e,`${t.start}..${t.end}`)}),ZC=(e,t)=>{let r=`${t.start}..${t.end}`,a={facetId:e,facetValue:r};return jf(t)?dt(a):Lt(a)};var dl=v("rangeFacet/executeToggleSelect",e=>b(e,mn(e.selection))),pl=v("rangeFacet/executeToggleExclude",e=>b(e,mn(e.selection)));var ev={facetId:te,selection:new q({values:fn})},tv=ae("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,ev),t(Cr(e)),t(dl(e)),t(ie())}),rv=ae("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,ev),t(Ra(e)),t(pl(e)),t(ie())});var fl={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function ml(e,t){let{request:r}=t,{facetId:a}=r;if(a in e)return;let n=av(r);r.numberOfValues=n,e[a]=t}function gl(e,t,r){var n;let a=(n=e[t])==null?void 0:n.request;!a||(a.currentValues=r,a.numberOfValues=av(a))}function hl(e,t,r){var i;let a=(i=e[t])==null?void 0:i.request;if(!a)return;let n=Cl(a.currentValues,r);if(!n)return;let o=n.state==="selected";n.state=o?"idle":"selected",a.preventAutoSelect=!0}function Sl(e,t,r){var i;let a=(i=e[t])==null?void 0:i.request;if(!a)return;let n=Cl(a.currentValues,r);if(!n)return;let o=n.state==="excluded";n.state=o?"idle":"excluded",a.preventAutoSelect=!0}function wa(e,t){var a;let r=(a=e[t])==null?void 0:a.request;!r||r.currentValues.forEach(n=>n.state="idle")}function yl(e,t){Object.entries(e).forEach(([r,{request:a}])=>{let n=t[r]||[];a.currentValues.forEach(s=>{let u=!!Cl(n,s);return s.state=u?"selected":"idle",s});let o=n.filter(s=>!Cl(a.currentValues,s)),i=a.currentValues;i.push(...o),a.numberOfValues=Math.max(a.numberOfValues,i.length)})}function Go(e,t,r){t.forEach(a=>{var s;let n=a.facetId,o=(s=e[n])==null?void 0:s.request;if(!o)return;let i=r(a.values);o.currentValues=i,o.preventAutoSelect=!1})}function Cl(e,t){let{start:r,end:a}=t;return e.find(n=>n.start===r&&n.end===a)}function av(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:a}=e;return t?Math.max(a,r.length):r.length}var Fr=T(zt(),e=>{e.addCase(yr,(t,r)=>{let{payload:a}=r,n=Ck(a);ml(t,jh(n))}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.dateFacetSet)!=null?n:t}).addCase(ue,(t,r)=>{let a=r.payload.df||{};yl(t,a)}).addCase(Cr,(t,r)=>{let{facetId:a,selection:n}=r.payload;hl(t,a,n)}).addCase(Ra,(t,r)=>{let{facetId:a,selection:n}=r.payload;Sl(t,a,n)}).addCase($r,(t,r)=>{let{facetId:a,values:n}=r.payload;gl(t,a,n)}).addCase(Ku,(t,r)=>{wa(t,r.payload)}).addCase(Re,t=>{Object.keys(t).forEach(r=>{wa(t,r)})}).addCase(Yu,(t,r)=>{To(t,r.payload)}).addCase(E.fulfilled,(t,r)=>{let a=r.payload.response.facets;Go(t,a,nv)}).addCase(Pa.fulfilled,(t,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];Go(t,a,nv)}).addCase(ve,(t,r)=>{wa(t,r.payload)})});function Ck(e){return{...fl,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function nv(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}function vl(e,t){let{facetId:r,getRequest:a}=t,n=V(e),o=e.dispatch,i=()=>dr(e.state,r);return{...n,isValueSelected:cl,isValueExcluded:jf,deselectAll(){o(xe(r)),o(ie())},sortBy(s){o(_o({facetId:r,criterion:s})),o(ie())},isSortedBy(s){return this.state.sortCriterion===s},enable(){o(We(r))},disable(){o(ve(r))},get state(){let s=a(),u=Dt(e.state,r),c=s.sortCriteria,l=s.resultsMustMatch,d=u?u.values:[],f=Jt(e.state),p=i(),m=d.some(g=>g.state!=="idle");return{facetId:r,values:d,sortCriterion:c,resultsMustMatch:l,hasActiveValues:m,isLoading:f,enabled:p}}}}function xl(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}var bl=["idle","selected","excluded"];var Fl=["ascending","descending"],Rl=["even","equiprobable"];var vk={start:new w,end:new w,endInclusive:new K,state:new w({constrainTo:bl})},xk=new ee({facetId:pr,field:fr,generateAutomaticRanges:Hu,filterFacetCount:mr,injectionDepth:gr,numberOfValues:Qt,currentValues:new X({each:new q({values:vk})}),sortCriteria:new w({constrainTo:Fl}),rangeAlgorithm:new w({constrainTo:Rl})});function Al(e,t){ge(e,xk,t,"buildDateFacet"),Wu(t)}function ov(e,t){if(!bk(e))throw I;xl(t.options,"buildDateFacet");let r=e.dispatch,a=Ye(e,t.options),n={currentValues:[],...t.options,facetId:a};Al(e,n),r(yr(n));let o=vl(e,{facetId:a,getRequest:()=>e.state.dateFacetSet[a].request});return{...o,toggleSelect:i=>r(tv({facetId:a,selection:i})),toggleSingleSelect:function(i){i.state==="idle"&&r(xe(a)),this.toggleSelect(i)},toggleExclude:i=>r(rv({facetId:a,selection:i})),toggleSingleExclude:function(i){i.state==="idle"&&r(xe(a)),this.toggleExclude(i)},get state(){return o.state}}}function bk(e){return e.addReducers({configuration:z,search:J,dateFacetSet:Fr,facetOptions:Ne}),!0}function iv(e,t){let r=ov(e,t),a=e.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:o=>new U(()=>o).getFacetClearAllMetadata(n())}}))},sortBy(o){r.sortBy(o),a(E({legacy:lr({facetId:n(),criterion:o}),next:{actionCause:L.facetUpdateSort,getEventExtraPayload:i=>new U(()=>i).getFacetSortMetadata(n(),o)}}))},toggleSelect:o=>{r.toggleSelect(o),a(E({legacy:ul(n(),o),next:ll(n(),o)}))},toggleExclude:o=>{r.toggleExclude(o),a(E({legacy:ZC(n(),o)}))},get state(){return r.state}}}var vt=T(Gt(),e=>{e.addCase(vr,(t,r)=>{let{payload:a}=r,n=Fk(a);ml(t,Uh(n))}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.numericFacetSet)!=null?n:t}).addCase(ue,(t,r)=>{let a=r.payload.nf||{};yl(t,a)}).addCase(xr,(t,r)=>{let{facetId:a,selection:n}=r.payload;hl(t,a,n)}).addCase(Aa,(t,r)=>{let{facetId:a,selection:n}=r.payload;Sl(t,a,n)}).addCase(Hr,(t,r)=>{let{facetId:a,values:n}=r.payload;gl(t,a,n)}).addCase(Zu,(t,r)=>{wa(t,r.payload)}).addCase(Re,t=>{Object.keys(t).forEach(r=>{wa(t,r)})}).addCase(Xu,(t,r)=>{To(t,r.payload)}).addCase(E.fulfilled,(t,r)=>{let a=r.payload.response.facets;Go(t,a,sv)}).addCase(Pa.fulfilled,(t,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];Go(t,a,sv)}).addCase(ve,(t,r)=>{wa(t,r.payload)})});function Fk(e){return{...fl,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function sv(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}var cv={facetId:te,selection:new q({values:pn})},uv=ae("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,cv),t(xr(e)),t(dl(e)),t(ie())}),w8=ae("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,cv),t(Aa(e)),t(pl(e)),t(ie())});var Rk={start:new D,end:new D,endInclusive:new K,state:new w({constrainTo:bl})},Ak=new ee({facetId:pr,field:fr,generateAutomaticRanges:Hu,filterFacetCount:mr,injectionDepth:gr,numberOfValues:Qt,currentValues:new X({each:new q({values:Rk})}),sortCriteria:new w({constrainTo:Fl}),resultsMustMatch:new w({constrainTo:zo}),rangeAlgorithm:new w({constrainTo:Rl})});function Pl(e,t){ge(e,Ak,t,"buildNumericFacet"),Ju(t)}function Wo(e){return{endInclusive:!1,state:"idle",...e}}function lv(e,t){if(!Pk(e))throw I;xl(t.options,"buildNumericFacet");let r=e.dispatch,a=Ye(e,t.options),n={currentValues:[],...t.options,facetId:a};Pl(e,n),r(vr(n));let o=vl(e,{facetId:a,getRequest:()=>e.state.numericFacetSet[a].request});return{...o,toggleSelect:i=>r(uv({facetId:a,selection:i})),toggleSingleSelect(i){i.state==="idle"&&r(xe(a)),this.toggleSelect(i)},get state(){return o.state}}}function Pk(e){return e.addReducers({numericFacetSet:vt,facetOptions:Ne,configuration:z,search:J}),!0}function dv(e,t){if(!wk(e))throw I;let r=lv(e,t),a=e.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:o=>new U(()=>o).getFacetClearAllMetadata(n())}}))},sortBy(o){r.sortBy(o),a(E({legacy:lr({facetId:n(),criterion:o}),next:{actionCause:L.facetUpdateSort,getEventExtraPayload:i=>new U(()=>i).getFacetSortMetadata(n(),o)}}))},toggleSelect:o=>{r.toggleSelect(o),a(E({legacy:ul(n(),o),next:ll(n(),o)}))},get state(){return{...r.state}}}}function wk(e){return e.addReducers({numericFacetSet:vt,configuration:z,search:J}),!0}function Ek(e,t){return!!t&&t.facetId in e.numericFacetSet}var pv=(e,t)=>{let r=Dt(e,t);if(Ek(e,r))return r},fv=(e,t)=>(pv(e,t)||{values:[]}).values.filter(a=>a.state!=="idle"),mv=(e,t)=>(pv(e,t)||{values:[]}).values.filter(a=>a.state==="selected");function gv(e,t){var u;if(!Ik(e))throw I;let r=V(e),{dispatch:a}=e,n=()=>e.state,o=Ye(e,t.options),i={...t.options,currentValues:((u=t.initialState)==null?void 0:u.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Pl(e,i),a(vr(i));let s=()=>dr(e.state,o);return{...r,clear:()=>{a(Hr({facetId:o,values:[]})),a(ie())},setRange:c=>{let l={...c,state:"selected",numberOfResults:0,endInclusive:!0},d=Hr({facetId:o,values:[l]});return d.error?!1:(a(d),a(ie()),!0)},enable(){a(We(o))},disable(){a(ve(o))},get state(){let c=Jt(n()),l=s(),d=mv(n(),o),f=d.length?d[0]:void 0;return{facetId:o,isLoading:c,range:f,enabled:l}}}}function Ik(e){return e.addReducers({numericFacetSet:vt,facetOptions:Ne,configuration:z,search:J}),!0}function hv(e,t){if(!kk(e))throw I;let r=gv(e,t),{dispatch:a}=e,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:o=>new U(()=>o).getFacetClearAllMetadata(n())}}))},setRange:o=>{let i=r.setRange(o);return i&&a(E({legacy:Pe({facetId:n(),facetValue:`${o.start}..${o.end}`}),next:{actionCause:L.facetSelect,getEventExtraPayload:s=>new U(()=>s).getFacetMetadata(n(),`${o.start}..${o.end}`)}})),i},get state(){return{...r.state}}}}function kk(e){return e.addReducers({numericFacetSet:vt,configuration:z,search:J}),!0}function Ok(e,t){return!!t&&t.facetId in e.dateFacetSet}var Sv=(e,t)=>{let r=Dt(e,t);if(Ok(e,r))return r},yv=(e,t)=>(Sv(e,t)||{values:[]}).values.filter(a=>a.state==="selected"),Cv=(e,t)=>(Sv(e,t)||{values:[]}).values.filter(a=>a.state!=="idle");function vv(e,t){var u;if(!qk(e))throw I;let r=V(e),{dispatch:a}=e,n=()=>e.state,o=Ye(e,t.options),i={...t.options,currentValues:((u=t.initialState)==null?void 0:u.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Al(e,i),a(yr(i));let s=()=>dr(e.state,o);return{...r,clear:()=>{a($r({facetId:o,values:[]})),a(ie())},setRange:c=>{let l={...c,state:"selected",numberOfResults:0,endInclusive:!0},d=$r({facetId:o,values:[l]});return d.error?!1:(a(d),a(ie()),!0)},enable(){a(We(o))},disable(){a(ve(o))},get state(){let c=Jt(n()),l=s(),d=yv(n(),o),f=d.length?d[0]:void 0;return{facetId:o,isLoading:c,range:f,enabled:l}}}}function qk(e){return e.addReducers({dateFacetSet:Fr,facetOptions:Ne,configuration:z,search:J}),!0}function xv(e,t){if(!Tk(e))throw I;let r=vv(e,t),{dispatch:a}=e,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(E({legacy:Me(n()),next:{actionCause:L.facetClearAll,getEventExtraPayload:o=>new U(()=>o).getFacetClearAllMetadata(n())}}))},setRange:o=>{let i=r.setRange(o);return i&&a(E({legacy:Pe({facetId:n(),facetValue:`${o.start}..${o.end}`}),next:{actionCause:L.facetSelect,getEventExtraPayload:s=>new U(()=>s).getFacetMetadata(n(),`${o.start}..${o.end}`)}})),i},get state(){return{...r.state}}}}function Tk(e){return e.addReducers({dateFacetSet:Fr,configuration:z,search:J}),!0}var bv=e=>{let t=Dk(e),{view:r,user:a,...n}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,...n,context:{user:a,view:r,cart:e.cart.cartItems.map(o=>e.cart.cart[o])},facets:t,...e.commercePagination&&{page:e.commercePagination.page},...e.commerceSort&&{sort:Vk(e.commerceSort.appliedSort)}}};function Dk(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.map(t=>e.commerceFacetSet[t].request).filter(t=>t.values.length>0)}function Vk(e){if(!!e)return e.by===kt.Relevance?{sortCriteria:kt.Relevance}:{sortCriteria:kt.Fields,fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}var Fv=()=>oy("analytics/commerce/productListing/load",e=>e.makeInterfaceLoad(),e=>new Wn(e));var Rv=ae("commerce/productListing/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let o=t(),{apiClient:i}=n,s=await i.getProductListing(bv(o));return Fe(s)?(r(yt(s.error)),a(s.error)):{response:s.success,analyticsAction:Fv()}});var wl=T(aa(),e=>{e.addCase(E.fulfilled,(t,r)=>r.payload.response.facets.map(a=>a.facetId)).addCase(Rv.fulfilled,(t,r)=>{let a=n=>{var o;return(o=n.facetId)!=null?o:n.field};return r.payload.response.facets.map(a)}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOrder)!=null?n:t})});var El=()=>k("history/analytics/forward",e=>e.makeSearchEvent("historyForward")),Il=()=>k("history/analytics/backward",e=>e.makeSearchEvent("historyBackward")),kl=()=>k("history/analytics/noresultsback",e=>e.makeNoResultsBack());var Mk=Object.getOwnPropertyNames,Nk=Object.getOwnPropertySymbols,Lk=Object.prototype.hasOwnProperty;function Av(e,t){return function(a,n,o){return e(a,n,o)&&t(a,n,o)}}function Ol(e){return function(r,a,n){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,n);var o=n.cache,i=o.get(r),s=o.get(a);if(i&&s)return i===a&&s===r;o.set(r,a),o.set(a,r);var u=e(r,a,n);return o.delete(r),o.delete(a),u}}function Pv(e){return Mk(e).concat(Nk(e))}var wv=Object.hasOwn||function(e,t){return Lk.call(e,t)};function Yo(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var Ev="_owner",Iv=Object.getOwnPropertyDescriptor,kv=Object.keys;function Qk(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function Bk(e,t){return Yo(e.getTime(),t.getTime())}function Ov(e,t,r){if(e.size!==t.size)return!1;for(var a={},n=e.entries(),o=0,i,s;(i=n.next())&&!i.done;){for(var u=t.entries(),c=!1,l=0;(s=u.next())&&!s.done;){var d=i.value,f=d[0],p=d[1],m=s.value,g=m[0],y=m[1];!c&&!a[l]&&(c=r.equals(f,g,o,l,e,t,r)&&r.equals(p,y,f,g,e,t,r))&&(a[l]=!0),l++}if(!c)return!1;o++}return!0}function jk(e,t,r){var a=kv(e),n=a.length;if(kv(t).length!==n)return!1;for(var o;n-- >0;)if(o=a[n],o===Ev&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!wv(t,o)||!r.equals(e[o],t[o],o,o,e,t,r))return!1;return!0}function Os(e,t,r){var a=Pv(e),n=a.length;if(Pv(t).length!==n)return!1;for(var o,i,s;n-- >0;)if(o=a[n],o===Ev&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!wv(t,o)||!r.equals(e[o],t[o],o,o,e,t,r)||(i=Iv(e,o),s=Iv(t,o),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function Uk(e,t){return Yo(e.valueOf(),t.valueOf())}function _k(e,t){return e.source===t.source&&e.flags===t.flags}function qv(e,t,r){if(e.size!==t.size)return!1;for(var a={},n=e.values(),o,i;(o=n.next())&&!o.done;){for(var s=t.values(),u=!1,c=0;(i=s.next())&&!i.done;)!u&&!a[c]&&(u=r.equals(o.value,i.value,o.value,i.value,e,t,r))&&(a[c]=!0),c++;if(!u)return!1}return!0}function $k(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var Hk="[object Arguments]",zk="[object Boolean]",Gk="[object Date]",Wk="[object Map]",Yk="[object Number]",Kk="[object Object]",Jk="[object RegExp]",Xk="[object Set]",Zk="[object String]",eO=Array.isArray,Tv=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Dv=Object.assign,tO=Object.prototype.toString.call.bind(Object.prototype.toString);function rO(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areMapsEqual,n=e.areObjectsEqual,o=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,s=e.areSetsEqual,u=e.areTypedArraysEqual;return function(l,d,f){if(l===d)return!0;if(l==null||d==null||typeof l!="object"||typeof d!="object")return l!==l&&d!==d;var p=l.constructor;if(p!==d.constructor)return!1;if(p===Object)return n(l,d,f);if(eO(l))return t(l,d,f);if(Tv!=null&&Tv(l))return u(l,d,f);if(p===Date)return r(l,d,f);if(p===RegExp)return i(l,d,f);if(p===Map)return a(l,d,f);if(p===Set)return s(l,d,f);var m=tO(l);return m===Gk?r(l,d,f):m===Jk?i(l,d,f):m===Wk?a(l,d,f):m===Xk?s(l,d,f):m===Kk?typeof l.then!="function"&&typeof d.then!="function"&&n(l,d,f):m===Hk?n(l,d,f):m===zk||m===Yk||m===Zk?o(l,d,f):!1}}function aO(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,n={areArraysEqual:a?Os:Qk,areDatesEqual:Bk,areMapsEqual:a?Av(Ov,Os):Ov,areObjectsEqual:a?Os:jk,arePrimitiveWrappersEqual:Uk,areRegExpsEqual:_k,areSetsEqual:a?Av(qv,Os):qv,areTypedArraysEqual:a?Os:$k};if(r&&(n=Dv({},n,r(n))),t){var o=Ol(n.areArraysEqual),i=Ol(n.areMapsEqual),s=Ol(n.areObjectsEqual),u=Ol(n.areSetsEqual);n=Dv({},n,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:u})}return n}function nO(e){return function(t,r,a,n,o,i,s){return e(t,r,s)}}function oO(e){var t=e.circular,r=e.comparator,a=e.createState,n=e.equals,o=e.strict;if(a)return function(u,c){var l=a(),d=l.cache,f=d===void 0?t?new WeakMap:void 0:d,p=l.meta;return r(u,c,{cache:f,equals:n,meta:p,strict:o})};if(t)return function(u,c){return r(u,c,{cache:new WeakMap,equals:n,meta:void 0,strict:o})};var i={cache:void 0,equals:n,meta:void 0,strict:o};return function(u,c){return r(u,c,i)}}var o7=Rr(),i7=Rr({strict:!0}),s7=Rr({circular:!0}),c7=Rr({circular:!0,strict:!0}),u7=Rr({createInternalComparator:function(){return Yo}}),l7=Rr({strict:!0,createInternalComparator:function(){return Yo}}),d7=Rr({circular:!0,createInternalComparator:function(){return Yo}}),p7=Rr({circular:!0,createInternalComparator:function(){return Yo},strict:!0});function Rr(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,a=e.createInternalComparator,n=e.createState,o=e.strict,i=o===void 0?!1:o,s=aO(e),u=rO(s),c=a?a(u):nO(u);return oO({circular:r,comparator:u,createState:n,equals:c,strict:i})}function gn(e,t,r=(a,n)=>a===n){return e.length===t.length&&e.findIndex((a,n)=>!r(t[n],a))===-1}function iO(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(a=>qs(r,a))!==-1)}var qs=Rr({createCustomConfig:e=>({...e,areArraysEqual:iO})});var sO=T(Bc(),e=>{e.addCase(Vt,(t,r)=>cO(t,r.payload)?void 0:r.payload)}),cO=(e,t)=>uO(e.context,t.context)&&lO(e.dictionaryFieldContext,t.dictionaryFieldContext)&&SO(e.advancedSearchQueries,t.advancedSearchQueries)&&dO(e.tabSet,t.tabSet)&&pO(e.staticFilterSet,t.staticFilterSet)&&Uf(e.facetSet,t.facetSet)&&Uf(e.dateFacetSet,t.dateFacetSet)&&Uf(e.numericFacetSet,t.numericFacetSet)&&mO(e.automaticFacetSet,t.automaticFacetSet)&&fO(e.categoryFacetSet,t.categoryFacetSet)&&gO(e.pagination,t.pagination)&&hO(e.query,t.query)&&yO(e,t)&&CO(e.pipeline,t.pipeline)&&vO(e.searchHub,t.searchHub)&&xO(e.facetOrder,t.facetOrder)&&bO(e.debug,t.debug),uO=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),lO=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),dO=(e,t)=>{let r=Vv(e),a=Vv(t);return(r==null?void 0:r.id)===(a==null?void 0:a.id)},Vv=e=>Object.values(e).find(t=>t.isActive),pO=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let n=Mv(e[r]),o=Mv(a);if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},Mv=e=>e.values.filter(t=>t.state!=="idle"),Uf=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let n=e[r].request.currentValues.filter(i=>i.state!=="idle"),o=a.request.currentValues.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},fO=(e,t)=>{var r;for(let[a,n]of Object.entries(t)){if(!e[a])return!1;let o=ut((r=e[a])==null?void 0:r.request.currentValues).map(({value:s})=>s),i=ut(n==null?void 0:n.request.currentValues).map(({value:s})=>s);if(JSON.stringify(o)!==JSON.stringify(i))return!1}return!0},mO=(e,t)=>{for(let[r,a]of Object.entries(t.set)){if(!e.set[r])return!1;let n=e.set[r].response.values.filter(i=>i.state!=="idle"),o=a.response.values.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},gO=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,hO=(e,t)=>JSON.stringify(e)===JSON.stringify(t),SO=(e,t)=>JSON.stringify(e)===JSON.stringify(t),yO=(e,t)=>e.sortCriteria===t.sortCriteria,CO=(e,t)=>e===t,vO=(e,t)=>e===t,xO=(e,t)=>gn(e,t),bO=(e,t)=>e===t,ql=Gh({actionTypes:{redo:gf.type,undo:mf.type,snapshot:Vt.type},reducer:sO});function Nv(e){if(!FO(e))throw I;let t=V(e),{dispatch:r}=e,a=()=>e.state,n=o=>o.past.length>0&&!oe(o.present);return{...t,get state(){return a().history},async back(){!n(this.state)||(await r(ys()),r(E({legacy:Il(),next:{actionCause:L.historyBackward,getEventExtraPayload:o=>new U(()=>o).getBaseMetadata()}})))},async forward(){!this.state.future.length||!this.state.present||(await r(pu()),r(E({legacy:El(),next:{actionCause:L.historyForward,getEventExtraPayload:o=>new U(()=>o).getBaseMetadata()}})))},async backOnNoResults(){!n(this.state)||(await r(ys()),r(E({legacy:kl(),next:{actionCause:L.noResultsBack,getEventExtraPayload:o=>new U(()=>o).getBaseMetadata()}})))}}}function FO(e){return e.addReducers({history:ql,configuration:z,facetOrder:wl}),!0}var RO=new D({min:Kh,default:Lc,required:!1}),AO=new D({min:Wh,max:Yh,default:Nc,required:!1}),PO={desiredCount:AO,numberOfValues:RO},Tl=v("automaticFacet/setOptions",e=>b(e,PO)),Dl=v("automaticFacet/deselectAll",e=>b(e,te)),wO=O,Ea=v("automaticFacet/toggleSelectValue",e=>b(e,{field:wO,selection:new q({values:un})}));var Ar=T(Be(),e=>{e.addCase(co,(t,r)=>{let a=_f(t),n=r.payload;t.defaultNumberOfResults=t.numberOfResults=n,t.firstResult=Ts(a,n)}).addCase(uo,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(Mt,t=>{t.firstResult=0}).addCase(lo,(t,r)=>{let a=r.payload;t.firstResult=Ts(a,t.numberOfResults)}).addCase(St,(t,r)=>{let a=r.payload;t.firstResult=Ts(a,t.numberOfResults)}).addCase(fo,t=>{let r=_f(t),a=Math.max(r-1,Za);t.firstResult=Ts(a,t.numberOfResults)}).addCase(po,t=>{let r=_f(t),a=EO(t),n=Math.min(r+1,a);t.firstResult=Ts(n,t.numberOfResults)}).addCase(ce.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(ue,(t,r)=>{var a,n;t.firstResult=(a=r.payload.firstResult)!=null?a:t.firstResult,t.numberOfResults=(n=r.payload.numberOfResults)!=null?n:t.defaultNumberOfResults}).addCase(E.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.totalCountFiltered}).addCase(Pa.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.pagination.totalCount}).addCase(xe,t=>{xt(t)}).addCase(Sr,t=>{xt(t)}).addCase(sr,t=>{xt(t)}).addCase(va,t=>{xt(t)}).addCase(Oo,t=>{xt(t)}).addCase(Cr,t=>{xt(t)}).addCase(xr,t=>{xt(t)}).addCase(Re,t=>{xt(t)}).addCase($r,t=>{xt(t)}).addCase(Hr,t=>{xt(t)}).addCase(cn,t=>{xt(t)}).addCase(Ea,t=>{xt(t)})});function xt(e){e.firstResult=Be().firstResult}function _f(e){let{firstResult:t,numberOfResults:r}=e;return $f(t,r)}function EO(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Hf(t,r)}function Ts(e,t){return(e-1)*t}function $f(e,t){return Math.round(e/t)+1}function Hf(e,t){let r=Math.min(e,bs);return Math.ceil(r/t)}function IO(e){return e.pagination.firstResult}function Lv(e){return e.pagination.numberOfResults}function kO(e){return e.pagination.totalCountFiltered}var zr=e=>{let t=IO(e),r=Lv(e);return $f(t,r)},Ds=e=>{let t=kO(e),r=Lv(e);return Hf(t,r)},Vl=(e,t)=>{let r=zr(e),a=Ds(e),n=OO(r,t);return n=qO(n),n=TO(n,a),DO(n)};function OO(e,t){let r=t%2==0,a=Math.floor(t/2),n=r?a-1:a,o=e-a,i=e+n;return{start:o,end:i}}function qO(e){let t=Math.max(Za-e.start,0),r=e.start+t,a=e.end+t;return{start:r,end:a}}function TO(e,t){let r=Math.max(e.end-t,0),a=Math.max(e.start-r,Za),n=e.end-r;return{start:a,end:n}}function DO(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var Ko=()=>k("analytics/pager/resize",(e,t)=>{var r;return e.makePagerResize({currentResultsPerPage:((r=t.pagination)==null?void 0:r.numberOfResults)||Be().numberOfResults})}),Jo=()=>k("analytics/pager/number",(e,t)=>e.makePagerNumber({pagerNumber:zr(t)})),Ml=()=>k("analytics/pager/next",(e,t)=>e.makePagerNext({pagerNumber:zr(t)})),Nl=()=>k("analytics/pager/previous",(e,t)=>e.makePagerPrevious({pagerNumber:zr(t)}));var VO=new ee({numberOfPages:new D({default:5,min:0})}),MO=new ee({page:new D({min:1})});function Qv(e,t={}){if(!NO(e))throw I;let r=V(e),{dispatch:a}=e,n=ge(e,VO,t.options,"buildPager"),i=ke(e,MO,t.initialState,"buildPager").page;i&&a(lo(i));let s=()=>zr(e.state),u=()=>{let{numberOfPages:l}=n;return Vl(e.state,l)},c=()=>Ds(e.state);return{...r,get state(){let l=s(),d=c(),f=l>Za&&d>0,p=l<d;return{currentPage:l,currentPages:u(),maxPage:d,hasPreviousPage:f,hasNextPage:p}},selectPage(l){a(St(l))},nextPage(){a(po())},previousPage(){a(fo())},isCurrentPage(l){return l===this.state.currentPage}}}function NO(e){return e.addReducers({configuration:z,pagination:Ar}),!0}function Bv(e,t={}){let{dispatch:r}=e,a=Qv(e,t);return{...a,get state(){return a.state},selectPage(n){a.selectPage(n),r(nr({legacy:Jo()}))},nextPage(){a.nextPage(),r(nr({legacy:Ml()}))},previousPage(){a.previousPage(),r(nr({legacy:Nl()}))}}}function jv(e){if(!LO(e))throw I;let t=V(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function LO(e){return e.addReducers({search:J}),!0}function Uv(e){return jv(e)}function Xo(e){if(!QO(e))throw I;let t=V(e),r=()=>e.state;return{...t,get state(){let a=r();return{hasError:a.search.error!==null,isLoading:a.search.isLoading,hasResults:!!a.search.results.length,firstSearchExecuted:Fs(a)}}}}function QO(e){return e.addReducers({search:J}),!0}function _v(e){if(!BO(e))throw I;let t=V(e),r=Xo(e),a=()=>e.state,n=()=>{let o=a().search.duration/1e3;return Math.round((o+Number.EPSILON)*100)/100};return{...t,get state(){return{...r.state,durationInMilliseconds:a().search.duration,durationInSeconds:n(),firstResult:a().pagination.firstResult+1,hasDuration:a().search.duration!==0,hasQuery:a().search.queryExecuted!=="",lastResult:a().pagination.firstResult+a().search.results.length,query:a().search.queryExecuted,total:a().pagination.totalCountFiltered}}}}function BO(e){return e.addReducers({search:J,pagination:Ar}),!0}function $v(e){return _v(e)}var jO=new ee({fieldsToInclude:new X({required:!1,each:new w({required:!0,emptyAllowed:!1})})});function Ll(e,t){if(!UO(e))throw I;let r=V(e),a=Xo(e),{dispatch:n}=e,o=()=>e.state,i=ge(e,jO,t==null?void 0:t.options,"buildCoreResultList");i.fieldsToInclude&&n(ha(i.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,u=0,c=0,l=5,d=200,f=!1;return{...r,get state(){let m=o();return{...a.state,results:m.search.results,moreResultsAvailable:s(),searchResponseId:m.search.searchResponseId}},fetchMoreResults:()=>{if(e.state.search.isLoading)return;if(!s()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-u<d){if(c++,c>=l){u=Date.now(),!f&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${l} times, with little delay. Please verify the conditions under which the function is called.`),f=!0;return}}else c=0;f=!1,(t==null?void 0:t.fetchMoreResultsActionCreator)&&n(t==null?void 0:t.fetchMoreResultsActionCreator()).then(()=>u=Date.now())}}}function UO(e){return e.addReducers({search:J,configuration:z,fields:Ca}),!0}function Hv(e,t){return Ll(e,{...t,fetchMoreResultsActionCreator:ga})}var _O={results:new X({required:!0,each:new q({values:Jn})}),maxLength:new D({required:!0,min:1,default:10})},Zo=v("recentResults/registerRecentResults",e=>b(e,_O)),bt=v("recentResults/pushRecentResult",e=>(nt(e),{payload:e})),ei=v("recentResults/clearRecentResults");var Ql=e=>k({prefix:"analytics/result/open",__legacy__getBuilder:(t,r)=>(nt(e),t.makeDocumentOpen(Te(e,r),_e(e))),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{var n,o;let r=Te(e,t),a=_e(e);return{searchUid:(o=(n=t.search)==null?void 0:n.response.searchUid)!=null?o:"",position:r.documentPosition,itemMetadata:{uniqueFieldName:a.contentIDKey,uniqueFieldValue:a.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});function ot(e,t,r){if(!$O(e))throw I;let a=1e3,n={selectionDelay:a,debounceWait:a,...t.options},o;return{select:ku(r,n.debounceWait,{isImmediate:!0}),beginDelayedSelect(){o=setTimeout(r,n.selectionDelay)},cancelPendingSelect(){o&&clearTimeout(o)}}}function $O(e){return e.addReducers({configuration:z}),!0}function zv(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch(Ql(t.options.result)))};return ot(e,t,()=>{a(),e.dispatch(bt(t.options.result))})}function Gv(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch(fy(t.options.result)))};return ot(e,t,()=>{a(),e.dispatch(bt(t.options.result))})}var HO=new ee({numberOfResults:new D({min:0})});function Wv(e,t={}){if(!zO(e))throw I;let r=V(e),{dispatch:a}=e,n=()=>e.state,i=ke(e,HO,t.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&a(co(i)),{...r,get state(){return{numberOfResults:n().pagination.numberOfResults}},set(s){a(uo(s))},isSetTo(s){return s===this.state.numberOfResults}}}function zO(e){return e.addReducers({pagination:Ar,configuration:z}),!0}function Yv(e,t={}){if(!GO(e))throw I;let r=Wv(e,t),{dispatch:a}=e;return{...r,get state(){return{...r.state}},set(n){r.set(n),a(nr({legacy:Ko()}))}}}function GO(e){return e.addReducers({pagination:Ar,configuration:z}),!0}var Vs={id:O},ti=v("querySuggest/register",e=>b(e,{...Vs,count:new D({min:0})})),Kv=v("querySuggest/unregister",e=>b(e,Vs)),Pr=v("querySuggest/selectSuggestion",e=>b(e,{...Vs,expression:me})),Ia=v("querySuggest/clear",e=>b(e,Vs)),ka=ae("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(e,Vs);let o=e.id,i=await WO(o,t()),s=await a.querySuggest(i);return Fe(s)?r(s.error):{id:o,q:i.q,...s.success}}),WO=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Xt.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await mt(t.configuration.analytics),...t.configuration.analytics.enabled&&await mo(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var Oa=()=>k("analytics/searchbox/submit",e=>e.makeSearchboxSubmit());var Jv={id:O,query:me},ri=v("querySet/register",e=>b(e,Jv)),hn=v("querySet/update",e=>b(e,Jv));var ai=T(za(),e=>{e.addCase(ri,(t,r)=>{let{id:a,query:n}=r.payload;a in t||(t[a]=n)}).addCase(hn,(t,r)=>{let{id:a,query:n}=r.payload;zf(t,a,n)}).addCase(Pr,(t,r)=>{let{id:a,expression:n}=r.payload;zf(t,a,n)}).addCase(E.fulfilled,(t,r)=>{let{queryExecuted:a}=r.payload;Xv(t,a)}).addCase(ue,(t,r)=>{oe(r.payload.q)||Xv(t,r.payload.q)}).addCase(ce.fulfilled,(t,r)=>{if(!!r.payload)for(let[a,n]of Object.entries(r.payload.querySet))zf(t,a,n)})});function Xv(e,t){Object.keys(e).forEach(r=>e[r]=t)}var zf=(e,t,r)=>{t in e&&(e[t]=r)};var Bl=e=>k("analytics/querySuggest",(t,r)=>{let a=Gf(r,e);return t.makeOmniboxAnalytics(a)});function Gf(e,t){let{id:r,suggestion:a}=t,n=e.querySuggest&&e.querySuggest[r];if(!n)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let o=n.completions.map(c=>c.expression),i=n.partialQueries.length-1,s=n.partialQueries[i]||"",u=n.responseId;return{suggestionRanking:o.indexOf(a),partialQuery:s,partialQueries:n.partialQueries,suggestions:o,querySuggestResponseId:u}}var ni=T(Mp(),e=>e.addCase(ti,(t,r)=>{let a=r.payload.id;a in t||(t[a]=YO(r.payload))}).addCase(Kv,(t,r)=>{delete t[r.payload.id]}).addCase(ka.pending,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.currentRequestId=r.meta.requestId,a.isLoading=!0)}).addCase(ka.fulfilled,(t,r)=>{let a=t[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{q:n}=r.payload;n&&a.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions,a.isLoading=!1,a.error=null}).addCase(ka.rejected,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.error=r.payload||null,a.isLoading=!1)}).addCase(Ia,(t,r)=>{let a=t[r.payload.id];!a||(a.responseId="",a.completions=[],a.partialQueries=[])}));function YO(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}var Ft=T(Ce(),e=>e.addCase(Ge,(t,r)=>({...t,...r.payload})).addCase(Ct,(t,r)=>{t.q=r.payload}).addCase(Pr,(t,r)=>{t.q=r.payload.expression}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.query)!=null?n:t}).addCase(ue,(t,r)=>{var a,n;t.q=(a=r.payload.q)!=null?a:t.q,t.enableQuerySyntax=(n=r.payload.enableQuerySyntax)!=null?n:t.enableQuerySyntax}));var jl={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},Wf={open:new w,close:new w},Yf={id:O,numberOfSuggestions:new D({min:0}),enableQuerySyntax:new K,highlightOptions:new q({values:{notMatchDelimiters:new q({values:Wf}),exactMatchDelimiters:new q({values:Wf}),correctionDelimiters:new q({values:Wf})}}),clearFilters:new K},Zv=new ee(Yf);function ex(e,t){var c,l;if(!JO(e))throw I;let r=V(e),{dispatch:a}=e,n=()=>e.state,o=((c=t.options)==null?void 0:c.id)||In("search_box"),i={id:o,highlightOptions:{...(l=t.options)==null?void 0:l.highlightOptions},...jl,...t.options};ge(e,Zv,i,"buildSearchBox"),a(ri({id:o,query:e.state.query.q})),i.numberOfSuggestions&&a(ti({id:o,count:i.numberOfSuggestions}));let s=()=>e.state.querySet[i.id],u=async d=>{let{enableQuerySyntax:f,clearFilters:p}=i;a(Eu({q:s(),enableQuerySyntax:f,clearFilters:p})),t.isNextAnalyticsReady?a(t.executeSearchActionCreator(d)):a(t.executeSearchActionCreator(d.legacy))};return{...r,updateText(d){a(hn({id:o,query:d})),this.showSuggestions()},clear(){a(hn({id:o,query:""})),a(Ia({id:o}))},showSuggestions(){i.numberOfSuggestions&&a(t.fetchQuerySuggestionsActionCreator({id:o}))},selectSuggestion(d){a(Pr({id:o,expression:d})),u({legacy:Bl({id:o,suggestion:d}),next:{actionCause:L.omniboxAnalytics,getEventExtraPayload:f=>new U(()=>f).getOmniboxAnalyticsMetadata(o,d)}}).then(()=>{a(Ia({id:o}))})},submit(d=Oa()){u({legacy:d}),a(Ia({id:o}))},get state(){let d=n(),f=d.querySuggest[i.id],p=KO(f,i.highlightOptions),m=f?f.isLoading:!1;return{value:s(),suggestions:p,isLoading:d.search.isLoading,isLoadingSuggestions:m}}}}function KO(e,t){return e?e.completions.map(r=>({highlightedValue:Qp(r.highlighted,t),rawValue:r.expression})):[]}function JO(e){return e.addReducers({query:Ft,querySuggest:ni,configuration:z,querySet:ai,search:J}),!0}function Ul(e,t={}){let r=ex(e,{...t,executeSearchActionCreator:E,fetchQuerySuggestionsActionCreator:ka,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(Oa())},get state(){return r.state}}}var _l=T(Qn(),e=>{e.addCase(io,(t,r)=>{let{id:a}=r.payload;t[a]||(t[a]={q:"",cache:{}})}),e.addCase(rr,(t,r)=>{let{q:a,id:n}=r.payload;!a||(t[n].q=a)}),e.addCase(so,(t,r)=>{let{id:a}=r.payload;Object.entries(t[a].cache).forEach(([n,o])=>{Qc(o)&&delete t[a].cache[n]})}),e.addCase(Ro.pending,(t,r)=>{for(let n in t)for(let o in t[n].cache)t[n].cache[o].isActive=!1;if(!$l(t,r.meta)){XO(t,r.meta);return}let a=$l(t,r.meta);a.isLoading=!0,a.isActive=!0,a.error=null}),e.addCase(Ro.fulfilled,(t,r)=>{let{results:a,searchUid:n,totalCountFiltered:o,duration:i}=r.payload,{cacheTimeout:s}=r.meta.arg,u=$l(t,r.meta);u.isActive=!0,u.searchUid=n,u.isLoading=!1,u.error=null,u.results=a,u.expiresAt=s?s+Date.now():0,u.totalCountFiltered=o,u.duration=i}),e.addCase(Ro.rejected,(t,r)=>{let a=$l(t,r.meta);a.error=r.error||null,a.isLoading=!1,a.isActive=!1})}),XO=(e,t)=>{let{q:r,id:a}=t.arg;e[a].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},$l=(e,t)=>{let{q:r,id:a}=t.arg;return e[a].cache[r]||null};var ZO={searchBoxId:Se,maxResultsPerQuery:new D({required:!0,min:1}),cacheTimeout:new D},tx=new ee(ZO);function rx(e,t){if(!eq(e))throw I;let r=V(e),{dispatch:a}=e,n=()=>e.state,o={searchBoxId:t.options.searchBoxId||In("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};ge(e,tx,o,"buildInstantResults");let i=o.searchBoxId;a(io({id:i}));let s=()=>n().instantResults[i],u=d=>s().cache[d],c=()=>s().q,l=()=>{let d=u(c());return d?d.isLoading?[]:d.results:[]};return{...r,updateQuery(d){if(!d)return;let f=u(d);(!f||!f.isLoading&&(f.error||Qc(f)))&&a(Ro({id:i,q:d,maxResultsPerQuery:o.maxResultsPerQuery,cacheTimeout:o.cacheTimeout})),a(rr({id:i,q:d}))},clearExpired(){a(so({id:i}))},get state(){let d=c(),f=u(d);return{q:d,isLoading:(f==null?void 0:f.isLoading)||!1,error:(f==null?void 0:f.error)||null,results:l()}}}}function eq(e){return e.addReducers({instantResults:_l}),!0}var oi=()=>k("analytics/sort/results",(e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||Ke()}));var ax={by:new It({enum:Ot,required:!0})},ii=v("sortCriteria/register",e=>nx(e)),si=v("sortCriteria/update",e=>nx(e)),nx=e=>wn(e)?(e.forEach(t=>b(t,ax)),{payload:e}):b(e,ax);var Hl=T(Ke(),e=>{e.addCase(ii,(t,r)=>Wt(r.payload)).addCase(si,(t,r)=>Wt(r.payload)).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.sortCriteria)!=null?n:t}).addCase(ue,(t,r)=>{var a;return(a=r.payload.sortCriteria)!=null?a:t})});function tq(e,t){if(!t)return;let r=new ee({criterion:new X({each:$h})}),a=rq(t),n={...t,criterion:a};ke(e,r,n,"buildSort")}function rq(e){return e.criterion?wn(e.criterion)?e.criterion:[e.criterion]:[]}function ox(e,t){var i;if(!aq(e))throw I;let r=V(e),{dispatch:a}=e,n=()=>e.state;tq(e,t.initialState);let o=(i=t.initialState)==null?void 0:i.criterion;return o&&a(ii(o)),{...r,sortBy(s){a(si(s)),a(St(1))},isSortedBy(s){return this.state.sortCriteria===Wt(s)},get state(){return{sortCriteria:n().sortCriteria}}}}function aq(e){return e.addReducers({configuration:z,sortCriteria:Hl}),!0}function ix(e,t={}){let{dispatch:r}=e,a=ox(e,t),n=()=>r(E({legacy:oi(),next:{actionCause:L.resultsSort,getEventExtraPayload:o=>new U(()=>o).getResultSortMetadata()}}));return{...a,get state(){return a.state},sortBy(o){a.sortBy(o),n()}}}var Sn=O,zl=new q({options:{required:!0},values:{caption:me,expression:me,state:new w({constrainTo:["idle","selected","excluded"]})}}),Gl=new X({required:!0,each:zl});var ci=v("staticFilter/register",e=>b(e,{id:Sn,values:Gl})),Gr=v("staticFilter/toggleSelect",e=>b(e,{id:Sn,value:zl})),Wr=v("staticFilter/toggleExclude",e=>b(e,{id:Sn,value:zl})),qa=v("staticFilter/deselectAllFilterValues",e=>b(e,Sn)),Wl=e=>k("analytics/staticFilter/select",t=>t.makeStaticFilterSelect(e)),ui=e=>k("analytics/staticFilter/deselect",t=>t.makeStaticFilterDeselect(e)),Yl=e=>k("analytics/staticFilter/clearAll",t=>t.makeStaticFilterClearAll(e));var Kl=T(Ga(),e=>e.addCase(ci,(t,r)=>{let a=r.payload,{id:n}=a;n in t||(t[n]=a)}).addCase(Gr,(t,r)=>{let{id:a,value:n}=r.payload,o=t[a];if(!o)return;let i=o.values.find(u=>u.caption===n.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Wr,(t,r)=>{let{id:a,value:n}=r.payload,o=t[a];if(!o)return;let i=o.values.find(u=>u.caption===n.caption);if(!i)return;let s=i.state==="excluded";i.state=s?"idle":"excluded"}).addCase(qa,(t,r)=>{let a=r.payload,n=t[a];!n||n.values.forEach(o=>o.state="idle")}).addCase(Re,t=>{Object.values(t).forEach(r=>{r.values.forEach(a=>a.state="idle")})}).addCase(ue,(t,r)=>{let a=r.payload.sf||{};Object.entries(t).forEach(([n,o])=>{let i=a[n]||[];o.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));function Kf(e){return{state:"idle",...e}}var nq=new ee({id:Sn,values:Gl});function sx(e,t){if(!oq(e))throw I;ge(e,nq,t.options,"buildStaticFilter");let r=V(e),{dispatch:a}=e,n=()=>e.state,{id:o}=t.options;return a(ci(t.options)),{...r,toggleSelect(i){a(Gr({id:o,value:i})),a(E({legacy:Jl(o,i),next:Xl(o,i)}))},toggleSingleSelect(i){i.state==="idle"&&a(qa(o)),a(Gr({id:o,value:i})),a(E({legacy:Jl(o,i),next:Xl(o,i)}))},toggleExclude(i){a(Wr({id:o,value:i})),a(E({legacy:Jl(o,i),next:Xl(o,i)}))},toggleSingleExclude(i){i.state==="idle"&&a(qa(o)),a(Wr({id:o,value:i})),a(E({legacy:Jl(o,i),next:Xl(o,i)}))},deselectAll(){a(qa(o)),a(E({legacy:Yl({staticFilterId:o}),next:{actionCause:L.staticFilterClearAll,getEventExtraPayload:i=>new U(()=>i).getStaticFilterClearAllMetadata(o)}}))},isValueSelected(i){return i.state==="selected"},isValueExcluded(i){return i.state==="excluded"},get state(){var u;let i=((u=n().staticFilterSet[o])==null?void 0:u.values)||[],s=i.some(c=>c.state!=="idle");return{id:o,values:i,hasActiveValues:s}}}}function oq(e){return e.addReducers({staticFilterSet:Kl}),!0}function Jl(e,t){let{caption:r,expression:a,state:n}=t;return(n==="idle"?Wl:ui)({staticFilterId:e,staticFilterValue:{caption:r,expression:a}})}function Xl(e,t){return{actionCause:t.state==="selected"?L.staticFilterDeselect:L.staticFilterSelect,getEventExtraPayload:a=>new U(()=>a).getStaticFilterToggleMetadata(e,t)}}var Zl=T(Wa(),e=>{e.addCase(Ao,(t,r)=>{let a=r.payload,{id:n}=a;n in t||(t[n]={...a,isActive:!1})}).addCase(Mt,(t,r)=>{let a=r.payload;cx(t,a)}).addCase(ue,(t,r)=>{let a=r.payload.tab||"";cx(t,a)}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.tabSet)!=null?n:t})});function cx(e,t){t in e&&Object.keys(e).forEach(a=>{e[a].isActive=a===t})}var iq=new ee({expression:me,id:O}),sq=new ee({isActive:new K});function ux(e,t){if(uq(t.options.id),!cq(e))throw I;let r=V(e),{dispatch:a}=e;ge(e,iq,t.options,"buildTab");let n=ke(e,sq,t.initialState,"buildTab"),{id:o,expression:i}=t.options;return a(Ao({id:o,expression:i})),n.isActive&&a(Mt(o)),{...r,select(){a(Mt(o))},get state(){var u;return{isActive:(u=e.state.tabSet[o])==null?void 0:u.isActive}}}}function cq(e){return e.addReducers({configuration:z,tabSet:Zl}),!0}function uq(e){let t=rt().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function lx(e,t){let{dispatch:r}=e,a=ux(e,t),n=()=>r(E({legacy:ca(),next:{actionCause:L.interfaceChange,getEventExtraPayload:o=>new U(()=>o).getInterfaceChangeMetadata()}}));return{...a,get state(){return a.state},select(){a.select(),n()}}}function dx(e){if(!lq(e))throw I;let t=V(e),r=()=>e.state;return{...t,sort(a){return So(a,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(o=>o.facetId)}}}}function lq(e){return e.addReducers({search:J,facetOptions:Ne}),!0}function px(e){return dx(e)}var dq={categoryFacetId:te,categoryFacetPath:new X({required:!0,each:O})},pq=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let a=e.categoryFacetSet[t],n=a==null?void 0:a.request.field,o=`${n}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:n,categoryFacetTitle:o}},ed=e=>k("analytics/categoryFacet/breadcrumb",(t,r)=>(b(e,dq),t.makeBreadcrumbFacet(pq(r,e))));var td=()=>k("analytics/facet/deselectAllBreadcrumbs",e=>e.makeBreadcrumbResetAll());var rd=(e,{facetId:t,selection:r})=>{let n=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,o=`${n}_${t}`;return{facetId:t,facetField:n,facetTitle:o,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var Ms=e=>k("analytics/dateFacet/breadcrumb",(t,r)=>{b(e,mn(e.selection));let a=rd(r,e);return t.makeBreadcrumbFacet(a)});var Ns=e=>k("analytics/numericFacet/breadcrumb",(t,r)=>{b(e,mn(e.selection));let a=rd(r,e);return t.makeBreadcrumbFacet(a)});var ad=e=>Object.keys(e.facetSet).map(t=>{let r=e.facetValuesSelector(e.engine.state,t).map(a=>({value:a,deselect:()=>{a.state==="selected"?e.executeToggleSelect({facetId:t,selection:a}):a.state==="excluded"&&e.executeToggleExclude({facetId:t,selection:a})}}));return{facetId:t,field:e.facetSet[t].request.field,values:r}}).filter(t=>t.values.length);function fx(e){let t=V(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(Re())},deselectBreadcrumb(a){a.deselect()}}}function mx(e){if(!fq(e))throw I;let t=fx(e),{dispatch:r}=e,a=()=>e.state,n=()=>{let y={engine:e,facetSet:a().facetSet,executeToggleSelect:({facetId:S,selection:C})=>{r(Sr({facetId:S,selection:C})),r(_r({facetId:S,freezeCurrentValues:!1})),r(E({legacy:Bo({facetId:S,facetValue:C.value}),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:R=>new U(()=>R).getFacetMetadata(S,C.value)}}))},executeToggleExclude:({facetId:S,selection:C})=>{r(ba({facetId:S,selection:C})),r(_r({facetId:S,freezeCurrentValues:!1})),r(E({legacy:Bo({facetId:S,facetValue:C.value}),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:R=>new U(()=>R).getFacetMetadata(S,C.value)}}))},facetValuesSelector:MS};return ad(y)},o=()=>{let y={engine:e,facetSet:a().numericFacetSet,executeToggleSelect:S=>{r(xr(S)),r(E({legacy:Ns(S),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getRangeFacetBreadcrumbMetadata(S.facetId,S.selection)}}))},executeToggleExclude:S=>{r(Aa(S)),r(E({legacy:Ns(S),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getRangeFacetBreadcrumbMetadata(S.facetId,S.selection)}}))},facetValuesSelector:fv};return ad(y)},i=()=>{let y={engine:e,facetSet:a().dateFacetSet,executeToggleSelect:S=>{r(Cr(S)),r(E({legacy:Ms(S),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getRangeFacetBreadcrumbMetadata(S.facetId,S.selection)}}))},executeToggleExclude:S=>{r(Ra(S)),r(E({legacy:Ms(S),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getRangeFacetBreadcrumbMetadata(S.facetId,S.selection)}}))},facetValuesSelector:Cv};return ad(y)},s=()=>Object.keys(a().categoryFacetSet).map(u).filter(y=>y.path.length),u=y=>{let S=LS(a(),y);return{facetId:y,field:a().categoryFacetSet[y].request.field,path:S,deselect:()=>{r(sr(y)),r(E({legacy:ed({categoryFacetPath:S.map(C=>C.value),categoryFacetId:y}),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getCategoryFacetBreadcrumbMetadata(y,S.map(R=>R.value))}}))}}},c=()=>{var S;let y=(S=a().staticFilterSet)!=null?S:{};return Object.values(y).map(l)},l=y=>{let{id:S,values:C}=y,R=C.filter(P=>P.state!=="idle").map(P=>d(S,P));return{id:S,values:R}},d=(y,S)=>({value:S,deselect:()=>{let{caption:C,expression:R}=S,P=ui({staticFilterId:y,staticFilterValue:{caption:C,expression:R}});S.state==="selected"?r(Gr({id:y,value:S})):S.state==="excluded"&&r(Wr({id:y,value:S})),r(E({legacy:P}))}}),f=()=>{var S,C;let y=(C=(S=a().automaticFacetSet)==null?void 0:S.set)!=null?C:{};return Object.values(y).map(R=>p(R.response))},p=y=>{let{field:S,label:C}=y,R=y.values.filter(P=>P.state==="selected").map(P=>m(S,P));return{facetId:S,field:S,label:C,values:R}},m=(y,S)=>({value:S,deselect:()=>{r(Ea({field:y,selection:S})),r(E({legacy:Bo({facetId:y,facetValue:S.value}),next:{actionCause:L.breadcrumbFacet,getEventExtraPayload:C=>new U(()=>C).getFacetMetadata(y,S.value)}}))}});function g(){return!![...n(),...o(),...i(),...s(),...c(),...f()].length}return{...t,get state(){return{facetBreadcrumbs:n(),categoryFacetBreadcrumbs:s(),numericFacetBreadcrumbs:o(),dateFacetBreadcrumbs:i(),staticFilterBreadcrumbs:c(),automaticFacetBreadcrumbs:f(),hasBreadcrumbs:g()}},deselectAll:()=>{t.deselectAll(),r(E({legacy:td(),next:{actionCause:L.breadcrumbResetAll,getEventExtraPayload:y=>new U(()=>y).getBaseMetadata()}}))}}}function fq(e){return e.addReducers({configuration:z,search:J,facetSet:br,numericFacetSet:vt,dateFacetSet:Fr,categoryFacetSet:cr}),!0}function gx(e){return e.type==="redirect"}var Jf=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(gx);return t.length?t[0].content:null}};var li=v("standaloneSearchBox/register",e=>b(e,{id:O,redirectionUrl:O})),di=v("standaloneSearchBox/reset",e=>b(e,{id:O})),pi=v("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>b(e,{id:O})),fi=v("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Ta=ae("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:a,extra:{apiClient:n,validatePayload:o}})=>{o(e,{id:new w({emptyAllowed:!1})});let i=await gq(r()),s=await n.plan(i);if(Fe(s))return a(s.error);let{redirectionUrl:u}=new Jf(s.success);return u&&t(mq(u)),u||""}),mq=e=>k("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),gq=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await mt(e.configuration.analytics)},...e.configuration.analytics.enabled&&await mo(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var nd=T(_c(),e=>e.addCase(li,(t,r)=>{let{id:a,redirectionUrl:n}=r.payload;a in t||(t[a]=hx(n))}).addCase(di,(t,r)=>{let{id:a}=r.payload,n=t[a];if(n){t[a]=hx(n.defaultRedirectionUrl);return}}).addCase(Ta.pending,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.isLoading=!0)}).addCase(Ta.fulfilled,(t,r)=>{let a=r.payload,n=t[r.meta.arg.id];!n||(n.redirectTo=a||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(Ta.rejected,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.isLoading=!1)}).addCase(pi,(t,r)=>{let a=t[r.payload.id];!a||(a.analytics.cause="searchFromLink")}).addCase(fi,(t,r)=>{let a=t[r.payload.id];!a||(a.analytics.cause="omniboxFromLink",a.analytics.metadata=r.payload.metadata)}));function hx(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var Sx=new ee({...Yf,redirectionUrl:new w({required:!0,emptyAllowed:!1})});function yx(e,t){if(!hq(e))throw I;let{dispatch:r}=e,a=()=>e.state,n=t.options.id||In("standalone_search_box"),o={id:n,highlightOptions:{...t.options.highlightOptions},...jl,...t.options};ge(e,Sx,o,"buildStandaloneSearchBox");let i=Ul(e,{options:o});return r(li({id:n,redirectionUrl:o.redirectionUrl})),{...i,updateText(s){i.updateText(s),r(pi({id:n}))},selectSuggestion(s){let u=Gf(a(),{id:n,suggestion:s});r(Pr({id:n,expression:s})),r(fi({id:n,metadata:u})),this.submit()},afterRedirection(){r(di({id:n}))},submit(){r(Ge({q:this.state.value,enableQuerySyntax:o.enableQuerySyntax})),r(Ta({id:n}))},get state(){let u=a().standaloneSearchBoxSet[n];return{...i.state,isLoading:u.isLoading,redirectTo:u.redirectTo,analytics:u.analytics}}}}function hq(e){return e.addReducers({standaloneSearchBoxSet:nd,configuration:z,query:Ft,querySuggest:ni}),!0}function Cx(e,t){return e.q!==t.q?Oa():e.sortCriteria!==t.sortCriteria?oi():e.firstResult!==t.firstResult?Jo():e.numberOfResults!==t.numberOfResults?Ko():mi(e.f,t.f)?Ls(e.f,t.f):mi(e.fExcluded,t.fExcluded)?Ls(e.fExcluded,t.fExcluded,!0):mi(e.cf,t.cf)?Ls(e.cf,t.cf):mi(e.af,t.af)?Ls(e.af,t.af):mi(e.nf,t.nf)?xx(e.nf,t.nf):mi(e.df,t.df)?xx(e.df,t.df):ca()}function mi(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function vx(e){let t={};return Object.keys(e).forEach(r=>t[r]=e[r].map(a=>`${a.start}..${a.end}`)),t}function Ls(e={},t={},r=!1){let a=Object.keys(e),n=Object.keys(t),o=a.filter(f=>!n.includes(f));if(o.length){let f=o[0];return e[f].length>1?Me(f):dt({facetId:f,facetValue:e[f][0]})}let i=n.filter(f=>!a.includes(f));if(i.length){let f=i[0];return r?Lt({facetId:f,facetValue:t[f][0]}):Pe({facetId:f,facetValue:t[f][0]})}let s=n.find(f=>t[f].filter(p=>e[f].includes(p)));if(!s)return ca();let u=e[s],c=t[s],l=c.filter(f=>!u.includes(f));if(l.length)return r?Lt({facetId:s,facetValue:l[0]}):Pe({facetId:s,facetValue:l[0]});let d=u.filter(f=>!c.includes(f));return d.length?dt({facetId:s,facetValue:d[0]}):ca()}function xx(e={},t={}){return Ls(vx(e),vx(t))}function bx(e){var t,r,a,n,o,i;return{q:Ce().q,enableQuerySyntax:Ce().enableQuerySyntax,aq:(r=(t=e.advancedSearchQueries)==null?void 0:t.defaultFilters.aq)!=null?r:at().defaultFilters.aq,cq:(n=(a=e.advancedSearchQueries)==null?void 0:a.defaultFilters.cq)!=null?n:at().defaultFilters.cq,firstResult:Be().firstResult,numberOfResults:(i=(o=e.pagination)==null?void 0:o.defaultNumberOfResults)!=null?i:Be().defaultNumberOfResults,sortCriteria:Ke(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:pt(),sf:{},tab:"",af:{}}}var Sq=new ee({parameters:new q({options:{required:!0},values:du})});function Fx(e,t){let{dispatch:r}=e,a=V(e);return ke(e,Sq,t.initialState,"buildSearchParameterManager"),r(ue(t.initialState.parameters)),{...a,synchronize(n){let o=od(e,n);r(ue(o))},get state(){return{parameters:Xf(e)}}}}function od(e,t){return{...bx(e.state),...t}}function Rx(e,t){return vq(e,t)}function Xf(e){let t=e.state;return{...yq(t),...Cq(t),...xq(t),...Ax(t,Px,"f"),...Ax(t,bq,"fExcluded"),...Fq(t),...Rq(t),...Aq(t),...Pq(t)}}function yq(e){if(e.query===void 0)return{};let t=e.query.q;return t!==Ce().q?{q:t}:{}}function Cq(e){var r;let t=Object.values((r=e.tabSet)!=null?r:{}).find(a=>a.isActive);return t?{tab:t.id}:{}}function vq(e,t){let r=e.state.tabSet,a=t.tab;if(!r||!Object.entries(r).length||!a)return!0;let n=a in r;return n||e.logger.warn(`The tab search parameter "${a}" is invalid. Ignoring change.`),n}function xq(e){if(e.sortCriteria===void 0)return{};let t=e.sortCriteria;return t!==Ke()?{sortCriteria:t}:{}}function Ax(e,t,r){if(e.facetSet===void 0)return{};let a=Object.entries(e.facetSet).filter(([n])=>{var o,i,s;return(s=(i=(o=e.facetOptions)==null?void 0:o.facets[n])==null?void 0:i.enabled)!=null?s:!0}).map(([n,{request:o}])=>{let i=t(o.currentValues);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(a).length?{[r]:a}:{}}function Px(e){return e.filter(t=>t.state==="selected").map(t=>t.value)}function bq(e){return e.filter(t=>t.state==="excluded").map(t=>t.value)}function Fq(e){if(e.categoryFacetSet===void 0)return{};let t=Object.entries(e.categoryFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,a])=>{let o=ut(a.request.currentValues).map(i=>i.value);return o.length?{[r]:o}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{cf:t}:{}}function Rq(e){if(e.numericFacetSet===void 0)return{};let t=Object.entries(e.numericFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=wx(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{nf:t}:{}}function Aq(e){if(e.dateFacetSet===void 0)return{};let t=Object.entries(e.dateFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=wx(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{df:t}:{}}function wx(e){return e.filter(t=>t.state==="selected")}function Pq(e){var a;let t=(a=e.automaticFacetSet)==null?void 0:a.set;if(t===void 0)return{};let r=Object.entries(t).map(([n,{response:o}])=>{let i=Px(o.values);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(r).length?{af:r}:{}}function id(e,t){let{dispatch:r}=e,a=Fx(e,t);return{...a,synchronize(n){let o=Ex(e),i=od(e,o),s=od(e,n);qs(i,s)||!Rx(e,s)||(a.synchronize(n),r(E({legacy:Cx(i,s)})))},get state(){return{parameters:Ex(e)}}}}function Ex(e){let t=e.state;return{...Xf(e),...wq(t),...Eq(t),...Iq(t),...kq(t),...Oq(t),...Dq(t),...qq(t)}}function wq(e){if(e.query===void 0)return{};let t=e.query.enableQuerySyntax;return t!==void 0&&t!==Ce().enableQuerySyntax?{enableQuerySyntax:t}:{}}function Eq(e){if(e.advancedSearchQueries===void 0)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function Iq(e){if(e.advancedSearchQueries===void 0)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function kq(e){if(e.pagination===void 0)return{};let t=e.pagination.firstResult;return t!==Be().firstResult?{firstResult:t}:{}}function Oq(e){if(e.pagination===void 0)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function qq(e){if(e.staticFilterSet===void 0)return{};let t=Object.entries(e.staticFilterSet).map(([r,a])=>{let n=Tq(a.values);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{sf:t}:{}}function Tq(e){return e.filter(t=>t.state==="selected").map(t=>t.caption)}function Dq(e){if(e.debug===void 0)return{};let t=e.debug;return t!==pt()?{debug:t}:{}}var sd="&",Qs="=",Ix="..",Zf="...";function Bs(){return{serialize:Vq,deserialize:jq}}function Vq(e){return Object.entries(e).map(Mq).filter(t=>t).join(sd)}function Mq(e){let[t,r]=e;return qx(t)?Kq(t)?Nq(r)?Qq(t,r):"":t==="nf"||t==="df"?Lq(r)?Bq(t,r):"":`${t}${Qs}${encodeURIComponent(r)}`:""}function Nq(e){return em(e)?kx(e,r=>typeof r=="string"):!1}function Lq(e){return em(e)?kx(e,r=>em(r)&&"start"in r&&"end"in r):!1}function em(e){return!!(e&&typeof e=="object")}function kx(e,t){return Object.entries(e).filter(a=>{let n=a[1];return!Array.isArray(n)||!n.every(t)}).length===0}function Qq(e,t){return Object.entries(t).map(([r,a])=>`${e}-${r}${Qs}${a.map(n=>encodeURIComponent(n)).join(",")}`).join(sd)}function Bq(e,t){return Object.entries(t).map(([r,a])=>{let n=a.map(({start:o,end:i,endInclusive:s})=>`${o}${s?Zf:Ix}${i}`).join(",");return`${e}-${r}${Qs}${n}`}).join(sd)}function jq(e){return e.split(sd).map(a=>Uq(a)).map(_q).filter(Gq).map(Wq).reduce((a,n)=>{let[o,i]=n;if(Tx(o)){let s={...a[o],...i};return{...a,[o]:s}}return{...a,[o]:i}},{})}function Uq(e){let[t,...r]=e.split(Qs),a=r.join(Qs);return[t,a]}function _q(e){let[t,r]=e,n=/^(f|fExcluded|cf|nf|df|sf|af)-(.+)$/.exec(t);if(!n)return e;let o=n[1],i=n[2],s=r.split(","),u=$q(o,s),c={[i]:u};return[o,JSON.stringify(c)]}function $q(e,t){return e==="nf"?Hq(t):e==="df"?zq(t):t}function Hq(e){return e.map(t=>{let{startAsString:r,endAsString:a,isEndInclusive:n}=Dx(t);return{start:parseFloat(r),end:parseFloat(a),endInclusive:n}}).filter(({start:t,end:r})=>Number.isFinite(t)&&Number.isFinite(r)).map(({start:t,end:r,endInclusive:a})=>Wo({start:t,end:r,state:"selected",endInclusive:a}))}function Ox(e){try{return yy(e)?(hu(e,go),!0):ar(e)?(fa(e),!0):!1}catch(t){return!1}}function zq(e){return e.map(t=>{let{isEndInclusive:r,startAsString:a,endAsString:n}=Dx(t);return{start:a,end:n,endInclusive:r}}).filter(({start:t,end:r})=>Ox(t)&&Ox(r)).map(({start:t,end:r,endInclusive:a})=>Fa({start:t,end:r,state:"selected",endInclusive:a}))}function Gq(e){let t=qx(e[0]),r=e.length===2;return t&&r}function qx(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,fExcluded:!0,cf:!0,nf:!0,df:!0,debug:!0,sf:!0,tab:!0,af:!0}}function Wq(e){let[t,r]=e;return t==="enableQuerySyntax"?[t,r==="true"]:t==="debug"?[t,r==="true"]:t==="firstResult"?[t,parseInt(r)]:t==="numberOfResults"?[t,parseInt(r)]:Tx(t)?[t,Yq(r)]:[t,decodeURIComponent(r)]}function Yq(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(a=>{let[n,o]=a;r[n]=o.map(i=>Pn(i)?decodeURIComponent(i):i)}),r}function Tx(e){return["f","fExcluded","cf","nf","df","sf","af"].includes(e)}function Kq(e){return["f","af","cf","sf","fExcluded"].includes(e)}function Dx(e){let t=e.indexOf(Zf)!==-1,[r,a]=e.split(t?Zf:Ix);return{isEndInclusive:t,startAsString:r,endAsString:a}}var Jq=new ee({fragment:new w});function Vx(e,t){let r;function a(){r=e.state.search.requestId}function n(){return r!==e.state.search.requestId}if(!Zq(e))throw I;ke(e,Jq,t.initialState,"buildUrlManager");let o=V(e),i=t.initialState.fragment;a();let s=id(e,{initialState:{parameters:cd(i)}});return{...o,subscribe(u){let c=()=>{let l=this.state.fragment;!Xq(i,l)&&n()&&(i=l,u()),a()};return c(),e.subscribe(c)},get state(){return{fragment:Bs().serialize(s.state.parameters)}},synchronize(u){i=u;let c=cd(u);s.synchronize(c)}}}function Xq(e,t){if(e===t)return!0;let r=cd(e),a=cd(t);return qs(r,a)}function cd(e){return Bs().deserialize(e)}function Zq(e){return e.addReducers({configuration:z}),!0}function Mx(e){return Xo(e)}async function ud(e,t){var s;let{search:r,accessToken:a,organizationId:n,analytics:o}=e.configuration,i=((s=e.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:a,organizationId:n,enableNavigation:!1,...o.enabled&&{visitorId:await mt(e.configuration.analytics)},q:i,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var yn=ae("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let n=r(),o=await ud(n,e),i=await t.apiClient.html(o);return Fe(i)?a(i.error):{content:i.success,uniqueId:e.uniqueId}}),gi=v("resultPreview/next"),hi=v("resultPreview/previous"),Si=v("resultPreview/prepare",e=>b(e,{results:new X({required:!0})})),Nx=2048,yi=ae("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let a=t(),n=Mh(await e.buildResultPreviewRequest(a,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return(n==null?void 0:n.length)>Nx&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${Nx} characters.`),{contentURL:n}});var Lx=e=>k("analytics/resultPreview/open",(t,r)=>{nt(e);let a=Te(e,r),n=_e(e);return t.makeDocumentQuickview(a,n)});var tm=e=>{let{content:t,isLoading:r,uniqueId:a,contentURL:n}=ja();e.content=t,e.isLoading=r,e.uniqueId=a,e.contentURL=n},rm=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId),ld=T(ja(),e=>{e.addCase(yn.pending,t=>{t.isLoading=!0}).addCase(yn.fulfilled,(t,r)=>{let{content:a,uniqueId:n}=r.payload;t.position=t.resultsWithPreview.indexOf(n),t.content=a,t.uniqueId=n,t.isLoading=!1}).addCase(E.fulfilled,(t,r)=>{tm(t),t.resultsWithPreview=rm(r.payload.response.results)}).addCase(ga.fulfilled,(t,r)=>{tm(t),t.resultsWithPreview=t.resultsWithPreview.concat(rm(r.payload.response.results))}).addCase(nr.fulfilled,tm).addCase(Si,(t,r)=>{t.resultsWithPreview=rm(r.payload.results)}).addCase(gi,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r}).addCase(hi,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r}).addCase(yi.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL})});function Qx(e,t,r,a,n){if(!eT(e))throw I;let{dispatch:o}=e,i=()=>e.state,s=V(e),{result:u,maximumPreviewSize:c}=t.options,l=()=>{let{resultsWithPreview:f,position:p}=i().resultPreview;return f[p]},d=f=>{o(yi({uniqueId:f,requestedOutputSize:c,buildResultPreviewRequest:r,path:a})),t.options.onlyContentURL||o(yn({uniqueId:f,requestedOutputSize:c})),n&&n()};return{...s,fetchResultContent(){d(u.uniqueId)},next(){o(gi()),d(l())},previous(){o(hi()),d(l())},get state(){let f=i(),p=u.hasHtmlVersion,m=f.resultPreview,g=u.uniqueId===m.uniqueId?m.content:"",y=m.isLoading,S=m.contentURL,C=l();return{content:g,resultHasPreview:p,isLoading:y,contentURL:S,currentResultUniqueId:C}}}}function eT(e){return e.addReducers({configuration:z,resultPreview:ld}),!0}function Bx(e,t){if(!tT(e))throw I;let{dispatch:r}=e,a=()=>e.state,n=()=>a().search.results,s=Qx(e,t,ud,"/html",()=>{e.dispatch(Lx(t.options.result))});return r(Si({results:n()})),{...s,get state(){return{...s.state,currentResult:n().findIndex(u=>u.uniqueId===s.state.currentResultUniqueId)+1,totalResults:n().length}}}}function tT(e){return e.addReducers({search:J}),!0}var rT=e=>k("analytics/folding/showMore",(t,r)=>(nt(e),t.makeShowMoreFoldedResults(Te(e,r),_e(e)))),aT=()=>k("analytics/folding/showLess",e=>e.makeShowLessFoldedResults()),jx={logShowMoreFoldedResults:rT,logShowLessFoldedResults:aT};function nT(e,t){return e.raw[t.collection]}function am(e,t){return e.raw[t.parent]}function js(e,t){let r=e.raw[t.child];return hc(r)?r[0]:r}function oT(e,t){return(e||t)!==void 0&&e===t}function Ux(e,t,r,a=[]){let n=js(e,r);return n?a.indexOf(n)!==-1?[]:t.filter(o=>{let i=js(o,r)===js(e,r);return am(o,r)===n&&!i}).map(o=>({result:o,children:Ux(o,t,r,[...a,n])})):[]}function iT(e,t){return e.find(r=>{let a=am(r,t)===void 0,n=oT(am(r,t),js(r,t));return a||n})}function _x(e){return e.parentResult?_x(e.parentResult):e}function sT(e,t,r){var o;let a=ou(e),n=(o=r!=null?r:iT(a,t))!=null?o:_x(e);return{result:n,children:Ux(n,a,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function dd(e,t,r){let a={};return e.forEach(n=>{let o=nT(n,t);!o||!js(n,t)&&!n.parentResult||(a[o]=sT(n,t,r))}),a}function $x(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var pd=T(Ha(),e=>e.addCase(E.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?dd(r.response.results,t.fields):{}}).addCase(nr.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?dd(r.response.results,t.fields):{}}).addCase(ga.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...dd(r.response.results,t.fields)}:{}}).addCase(Sa,(t,{payload:r})=>{var a,n,o,i;return t.enabled?t:{enabled:!0,collections:{},fields:{collection:(a=r.collectionField)!=null?a:t.fields.collection,parent:(n=r.parentField)!=null?n:t.fields.parent,child:(o=r.childField)!=null?o:t.fields.child},filterFieldRange:(i=r.numberOfFoldedResults)!=null?i:t.filterFieldRange}}).addCase(ya.pending,(t,{meta:r})=>{let a=r.arg;$x(t,a).isLoadingMoreResults=!0}).addCase(ya.rejected,(t,{meta:r})=>{let a=r.arg;$x(t,a).isLoadingMoreResults=!1}).addCase(ya.fulfilled,(t,{payload:{collectionId:r,results:a,rootResult:n}})=>{let o=dd(a,t.fields,n);if(!o||!o[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(a)}. Folding most probably in an invalid state... `);t.collections[r]=o[r],t.collections[r].moreResultsAvailable=!1}));var cT=new ee(Tf);function Hx(e,t,r){var s;if(!uT(e))throw I;let a=Ll(e,t),{dispatch:n}=e,o=()=>e.state,i=((s=t.options)==null?void 0:s.folding)?ge(e,cT,t.options.folding,"buildFoldedResultList"):{};return n(Sa({...i})),{...a,loadCollection:u=>{n(t.loadCollectionActionCreator(u.result.raw[e.state.folding.fields.collection])),n(r.logShowMoreFoldedResults(u.result))},logShowMoreFoldedResults:u=>{n(r.logShowMoreFoldedResults(u))},logShowLessFoldedResults:()=>{n(r.logShowLessFoldedResults())},findResultById(u){return nm(this.state.results,c=>c.result.uniqueId===u.result.uniqueId)},findResultByCollection(u){return nm(this.state.results,c=>c.result.raw.foldingcollection===u.result.raw.foldingcollection)},get state(){let u=o();return{...a.state,results:a.state.results.map(c=>{let l=c.raw[u.folding.fields.collection];return!l||!u.folding.collections[l]?{result:c,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:u.folding.collections[l]})}}}}function uT(e){return e.addReducers({search:J,configuration:Iu,folding:pd,query:Ft}),!0}function nm(e,t){for(let r=0;r<e.length;r++){let a=e[r];if(t(a))return a;if(a.children.length){let n=nm(a.children,t);if(n)return n}}return null}function zx(e,t={}){let r=Hx(e,{...t,loadCollectionActionCreator:ya,fetchMoreResultsActionCreator:ga},jx);return{...r,get state(){return r.state}}}var Da=T($c(),e=>e.addCase(E.pending,t=>{t.query="",t.queryModification={originalQuery:"",newQuery:"",queryToIgnore:t.queryModification.queryToIgnore}}).addCase(E.fulfilled,(t,r)=>{var s;let a=[],n=[],o=[],i=[];r.payload.response.triggers.forEach(u=>{switch(u.type){case"redirect":a.push(u.content);break;case"query":n.push(u.content);break;case"execute":o.push({functionName:u.content.name,params:u.content.params});break;case"notify":i.push(u.content);break}}),t.redirectTo=(s=a[0])!=null?s:"",t.query=t.queryModification.newQuery,t.executions=o,t.notifications=i}).addCase(vo,(t,r)=>{t.queryModification={...r.payload,queryToIgnore:""}}).addCase(ma,(t,r)=>{t.queryModification.queryToIgnore=r.payload}));function Gx(e){if(!lT(e))throw I;let t=V(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.redirectTo;return{...t,subscribe(o){let i=()=>{let s=n!==this.state.redirectTo;n=this.state.redirectTo,s&&this.state.redirectTo&&(o(),r(Ru()))};return i(),e.subscribe(i)},get state(){return{redirectTo:a().triggers.redirectTo}}}}function lT(e){return e.addReducers({triggers:Da}),!0}function Wx(e){if(!dT(e))throw I;let t=V(e),{dispatch:r}=e,a=()=>e.state,n=()=>a().triggers.queryModification.newQuery,o=()=>a().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:n(),originalQuery:o(),wasQueryModified:n()!==""}},undo(){r(ma(n())),r(Ge({q:o()})),r(E({legacy:bu({undoneQuery:n()}),next:{actionCause:L.undoTriggerQuery,getEventExtraPayload:()=>new U(a).getUndoTriggerQueryMetadata(n())}}))}}}function dT(e){return e.addReducers({triggers:Da,query:Ft}),!0}function Yx(e){if(!pT(e))throw I;let t=V(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.executions;return{...t,subscribe(o){let i=()=>{let s=!gn(this.state.executions,n,(u,c)=>u.functionName===c.functionName&&gn(u.params,c.params));n=this.state.executions,s&&this.state.executions.length&&(o(),r(Au()))};return i(),e.subscribe(i)},get state(){return{executions:a().triggers.executions}}}}function pT(e){return e.addReducers({triggers:Da}),!0}function Kx(e){if(!fT(e))throw I;let t=V(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.notifications;return{...t,subscribe(o){let i=()=>{let s=!gn(n,this.state.notifications);n=this.state.notifications,s&&(o(),r(Fu()))};return i(),e.subscribe(i)},get state(){return{notifications:a().triggers.notifications}}}}function fT(e){return e.addReducers({triggers:Da}),!0}var fd=()=>new q({values:{questionAnswerId:O},options:{required:!0}}),om=()=>new q({values:{linkText:me,linkURL:me},options:{required:!0}});function Ci(e){return b(e,fd())}function Yr(e,t){var a,n;let r=t!=null?t:(n=(a=e.search)==null?void 0:a.questionAnswer)==null?void 0:n.documentId;return r&&e.search&&jy(e,r.contentIdKey,r.contentIdValue)}function Cn(e,t){var n,o,i,s,u;let r=(o=(n=e.questionAnswering)==null?void 0:n.relatedQuestions.findIndex(c=>c.questionAnswerId===t))!=null?o:-1;if(r===-1)return null;let a=(u=(s=(i=e.search)==null?void 0:i.questionAnswer)==null?void 0:s.relatedQuestions)==null?void 0:u[r];return a!=null?a:null}var im=()=>k("analytics/smartSnippet/expand",e=>e.makeExpandSmartSnippet()),sm=()=>k("analytics/smartSnippet/collapse",e=>e.makeCollapseSmartSnippet()),cm=()=>k("analytics/smartSnippet/like",e=>e.makeLikeSmartSnippet()),um=()=>k("analytics/smartSnippet/dislike",e=>e.makeDislikeSmartSnippet());function lm(){return k("analytics/smartSnippet/source/open",(e,t)=>{let r=Yr(t);return e.makeOpenSmartSnippetSource(Te(r,t),_e(r))})}var Us=e=>k("analytics/smartSnippet/source/open",(t,r)=>{b(e,om());let a=Yr(r);return t.makeOpenSmartSnippetInlineLink(Te(a,r),{..._e(a),...e})}),dm=()=>k("analytics/smartSnippet/feedbackModal/open",e=>e.makeOpenSmartSnippetFeedbackModal()),pm=()=>k("analytics/smartSnippet/feedbackModal/close",e=>e.makeCloseSmartSnippetFeedbackModal()),fm=e=>k("analytics/smartSnippet/sendFeedback",t=>t.makeSmartSnippetFeedbackReason(e)),mm=e=>k("analytics/smartSnippet/sendFeedback",t=>t.makeSmartSnippetFeedbackReason("other",e)),gm=e=>k("analytics/smartSnippetSuggestion/expand",(t,r)=>{Ci(e);let a=Cn(r,e.questionAnswerId);return a?t.makeExpandSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),hm=e=>k("analytics/smartSnippetSuggestion/expand",(t,r)=>{Ci(e);let a=Cn(r,e.questionAnswerId);return a?t.makeCollapseSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),_s=e=>k("analytics/smartSnippet/source/open",(t,r)=>{b(e,fd());let a=Cn(r,e.questionAnswerId);if(!a)return null;let n=Yr(r,a.documentId);return n?t.makeOpenSmartSnippetSuggestionSource(Te(n,r),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),md=(e,t)=>k("analytics/smartSnippet/source/open",(r,a)=>{b(e,fd()),b(t,om());let n=Cn(a,e.questionAnswerId);if(!n)return null;let o=Yr(a,n.documentId);return o?r.makeOpenSmartSnippetSuggestionInlineLink(Te(o,a),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId,linkText:t.linkText,linkURL:t.linkURL}):null}),gd={logExpandSmartSnippet:im,logCollapseSmartSnippet:sm,logLikeSmartSnippet:cm,logDislikeSmartSnippet:um,logOpenSmartSnippetSource:lm,logOpenSmartSnippetInlineLink:Us,logOpenSmartSnippetFeedbackModal:dm,logCloseSmartSnippetFeedbackModal:pm,logSmartSnippetFeedback:fm,logSmartSnippetDetailedFeedback:mm,logExpandSmartSnippetSuggestion:gm,logCollapseSmartSnippetSuggestion:hm,logOpenSmartSnippetSuggestionSource:_s};var vi=v("smartSnippet/expand"),xi=v("smartSnippet/collapse"),bi=v("smartSnippet/like"),Fi=v("smartSnippet/dislike"),Ri=v("smartSnippet/feedbackModal/open"),Va=v("smartSnippet/feedbackModal/close"),Ai=v("smartSnippet/related/expand",e=>Ci(e)),Pi=v("smartSnippet/related/collapse",e=>Ci(e));var Jx=(e,t)=>e.findIndex(r=>r.questionAnswerId===t.questionAnswerId);function Xx({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:a}}){return kn({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:a})}function mT(e,t){let r=Xx(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var wr=T(Nn(),e=>e.addCase(vi,t=>{t.expanded=!0}).addCase(xi,t=>{t.expanded=!1}).addCase(bi,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(Fi,t=>{t.liked=!1,t.disliked=!0}).addCase(Ri,t=>{t.feedbackModalOpen=!0}).addCase(Va,t=>{t.feedbackModalOpen=!1}).addCase(E.fulfilled,(t,r)=>{let a=r.payload.response.questionAnswer.relatedQuestions.map((o,i)=>mT(o,t.relatedQuestions[i])),n=Xx(r.payload.response.questionAnswer);return t.questionAnswerId===n?{...t,relatedQuestions:a}:{...Nn(),relatedQuestions:a,questionAnswerId:n}}).addCase(Ai,(t,r)=>{let a=Jx(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!0)}).addCase(Pi,(t,r)=>{let a=Jx(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!1)}));function Zx(e,t,r){var u;if(!gT(e))throw I;let a=V(e),n=()=>e.state,o=()=>Yr(n()),i=null,s=ot(e,{options:{selectionDelay:(u=r==null?void 0:r.options)==null?void 0:u.selectionDelay}},()=>{let c=o();if(!c){i=null;return}let{searchResponseId:l}=n().search;i!==l&&(i=l,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(bt(c)))});return{...a,get state(){let c=n();return{question:c.search.questionAnswer.question,answer:c.search.questionAnswer.answerSnippet,documentId:c.search.questionAnswer.documentId,expanded:c.questionAnswering.expanded,answerFound:c.search.questionAnswer.answerSnippet!=="",liked:c.questionAnswering.liked,disliked:c.questionAnswering.disliked,feedbackModalOpen:c.questionAnswering.feedbackModalOpen,source:o()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(vi())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(xi())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(bi())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(Fi())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(Ri())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(Va())},sendFeedback(c){e.dispatch(t.logSmartSnippetFeedback(c)),e.dispatch(Va())},sendDetailedFeedback(c){e.dispatch(t.logSmartSnippetDetailedFeedback(c)),e.dispatch(Va())},selectSource(){s.select()},beginDelayedSelectSource(){s.beginDelayedSelect()},cancelPendingSelectSource(){s.cancelPendingSelect()}}}function gT(e){return e.addReducers({search:J,questionAnswering:wr}),!0}function hd(e,t){if(!hT(e))throw I;let r=()=>e.state,a=new Set,n=l=>a.has(l)?!0:(a.add(l),!1),o=null,i=l=>{o!==l&&(o=l,u={},a.clear())},s=(l,d,f)=>{var p;return ot(e,{options:{selectionDelay:(p=t==null?void 0:t.options)==null?void 0:p.selectionDelay}},()=>{n(d)||e.dispatch(f?md({questionAnswerId:f},l):Us(l))})},u={},c=(l,d)=>{let{searchResponseId:f}=r().search;i(f);let p=kn({...l,questionAnswerId:d});return p in u||(u[p]=s(l,p,d)),u[p]};return{selectInlineLink(l,d){var f;(f=c(l,d))==null||f.select()},beginDelayedSelectInlineLink(l,d){var f;(f=c(l,d))==null||f.beginDelayedSelect()},cancelPendingSelectInlineLink(l,d){var f;(f=c(l,d))==null||f.cancelPendingSelect()}}}function hT(e){return e.addReducers({search:J,questionAnswering:wr}),!0}function eb(e,t){var n;let r=Zx(e,gd,t),a=hd(e,{options:{selectionDelay:(n=t==null?void 0:t.options)==null?void 0:n.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(o){a.selectInlineLink(o)},beginDelayedSelectInlineLink(o){a.beginDelayedSelectInlineLink(o)},cancelPendingSelectInlineLink(o){a.cancelPendingSelectInlineLink(o)}}}function tb(e,t){if(!ST(e))throw I;let r=V(e),a=()=>e.state,n=o=>{let{contentIdKey:i,contentIdValue:s}=o;return e.state.search.results.find(u=>Ur(u,i)===s)};return{...r,get state(){let o=a();return{questions:o.search.questionAnswer.relatedQuestions.map((i,s)=>({question:i.question,answer:i.answerSnippet,documentId:i.documentId,questionAnswerId:o.questionAnswering.relatedQuestions[s].questionAnswerId,expanded:o.questionAnswering.relatedQuestions[s].expanded,source:n(i.documentId)}))}},expand(o){let i={questionAnswerId:o};e.dispatch(t.logExpandSmartSnippetSuggestion(i)),e.dispatch(Ai(i))},collapse(o){let i={questionAnswerId:o};e.dispatch(t.logCollapseSmartSnippetSuggestion(i)),e.dispatch(Pi(i))}}}function ST(e){return e.addReducers({search:J,questionAnswering:wr}),!0}function rb(e,t){if(!yT(e))throw I;let r=()=>e.state,a=d=>{let f=r(),p=Cn(f,d);return p?Yr(f,p.documentId):null},n=new Set,o=d=>n.has(d)?!0:(n.add(d),!1),i=null,s=d=>{i!==d&&(i=d,c={},n.clear())},u=(d,f)=>{var p;return ot(e,{options:{selectionDelay:(p=t==null?void 0:t.options)==null?void 0:p.selectionDelay}},()=>{o(f)||(e.dispatch(_s({questionAnswerId:f})),e.dispatch(bt(d)))})},c={},l=d=>{let{searchResponseId:f}=r().search;s(f);let p=a(d);return p?(d in c||(c[d]=u(p,d)),c[d]):null};return{selectSource(d){var f;(f=l(d))==null||f.select()},beginDelayedSelectSource(d){var f;(f=l(d))==null||f.beginDelayedSelect()},cancelPendingSelectSource(d){var f;(f=l(d))==null||f.cancelPendingSelect()}}}function yT(e){return e.addReducers({search:J,questionAnswering:wr}),!0}function ab(e,t){var o,i;let r=tb(e,gd),a=hd(e,{options:{selectionDelay:(o=t==null?void 0:t.options)==null?void 0:o.selectionDelay}}),n=rb(e,{options:{selectionDelay:(i=t==null?void 0:t.options)==null?void 0:i.selectionDelay}});return{...r,get state(){return r.state},selectSource(s){n.selectSource(s)},beginDelayedSelectSource(s){n.beginDelayedSelectSource(s)},cancelPendingSelectSource(s){n.cancelPendingSelectSource(s)},selectInlineLink(s,u){a.selectInlineLink(u,s)},beginDelayedSelectInlineLink(s,u){a.beginDelayedSelectInlineLink(u,s)},cancelPendingSelectInlineLink(s,u){a.cancelPendingSelectInlineLink(u,s)}}}var CT={queries:new X({required:!0,each:new w({emptyAllowed:!1})}),maxLength:new D({required:!0,min:1,default:10})},wi=v("recentQueries/registerRecentQueries",e=>b(e,CT)),Ei=v("recentQueries/clearRecentQueries");var nb=()=>k("analytics/recentQueries/clear",e=>e.makeClearRecentQueries()),ob=()=>k("analytics/recentQueries/click",e=>e.makeRecentQueryClick());var Sd=T(jc(),e=>{e.addCase(wi,(t,r)=>{t.queries=r.payload.queries.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Ei,t=>{t.queries=[]}).addCase(E.fulfilled,(t,r)=>{let a=r.payload.queryExecuted.trim(),n=r.payload.response.results;if(!a.length||!n.length)return;t.queries=t.queries.filter(i=>i!==a);let o=t.queries.slice(0,t.maxLength-1);t.queries=[a,...o]})});var vT={queries:[]},xT={maxLength:10,clearFilters:!0},bT=new ee({queries:new X({required:!0})}),FT=new ee({maxLength:new D({required:!0,min:1}),clearFilters:new K});function RT(e,t){ge(e,FT,t==null?void 0:t.options,"buildRecentQueriesList"),ke(e,bT,t==null?void 0:t.initialState,"buildRecentQueriesList")}function ib(e,t){if(!AT(e))throw I;let r=V(e),{dispatch:a}=e,n=()=>e.state,o={...xT,...t==null?void 0:t.options},i={...vT,...t==null?void 0:t.initialState};RT(e,{options:o,initialState:i});let s={queries:i.queries,maxLength:o.maxLength};return a(wi(s)),{...r,get state(){let u=n();return{...u.recentQueries,analyticsEnabled:u.configuration.analytics.enabled}},clear(){a(nb()),a(Ei())},executeRecentQuery(u){let c=new D({required:!0,min:0,max:this.state.queries.length}).validate(u);if(c)throw new Error(c);a(Eu({q:this.state.queries[u],clearFilters:o.clearFilters})),a(E({legacy:ob(),next:{actionCause:L.recentQueryClick,getEventExtraPayload:l=>new U(()=>l).getBaseMetadata()}}))}}}function AT(e){return e.addReducers({search:J,recentQueries:Sd}),!0}var sb=e=>k("analytics/recentResults/click",(t,r)=>(nt(e),t.makeRecentResultClick(Te(e,r),_e(e)))),cb=()=>k("analytics/recentResults/clear",e=>e.makeClearRecentResults());var yd=T(Uc(),e=>{e.addCase(Zo,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(ei,t=>{t.results=[]}).addCase(bt,(t,r)=>{let a=r.payload;t.results=t.results.filter(o=>o.uniqueId!==a.uniqueId);let n=t.results.slice(0,t.maxLength-1);t.results=[a,...n]})});var PT={initialState:{results:[]},options:{maxLength:10}},wT=new ee({results:new X({required:!0})}),ET=new ee({maxLength:new D({required:!0,min:1})});function IT(e,t){ge(e,ET,t==null?void 0:t.options,"buildRecentResultsList"),ke(e,wT,t==null?void 0:t.initialState,"buildRecentResultsList")}function ub(e,t){if(!kT(e))throw I;let r=V(e),{dispatch:a}=e,n=()=>e.state,o={...PT,...t};IT(e,o);let i={results:o.initialState.results,maxLength:o.options.maxLength};return a(Zo(i)),{...r,get state(){return n().recentResults},clear(){a(cb()),a(ei())}}}function kT(e){return e.addReducers({recentResults:yd}),!0}function lb(e,t){return ot(e,t,()=>e.dispatch(sb(t.options.result)))}function db(e,t){if(!OT(e))throw I;let r=f=>{var p,m;return(m=(p=e.state.facetOptions.facets[f])==null?void 0:p.enabled)!=null?m:!1},a=f=>{var p,m,g,y,S,C,R,P,Q,G,Z,$,H,pe,he,_;return(_=(he=(Z=(R=(g=(m=(p=e.state.facetSet)==null?void 0:p[f])==null?void 0:m.request)==null?void 0:g.currentValues)!=null?R:(C=(S=(y=e.state.categoryFacetSet)==null?void 0:y[f])==null?void 0:S.request)==null?void 0:C.currentValues)!=null?Z:(G=(Q=(P=e.state.numericFacetSet)==null?void 0:P[f])==null?void 0:Q.request)==null?void 0:G.currentValues)!=null?he:(pe=(H=($=e.state.dateFacetSet)==null?void 0:$[f])==null?void 0:H.request)==null?void 0:pe.currentValues)!=null?_:null},n=f=>f in e.state.facetOptions.facets,o=()=>kn({isFacetRegistered:n(t.facetId),parentFacets:t.conditions.map(({parentFacetId:f})=>n(f)?{enabled:r(f),values:a(f)}:null)}),i=()=>{let f=o();return f===l?!1:(l=f,!0)},s=()=>t.conditions.some(f=>{if(!r(f.parentFacetId))return!1;let p=a(f.parentFacetId);return p===null?!1:f.condition(p)}),u=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([f,p])=>p.request.freezeCurrentValues&&e.dispatch(_r({facetId:f,freezeCurrentValues:!1})))},c=()=>{if(!n(t.facetId))return;let f=r(t.facetId),p=s();f!==p&&(e.dispatch(p?We(t.facetId):ve(t.facetId)),u())};if(!t.conditions.length)return{stopWatching(){}};let l=o(),d=e.subscribe(()=>{i()&&c()});return c(),{stopWatching(){d()}}}function OT(e){return e.addReducers({facetOptions:Ne}),!0}function pb(e,t){if(!qT(e))throw I;let{facetSearch:r,allowedValues:a,...n}=t.options.facet,o=Ye(e,n);e.dispatch(hr({...ks,...n,facetId:o,...a&&{allowedValues:{type:"simple",values:a}}}));let i=il(e,{options:{...r,facetId:o},select:u=>{e.dispatch(ie()),e.dispatch(E({legacy:Pe({facetId:o,facetValue:u.rawValue}),next:{actionCause:L.facetSelect,getEventExtraPayload:c=>new U(()=>c).getFacetMetadata(o,u.rawValue)}}))},exclude:u=>{e.dispatch(ie()),e.dispatch(E({legacy:Lt({facetId:o,facetValue:u.rawValue}),next:{actionCause:L.facetExclude,getEventExtraPayload:c=>new U(()=>c).getFacetMetadata(o,u.rawValue)}}))},isForFieldSuggestions:!0});return{...V(e),...i,updateText:function(u){i.updateText(u),i.search()},get state(){return i.state}}}function qT(e){return e.addReducers({facetSet:br,configuration:z,facetSearchSet:Ho,search:J}),!0}function fb(e,t){if(!TT(e))throw I;let{facetSearch:r,...a}=t.options.facet,n=Ye(e,a);e.dispatch(ir({...ws,...a,facetId:n}));let o=el(e,{options:{...r,facetId:n},isForFieldSuggestions:!0});return{...V(e),...o,updateText:function(s){o.updateText(s),o.search()},get state(){return o.state}}}function TT(e){return e.addReducers({categoryFacetSet:cr,configuration:z,categoryFacetSearchSet:No,search:J}),!0}var mb=T(ia(),e=>{e.addCase(E.fulfilled,(t,r)=>{var n;t.set={};let a=(n=r.payload.response.generateAutomaticFacets)==null?void 0:n.facets;a==null||a.forEach(o=>{t.set[o.field]={response:o}})}).addCase(Tl,(t,r)=>{r.payload.desiredCount&&(t.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(t.numberOfValues=r.payload.numberOfValues)}).addCase(Ea,(t,r)=>{var u;let{field:a,selection:n}=r.payload,o=(u=t.set[a])==null?void 0:u.response;if(!o)return;let i=o.values.find(c=>c.value===n.value);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Dl,(t,r)=>{var o;let a=r.payload,n=(o=t.set[a])==null?void 0:o.response;if(!!n)for(let i of n.values)i.state="idle"}).addCase(ue,(t,r)=>{var o,i,s;let a=(o=r.payload.af)!=null?o:{},n=Object.keys(t.set);for(let u in a)if(!t.set[u]){let c=DT(u),l=a[u].map(d=>VT(d));c.values.push(...l),t.set[u]={response:c}}for(let u of n)if(!(u in a)){let c=(i=t.set[u])==null?void 0:i.response;for(let l of c.values)l.state="idle"}for(let u in a){let c=(s=t.set[u])==null?void 0:s.response;if(c){let l=c.values;for(let d of l)a[u].includes(d.value)?d.state==="idle"&&(d.state="selected"):d.state="idle"}}}).addCase(ce.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(Re,t=>{Object.values(t.set).forEach(({response:r})=>{r.values.forEach(a=>a.state="idle")})})});function DT(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function VT(e){return{value:e,state:"selected",numberOfResults:0}}function gb(e,t){let{dispatch:r}=e,a=V(e),{field:n}=t;return{...a,toggleSelect(o){r(Ea({field:n,selection:o})),r(E({legacy:nl(n,o),next:ol(n,o)}))},deselectAll(){r(Dl(n)),r(E({legacy:Me(n),next:{actionCause:L.facetClearAll,getEventExtraPayload:o=>new U(()=>o).getFacetClearAllMetadata(n)}}))},get state(){var s,u;let o=(u=(s=e.state.automaticFacetSet)==null?void 0:s.set[n])==null?void 0:u.response;return o?{field:o.field,label:o.label,values:o.values}:{field:"",values:[],label:""}}}}function hb(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}function Sb(e,t){if(!MT(e))throw I;let{dispatch:r}=e,a=hb(t.options);return r(Tl(a)),{...V(e),get state(){var i,s;return{automaticFacets:(s=(i=e.state.search.response.generateAutomaticFacets)==null?void 0:i.facets.map(u=>gb(e,{field:u.field})))!=null?s:[]}}}}function MT(e){return e.addReducers({automaticFacetSet:mb,configuration:z,search:J}),!0}function Sm(e,t){var r,a;return(a=(r=e.generatedAnswer)==null?void 0:r.citations)==null?void 0:a.find(n=>n.id===t)}function Rt(e){var t,r,a;return(a=(r=(t=e.search)==null?void 0:t.response)==null?void 0:r.extendedResults)==null?void 0:a.generativeQuestionAnsweringId}var yb=()=>k("analytics/generatedAnswer/retry",e=>e.makeRetryGeneratedAnswer()),Cb=e=>k("analytics/generatedAnswer/rephrase",(t,r)=>{let a=Rt(r);return a?t.makeRephraseGeneratedAnswer({generativeQuestionAnsweringId:a,rephraseFormat:e.answerStyle}):null}),Cd=e=>k("analytics/generatedAnswer/openAnswerSource",(t,r)=>{let a=Rt(r),n=Sm(r,e);return!a||!n?null:t.makeOpenGeneratedAnswerSource({generativeQuestionAnsweringId:a,permanentId:n.permanentid,citationId:n.id})}),vb=(e,t)=>k("analytics/generatedAnswer/hoverCitation",(r,a)=>{let n=Rt(a),o=Sm(a,e);return!n||!o?null:r.makeGeneratedAnswerSourceHover({generativeQuestionAnsweringId:n,permanentId:o.permanentid,citationId:o.id,citationHoverTimeMs:t})}),xb=()=>k("analytics/generatedAnswer/like",(e,t)=>{let r=Rt(t);return r?e.makeLikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null}),bb=()=>k("analytics/generatedAnswer/dislike",(e,t)=>{let r=Rt(t);return r?e.makeDislikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null}),Fb=e=>k("analytics/generatedAnswer/sendFeedback",(t,r)=>{let a=Rt(r);return a?t.makeGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:a,reason:e}):null}),Rb=e=>k("analytics/generatedAnswer/sendFeedback",(t,r)=>{let a=Rt(r);return a?t.makeGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:a,reason:"other",details:e}):null}),Ab=e=>k("analytics/generatedAnswer/streamEnd",(t,r)=>{let a=Rt(r);return a?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:a,answerGenerated:e}):null}),Pb=()=>k("analytics/generatedAnswer/show",(e,t)=>{let r=Rt(t);return r?e.makeGeneratedAnswerShowAnswers({generativeQuestionAnsweringId:r}):null}),wb=()=>k("analytics/generatedAnswer/hide",(e,t)=>{let r=Rt(t);return r?e.makeGeneratedAnswerHideAnswers({generativeQuestionAnsweringId:r}):null}),Eb=()=>k("analytics/generatedAnswer/copy",(e,t)=>{let r=Rt(t);return r?e.makeGeneratedAnswerCopyToClipboard({generativeQuestionAnsweringId:r}):null});var Ib=async e=>{var t;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:(t=e.search.extendedResults)==null?void 0:t.generativeQuestionAnsweringId}};var kb=["default","bullet","step","concise"];var $s=new w({required:!0}),Ob=new w,ym=new K({required:!0}),NT={id:$s,title:$s,uri:$s,permanentid:$s,clickUri:Ob},Ii=v("generatedAnswer/setIsVisible",e=>b(e,ym)),Cm=v("generatedAnswer/updateMessage",e=>b(e,{textDelta:$s})),vm=v("generatedAnswer/updateCitations",e=>b(e,{citations:new X({required:!0,each:new q({values:NT})})})),xm=v("generatedAnswer/updateError",e=>b(e,{message:Ob,code:new D({min:0})})),vn=v("generatedAnswer/resetAnswer"),vd=v("generatedAnswer/like"),xd=v("generatedAnswer/dislike"),bd=v("generatedAnswer/feedbackModal/open"),Fd=v("generatedAnswer/feedbackModal/close"),Hs=v("generatedAnswer/sendFeedback"),zs=v("generatedAnswer/setIsLoading",e=>b(e,ym)),Rd=v("generatedAnswer/setIsStreaming",e=>b(e,ym)),Gs=v("generatedAnswer/updateResponseFormat",e=>b(e,{answerStyle:new w({required:!0,constrainTo:kb})})),qb=ae("generatedAnswer/streamAnswer",async(e,t)=>{var l;let r=t.getState(),{dispatch:a,extra:n}=t,{setAbortControllerRef:o}=e,i=await Ib(r),s=(d,f)=>{switch(d){case"genqa.messageType":a(Cm(JSON.parse(f)));break;case"genqa.citationsType":a(vm(JSON.parse(f)));break;case"genqa.endOfStreamType":a(Rd(!1)),a(Ab(JSON.parse(f).answerGenerated));break;default:r.debug&&n.logger.warn(`Unknown payloadType: "${d}"`)}};a(zs(!0));let u=d=>d.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,c=(l=n.streamingClient)==null?void 0:l.streamGeneratedAnswer(i,{write:d=>{u(i)&&(a(zs(!1)),d.payload&&d.payloadType&&s(d.payloadType,d.payload))},abort:d=>{u(i)&&a(xm(d))},close:()=>{u(i)&&a(Rd(!1))},resetAnswer:()=>{u(i)&&a(vn())}});c?o(c):a(zs(!1))});var Ad=T(Mn(),e=>e.addCase(Ii,(t,{payload:r})=>{t.isVisible=r}).addCase(Cm,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.answer||(t.answer=""),t.answer+=r.textDelta,delete t.error}).addCase(vm,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.citations=t.citations.concat(r.citations),delete t.error}).addCase(xm,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!1,t.error={...r,isRetryable:r.code===lf},t.citations=[],delete t.answer}).addCase(vd,t=>{t.liked=!0,t.disliked=!1}).addCase(xd,t=>{t.liked=!1,t.disliked=!0}).addCase(bd,t=>{t.feedbackModalOpen=!0}).addCase(Fd,t=>{t.feedbackModalOpen=!1}).addCase(Hs,t=>{t.feedbackSubmitted=!0}).addCase(vn,t=>({...Mn(),responseFormat:t.responseFormat,isVisible:t.isVisible})).addCase(zs,(t,{payload:r})=>{t.isLoading=r}).addCase(Rd,(t,{payload:r})=>{t.isStreaming=r}).addCase(Gs,(t,{payload:r})=>{t.responseFormat=r}));var At={abortController:void 0,lastRequestId:"",lastStreamId:"",setAbortControllerRef:e=>{At.abortController=e},getIsStreamInProgress:()=>{var e;return!At.abortController||((e=At.abortController)==null?void 0:e.signal.aborted)?(At.abortController=void 0,!1):!0},subscribeToSearchRequests:e=>{let t=()=>{var i;let r=e.state,a=r.search.requestId,n=r.search.extendedResults.generativeQuestionAnsweringId;At.lastRequestId!==a&&(At.lastRequestId=a,(i=At.abortController)==null||i.abort(),e.dispatch(vn())),!At.getIsStreamInProgress()&&n&&n!==At.lastStreamId&&(At.lastStreamId=n,e.dispatch(qb({setAbortControllerRef:At.setAbortControllerRef})))};return e.subscribe(t)}};function Tb(e,t={}){var s,u;if(!LT(e))throw I;let{dispatch:r}=e,a=V(e),n=()=>e.state,o=(s=t.initialState)==null?void 0:s.isVisible;o!==void 0&&r(Ii(o));let i=(u=t.initialState)==null?void 0:u.responseFormat;return i&&r(Gs(i)),At.subscribeToSearchRequests(e),{...a,get state(){return n().generatedAnswer},retry(){r(E({legacy:yb()}))},like(){this.state.liked||(r(vd()),r(xb()))},dislike(){this.state.disliked||(r(xd()),r(bb()))},openFeedbackModal(){r(bd())},closeFeedbackModal(){r(Fd())},sendFeedback(c){r(Fb(c)),r(Hs())},sendDetailedFeedback(c){r(Rb(c)),r(Hs())},logCitationClick(c){r(Cd(c))},logCitationHover(c,l){r(vb(c,l))},rephrase(c){r(Gs(c)),r(E({legacy:Cb(c)}))},show(){this.state.isVisible||(r(Ii(!0)),r(Pb()))},hide(){this.state.isVisible&&(r(Ii(!1)),r(wb()))},logCopyToClipboard(){r(Eb())}}}function LT(e){return e.addReducers({generatedAnswer:Ad}),!0}function Db(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch(Cd(t.options.citation.id)))};return ot(e,t,()=>{a()})}var Ma=()=>new w({required:!1,emptyAllowed:!0}),Pd=v("advancedSearchQueries/update",e=>b(e,{aq:Ma(),cq:Ma(),lq:Ma(),dq:Ma()})),wd=v("advancedSearchQueries/register",e=>b(e,{aq:Ma(),cq:Ma(),lq:Ma(),dq:Ma()}));var Vb=T(at(),e=>{e.addCase(Pd,(t,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;Ie(a)||(t.aq=a,t.aqWasSet=!0),Ie(n)||(t.cq=n,t.cqWasSet=!0),Ie(o)||(t.lq=o,t.lqWasSet=!0),Ie(i)||(t.dq=i,t.dqWasSet=!0)}).addCase(wd,(t,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;Ie(a)||(t.defaultFilters.aq=a,t.aqWasSet||(t.aq=a)),Ie(n)||(t.defaultFilters.cq=n,t.cqWasSet||(t.cq=n)),Ie(o)||(t.defaultFilters.lq=o,t.lqWasSet||(t.lq=o)),Ie(i)||(t.defaultFilters.dq=i,t.dqWasSet||(t.dq=i))}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.advancedSearchQueries)!=null?n:t}).addCase(ue,(t,r)=>{let{aq:a,cq:n}=r.payload;Ie(a)||(t.aq=a,t.aqWasSet=!0),Ie(n)||(t.cq=n,t.cqWasSet=!0)})});function QT(e){return e.addReducers({advancedSearchQueries:Vb}),{updateAdvancedSearchQueries:Pd,registerAdvancedSearchQueries:wd}}function BT(e){return e.addReducers({categoryFacetSet:cr}),{deselectAllCategoryFacetValues:sr,registerCategoryFacet:ir,toggleSelectCategoryFacetValue:va,updateCategoryFacetNumberOfValues:sn,updateCategoryFacetSortCriterion:Vo,updateFacetAutoSelection:ht,updateCategoryFacetBasePath:Nu}}function jT(e){return e.addReducers({facetSet:br}),{deselectAllFacetValues:xe,registerFacet:hr,toggleSelectFacetValue:Sr,toggleExcludeFacetValue:ba,updateFacetIsFieldExpanded:dn,updateFacetNumberOfValues:ln,updateFacetSortCriterion:Uo,updateFreezeCurrentValues:_r,updateFacetAutoSelection:ht}}function UT(e){return e.addReducers({configuration:z}),{disableAnalytics:Xn,enableAnalytics:Zn,setOriginLevel2:uu,setOriginLevel3:lu,updateAnalyticsConfiguration:ua,updateBasicConfiguration:tr}}function _T(e){return e.addReducers({configuration:z,pipeline:ao,searchHub:oo}),{updateSearchConfiguration:gt}}function $T(e){return e.addReducers({context:Ou}),{addContext:nn,removeContext:on,setContext:an}}function HT(e){return e.addReducers({dictionaryFieldContext:Tu}),{addContext:Io,removeContext:ko,setContext:Eo}}function zT(e){return e.addReducers({debug:to}),{disableDebug:eo,enableDebug:la}}function GT(e){return e.addReducers({dateFacetSet:Fr}),{deselectAllDateFacetValues:Ku,registerDateFacet:yr,toggleSelectDateFacetValue:Cr,toggleExcludeDateFacetValue:Ra,updateDateFacetSortCriterion:Yu,updateDateFacetValues:$r}}function WT(e){return e.addReducers({facetOptions:Ne}),{updateFacetOptions:ie,enableFacet:We,disableFacet:ve}}function YT(e){return e.addReducers({didYouMean:Du,query:Ft}),{applyDidYouMeanCorrection:Ct,disableDidYouMean:yu,enableDidYouMean:yo,enableAutomaticQueryCorrection:Cu,disableAutomaticQueryCorrection:Co}}function KT(e){return e.addReducers({fields:Ca}),{registerFieldsToInclude:ha,enableFetchAllFields:Po,disableFetchAllFields:rn,fetchFieldsDescription:wo}}function JT(e){return e.addReducers({history:ql,facetOrder:wl}),{back:ys,forward:pu}}function XT(e){return e.addReducers({numericFacetSet:vt}),{deselectAllNumericFacetValues:Zu,registerNumericFacet:vr,toggleSelectNumericFacetValue:xr,toggleExcludeNumericFacetValue:Aa,updateNumericFacetSortCriterion:Xu,updateNumericFacetValues:Hr}}function ZT(e){return e.addReducers({folding:pd}),{registerFolding:Sa,loadCollection:ya}}function eD(e){return e.addReducers({pagination:Ar}),{nextPage:po,previousPage:fo,registerNumberOfResults:co,registerPage:lo,updateNumberOfResults:uo,updatePage:St}}function tD(e){return e.addReducers({pipeline:ao}),{setPipeline:ro}}function rD(e){return e.addReducers({query:Ft}),{updateQuery:Ge}}function aD(e){return e.addReducers({querySet:ai}),{registerQuerySetQuery:ri,updateQuerySetQuery:hn}}function nD(e){return e.addReducers({instantResults:_l}),{registerInstantResults:io,updateInstantResultsQuery:rr,clearExpiredResults:so}}function oD(e){return e.addReducers({querySuggest:ni,querySet:ai}),{clearQuerySuggest:Ia,fetchQuerySuggestions:ka,registerQuerySuggest:ti,selectQuerySuggestion:Pr}}function iD(e){return e.addReducers({search:J}),{executeSearch:xo,fetchMoreResults:Fo,fetchFacetValues:Pu,fetchPage:bo,fetchInstantResults:qy}}function sD(e){return e.addReducers({searchHub:oo}),{setSearchHub:no}}function cD(e){return e.addReducers({sortCriteria:Hl}),{registerSortCriterion:ii,updateSortCriterion:si}}function uD(e){return e.addReducers({standaloneSearchBoxSet:nd}),{registerStandaloneSearchBox:li,fetchRedirectUrl:Ta,updateAnalyticsToSearchFromLink:pi,updateAnalyticsToOmniboxFromLink:fi,resetStandaloneSearchBox:di}}function lD(e){return e.addReducers({staticFilterSet:Kl}),{registerStaticFilter:ci,toggleSelectStaticFilterValue:Gr,toggleExcludeStaticFilterValue:Wr,deselectAllStaticFilterValues:qa}}function dD(e){return e.addReducers({tabSet:Zl}),{registerTab:Ao,updateActiveTab:Mt}}function pD(e){return e.addReducers({questionAnswering:wr}),{collapseSmartSnippet:xi,expandSmartSnippet:vi,dislikeSmartSnippet:Fi,likeSmartSnippet:bi,openFeedbackModal:Ri,closeFeedbackModal:Va,expandSmartSnippetRelatedQuestion:Ai,collapseSmartSnippetRelatedQuestion:Pi}}function fD(e){return e.addReducers({}),{deselectAllBreadcrumbs:Re,deselectAllNonBreadcrumbs:da}}function mD(e){return e.addReducers({recentQueries:Sd}),{registerRecentQueries:wi,clearRecentQueries:Ei}}function gD(e){return e.addReducers({recentResults:yd}),{registerRecentResults:Zo,clearRecentResults:ei,pushRecentResult:bt}}var Ed=v("excerptLength/set",e=>b(e,new D({min:0,required:!0})));var Mb=T(Mc(),e=>{e.addCase(Ed,(t,r)=>{t.length=r.payload})});function hD(e){return e.addReducers({excerptLength:Mb}),{setExcerptLength:Ed}}function SD(e){return e.addReducers({resultPreview:ld}),{fetchResultContent:yn,updateContentURL:yi,nextPreview:gi,previousPreview:hi,preparePreviewPagination:Si}}function yD(e){return e.addReducers({generatedAnswer:Ad}),{resetAnswer:vn}}var CD=new ee({content:new fe({required:!0}),conditions:new fe({required:!0}),priority:new D({required:!1,default:0,min:0}),fields:new X({required:!1,each:O})});function Nb(e){if(!vD(e))throw I;let t=[],r=a=>{a.forEach(n=>{if(CD.validate(n),!n.conditions.every(i=>i instanceof Function))throw new Zi("Each result template conditions should be a function that takes a result as an argument and returns a boolean")})};return{registerTemplates(...a){let n=[];r(a),a.forEach(o=>{let i={...o,priority:o.priority||0,fields:o.fields||[]};t.push(i),n.push(...i.fields)}),t.sort((o,i)=>i.priority-o.priority),n.length&&e.dispatch(ha(n))},selectTemplate(a){let n=t.find(o=>o.conditions.every(i=>i(a)));return n?n.content:null}}}function vD(e){return e.addReducers({fields:Ca}),!0}var bm;(o=>{o.getResultProperty=Ur,o.fieldsMustBeDefined=My,o.fieldsMustNotBeDefined=Ny,o.fieldMustMatch=Ly,o.fieldMustNotMatch=Qy})(bm||(bm={}));function xD(e){return e.addReducers({}),{logClearBreadcrumbs:td,logInterfaceLoad:iu,logSearchFromLink:su,logOmniboxFromLink:cu,logInterfaceChange:ca,logDidYouMeanClick:vu,logCategoryFacetBreadcrumb:ed,logFacetBreadcrumb:Bo,logFacetClearAll:Me,logFacetDeselect:dt,logFacetSelect:Pe,logFacetShowLess:Qo,logFacetShowMore:Lo,logFacetUpdateSort:lr,logDateFacetBreadcrumb:Ms,logNumericFacetBreadcrumb:Ns,logNavigateBackward:Il,logNavigateForward:El,logPageNext:Ml,logPageNumber:Jo,logPagePrevious:Nl,logPagerResize:Ko,logSearchboxSubmit:Oa,logQuerySuggestionClick:Bl,logResultsSort:oi,logDislikeSmartSnippet:um,logLikeSmartSnippet:cm,logOpenSmartSnippetFeedbackModal:dm,logCloseSmartSnippetFeedbackModal:pm,logSmartSnippetFeedback:fm,logSmartSnippetDetailedFeedback:mm,logExpandSmartSnippet:im,logCollapseSmartSnippet:sm,logExpandSmartSnippetSuggestion:gm,logCollapseSmartSnippetSuggestion:hm,logNoResultsBack:kl,logStaticFilterSelect:Wl,logStaticFilterDeselect:ui,logStaticFilterClearAll:Yl,logTriggerQuery:xu,logUndoTriggerQuery:bu,logNotifyTrigger:Fu,logTriggerRedirect:Ru,logTriggerExecute:Au}}function bD(e){return e.addReducers({}),{logDocumentOpen:Ql,logOpenSmartSnippetSource:lm,logOpenSmartSnippetSuggestionSource:_s,logOpenSmartSnippetInlineLink:Us,logOpenSmartSnippetSuggestionInlineLink:md}}function FD(e){return e.addReducers({}),{logSearchEvent:uy,logClickEvent:ly,logCustomEvent:dy}}function RD(e){let{by:t,order:r}=e;switch(t){case Ot.Relevancy:return Ln();case Ot.QRE:return kc();case Ot.NoSort:return Oc();case Ot.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return Ec(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return Ic(t,r)}}function AD(e){return e===void 0||e===Nr.Ascending||e===Nr.Descending}function Lb(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map(a=>{let n=a.trim().split(" "),o=n[0].toLowerCase(),i=n[1]&&n[1].toLowerCase();if(n.length>2||o==="")throw r;if(!AD(i))throw new Error(`Wrong criterion sort order "${i}" in expression "${e}". Order should either be "${Nr.Ascending}" or "${Nr.Descending}"`);return RD({by:o,order:i})})}function Le(e){return e.negate?"NOT ":""}function Pt(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function Qb(e){return{toQuerySyntax(){let{field:t,value:r}=e,a=Pt(e.operator);return`${Le(e)}@${t}${a}${r}`}}}function Bb(e){return{toQuerySyntax(){let t=Le(e),{field:r,from:a,to:n}=e,o=Pt("isExactly");return`${t}@${r}${o}${a}..${n}`}}}function jb(e){return{toQuerySyntax(){let t=Le(e),{expression:r}=e;return`${t}"${r}"`}}}function Ub(e){return{toQuerySyntax(){let t=Le(e),{field:r}=e;return`${t}@${r}`}}}function _b(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}function $b(e){return{toQuerySyntax(){let t=Le(e),{startTerm:r,otherTerms:a}=e,n=PD(a),o=`${r} ${n}`;return e.negate?`${t}(${o})`:o}}}function PD(e){return e.map(t=>{let{endTerm:r,maxKeywordsBetween:a}=t;return`near:${a} ${r}`}).join(" ")}function Hb(e){return{toQuerySyntax(){let{field:t,value:r}=e,a=Le(e),n=Pt(e.operator);return`${a}@${t}${n}${r}`}}}function zb(e){return{toQuerySyntax(){let t=Le(e),{field:r,from:a,to:n}=e,o=Pt("isExactly");return`${t}@${r}${o}${a}..${n}`}}}function Gb(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,a=wD(r);return`$${t}(${a})`}}}function wD(e){return Object.entries(e).map(t=>{let[r,a]=t,n=typeof a=="string"?a:a.toQuerySyntax();return`${r}: ${n}`}).join(", ")}function Wb(e){return{toQuerySyntax(){let t=Le(e),{field:r,operator:a,value:n}=e,o=Pt(a),i=a==="fuzzyMatch"?` $quoteVar(value: ${n})`:`("${n}")`;return`${t}@${r}${o}${i}`}}}function Yb(e){return{toQuerySyntax(){let{field:t}=e,r=Le(e),a=Pt(e.operator),n=e.values.map(i=>`"${i}"`),o=n.length===1?n[0]:`(${n.join(",")})`;return`${r}@${t}${a}${o}`}}}function ED(){let e=[],t="and";return{addExpression(r){return e.push(r),this},addKeyword(r){return e.push(_b(r)),this},addNear(r){return e.push($b(r)),this},addExactMatch(r){return e.push(jb(r)),this},addFieldExists(r){return e.push(Ub(r)),this},addStringField(r){return e.push(Yb(r)),this},addStringFacetField(r){return e.push(Wb(r)),this},addNumericField(r){return e.push(Hb(r)),this},addNumericRangeField(r){return e.push(zb(r)),this},addDateField(r){return e.push(Qb(r)),this},addDateRangeField(r){return e.push(Bb(r)),this},addQueryExtension(r){return e.push(Gb(r)),this},joinUsing(r){return t=r,this},toQuerySyntax(){let r=ID(t),a=e.map(n=>n.toQuerySyntax()).join(`) ${r} (`);return e.length<=1?a:`(${a})`}}}function ID(e){return e==="and"?"AND":"OR"}var kD={buildMockRaw:Bn,buildMockSearchAppEngine:Np,buildMockResult:Lp,createMockState:ls};Rm();
/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
}));
//# sourceMappingURL=headless.js.map
