/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function (global, factory) {
    const isCommonjs = typeof exports === 'object' && typeof module !== 'undefined';
    
    if (isCommonjs) {
      return factory(exports);
    }
    
    const isAmd = typeof define === 'function' && define.amd;

    if (isAmd) {
      return define(['exports'], factory);
    }

    global = typeof globalThis !== 'undefined' ? globalThis : global || self;
    factory(global.CoveoHeadlessProductListing = {});
  })(this, (function (exports) { 'use strict';
var BC=Object.create;var xi=Object.defineProperty;var jC=Object.getOwnPropertyDescriptor;var UC=Object.getOwnPropertyNames;var _C=Object.getPrototypeOf,$C=Object.prototype.hasOwnProperty;var mf=t=>xi(t,"__esModule",{value:!0});var de=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gf=(t,e)=>{mf(t);for(var r in e)xi(t,r,{get:e[r],enumerable:!0})},b=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of UC(e))!$C.call(t,a)&&a!=="default"&&xi(t,a,{get:()=>e[a],enumerable:!(r=jC(e,a))||r.enumerable});return t},Pe=t=>b(mf(xi(t!=null?BC(_C(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Sf=de((WI,hf)=>{hf.exports=fetch});var yf=de(oo=>{"use strict";var Fi=oo&&oo.__assign||function(){return Fi=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Fi.apply(this,arguments)};Object.defineProperty(oo,"__esModule",{value:!0});var HC={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function zC(t){var e=Fi(Fi({},HC),t);return e.numOfAttempts<1&&(e.numOfAttempts=1),e}oo.getSanitizedOptions=zC});var Cf=de(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});function GC(t){var e=Math.random()*t;return Math.round(e)}Eu.fullJitter=GC});var xf=de(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});function WC(t){return t}Iu.noJitter=WC});var vf=de(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});var YC=Cf(),KC=xf();function JC(t){switch(t.jitter){case"full":return YC.fullJitter;case"none":default:return KC.noJitter}}ku.JitterFactory=JC});var qu=de(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});var XC=vf(),ZC=function(){function t(e){this.options=e,this.attempt=0}return t.prototype.apply=function(){var e=this;return new Promise(function(r){return setTimeout(r,e.jitteredDelay)})},t.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(t.prototype,"jitteredDelay",{get:function(){var e=XC.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){var e=this.options.startingDelay,r=this.options.timeMultiple,a=this.numOfDelayedAttempts,n=e*Math.pow(r,a);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),t}();Ou.Delay=ZC});var Ff=de(Zt=>{"use strict";var ex=Zt&&Zt.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},t(e,r)};return function(e,r){t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),tx=Zt&&Zt.__awaiter||function(t,e,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(t,e||[])).next())})},rx=Zt&&Zt.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Zt,"__esModule",{value:!0});var ax=qu(),nx=function(t){ex(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.apply=function(){return tx(this,void 0,void 0,function(){return rx(this,function(r){return[2,this.isFirstAttempt?!0:t.prototype.apply.call(this)]})})},Object.defineProperty(e.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),e}(ax.Delay);Zt.SkipFirstDelay=nx});var Rf=de(io=>{"use strict";var ox=io&&io.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},t(e,r)};return function(e,r){t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(io,"__esModule",{value:!0});var ix=qu(),sx=function(t){ox(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(ix.Delay);io.AlwaysDelay=sx});var bf=de(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});var cx=Ff(),ux=Rf();function lx(t,e){var r=dx(t);return r.setAttemptNumber(e),r}Tu.DelayFactory=lx;function dx(t){return t.delayFirstAttempt?new ux.AlwaysDelay(t):new cx.SkipFirstDelay(t)}});var Af=de(Zr=>{"use strict";var Du=Zr&&Zr.__awaiter||function(t,e,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(t,e||[])).next())})},Vu=Zr&&Zr.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Zr,"__esModule",{value:!0});var px=yf(),fx=bf();function mx(t,e){return e===void 0&&(e={}),Du(this,void 0,void 0,function(){var r,a;return Vu(this,function(n){switch(n.label){case 0:return r=px.getSanitizedOptions(e),a=new gx(t,r),[4,a.execute()];case 1:return[2,n.sent()]}})})}Zr.backOff=mx;var gx=function(){function t(e,r){this.request=e,this.options=r,this.attemptNumber=0}return t.prototype.execute=function(){return Du(this,void 0,void 0,function(){var e,r;return Vu(this,function(a){switch(a.label){case 0:if(this.attemptLimitReached)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return a.sent(),[4,this.request()];case 3:return[2,a.sent()];case 4:return e=a.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(r=a.sent(),!r||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(t.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),t.prototype.applyDelay=function(){return Du(this,void 0,void 0,function(){var e;return Vu(this,function(r){switch(r.label){case 0:return e=fx.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return r.sent(),[2]}})})},t}()});var wf=de((ok,Pf)=>{"use strict";function hx(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(t=`${t}`,t=t.replace(/[ \t\n\f\r]/g,""),t.length%4==0&&(t=t.replace(/==?$/,"")),t.length%4==1||/[^+/0-9A-Za-z]/.test(t))return null;let e="",r=0,a=0;for(let n=0;n<t.length;n++)r<<=6,r|=yx(t[n]),a+=6,a===24&&(e+=String.fromCharCode((r&16711680)>>16),e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255),r=a=0);return a===12?(r>>=4,e+=String.fromCharCode(r)):a===18&&(r>>=2,e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255)),e}var Sx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function yx(t){let e=Sx.indexOf(t);return e<0?void 0:e}Pf.exports=hx});var If=de((ik,Ef)=>{"use strict";function Cx(t){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let e;for(t=`${t}`,e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return null;let r="";for(e=0;e<t.length;e+=3){let a=[void 0,void 0,void 0,void 0];a[0]=t.charCodeAt(e)>>2,a[1]=(t.charCodeAt(e)&3)<<4,t.length>e+1&&(a[1]|=t.charCodeAt(e+1)>>4,a[2]=(t.charCodeAt(e+1)&15)<<2),t.length>e+2&&(a[2]|=t.charCodeAt(e+2)>>6,a[3]=t.charCodeAt(e+2)&63);for(let n=0;n<a.length;n++)typeof a[n]=="undefined"?r+="=":r+=vx(a[n])}return r}var xx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function vx(t){if(t>=0&&t<64)return xx[t]}Ef.exports=Cx});var Lu=de((sk,kf)=>{"use strict";var Fx=wf(),Rx=If();kf.exports={atob:Fx,btoa:Rx}});var zf=de((kk,Hf)=>{"use strict";var Qu=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!Qu)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!Qu.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');Hf.exports.AbortController=Qu.AbortController});var rl=de((lO,tr)=>{function tl(t){return tr.exports=tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr.exports.__esModule=!0,tr.exports.default=tr.exports,tl(t)}tr.exports=tl,tr.exports.__esModule=!0,tr.exports.default=tr.exports});var fm=de((dO,Co)=>{var pm=rl().default;function rv(t,e){if(pm(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e||"default");if(pm(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}Co.exports=rv,Co.exports.__esModule=!0,Co.exports.default=Co.exports});var mm=de((pO,xo)=>{var av=rl().default,nv=fm();function ov(t){var e=nv(t,"string");return av(e)==="symbol"?e:String(e)}xo.exports=ov,xo.exports.__esModule=!0,xo.exports.default=xo.exports});var gm=de((fO,vo)=>{var iv=mm();function sv(t,e,r){return e=iv(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}vo.exports=sv,vo.exports.__esModule=!0,vo.exports.default=vo.exports});var Sm=de((mO,Fo)=>{var cv=gm();function hm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function uv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hm(Object(r),!0).forEach(function(a){cv(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hm(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}Fo.exports=uv,Fo.exports.__esModule=!0,Fo.exports.default=Fo.exports});var bo=de(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});var lv=Sm();function dv(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var ym=dv(lv);function Le(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Cm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),al=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ro={INIT:"@@redux/INIT"+al(),REPLACE:"@@redux/REPLACE"+al(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+al()}};function pv(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function nl(t,e,r){var a;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Le(0));if(typeof e=="function"&&typeof r=="undefined"&&(r=e,e=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(Le(1));return r(nl)(t,e)}if(typeof t!="function")throw new Error(Le(2));var n=t,o=e,i=[],s=i,u=!1;function c(){s===i&&(s=i.slice())}function l(){if(u)throw new Error(Le(3));return o}function d(g){if(typeof g!="function")throw new Error(Le(4));if(u)throw new Error(Le(5));var x=!0;return c(),s.push(g),function(){if(!!x){if(u)throw new Error(Le(6));x=!1,c();var F=s.indexOf(g);s.splice(F,1),i=null}}}function m(g){if(!pv(g))throw new Error(Le(7));if(typeof g.type=="undefined")throw new Error(Le(8));if(u)throw new Error(Le(9));try{u=!0,o=n(o,g)}finally{u=!1}for(var x=i=s,R=0;R<x.length;R++){var F=x[R];F()}return g}function p(g){if(typeof g!="function")throw new Error(Le(10));n=g,m({type:Ro.REPLACE})}function f(){var g,x=d;return g={subscribe:function(F){if(typeof F!="object"||F===null)throw new Error(Le(11));function A(){F.next&&F.next(l())}A();var P=x(A);return{unsubscribe:P}}},g[Cm]=function(){return this},g}return m({type:Ro.INIT}),a={dispatch:m,subscribe:d,getState:l,replaceReducer:p},a[Cm]=f,a}var fv=nl;function mv(t){Object.keys(t).forEach(function(e){var r=t[e],a=r(void 0,{type:Ro.INIT});if(typeof a=="undefined")throw new Error(Le(12));if(typeof r(void 0,{type:Ro.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Le(13))})}function gv(t){for(var e=Object.keys(t),r={},a=0;a<e.length;a++){var n=e[a];typeof t[n]=="function"&&(r[n]=t[n])}var o=Object.keys(r),i,s;try{mv(r)}catch(u){s=u}return function(c,l){if(c===void 0&&(c={}),s)throw s;if(!1)var d;for(var m=!1,p={},f=0;f<o.length;f++){var g=o[f],x=r[g],R=c[g],F=x(R,l);if(typeof F=="undefined"){var A=l&&l.type;throw new Error(Le(14))}p[g]=F,m=m||F!==R}return m=m||o.length!==Object.keys(c).length,m?p:c}}function xm(t,e){return function(){return e(t.apply(this,arguments))}}function hv(t,e){if(typeof t=="function")return xm(t,e);if(typeof t!="object"||t===null)throw new Error(Le(16));var r={};for(var a in t){var n=t[a];typeof n=="function"&&(r[a]=xm(n,e))}return r}function vm(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(a){return a}:e.length===1?e[0]:e.reduce(function(a,n){return function(){return a(n.apply(void 0,arguments))}})}function Sv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(a){return function(){var n=a.apply(void 0,arguments),o=function(){throw new Error(Le(15))},i={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=e.map(function(u){return u(i)});return o=vm.apply(void 0,s)(n.dispatch),ym.default(ym.default({},n),{},{dispatch:o})}}}rr.__DO_NOT_USE__ActionTypes=Ro;rr.applyMiddleware=Sv;rr.bindActionCreators=hv;rr.combineReducers=gv;rr.compose=vm;rr.createStore=nl;rr.legacy_createStore=fv});var Ah=de((mD,bh)=>{var Vb=/(^|; )Coveo-Pendragon=([^;]*)/;bh.exports=()=>Vb.exec(document.cookie)?.pop()||null});var ls=de((Gl,Wl)=>{(function(t,e){typeof Gl=="object"&&typeof Wl!="undefined"?Wl.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs=e()})(Gl,function(){"use strict";var t=1e3,e=6e4,r=36e5,a="millisecond",n="second",o="minute",i="hour",s="day",u="week",c="month",l="quarter",d="year",m="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Q){var D=["th","st","nd","rd"],L=Q%100;return"["+Q+(D[(L-20)%10]||D[L]||D[0])+"]"}},R=function(Q,D,L){var $=String(Q);return!$||$.length>=D?Q:""+Array(D+1-$.length).join(L)+Q},F={s:R,z:function(Q){var D=-Q.utcOffset(),L=Math.abs(D),$=Math.floor(L/60),M=L%60;return(D<=0?"+":"-")+R($,2,"0")+":"+R(M,2,"0")},m:function Q(D,L){if(D.date()<L.date())return-Q(L,D);var $=12*(L.year()-D.year())+(L.month()-D.month()),M=D.clone().add($,c),Z=L-M<0,re=D.clone().add($+(Z?-1:1),c);return+(-($+(L-M)/(Z?M-re:re-M))||0)},a:function(Q){return Q<0?Math.ceil(Q)||0:Math.floor(Q)},p:function(Q){return{M:c,y:d,w:u,d:s,D:m,h:i,m:o,s:n,ms:a,Q:l}[Q]||String(Q||"").toLowerCase().replace(/s$/,"")},u:function(Q){return Q===void 0}},A="en",P={};P[A]=x;var N="$isDayjsObject",K=function(Q){return Q instanceof ge||!(!Q||!Q[N])},te=function Q(D,L,$){var M;if(!D)return A;if(typeof D=="string"){var Z=D.toLowerCase();P[Z]&&(M=Z),L&&(P[Z]=L,M=Z);var re=D.split("-");if(!M&&re.length>1)return Q(re[0])}else{var ce=D.name;P[ce]=D,M=ce}return!$&&M&&(A=M),M||!$&&A},Y=function(Q,D){if(K(Q))return Q.clone();var L=typeof D=="object"?D:{};return L.date=Q,L.args=arguments,new ge(L)},j=F;j.l=te,j.i=K,j.w=function(Q,D){return Y(Q,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var ge=function(){function Q(L){this.$L=te(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[N]=!0}var D=Q.prototype;return D.parse=function(L){this.$d=function($){var M=$.date,Z=$.utc;if(M===null)return new Date(NaN);if(j.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var re=M.match(f);if(re){var ce=re[2]-1||0,xe=(re[7]||"0").substring(0,3);return Z?new Date(Date.UTC(re[1],ce,re[3]||1,re[4]||0,re[5]||0,re[6]||0,xe)):new Date(re[1],ce,re[3]||1,re[4]||0,re[5]||0,re[6]||0,xe)}}return new Date(M)}(L),this.init()},D.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},D.$utils=function(){return j},D.isValid=function(){return this.$d.toString()!==p},D.isSame=function(L,$){var M=Y(L);return this.startOf($)<=M&&M<=this.endOf($)},D.isAfter=function(L,$){return Y(L)<this.startOf($)},D.isBefore=function(L,$){return this.endOf($)<Y(L)},D.$g=function(L,$,M){return j.u(L)?this[$]:this.set(M,L)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(L,$){var M=this,Z=!!j.u($)||$,re=j.p(L),ce=function(mt,Te){var Xe=j.w(M.$u?Date.UTC(M.$y,Te,mt):new Date(M.$y,Te,mt),M);return Z?Xe:Xe.endOf(s)},xe=function(mt,Te){return j.w(M.toDate()[mt].apply(M.toDate("s"),(Z?[0,0,0,0]:[23,59,59,999]).slice(Te)),M)},Ae=this.$W,qe=this.$M,ze=this.$D,Ir="set"+(this.$u?"UTC":"");switch(re){case d:return Z?ce(1,0):ce(31,11);case c:return Z?ce(1,qe):ce(0,qe+1);case u:var At=this.$locale().weekStart||0,Jt=(Ae<At?Ae+7:Ae)-At;return ce(Z?ze-Jt:ze+(6-Jt),qe);case s:case m:return xe(Ir+"Hours",0);case i:return xe(Ir+"Minutes",1);case o:return xe(Ir+"Seconds",2);case n:return xe(Ir+"Milliseconds",3);default:return this.clone()}},D.endOf=function(L){return this.startOf(L,!1)},D.$set=function(L,$){var M,Z=j.p(L),re="set"+(this.$u?"UTC":""),ce=(M={},M[s]=re+"Date",M[m]=re+"Date",M[c]=re+"Month",M[d]=re+"FullYear",M[i]=re+"Hours",M[o]=re+"Minutes",M[n]=re+"Seconds",M[a]=re+"Milliseconds",M)[Z],xe=Z===s?this.$D+($-this.$W):$;if(Z===c||Z===d){var Ae=this.clone().set(m,1);Ae.$d[ce](xe),Ae.init(),this.$d=Ae.set(m,Math.min(this.$D,Ae.daysInMonth())).$d}else ce&&this.$d[ce](xe);return this.init(),this},D.set=function(L,$){return this.clone().$set(L,$)},D.get=function(L){return this[j.p(L)]()},D.add=function(L,$){var M,Z=this;L=Number(L);var re=j.p($),ce=function(qe){var ze=Y(Z);return j.w(ze.date(ze.date()+Math.round(qe*L)),Z)};if(re===c)return this.set(c,this.$M+L);if(re===d)return this.set(d,this.$y+L);if(re===s)return ce(1);if(re===u)return ce(7);var xe=(M={},M[o]=e,M[i]=r,M[n]=t,M)[re]||1,Ae=this.$d.getTime()+L*xe;return j.w(Ae,this)},D.subtract=function(L,$){return this.add(-1*L,$)},D.format=function(L){var $=this,M=this.$locale();if(!this.isValid())return M.invalidDate||p;var Z=L||"YYYY-MM-DDTHH:mm:ssZ",re=j.z(this),ce=this.$H,xe=this.$m,Ae=this.$M,qe=M.weekdays,ze=M.months,Ir=M.meridiem,At=function(Te,Xe,Xt,kr){return Te&&(Te[Xe]||Te($,Z))||Xt[Xe].slice(0,kr)},Jt=function(Te){return j.s(ce%12||12,Te,"0")},mt=Ir||function(Te,Xe,Xt){var kr=Te<12?"AM":"PM";return Xt?kr.toLowerCase():kr};return Z.replace(g,function(Te,Xe){return Xe||function(Xt){switch(Xt){case"YY":return String($.$y).slice(-2);case"YYYY":return j.s($.$y,4,"0");case"M":return Ae+1;case"MM":return j.s(Ae+1,2,"0");case"MMM":return At(M.monthsShort,Ae,ze,3);case"MMMM":return At(ze,Ae);case"D":return $.$D;case"DD":return j.s($.$D,2,"0");case"d":return String($.$W);case"dd":return At(M.weekdaysMin,$.$W,qe,2);case"ddd":return At(M.weekdaysShort,$.$W,qe,3);case"dddd":return qe[$.$W];case"H":return String(ce);case"HH":return j.s(ce,2,"0");case"h":return Jt(1);case"hh":return Jt(2);case"a":return mt(ce,xe,!0);case"A":return mt(ce,xe,!1);case"m":return String(xe);case"mm":return j.s(xe,2,"0");case"s":return String($.$s);case"ss":return j.s($.$s,2,"0");case"SSS":return j.s($.$ms,3,"0");case"Z":return re}return null}(Te)||re.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(L,$,M){var Z,re=this,ce=j.p($),xe=Y(L),Ae=(xe.utcOffset()-this.utcOffset())*e,qe=this-xe,ze=function(){return j.m(re,xe)};switch(ce){case d:Z=ze()/12;break;case c:Z=ze();break;case l:Z=ze()/3;break;case u:Z=(qe-Ae)/6048e5;break;case s:Z=(qe-Ae)/864e5;break;case i:Z=qe/r;break;case o:Z=qe/e;break;case n:Z=qe/t;break;default:Z=qe}return M?Z:j.a(Z)},D.daysInMonth=function(){return this.endOf(c).$D},D.$locale=function(){return P[this.$L]},D.locale=function(L,$){if(!L)return this.$L;var M=this.clone(),Z=te(L,$,!0);return Z&&(M.$L=Z),M},D.clone=function(){return j.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},Q}(),Ce=ge.prototype;return Y.prototype=Ce,[["$ms",a],["$s",n],["$m",o],["$H",i],["$W",s],["$M",c],["$y",d],["$D",m]].forEach(function(Q){Ce[Q[1]]=function(D){return this.$g(D,Q[0],Q[1])}}),Y.extend=function(Q,D){return Q.$i||(Q(D,ge,Y),Q.$i=!0),Y},Y.locale=te,Y.isDayjs=K,Y.unix=function(Q){return Y(1e3*Q)},Y.en=P[A],Y.Ls=P,Y.p={},Y})});var Ph=de((Yl,Kl)=>{(function(t,e){typeof Yl=="object"&&typeof Kl!="undefined"?Kl.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_timezone=e()})(Yl,function(){"use strict";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(r,a,n){var o,i=function(l,d,m){m===void 0&&(m={});var p=new Date(l),f=function(g,x){x===void 0&&(x={});var R=x.timeZoneName||"short",F=g+"|"+R,A=e[F];return A||(A=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:R}),e[F]=A),A}(d,m);return f.formatToParts(p)},s=function(l,d){for(var m=i(l,d),p=[],f=0;f<m.length;f+=1){var g=m[f],x=g.type,R=g.value,F=t[x];F>=0&&(p[F]=parseInt(R,10))}var A=p[3],P=A===24?0:A,N=p[0]+"-"+p[1]+"-"+p[2]+" "+P+":"+p[4]+":"+p[5]+":000",K=+l;return(n.utc(N).valueOf()-(K-=K%1e3))/6e4},u=a.prototype;u.tz=function(l,d){l===void 0&&(l=o);var m=this.utcOffset(),p=this.toDate(),f=p.toLocaleString("en-US",{timeZone:l}),g=Math.round((p-new Date(f))/1e3/60),x=n(f,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(p.getTimezoneOffset()/15)-g,!0);if(d){var R=x.utcOffset();x=x.add(m-R,"minute")}return x.$x.$timezone=l,x},u.offsetName=function(l){var d=this.$x.$timezone||n.tz.guess(),m=i(this.valueOf(),d,{timeZoneName:l}).find(function(p){return p.type.toLowerCase()==="timezonename"});return m&&m.value};var c=u.startOf;u.startOf=function(l,d){if(!this.$x||!this.$x.$timezone)return c.call(this,l,d);var m=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(m,l,d).tz(this.$x.$timezone,!0)},n.tz=function(l,d,m){var p=m&&d,f=m||d||o,g=s(+n(),f);if(typeof l!="string")return n(l).tz(f);var x=function(P,N,K){var te=P-60*N*1e3,Y=s(te,K);if(N===Y)return[te,N];var j=s(te-=60*(Y-N)*1e3,K);return Y===j?[te,Y]:[P-60*Math.min(Y,j)*1e3,Math.max(Y,j)]}(n.utc(l,p).valueOf(),g,f),R=x[0],F=x[1],A=n(R).utcOffset(F);return A.$x.$timezone=f,A},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(l){o=l}}})});var wh=de((Jl,Xl)=>{(function(t,e){typeof Jl=="object"&&typeof Xl!="undefined"?Xl.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_utc=e()})(Jl,function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(a,n,o){var i=n.prototype;o.utc=function(p){var f={date:p,utc:!0,args:arguments};return new n(f)},i.utc=function(p){var f=o(this.toDate(),{locale:this.$L,utc:!0});return p?f.add(this.utcOffset(),t):f},i.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),s.call(this,p)};var u=i.init;i.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else u.call(this)};var c=i.utcOffset;i.utcOffset=function(p,f){var g=this.$utils().u;if(g(p))return this.$u?0:g(this.$offset)?c.call(this):this.$offset;if(typeof p=="string"&&(p=function(A){A===void 0&&(A="");var P=A.match(e);if(!P)return null;var N=(""+P[0]).match(r)||["-",0,0],K=N[0],te=60*+N[1]+ +N[2];return te===0?0:K==="+"?te:-te}(p),p===null))return this;var x=Math.abs(p)<=16?60*p:p,R=this;if(f)return R.$offset=x,R.$u=p===0,R;if(p!==0){var F=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(R=this.local().add(x+F,t)).$offset=x,R.$x.$localOffset=F}else R=this.utc();return R};var l=i.format;i.format=function(p){var f=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,f)},i.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(p){return p==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var m=i.diff;i.diff=function(p,f,g){if(p&&this.$u===p.$u)return m.call(this,p,f,g);var x=this.local(),R=o(p).local();return m.call(x,R,f,g)}}})});var Vh=de((RV,Dh)=>{"use strict";function Wb(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Dh.exports=Yb;function Yb(t,e,r){var a=r&&r.stringify||Wb,n=1;if(typeof t=="object"&&t!==null){var o=e.length+n;if(o===1)return t;var i=new Array(o);i[0]=a(t);for(var s=1;s<o;s++)i[s]=a(e[s]);return i.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var c="",l=1-n,d=-1,m=t&&t.length||0,p=0;p<m;){if(t.charCodeAt(p)===37&&p+1<m){switch(d=d>-1?d:0,t.charCodeAt(p+1)){case 100:case 102:if(l>=u||e[l]==null)break;d<p&&(c+=t.slice(d,p)),c+=Number(e[l]),d=p+2,p++;break;case 105:if(l>=u||e[l]==null)break;d<p&&(c+=t.slice(d,p)),c+=Math.floor(Number(e[l])),d=p+2,p++;break;case 79:case 111:case 106:if(l>=u||e[l]===void 0)break;d<p&&(c+=t.slice(d,p));var f=typeof e[l];if(f==="string"){c+="'"+e[l]+"'",d=p+2,p++;break}if(f==="function"){c+=e[l].name||"<anonymous>",d=p+2,p++;break}c+=a(e[l]),d=p+2,p++;break;case 115:if(l>=u)break;d<p&&(c+=t.slice(d,p)),c+=String(e[l]),d=p+2,p++;break;case 37:d<p&&(c+=t.slice(d,p)),c+="%",d=p+2,p++,l--;break}++l}++p}return d===-1?t:(d<m&&(c+=t.slice(d)),c)}});var Uo=de((bV,hs)=>{"use strict";var Lh=Vh();hs.exports=fr;var Bo=lA().console||{},Kb={mapHttpRequest:gs,mapHttpResponse:gs,wrapRequestSerializer:ud,wrapResponseSerializer:ud,wrapErrorSerializer:ud,req:gs,res:gs,err:Nh,errWithCause:Nh};function fs(t,e){return t==="silent"?1/0:e.levels.values[t]}var id=Symbol("pino.logFuncs"),sd=Symbol("pino.hierarchy"),Jb={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Mh(t,e){let r={logger:e,parent:t[sd]};e[sd]=r}function Xb(t,e,r){let a={};e.forEach(n=>{a[n]=r[n]?r[n]:Bo[n]||Bo[Jb[n]||"log"]||jo}),t[id]=a}function Zb(t,e){return Array.isArray(t)?t.filter(function(a){return a!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function fr(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||Bo;t.browser.write&&(t.browser.asObject=!0);let a=t.serializers||{},n=Zb(t.browser.serialize,a),o=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let i=Object.keys(t.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(i);typeof r=="function"&&s.forEach(function(g){r[g]=r}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");let u=t.level||"info",c=Object.create(r);c.log||(c.log=jo),Xb(c,s,r),Mh({},c),Object.defineProperty(c,"levelVal",{get:d}),Object.defineProperty(c,"level",{get:m,set:p});let l={transmit:e,serialize:n,asObject:t.browser.asObject,levels:s,timestamp:sA(t)};c.levels=eA(t),c.level=u,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=jo,c.serializers=a,c._serialize=n,c._stdErrSerialize=o,c.child=f,e&&(c._logEvent=cd());function d(){return fs(this.level,this)}function m(){return this._level}function p(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,ga(this,l,c,"error"),ga(this,l,c,"fatal"),ga(this,l,c,"warn"),ga(this,l,c,"info"),ga(this,l,c,"debug"),ga(this,l,c,"trace"),i.forEach(x=>{ga(this,l,c,x)})}function f(g,x){if(!g)throw new Error("missing bindings for child Pino");x=x||{},n&&g.serializers&&(x.serializers=g.serializers);let R=x.serializers;if(n&&R){var F=Object.assign({},a,R),A=t.browser.serialize===!0?Object.keys(F):n;delete g.serializers,ms([g],A,F,this._stdErrSerialize)}function P(K){this._childLevel=(K._childLevel|0)+1,this.bindings=g,F&&(this.serializers=F,this._serialize=A),e&&(this._logEvent=cd([].concat(K._logEvent.bindings,g)))}P.prototype=this;let N=new P(this);return Mh(this,N),N.level=this.level,N}return c}function eA(t){let e=t.customLevels||{},r=Object.assign({},fr.levels.values,e),a=Object.assign({},fr.levels.labels,tA(e));return{values:r,labels:a}}function tA(t){let e={};return Object.keys(t).forEach(function(r){e[t[r]]=r}),e}fr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};fr.stdSerializers=Kb;fr.stdTimeFunctions=Object.assign({},{nullTime:Qh,epochTime:Bh,unixTime:cA,isoTime:uA});function rA(t){let e=[];t.bindings&&e.push(t.bindings);let r=t[sd];for(;r.parent;)r=r.parent,r.logger.bindings&&e.push(r.logger.bindings);return e.reverse()}function ga(t,e,r,a){if(t[a]=fs(t.level,r)>fs(a,r)?jo:r[id][a],!e.transmit&&t[a]===jo)return;t[a]=nA(t,e,r,a);let n=rA(t);n.length!==0&&(t[a]=aA(n,t[a]))}function aA(t,e){return function(){return e.apply(this,[...t,...arguments])}}function nA(t,e,r,a){return function(n){return function(){let i=e.timestamp(),s=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Bo?Bo:this;for(var c=0;c<s.length;c++)s[c]=arguments[c];if(e.serialize&&!e.asObject&&ms(s,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(u,oA(this,a,s,i)):n.apply(u,s),e.transmit){let l=e.transmit.level||t._level,d=r.levels.values[l],m=r.levels.values[a];if(m<d)return;iA(this,{ts:i,methodLevel:a,methodValue:m,transmitLevel:l,transmitValue:r.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:fs(t._level,r)},s)}}}(t[id][a])}function oA(t,e,r,a){t._serialize&&ms(r,t._serialize,t.serializers,t._stdErrSerialize);let n=r.slice(),o=n[0],i={};a&&(i.time=a),i.level=t.levels.values[e];let s=(t._childLevel|0)+1;if(s<1&&(s=1),o!==null&&typeof o=="object"){for(;s--&&typeof n[0]=="object";)Object.assign(i,n.shift());o=n.length?Lh(n.shift(),n):void 0}else typeof o=="string"&&(o=Lh(n.shift(),n));return o!==void 0&&(i.msg=o),i}function ms(t,e,r,a){for(let n in t)if(a&&t[n]instanceof Error)t[n]=fr.stdSerializers.err(t[n]);else if(typeof t[n]=="object"&&!Array.isArray(t[n]))for(let o in t[n])e&&e.indexOf(o)>-1&&o in r&&(t[n][o]=r[o](t[n][o]))}function iA(t,e,r){let a=e.send,n=e.ts,o=e.methodLevel,i=e.methodValue,s=e.val,u=t._logEvent.bindings;ms(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=n,t._logEvent.messages=r.filter(function(c){return u.indexOf(c)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=i,a(o,t._logEvent,s),t._logEvent=cd(u)}function cd(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Nh(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function sA(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Qh:Bh}function gs(){return{}}function ud(t){return t}function jo(){}function Qh(){return!1}function Bh(){return Date.now()}function cA(){return Math.round(Date.now()/1e3)}function uA(){return new Date(Date.now()).toISOString()}function lA(){function t(e){return typeof e!="undefined"&&e}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}hs.exports.default=fr;hs.exports.pino=fr});var Hh=de((Sd,yd)=>{(function(t,e){typeof Sd=="object"&&typeof yd!="undefined"?yd.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_customParseFormat=e()})(Sd,function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,o={},i=function(p){return(p=+p)+(p>68?1900:2e3)},s=function(p){return function(f){this[p]=+f}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(f){if(!f||f==="Z")return 0;var g=f.match(/([+-]|\d\d)/g),x=60*g[1]+(+g[2]||0);return x===0?0:g[0]==="+"?-x:x}(p)}],c=function(p){var f=o[p];return f&&(f.indexOf?f:f.s.concat(f.f))},l=function(p,f){var g,x=o.meridiem;if(x){for(var R=1;R<=24;R+=1)if(p.indexOf(x(R,0,f))>-1){g=R>12;break}}else g=p===(f?"pm":"PM");return g},d={A:[n,function(p){this.afternoon=l(p,!1)}],a:[n,function(p){this.afternoon=l(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[a,s("seconds")],ss:[a,s("seconds")],m:[a,s("minutes")],mm:[a,s("minutes")],H:[a,s("hours")],h:[a,s("hours")],HH:[a,s("hours")],hh:[a,s("hours")],D:[a,s("day")],DD:[r,s("day")],Do:[n,function(p){var f=o.ordinal,g=p.match(/\d+/);if(this.day=g[0],f)for(var x=1;x<=31;x+=1)f(x).replace(/\[|\]/g,"")===p&&(this.day=x)}],M:[a,s("month")],MM:[r,s("month")],MMM:[n,function(p){var f=c("months"),g=(c("monthsShort")||f.map(function(x){return x.slice(0,3)})).indexOf(p)+1;if(g<1)throw new Error;this.month=g%12||g}],MMMM:[n,function(p){var f=c("months").indexOf(p)+1;if(f<1)throw new Error;this.month=f%12||f}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(p){this.year=i(p)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function m(p){var f,g;f=p,g=o&&o.formats;for(var x=(p=f.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(te,Y,j){var ge=j&&j.toUpperCase();return Y||g[j]||t[j]||g[ge].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Ce,Q,D){return Q||D.slice(1)})})).match(e),R=x.length,F=0;F<R;F+=1){var A=x[F],P=d[A],N=P&&P[0],K=P&&P[1];x[F]=K?{regex:N,parser:K}:A.replace(/^\[|\]$/g,"")}return function(te){for(var Y={},j=0,ge=0;j<R;j+=1){var Ce=x[j];if(typeof Ce=="string")ge+=Ce.length;else{var Q=Ce.regex,D=Ce.parser,L=te.slice(ge),$=Q.exec(L)[0];D.call(Y,$),te=te.replace($,"")}}return function(M){var Z=M.afternoon;if(Z!==void 0){var re=M.hours;Z?re<12&&(M.hours+=12):re===12&&(M.hours=0),delete M.afternoon}}(Y),Y}}return function(p,f,g){g.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(i=p.parseTwoDigitYear);var x=f.prototype,R=x.parse;x.parse=function(F){var A=F.date,P=F.utc,N=F.args;this.$u=P;var K=N[1];if(typeof K=="string"){var te=N[2]===!0,Y=N[3]===!0,j=te||Y,ge=N[2];Y&&(ge=N[2]),o=this.$locale(),!te&&ge&&(o=g.Ls[ge]),this.$d=function(L,$,M){try{if(["x","X"].indexOf($)>-1)return new Date(($==="X"?1e3:1)*L);var Z=m($)(L),re=Z.year,ce=Z.month,xe=Z.day,Ae=Z.hours,qe=Z.minutes,ze=Z.seconds,Ir=Z.milliseconds,At=Z.zone,Jt=new Date,mt=xe||(re||ce?1:Jt.getDate()),Te=re||Jt.getFullYear(),Xe=0;re&&!ce||(Xe=ce>0?ce-1:Jt.getMonth());var Xt=Ae||0,kr=qe||0,Pu=ze||0,wu=Ir||0;return At?new Date(Date.UTC(Te,Xe,mt,Xt,kr,Pu,wu+60*At.offset*1e3)):M?new Date(Date.UTC(Te,Xe,mt,Xt,kr,Pu,wu)):new Date(Te,Xe,mt,Xt,kr,Pu,wu)}catch{return new Date("")}}(A,K,P),this.init(),ge&&ge!==!0&&(this.$L=this.locale(ge).$L),j&&A!=this.format(K)&&(this.$d=new Date("")),o={}}else if(K instanceof Array)for(var Ce=K.length,Q=1;Q<=Ce;Q+=1){N[1]=K[Q-1];var D=g.apply(this,N);if(D.isValid()){this.$d=D.$d,this.$L=D.$L,this.init();break}Q===Ce&&(this.$d=new Date(""))}else R.call(this,F)}}})});var Gh=de((vd,Fd)=>{(function(t,e){typeof vd=="object"&&typeof Fd!="undefined"?Fd.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_quarterOfYear=e()})(vd,function(){"use strict";var t="month",e="quarter";return function(r,a){var n=a.prototype;n.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var o=n.add;n.add=function(s,u){return s=Number(s),this.$utils().p(u)===e?this.add(3*s,t):o.bind(this)(s,u)};var i=n.startOf;n.startOf=function(s,u){var c=this.$utils(),l=!!c.u(u)||u;if(c.p(s)===e){var d=this.quarter()-1;return l?this.month(3*d).startOf(t).startOf("day"):this.month(3*d+2).endOf(t).endOf("day")}return i.bind(this)(s,u)}}})});var Dy=de((QK,Ty)=>{var kw="[object Object]";function Ow(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function qw(t,e){return function(r){return t(e(r))}}var Tw=Function.prototype,Oy=Object.prototype,qy=Tw.toString,Dw=Oy.hasOwnProperty,Vw=qy.call(Object),Lw=Oy.toString,Mw=qw(Object.getPrototypeOf,Object);function Nw(t){return!!t&&typeof t=="object"}function Qw(t){if(!Nw(t)||Lw.call(t)!=kw||Ow(t))return!1;var e=Mw(t);if(e===null)return!0;var r=Dw.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&qy.call(r)==Vw}Ty.exports=Qw});var Vy=de(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});Ep.default=Hw;var Bw=bo(),jw=Dy(),Uw=_w(jw);function _w(t){return t&&t.__esModule?t:{default:t}}function $w(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}var wp=function(e){return typeof e=="function"};function Hw(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function a(){var o=[],i=[],s={getState:function(){return wp(r)?r(o):r},getActions:function(){return o},dispatch:function(c){if(!(0,Uw.default)(c))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof c.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(c));o.push(c);for(var l=0;l<i.length;l++)i[l]();return c},clearActions:function(){o=[]},subscribe:function(c){return wp(c)&&i.push(c),function(){var l=i.indexOf(c);l<0||i.splice(l,1)}},replaceReducer:function(c){if(!wp(c))throw new Error("Expected the nextReducer to be a function.")}};return s}var n=Bw.applyMiddleware.apply(void 0,$w(t))(a);return n()}}});gf(exports,{SortBy:()=>Ue,SortDirection:()=>da,buildCategoryFacet:()=>Sy,buildContext:()=>Pp,buildController:()=>J,buildDateFacet:()=>Fy,buildDateFilter:()=>by,buildDateRange:()=>Sr,buildFacet:()=>fy,buildFacetManager:()=>ZS,buildFieldsSortCriterion:()=>$l,buildInteractiveResult:()=>QC,buildNumericFacet:()=>wy,buildNumericFilter:()=>Iy,buildNumericRange:()=>$a,buildPager:()=>KS,buildProductListing:()=>YS,buildProductListingEngine:()=>_h,buildRelevanceSortCriterion:()=>pa,buildResultsPerPage:()=>JS,buildSort:()=>XS,getSampleProductListingEngineConfiguration:()=>fd,loadCategoryFacetSetActions:()=>OP,loadClickAnalyticsActions:()=>SA,loadConfigurationActions:()=>xA,loadContextActions:()=>MP,loadDateFacetSetActions:()=>TP,loadFacetOptionsActions:()=>xP,loadFacetSetActions:()=>bP,loadNumericFacetSetActions:()=>VP,loadPaginationActions:()=>cP,loadProductListingActions:()=>yA,loadProductListingAnalyticsActions:()=>CA,loadSearchAnalyticsActions:()=>SP,loadSortActions:()=>CP});var no=()=>global.crypto,vi=()=>{typeof window=="undefined"&&(no()||(global.crypto=require("crypto")),!no().getRandomValues&&no().webcrypto&&(global.crypto.getRandomValues=no().webcrypto.getRandomValues.bind(no().webcrypto)))};var Lf=Pe(Sf()),Mf=Pe(Af());var O=new Error("Failed to load reducers."),so=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Ga=class extends Error{constructor(e,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=r!=null?r:0}};var Of=Pe(Lu());function Ri(t){return Array.isArray(t)}function qf(t,e){return[...t.reduce((r,a)=>{let n=e(a);return r.has(n)||r.set(n,a),r},new Map).values()]}function bx(t){return(typeof btoa!="undefined"?btoa:Of.btoa)(encodeURI(t))}function bi(t,e){let{[t]:r,...a}=e;return a}function Ai(t){return bx(JSON.stringify(t))}var Ax=new Set(["1",1,"yes",!0]);function Pi(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;let t=navigator,e=window;return[t.globalPrivacyControl,t.doNotTrack,t.msDoNotTrack,e.doNotTrack].some(r=>Ax.has(r))}function Tf(t){let e={};for(let[r,a]of t)e[r]=a;return e}function co(t){if(typeof t!="object"||!t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}function Df(t){let e=[];for(let r in t){let a=encodeURIComponent(r),n=encodeURIComponent(t[r]);e.push(`${a}=${n}`)}return e.join("&")}function Vf(t){return typeof t!="object"||!t?!1:Object.values(t).every(Px)}function Px(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function Nf(t){return t===429}var Qe=class{static async call(e){let r=wx(e),{logger:a}=e,n=await Qe.preprocessRequest(r,e);a.info(n,"Platform request");let{url:o,...i}=n,s=async()=>{let u=await(0,Lf.default)(o,i);if(Nf(u.status))throw u;return u};try{let u=await(0,Mf.backOff)(s,{retry:c=>{let l=c&&Nf(c.status);return l&&a.info("Platform retrying request"),l}});if(u.status===419)throw a.info("Platform renewing token"),new so;if(u.status===404)throw new Ga(o,u.status);return a.info({response:u,requestInfo:n},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new Ga(o):u}}static async preprocessRequest(e,r){let{origin:a,preprocessRequest:n,logger:o,requestMetadata:i}=r,{signal:s,...u}=e,c=co(u);try{let l=await n(e,a,i);return{...e,...l}}catch(l){o.error(l,"Platform request preprocessing failed. Returning default request options.")}return c}};function Qf(t,e){let r=!e||!e.environment||e.environment==="prod"?"":e.environment,a=!e||!e.region||e.region==="us"?"":`-${e.region}`;return`https://${t}${r}${a}.cloud.coveo.com`}function uo(t,e="prod"){let r=e==="prod"?"":e,a=`https://${t}.org${r}.coveo.com`,n=`https://${t}.analytics.org${r}.coveo.com`,o=`${a}/rest/search/v2`,i=`https://${t}.admin.org${r}.coveo.com`;return{platform:a,analytics:n,search:o,admin:i}}function wi(t){return(t==null?void 0:t.multiRegionSubDomain)?`https://${t.multiRegionSubDomain}.org.coveo.com`:Qf("platform",t)}function Mu(t){return Qf("analytics",t)}function wx(t){let{url:e,method:r,requestParams:a,contentType:n,accessToken:o,signal:i}=t,s=t.method==="POST"||t.method==="PUT",u=Ex(a,n);return{url:e,method:r,headers:{"Content-Type":n,Authorization:`Bearer ${o}`,...t.headers},...s&&{body:u},signal:i}}function Ex(t,e){return e==="application/x-www-form-urlencoded"?Vf(t)?Df(t):"":JSON.stringify(t)}function Ix(t){return{statusCode:t.statusCode,type:t.name,message:t.message}}function kx(t){return{statusCode:t.code,type:t.name,message:t.message,ignored:!0}}function ea(t,e){if(e&&t.name==="AbortError")return{error:kx(t)};if(t instanceof Ga)return{error:Ix(t)};throw t}var Bf=(t,e,r,a={})=>{let{platformUrl:n,organizationId:o,accessToken:i,version:s}=t,u=`${n}/rest/organizations/${o}/commerce/${s||"v1"}/products/listing`,c=Ox(a),l=c?`${u}?${c}`:u;return{accessToken:i,method:e,contentType:r,url:l,origin:"commerceApiFetch"}},Ox=t=>Object.keys(t).map(e=>`${e}=${encodeURIComponent(t[e])}`).join("&");var jf=t=>({...Bf(t,"POST","application/json",{}),requestParams:qx(t)}),qx=t=>{let{accessToken:e,platformUrl:r,organizationId:a,version:n,...o}=t;return o};var Nu=class{constructor(e,r){this.options=e;this.searchAPIClient=r}async getProducts(e){let r=await Qe.call({...jf(e),...this.options});if(r instanceof Error)return ea(r);let a=await r.json();return r.ok?{success:a}:{error:a}}async facetSearch(e){return this.searchAPIClient.facetSearch(e)}};var Or=t=>t;function Tx(t,e){let r=`
  The following properties are invalid:

    ${t.join(`
	`)}
  
  ${e}
  `;return new Ei(r)}var Ei=class extends Error{constructor(t){super(t);this.name="SchemaValidationError"}},B=class{constructor(t){this.definition=t}validate(t={},e=""){let r={...this.default,...t},a=[];for(let n in this.definition){let o=this.definition[n].validate(r[n]);o&&a.push(`${n}: ${o}`)}if(a.length)throw Tx(a,e);return r}get default(){let t={};for(let e in this.definition){let r=this.definition[e].default;r!==void 0&&(t[e]=r)}return t}},ue=class{constructor(t={}){this.baseConfig=t}validate(t){return this.baseConfig.required&&ie(t)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function we(t){return t===void 0}function Dx(t){return t===null}function ie(t){return we(t)||Dx(t)}var q=class{constructor(t={}){this.config=t,this.value=new ue(t)}validate(t){let e=this.value.validate(t);return e||(Vx(t)?t<this.config.min?`minimum value of ${this.config.min} not respected.`:t>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Vx(t){return we(t)||Uf(t)}function Uf(t){return typeof t=="number"&&!isNaN(t)}var H=class{constructor(t={}){this.value=new ue(t)}validate(t){let e=this.value.validate(t);return e||(Lx(t)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Lx(t){return we(t)||_f(t)}function _f(t){return typeof t=="boolean"}var Mx=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,w=class{constructor(t={}){this.config={emptyAllowed:!0,url:!1,...t},this.value=new ue(this.config)}validate(t){let{emptyAllowed:e,url:r,regex:a,constrainTo:n}=this.config,o=this.value.validate(t);return o||(we(t)?null:lo(t)?!e&&!t.length?"value is an empty string.":r&&!Mx.test(t)?"value is not a valid URL.":a&&!a.test(t)?`value did not match provided regex ${a}`:n&&!n.includes(t)?`value should be one of: ${n.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function lo(t){return Object.prototype.toString.call(t)==="[object String]"}var I=class{constructor(t={}){this.config={options:{required:!1},values:{},...t}}validate(t){if(we(t))return this.config.options.required?"value is required and is currently undefined":null;if(!$f(t))return"value is not an object";for(let[r,a]of Object.entries(this.config.values))if(a.required&&ie(t[r]))return`value does not contain ${r}`;let e="";for(let[r,a]of Object.entries(this.config.values)){let n=t[r],o=a.validate(n);o!==null&&(e+=" "+o)}return e===""?null:e}get default(){}get required(){return!!this.config.options.required}};function $f(t){return t!==void 0&&typeof t=="object"}var z=class{constructor(t={}){this.config=t,this.value=new ue(this.config)}validate(t){if(!ie(t)&&!Array.isArray(t))return"value is not an array";let e=this.value.validate(t);if(e!==null)return e;if(ie(t))return null;if(this.config.max!==void 0&&t.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&t.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return t.forEach(a=>{this.config.each.required&&ie(a)&&(r=`value is null or undefined: ${t.join(",")}`);let n=this.validatePrimitiveValue(a,this.config.each);n!==null&&(r+=" "+n)}),r===""?null:r}return null}validatePrimitiveValue(t,e){return _f(t)||lo(t)||Uf(t)||$f(t)?e.validate(t):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function po(t){return Array.isArray(t)}var Ze=class{constructor(t){this.config=t,this.value=new ue(t)}validate(t){let e=this.value.validate(t);return e!==null?e:we(t)||Object.values(this.config.enum).find(a=>a===t)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};function Wa(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function De(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:Wa(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:Wa(),extendedResults:{}}}function Pt(t){let{url:e,accessToken:r,organizationId:a,authentication:n,...o}=t;return o}var er=t=>{let{response:e}=t;return e.body?Nx(t):Qx(e)},Nx=t=>jx(t)?Ux(t):Bx(t)?t.body:{message:"unknown",statusCode:0,type:"unknown"},Qx=t=>{let e=JSON.parse(JSON.stringify(t,Object.getOwnPropertyNames(t)));return{...e,message:`Client side error: ${e.message||""}`,statusCode:400,type:"ClientError"}};function Bx(t){return t.body.statusCode!==void 0}function jx(t){return t.body.exception!==void 0}var Ux=t=>({message:t.body.exception.code,statusCode:t.response.status,type:t.body.exception.code});function Bu(){if(typeof window=="undefined"){let{AbortController:t}=zf();return new t}return typeof AbortController=="undefined"?null:new AbortController}var ta=class{constructor(){this.currentAbortController=null}async enqueue(e,r){var o;let a=this.currentAbortController,n=this.currentAbortController=Bu();a&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),a.abort());try{return await e((o=n==null?void 0:n.signal)!=null?o:null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}};var Ya=class{constructor(e){this._params={};this._basePath=e}addParam(e,r){this._params={...this.params,[e]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([e,r])=>`${e}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},Gf=t=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(t),Wf=(t,e)=>{let r=ju(t);return r&&r.organizationId===e?r:null},ju=t=>{let e=t.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(e==null?void 0:e.groups)?e.groups:null};function Yf(t){return((t.headers.get("content-type")||"").split(";").find(a=>a.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var wt=(t,e,r,a)=>{let n=new Ya(`${t.url}${a}`);return n.addParam("organizationId",t.organizationId),t.authentication&&n.addParam("authentication",t.authentication),{accessToken:t.accessToken,method:e,contentType:r,url:n.href,origin:"searchApiFetch"}};var Kf=(t,e)=>{let r=new Ya(`${t.url}${e}`);return r.addParam("access_token",t.accessToken),r.addParam("organizationId",t.organizationId),r.addParam("uniqueId",t.uniqueId),t.q!==void 0&&r.addParam("q",t.q),t.enableNavigation!==void 0&&r.addParam("enableNavigation",`${t.enableNavigation}`),t.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${t.requestedOutputSize}`),t.visitorId!==void 0&&r.addParam("visitorId",`${t.visitorId}`),r.href},Jf=async(t,e)=>{let r=await Qe.call({...wt(t,"POST","application/x-www-form-urlencoded","/html"),requestParams:Pt(t),requestMetadata:{method:"html"},...e});if(r instanceof Error)throw r;let a=Yf(r),n=await r.arrayBuffer(),i=new TextDecoder(a).decode(n);return _x(i)?{success:i}:{error:er({response:r,body:i})}};function _x(t){return typeof t=="string"}var fo=class{constructor(e){this.options=e;this.apiCallsQueues={unknown:new ta,mainSearch:new ta,facetValues:new ta,foldingCollection:new ta,instantResults:new ta}}async plan(e){let r=await Qe.call({...wt(e,"POST","application/json","/plan"),requestParams:Pt(e),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return ea(r);let a=await r.json();return Hx(a)?{success:a}:{error:er({response:r,body:a})}}async querySuggest(e){let r=await Qe.call({...wt(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:Pt(e),...this.options});if(r instanceof Error)return ea(r);let a=await r.json(),n={response:r,body:a};return $x(a)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:er(n)}}async search(e,r){var s;let a=(s=r==null?void 0:r.origin)!=null?s:"unknown",n=await this.apiCallsQueues[a].enqueue(u=>Qe.call({...wt(e,"POST","application/json",""),requestParams:Pt(e),requestMetadata:{method:"search",origin:r==null?void 0:r.origin},...this.options,signal:u!=null?u:void 0}),{logger:this.options.logger,warnOnAbort:!(r==null?void 0:r.disableAbortWarning)});if(n instanceof Error)return ea(n,r==null?void 0:r.disableAbortWarning);let o=await n.json(),i={response:n,body:o};return ki(o)?(i.body=Xf(o),{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}):{error:er(i)}}async facetSearch(e){let r=await Qe.call({...wt(e,"POST","application/json","/facet"),requestParams:Pt(e),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let a=await r.json(),n={response:r,body:a};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let r=await Qe.call({...wt(e,"POST","application/json",""),requestParams:Pt(e),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return ki(a)?{success:a}:{error:er({response:r,body:a})}}async html(e){return Jf(e,{...this.options})}async productRecommendations(e){let r=await Qe.call({...wt(e,"POST","application/json",""),requestParams:Pt(e),requestMetadata:{method:"productRecommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return ki(a)?{success:a}:{error:er({response:r,body:a})}}async fieldDescriptions(e){let r=await Qe.call({...wt(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return zx(a)?{success:a}:{error:er({response:r,body:a})}}},Ii=t=>t.success!==void 0,Fe=t=>t.error!==void 0;function ki(t){return t.results!==void 0}function Xf(t){let e=Wa();return ie(t.questionAnswer)?(t.questionAnswer=e,t):(t.questionAnswer={...e,...t.questionAnswer},t)}function $x(t){return t.completions!==void 0}function Hx(t){return t.preprocessingOutput!==void 0}function zx(t){return t.fields!==void 0}var Oi=t=>t,qi=t=>t,Ti=t=>t;var h={};gf(h,{EnhancerArray:()=>Dm,MiddlewareArray:()=>Tm,SHOULD_AUTOBATCH:()=>xl,TaskAbortError:()=>ko,addListener:()=>ug,autoBatchEnhancer:()=>mF,clearAllListeners:()=>lg,configureStore:()=>pl,createAction:()=>S,createActionCreatorInvariantMiddleware:()=>qv,createAsyncThunk:()=>ee,createDraftSafeSelector:()=>ar,createEntityAdapter:()=>Yv,createImmutableStateInvariantMiddleware:()=>Mv,createListenerMiddleware:()=>lF,createNextState:()=>Dr,createReducer:()=>k,createSelector:()=>Ni,createSerializableStateInvariantMiddleware:()=>Nv,createSlice:()=>_v,current:()=>go,findNonSerializableValue:()=>Bi,freeze:()=>mo,getDefaultMiddleware:()=>jm,getType:()=>kv,isAction:()=>cl,isActionCreator:()=>km,isAllOf:()=>gl,isAnyOf:()=>Eo,isAsyncThunkAction:()=>Xm,isDraft:()=>Be,isFluxStandardAction:()=>Om,isFulfilled:()=>Jm,isImmutableDefault:()=>Mm,isPending:()=>Ym,isPlain:()=>ll,isPlainObject:()=>Qi,isRejected:()=>Ui,isRejectedWithValue:()=>Km,miniSerializeError:()=>zm,nanoid:()=>fl,original:()=>Zf,prepareAutoBatched:()=>dF,removeListener:()=>dg,unwrapResult:()=>Gm});function et(t){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];if(!1)var n,o;throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Be(t){return!!t&&!!t[he]}function gt(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var n=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===Zx}(t)||Array.isArray(t)||!!t[lm]||!!((e=t.constructor)===null||e===void 0?void 0:e[lm])||Uu(t)||_u(t))}function Zf(t){return Be(t)||et(23,t),t[he].t}function ra(t,e,r){r===void 0&&(r=!1),Ka(t)===0?(r?Object.keys:Xa)(t).forEach(function(a){r&&typeof a=="symbol"||e(a,t[a],t)}):t.forEach(function(a,n){return e(n,a,t)})}function Ka(t){var e=t[he];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Uu(t)?2:_u(t)?3:0}function Ja(t,e){return Ka(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Gx(t,e){return Ka(t)===2?t.get(e):t[e]}function em(t,e,r){var a=Ka(t);a===2?t.set(e,r):a===3?t.add(r):t[e]=r}function tm(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Uu(t){return Jx&&t instanceof Map}function _u(t){return Xx&&t instanceof Set}function qr(t){return t.o||t.t}function $u(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=dm(t);delete e[he];for(var r=Xa(e),a=0;a<r.length;a++){var n=r[a],o=e[n];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[n]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[n]})}return Object.create(Object.getPrototypeOf(t),e)}function mo(t,e){return e===void 0&&(e=!1),Hu(t)||Be(t)||!gt(t)||(Ka(t)>1&&(t.set=t.add=t.clear=t.delete=Wx),Object.freeze(t),e&&ra(t,function(r,a){return mo(a,!0)},!0)),t}function Wx(){et(2)}function Hu(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Et(t){var e=el[t];return e||et(18,t),e}function Yx(t,e){el[t]||(el[t]=e)}function zu(){return ho}function Gu(t,e){e&&(Et("Patches"),t.u=[],t.s=[],t.v=e)}function Di(t){Wu(t),t.p.forEach(Kx),t.p=null}function Wu(t){t===ho&&(ho=t.l)}function rm(t){return ho={p:[],l:ho,h:t,m:!0,_:0}}function Kx(t){var e=t[he];e.i===0||e.i===1?e.j():e.g=!0}function Yu(t,e){e._=e.p.length;var r=e.p[0],a=t!==void 0&&t!==r;return e.h.O||Et("ES5").S(e,t,a),a?(r[he].P&&(Di(e),et(4)),gt(t)&&(t=Vi(e,t),e.l||Li(e,t)),e.u&&Et("Patches").M(r[he].t,t,e.u,e.s)):t=Vi(e,r,[]),Di(e),e.u&&e.v(e.u,e.s),t!==um?t:void 0}function Vi(t,e,r){if(Hu(e))return e;var a=e[he];if(!a)return ra(e,function(s,u){return am(t,a,e,s,u,r)},!0),e;if(a.A!==t)return e;if(!a.P)return Li(t,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var n=a.i===4||a.i===5?a.o=$u(a.k):a.o,o=n,i=!1;a.i===3&&(o=new Set(n),n.clear(),i=!0),ra(o,function(s,u){return am(t,a,n,s,u,r,i)}),Li(t,n,!1),r&&t.u&&Et("Patches").N(a,r,t.u,t.s)}return a.o}function am(t,e,r,a,n,o,i){if(Be(n)){var s=Vi(t,n,o&&e&&e.i!==3&&!Ja(e.R,a)?o.concat(a):void 0);if(em(r,a,s),!Be(s))return;t.m=!1}else i&&r.add(n);if(gt(n)&&!Hu(n)){if(!t.h.D&&t._<1)return;Vi(t,n),e&&e.A.l||Li(t,n)}}function Li(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&mo(e,r)}function Ku(t,e){var r=t[he];return(r?qr(r):t)[e]}function nm(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var a=Object.getOwnPropertyDescriptor(r,e);if(a)return a;r=Object.getPrototypeOf(r)}}function Tr(t){t.P||(t.P=!0,t.l&&Tr(t.l))}function Ju(t){t.o||(t.o=$u(t.t))}function Xu(t,e,r){var a=Uu(e)?Et("MapSet").F(e,r):_u(e)?Et("MapSet").T(e,r):t.O?function(n,o){var i=Array.isArray(n),s={i:i?1:0,A:o?o.A:zu(),P:!1,I:!1,R:{},l:o,t:n,k:null,o:null,j:null,C:!1},u=s,c=So;i&&(u=[s],c=yo);var l=Proxy.revocable(u,c),d=l.revoke,m=l.proxy;return s.k=m,s.j=d,m}(e,r):Et("ES5").J(e,r);return(r?r.A:zu()).p.push(a),a}function go(t){return Be(t)||et(22,t),function e(r){if(!gt(r))return r;var a,n=r[he],o=Ka(r);if(n){if(!n.P&&(n.i<4||!Et("ES5").K(n)))return n.t;n.I=!0,a=om(r,o),n.I=!1}else a=om(r,o);return ra(a,function(i,s){n&&Gx(n.t,i)===s||em(a,i,e(s))}),o===3?new Set(a):a}(t)}function om(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return $u(t)}function im(){function t(i,s){var u=o[i];return u?u.enumerable=s:o[i]=u={configurable:!0,enumerable:s,get:function(){var c=this[he];return So.get(c,i)},set:function(c){var l=this[he];So.set(l,i,c)}},u}function e(i){for(var s=i.length-1;s>=0;s--){var u=i[s][he];if(!u.P)switch(u.i){case 5:a(u)&&Tr(u);break;case 4:r(u)&&Tr(u)}}}function r(i){for(var s=i.t,u=i.k,c=Xa(u),l=c.length-1;l>=0;l--){var d=c[l];if(d!==he){var m=s[d];if(m===void 0&&!Ja(s,d))return!0;var p=u[d],f=p&&p[he];if(f?f.t!==m:!tm(p,m))return!0}}var g=!!s[he];return c.length!==Xa(s).length+(g?0:1)}function a(i){var s=i.k;if(s.length!==i.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var c=0;c<s.length;c++)if(!s.hasOwnProperty(c))return!0;return!1}function n(i){i.g&&et(3,JSON.stringify(qr(i)))}var o={};Yx("ES5",{J:function(i,s){var u=Array.isArray(i),c=function(d,m){if(d){for(var p=Array(m.length),f=0;f<m.length;f++)Object.defineProperty(p,""+f,t(f,!0));return p}var g=dm(m);delete g[he];for(var x=Xa(g),R=0;R<x.length;R++){var F=x[R];g[F]=t(F,d||!!g[F].enumerable)}return Object.create(Object.getPrototypeOf(m),g)}(u,i),l={i:u?5:4,A:s?s.A:zu(),P:!1,I:!1,R:{},l:s,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,he,{value:l,writable:!0}),c},S:function(i,s,u){u?Be(s)&&s[he].A===i&&e(i.p):(i.u&&function c(l){if(l&&typeof l=="object"){var d=l[he];if(d){var m=d.t,p=d.k,f=d.R,g=d.i;if(g===4)ra(p,function(P){P!==he&&(m[P]!==void 0||Ja(m,P)?f[P]||c(p[P]):(f[P]=!0,Tr(d)))}),ra(m,function(P){p[P]!==void 0||Ja(p,P)||(f[P]=!1,Tr(d))});else if(g===5){if(a(d)&&(Tr(d),f.length=!0),p.length<m.length)for(var x=p.length;x<m.length;x++)f[x]=!1;else for(var R=m.length;R<p.length;R++)f[R]=!0;for(var F=Math.min(p.length,m.length),A=0;A<F;A++)p.hasOwnProperty(A)||(f[A]=!0),f[A]===void 0&&c(p[A])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var sm,ho,Zu=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",Jx=typeof Map!="undefined",Xx=typeof Set!="undefined",cm=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",um=Zu?Symbol.for("immer-nothing"):((sm={})["immer-nothing"]=!0,sm),lm=Zu?Symbol.for("immer-draftable"):"__$immer_draftable",he=Zu?Symbol.for("immer-state"):"__$immer_state",rO=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var Zx=""+Object.prototype.constructor,Xa=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,dm=Object.getOwnPropertyDescriptors||function(t){var e={};return Xa(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},el={},So={get:function(t,e){if(e===he)return t;var r=qr(t);if(!Ja(r,e))return function(n,o,i){var s,u=nm(o,i);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(n.k):void 0}(t,r,e);var a=r[e];return t.I||!gt(a)?a:a===Ku(t.t,e)?(Ju(t),t.o[e]=Xu(t.A.h,a,t)):a},has:function(t,e){return e in qr(t)},ownKeys:function(t){return Reflect.ownKeys(qr(t))},set:function(t,e,r){var a=nm(qr(t),e);if(a==null?void 0:a.set)return a.set.call(t.k,r),!0;if(!t.P){var n=Ku(qr(t),e),o=n==null?void 0:n[he];if(o&&o.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(tm(r,n)&&(r!==void 0||Ja(t.t,e)))return!0;Ju(t),Tr(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Ku(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Ju(t),Tr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=qr(t),a=Reflect.getOwnPropertyDescriptor(r,e);return a&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:a.enumerable,value:r[e]}},defineProperty:function(){et(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){et(12)}},yo={};ra(So,function(t,e){yo[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),yo.deleteProperty=function(t,e){return yo.set.call(this,t,e,void 0)},yo.set=function(t,e,r){return So.set.call(this,t[0],e,r,t[0])};var ev=function(){function t(r){var a=this;this.O=cm,this.D=!0,this.produce=function(n,o,i){if(typeof n=="function"&&typeof o!="function"){var s=o;o=n;var u=a;return function(g){var x=this;g===void 0&&(g=s);for(var R=arguments.length,F=Array(R>1?R-1:0),A=1;A<R;A++)F[A-1]=arguments[A];return u.produce(g,function(P){var N;return(N=o).call.apply(N,[x,P].concat(F))})}}var c;if(typeof o!="function"&&et(6),i!==void 0&&typeof i!="function"&&et(7),gt(n)){var l=rm(a),d=Xu(a,n,void 0),m=!0;try{c=o(d),m=!1}finally{m?Di(l):Wu(l)}return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(g){return Gu(l,i),Yu(g,l)},function(g){throw Di(l),g}):(Gu(l,i),Yu(c,l))}if(!n||typeof n!="object"){if((c=o(n))===void 0&&(c=n),c===um&&(c=void 0),a.D&&mo(c,!0),i){var p=[],f=[];Et("Patches").M(n,c,p,f),i(p,f)}return c}et(21,n)},this.produceWithPatches=function(n,o){if(typeof n=="function")return function(c){for(var l=arguments.length,d=Array(l>1?l-1:0),m=1;m<l;m++)d[m-1]=arguments[m];return a.produceWithPatches(c,function(p){return n.apply(void 0,[p].concat(d))})};var i,s,u=a.produce(n,o,function(c,l){i=c,s=l});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(c){return[c,i,s]}):[u,i,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){gt(r)||et(8),Be(r)&&(r=go(r));var a=rm(this),n=Xu(this,r,void 0);return n[he].C=!0,Wu(a),n},e.finishDraft=function(r,a){var n=r&&r[he],o=n.A;return Gu(o,a),Yu(void 0,o)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!cm&&et(20),this.O=r},e.applyPatches=function(r,a){var n;for(n=a.length-1;n>=0;n--){var o=a[n];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}n>-1&&(a=a.slice(n+1));var i=Et("Patches").$;return Be(r)?i(r,a):this.produce(r,function(s){return i(s,a)})},t}(),tt=new ev,tv=tt.produce,aO=tt.produceWithPatches.bind(tt),nO=tt.setAutoFreeze.bind(tt),oO=tt.setUseProxies.bind(tt),iO=tt.applyPatches.bind(tt),sO=tt.createDraft.bind(tt),cO=tt.finishDraft.bind(tt),Dr=tv;b(h,Pe(bo()));var Mi="NOT_FOUND";function yv(t){var e;return{get:function(a){return e&&t(e.key,a)?e.value:Mi},put:function(a,n){e={key:a,value:n}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function Cv(t,e){var r=[];function a(s){var u=r.findIndex(function(l){return e(s,l.key)});if(u>-1){var c=r[u];return u>0&&(r.splice(u,1),r.unshift(c)),c.value}return Mi}function n(s,u){a(s)===Mi&&(r.unshift({key:s,value:u}),r.length>t&&r.pop())}function o(){return r}function i(){r=[]}return{get:a,put:n,getEntries:o,clear:i}}var Fm=function(e,r){return e===r};function xv(t){return function(r,a){if(r===null||a===null||r.length!==a.length)return!1;for(var n=r.length,o=0;o<n;o++)if(!t(r[o],a[o]))return!1;return!0}}function Rm(t,e){var r=typeof e=="object"?e:{equalityCheck:e},a=r.equalityCheck,n=a===void 0?Fm:a,o=r.maxSize,i=o===void 0?1:o,s=r.resultEqualityCheck,u=xv(n),c=i===1?yv(u):Cv(i,u);function l(){var d=c.get(arguments);if(d===Mi){if(d=t.apply(null,arguments),s){var m=c.getEntries(),p=m.find(function(f){return s(f.value,d)});p&&(d=p.value)}c.put(arguments,d)}return d}return l.clearCache=function(){return c.clear()},l}function vv(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(a){return typeof a=="function"})){var r=e.map(function(a){return typeof a=="function"?"function "+(a.name||"unnamed")+"()":typeof a}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return e}function Fv(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];var n=function(){for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];var c=0,l,d={memoizeOptions:void 0},m=s.pop();if(typeof m=="object"&&(d=m,m=s.pop()),typeof m!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof m+"]");var p=d,f=p.memoizeOptions,g=f===void 0?r:f,x=Array.isArray(g)?g:[g],R=vv(s),F=t.apply(void 0,[function(){return c++,m.apply(null,arguments)}].concat(x)),A=t(function(){for(var N=[],K=R.length,te=0;te<K;te++)N.push(R[te].apply(null,arguments));return l=F.apply(null,N),l});return Object.assign(A,{resultFunc:m,memoizedResultFunc:F,dependencies:R,lastResult:function(){return l},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),A};return n}var Ni=Fv(Rm);var Lr=Pe(bo()),sl=Pe(bo());function bm(t){var e=function(a){var n=a.dispatch,o=a.getState;return function(i){return function(s){return typeof s=="function"?s(n,o,t):i(s)}}};return e}var Am=bm();Am.withExtraArgument=bm;var ol=Am;var Pm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),Ao=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Vr=function(t,e){for(var r=0,a=e.length,n=t.length;r<a;r++,n++)t[n]=e[r];return t},Rv=Object.defineProperty,bv=Object.defineProperties,Av=Object.getOwnPropertyDescriptors,wm=Object.getOwnPropertySymbols,Pv=Object.prototype.hasOwnProperty,wv=Object.prototype.propertyIsEnumerable,Em=function(t,e,r){return e in t?Rv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},Ge=function(t,e){for(var r in e||(e={}))Pv.call(e,r)&&Em(t,r,e[r]);if(wm)for(var a=0,n=wm(e);a<n.length;a++){var r=n[a];wv.call(e,r)&&Em(t,r,e[r])}return t},il=function(t,e){return bv(t,Av(e))},Po=function(t,e,r){return new Promise(function(a,n){var o=function(u){try{s(r.next(u))}catch(c){n(c)}},i=function(u){try{s(r.throw(u))}catch(c){n(c)}},s=function(u){return u.done?a(u.value):Promise.resolve(u.value).then(o,i)};s((r=r.apply(t,e)).next())})},ar=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ni.apply(void 0,t),a=function(n){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return r.apply(void 0,Vr([Be(n)?go(n):n],o))};return a},Ev=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?sl.compose:sl.compose.apply(null,arguments)},AO=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(t){return t}};function Qi(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}var Im=function(t){return t&&typeof t.match=="function"};function S(t,e){function r(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(e){var o=e.apply(void 0,a);if(!o)throw new Error("prepareAction did not return an object");return Ge(Ge({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:a[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(a){return a.type===t},r}function cl(t){return Qi(t)&&"type"in t}function km(t){return typeof t=="function"&&"type"in t&&Im(t)}function Om(t){return cl(t)&&typeof t.type=="string"&&Object.keys(t).every(Iv)}function Iv(t){return["type","payload","error","meta"].indexOf(t)>-1}function kv(t){return""+t}function Ov(t){var e=t?(""+t).split("/"):[],r=e[e.length-1]||"actionCreator";return'Detected an action creator with type "'+(t||"unknown")+`" being dispatched. 
Make sure you're calling the action creator before dispatching, i.e. \`dispatch(`+r+"())` instead of `dispatch("+r+")`. This is necessary even if the action has no payload."}function qv(t){return t===void 0&&(t={}),function(){return function(a){return function(n){return a(n)}}};var e=t.isActionCreator,r=e===void 0?km:e;return function(){return function(a){return function(n){return r(n)&&console.warn(Ov(n.type)),a(n)}}}}function qm(t,e){var r=0;return{measureTime:function(a){var n=Date.now();try{return a()}finally{var o=Date.now();r+=o-n}},warnIfExceeded:function(){r>t&&console.warn(e+" took "+r+"ms, which is more than the warning threshold of "+t+`ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var Tm=function(t){Pm(e,t);function e(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Vr([void 0],r[0].concat(this)))):new(e.bind.apply(e,Vr([void 0],r.concat(this))))},e}(Array),Dm=function(t){Pm(e,t);function e(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Vr([void 0],r[0].concat(this)))):new(e.bind.apply(e,Vr([void 0],r.concat(this))))},e}(Array);function ul(t){return gt(t)?Dr(t,function(){}):t}var Tv=!0,Vm="Invariant failed";function Lm(t,e){if(!t)throw Tv?new Error(Vm):new Error(Vm+": "+(e||""))}function Dv(t,e,r,a){return JSON.stringify(t,Vv(e,a),r)}function Vv(t,e){var r=[],a=[];return e||(e=function(n,o){return r[0]===o?"[Circular ~]":"[Circular ~."+a.slice(0,r.indexOf(o)).join(".")+"]"}),function(n,o){if(r.length>0){var i=r.indexOf(this);~i?r.splice(i+1):r.push(this),~i?a.splice(i,1/0,n):a.push(n),~r.indexOf(o)&&(o=e.call(this,n,o))}else r.push(o);return t==null?o:t.call(this,n,o)}}function Mm(t){return typeof t!="object"||t==null||Object.isFrozen(t)}function Lv(t,e,r){var a=Nm(t,e,r);return{detectMutations:function(){return Qm(t,e,a,r)}}}function Nm(t,e,r,a,n){e===void 0&&(e=[]),a===void 0&&(a=""),n===void 0&&(n=new Set);var o={value:r};if(!t(r)&&!n.has(r)){n.add(r),o.children={};for(var i in r){var s=a?a+"."+i:i;e.length&&e.indexOf(s)!==-1||(o.children[i]=Nm(t,e,r[i],s))}}return o}function Qm(t,e,r,a,n,o){e===void 0&&(e=[]),n===void 0&&(n=!1),o===void 0&&(o="");var i=r?r.value:void 0,s=i===a;if(n&&!s&&!Number.isNaN(a))return{wasMutated:!0,path:o};if(t(i)||t(a))return{wasMutated:!1};var u={};for(var c in r.children)u[c]=!0;for(var c in a)u[c]=!0;var l=e.length>0,d=function(p){var f=o?o+"."+p:p;if(l){var g=e.some(function(R){return R instanceof RegExp?R.test(f):f===R});if(g)return"continue"}var x=Qm(t,e,r.children[p],a[p],s,f);if(x.wasMutated)return{value:x}};for(var c in u){var m=d(c);if(typeof m=="object")return m.value}return{wasMutated:!1}}function Mv(t){return t===void 0&&(t={}),function(){return function(u){return function(c){return u(c)}}};var e=t.isImmutable,r=e===void 0?Mm:e,a=t.ignoredPaths,n=t.warnAfter,o=n===void 0?32:n,i=t.ignore;a=a||i;var s=Lv.bind(null,r,a);return function(u){var c=u.getState,l=c(),d=s(l),m;return function(p){return function(f){var g=qm(o,"ImmutableStateInvariantMiddleware");g.measureTime(function(){l=c(),m=d.detectMutations(),d=s(l),Lm(!m.wasMutated,"A state mutation was detected between dispatches, in the path '"+(m.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")});var x=p(f);return g.measureTime(function(){l=c(),m=d.detectMutations(),d=s(l),m.wasMutated&&Lm(!m.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(m.path||"")+". Take a look at the reducer(s) handling the action "+Dv(f)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}),g.warnIfExceeded(),x}}}}function ll(t){var e=typeof t;return t==null||e==="string"||e==="boolean"||e==="number"||Array.isArray(t)||Qi(t)}function Bi(t,e,r,a,n,o){e===void 0&&(e=""),r===void 0&&(r=ll),n===void 0&&(n=[]);var i;if(!r(t))return{keyPath:e||"<root>",value:t};if(typeof t!="object"||t===null||(o==null?void 0:o.has(t)))return!1;for(var s=a!=null?a(t):Object.entries(t),u=n.length>0,c=function(x,R){var F=e?e+"."+x:x;if(u){var A=n.some(function(P){return P instanceof RegExp?P.test(F):F===P});if(A)return"continue"}if(!r(R))return{value:{keyPath:F,value:R}};if(typeof R=="object"&&(i=Bi(R,F,r,a,n,o),i))return{value:i}},l=0,d=s;l<d.length;l++){var m=d[l],p=m[0],f=m[1],g=c(p,f);if(typeof g=="object")return g.value}return o&&Bm(t)&&o.add(t),!1}function Bm(t){if(!Object.isFrozen(t))return!1;for(var e=0,r=Object.values(t);e<r.length;e++){var a=r[e];if(!(typeof a!="object"||a===null)&&!Bm(a))return!1}return!0}function Nv(t){return t===void 0&&(t={}),function(){return function(A){return function(P){return A(P)}}};var e=t.isSerializable,r=e===void 0?ll:e,a=t.getEntries,n=t.ignoredActions,o=n===void 0?[]:n,i=t.ignoredActionPaths,s=i===void 0?["meta.arg","meta.baseQueryMeta"]:i,u=t.ignoredPaths,c=u===void 0?[]:u,l=t.warnAfter,d=l===void 0?32:l,m=t.ignoreState,p=m===void 0?!1:m,f=t.ignoreActions,g=f===void 0?!1:f,x=t.disableCache,R=x===void 0?!1:x,F=!R&&WeakSet?new WeakSet:void 0;return function(A){return function(P){return function(N){var K=P(N),te=qm(d,"SerializableStateInvariantMiddleware");return!g&&!(o.length&&o.indexOf(N.type)!==-1)&&te.measureTime(function(){var Y=Bi(N,"",r,a,s,F);if(Y){var j=Y.keyPath,ge=Y.value;console.error("A non-serializable value was detected in an action, in the path: `"+j+"`. Value:",ge,`
Take a look at the logic that dispatched this action: `,N,`
(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)`,`
(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)`)}}),p||(te.measureTime(function(){var Y=A.getState(),j=Bi(Y,"",r,a,c,F);if(j){var ge=j.keyPath,Ce=j.value;console.error("A non-serializable value was detected in the state, in the path: `"+ge+"`. Value:",Ce,`
Take a look at the reducer(s) handling this action type: `+N.type+`.
(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`)}}),te.warnIfExceeded()),K}}}}function Qv(t){return typeof t=="boolean"}function Bv(){return function(e){return jm(e)}}function jm(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e,a=t.immutableCheck,n=a===void 0?!0:a,o=t.serializableCheck,i=o===void 0?!0:o,s=t.actionCreatorCheck,u=s===void 0?!0:s,c=new Tm;if(r&&(Qv(r)?c.push(ol):c.push(ol.withExtraArgument(r.extraArgument))),!1){if(n)var l;if(i)var d;if(u)var m}return c}var dl=!0;function pl(t){var e=Bv(),r=t||{},a=r.reducer,n=a===void 0?void 0:a,o=r.middleware,i=o===void 0?e():o,s=r.devTools,u=s===void 0?!0:s,c=r.preloadedState,l=c===void 0?void 0:c,d=r.enhancers,m=d===void 0?void 0:d,p;if(typeof n=="function")p=n;else if(Qi(n))p=(0,Lr.combineReducers)(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var f=i;if(typeof f=="function"&&(f=f(e),!dl&&!Array.isArray(f)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!dl&&f.some(function(P){return typeof P!="function"}))throw new Error("each middleware provided to configureStore must be a function");var g=Lr.applyMiddleware.apply(void 0,f),x=Lr.compose;u&&(x=Ev(Ge({trace:!dl},typeof u=="object"&&u)));var R=new Dm(g),F=R;Array.isArray(m)?F=Vr([g],m):typeof m=="function"&&(F=m(R));var A=x.apply(void 0,F);return(0,Lr.createStore)(p,l,A)}function Um(t){var e={},r=[],a,n={addCase:function(o,i){var s=typeof o=="string"?o:o.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[s]=i,n},addMatcher:function(o,i){return r.push({matcher:o,reducer:i}),n},addDefaultCase:function(o){return a=o,n}};return t(n),[e,r,a]}function jv(t){return typeof t=="function"}function k(t,e,r,a){r===void 0&&(r=[]);var n=typeof e=="function"?Um(e):[e,r,a],o=n[0],i=n[1],s=n[2],u;if(jv(t))u=function(){return ul(t())};else{var c=ul(t);u=function(){return c}}function l(d,m){d===void 0&&(d=u());var p=Vr([o[m.type]],i.filter(function(f){var g=f.matcher;return g(m)}).map(function(f){var g=f.reducer;return g}));return p.filter(function(f){return!!f}).length===0&&(p=[s]),p.reduce(function(f,g){if(g)if(Be(f)){var x=f,R=g(x,m);return R===void 0?f:R}else{if(gt(f))return Dr(f,function(F){return g(F,m)});var R=g(f,m);if(R===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return R}return f},d)}return l.getInitialState=u,l}function Uv(t,e){return t+"/"+e}function _v(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var r=typeof t.initialState=="function"?t.initialState:ul(t.initialState),a=t.reducers||{},n=Object.keys(a),o={},i={},s={};n.forEach(function(l){var d=a[l],m=Uv(e,l),p,f;"reducer"in d?(p=d.reducer,f=d.prepare):p=d,o[l]=p,i[m]=p,s[l]=f?S(m,f):S(m)});function u(){var l=typeof t.extraReducers=="function"?Um(t.extraReducers):[t.extraReducers],d=l[0],m=d===void 0?{}:d,p=l[1],f=p===void 0?[]:p,g=l[2],x=g===void 0?void 0:g,R=Ge(Ge({},m),i);return k(r,function(F){for(var A in R)F.addCase(A,R[A]);for(var P=0,N=f;P<N.length;P++){var K=N[P];F.addMatcher(K.matcher,K.reducer)}x&&F.addDefaultCase(x)})}var c;return{name:e,reducer:function(l,d){return c||(c=u()),c(l,d)},actions:s,caseReducers:o,getInitialState:function(){return c||(c=u()),c.getInitialState()}}}function $v(){return{ids:[],entities:{}}}function Hv(){function t(e){return e===void 0&&(e={}),Object.assign($v(),e)}return{getInitialState:t}}function zv(){function t(e){var r=function(c){return c.ids},a=function(c){return c.entities},n=ar(r,a,function(c,l){return c.map(function(d){return l[d]})}),o=function(c,l){return l},i=function(c,l){return c[l]},s=ar(r,function(c){return c.length});if(!e)return{selectIds:r,selectEntities:a,selectAll:n,selectTotal:s,selectById:ar(a,o,i)};var u=ar(e,a);return{selectIds:ar(e,r),selectEntities:u,selectAll:ar(e,n),selectTotal:ar(e,s),selectById:ar(u,o,i)}}return{getSelectors:t}}function Gv(t){var e=Re(function(r,a){return t(a)});return function(a){return e(a,void 0)}}function Re(t){return function(r,a){function n(i){return Om(i)}var o=function(i){n(a)?t(a.payload,i):t(a,i)};return Be(r)?(o(r),r):Dr(r,o)}}function wo(t,e){var r=e(t);return r}function aa(t){return Array.isArray(t)||(t=Object.values(t)),t}function _m(t,e,r){t=aa(t);for(var a=[],n=[],o=0,i=t;o<i.length;o++){var s=i[o],u=wo(s,e);u in r.entities?n.push({id:u,changes:s}):a.push(s)}return[a,n]}function $m(t){function e(f,g){var x=wo(f,t);x in g.entities||(g.ids.push(x),g.entities[x]=f)}function r(f,g){f=aa(f);for(var x=0,R=f;x<R.length;x++){var F=R[x];e(F,g)}}function a(f,g){var x=wo(f,t);x in g.entities||g.ids.push(x),g.entities[x]=f}function n(f,g){f=aa(f);for(var x=0,R=f;x<R.length;x++){var F=R[x];a(F,g)}}function o(f,g){f=aa(f),g.ids=[],g.entities={},r(f,g)}function i(f,g){return s([f],g)}function s(f,g){var x=!1;f.forEach(function(R){R in g.entities&&(delete g.entities[R],x=!0)}),x&&(g.ids=g.ids.filter(function(R){return R in g.entities}))}function u(f){Object.assign(f,{ids:[],entities:{}})}function c(f,g,x){var R=x.entities[g.id],F=Object.assign({},R,g.changes),A=wo(F,t),P=A!==g.id;return P&&(f[g.id]=A,delete x.entities[g.id]),x.entities[A]=F,P}function l(f,g){return d([f],g)}function d(f,g){var x={},R={};f.forEach(function(P){P.id in g.entities&&(R[P.id]={id:P.id,changes:Ge(Ge({},R[P.id]?R[P.id].changes:null),P.changes)})}),f=Object.values(R);var F=f.length>0;if(F){var A=f.filter(function(P){return c(x,P,g)}).length>0;A&&(g.ids=Object.keys(g.entities))}}function m(f,g){return p([f],g)}function p(f,g){var x=_m(f,t,g),R=x[0],F=x[1];d(F,g),r(R,g)}return{removeAll:Gv(u),addOne:Re(e),addMany:Re(r),setOne:Re(a),setMany:Re(n),setAll:Re(o),updateOne:Re(l),updateMany:Re(d),upsertOne:Re(m),upsertMany:Re(p),removeOne:Re(i),removeMany:Re(s)}}function Wv(t,e){var r=$m(t),a=r.removeOne,n=r.removeMany,o=r.removeAll;function i(F,A){return s([F],A)}function s(F,A){F=aa(F);var P=F.filter(function(N){return!(wo(N,t)in A.entities)});P.length!==0&&x(P,A)}function u(F,A){return c([F],A)}function c(F,A){F=aa(F),F.length!==0&&x(F,A)}function l(F,A){F=aa(F),A.entities={},A.ids=[],s(F,A)}function d(F,A){return m([F],A)}function m(F,A){for(var P=!1,N=0,K=F;N<K.length;N++){var te=K[N],Y=A.entities[te.id];if(!!Y){P=!0,Object.assign(Y,te.changes);var j=t(Y);te.id!==j&&(delete A.entities[te.id],A.entities[j]=Y)}}P&&R(A)}function p(F,A){return f([F],A)}function f(F,A){var P=_m(F,t,A),N=P[0],K=P[1];m(K,A),s(N,A)}function g(F,A){if(F.length!==A.length)return!1;for(var P=0;P<F.length&&P<A.length;P++)if(F[P]!==A[P])return!1;return!0}function x(F,A){F.forEach(function(P){A.entities[t(P)]=P}),R(A)}function R(F){var A=Object.values(F.entities);A.sort(e);var P=A.map(t),N=F.ids;g(N,P)||(F.ids=P)}return{removeOne:a,removeMany:n,removeAll:o,addOne:Re(i),updateOne:Re(d),upsertOne:Re(p),setOne:Re(u),setMany:Re(c),setAll:Re(l),addMany:Re(s),updateMany:Re(m),upsertMany:Re(f)}}function Yv(t){t===void 0&&(t={});var e=Ge({sortComparer:!1,selectId:function(s){return s.id}},t),r=e.selectId,a=e.sortComparer,n=Hv(),o=zv(),i=a?Wv(r,a):$m(r);return Ge(Ge(Ge({selectId:r,sortComparer:a},n),o),i)}var Kv="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",fl=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=Kv[Math.random()*64|0];return e},Jv=["name","message","stack","code"],ml=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),Hm=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),zm=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,a=Jv;r<a.length;r++){var n=a[r];typeof t[n]=="string"&&(e[n]=t[n])}return e}return{message:String(t)}},ee=function(){function t(e,r,a){var n=S(e+"/fulfilled",function(l,d,m,p){return{payload:l,meta:il(Ge({},p||{}),{arg:m,requestId:d,requestStatus:"fulfilled"})}}),o=S(e+"/pending",function(l,d,m){return{payload:void 0,meta:il(Ge({},m||{}),{arg:d,requestId:l,requestStatus:"pending"})}}),i=S(e+"/rejected",function(l,d,m,p,f){return{payload:p,error:(a&&a.serializeError||zm)(l||"Rejected"),meta:il(Ge({},f||{}),{arg:m,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=!1,u=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function c(l){return function(d,m,p){var f=(a==null?void 0:a.idGenerator)?a.idGenerator(l):fl(),g=new u,x,R=!1;function F(P){x=P,g.abort()}var A=function(){return Po(this,null,function(){var P,N,K,te,Y,j,ge;return Ao(this,function(Ce){switch(Ce.label){case 0:return Ce.trys.push([0,4,,5]),te=(P=a==null?void 0:a.condition)==null?void 0:P.call(a,l,{getState:m,extra:p}),Xv(te)?[4,te]:[3,2];case 1:te=Ce.sent(),Ce.label=2;case 2:if(te===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return R=!0,Y=new Promise(function(Q,D){return g.signal.addEventListener("abort",function(){return D({name:"AbortError",message:x||"Aborted"})})}),d(o(f,l,(N=a==null?void 0:a.getPendingMeta)==null?void 0:N.call(a,{requestId:f,arg:l},{getState:m,extra:p}))),[4,Promise.race([Y,Promise.resolve(r(l,{dispatch:d,getState:m,extra:p,requestId:f,signal:g.signal,abort:F,rejectWithValue:function(Q,D){return new ml(Q,D)},fulfillWithValue:function(Q,D){return new Hm(Q,D)}})).then(function(Q){if(Q instanceof ml)throw Q;return Q instanceof Hm?n(Q.payload,f,l,Q.meta):n(Q,f,l)})])];case 3:return K=Ce.sent(),[3,5];case 4:return j=Ce.sent(),K=j instanceof ml?i(null,f,l,j.payload,j.meta):i(j,f,l),[3,5];case 5:return ge=a&&!a.dispatchConditionRejection&&i.match(K)&&K.meta.condition,ge||d(K),[2,K]}})})}();return Object.assign(A,{abort:F,requestId:f,arg:l,unwrap:function(){return A.then(Gm)}})}}return Object.assign(c,{pending:o,rejected:i,fulfilled:n,typePrefix:e})}return t.withTypes=function(){return t},t}();function Gm(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Xv(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Wm=function(t,e){return Im(t)?t.match(e):t(e)};function Eo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return t.some(function(a){return Wm(a,r)})}}function gl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return t.every(function(a){return Wm(a,r)})}}function ji(t,e){if(!t||!t.meta)return!1;var r=typeof t.meta.requestId=="string",a=e.indexOf(t.meta.requestStatus)>-1;return r&&a}function Io(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function Ym(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?function(r){return ji(r,["pending"])}:Io(t)?function(r){var a=t.map(function(o){return o.pending}),n=Eo.apply(void 0,a);return n(r)}:Ym()(t[0])}function Ui(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?function(r){return ji(r,["rejected"])}:Io(t)?function(r){var a=t.map(function(o){return o.rejected}),n=Eo.apply(void 0,a);return n(r)}:Ui()(t[0])}function Km(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(a){return a&&a.meta&&a.meta.rejectedWithValue};return t.length===0?function(a){var n=gl(Ui.apply(void 0,t),r);return n(a)}:Io(t)?function(a){var n=gl(Ui.apply(void 0,t),r);return n(a)}:Km()(t[0])}function Jm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?function(r){return ji(r,["fulfilled"])}:Io(t)?function(r){var a=t.map(function(o){return o.fulfilled}),n=Eo.apply(void 0,a);return n(r)}:Jm()(t[0])}function Xm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?function(r){return ji(r,["pending","fulfilled","rejected"])}:Io(t)?function(r){for(var a=[],n=0,o=t;n<o.length;n++){var i=o[n];a.push(i.pending,i.rejected,i.fulfilled)}var s=Eo.apply(void 0,a);return s(r)}:Xm()(t[0])}var hl=function(t,e){if(typeof t!="function")throw new TypeError(e+" is not a function")},Sl=function(){},Zm=function(t,e){return e===void 0&&(e=Sl),t.catch(e),t},eg=function(t,e){return t.addEventListener("abort",e,{once:!0}),function(){return t.removeEventListener("abort",e)}},Za=function(t,e){var r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Zv="task",tg="listener",rg="completed",yl="cancelled",eF="task-"+yl,tF="task-"+rg,ag=tg+"-"+yl,rF=tg+"-"+rg,ko=function(){function t(e){this.code=e,this.name="TaskAbortError",this.message=Zv+" "+yl+" (reason: "+e+")"}return t}(),en=function(t){if(t.aborted)throw new ko(t.reason)};function ng(t,e){var r=Sl;return new Promise(function(a,n){var o=function(){return n(new ko(t.reason))};if(t.aborted){o();return}r=eg(t,o),e.finally(function(){return r()}).then(a,n)}).finally(function(){r=Sl})}var aF=function(t,e){return Po(void 0,null,function(){var r,a;return Ao(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return n.sent(),[4,t()];case 2:return r=n.sent(),[2,{status:"ok",value:r}];case 3:return a=n.sent(),[2,{status:a instanceof ko?"cancelled":"rejected",error:a}];case 4:return e==null||e(),[7];case 5:return[2]}})})},_i=function(t){return function(e){return Zm(ng(t,e).then(function(r){return en(t),r}))}},og=function(t){var e=_i(t);return function(r){return e(new Promise(function(a){return setTimeout(a,r)}))}},nF=Object.assign,ig={},Oo="listenerMiddleware",oF=function(t,e){var r=function(a){return eg(t,function(){return Za(a,t.reason)})};return function(a,n){hl(a,"taskExecutor");var o=new AbortController;r(o);var i=aF(function(){return Po(void 0,null,function(){var s;return Ao(this,function(u){switch(u.label){case 0:return en(t),en(o.signal),[4,a({pause:_i(o.signal),delay:og(o.signal),signal:o.signal})];case 1:return s=u.sent(),en(o.signal),[2,s]}})})},function(){return Za(o,tF)});return(n==null?void 0:n.autoJoin)&&e.push(i),{result:_i(t)(i),cancel:function(){Za(o,eF)}}}},iF=function(t,e){var r=function(a,n){return Po(void 0,null,function(){var o,i,s,u;return Ao(this,function(c){switch(c.label){case 0:en(e),o=function(){},i=new Promise(function(l,d){var m=t({predicate:a,effect:function(p,f){f.unsubscribe(),l([p,f.getState(),f.getOriginalState()])}});o=function(){m(),d()}}),s=[i],n!=null&&s.push(new Promise(function(l){return setTimeout(l,n,null)})),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,ng(e,Promise.race(s))];case 2:return u=c.sent(),en(e),[2,u];case 3:return o(),[7];case 4:return[2]}})})};return function(a,n){return Zm(r(a,n))}},sg=function(t){var e=t.type,r=t.actionCreator,a=t.matcher,n=t.predicate,o=t.effect;if(e)n=S(e).match;else if(r)e=r.type,n=r.match;else if(a)n=a;else if(!n)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return hl(o,"options.listener"),{predicate:n,type:e,effect:o}},sF=function(t){var e=sg(t),r=e.type,a=e.predicate,n=e.effect,o=fl(),i={id:o,effect:n,type:r,predicate:a,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return i},Cl=function(t){t.pending.forEach(function(e){Za(e,ag)})},cF=function(t){return function(){t.forEach(Cl),t.clear()}},cg=function(t,e,r){try{t(e,r)}catch(a){setTimeout(function(){throw a},0)}},ug=S(Oo+"/add"),lg=S(Oo+"/removeAll"),dg=S(Oo+"/remove"),uF=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,Vr([Oo+"/error"],t))};function lF(t){var e=this;t===void 0&&(t={});var r=new Map,a=t.extra,n=t.onError,o=n===void 0?uF:n;hl(o,"onError");var i=function(p){return p.unsubscribe=function(){return r.delete(p.id)},r.set(p.id,p),function(f){p.unsubscribe(),(f==null?void 0:f.cancelActive)&&Cl(p)}},s=function(p){for(var f=0,g=Array.from(r.values());f<g.length;f++){var x=g[f];if(p(x))return x}},u=function(p){var f=s(function(g){return g.effect===p.effect});return f||(f=sF(p)),i(f)},c=function(p){var f=sg(p),g=f.type,x=f.effect,R=f.predicate,F=s(function(A){var P=typeof g=="string"?A.type===g:A.predicate===R;return P&&A.effect===x});return F&&(F.unsubscribe(),p.cancelActive&&Cl(F)),!!F},l=function(p,f,g,x){return Po(e,null,function(){var R,F,A,P;return Ao(this,function(N){switch(N.label){case 0:R=new AbortController,F=iF(u,R.signal),A=[],N.label=1;case 1:return N.trys.push([1,3,4,6]),p.pending.add(R),[4,Promise.resolve(p.effect(f,nF({},g,{getOriginalState:x,condition:function(K,te){return F(K,te).then(Boolean)},take:F,delay:og(R.signal),pause:_i(R.signal),extra:a,signal:R.signal,fork:oF(R.signal,A),unsubscribe:p.unsubscribe,subscribe:function(){r.set(p.id,p)},cancelActiveListeners:function(){p.pending.forEach(function(K,te,Y){K!==R&&(Za(K,ag),Y.delete(K))})}})))];case 2:return N.sent(),[3,6];case 3:return P=N.sent(),P instanceof ko||cg(o,P,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(A)];case 5:return N.sent(),Za(R,rF),p.pending.delete(R),[7];case 6:return[2]}})})},d=cF(r),m=function(p){return function(f){return function(g){if(!cl(g))return f(g);if(ug.match(g))return u(g.payload);if(lg.match(g)){d();return}if(dg.match(g))return c(g.payload);var x=p.getState(),R=function(){if(x===ig)throw new Error(Oo+": getOriginalState can only be called synchronously");return x},F;try{if(F=f(g),r.size>0)for(var A=p.getState(),P=Array.from(r.values()),N=0,K=P;N<K.length;N++){var te=K[N],Y=!1;try{Y=te.predicate(g,A,x)}catch(j){Y=!1,cg(o,j,{raisedBy:"predicate"})}!Y||l(te,g,p,R)}}finally{x=ig}return F}}};return{middleware:m,startListening:u,stopListening:c,clearListeners:d}}var xl="RTK_autoBatch",dF=function(){return function(t){var e;return{payload:t,meta:(e={},e[xl]=!0,e)}}},pg,pF=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis):function(t){return(pg||(pg=Promise.resolve())).then(t).catch(function(e){return setTimeout(function(){throw e},0)})},fg=function(t){return function(e){setTimeout(e,t)}},fF=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:fg(10),mF=function(t){return t===void 0&&(t={type:"raf"}),function(e){return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=e.apply(void 0,r),o=!0,i=!1,s=!1,u=new Set,c=t.type==="tick"?pF:t.type==="raf"?fF:t.type==="callback"?t.queueNotification:fg(t.timeout),l=function(){s=!1,i&&(i=!1,u.forEach(function(d){return d()}))};return Object.assign({},n,{subscribe:function(d){var m=function(){return o&&d()},p=n.subscribe(m);return u.add(d),function(){p(),u.delete(d)}},dispatch:function(d){var m;try{return o=!((m=d==null?void 0:d.meta)==null?void 0:m[xl]),i=!o,i&&(s||(s=!0,c(l))),n.dispatch(d)}finally{o=!0}}})}}};im();function It(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r}function v(t,e,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{c(a.next(l))}catch(d){i(d)}}function u(l){try{c(a.throw(l))}catch(d){i(d)}}function c(l){l.done?o(l.value):n(l.value).then(s,u)}c((a=a.apply(t,e||[])).next())})}var oe;(function(t){t.search="search",t.click="click",t.custom="custom",t.view="view",t.collect="collect"})(oe||(oe={}));function gF(){return typeof window!="undefined"}function vl(){return typeof navigator!="undefined"}function tn(){return typeof document!="undefined"}function Fl(){try{return typeof localStorage!="undefined"}catch{return!1}}function hF(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function mg(){return vl()&&navigator.cookieEnabled}var SF=[oe.click,oe.custom,oe.search,oe.view],yF=(t,e)=>SF.indexOf(t)!==-1?Object.assign({language:tn()?document.documentElement.lang:"unknown",userAgent:vl()?navigator.userAgent:"unknown"},e):e,rn=class{static set(e,r,a){var n,o,i,s;a&&(o=new Date,o.setTime(o.getTime()+a)),s=window.location.hostname,s.indexOf(".")===-1?gg(e,r,o):(i=s.split("."),n=i[i.length-2]+"."+i[i.length-1],gg(e,r,o,n))}static get(e){for(var r=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(e){rn.set(e,"",-1)}};function gg(t,e,r,a){document.cookie=`${t}=${e}`+(r?`;expires=${r.toUTCString()}`:"")+(a?`;domain=${a}`:"")+";path=/;SameSite=Lax"}function CF(){return Fl()?localStorage:mg()?new Mr:hF()?sessionStorage:new an}var Mr=class{getItem(e){return rn.get(`${Mr.prefix}${e}`)}removeItem(e){rn.erase(`${Mr.prefix}${e}`)}setItem(e,r,a){rn.set(`${Mr.prefix}${e}`,r,a)}};Mr.prefix="coveo_";var hg=class{constructor(){this.cookieStorage=new Mr}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,r){localStorage.setItem(e,r),this.cookieStorage.setItem(e,r,31556926e3)}},an=class{getItem(e){return null}removeItem(e){}setItem(e,r){}},qo="__coveo.analytics.history",Sg=20,yg=1e3*60,Cg=75,To=class{constructor(e){this.store=e||CF()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])}addElementAsync(e){return v(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(e)&&this.setHistory([e].concat(r)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return v(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(qo);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return v(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(qo);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(qo,JSON.stringify(e.slice(0,Sg)))}catch{}}clear(){try{this.store.removeItem(qo)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((a,n)=>(n.internalTime||0)-(a.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Cg)),e}isValidEntry(e){let r=this.getMostRecentElement();return r&&r.value==e.value?(e.internalTime||0)-(r.internalTime||0)>yg:!0}stripInternalTime(e){return Array.isArray(e)?e.map(r=>{let{name:a,time:n,value:o}=r;return{name:a,time:n,value:o}}):[]}stripEmptyQuery(e){let{name:r,time:a,value:n}=e;return r&&typeof n=="string"&&r.toLowerCase()==="query"&&n.trim()===""?{name:r,time:a}:e}stripEmptyQueries(e){return e.map(r=>this.stripEmptyQuery(r))}},xg=Object.freeze({__proto__:null,HistoryStore:To,MAX_NUMBER_OF_HISTORY_ELEMENTS:Sg,MAX_VALUE_SIZE:Cg,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:yg,STORE_KEY:qo,default:To}),xF=(t,e)=>v(void 0,void 0,void 0,function*(){return t===oe.view?(yield vF(e.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},e)):e}),vF=t=>v(void 0,void 0,void 0,function*(){let e=new To,r={name:"PageView",value:t,time:new Date().toISOString()};yield e.addElementAsync(r)}),$i,FF=new Uint8Array(16);function RF(){if(!$i&&($i=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $i(FF)}var bF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Hi(t){return typeof t=="string"&&bF.test(t)}var Me=[];for(let t=0;t<256;++t)Me.push((t+256).toString(16).slice(1));function vg(t,e=0){return(Me[t[e+0]]+Me[t[e+1]]+Me[t[e+2]]+Me[t[e+3]]+"-"+Me[t[e+4]]+Me[t[e+5]]+"-"+Me[t[e+6]]+Me[t[e+7]]+"-"+Me[t[e+8]]+Me[t[e+9]]+"-"+Me[t[e+10]]+Me[t[e+11]]+Me[t[e+12]]+Me[t[e+13]]+Me[t[e+14]]+Me[t[e+15]]).toLowerCase()}function AF(t){if(!Hi(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function PF(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var wF="6ba7b810-9dad-11d1-80b4-00c04fd430c8",EF="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function IF(t,e,r){function a(n,o,i,s){var u;if(typeof n=="string"&&(n=PF(n)),typeof o=="string"&&(o=AF(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+n.length);if(c.set(o),c.set(n,o.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=c[l];return i}return vg(c)}try{a.name=t}catch{}return a.DNS=wF,a.URL=EF,a}var kF=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Fg={randomUUID:kF};function na(t,e,r){if(Fg.randomUUID&&!e&&!t)return Fg.randomUUID();t=t||{};let a=t.random||(t.rng||RF)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){r=r||0;for(let n=0;n<16;++n)e[r+n]=a[n];return e}return vg(a)}function OF(t,e,r,a){switch(t){case 0:return e&r^~e&a;case 1:return e^r^a;case 2:return e&r^e&a^r&a;case 3:return e^r^a}}function Rl(t,e){return t<<e|t>>>32-e}function qF(t){let e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){let i=unescape(encodeURIComponent(t));t=[];for(let s=0;s<i.length;++s)t.push(i.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);let a=t.length/4+2,n=Math.ceil(a/16),o=new Array(n);for(let i=0;i<n;++i){let s=new Uint32Array(16);for(let u=0;u<16;++u)s[u]=t[i*64+u*4]<<24|t[i*64+u*4+1]<<16|t[i*64+u*4+2]<<8|t[i*64+u*4+3];o[i]=s}o[n-1][14]=(t.length-1)*8/Math.pow(2,32),o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=(t.length-1)*8&4294967295;for(let i=0;i<n;++i){let s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=o[i][p];for(let p=16;p<80;++p)s[p]=Rl(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let u=r[0],c=r[1],l=r[2],d=r[3],m=r[4];for(let p=0;p<80;++p){let f=Math.floor(p/20),g=Rl(u,5)+OF(f,c,l,d)+m+e[f]+s[p]>>>0;m=d,d=l,l=Rl(c,30)>>>0,c=u,u=g}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+m>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var TF=IF("v5",80,qF),Rg=TF,bg="2.28.23",Ag=t=>`${t.protocol}//${t.hostname}${t.pathname.indexOf("/")===0?t.pathname:`/${t.pathname}`}${t.search}`,Do={pageview:"pageview",event:"event"},bl=class{constructor({client:e,uuidGenerator:r=na}){this.client=e,this.uuidGenerator=r}},Pg=class extends bl{constructor({client:e,uuidGenerator:r=na}){super({client:e,uuidGenerator:r});this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=Ag(window.location),this.lastReferrer=tn()?document.referrer:"",this.addHooks()}getApi(e){switch(e){case"setAction":return this.setAction;default:return null}}setAction(e,r){this.action=e,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,r){return Object.assign({hitType:e},this.getNextValues(e,r))}updateLocationInformation(e,r){this.updateLocationForNextPageView(e,r)}getDefaultContextInformation(e){let r={title:tn()?document.title:"",encoding:tn()?document.characterSet:"UTF-8"},a={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},o={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},o),a),n),r)}updateLocationForNextPageView(e,r){let{pageViewId:a,referrer:n,location:o}=this.getNextValues(e,r);this.lastReferrer=n,this.pageViewId=a,this.currentLocation=o,e===Do.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,r){return{pageViewId:e===Do.pageview?this.nextPageViewId:this.pageViewId,referrer:e===Do.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===Do.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(e){if(e.page){let r=n=>n.replace(/^\/?(.*)$/,"/$1");return`${(n=>n.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(e.page)}`}else return Ag(window.location)}},kt=class{constructor(e,r){if(!Hi(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>kt.expirationTime}validate(e,r){return!this.expired&&this.matchReferrer(e,r)}matchReferrer(e,r){try{let a=new URL(e);return r.some(n=>new RegExp(n.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(a.host))}catch{return!1}}static fromString(e){let r=e.split(".");if(r.length!==2)return null;let[a,n]=r;if(a.length!==32||isNaN(parseInt(n)))return null;let o=a.substring(0,8)+"-"+a.substring(8,12)+"-"+a.substring(12,16)+"-"+a.substring(16,20)+"-"+a.substring(20,32);return Hi(o)?new kt(o,Number.parseInt(n)*1e3):null}};kt.cvo_cid="cvo_cid";kt.expirationTime=120;var wg=class extends bl{constructor({client:e,uuidGenerator:r=na}){super({client:e,uuidGenerator:r})}getApi(e){switch(e){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(e){return v(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(e),a=yield this.client.getCurrentVisitorId();return r.searchParams.set(kt.cvo_cid,new kt(a,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(e){this.client.setAcceptedLinkReferrers(e)}};wg.Id="link";var st=Object.keys;function zi(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}var Al={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},DF=st(Al).map(t=>Al[t]),VF=[...DF].join("|"),LF=new RegExp(`^(${VF}$)`),MF={svcAction:"svc_action",svcActionData:"svc_action_data"},NF=t=>st(t).filter(e=>t[e]!==void 0).reduce((e,r)=>{let a=Al[r]||r;return Object.assign(Object.assign({},e),{[a]:t[r]})},{}),QF=t=>LF.test(t),BF=[QF],Eg={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Ig={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},je={action:"pa",list:"pal",listSource:"pls"},Gi={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},jF=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Pl={id:"quoteId",affiliation:"quoteAffiliation"},wl={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},UF={add:je,bookmark_add:je,bookmark_remove:je,click:je,checkout:je,checkout_option:je,detail:je,impression:je,remove:je,refund:Object.assign(Object.assign({},je),Gi),purchase:Object.assign(Object.assign({},je),Gi),quickview:je,quote:Object.assign(Object.assign({},je),Pl),review:Object.assign(Object.assign({},je),wl)},_F=st(Eg).map(t=>Eg[t]),$F=st(Ig).map(t=>Ig[t]),HF=st(je).map(t=>je[t]),zF=st(Gi).map(t=>Gi[t]),GF=st(wl).map(t=>wl[t]),WF=st(Pl).map(t=>Pl[t]),YF=[..._F,"custom"].join("|"),KF=[...$F,"custom"].join("|"),kg="(pr[0-9]+)",Og="(il[0-9]+pi[0-9]+)",JF=new RegExp(`^${kg}(${YF})$`),XF=new RegExp(`^(${Og}(${KF}))|(il[0-9]+nm)$`),ZF=new RegExp(`^(${HF.join("|")})$`),eR=new RegExp(`^(${zF.join("|")})$`),tR=new RegExp(`^${kg}custom$`),rR=new RegExp(`^${Og}custom$`),aR=new RegExp(`^(${[...jF,...GF,...WF].join("|")})$`),nR=t=>JF.test(t),oR=t=>XF.test(t),iR=t=>ZF.test(t),sR=t=>eR.test(t),cR=t=>aR.test(t),uR=[oR,nR,iR,sR,cR],lR=[tR,rR],dR={anonymizeIp:"aip"},pR={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},fR={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},mR=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],gR=Object.assign(Object.assign(Object.assign(Object.assign({},dR),pR),fR),mR.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:e}),{})),El=Object.assign(Object.assign({},gR),MF),hR=t=>{let e=!!t.action&&UF[t.action]||{};return st(t).reduce((r,a)=>{let n=e[a]||El[a]||a;return Object.assign(Object.assign({},r),{[n]:t[a]})},{})},SR=st(El).map(t=>El[t]),yR=t=>SR.indexOf(t)!==-1,CR=t=>t==="custom",xR=t=>[...uR,...BF,yR,CR].some(e=>e(t)),vR=t=>st(t).reduce((e,r)=>{let a=FR(r);return a?Object.assign(Object.assign({},e),RR(a,t[r])):Object.assign(Object.assign({},e),{[r]:t[r]})},{}),FR=t=>{let e;return[...lR].every(r=>{var a;return e=(a=r.exec(t))===null||a===void 0?void 0:a[1],!Boolean(e)}),e},RR=(t,e)=>st(e).reduce((r,a)=>Object.assign(Object.assign({},r),{[`${t}${a}`]:e[a]}),{}),qg=class{constructor(e){this.opts=e}sendEvent(e,r){return v(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:a,preprocessRequest:n}=this.opts,o=yield this.getQueryParamsForEventType(e),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${a}/analytics/${e}?${o}`,r,n),u=this.encodeForEventType(e,s),c=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,c)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,r,a){return v(this,void 0,void 0,function*(){let n=e,o=r;if(a){let i=yield a({url:e,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:u}=i;n=s||e;try{o=JSON.parse(u)}catch(c){console.error("Unable to process the request body as a JSON string",c)}}return{payload:o,url:n}})}encodeForEventType(e,r){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(e){return v(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:a}=this.opts,n=yield a.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(e)?`access_token=${r}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(o=>!!o).join("&")})}isEventTypeLegacy(e){return[oe.click,oe.custom,oe.search,oe.view].indexOf(e)!==-1}encodeForLegacyType(e,r){return`${e}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter(r=>!!e[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(e[r]))}`).join("&")}encodeValue(e){return typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:JSON.stringify(e)}},Tg=class{sendEvent(e,r){return v(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return v(this,void 0,void 0,function*(){return Promise.resolve()})}},Dg=window.fetch,Il=class{constructor(e){this.opts=e}sendEvent(e,r){return v(this,void 0,void 0,function*(){let{baseUrl:a,visitorIdProvider:n,preprocessRequest:o}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",s={url:`${a}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},s),o?yield o(s,"analyticsFetch"):{}),{url:c}=u,l=It(u,["url"]),d=yield Dg(c,l);if(d.ok){let m=yield d.json();return m.visitorId&&n.setCurrentVisitorId(m.visitorId),m}else{try{d.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,d,r),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return v(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts,r=`${e}/analytics/visit`;yield Dg(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return[oe.click,oe.custom,oe.search,oe.view].indexOf(e)!==-1}getVisitorIdParam(){return v(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,r=yield e.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},Vg=class{constructor(e,r){Fl()&&mg()?this.storage=new hg:Fl()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new an),this.client=new Il(e),this.beaconClient=new qg(e),window.addEventListener("beforeunload",()=>{let a=r();for(let{eventType:n,payload:o}of a)this.beaconClient.sendEvent(n,o)})}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Lg=class{constructor(e,r){this.storage=r||new an,this.client=new Il(e)}getClientDependingOnEventType(e){return this.client}},Mg=class{constructor(){this.storage=new an,this.client=new Tg}getClientDependingOnEventType(e){return this.client}},bR="xx",AR=t=>(t==null?void 0:t.startsWith(bR))||!1,PR=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function wR(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var ER=["1",1,"yes",!0];function Vo(){return vl()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(t=>ER.indexOf(t)!==-1)}var Ng="v15",Qg={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function IR(t=Qg.default,e=Ng,r=!1){if(t=t.replace(/\/$/,""),r)return`${t}/${e}`;let a=t.endsWith("/rest")||t.endsWith("/rest/ua");return`${t}${a?"":"/rest"}/${e}`}var kR="38824e1f-37f5-42d3-8372-a4b8fa9df946",_e=class{get defaultOptions(){return{endpoint:Qg.default,isCustomEndpoint:!1,token:"",version:Ng,beforeSendHooks:[],afterSendHooks:[]}}get version(){return bg}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[xF,yF].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),Vo()&&(this.clear(),this.runtime.storage=new an),this.addEventTypeMapping(oe.view,{newEventType:oe.view,addClientIdParameter:!0}),this.addEventTypeMapping(oe.click,{newEventType:oe.click,addClientIdParameter:!0}),this.addEventTypeMapping(oe.custom,{newEventType:oe.custom,addClientIdParameter:!0}),this.addEventTypeMapping(oe.search,{newEventType:oe.search,addClientIdParameter:!0})}initRuntime(e){return gF()&&tn()?new Vg(e,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(wR()&&console.warn(PR),new Lg(e))}get storage(){return this.runtime.storage}determineVisitorId(){return v(this,void 0,void 0,function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||na()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),na()}})}getCurrentVisitorId(){return v(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return v(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,r){return v(this,void 0,void 0,function*(){if(Hi(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Rg(e,Rg(r,kR)))}})}getParameters(e,...r){return v(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...r)})}getPayload(e,...r){return v(this,void 0,void 0,function*(){let a=yield this.resolveParameters(e,...r);return yield this.resolvePayloadForParameters(e,a)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(na()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Vo())return null;try{let r=new URL(e).searchParams.get(kt.cvo_cid);if(r==null)return null;let a=kt.fromString(r);return!a||!tn()||!a.validate(document.referrer,this.acceptedLinkReferrers)?null:a.clientId}catch{}return null}resolveParameters(e,...r){return v(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:a=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:o=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[e]||{};return yield[p=>a.length>0?this.parseVariableArgumentsPayload(a,p):p[0],p=>v(this,void 0,void 0,function*(){return Object.assign(Object.assign({},p),{visitorId:n?yield this.getCurrentVisitorId():""})}),p=>v(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},p),{clientId:yield this.getCurrentVisitorId()}):p}),p=>o?this.ensureAnonymousUserWhenUsingApiKey(p):p,p=>this.beforeSendHooks.reduce((f,g)=>v(this,void 0,void 0,function*(){let x=yield f;return yield g(e,x)}),p)].reduce((p,f)=>v(this,void 0,void 0,function*(){let g=yield p;return yield f(g)}),Promise.resolve(r))})}resolvePayloadForParameters(e,r){return v(this,void 0,void 0,function*(){let{usesMeasurementProtocol:a=!1}=this.eventTypeMapping[e]||{};return yield[d=>this.setTrackingIdIfTrackingIdNotPresent(d),d=>this.removeEmptyPayloadValues(d,e),d=>this.validateParams(d,e),d=>a?hR(d):d,d=>a?this.removeUnknownParameters(d):d,d=>a?this.processCustomParameters(d):this.mapCustomParametersToCustomData(d)].reduce((d,m)=>v(this,void 0,void 0,function*(){let p=yield d;return yield m(p)}),Promise.resolve(r))})}makeEvent(e,...r){return v(this,void 0,void 0,function*(){let{newEventType:a=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...r),o=yield this.resolvePayloadForParameters(e,n);return{eventType:a,payload:o,log:i=>v(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:a,payload:Object.assign(Object.assign({},o),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(e,Object.assign(Object.assign({},n),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e,...r){return v(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...r)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return v(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:r,payload:a}=e;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,a)}})}clear(){this.storage.removeItem("visitorId"),new To().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return v(this,void 0,void 0,function*(){return this.makeEvent(oe.search,e)})}sendSearchEvent(e){var{searchQueryUid:r}=e,a=It(e,["searchQueryUid"]);return v(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(a)).log({searchQueryUid:r})})}makeClickEvent(e){return v(this,void 0,void 0,function*(){return this.makeEvent(oe.click,e)})}sendClickEvent(e){var{searchQueryUid:r}=e,a=It(e,["searchQueryUid"]);return v(this,void 0,void 0,function*(){return(yield this.makeClickEvent(a)).log({searchQueryUid:r})})}makeCustomEvent(e){return v(this,void 0,void 0,function*(){return this.makeEvent(oe.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:r}=e,a=It(e,["lastSearchQueryUid"]);return v(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(a)).log({lastSearchQueryUid:r})})}makeViewEvent(e){return v(this,void 0,void 0,function*(){return this.makeEvent(oe.view,e)})}sendViewEvent(e){return v(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return v(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return v(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,r){this.eventTypeMapping[e]=r}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(r=>typeof r=="string"))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,r){let a={};for(let n=0,o=r.length;n<o;n++){let i=r[n];if(typeof i=="string")a[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},a),i)}return a}isKeyAllowedEmpty(e,r){return({[oe.search]:["queryText"]}[e]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(e,r){let a=n=>typeof n!="undefined"&&n!==null&&n!=="";return Object.keys(e).filter(n=>this.isKeyAllowedEmpty(r,n)||a(e[n])).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:e[o]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(a=>{if(xR(a))return!0;console.log(a,"is not processed by coveoua")}).reduce((a,n)=>Object.assign(Object.assign({},a),{[n]:e[n]}),{})}processCustomParameters(e){let{custom:r}=e,a=It(e,["custom"]),n={};r&&zi(r)&&(n=this.lowercaseKeys(r));let o=vR(a);return Object.assign(Object.assign({},n),o)}mapCustomParametersToCustomData(e){let{custom:r}=e,a=It(e,["custom"]);if(r&&zi(r)){let n=this.lowercaseKeys(r);return Object.assign(Object.assign({},a),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let r=Object.keys(e),a={};return r.forEach(n=>{a[n.toLowerCase()]=e[n]}),a}validateParams(e,r){let{anonymizeIp:a}=e,n=It(e,["anonymizeIp"]);return a!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${a}`.toLowerCase())==-1&&(n.anonymizeIp=1),(r==oe.view||r==oe.click||r==oe.search||r==oe.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),r==oe.view&&(n.location=this.limit(n.location,128)),(r=="pageview"||r=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:r}=e,a=It(e,["userId"]);return AR(this.options.token)&&!r?(a.userId="anonymous",a):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:r}=e,a=It(e,["trackingId"]);return r?e:(a.hasOwnProperty("custom")&&zi(a.custom)&&(a.custom.hasOwnProperty("context_website")||a.custom.hasOwnProperty("siteName"))&&(a.trackingId=a.custom.context_website||a.custom.siteName),a.hasOwnProperty("customData")&&zi(a.customData)&&(a.customData.hasOwnProperty("context_website")||a.customData.hasOwnProperty("siteName"))&&(a.trackingId=a.customData.context_website||a.customData.siteName),a)}limit(e,r){return typeof e!="string"?e:e.substring(0,r)}get baseUrl(){return IR(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Ne;(function(t){t.contextChanged="contextChanged",t.expandToFullUI="expandToFullUI",t.openUserActions="openUserActions",t.showPrecedingSessions="showPrecedingSessions",t.showFollowingSessions="showFollowingSessions",t.clickViewedDocument="clickViewedDocument",t.clickPageView="clickPageView",t.createArticle="createArticle"})(Ne||(Ne={}));var y;(function(t){t.interfaceLoad="interfaceLoad",t.interfaceChange="interfaceChange",t.didyoumeanAutomatic="didyoumeanAutomatic",t.didyoumeanClick="didyoumeanClick",t.resultsSort="resultsSort",t.searchboxSubmit="searchboxSubmit",t.searchboxClear="searchboxClear",t.searchboxAsYouType="searchboxAsYouType",t.breadcrumbFacet="breadcrumbFacet",t.breadcrumbResetAll="breadcrumbResetAll",t.documentQuickview="documentQuickview",t.documentOpen="documentOpen",t.omniboxAnalytics="omniboxAnalytics",t.omniboxFromLink="omniboxFromLink",t.searchFromLink="searchFromLink",t.triggerNotify="notify",t.triggerExecute="execute",t.triggerQuery="query",t.undoTriggerQuery="undoQuery",t.triggerRedirect="redirect",t.pagerResize="pagerResize",t.pagerNumber="pagerNumber",t.pagerNext="pagerNext",t.pagerPrevious="pagerPrevious",t.pagerScrolling="pagerScrolling",t.staticFilterClearAll="staticFilterClearAll",t.staticFilterSelect="staticFilterSelect",t.staticFilterDeselect="staticFilterDeselect",t.facetClearAll="facetClearAll",t.facetSearch="facetSearch",t.facetSelect="facetSelect",t.facetSelectAll="facetSelectAll",t.facetDeselect="facetDeselect",t.facetExclude="facetExclude",t.facetUnexclude="facetUnexclude",t.facetUpdateSort="facetUpdateSort",t.facetShowMore="showMoreFacetResults",t.facetShowLess="showLessFacetResults",t.queryError="query",t.queryErrorBack="errorBack",t.queryErrorClear="errorClearQuery",t.queryErrorRetry="errorRetry",t.recommendation="recommendation",t.recommendationInterfaceLoad="recommendationInterfaceLoad",t.recommendationOpen="recommendationOpen",t.likeSmartSnippet="likeSmartSnippet",t.dislikeSmartSnippet="dislikeSmartSnippet",t.expandSmartSnippet="expandSmartSnippet",t.collapseSmartSnippet="collapseSmartSnippet",t.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",t.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",t.sendSmartSnippetReason="sendSmartSnippetReason",t.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",t.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",t.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",t.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",t.openSmartSnippetSource="openSmartSnippetSource",t.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",t.openSmartSnippetInlineLink="openSmartSnippetInlineLink",t.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",t.recentQueryClick="recentQueriesClick",t.clearRecentQueries="clearRecentQueries",t.recentResultClick="recentResultClick",t.clearRecentResults="clearRecentResults",t.noResultsBack="noResultsBack",t.showMoreFoldedResults="showMoreFoldedResults",t.showLessFoldedResults="showLessFoldedResults",t.copyToClipboard="copyToClipboard",t.caseSendEmail="Case.SendEmail",t.feedItemTextPost="FeedItem.TextPost",t.caseAttach="caseAttach",t.caseDetach="caseDetach",t.retryGeneratedAnswer="retryGeneratedAnswer",t.likeGeneratedAnswer="likeGeneratedAnswer",t.dislikeGeneratedAnswer="dislikeGeneratedAnswer",t.openGeneratedAnswerSource="openGeneratedAnswerSource",t.generatedAnswerStreamEnd="generatedAnswerStreamEnd",t.generatedAnswerSourceHover="generatedAnswerSourceHover",t.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",t.generatedAnswerHideAnswers="generatedAnswerHideAnswers",t.generatedAnswerShowAnswers="generatedAnswerShowAnswers",t.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",t.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(y||(y={}));var kl={[y.triggerNotify]:"queryPipelineTriggers",[y.triggerExecute]:"queryPipelineTriggers",[y.triggerQuery]:"queryPipelineTriggers",[y.triggerRedirect]:"queryPipelineTriggers",[y.queryError]:"errors",[y.queryErrorBack]:"errors",[y.queryErrorClear]:"errors",[y.queryErrorRetry]:"errors",[y.pagerNext]:"getMoreResults",[y.pagerPrevious]:"getMoreResults",[y.pagerNumber]:"getMoreResults",[y.pagerResize]:"getMoreResults",[y.pagerScrolling]:"getMoreResults",[y.facetSearch]:"facet",[y.facetShowLess]:"facet",[y.facetShowMore]:"facet",[y.recommendation]:"recommendation",[y.likeSmartSnippet]:"smartSnippet",[y.dislikeSmartSnippet]:"smartSnippet",[y.expandSmartSnippet]:"smartSnippet",[y.collapseSmartSnippet]:"smartSnippet",[y.openSmartSnippetFeedbackModal]:"smartSnippet",[y.closeSmartSnippetFeedbackModal]:"smartSnippet",[y.sendSmartSnippetReason]:"smartSnippet",[y.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.clearRecentQueries]:"recentQueries",[y.recentResultClick]:"recentlyClickedDocuments",[y.clearRecentResults]:"recentlyClickedDocuments",[y.showLessFoldedResults]:"folding",[y.caseDetach]:"case",[y.likeGeneratedAnswer]:"generatedAnswer",[y.dislikeGeneratedAnswer]:"generatedAnswer",[y.openGeneratedAnswerSource]:"generatedAnswer",[y.generatedAnswerStreamEnd]:"generatedAnswer",[y.generatedAnswerSourceHover]:"generatedAnswer",[y.generatedAnswerCopyToClipboard]:"generatedAnswer",[y.generatedAnswerHideAnswers]:"generatedAnswer",[y.generatedAnswerShowAnswers]:"generatedAnswer",[y.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Ne.expandToFullUI]:"interface",[Ne.openUserActions]:"User Actions",[Ne.showPrecedingSessions]:"User Actions",[Ne.showFollowingSessions]:"User Actions",[Ne.clickViewedDocument]:"User Actions",[Ne.clickPageView]:"User Actions",[Ne.createArticle]:"createArticle"},oa=class{constructor(){this.runtime=new Mg,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(oe.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(oe.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(oe.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(oe.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return bg}};function OR(t){let e="";return t.filter(r=>{let a=r!==e;return e=r,a})}function qR(t){return t.map(e=>e.replace(/;/g,""))}function Bg(t){let e=256,r=t.join(";");return r.length<=e?r:Bg(t.slice(1))}var jg=t=>{let e=qR(t),r=OR(e);return Bg(r)};function Ug(t){let e=typeof t.partialQueries=="string"?t.partialQueries:jg(t.partialQueries),r=typeof t.suggestions=="string"?t.suggestions:jg(t.suggestions);return Object.assign(Object.assign({},t),{partialQueries:e,suggestions:r})}var ia=class{constructor(e,r){this.opts=e,this.provider=r;let a=e.enableAnalytics===!1||Vo();this.coveoAnalyticsClient=a?new oa:new _e(e)}disable(){this.coveoAnalyticsClient instanceof _e&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new oa}enable(){this.coveoAnalyticsClient=new _e(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(y.interfaceLoad)}logInterfaceLoad(){return v(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(y.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return v(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(y.recommendation)}logRecommendation(){return v(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,r){return this.makeClickEvent(y.recommendationOpen,e,r)}logRecommendationOpen(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(y.staticFilterClearAll,e)}logStaticFilterClearAll(e){return v(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(y.staticFilterSelect,e)}logStaticFilterSelect(e){return v(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(y.staticFilterDeselect,e)}logStaticFilterDeselect(e){return v(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(y.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return v(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(y.interfaceChange,e)}logInterfaceChange(e){return v(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(y.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return v(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(y.didyoumeanClick)}logDidYouMeanClick(){return v(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(y.resultsSort,e)}logResultsSort(e){return v(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(y.searchboxSubmit)}logSearchboxSubmit(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(y.searchboxClear)}logSearchboxClear(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(y.searchboxAsYouType)}logSearchboxAsYouType(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(y.breadcrumbFacet,e)}logBreadcrumbFacet(e){return v(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(y.breadcrumbResetAll)}logBreadcrumbResetAll(){return v(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,r){return this.makeClickEvent(y.documentQuickview,e,r)}logDocumentQuickview(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,r){return this.makeClickEvent(y.documentOpen,e,r)}logDocumentOpen(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(y.omniboxAnalytics,Ug(e))}logOmniboxAnalytics(e){return v(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(y.omniboxFromLink,Ug(e))}logOmniboxFromLink(e){return v(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(y.searchFromLink)}logSearchFromLink(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(y.triggerNotify,e)}logTriggerNotify(e){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(y.triggerExecute,e)}logTriggerExecute(e){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(y.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(y.undoTriggerQuery,e)}logUndoTriggerQuery(e){return v(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(y.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(y.pagerResize,e)}logPagerResize(e){return v(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(y.pagerNumber,e)}logPagerNumber(e){return v(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(y.pagerNext,e)}logPagerNext(e){return v(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(y.pagerPrevious,e)}logPagerPrevious(e){return v(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(y.pagerScrolling)}logPagerScrolling(){return v(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(y.facetClearAll,e)}logFacetClearAll(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(y.facetSearch,e)}logFacetSearch(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(y.facetSelect,e)}logFacetSelect(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(y.facetDeselect,e)}logFacetDeselect(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(y.facetExclude,e)}logFacetExclude(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(y.facetUnexclude,e)}logFacetUnexclude(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(y.facetSelectAll,e)}logFacetSelectAll(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(y.facetUpdateSort,e)}logFacetUpdateSort(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(y.facetShowMore,e)}logFacetShowMore(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(y.facetShowLess,e)}logFacetShowLess(e){return v(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(y.queryError,e)}logQueryError(e){return v(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return v(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(y.queryErrorBack);return{description:e.description,log:()=>v(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(y.queryErrorBack)})}})}logQueryErrorBack(){return v(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return v(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(y.queryErrorRetry);return{description:e.description,log:()=>v(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(y.queryErrorRetry)})}})}logQueryErrorRetry(){return v(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return v(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(y.queryErrorClear);return{description:e.description,log:()=>v(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(y.queryErrorClear)})}})}logQueryErrorClear(){return v(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(y.likeSmartSnippet)}logLikeSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(y.dislikeSmartSnippet)}logDislikeSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(y.expandSmartSnippet)}logExpandSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(y.collapseSmartSnippet)}logCollapseSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(y.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(y.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return v(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,r){return this.makeCustomEvent(y.sendSmartSnippetReason,{reason:e,details:r})}logSmartSnippetFeedbackReason(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(y.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return v(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(y.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return v(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(y.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return v(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(y.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return v(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,r){return this.makeClickEvent(y.openSmartSnippetSource,e,r)}logOpenSmartSnippetSource(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,r){return this.makeClickEvent(y.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(e,r){return this.makeClickEvent(y.copyToClipboard,e,r)}logCopyToClipboard(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,r){return this.makeClickEvent(y.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,r){return this.makeClickEvent(y.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(y.recentQueryClick)}logRecentQueryClick(){return v(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(y.clearRecentQueries)}logClearRecentQueries(){return v(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,r){return this.makeCustomEvent(y.recentResultClick,{info:e,identifier:r})}logRecentResultClick(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(y.clearRecentResults)}logClearRecentResults(){return v(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(y.noResultsBack)}logNoResultsBack(){return v(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,r){return this.makeClickEvent(y.showMoreFoldedResults,e,r)}logShowMoreFoldedResults(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(y.showLessFoldedResults)}logShowLessFoldedResults(){return v(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,r){var a;return{actionCause:r,customData:(a=e.payload)===null||a===void 0?void 0:a.customData}}makeCustomEvent(e,r,a=kl[e]){return v(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:a,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(e,r,a=kl[e]){return v(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,r,a)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,r,a){return v(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),a),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(e,r,a){return v(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,r,a)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,r){return v(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,r){return v(this,void 0,void 0,function*(){let a=yield this.getBaseSearchEventRequest(e,r),n=yield this.coveoAnalyticsClient.makeSearchEvent(a);return{description:this.makeEventDescription(n,e),log:({searchUID:o})=>n.log({searchQueryUid:o})}})}makeClickEvent(e,r,a,n){return v(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),i=yield this.coveoAnalyticsClient.makeClickEvent(o);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(e,r,a,n){return v(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,r,a,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var a,n;return v(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return v(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof _e?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(y.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return v(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(y.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return v(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(y.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return v(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(y.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(y.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(y.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(y.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(y.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(y.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return v(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(y.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return v(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(y.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}},Wi=Object.assign({},Do),_g=Object.keys(Wi).map(t=>Wi[t]),Lo=class extends Pg{constructor({client:e,uuidGenerator:r=na}){super({client:e,uuidGenerator:r});this.ticket={}}getApi(e){let r=super.getApi(e);if(r!==null)return r;switch(e){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((e,...[r])=>_g.indexOf(e)!==-1?this.addSVCDataToPayload(e,r):r),this.client.registerAfterSendEventHook((e,...[r])=>(_g.indexOf(e)!==-1&&this.updateLocationInformation(e,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(Wi.pageview,{newEventType:oe.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(Wi.event,{newEventType:oe.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,r){var a;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,r)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys((a=this.actionData)!==null&&a!==void 0?a:{}).length>0?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},o),n),r)}getTicketPayload(){return NF(this.ticket)}};Lo.Id="svc";var Yi;(function(t){t.click="click",t.flowStart="flowStart"})(Yi||(Yi={}));var ht;(function(t){t.enterInterface="ticket_create_start",t.fieldUpdate="ticket_field_update",t.fieldSuggestionClick="ticket_classification_click",t.suggestionClick="suggestion_click",t.suggestionRate="suggestion_rate",t.nextCaseStep="ticket_next_stage",t.caseCancelled="ticket_cancel",t.caseSolved="ticket_cancel",t.caseCreated="ticket_create"})(ht||(ht={}));var Ki;(function(t){t.quit="Quit",t.solved="Solved"})(Ki||(Ki={}));var Ol=class{constructor(e,r){var a;this.options=e,this.provider=r;let n=((a=e.enableAnalytics)!==null&&a!==void 0?a:!0)&&!Vo();this.coveoAnalyticsClient=n?new _e(e):new oa,this.svc=new Lo({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof _e&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new oa,this.svc=new Lo({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new _e(this.options),this.svc=new Lo({client:this.coveoAnalyticsClient})}logEnterInterface(e){return this.svc.setAction(ht.enterInterface),this.svc.setTicket(e.ticket),this.sendFlowStartEvent()}logUpdateCaseField(e){return this.svc.setAction(ht.fieldUpdate,{fieldName:e.fieldName}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectFieldSuggestion(e){return this.svc.setAction(ht.fieldSuggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(e){return this.svc.setAction(ht.suggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logRateDocumentSuggestion(e){return this.svc.setAction(ht.suggestionRate,Object.assign({rate:e.rating},e.suggestion)),this.svc.setTicket(e.ticket),this.sendClickEvent()}logMoveToNextCaseStep(e){return this.svc.setAction(ht.nextCaseStep,{stage:e==null?void 0:e.stage}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCancelled(e){return this.svc.setAction(ht.caseCancelled,{reason:Ki.quit}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseSolved(e){return this.svc.setAction(ht.caseSolved,{reason:Ki.solved}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCreated(e){return this.svc.setAction(ht.caseCreated),this.svc.setTicket(e.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Yi.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Yi.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},TR=t=>{let e={};return t.caseContext&&Object.keys(t.caseContext).forEach(r=>{var a;let n=(a=t.caseContext)===null||a===void 0?void 0:a[r];if(n){let o=`context_${r}`;e[o]=n}}),e},U=(t,e=!0)=>{let{caseContext:r,caseId:a,caseNumber:n}=t,o=It(t,["caseContext","caseId","caseNumber"]),i=TR(t);return Object.assign(Object.assign(Object.assign({CaseId:a,CaseNumber:n},o),!!i.context_Case_Subject&&{CaseSubject:i.context_Case_Subject}),e&&i)},ql=class{constructor(e,r){this.opts=e,this.provider=r;let a=e.enableAnalytics===!1||Vo();this.coveoAnalyticsClient=a?new oa:new _e(e)}disable(){this.coveoAnalyticsClient instanceof _e&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new oa}enable(){this.coveoAnalyticsClient=new _e(this.opts)}logInterfaceLoad(e){if(e){let r=U(e);return this.logSearchEvent(y.interfaceLoad,r)}return this.logSearchEvent(y.interfaceLoad)}logInterfaceChange(e){let r=U(e);return this.logSearchEvent(y.interfaceChange,r)}logStaticFilterDeselect(e){let r=U(e);return this.logSearchEvent(y.staticFilterDeselect,r)}logFetchMoreResults(e){if(e){let r=U(e);return this.logCustomEvent(y.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(y.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(e){let r=U(e);return this.logSearchEvent(y.breadcrumbFacet,r)}logBreadcrumbResetAll(e){if(e){let r=U(e);return this.logSearchEvent(y.breadcrumbResetAll,r)}return this.logSearchEvent(y.breadcrumbResetAll)}logFacetSelect(e){let r=U(e);return this.logSearchEvent(y.facetSelect,r)}logFacetExclude(e){let r=U(e);return this.logSearchEvent(y.facetExclude,r)}logFacetDeselect(e){let r=U(e);return this.logSearchEvent(y.facetDeselect,r)}logFacetUpdateSort(e){let r=U(e);return this.logSearchEvent(y.facetUpdateSort,r)}logFacetClearAll(e){let r=U(e);return this.logSearchEvent(y.facetClearAll,r)}logFacetShowMore(e){let r=U(e,!1);return this.logCustomEvent(y.facetShowMore,r)}logFacetShowLess(e){let r=U(e,!1);return this.logCustomEvent(y.facetShowLess,r)}logQueryError(e){let r=U(e,!1);return this.logCustomEvent(y.queryError,r)}logPagerNumber(e){let r=U(e,!1);return this.logCustomEvent(y.pagerNumber,r)}logPagerNext(e){let r=U(e,!1);return this.logCustomEvent(y.pagerNext,r)}logPagerPrevious(e){let r=U(e,!1);return this.logCustomEvent(y.pagerPrevious,r)}logDidYouMeanAutomatic(e){if(e){let r=U(e);return this.logSearchEvent(y.didyoumeanAutomatic,r)}return this.logSearchEvent(y.didyoumeanAutomatic)}logDidYouMeanClick(e){if(e){let r=U(e);return this.logSearchEvent(y.didyoumeanClick,r)}return this.logSearchEvent(y.didyoumeanClick)}logResultsSort(e){let r=U(e);return this.logSearchEvent(y.resultsSort,r)}logSearchboxSubmit(e){if(e){let r=U(e);return this.logSearchEvent(y.searchboxSubmit,r)}return this.logSearchEvent(y.searchboxSubmit)}logContextChanged(e){let r=U(e);return this.logSearchEvent(Ne.contextChanged,r)}logExpandToFullUI(e){let r=U(e);return this.logCustomEvent(Ne.expandToFullUI,r)}logOpenUserActions(e){let r=U(e,!1);return this.logCustomEvent(Ne.openUserActions,r)}logShowPrecedingSessions(e){let r=U(e,!1);return this.logCustomEvent(Ne.showPrecedingSessions,r)}logShowFollowingSessions(e){let r=U(e,!1);return this.logCustomEvent(Ne.showFollowingSessions,r)}logViewedDocumentClick(e,r){return this.logCustomEvent(Ne.clickViewedDocument,Object.assign(Object.assign({},U(r,!1)),{document:e}))}logPageViewClick(e,r){return this.logCustomEvent(Ne.clickPageView,Object.assign(Object.assign({},U(r,!1)),{pageView:e}))}logCreateArticle(e,r){return this.logCustomEvent(Ne.createArticle,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logDocumentOpen(e,r,a){return this.logClickEvent(y.documentOpen,e,r,a?U(a,!1):void 0)}logCopyToClipboard(e,r,a){return this.logClickEvent(y.copyToClipboard,e,r,a?U(a,!1):void 0)}logCaseSendEmail(e,r,a){return this.logClickEvent(y.caseSendEmail,e,r,a?U(a,!1):void 0)}logFeedItemTextPost(e,r,a){return this.logClickEvent(y.feedItemTextPost,e,r,a?U(a,!1):void 0)}logDocumentQuickview(e,r,a){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl};return this.logClickEvent(y.documentQuickview,e,r,a?Object.assign(Object.assign({},U(a,!1)),n):n)}logCaseAttach(e,r,a){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl,resultUriHash:e.documentUriHash};return this.logClickEvent(y.caseAttach,e,r,a?Object.assign(Object.assign({},U(a,!1)),n):n)}logCaseDetach(e,r){return this.logCustomEvent(y.caseDetach,r?Object.assign(Object.assign({},U(r,!1)),{resultUriHash:e}):{resultUriHash:e})}logLikeSmartSnippet(e){return this.logCustomEvent(y.likeSmartSnippet,e?U(e,!1):void 0)}logDislikeSmartSnippet(e){return this.logCustomEvent(y.dislikeSmartSnippet,e?U(e,!1):void 0)}logExpandSmartSnippet(e){return this.logCustomEvent(y.expandSmartSnippet,e?U(e,!1):void 0)}logCollapseSmartSnippet(e){return this.logCustomEvent(y.collapseSmartSnippet,e?U(e,!1):void 0)}logOpenSmartSnippetFeedbackModal(e){return this.logCustomEvent(y.openSmartSnippetFeedbackModal,e?U(e,!1):void 0)}logCloseSmartSnippetFeedbackModal(e){return this.logCustomEvent(y.closeSmartSnippetFeedbackModal,e?U(e,!1):void 0)}logSmartSnippetFeedbackReason(e,r,a){return this.logCustomEvent(y.sendSmartSnippetReason,a?Object.assign(Object.assign({},U(a,!1)),{reason:e,details:r}):{reason:e,details:r})}logExpandSmartSnippetSuggestion(e,r){let a="documentId"in e?e:{documentId:e};return this.logCustomEvent(y.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},U(r,!1)),a):a)}logCollapseSmartSnippetSuggestion(e,r){let a="documentId"in e?e:{documentId:e};return this.logCustomEvent(y.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},U(r,!1)),a):a)}logOpenSmartSnippetSource(e,r,a){return this.logClickEvent(y.openSmartSnippetSource,e,r,a?U(a,!1):void 0)}logOpenSmartSnippetSuggestionSource(e,r,a){return this.logClickEvent(y.openSmartSnippetSuggestionSource,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},U(a,!1)),r):r)}logOpenSmartSnippetInlineLink(e,r,a){return this.logClickEvent(y.openSmartSnippetInlineLink,e,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},a?Object.assign(Object.assign({},U(a,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(e,r,a){return this.logClickEvent(y.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},U(a,!1)),r):r)}logLikeGeneratedAnswer(e,r){return this.logCustomEvent(y.likeGeneratedAnswer,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logDislikeGeneratedAnswer(e,r){return this.logCustomEvent(y.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logOpenGeneratedAnswerSource(e,r){return this.logCustomEvent(y.openGeneratedAnswerSource,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logGeneratedAnswerSourceHover(e,r){return this.logCustomEvent(y.generatedAnswerSourceHover,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logGeneratedAnswerCopyToClipboard(e,r){return this.logCustomEvent(y.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logGeneratedAnswerHideAnswers(e,r){return this.logCustomEvent(y.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logGeneratedAnswerShowAnswers(e,r){return this.logCustomEvent(y.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logGeneratedAnswerFeedbackSubmit(e,r){return this.logCustomEvent(y.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logRephraseGeneratedAnswer(e,r){return this.logSearchEvent(y.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logRetryGeneratedAnswer(e){return this.logSearchEvent(y.retryGeneratedAnswer,e?Object.assign({},U(e,!1)):{})}logGeneratedAnswerStreamEnd(e,r){return this.logCustomEvent(y.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},U(r,!1)),e):e)}logCustomEvent(e,r){return v(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(a)),{eventType:kl[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logSearchEvent(e,r){return v(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,r))})}logClickEvent(e,r,a,n){return v(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(o)})}logShowMoreFoldedResults(e,r,a){return v(this,void 0,void 0,function*(){return this.logClickEvent(y.showMoreFoldedResults,e,r,a?U(a,!1):void 0)})}logShowLessFoldedResults(e){return v(this,void 0,void 0,function*(){return this.logCustomEvent(y.showLessFoldedResults,e?U(e,!1):void 0)})}getBaseCustomEventRequest(e){return v(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,r){var a,n;return v(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return v(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,r;return{originContext:(r=(e=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof _e?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};var ct=t=>new _e(t).getCurrentVisitorId(),Tl=t=>{let e=new _e(t);e.clear(),e.deleteHttpOnlyVisitorId()},Ot=new xg.HistoryStore,qt=(t,e)=>typeof e=="function"?(...r)=>{let a=co(r[0]);try{return e.apply(e,r)}catch(n){return t.error(n,"Error in analytics preprocessRequest. Returning original request."),a}}:void 0,Tt=(t,e)=>(...r)=>{let a=co(r[1]);try{return e.apply(e,r)}catch(n){return t.error(n,"Error in analytics hook. Returning original request."),a}};function sa(t,e){let r={};t.forEach(o=>r[o.facetId]=o);let a=[];e.forEach(o=>{o in r&&(a.push(r[o]),delete r[o])});let n=Object.values(r);return[...a,...n]}var E=new w({required:!0,emptyAllowed:!1}),Se=new w({required:!1,emptyAllowed:!1}),me=new w({required:!0,emptyAllowed:!0}),nr=({message:t,name:e,stack:r})=>({message:t,name:e,stack:r}),rt=(t,e)=>{if("required"in e)return{payload:new B({value:e}).validate({value:t}).value};let n=new I({options:{required:!0},values:e}).validate(t);if(n)throw new Ei(n);return{payload:t}},C=(t,e)=>{try{return rt(t,e)}catch(r){return{payload:t,error:nr(r)}}},$e=(t,e,r,a)=>{let n=`Check the initialState of ${a}`;return $g(t,e,r,n,"Controller initialization error")},be=(t,e,r,a)=>{let n=`Check the options of ${a}`;return $g(t,e,r,n,"Controller initialization error")},$g=(t,e,r,a,n)=>{try{return e.validate(r,a)}catch(o){throw t.logger.error(o,n),o}};function or(t){return Object.values(t).map(e=>e.request)}var St=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var We=()=>"default";var Ji=class{constructor(e){this.state=e()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||We()}},Hg=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new Ji(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Ol({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:qt(t,a),beforeSendHooks:[Tt(t,r),(d,m)=>(t.info({...m,type:d,endpoint:s,token:i},"Analytics request"),m)]},n);return c||l.disable(),l};var ca=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var Mo="2.42.0";var DR=t=>{let e=t.configuration.search.locale.split("-")[0];return!e||e.length!==2?"en":e},ir=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return DR(this.state)}getBaseMetadata(){let{context:e}=this.state,r=(e==null?void 0:e.contextValues)||{},a={};for(let[n,o]of Object.entries(r)){let i=`context_${n}`;a[i]=o}return a.coveoHeadlessVersion=Mo,a}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||We()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var nn=class extends ir{constructor(){super(...arguments);this.initialState=ca()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},zg=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new nn(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new ia({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:qt(t,a),beforeSendHooks:[Tt(t,r),(d,m)=>(t.info({...m,type:d,endpoint:s,token:i},"Analytics request"),m)]},n);return c||l.disable(),l};var Gg=1,Wg=10,Xi=5,Yg=1,Zi=8;function ua(){return{desiredCount:Xi,numberOfValues:Zi,set:{}}}var Dt=(t,e)=>{let r=a=>a.facetId===e;if("productListing"in t&&t.productListing&&"facets"in t.productListing&&"results"in t.productListing.facets)return t.productListing.facets.results.find(r);if("search"in t&&t.search)return t.search.response.facets.find(r)},Dl=(t,e)=>{var r;return(r=t.facetSet[e])==null?void 0:r.request};function VR(t,e){return!!e&&e.facetId in t.facetSet}var Vl=(t,e)=>{let r=Dt(t,e);if(VR(t,r))return r};var Vt=t=>"productListing"in t?t.productListing.isLoading:t.search.isLoading;function Kg(t){if(!t)return{parents:[],values:[]};let e=[],r=t;for(;r.length&&r[0].children.length;)e=[...e,...r],r=r[0].children;let a=r.find(n=>n.state==="selected");return a&&(e=[...e,a],r=[]),{parents:e,values:r}}function yt(t){let{activeValue:e,ancestryMap:r}=LR(t);return e?MR(e,r):[]}function LR(t){let e=[...t],r=new Map;for(;e.length>0;){let a=e.shift();if(a.state==="selected")return{activeValue:a,ancestryMap:r};if(r)for(let n of a.children)r.set(n,a);e.unshift(...a.children)}return{}}function MR(t,e){let r=[];if(!t)return[];let a=t;do r.unshift(a),a=e.get(a);while(a);return r}function NR(t,e){return!!e&&e.facetId in t.categoryFacetSet}var Jg=(t,e)=>{let r=Dt(t,e);if(NR(t,r))return r},Ll=(t,e)=>{var r;return(r=t.categoryFacetSet[e])==null?void 0:r.request};var Ml=(t,e)=>{var a;let r=Ll(t,e);return yt((a=r==null?void 0:r.currentValues)!=null?a:[])};function sr(){return{}}function Xg(t){return{request:t}}function cr(){return{}}function Zg(t){return{request:t}}function ur(){return{}}function eh(t){return{request:t,hasBreadcrumbs:!0}}function lr(){return{}}var Ct=(t,e)=>{let r=nh(e,t),a=r?r.field:"",n=Nl(a,t);return{facetId:t,facetField:a,facetTitle:n}};function Nr(t,e){let{facetId:r,facetValue:a}=t,n=Ct(r,e),o=oh(e,r);return{...n,facetValue:o==="hierarchical"?ah(e,r):a}}function Ee(t){var e,r,a,n,o;return{facetSet:(e=t.facetSet)!=null?e:lr(),categoryFacetSet:(r=t.categoryFacetSet)!=null?r:sr(),dateFacetSet:(a=t.dateFacetSet)!=null?a:cr(),numericFacetSet:(n=t.numericFacetSet)!=null?n:ur(),automaticFacetSet:(o=t.automaticFacetSet)!=null?o:ua()}}var es=t=>{let e=[];return jR(t).forEach((r,a)=>{let n=oh(t,r.facetId),o=zR(r,a+1);if(BR(r)){if(!!!Ml(t,r.facetId).length)return;e.push({...o,...$R(t,r.facetId),facetType:n,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let u=th(i,s+1,n),c=QR(r)?rh(i):_R(i);e.push({...o,...u,...c})})}),UR(t).forEach((r,a)=>{let n=HR(r,a+1);r.values.forEach((o,i)=>{if(o.state==="idle")return;let s=th(o,i+1,"specific"),u=rh(o);e.push({...n,...s,...u})})}),e},QR=t=>t.type==="specific",BR=t=>t.type==="hierarchical",jR=t=>[...Object.values(t.facetSet),...Object.values(t.categoryFacetSet),...Object.values(t.dateFacetSet),...Object.values(t.numericFacetSet)].map(e=>e.request),UR=t=>[...Object.values(t.automaticFacetSet.set)].map(e=>e.response),th=(t,e,r)=>({state:t.state,valuePosition:e,facetType:r}),_R=t=>({displayValue:`${t.start}..${t.end}`,value:`${t.start}..${t.end}`,start:t.start,end:t.end,endInclusive:t.endInclusive}),rh=t=>({displayValue:t.value,value:t.value}),ah=(t,e)=>Ml(t,e).map(a=>a.value).join(";"),$R=(t,e)=>{let r=1,a=ah(t,e);return{value:a,valuePosition:r,displayValue:a}},HR=(t,e)=>({title:Nl(t.field,t.field),field:t.field,id:t.field,facetPosition:e}),zR=(t,e)=>({title:Nl(t.field,t.facetId),field:t.field,id:t.facetId,facetPosition:e}),Nl=(t,e)=>`${t}_${e}`,nh=(t,e)=>{var r,a,n,o,i;return((r=t.facetSet[e])==null?void 0:r.request)||((a=t.categoryFacetSet[e])==null?void 0:a.request)||((n=t.dateFacetSet[e])==null?void 0:n.request)||((o=t.numericFacetSet[e])==null?void 0:o.request)||((i=t.automaticFacetSet.set[e])==null?void 0:i.response)},oh=(t,e)=>{let r=nh(t,e);return r?r.type:"specific"};var Oe=()=>({q:"",enableQuerySyntax:!1});var ts=class extends ir{getSearchUID(){var r,a;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((a=e.search)==null?void 0:a.response.searchUid)||De().response.searchUid}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return es(Ee(this.state))}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||Oe().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||De().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.search)==null?void 0:e.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.results.length)||De().response.results.length}},ih=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new ts(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new ql({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:qt(t,a),beforeSendHooks:[Tt(t,r),(d,m)=>(t.info({...m,type:d,endpoint:s,token:i},"Analytics request"),m)]},n);return c||l.disable(),l};var la=class extends ir{constructor(){super(...arguments);this.initialState=ca()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},sh=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new la(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new ia({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:qt(t,a),beforeSendHooks:[Tt(t,r),(d,m)=>(t.info({...m,type:d,endpoint:s,token:i},"Analytics request"),m)]},n);return c||l.disable(),l};async function GR({config:t,environment:e,event:r,listenerManager:a}){let{url:n,token:o,mode:i}=t;i!=="disabled"&&(a.call(r),e.send(n,o,r))}var WR=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function YR(t){return typeof t=="string"&&WR.test(t)}function KR(t){let e="visitorId";return{getClientId:()=>{let r=t.get(),a=r.storage,n=a.getItem(e),o=n&&YR(n)?n:r.generateUUID();return a.setItem(e,o),o},clear:()=>{t.get().storage.removeItem(e)}}}var ch="0.6.8";function JR(t){let{trackingId:e}=t;return{trackingId:e}}function XR(){return`relay@${ch}`}function uh(t,e,r,a){let{getReferrer:n,getLocation:o,getUserAgent:i}=r,s=JR(e),u=a.getClientId();return Object.freeze({type:t,config:s,ts:Date.now(),source:XR(),clientId:u,userAgent:i(),referrer:n(),location:o()})}function ZR(t,e,r,a,n){return{...e,meta:uh(t,r,a,n)}}var eb="*";function tb(){let t=[];function e({type:u,callback:c}){return t.findIndex(l=>l.type===u&&l.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function a(u){return e(u)<0&&t.push(u),()=>s(u.type,u.callback)}function n(u){t.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u)}catch(l){console.error(l)}})}function o(u){if(u===eb)t.length=0;else for(let c=t.length-1;c>=0;c--)t[c].type===u&&t.splice(c,1)}function i(u){let c=e(u);c>=0&&t.splice(c,1)}function s(u,c){c?i({type:u,callback:c}):o(u)}return{add:a,call:n,remove:s}}function lh({url:t,token:e,trackingId:r,...a}){return Object.freeze({url:t,token:e,trackingId:r,...!!a.mode&&{mode:a.mode}})}function rb(t){let e=lh(t);return{get:()=>e,update:r=>{e=lh({...e,...r})}}}function ab(){let t=typeof window!="undefined";return{sendMessage(e){t&&window.postMessage(e,"*")}}}var Ql=nb();function nb(){let t="coveo_",e=r=>{let a=r.split(".").slice(-2);return a.length==2?a.join("."):""};return{getItem(r){let a=`${t}${r}=`,n=document.cookie.split(";");for(let o of n){let i=o.replace(/^\s+/,"");if(i.lastIndexOf(a,0)===0)return i.substring(a.length,i.length)}return null},setItem(r,a,n){let o=e(window.location.hostname),i=`;expires=${new Date(new Date().getTime()+n).toUTCString()}`,s=o?`;domain=${o}`:"";document.cookie=`${t}${r}=${a}${i}${s};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function ob(){return{getItem(t){return Ql.getItem(t)||localStorage.getItem(t)},removeItem(t){Ql.removeItem(t),localStorage.removeItem(t)},setItem(t,e){let r=31556952e3;localStorage.setItem(t,e),Ql.setItem(t,e,r)}}}async function Bl(t,e){return fetch(t,e).catch(r=>{throw new Error(`${r.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:r})})}function ib(){let t=document.referrer;return t===""?null:t}function sb(){return{runtime:"browser",fetch:(t,e)=>Bl(t,e),send:async(t,e,r)=>{let a=navigator.sendBeacon(`${t}?access_token=${e}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(ab().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:t,token:e}),!a)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>ib(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:ob()}}function dh(){return{getItem(){return null},removeItem(){},setItem(){}}}function cb(){return{runtime:"node",fetch:(t,e)=>Bl(t,e),send:async(t,e,r)=>{let a={"Content-Type":"application/json",Authorization:`Bearer ${e}`};Bl(t,{method:"POST",body:JSON.stringify([r]),headers:a})},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:dh()}}function ub(){return lb()?sb():cb()}function lb(){try{return typeof window=="object"}catch{return!1}}function db(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:dh()}}function pb(t){return t.get().mode=="disabled"?db():ub()}function fb(t){return{get:()=>Object.freeze(pb(t))}}function ph(t){let e=rb(t),r=tb(),a=fb(e),n=KR(a);return{emit:(o,i)=>{let s=e.get(),u=a.get(),c=ZR(o,i,s,u,n);return GR({config:s,environment:u,event:c,listenerManager:r})},getMeta:o=>uh(o,e.get(),a.get(),n),on:(o,i)=>r.add({type:o,callback:i}),off:(o,i)=>r.remove(o,i),updateConfig:o=>e.update(o),version:ch,clearStorage:()=>{n.clear()}}}var rs=(r=>(r.Ascending="ascending",r.Descending="descending",r))(rs||{}),on=(o=>(o.Relevancy="relevancy",o.QRE="qre",o.Date="date",o.Field="field",o.NoSort="nosort",o))(on||{}),Qr=t=>{if(po(t))return t.map(e=>Qr(e)).join(",");switch(t.by){case"relevancy":case"qre":case"nosort":return t.by;case"date":return`date ${t.order}`;case"field":return`@${t.field} ${t.order}`;default:return""}},as=()=>({by:"relevancy"});var mb=new I({values:{by:new Ze({enum:on,required:!0}),order:new Ze({enum:rs}),field:new w}});function ut(){return Qr(as())}var ns=class extends ir{constructor(){super(...arguments);this.getFacetRequest=e=>{var r,a,n,o,i,s,u,c,l,d;return((a=(r=this.state.facetSet)==null?void 0:r[e])==null?void 0:a.request)||((o=(n=this.state.categoryFacetSet)==null?void 0:n[e])==null?void 0:o.request)||((s=(i=this.state.dateFacetSet)==null?void 0:i[e])==null?void 0:s.request)||((c=(u=this.state.numericFacetSet)==null?void 0:u[e])==null?void 0:c.request)||((d=(l=this.state.automaticFacetSet)==null?void 0:l.set[e])==null?void 0:d.response)}}getFacetState(){return es(Ee(this.getState()))}getPipeline(){var e;return this.state.pipeline||((e=this.state.search)==null?void 0:e.response.pipeline)||ns.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,a;let e=this.getState();return((r=e.search)==null?void 0:r.searchResponseId)||((a=e.search)==null?void 0:a.response.searchUid)||De().response.searchUid}getSplitTestRunName(){var e;return(e=this.state.search)==null?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var a;let e=!!this.getSplitTestRunName(),r=((a=this.state.search)==null?void 0:a.response.pipeline)||this.state.pipeline||ns.fallbackPipelineName;return e?r:void 0}getBaseMetadata(){var n,o,i;let e=this.getState(),r=super.getBaseMetadata(),a=(i=(o=(n=e.search)==null?void 0:n.response)==null?void 0:o.extendedResults)==null?void 0:i.generativeQuestionAnsweringId;return a&&(r.generativeQuestionAnsweringId=a),r}getFacetMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,facetValue:r,facetTitle:`${n}_${e}`}}getFacetClearAllMetadata(e){var n;let r=this.getFacetRequest(e),a=(n=r==null?void 0:r.field)!=null?n:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,facetTitle:`${a}_${e}`}}getFacetSortMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,criteria:r,facetTitle:`${n}_${e}`}}getRangeFacetBreadcrumbMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${n}_${e}`}}getResultSortMetadata(){var e;return{...this.getBaseMetadata(),resultsSortBy:(e=this.state.sortCriteria)!=null?e:ut()}}getStaticFilterToggleMetadata(e,r){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:r}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryFacetBreadcrumbMetadata(e,r){var o;let a=this.getFacetRequest(e),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:n,categoryFacetPath:r,categoryFacetTitle:`${n}_${e}`}}getOmniboxAnalyticsMetadata(e,r){let a=this.state.querySuggest&&this.state.querySuggest[e],n=a.completions.map(u=>u.expression),o=a.partialQueries.length-1,i=a.partialQueries[o]||"",s=a.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(r),partialQuery:i,partialQueries:a.partialQueries.length>0?a.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:s}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){var a;let e=this.getState(),r={};return((a=e.generatedAnswer)==null?void 0:a.isVisible)!==void 0&&(r.showGeneratedAnswer=e.generatedAnswer.isVisible),r}get resultURIs(){var e;return(e=this.results)==null?void 0:e.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var e;return(e=this.state.search)==null?void 0:e.response.results}get queryText(){var e;return((e=this.state.query)==null?void 0:e.q)||Oe().q}get responseTime(){var e;return((e=this.state.search)==null?void 0:e.duration)||De().duration}get numberOfResults(){var e;return((e=this.state.search)==null?void 0:e.response.totalCountFiltered)||De().response.totalCountFiltered}},pe=ns;pe.fallbackPipelineName="default";var fh=t=>{let e=t.configuration.accessToken,r=t.configuration.analytics.trackingId,{emit:a}=ph({url:t.configuration.analytics.nextApiBaseUrl,token:e,trackingId:r});return a},mh=({logger:t,getState:e,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new pe(e)})=>{let o=e(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new ia({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:qt(t,a),beforeSendHooks:[Tt(t,r),(d,m)=>(t.info({...m,type:d,endpoint:s,token:i},"Analytics request"),m)]},n);return c||l.disable(),l},jl=()=>{let e=Ot.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return e?e.value:""};function Ul(t){let e=gh(t),r=[t,...e].filter(n=>n.parentResult).map(n=>n.parentResult);return qf([t,...e,...r],n=>n.uniqueId)}function gh(t){return t.childResults?t.childResults.flatMap(e=>[e,...gh(e)]):[]}var Br=()=>"";function sn(t,e){return{...new pe(e).getBaseMetadata(),actionCause:t,type:t}}function gb(t){return Object.assign(t,{instantlyCallable:!0})}function hb(t,e){let r=o=>gb(ee(t,o)),a=r(async(o,{getState:i,extra:s})=>{let{analyticsClientMiddleware:u,preprocessRequest:c,logger:l}=s;return await(await e({getState:i,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})).log({state:i(),extra:s})});return Object.assign(a,{prepare:async({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:u})=>{let{description:c,log:l}=await e({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:u});return{description:c,action:r(async(d,{getState:m,extra:p})=>await l({state:m(),extra:p}))}}}),a}var No=(t,e,r)=>{function a(...n){let o=n.length===1?{...n[0],__legacy__getBuilder:e(n[0].__legacy__getBuilder),analyticsConfigurator:t,providerClass:r}:{prefix:n[0],__legacy__getBuilder:e(n[1]),__legacy__provider:n[2],analyticsConfigurator:t,providerClass:r};return Cb(o)}return a},Sb=t=>t.configuration.analytics.analyticsMode==="legacy",yb=t=>t.configuration.analytics.analyticsMode==="next",Cb=({prefix:t,__legacy__getBuilder:e,__legacy__provider:r,analyticsPayloadBuilder:a,analyticsType:n,analyticsConfigurator:o,providerClass:i})=>(r!=null||(r=s=>new i(s)),hb(t,async({getState:s,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})=>{let d=[],m={log:async({state:R})=>{for(let F of d)await F(R)}},p=s(),f=o({getState:s,logger:l,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(s)}),g=await e(f,s());m.description=g==null?void 0:g.description,d.push(async R=>{Sb(R)&&await xb(g,r,R,l,f.coveoAnalyticsClient)});let x=fh(p);return d.push(async R=>{if(yb(R)&&n&&a){let F=a(R);await bb(x,n,F)}}),m}));async function xb(t,e,r,a,n){e(()=>r);let o=await(t==null?void 0:t.log({searchUID:e(()=>r).getSearchUID()}));a.info({client:n,response:o},"Analytics response")}var hh=t=>(e,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async a=>{t(e,r)}}),V=No(mh,t=>t,pe),IT=No(Hg,hh,Ji),kT=No(ih,hh,ts),Sh=No(zg,t=>t,nn),Lt=No(sh,t=>t,la);var yh={urihash:new w,sourcetype:new w,permanentid:new w},jr={uniqueId:E,raw:new I({values:yh}),title:E,uri:E,clickUri:E,rankingModifier:new w({required:!1,emptyAllowed:!0})},vb={permanentid:E,documentUri:E,clickUri:E};function Fb(t){return Object.assign({},...Object.keys(yh).map(e=>({[e]:t[e]})))}function Rb(t){return Object.assign({},...Object.keys(jr).map(e=>({[e]:t[e]})),{raw:Fb(t.raw)})}var Ur=t=>new B(jr).validate(Rb(t));var Ch=t=>new B(vb).validate(t);async function bb(t,e,r){await t(e,r)}var _l=()=>V("search/logFetchMoreResults",t=>t.makeFetchMoreResults()),lt=t=>V("search/queryError",(e,r)=>{var a,n,o,i;return e.makeQueryError({query:((a=r.query)==null?void 0:a.q)||Oe().q,aq:((n=r.advancedSearchQueries)==null?void 0:n.aq)||St().aq,cq:((o=r.advancedSearchQueries)==null?void 0:o.cq)||St().cq,dq:((i=r.advancedSearchQueries)==null?void 0:i.dq)||St().dq,errorType:t.type,errorMessage:t.message})});var Ue=(r=>(r.Relevance="relevance",r.Fields="fields",r))(Ue||{}),da=(r=>(r.Ascending="asc",r.Descending="desc",r))(da||{}),pa=()=>({by:"relevance"}),$l=t=>({by:"fields",fields:t}),xh=new I({options:{required:!1},values:{by:new Ze({enum:Ue,required:!0}),fields:new z({each:new I({values:{name:new w,direction:new Ze({enum:da})}})})}});var vh=()=>Lt("analytics/productListing/load",t=>t.makeInterfaceLoad(),t=>new la(t)),os=t=>V("analytics/productListing/open",(e,r)=>(Eb(t),e.makeDocumentOpen(Ib(t,r),Ab(t))),e=>new la(e)),Ab=t=>(t.permanentid||console.warn("Missing field permanentid on productRecommendation. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",t),{contentIDKey:"permanentid",contentIDValue:t.permanentid});function Pb(t){return{uniqueId:t.permanentid,title:t.ec_name||"",uri:t.documentUri,clickUri:t.clickUri}}function wb(t){let e=Pb(t);return Object.assign({},...Object.keys(jr).map(r=>({[r]:e[r]})))}var Eb=t=>new B(jr).validate(wb(t)),Ib=(t,e)=>{var a;let r=((a=e.productListing)==null?void 0:a.products.findIndex(({permanentid:n})=>t.permanentid===n))||0;return kb(t,r)};function kb(t,e){return{collectionName:"",documentAuthor:"",documentPosition:e+1,documentTitle:t.ec_name||"",documentUri:t.documentUri,documentUriHash:t.documentUriHash,documentUrl:t.clickUri,rankingModifier:"",sourceName:"unknown",queryPipeline:""}}var fa=S("productlisting/setUrl",t=>C(t,{url:new w({required:!0,url:!0})})),Qo=S("productlisting/setAdditionalFields",t=>C(t,{additionalFields:new z({required:!0,each:new w({required:!0,emptyAllowed:!1})})})),X=ee("productlisting/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:n})=>{let o=e(),{apiClient:i}=n,s=await i.getProducts(await Ob(o));return Fe(s)?(r(lt(s.error)),a(s.error)):{response:s.success,analyticsAction:vh()}}),Ob=async t=>{var a,n,o;let e=Tb(t),r=await ct(t.configuration.analytics);return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,platformUrl:t.configuration.platformUrl,url:(a=t.productListing)==null?void 0:a.url,...t.configuration.analytics.enabled&&r?{clientId:r}:{},...((n=t.productListing.additionalFields)==null?void 0:n.length)?{additionalFields:t.productListing.additionalFields}:{},...t.productListing.advancedParameters&&qb(t.productListing.advancedParameters)?{advancedParameters:t.productListing.advancedParameters||{}}:{},...e.length&&{facets:{requests:e}},...t.pagination&&{pagination:{numberOfValues:t.pagination.numberOfResults,page:Math.ceil(t.pagination.firstResult/(t.pagination.numberOfResults||1))+1}},...(((o=t.sort)==null?void 0:o.by)||Ue.Relevance)!==Ue.Relevance&&{sort:t.sort},...t.context&&{userContext:t.context.contextValues}}};function qb(t){return t.debug}function Tb(t){var e;return sa(Db(t),(e=t.facetOrder)!=null?e:[])}function Db(t){var e,r,a,n;return[...or((e=t.facetSet)!=null?e:{}),...or((r=t.numericFacetSet)!=null?r:{}),...or((a=t.dateFacetSet)!=null?a:{}),...or((n=t.categoryFacetSet)!=null?n:{})]}var Mt=k(ca(),t=>{t.addCase(fa,(e,r)=>{e.url=r.payload.url}).addCase(Qo,(e,r)=>{e.additionalFields=r.payload.additionalFields}).addCase(X.rejected,(e,r)=>{e.error=r.payload?r.payload:null,e.isLoading=!1}).addCase(X.fulfilled,(e,r)=>{e.error=null,e.facets=r.payload.response.facets,e.products=r.payload.response.products,e.responseId=r.payload.response.responseId,e.isLoading=!1}).addCase(X.pending,e=>{e.isLoading=!0})});var Hl=()=>Se,Fh=()=>E,dr=S("configuration/updateBasicConfiguration",t=>C(t,{accessToken:Se,organizationId:Se,platformUrl:Se})),pr=S("configuration/updateSearchConfiguration",t=>C(t,{apiBaseUrl:Se,pipeline:new w({required:!1,emptyAllowed:!0}),searchHub:Se,timezone:Se,locale:Se,authenticationProviders:new z({required:!1,each:E})})),ma=S("configuration/updateAnalyticsConfiguration",t=>(Pi()&&(t.enabled=!1),C(t,{enabled:new H({default:!0}),originContext:Hl(),originLevel2:Hl(),originLevel3:Hl(),apiBaseUrl:Se,nextApiBaseUrl:Se,runtimeEnvironment:new ue,anonymous:new H({default:!1}),deviceId:Se,userDisplayName:Se,documentLocation:Se,trackingId:Se,analyticsMode:new w({constrainTo:["legacy","next"],required:!1,default:"legacy"})}))),cn=S("configuration/analytics/disable"),un=S("configuration/analytics/enable"),is=S("configuration/analytics/originlevel2",t=>C(t,{originLevel2:Fh()})),ss=S("configuration/analytics/originlevel3",t=>C(t,{originLevel3:Fh()}));var Rh=k(Mo,t=>t);var zl=t=>e=>r=>{var o,i;let a=(o=r.payload)==null?void 0:o.analyticsAction;a!==void 0&&((i=r.payload)==null||delete i.analyticsAction);let n=e(r);return r.type==="search/executeSearch/fullfilled"&&a===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with product recommendation:",r),a!==void 0&&t.dispatch(a),n};var kh=Pe(Ah());var cs={q:new w,enableQuerySyntax:new H,aq:new w,cq:new w,firstResult:new q({min:0}),numberOfResults:new q({min:0}),sortCriteria:new w,f:new I,fExcluded:new I,cf:new I,nf:new I,df:new I,debug:new H,sf:new I,tab:new w,af:new I};var le=S("searchParameters/restore",t=>C(t,cs));var us=S("tab/register",t=>{let e=new I({values:{id:E,expression:me}});return C(t,e)}),_r=S("tab/updateActiveTab",t=>C(t,E));var ds=Pe(ls()),Eh=Pe(Ph()),Ih=Pe(wh());ds.default.extend(Ih.default);ds.default.extend(Eh.default);var Zl="/rest/search/v2",ed="/rest/ua",xt=()=>({organizationId:"",accessToken:"",platformUrl:wi(),search:{apiBaseUrl:`${wi()}${Zl}`,locale:"en-US",timezone:ds.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Mu()}${ed}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}});function Lb(t,e){if(Gf(t))return t.replace(/^(https:\/\/)platform/,"$1analytics")+ed;let a=Wf(t,e);return a?uo(e,a.environment).analytics:t}var td=k(xt(),t=>t.addCase(dr,(e,r)=>{r.payload.accessToken&&(e.accessToken=r.payload.accessToken),r.payload.organizationId&&(e.organizationId=r.payload.organizationId),r.payload.platformUrl&&(e.platformUrl=r.payload.platformUrl,e.search.apiBaseUrl=`${r.payload.platformUrl}${Zl}`,e.analytics.apiBaseUrl=Lb(r.payload.platformUrl,e.organizationId))}).addCase(pr,(e,r)=>{r.payload.apiBaseUrl&&(e.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(e.search.locale=r.payload.locale),r.payload.timezone&&(e.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(e.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(ma,(e,r)=>{ie(r.payload.enabled)||(!r.payload.enabled&&e.analytics.enabled&&Tl(e.analytics),e.analytics.enabled=r.payload.enabled),ie(r.payload.originContext)||(e.analytics.originContext=r.payload.originContext),ie(r.payload.originLevel2)||(e.analytics.originLevel2=r.payload.originLevel2),ie(r.payload.originLevel3)||(e.analytics.originLevel3=r.payload.originLevel3),ie(r.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=r.payload.apiBaseUrl),ie(r.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),ie(r.payload.trackingId)||(e.analytics.trackingId=r.payload.trackingId),ie(r.payload.analyticsMode)||(e.analytics.analyticsMode=r.payload.analyticsMode);let a=(0,kh.default)();a&&(e.analytics.analyticsMode="next",e.analytics.trackingId=a),ie(r.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),ie(r.payload.anonymous)||(e.analytics.anonymous=r.payload.anonymous),ie(r.payload.deviceId)||(e.analytics.deviceId=r.payload.deviceId),ie(r.payload.userDisplayName)||(e.analytics.userDisplayName=r.payload.userDisplayName),ie(r.payload.documentLocation)||(e.analytics.documentLocation=r.payload.documentLocation)}).addCase(cn,e=>{e.analytics.enabled=!1,Tl(e.analytics)}).addCase(un,e=>{e.analytics.enabled=!0}).addCase(is,(e,r)=>{e.analytics.originLevel2=r.payload.originLevel2}).addCase(ss,(e,r)=>{e.analytics.originLevel3=r.payload.originLevel3}).addCase(_r,(e,r)=>{e.analytics.originLevel2=r.payload}).addCase(le,(e,r)=>{e.analytics.originLevel2=r.payload.tab||e.analytics.originLevel2}));var G=td;function Mb(t){return t.instantlyCallable}var rd=()=>t=>e=>t(Mb(e)?e():e);var ad=t=>()=>e=>r=>{var n;if(!r.error)return e(r);let a=r.error;if(((n=r.payload)==null?void 0:n.ignored)||t.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return e(r)},nd=t=>e=>r=>a=>(t.debug({action:a,nextState:e.getState()},`Action dispatched: ${a.type}`),r(a));function Oh(t,e){let r={...t},a,n=o=>(i,s)=>{let u=o(i,s);return a?a(u,s):u};return{get combinedReducer(){let o=Tf(Object.entries(e).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return n((0,h.combineReducers)({...o,...r}))},containsAll(o){return Object.keys(o).every(s=>s in r)},add(o){Object.keys(o).filter(i=>!(i in r)).forEach(i=>r[i]=o[i])},addCrossReducer(o){a=o}}}function ps(t,e,r){var a,n,o;e===void 0&&(e=50),r===void 0&&(r={});var i=(a=r.isImmediate)!=null&&a,s=(n=r.callback)!=null&&n,u=r.maxWait,c=Date.now(),l=[];function d(){if(u!==void 0){var p=Date.now()-c;if(p+e>=u)return u-p}return e}var m=function(){var p=[].slice.call(arguments),f=this;return new Promise(function(g,x){var R=i&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,c=Date.now(),!i){var A=t.apply(f,p);s&&s(A),l.forEach(function(P){return(0,P.resolve)(A)}),l=[]}},d()),R){var F=t.apply(f,p);return s&&s(F),g(F)}l.push({resolve:g,reject:x})})};return m.cancel=function(p){o!==void 0&&clearTimeout(o),l.forEach(function(f){return(0,f.reject)(p)}),l=[]},m}function qh(t,e){let r=0,a=ps(()=>r=0,500);return n=>o=>async i=>{if(!(typeof i=="function"))return o(i);let u=await o(i);if(!Nb(u))return u;if(typeof e!="function")return t.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return t.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,a();let c=await Qb(e);n.dispatch(dr({accessToken:c})),n.dispatch(i)}}function Nb(t){var e;return((e=t==null?void 0:t.error)==null?void 0:e.name)===new so().name}async function Qb(t){try{return await t()}catch(e){return""}}function Th({reducer:t,preloadedState:e,middlewares:r=[],thunkExtraArguments:a,name:n}){return pl({reducer:t,preloadedState:e,devTools:{stateSanitizer:o=>o.history?{...o,history:"<<OMIT>>"}:o,name:n,shouldHotReload:!1},middleware:o=>[...r,...o({thunk:{extraArgument:a}}),nd(a.logger)]})}var Bb={configuration:G,version:Rh};function jb(t,e){var i,s;let r=((i=t.configuration.organizationEndpoints)==null?void 0:i.analytics)||void 0,{analyticsClientMiddleware:a,...n}=(s=t.configuration.analytics)!=null?s:{},o={...n,nextApiBaseUrl:`${r}/rest/organizations/${t.configuration.organizationId}/events/v1`,apiBaseUrl:r};return Pi()?(e.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function od(t,e){var u;let r=Ub(t,e),{accessToken:a,organizationId:n}=t.configuration,{organizationEndpoints:o}=t.configuration,i=(o==null?void 0:o.platform)||t.configuration.platformUrl;zb(t)&&r.logger.warn(`The \`platformUrl\` (${t.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Hb(t)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):Gb(t)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${t.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(u=t.configuration.organizationEndpoints)==null?void 0:u.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(dr({accessToken:a,organizationId:n,platformUrl:i}));let s=jb(t,r.logger);return s&&r.dispatch(ma(s)),r}function Ub(t,e){var i;let{reducers:r}=t,a=Oh({...Bb,...r},(i=t.preloadedState)!=null?i:{});t.crossReducer&&a.addCrossReducer(t.crossReducer);let n=e.logger,o=_b(t,e,a);return{addReducers(s){a.containsAll(s)||(a.add(s),o.replaceReducer(a.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(un())},disableAnalytics(){o.dispatch(cn())},get state(){return o.getState()},logger:n,store:o}}function _b(t,e,r){let{preloadedState:a,configuration:n}=t,o=n.name||"coveo-headless",i=$b(t,e.logger);return Th({preloadedState:a,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:e,name:o})}function $b(t,e){let{renewAccessToken:r}=t.configuration,a=qh(e,r);return[rd,a,ad(e),zl].concat(t.middlewares||[])}function Hb(t){return we(t.configuration.organizationEndpoints)}function zb(t){var e;return!ie(t.configuration.platformUrl)||ie((e=t.configuration.organizationEndpoints)==null?void 0:e.platform)}function Gb(t){let{platform:e}=t.configuration.organizationEndpoints;if(we(e))return!1;let r=ju(e);return r&&r.organizationId!==t.configuration.organizationId}var jh=Pe(Uo());function ld(t){return(0,jh.default)({name:"@coveo/headless",level:(t==null?void 0:t.level)||"warn",formatters:{log:t==null?void 0:t.logFormatter}})}function dd(t,e){let r=dA(t),a=rt,n=pA(t);return{analyticsClientMiddleware:r,validatePayload:a,preprocessRequest:n,logger:e}}function dA(t){let{analytics:e}=t,r=(a,n)=>n;return(e==null?void 0:e.analyticsClientMiddleware)||r}function pA(t){return t.preprocessRequest||Or}var Ss={organizationId:E,accessToken:E,platformUrl:new w({required:!1,emptyAllowed:!1}),name:new w({required:!1,emptyAllowed:!1}),analytics:new I({options:{required:!1},values:{enabled:new H({required:!1}),originContext:new w({required:!1}),originLevel2:new w({required:!1}),originLevel3:new w({required:!1}),analyticsMode:new w({constrainTo:["legacy","next"],required:!1})}})};function pd(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:uo("searchuisamples")}}var Uh=new B({...Ss});function fd(){return{...pd()}}var fA={productListing:Mt};function _h(t){let e=ld(t.loggerOptions);mA(t.configuration,e);let r=hA(t.configuration,e,gA(t.configuration,e)),a={...dd(t.configuration,e),apiClient:r},n={...t,reducers:fA},o=od(n,a);return{...o,get state(){return o.state}}}function mA(t,e){try{Uh.validate(t)}catch(r){throw e.error("Product Listing engine configuration error",r),r}}function gA(t,e){let{search:r}=t;return new fo({logger:e,preprocessRequest:t.preprocessRequest||Or,postprocessSearchResponseMiddleware:(r==null?void 0:r.preprocessSearchResponseMiddleware)||Oi,postprocessFacetSearchResponseMiddleware:(r==null?void 0:r.preprocessFacetSearchResponseMiddleware)||qi,postprocessQuerySuggestResponseMiddleware:(r==null?void 0:r.preprocessQuerySuggestResponseMiddleware)||Ti})}function hA(t,e,r){return new Nu({logger:e,preprocessRequest:t.preprocessRequest||Or},r)}function SA(t){return t.addReducers({}),{logProductRecommendationOpen:os}}var _=E;var ln=t=>Lt("analytics/facet/showMore",(e,r)=>{C(t,_);let a=Ct(t,Ee(r));return e.makeFacetShowMore(a)}),dn=t=>Lt("analytics/facet/showLess",(e,r)=>{C(t,_);let a=Ct(t,Ee(r));return e.makeFacetShowLess(a)}),Nt=t=>Lt("analytics/facet/sortChange",(e,r)=>{C(t,{facetId:_,criterion:new ue({required:!0})});let{facetId:a,criterion:n}=t,o=Ee(r),s={...Ct(a,o),criteria:n};return e.makeFacetUpdateSort(s)}),Ye=t=>Lt("analytics/facet/reset",(e,r)=>{C(t,_);let a=Ee(r),n=Ct(t,a);return e.makeFacetClearAll(n)}),Ke=t=>Lt("analytics/facet/select",(e,r)=>{C(t,{facetId:_,facetValue:E});let a=Ee(r),n=Nr(t,a);return e.makeFacetSelect(n)}),ys=t=>Lt("analytics/facet/exclude",(e,r)=>{C(t,{facetId:_,facetValue:E});let a=Ee(r),n=Nr(t,a);return e.makeFacetExclude(n)}),ha=t=>Lt("analytics/facet/deselect",(e,r)=>{C(t,{facetId:_,facetValue:E});let a=Ee(r),n=Nr(t,a);return e.makeFacetDeselect(n)});function yA(t){return t.addReducers({productListing:Mt}),{setProductListingUrl:fa,fetchProductListing:X}}function CA(t){return t.addReducers({}),{logFacetClearAll:Ye,logFacetDeselect:ha,logFacetSelect:Ke,logFacetShowLess:dn,logFacetShowMore:ln,logFacetUpdateSort:Nt}}function xA(t){return t.addReducers({configuration:G}),{disableAnalytics:cn,enableAnalytics:un,setOriginLevel2:is,setOriginLevel3:ss,updateAnalyticsConfiguration:ma,updateBasicConfiguration:dr}}var Ie=S("breadcrumb/deselectAll"),Sa=S("breadcrumb/deselectAllNonBreadcrumbs");var ya={value:E,numberOfResults:new q({min:0}),state:E};var vA=new q({min:Yg,default:Zi,required:!1}),FA=new q({min:Gg,max:Wg,default:Xi,required:!1}),RA={desiredCount:FA,numberOfValues:vA},md=S("automaticFacet/setOptions",t=>C(t,RA)),gd=S("automaticFacet/deselectAll",t=>C(t,_)),bA=E,pn=S("automaticFacet/toggleSelectValue",t=>C(t,{field:bA,selection:new I({values:ya})}));var AA={state:new ue({required:!0}),numberOfResults:new q({required:!0,min:0}),value:new w({required:!0,emptyAllowed:!0}),path:new z({required:!0,each:E}),moreValuesAvailable:new H({required:!1})};function hd(t){t.children.forEach(e=>{hd(e)}),rt({state:t.state,numberOfResults:t.numberOfResults,value:t.value,path:t.path,moreValuesAvailable:t.moreValuesAvailable},AA)}var fn={facetId:_,field:E,delimitingCharacter:new w({required:!1,emptyAllowed:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new ue({required:!1}),basePath:new z({required:!1,each:E}),filterByBasePath:new H({required:!1})},mr=S("categoryFacet/register",t=>C(t,fn)),$r=S("categoryFacet/toggleSelectValue",t=>{try{return rt(t.facetId,E),hd(t.selection),{payload:t,error:null}}catch(e){return{payload:t,error:nr(e)}}}),gr=S("categoryFacet/deselectAll",t=>C(t,fn.facetId)),Ca=S("categoryFacet/updateNumberOfValues",t=>C(t,{facetId:fn.facetId,numberOfValues:fn.numberOfValues})),mn=S("categoryFacet/updateSortCriterion",t=>C(t,{facetId:fn.facetId,criterion:new ue})),Cs=S("categoryFacet/updateBasePath",t=>C(t,{facetId:fn.facetId,basePath:new z({each:E})}));var _o={facetId:_,captions:new I({options:{required:!1}}),numberOfValues:new q({required:!1,min:1}),query:new w({required:!1,emptyAllowed:!0})};var PA={path:new z({required:!0,each:E}),displayValue:me,rawValue:me,count:new q({required:!0,min:0})},gn=S("categoryFacet/selectSearchResult",t=>C(t,{facetId:_,value:new I({values:PA})})),xa=S("categoryFacetSearch/register",t=>C(t,_o));var $h={facetId:_,value:new I({values:{displayValue:me,rawValue:me,count:new q({required:!0,min:0})}})},xs=S("facetSearch/register",t=>C(t,_o)),Hr=S("facetSearch/update",t=>C(t,_o)),va=S("facetSearch/toggleSelectValue",t=>C(t,$h)),$o=S("facetSearch/toggleExcludeValue",t=>C(t,$h));var vs=Pe(ls()),zh=Pe(Hh());vs.default.extend(zh.default);var Fs="YYYY/MM/DD@HH:mm:ss",wA="1401-01-01";function hn(t,e){let r=(0,vs.default)(t,e);return!r.isValid()&&!e?(0,vs.default)(t,Fs):r}function Rs(t){return t.format(Fs)}function Cd(t,e){let r=hn(t,e);if(!r.isValid()){let a=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${e}""`;throw new Error(`Could not parse the provided date "${t}"${e?n:a}`)}xd(r)}function xd(t){if(t.isBefore(wA))throw new Error(`Date is before year 1401, which is unsupported by the API: ${t}`)}var Ho=Pe(ls()),Wh=Pe(Gh());Ho.default.extend(Wh.default);var Yh=["past","now","next"],Kh=["minute","hour","day","week","month","quarter","year"],EA=t=>{let e=t==="now";return{amount:new q({required:!e,min:1}),unit:new w({required:!e,constrainTo:Kh}),period:new w({required:!0,constrainTo:Yh})}};function zo(t){if(typeof t=="string"&&!hr(t))throw new Error(`The value "${t}" is not respecting the relative date format "period-amount-unit"`);let e=typeof t=="string"?tS(t):t;new B(EA(e.period)).validate(e);let r=Xh(e),a=JSON.stringify(e);if(!r.isValid())throw new Error(`Date is invalid: ${a}`);xd(r)}function Jh(t){let{period:e,amount:r,unit:a}=t;switch(e){case"past":case"next":return`${e}-${r}-${a}`;case"now":return e}}function Xh(t){let{period:e,amount:r,unit:a}=t;switch(e){case"past":return(0,Ho.default)().subtract(r,a);case"next":return(0,Ho.default)().add(r,a);case"now":return(0,Ho.default)()}}function Go(t){return Rs(Xh(tS(t)))}function Zh(t){return t.toLocaleLowerCase().split("-")}function hr(t){let[e,r,a]=Zh(t);if(e==="now")return!0;if(!Yh.includes(e)||!Kh.includes(a))return!1;let n=parseInt(r);return!(isNaN(n)||n<=0)}function eS(t){return!!t&&typeof t=="object"&&"period"in t}function tS(t){let[e,r,a]=Zh(t);return e==="now"?{period:"now"}:{period:e,amount:r?parseInt(r):void 0,unit:a||void 0}}function Sr(t){var o,i;let e=rS(t.start,t),r=rS(t.end,t),a=(o=t.endInclusive)!=null?o:!1,n=(i=t.state)!=null?i:"idle";return{start:e,end:r,endInclusive:a,state:n}}function rS(t,e){let{dateFormat:r}=e;return eS(t)?(zo(t),Jh(t)):typeof t=="string"&&hr(t)?(zo(t),t):(Cd(t,r),Rs(hn(t,r)))}var Qt=new w({regex:/^[a-zA-Z0-9-_]+$/}),Bt=new w({required:!0}),aS=new z({each:new w}),nS=new w,oS=new H,jt=new H,Ut=new q({min:0}),vt=new q({min:1}),bs=new H({required:!0}),IA=new I,kA=new w,OA={captions:IA,numberOfValues:vt,query:kA},Sn=new I({values:OA}),As=new I({options:{required:!1},values:{type:new w({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new z({required:!0,max:25,each:new w({emptyAllowed:!1,required:!0})})}}),iS=new H,Ps=new z({min:1,max:25,required:!1,each:new w({emptyAllowed:!1,required:!0})});var qA={facetId:_,field:new w({required:!0,emptyAllowed:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new ue({required:!1}),resultsMustMatch:new ue({required:!1}),allowedValues:As,customSort:Ps},yr=S("facet/register",t=>C(t,qA)),Cr=S("facet/toggleSelectValue",t=>C(t,{facetId:_,selection:new I({values:ya})})),Fa=S("facet/toggleExcludeValue",t=>C(t,{facetId:_,selection:new I({values:ya})})),ye=S("facet/deselectAll",t=>C(t,_)),yn=S("facet/updateSortCriterion",t=>C(t,{facetId:_,criterion:new ue({required:!0})})),Ra=S("facet/updateNumberOfValues",t=>C(t,{facetId:_,numberOfValues:new q({required:!0,min:1})})),ba=S("facet/updateIsFieldExpanded",t=>C(t,{facetId:_,isFieldExpanded:new H({required:!0})})),Cn=S("facet/updateFreezeCurrentValues",t=>C(t,{facetId:_,freezeCurrentValues:new H({required:!0})}));var xn=S("rangeFacet/updateSortCriterion",t=>C(t,{facetId:_,criterion:new ue({required:!0})}));var Aa={state:E,start:new q({required:!0}),end:new q({required:!0}),endInclusive:new H({required:!0}),numberOfResults:new q({required:!0,min:0})},Pa={start:E,end:E,endInclusive:new H({required:!0}),state:E,numberOfResults:new q({required:!0,min:0})},wa=t=>({facetId:_,selection:typeof t.start=="string"?new I({values:Pa}):new I({values:Aa})});var TA={start:E,end:E,endInclusive:new H({required:!0}),state:E},DA={facetId:_,field:E,currentValues:new z({required:!1,each:new I({values:TA})}),generateAutomaticRanges:new H({required:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new ue({required:!1}),rangeAlgorithm:new ue({required:!1})};function sS(t){return hr(t)?Go(t):t}function ws(t){!t.currentValues||t.currentValues.forEach(e=>{let{start:r,end:a}=Sr(e);if(hn(sS(r)).isAfter(hn(sS(a))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)})}var _t=S("dateFacet/register",t=>{try{return rt(t,DA),ws(t),{payload:t,error:null}}catch(e){return{payload:t,error:nr(e)}}}),xr=S("dateFacet/toggleSelectValue",t=>C(t,{facetId:_,selection:new I({values:Pa})})),Ea=S("dateFacet/toggleExcludeValue",t=>C(t,{facetId:_,selection:new I({values:Pa})})),vr=S("dateFacet/updateFacetValues",t=>{try{return rt(t,{facetId:_,values:new z({each:new I({values:Pa})})}),ws({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:nr(e)}}}),Es=xn,Is=ye;var VA={state:E,start:new q({required:!0}),end:new q({required:!0}),endInclusive:new H({required:!0})},LA={facetId:_,field:E,currentValues:new z({required:!1,each:new I({values:VA})}),generateAutomaticRanges:new H({required:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new ue({required:!1}),rangeAlgorithm:new ue({required:!1})};function ks(t){!t.currentValues||t.currentValues.forEach(({start:e,end:r})=>{if(e>r)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${r}`)})}var $t=S("numericFacet/register",t=>{try{return C(t,LA),ks(t),{payload:t,error:null}}catch(e){return{payload:t,error:nr(e)}}}),Fr=S("numericFacet/toggleSelectValue",t=>C(t,{facetId:_,selection:new I({values:Aa})})),Ia=S("numericFacet/toggleExcludeValue",t=>C(t,{facetId:_,selection:new I({values:Aa})})),Rr=S("numericFacet/updateFacetValues",t=>{try{return rt(t,{facetId:_,values:new z({each:new I({values:Aa})})}),ks({currentValues:t.values}),{payload:t,error:null}}catch(e){return{payload:t,error:nr(e)}}}),Os=xn,qs=ye;var Rd=S("history/undo"),bd=S("history/redo"),Ft=S("history/snapshot"),cS=ee("history/back",async(t,{dispatch:e})=>{e(Rd()),await e(se())}),uS=ee("history/forward",async(t,{dispatch:e})=>{e(bd()),await e(se())}),se=ee("history/change",async(t,{getState:e})=>e().history.present);var fe=(T=>(T.interfaceLoad="interfaceLoad",T.interfaceChange="interfaceChange",T.didyoumeanAutomatic="didyoumeanAutomatic",T.didyoumeanClick="didyoumeanClick",T.resultsSort="resultsSort",T.searchboxSubmit="searchboxSubmit",T.searchboxClear="searchboxClear",T.searchboxAsYouType="searchboxAsYouType",T.breadcrumbFacet="breadcrumbFacet",T.breadcrumbResetAll="breadcrumbResetAll",T.documentQuickview="documentQuickview",T.documentOpen="documentOpen",T.omniboxAnalytics="omniboxAnalytics",T.omniboxFromLink="omniboxFromLink",T.searchFromLink="searchFromLink",T.triggerNotify="notify",T.triggerExecute="execute",T.triggerQuery="query",T.undoTriggerQuery="undoQuery",T.triggerRedirect="redirect",T.pagerResize="pagerResize",T.pagerNumber="pagerNumber",T.pagerNext="pagerNext",T.pagerPrevious="pagerPrevious",T.pagerScrolling="pagerScrolling",T.staticFilterClearAll="staticFilterClearAll",T.staticFilterSelect="staticFilterSelect",T.staticFilterDeselect="staticFilterDeselect",T.facetClearAll="facetClearAll",T.facetSearch="facetSearch",T.facetSelect="facetSelect",T.facetSelectAll="facetSelectAll",T.facetDeselect="facetDeselect",T.facetExclude="facetExclude",T.facetUnexclude="facetUnexclude",T.facetUpdateSort="facetUpdateSort",T.facetShowMore="showMoreFacetResults",T.facetShowLess="showLessFacetResults",T.queryError="query",T.queryErrorBack="errorBack",T.queryErrorClear="errorClearQuery",T.queryErrorRetry="errorRetry",T.recommendation="recommendation",T.recommendationInterfaceLoad="recommendationInterfaceLoad",T.recommendationOpen="recommendationOpen",T.likeSmartSnippet="likeSmartSnippet",T.dislikeSmartSnippet="dislikeSmartSnippet",T.expandSmartSnippet="expandSmartSnippet",T.collapseSmartSnippet="collapseSmartSnippet",T.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",T.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",T.sendSmartSnippetReason="sendSmartSnippetReason",T.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",T.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",T.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",T.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",T.openSmartSnippetSource="openSmartSnippetSource",T.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",T.openSmartSnippetInlineLink="openSmartSnippetInlineLink",T.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",T.recentQueryClick="recentQueriesClick",T.clearRecentQueries="clearRecentQueries",T.recentResultClick="recentResultClick",T.clearRecentResults="clearRecentResults",T.noResultsBack="noResultsBack",T.showMoreFoldedResults="showMoreFoldedResults",T.showLessFoldedResults="showLessFoldedResults",T.copyToClipboard="copyToClipboard",T.caseSendEmail="Case.SendEmail",T.feedItemTextPost="FeedItem.TextPost",T.caseAttach="caseAttach",T.caseDetach="caseDetach",T.retryGeneratedAnswer="retryGeneratedAnswer",T.likeGeneratedAnswer="likeGeneratedAnswer",T.dislikeGeneratedAnswer="dislikeGeneratedAnswer",T.openGeneratedAnswerSource="openGeneratedAnswerSource",T.generatedAnswerStreamEnd="generatedAnswerStreamEnd",T.historyForward="historyForward",T.historyBackward="historyBackward",T))(fe||{});var dt=S("facet/updateFacetAutoSelection",t=>C(t,{allow:new H({required:!0})}));var Ad={id:E},MA={...Ad,q:me},Ts=S("instantResults/register",t=>C(t,Ad)),zr=S("instantResults/updateQuery",t=>C(t,MA)),Ds=S("instantResults/clearExpired",t=>C(t,Ad));var Vs=new q({required:!0,min:0}),vn=S("pagination/registerNumberOfResults",t=>C(t,Vs)),Fn=S("pagination/updateNumberOfResults",t=>C(t,Vs)),Rn=S("pagination/registerPage",t=>C(t,Vs)),at=S("pagination/updatePage",t=>C(t,Vs)),bn=S("pagination/nextPage"),An=S("pagination/previousPage");var nt=S("query/updateQuery",t=>C(t,{q:new w,enableQuerySyntax:new H}));var Pn=async(t,e)=>({analytics:{clientId:await ct(t),clientTimestamp:new Date().toISOString(),documentReferrer:t.originLevel3,originContext:t.originContext,...e&&{actionCause:e.actionCause,customData:e.customData},...t.userDisplayName&&{userDisplayName:t.userDisplayName},...t.documentLocation&&{documentLocation:t.documentLocation},...t.deviceId&&{deviceId:t.deviceId},...jl()&&{pageId:jl()},...t.analyticsMode&&t.trackingId&&{trackingId:t.trackingId},capture:t.analyticsMode==="next"}});var Gr=async(t,e)=>{var r,a,n,o;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,debug:t.debug,tab:t.configuration.analytics.originLevel2,referrer:t.configuration.analytics.originLevel3,timezone:t.configuration.search.timezone,...t.configuration.analytics.enabled&&{visitorId:await ct(t.configuration.analytics),actionsHistory:Ot.getHistory()},...((r=t.advancedSearchQueries)==null?void 0:r.aq)&&{aq:t.advancedSearchQueries.aq},...((a=t.advancedSearchQueries)==null?void 0:a.cq)&&{cq:t.advancedSearchQueries.cq},...((n=t.advancedSearchQueries)==null?void 0:n.lq)&&{lq:t.advancedSearchQueries.lq},...((o=t.advancedSearchQueries)==null?void 0:o.dq)&&{dq:t.advancedSearchQueries.dq},...t.context&&{context:t.context.contextValues},...t.fields&&!t.fields.fetchAllFields&&{fieldsToInclude:t.fields.fieldsToInclude},...t.dictionaryFieldContext&&{dictionaryFieldContext:t.dictionaryFieldContext.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.query&&{q:t.query.q,enableQuerySyntax:t.query.enableQuerySyntax},...t.searchHub&&{searchHub:t.searchHub},...t.sortCriteria&&{sortCriteria:t.sortCriteria},...t.configuration.analytics.enabled&&await Pn(t.configuration.analytics,e),...t.excerptLength&&!ie(t.excerptLength.length)&&{excerptLength:t.excerptLength.length},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}};var Pd=class extends pe{constructor(e){super(e);this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let r in e)for(let a in e[r].cache)if(e[r].cache[a].isActive)return e[r].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let r in e)for(let a in e[r].cache)if(e[r].cache[a].isActive)return e[r].cache[a];return null}get results(){var e;return(e=this.activeInstantResultCache)==null?void 0:e.results}get queryText(){var e;return(e=this.activeInstantResultQuery)!=null?e:Oe().q}get responseTime(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.duration)!=null?r:De().duration}get numberOfResults(){var e,r;return(r=(e=this.activeInstantResultCache)==null?void 0:e.totalCountFiltered)!=null?r:De().response.totalCountFiltered}getSearchUID(){var r;return((r=this.activeInstantResultCache)==null?void 0:r.searchUid)||super.getSearchUID()}};var lS=()=>V("analytics/instantResult/searchboxAsYouType",t=>t.makeSearchboxAsYouType(),t=>new Pd(t));function dS(t){return t.type==="dateRange"}function pS(t){return`start${t}`}function fS(t){return`end${t}`}var NA=()=>({dateFacetValueMap:{}});function QA(t,e,r){let a=t.start,n=t.end;return hr(a)&&(a=Go(a),r.dateFacetValueMap[e][pS(a)]=t.start),hr(n)&&(n=Go(n),r.dateFacetValueMap[e][fS(n)]=t.end),{...t,start:a,end:n}}function BA(t,e){if(dS(t)){let{facetId:r,currentValues:a}=t;return e.dateFacetValueMap[r]={},{...t,currentValues:a.map(n=>QA(n,r,e))}}return t}function In(t){var a;let e=NA();return{request:{...t,facets:(a=t.facets)==null?void 0:a.map(n=>BA(n,e))},mappings:e}}function jA(t,e,r){return{...t,start:r.dateFacetValueMap[e][pS(t.start)]||t.start,end:r.dateFacetValueMap[e][fS(t.end)]||t.end}}function UA(t,e){return t.facetId in e.dateFacetValueMap}function _A(t,e){return UA(t,e)?{...t,values:t.values.map(r=>jA(r,t.facetId,e))}:t}function Ls(t,e){var r;return"success"in t?{success:{...t.success,facets:(r=t.success.facets)==null?void 0:r.map(n=>_A(n,e))}}:t}var ka=1,Wo=5e3;var ke=async(t,e)=>{var s,u;let r=KA(t),a=$A(t),n=HA(t),o=await Gr(t,e),i=()=>t.pagination?t.pagination.firstResult+t.pagination.numberOfResults>Wo?Wo-t.pagination.firstResult:t.pagination.numberOfResults:void 0;return In({...o,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},...r&&{cq:r},...a.length&&{facets:a},...t.pagination&&{numberOfResults:i(),firstResult:t.pagination.firstResult},...t.facetOptions&&{facetOptions:{freezeFacetOrder:t.facetOptions.freezeFacetOrder}},...((s=t.folding)==null?void 0:s.enabled)&&{filterField:t.folding.fields.collection,childField:t.folding.fields.parent,parentField:t.folding.fields.child,filterFieldRange:t.folding.filterFieldRange},...t.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:t.automaticFacetSet.desiredCount,numberOfValues:t.automaticFacetSet.numberOfValues,currentFacets:n}},...((u=t.generatedAnswer)==null?void 0:u.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:t.generatedAnswer.responseFormat}}}})};function $A(t){var e;return sa(GA(t),(e=t.facetOrder)!=null?e:[])}function HA(t){var r;let e=(r=t.automaticFacetSet)==null?void 0:r.set;return e?Object.values(e).map(a=>a.response).map(zA).filter(a=>a.currentValues.length>0):void 0}function zA(t){let{field:e,label:r,values:a}=t,n=a.filter(o=>o.state==="selected");return{field:e,label:r,currentValues:n}}function GA(t){return WA(t).filter(({facetId:e})=>{var r,a,n;return(n=(a=(r=t.facetOptions)==null?void 0:r.facets[e])==null?void 0:a.enabled)!=null?n:!0})}function WA(t){var e,r,a,n;return[...YA((e=t.facetSet)!=null?e:{}),...mS((r=t.numericFacetSet)!=null?r:{}),...mS((a=t.dateFacetSet)!=null?a:{}),...or((n=t.categoryFacetSet)!=null?n:{})]}function YA(t){return or(t).map(e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e)}function mS(t){return or(t).map(e=>{let a=e.currentValues.some(({state:n})=>n!=="idle");return e.generateAutomaticRanges&&!a?{...e,currentValues:[]}:e})}function KA(t){var o;let e=((o=t.advancedSearchQueries)==null?void 0:o.cq.trim())||"",r=Object.values(t.tabSet||{}).find(i=>i.isActive),a=(r==null?void 0:r.expression.trim())||"",n=JA(t);return[e,a,...n].filter(i=>!!i).join(" AND ")}function JA(t){return Object.values(t.staticFilterSet||{}).map(r=>{let a=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),n=a.map(o=>o.expression).join(" OR ");return a.length>1?`(${n})`:n})}var Ms=S("didYouMean/enable"),wd=S("didYouMean/disable"),Ns=S("didYouMean/automaticCorrections/disable"),Ed=S("didYouMean/automaticCorrections/enable"),Ht=S("didYouMean/correction",t=>C(t,E));var Id=()=>V("analytics/didyoumean/click",t=>t.makeDidYouMeanClick()),gS=()=>V("analytics/didyoumean/automatic",t=>t.makeDidYouMeanAutomatic());function Wr(){return{contextValues:{}}}var br=()=>!1;function Oa(){return{contextValues:{}}}function kn(){return{enabled:!0}}function qa(){return{freezeFacetOrder:!1,facets:{}}}function Ta(){return[]}function Yo(){return{}}function kd(t){return t?t.expiresAt&&Date.now()>=t.expiresAt:!1}function ot(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function On(){return{}}function qn(){return{}}function Tn(){return{}}function Od(){return Ar({})}function Ar(t){var e,r,a;return{context:t.context||Wr(),dictionaryFieldContext:t.dictionaryFieldContext||Oa(),facetSet:t.facetSet||lr(),numericFacetSet:t.numericFacetSet||ur(),dateFacetSet:t.dateFacetSet||cr(),categoryFacetSet:t.categoryFacetSet||sr(),automaticFacetSet:(e=t.automaticFacetSet)!=null?e:ua(),pagination:t.pagination||ot(),query:t.query||Oe(),tabSet:t.tabSet||Tn(),advancedSearchQueries:t.advancedSearchQueries||St(),staticFilterSet:t.staticFilterSet||qn(),querySet:t.querySet||On(),instantResults:t.instantResults||Yo(),sortCriteria:t.sortCriteria||ut(),pipeline:t.pipeline||Br(),searchHub:t.searchHub||We(),facetOptions:t.facetOptions||qa(),facetOrder:(r=t.facetOrder)!=null?r:Ta(),debug:(a=t.debug)!=null?a:br()}}var XA=new I({values:{undoneQuery:me},options:{required:!0}}),Qs=()=>V("analytics/trigger/query",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.queryModification.newQuery)?t.makeTriggerQuery():null}),qd=t=>V("analytics/trigger/query/undo",e=>(C(t,XA),e.makeUndoTriggerQuery(t))),Td=()=>V("analytics/trigger/notify",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.notifications.length)?t.makeTriggerNotify({notifications:e.triggers.notifications}):null}),Dd=()=>V("analytics/trigger/redirect",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.redirectTo)?t.makeTriggerRedirect({redirectedTo:e.triggers.redirectTo}):null}),Vd=()=>V("analytics/trigger/execute",(t,e)=>{var r;return((r=e.triggers)==null?void 0:r.executions.length)?t.makeTriggerExecute({executions:e.triggers.executions}):null});var Da=S("trigger/query/ignore",t=>C(t,new w({emptyAllowed:!0,required:!0}))),Dn=S("trigger/query/modification",t=>C(t,new I({values:{originalQuery:Se,modification:Se}})));var Va=class{constructor(e,r=a=>{this.dispatch(nt({q:a}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},a){var u;let n=new Date().getTime(),o=Ls(await this.extra.apiClient.search(r,a),e),i=new Date().getTime()-n,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(e){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?a:await this.processQueryTriggersOrContinue(e))!=null?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return Fe(e.response)?(this.dispatch(lt(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),a=this.getSuccessResponse(e);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return Fe(d.response)?(this.dispatch(lt(d.response.error)),this.rejectWithValue(d.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(e.queryExecuted,e.duration,r,a),this.extra),this.dispatch(Ft(Ar(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:gS()})}async processQueryTriggersOrContinue(e){var s,u;let r=this.getSuccessResponse(e);if(!r)return null;let a=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===a)return this.dispatch(Da("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return Fe(i.response)?(this.dispatch(lt(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Ft(Ar(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:Qs()})}processSuccessResponse(e){return this.dispatch(Ft(Ar(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Ii(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await ke(this.getState()),{origin:"mainSearch"});return this.dispatch(Ht(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Dn({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await ke(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(e,r,a,n){var o,i;return{...a,query:{q:e,enableQuerySyntax:(i=(o=a.query)==null?void 0:o.enableQuerySyntax)!=null?i:Oe().enableQuerySyntax},search:{...De(),duration:r,response:n,results:n.results}}}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var kQ=ee("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;C(t,{q:new w,enableQuerySyntax:new H,clearFilters:new H}),t.clearFilters&&(r(Ie()),r(Sa())),r(dt({allow:!0})),r(nt({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(at(1))}),Ko=ee("search/executeSearch",async(t,e)=>{let r=e.getState();return await Bs(r,e,t)}),Jo=ee("search/fetchPage",async(t,e)=>{let r=e.getState();return await Nd(r,e,t)}),Xo=ee("search/fetchMoreResults",async(t,e)=>{let r=e.getState();return await Qd(e,r)}),Ld=ee("search/fetchFacetValues",async(t,e)=>{let r=e.getState();return await aP(e,t,r)}),ZA=ee("search/fetchInstantResults",async(t,e)=>Md(t,e)),eP=async(t,e)=>{var a,n,o,i;let r=await ke(t,e);return r.request={...r.request,firstResult:((n=(a=t.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=t.search)==null?void 0:o.results.length)!=null?i:0)},r},tP=async(t,e,r)=>{let a=await Gr(t);return In({...a,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},rP=async(t,e)=>{let r=await ke(t,e);return r.request.numberOfResults=0,r},hS=t=>{var e;t.configuration.analytics.enabled&&Ot.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})};async function Md(t,e){C(t,{id:E,q:E,maxResultsPerQuery:new q({required:!0,min:1}),cacheTimeout:new q});let{q:r,maxResultsPerQuery:a}=t,n=e.getState(),o=new Va({...e,analyticsAction:lS()},c=>{e.dispatch(zr({q:c,id:t.id}))}),i=await tP(n,r,a),s=await o.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),u=await o.process(s);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function Nd(t,e,r){hS(t);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=e.extra,{description:i}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Va({...e,analyticsAction:r}),u=await ke(t,i),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}async function Qd(t,e){let{analyticsClientMiddleware:r,preprocessRequest:a,logger:n}=t.extra,{description:o}=await _l().prepare({getState:()=>t.getState(),analyticsClientMiddleware:r,preprocessRequest:a,logger:n}),i=new Va({...t,analyticsAction:_l()}),s=await eP(e,o),u=await i.fetchFromAPI(s,{origin:"mainSearch"});return await i.process(u)}async function aP(t,e,r){let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Va({...t,analyticsAction:e}),u=await rP(r,i),c=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(c)}async function Bs(t,e,r){hS(t);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=e.extra,{description:i}=await r.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=await ke(t,i),u=new Va({...e,analyticsAction:r}),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}var La=class{constructor(e,r=a=>{this.dispatch(nt({q:a}))}){this.config=e;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:e,request:r},a){var u;let n=new Date().getTime(),o=Ls(await this.extra.apiClient.search(r,a),e),i=new Date().getTime()-n,s=((u=this.getState().query)==null?void 0:u.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(e){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(e))!=null?r:await this.processQueryCorrectionsOrContinue(e))!=null?a:await this.processQueryTriggersOrContinue(e))!=null?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return Fe(e.response)?(this.dispatch(lt(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let r=this.getState(),a=this.getSuccessResponse(e);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let c=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return Fe(d.response)?(this.dispatch(lt(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(Ft(Ar(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:c,analyticsAction:sn(fe.didyoumeanAutomatic,this.getState)})}async processQueryTriggersOrContinue(e){var s,u;let r=this.getSuccessResponse(e);if(!r)return null;let a=((s=r.triggers.find(c=>c.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((u=this.getState().triggers)==null?void 0:u.queryModification.queryToIgnore)===a)return this.dispatch(Da("")),null;let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return Fe(i.response)?(this.dispatch(lt(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Ft(Ar(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:sn(fe.triggerQuery,this.getState)})}processSuccessResponse(e){return this.dispatch(Ft(Ar(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Ii(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let r=await this.fetchFromAPI(await ke(this.getState()),{origin:"mainSearch"});return this.dispatch(Ht(e)),r}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Dn({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await ke(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var r;let e=this.getState();return((r=e.query)==null?void 0:r.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var SS=ee("search/prepareForSearchWithQuery",(t,e)=>{let{dispatch:r}=e;C(t,{q:new w,enableQuerySyntax:new H,clearFilters:new H}),t.clearFilters&&(r(Ie()),r(Sa())),r(dt({allow:!0})),r(nt({q:t.q,enableQuerySyntax:t.enableQuerySyntax})),r(at(1))}),W=ee("search/executeSearch",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return Bs(r,e,t.legacy);yS(r);let a=CS(t.next,r),n=await ke(r,a),o=new La({...e,analyticsAction:a}),i=await o.fetchFromAPI(n,{origin:"mainSearch"});return await o.process(i)}),Vn=ee("search/fetchPage",async(t,e)=>{let r=e.getState();if(yS(r),r.configuration.analytics.analyticsMode==="legacy"||!t.next)return Nd(r,e,t.legacy);let a=new La({...e,analyticsAction:t.next}),n=await ke(r,t.next),o=await a.fetchFromAPI(n,{origin:"mainSearch"});return await a.process(o)}),Ln=ee("search/fetchMoreResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Qd(e,r);let a=sn(fe.pagerScrolling,e.getState),n=new La({...e,analyticsAction:a}),o=await nP(r,a),i=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(i)}),Mn=ee("search/fetchFacetValues",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!t.next)return Bs(r,e,t.legacy);let a=CS(t.next,r),n=new La({...e,analyticsAction:a}),o=await iP(r,a),i=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(i)}),Zo=ee("search/fetchInstantResults",async(t,e)=>{let r=e.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Md(t,e);C(t,{id:E,q:E,maxResultsPerQuery:new q({required:!0,min:1}),cacheTimeout:new q});let{q:a,maxResultsPerQuery:n}=t,o=sn(fe.searchboxAsYouType,e.getState),i=new La({...e,analyticsAction:o},l=>{e.dispatch(zr({q:l,id:t.id}))}),s=await oP(r,a,n),u=await i.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),c=await i.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,analyticsAction:c.analyticsAction,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}),nP=async(t,e)=>{var a,n,o,i;let r=await ke(t,e);return r.request={...r.request,firstResult:((n=(a=t.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=t.search)==null?void 0:o.results.length)!=null?i:0)},r},oP=async(t,e,r)=>{let a=await Gr(t);return In({...a,...t.didYouMean&&{enableDidYouMean:t.didYouMean.enableDidYouMean},numberOfResults:r,q:e})},iP=async(t,e)=>{let r=await ke(t,e);return r.request.numberOfResults=0,r},yS=t=>{var e;t.configuration.analytics.enabled&&Ot.addElement({name:"Query",...((e=t.query)==null?void 0:e.q)&&{value:t.query.q},time:JSON.stringify(new Date)})},CS=(t,e)=>({customData:t.getEventExtraPayload(e),actionCause:t.actionCause,type:t.actionCause});var zt=k(ot(),t=>{t.addCase(vn,(e,r)=>{let a=Bd(e),n=r.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=ei(a,n)}).addCase(Fn,(e,r)=>{e.numberOfResults=r.payload,e.firstResult=0}).addCase(_r,e=>{e.firstResult=0}).addCase(Rn,(e,r)=>{let a=r.payload;e.firstResult=ei(a,e.numberOfResults)}).addCase(at,(e,r)=>{let a=r.payload;e.firstResult=ei(a,e.numberOfResults)}).addCase(An,e=>{let r=Bd(e),a=Math.max(r-1,ka);e.firstResult=ei(a,e.numberOfResults)}).addCase(bn,e=>{let r=Bd(e),a=sP(e),n=Math.min(r+1,a);e.firstResult=ei(n,e.numberOfResults)}).addCase(se.fulfilled,(e,r)=>{r.payload&&(e.numberOfResults=r.payload.pagination.numberOfResults,e.firstResult=r.payload.pagination.firstResult)}).addCase(le,(e,r)=>{var a,n;e.firstResult=(a=r.payload.firstResult)!=null?a:e.firstResult,e.numberOfResults=(n=r.payload.numberOfResults)!=null?n:e.defaultNumberOfResults}).addCase(W.fulfilled,(e,r)=>{let{response:a}=r.payload;e.totalCountFiltered=a.totalCountFiltered}).addCase(X.fulfilled,(e,r)=>{let{response:a}=r.payload;e.totalCountFiltered=a.pagination.totalCount}).addCase(ye,e=>{pt(e)}).addCase(Cr,e=>{pt(e)}).addCase(gr,e=>{pt(e)}).addCase($r,e=>{pt(e)}).addCase(gn,e=>{pt(e)}).addCase(xr,e=>{pt(e)}).addCase(Fr,e=>{pt(e)}).addCase(Ie,e=>{pt(e)}).addCase(vr,e=>{pt(e)}).addCase(Rr,e=>{pt(e)}).addCase(va,e=>{pt(e)}).addCase(pn,e=>{pt(e)})});function pt(t){t.firstResult=ot().firstResult}function Bd(t){let{firstResult:e,numberOfResults:r}=t;return jd(e,r)}function sP(t){let{totalCountFiltered:e,numberOfResults:r}=t;return Ud(e,r)}function ei(t,e){return(t-1)*e}function jd(t,e){return Math.round(t/e)+1}function Ud(t,e){let r=Math.min(t,Wo);return Math.ceil(r/e)}function cP(t){return t.addReducers({pagination:zt}),{nextPage:bn,previousPage:An,registerNumberOfResults:vn,registerPage:Rn,updateNumberOfResults:Fn,updatePage:at}}var uP={categoryFacetId:_,categoryFacetPath:new z({required:!0,each:E})},lP=(t,{categoryFacetId:e,categoryFacetPath:r})=>{let a=t.categoryFacetSet[e],n=a==null?void 0:a.request.field,o=`${n}_${e}`;return{categoryFacetId:e,categoryFacetPath:r,categoryFacetField:n,categoryFacetTitle:o}},_d=t=>V("analytics/categoryFacet/breadcrumb",(e,r)=>(C(t,uP),e.makeBreadcrumbFacet(lP(r,t))));var js=t=>V("analytics/facet/showMore",(e,r)=>{C(t,_);let a=Ct(t,Ee(r));return e.makeFacetShowMore(a)}),Us=t=>V("analytics/facet/showLess",(e,r)=>{C(t,_);let a=Ct(t,Ee(r));return e.makeFacetShowLess(a)}),Nn=t=>V("analytics/facet/sortChange",(e,r)=>{C(t,{facetId:_,criterion:new ue({required:!0})});let{facetId:a,criterion:n}=t,o=Ee(r),s={...Ct(a,o),criteria:n};return e.makeFacetUpdateSort(s)}),Gt=t=>V("analytics/facet/reset",(e,r)=>{C(t,_);let a=Ee(r),n=Ct(t,a);return e.makeFacetClearAll(n)}),ft=t=>V("analytics/facet/select",(e,r)=>{C(t,{facetId:_,facetValue:E});let a=Ee(r),n=Nr(t,a);return e.makeFacetSelect(n)});var Ma=t=>V("analytics/facet/deselect",(e,r)=>{C(t,{facetId:_,facetValue:E});let a=Ee(r),n=Nr(t,a);return e.makeFacetDeselect(n)}),$d=t=>V("analytics/facet/breadcrumb",(e,r)=>{C(t,{facetId:_,facetValue:E});let a=Nr(t,Ee(r));return e.makeBreadcrumbFacet(a)});var Hd=()=>V("analytics/facet/deselectAllBreadcrumbs",t=>t.makeBreadcrumbResetAll());var _s=(t,{facetId:e,selection:r})=>{let n=(t.dateFacetSet[e]||t.numericFacetSet[e]).request.field,o=`${n}_${e}`;return{facetId:e,facetField:n,facetTitle:o,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var zd=t=>V("analytics/dateFacet/breadcrumb",(e,r)=>{C(t,wa(t.selection));let a=_s(r,t);return e.makeBreadcrumbFacet(a)});var Gd=t=>V("analytics/numericFacet/breadcrumb",(e,r)=>{C(t,wa(t.selection));let a=_s(r,t);return e.makeBreadcrumbFacet(a)});var Wd=()=>V("history/analytics/forward",t=>t.makeSearchEvent("historyForward")),Yd=()=>V("history/analytics/backward",t=>t.makeSearchEvent("historyBackward")),Kd=()=>V("history/analytics/noresultsback",t=>t.makeNoResultsBack());function dP(t){return t.pagination.firstResult}function xS(t){return t.pagination.numberOfResults}function pP(t){return t.pagination.totalCountFiltered}var Yr=t=>{let e=dP(t),r=xS(t);return jd(e,r)},$s=t=>{let e=pP(t),r=xS(t);return Ud(e,r)},Jd=(t,e)=>{let r=Yr(t),a=$s(t),n=fP(r,e);return n=mP(n),n=gP(n,a),hP(n)};function fP(t,e){let r=e%2==0,a=Math.floor(e/2),n=r?a-1:a,o=t-a,i=t+n;return{start:o,end:i}}function mP(t){let e=Math.max(ka-t.start,0),r=t.start+e,a=t.end+e;return{start:r,end:a}}function gP(t,e){let r=Math.max(t.end-e,0),a=Math.max(t.start-r,ka),n=t.end-r;return{start:a,end:n}}function hP(t){let e=[];for(let r=t.start;r<=t.end;++r)e.push(r);return e}var Qn=()=>V("analytics/pager/resize",(t,e)=>{var r;return t.makePagerResize({currentResultsPerPage:((r=e.pagination)==null?void 0:r.numberOfResults)||ot().numberOfResults})}),Hs=()=>V("analytics/pager/number",(t,e)=>t.makePagerNumber({pagerNumber:Yr(e)})),Xd=()=>V("analytics/pager/next",(t,e)=>t.makePagerNext({pagerNumber:Yr(e)})),Zd=()=>V("analytics/pager/previous",(t,e)=>t.makePagerPrevious({pagerNumber:Yr(e)}));var ep=t=>V("analytics/querySuggest",(e,r)=>{let a=vS(r,t);return e.makeOmniboxAnalytics(a)});function vS(t,e){let{id:r,suggestion:a}=e,n=t.querySuggest&&t.querySuggest[r];if(!n)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let o=n.completions.map(c=>c.expression),i=n.partialQueries.length-1,s=n.partialQueries[i]||"",u=n.responseId;return{suggestionRanking:o.indexOf(a),partialQuery:s,partialQueries:n.partialQueries,suggestions:o,querySuggestResponseId:u}}var ti=()=>V("analytics/searchbox/submit",t=>t.makeSearchboxSubmit());var FS=()=>new I({values:{questionAnswerId:E},options:{required:!0}});function Bn(t){return C(t,FS())}var Na=(t,e)=>{let r=t;return ie(r[e])?ie(t.raw[e])?null:t.raw[e]:r[e]},RS=t=>e=>t.every(r=>!ie(Na(e,r))),bS=t=>e=>t.every(r=>ie(Na(e,r))),AS=(t,e)=>r=>{let a=wS(t,r);return e.some(n=>a.some(o=>`${o}`.toLowerCase()===n.toLowerCase()))},PS=(t,e)=>r=>{let a=wS(t,r);return e.every(n=>a.every(o=>`${o}`.toLowerCase()!==n.toLowerCase()))},wS=(t,e)=>{let r=Na(e,t);return Ri(r)?r:[r]};function zs(t,e){var n,o,i,s,u;let r=(o=(n=t.questionAnswering)==null?void 0:n.relatedQuestions.findIndex(c=>c.questionAnswerId===e))!=null?o:-1;if(r===-1)return null;let a=(u=(s=(i=t.search)==null?void 0:i.questionAnswer)==null?void 0:s.relatedQuestions)==null?void 0:u[r];return a!=null?a:null}var IS=()=>V("analytics/smartSnippet/expand",t=>t.makeExpandSmartSnippet()),kS=()=>V("analytics/smartSnippet/collapse",t=>t.makeCollapseSmartSnippet()),OS=()=>V("analytics/smartSnippet/like",t=>t.makeLikeSmartSnippet()),qS=()=>V("analytics/smartSnippet/dislike",t=>t.makeDislikeSmartSnippet());var TS=()=>V("analytics/smartSnippet/feedbackModal/open",t=>t.makeOpenSmartSnippetFeedbackModal()),DS=()=>V("analytics/smartSnippet/feedbackModal/close",t=>t.makeCloseSmartSnippetFeedbackModal()),VS=t=>V("analytics/smartSnippet/sendFeedback",e=>e.makeSmartSnippetFeedbackReason(t)),LS=t=>V("analytics/smartSnippet/sendFeedback",e=>e.makeSmartSnippetFeedbackReason("other",t)),MS=t=>V("analytics/smartSnippetSuggestion/expand",(e,r)=>{Bn(t);let a=zs(r,t.questionAnswerId);return a?e.makeExpandSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),NS=t=>V("analytics/smartSnippetSuggestion/expand",(e,r)=>{Bn(t);let a=zs(r,t.questionAnswerId);return a?e.makeCollapseSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null});var Gs=()=>V("analytics/sort/results",(t,e)=>t.makeResultsSort({resultsSortBy:e.sortCriteria||ut()}));var Qa=E,Ws=new I({options:{required:!0},values:{caption:me,expression:me,state:new w({constrainTo:["idle","selected","excluded"]})}}),Ys=new z({required:!0,each:Ws});var Ks=S("staticFilter/register",t=>C(t,{id:Qa,values:Ys})),ri=S("staticFilter/toggleSelect",t=>C(t,{id:Qa,value:Ws})),ai=S("staticFilter/toggleExclude",t=>C(t,{id:Qa,value:Ws})),Js=S("staticFilter/deselectAllFilterValues",t=>C(t,Qa)),tp=t=>V("analytics/staticFilter/select",e=>e.makeStaticFilterSelect(t)),Xs=t=>V("analytics/staticFilter/deselect",e=>e.makeStaticFilterDeselect(t)),rp=t=>V("analytics/staticFilter/clearAll",e=>e.makeStaticFilterClearAll(t));var ap=()=>V("analytics/interface/load",t=>t.makeInterfaceLoad()),Zs=()=>V("analytics/interface/change",(t,e)=>t.makeInterfaceChange({interfaceChangeTo:e.configuration.analytics.originLevel2})),np=()=>V("analytics/interface/searchFromLink",t=>t.makeSearchFromLink()),op=t=>V("analytics/interface/omniboxFromLink",e=>e.makeOmniboxFromLink(t));function SP(t){return t.addReducers({}),{logClearBreadcrumbs:Hd,logInterfaceLoad:ap,logSearchFromLink:np,logOmniboxFromLink:op,logInterfaceChange:Zs,logDidYouMeanClick:Id,logCategoryFacetBreadcrumb:_d,logFacetBreadcrumb:$d,logFacetClearAll:Gt,logFacetDeselect:Ma,logFacetSelect:ft,logFacetShowLess:Us,logFacetShowMore:js,logFacetUpdateSort:Nn,logDateFacetBreadcrumb:zd,logNumericFacetBreadcrumb:Gd,logNavigateBackward:Yd,logNavigateForward:Wd,logPageNext:Xd,logPageNumber:Hs,logPagePrevious:Zd,logPagerResize:Qn,logSearchboxSubmit:ti,logQuerySuggestionClick:ep,logResultsSort:Gs,logDislikeSmartSnippet:qS,logLikeSmartSnippet:OS,logOpenSmartSnippetFeedbackModal:TS,logCloseSmartSnippetFeedbackModal:DS,logSmartSnippetFeedback:VS,logSmartSnippetDetailedFeedback:LS,logExpandSmartSnippet:IS,logCollapseSmartSnippet:kS,logExpandSmartSnippetSuggestion:MS,logCollapseSmartSnippetSuggestion:NS,logNoResultsBack:Kd,logStaticFilterSelect:tp,logStaticFilterDeselect:Xs,logStaticFilterClearAll:rp,logTriggerQuery:Qs,logUndoTriggerQuery:qd,logNotifyTrigger:Td,logTriggerRedirect:Dd,logTriggerExecute:Vd}}var yP={by:new Ze({enum:Ue,required:!0})},jn=S("sort/register",t=>QS(t)),Un=S("sort/update",t=>QS(t)),QS=t=>C(t,yP);function ip(){return pa()}var ec=k(ip(),t=>{t.addCase(jn,(e,r)=>r.payload).addCase(Un,(e,r)=>r.payload)});function CP(t){return t.addReducers({sort:ec}),{registerSortCriterion:jn,updateSortCriterion:Un}}var ae=S("facetOptions/update",(t={freezeFacetOrder:!0})=>C(t,{freezeFacetOrder:new H({required:!1})})),He=S("facetOptions/facet/enable",t=>C(t,_)),ve=S("facetOptions/facet/disable",t=>C(t,_));var Ve=k(qa(),t=>{t.addCase(ae,(e,r)=>({...e,...r.payload})).addCase(W.fulfilled,e=>{e.freezeFacetOrder=!1}).addCase(W.rejected,e=>{e.freezeFacetOrder=!1}).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOptions)!=null?n:e}).addCase(mr,(e,r)=>{e.facets[r.payload.facetId]=kn()}).addCase(yr,(e,r)=>{e.facets[r.payload.facetId]=kn()}).addCase(_t,(e,r)=>{e.facets[r.payload.facetId]=kn()}).addCase($t,(e,r)=>{e.facets[r.payload.facetId]=kn()}).addCase(He,(e,r)=>{e.facets[r.payload].enabled=!0}).addCase(ve,(e,r)=>{e.facets[r.payload].enabled=!1}).addCase(le,(e,r)=>{var a,n,o,i,s;[...Object.keys((a=r.payload.f)!=null?a:{}),...Object.keys((n=r.payload.fExcluded)!=null?n:{}),...Object.keys((o=r.payload.cf)!=null?o:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((s=r.payload.df)!=null?s:{})].forEach(u=>{u in e||(e.facets[u]=kn()),e.facets[u].enabled=!0})})});function xP(t){return t.addReducers({facetOptions:Ve}),{updateFacetOptions:ae,enableFacet:He,disableFacet:ve}}function _n(t,e){var o;let{facetId:r,criterion:a}=e,n=(o=t[r])==null?void 0:o.request;!n||(n.sortCriteria=a)}function ni(t){!t||(t.currentValues=t.currentValues.map(e=>({...e,state:"idle"})),t.preventAutoSelect=!0)}function tc(t,e){!t||(t.numberOfValues=e)}var Pr=k(lr(),t=>{t.addCase(yr,(e,r)=>{let{facetId:a}=r.payload;a in e||(e[a]=eh(vP(r.payload)))}).addCase(se.fulfilled,(e,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(le,(e,r)=>{let a=r.payload.f||{},n=r.payload.fExcluded||{};Object.keys(e).forEach(i=>{let{request:s}=e[i],u=a[i]||[],c=n[i]||[],l=s.currentValues.filter(d=>!u.includes(d.value)&&!c.includes(d.value));s.currentValues=[...u.map(BS),...c.map(jS),...l.map(RP)],s.preventAutoSelect=u.length>0,s.numberOfValues=Math.max(u.length+c.length,s.numberOfValues)})}).addCase(Cr,(e,r)=>{var u;let{facetId:a,selection:n}=r.payload,o=(u=e[a])==null?void 0:u.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(c=>c.value===n.value);if(!i){rc(o,n);return}let s=i.state==="selected";i.state=s?"idle":"selected",o.freezeCurrentValues=!0}).addCase(Fa,(e,r)=>{var u;let{facetId:a,selection:n}=r.payload,o=(u=e[a])==null?void 0:u.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(c=>c.value===n.value);if(!i){rc(o,n);return}let s=i.state==="excluded";i.state=s?"idle":"excluded",o.freezeCurrentValues=!0}).addCase(Cn,(e,r)=>{var i;let{facetId:a,freezeCurrentValues:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.freezeCurrentValues=n)}).addCase(ye,(e,r)=>{var a;ni((a=e[r.payload])==null?void 0:a.request)}).addCase(Ie,e=>{Object.values(e).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>ni(r))}).addCase(Sa,e=>{Object.values(e).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>ni(r))}).addCase(dt,(e,r)=>Object.values(e).forEach(a=>{a.request.preventAutoSelect=!r.payload.allow})).addCase(yn,(e,r)=>{_n(e,r.payload)}).addCase(Ra,(e,r)=>{var o;let{facetId:a,numberOfValues:n}=r.payload;tc((o=e[a])==null?void 0:o.request,n)}).addCase(ba,(e,r)=>{var i;let{facetId:a,isFieldExpanded:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.isFieldExpanded=n)}).addCase(W.fulfilled,(e,r)=>{r.payload.response.facets.forEach(n=>{var o;return sp((o=e[n.facetId])==null?void 0:o.request,n)})}).addCase(X.fulfilled,(e,r)=>{var n,o;(((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[]).forEach(i=>{var s;return sp((s=e[i.facetId])==null?void 0:s.request,i)})}).addCase(Mn.fulfilled,(e,r)=>{r.payload.response.facets.forEach(n=>{var o;return sp((o=e[n.facetId])==null?void 0:o.request,n)})}).addCase(va,(e,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=e[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,u=s.find(d=>d.value===i);if(u){u.state="selected";return}let c=BS(i);rc(o,c),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase($o,(e,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=e[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,u=s.find(d=>d.value===i);if(u){u.state="excluded";return}let c=jS(i);rc(o,c),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(ve,(e,r)=>{if(!(r.payload in e))return;let{request:a}=e[r.payload];ni(a)})});function rc(t,e){let{currentValues:r}=t,a=r.findIndex(s=>s.state==="idle"),n=a===-1?r.length:a,o=r.slice(0,n),i=r.slice(n+1);t.currentValues=[...o,e,...i],t.numberOfValues=t.currentValues.length}function sp(t,e){!t||(t.currentValues=e.values.map(FP),t.freezeCurrentValues=!1,t.preventAutoSelect=!1)}var ac={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function vP(t){return{...ac,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...t}}function FP(t){let{value:e,state:r}=t;return{value:e,state:r}}function BS(t){return{value:t,state:"selected"}}function jS(t){return{value:t,state:"excluded"}}function RP(t){return{...t,state:"idle"}}function bP(t){return t.addReducers({facetSet:Pr}),{deselectAllFacetValues:ye,registerFacet:yr,toggleSelectFacetValue:Cr,toggleExcludeFacetValue:Fa,updateFacetIsFieldExpanded:ba,updateFacetNumberOfValues:Ra,updateFacetSortCriterion:yn,updateFreezeCurrentValues:Cn,updateFacetAutoSelection:dt}}function nc(t,e){let r=t[e];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function cp(t,e,r){t.currentValues=AP(e,r),t.numberOfValues=e.length?1:r,t.preventAutoSelect=!0}function AP(t,e){if(!t.length)return[];let r=US(t[0],e),a=r;for(let n of t.splice(1)){let o=US(n,e);a.children.push(o),a=o}return a.state="selected",a.retrieveChildren=!0,[r]}function US(t,e){return{value:t,retrieveCount:e,children:[],state:"idle",retrieveChildren:!1}}var wr=k(sr(),t=>{t.addCase(mr,(e,r)=>{let a=r.payload,{facetId:n}=a;if(n in e)return;let o=wP(a),i=o.numberOfValues;e[n]={request:o,initialNumberOfValues:i}}).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.categoryFacetSet)!=null?n:e}).addCase(le,(e,r)=>{let a=r.payload.cf||{};Object.keys(e).forEach(n=>{let o=e[n].request,i=a[n]||[];(i.length||o.currentValues.length)&&cp(o,i,e[n].initialNumberOfValues)})}).addCase(mn,(e,r)=>{var i;let{facetId:a,criterion:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.sortCriteria=n)}).addCase(Cs,(e,r)=>{var i;let{facetId:a,basePath:n}=r.payload,o=(i=e[a])==null?void 0:i.request;!o||(o.basePath=[...n])}).addCase($r,(e,r)=>{var d;let{facetId:a,selection:n,retrieveCount:o}=r.payload,i=(d=e[a])==null?void 0:d.request;if(!i)return;let{path:s}=n,u=s.slice(0,s.length-1),c=PP(i,u,o);if(c.length){let m=c[0];m.retrieveChildren=!0,m.state="selected",m.children=[];return}let l=_S(n.value,o);l.state="selected",c.push(l),i.numberOfValues=1}).addCase(gr,(e,r)=>{let a=r.payload;nc(e,a)}).addCase(Ie,e=>{Object.keys(e).forEach(r=>nc(e,r))}).addCase(dt,(e,r)=>Object.keys(e).forEach(a=>{e[a].request.preventAutoSelect=!r.payload.allow})).addCase(Ca,(e,r)=>{var i;let{facetId:a,numberOfValues:n}=r.payload,o=(i=e[a])==null?void 0:i.request;if(!!o){if(!o.currentValues.length)return tc(o,n);EP(e,r.payload)}}).addCase(gn,(e,r)=>{let{facetId:a,value:n}=r.payload,o=e[a];if(!o)return;let i=[...n.path,n.rawValue];cp(o.request,i,o.initialNumberOfValues)}).addCase(Mn.fulfilled,(e,r)=>{$S(e,r.payload.response.facets)}).addCase(W.fulfilled,(e,r)=>{$S(e,r.payload.response.facets)}).addCase(ve,(e,r)=>{nc(e,r.payload)})}),oc={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function PP(t,e,r){let a=t.currentValues;for(let n of e){let o=a[0];(!o||n!==o.value)&&(o=_S(n,r),a.length=0,a.push(o)),o.retrieveChildren=!1,o.state="idle",a=o.children}return a}function wP(t){return{...oc,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...t}}function _S(t,e){return{value:t,state:"idle",children:[],retrieveChildren:!0,retrieveCount:e}}function $S(t,e){e.forEach(r=>{var i;if(!IP(t,r))return;let a=r.facetId,n=(i=t[a])==null?void 0:i.request;if(!n)return;let o=kP(n,r);n.currentValues=o?[]:n.currentValues,n.preventAutoSelect=!1})}function EP(t,e){var o;let{facetId:r,numberOfValues:a}=e,n=(o=t[r])==null?void 0:o.request.currentValues[0];if(!!n){for(;n.children.length&&(n==null?void 0:n.state)!=="selected";)n=n.children[0];n.retrieveCount=a}}function IP(t,e){return e.facetId in t}function kP(t,e){let r=yt(t.currentValues),a=yt(e.values);return r.length!==a.length}function OP(t){return t.addReducers({categoryFacetSet:wr}),{deselectAllCategoryFacetValues:gr,registerCategoryFacet:mr,toggleSelectCategoryFacetValue:$r,updateCategoryFacetNumberOfValues:Ca,updateCategoryFacetSortCriterion:mn,updateFacetAutoSelection:dt,updateCategoryFacetBasePath:Cs}}var ic={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function sc(t,e){let{request:r}=e,{facetId:a}=r;if(a in t)return;let n=HS(r);r.numberOfValues=n,t[a]=e}function cc(t,e,r){var n;let a=(n=t[e])==null?void 0:n.request;!a||(a.currentValues=r,a.numberOfValues=HS(a))}function uc(t,e,r){var i;let a=(i=t[e])==null?void 0:i.request;if(!a)return;let n=pc(a.currentValues,r);if(!n)return;let o=n.state==="selected";n.state=o?"idle":"selected",a.preventAutoSelect=!0}function lc(t,e,r){var i;let a=(i=t[e])==null?void 0:i.request;if(!a)return;let n=pc(a.currentValues,r);if(!n)return;let o=n.state==="excluded";n.state=o?"idle":"excluded",a.preventAutoSelect=!0}function Kr(t,e){var a;let r=(a=t[e])==null?void 0:a.request;!r||r.currentValues.forEach(n=>n.state="idle")}function dc(t,e){Object.entries(t).forEach(([r,{request:a}])=>{let n=e[r]||[];a.currentValues.forEach(s=>{let u=!!pc(n,s);return s.state=u?"selected":"idle",s});let o=n.filter(s=>!pc(a.currentValues,s)),i=a.currentValues;i.push(...o),a.numberOfValues=Math.max(a.numberOfValues,i.length)})}function $n(t,e,r){e.forEach(a=>{var s;let n=a.facetId,o=(s=t[n])==null?void 0:s.request;if(!o)return;let i=r(a.values);o.currentValues=i,o.preventAutoSelect=!1})}function pc(t,e){let{start:r,end:a}=e;return t.find(n=>n.start===r&&n.end===a)}function HS(t){let{generateAutomaticRanges:e,currentValues:r,numberOfValues:a}=t;return e?Math.max(a,r.length):r.length}var Wt=k(cr(),t=>{t.addCase(_t,(e,r)=>{let{payload:a}=r,n=qP(a);sc(e,Xg(n))}).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.dateFacetSet)!=null?n:e}).addCase(le,(e,r)=>{let a=r.payload.df||{};dc(e,a)}).addCase(xr,(e,r)=>{let{facetId:a,selection:n}=r.payload;uc(e,a,n)}).addCase(Ea,(e,r)=>{let{facetId:a,selection:n}=r.payload;lc(e,a,n)}).addCase(vr,(e,r)=>{let{facetId:a,values:n}=r.payload;cc(e,a,n)}).addCase(Is,(e,r)=>{Kr(e,r.payload)}).addCase(Ie,e=>{Object.keys(e).forEach(r=>{Kr(e,r)})}).addCase(Es,(e,r)=>{_n(e,r.payload)}).addCase(W.fulfilled,(e,r)=>{let a=r.payload.response.facets;$n(e,a,zS)}).addCase(X.fulfilled,(e,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];$n(e,a,zS)}).addCase(ve,(e,r)=>{Kr(e,r.payload)})});function qP(t){return{...ic,currentValues:[],preventAutoSelect:!1,type:"dateRange",...t}}function zS(t){return t.map(e=>{let{numberOfResults:r,...a}=e;return a})}function TP(t){return t.addReducers({dateFacetSet:Wt}),{deselectAllDateFacetValues:Is,registerDateFacet:_t,toggleSelectDateFacetValue:xr,toggleExcludeDateFacetValue:Ea,updateDateFacetSortCriterion:Es,updateDateFacetValues:vr}}var it=k(ur(),t=>{t.addCase($t,(e,r)=>{let{payload:a}=r,n=DP(a);sc(e,Zg(n))}).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.numericFacetSet)!=null?n:e}).addCase(le,(e,r)=>{let a=r.payload.nf||{};dc(e,a)}).addCase(Fr,(e,r)=>{let{facetId:a,selection:n}=r.payload;uc(e,a,n)}).addCase(Ia,(e,r)=>{let{facetId:a,selection:n}=r.payload;lc(e,a,n)}).addCase(Rr,(e,r)=>{let{facetId:a,values:n}=r.payload;cc(e,a,n)}).addCase(qs,(e,r)=>{Kr(e,r.payload)}).addCase(Ie,e=>{Object.keys(e).forEach(r=>{Kr(e,r)})}).addCase(Os,(e,r)=>{_n(e,r.payload)}).addCase(W.fulfilled,(e,r)=>{let a=r.payload.response.facets;$n(e,a,GS)}).addCase(X.fulfilled,(e,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];$n(e,a,GS)}).addCase(ve,(e,r)=>{Kr(e,r.payload)})});function DP(t){return{...ic,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...t}}function GS(t){return t.map(e=>{let{numberOfResults:r,...a}=e;return a})}function VP(t){return t.addReducers({numericFacetSet:it}),{deselectAllNumericFacetValues:qs,registerNumericFacet:$t,toggleSelectNumericFacetValue:Fr,toggleExcludeNumericFacetValue:Ia,updateNumericFacetSortCriterion:Os,updateNumericFacetValues:Rr}}var LP=new z({each:E,required:!0}),WS=(t,e)=>(C(t,E),lo(e)?C(e,E):C(e,LP),{payload:{contextKey:t,contextValue:e}}),Ba=S("context/set",t=>{for(let[e,r]of Object.entries(t))WS(e,r);return{payload:t}}),ja=S("context/add",t=>WS(t.contextKey,t.contextValue)),Ua=S("context/remove",t=>C(t,E));var fc=k(Wr(),t=>{t.addCase(Ba,(e,r)=>{e.contextValues=r.payload}).addCase(ja,(e,r)=>{e.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Ua,(e,r)=>{delete e.contextValues[r.payload]}).addCase(se.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.context.contextValues)})});function MP(t){return t.addReducers({context:fc}),{addContext:ja,removeContext:Ua,setContext:Ba}}function J(t){let e,r=new Map,a=()=>r.size===0,n=o=>{try{let i=JSON.stringify(o),s=e!==i;return e=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(o){o();let i=Symbol(),s;return a()&&(e=JSON.stringify(this.state),s=t.subscribe(()=>{n(this.state)&&r.forEach(u=>u())})),r.set(i,o),()=>{r.delete(i),a()&&s&&s()}},get state(){return{}}}}var NP=new B({url:new w({required:!0,url:!0}),additionalFields:new z({each:new w({emptyAllowed:!1})})});function YS(t,e={}){if(!QP(t))throw O;let r=J(t),{dispatch:a}=t,n=()=>t.state,o={...e.options};return be(t,NP,o,"buildProductListing"),a(fa({url:o.url})),o.additionalFields&&a(Qo({additionalFields:o.additionalFields})),{...r,get state(){let{products:i,error:s,isLoading:u,responseId:c,additionalFields:l,url:d}=n().productListing;return{products:i,error:s,isLoading:u,responseId:c,additionalFields:l,url:d}},setUrl:i=>a(fa({url:i})),setAdditionalFields:i=>a(Qo({additionalFields:i})),refresh:()=>a(X())}}function QP(t){return t.addReducers({productListing:Mt,configuration:G}),!0}var BP=new B({numberOfPages:new q({default:5,min:0})}),jP=new B({page:new q({min:1})});function up(t,e={}){if(!UP(t))throw O;let r=J(t),{dispatch:a}=t,n=be(t,BP,e.options,"buildPager"),i=$e(t,jP,e.initialState,"buildPager").page;i&&a(Rn(i));let s=()=>Yr(t.state),u=()=>{let{numberOfPages:l}=n;return Jd(t.state,l)},c=()=>$s(t.state);return{...r,get state(){let l=s(),d=c(),m=l>ka&&d>0,p=l<d;return{currentPage:l,currentPages:u(),maxPage:d,hasPreviousPage:m,hasNextPage:p}},selectPage(l){a(at(l))},nextPage(){a(bn())},previousPage(){a(An())},isCurrentPage(l){return l===this.state.currentPage}}}function UP(t){return t.addReducers({configuration:G,pagination:zt}),!0}function KS(t,e={}){let{dispatch:r}=t,a=up(t,e);return{...a,get state(){return a.state},selectPage(n){a.selectPage(n),r(X())},nextPage(){a.nextPage(),r(X())},previousPage(){a.previousPage(),r(X())}}}var _P=new B({numberOfResults:new q({min:0})});function lp(t,e={}){if(!$P(t))throw O;let r=J(t),{dispatch:a}=t,n=()=>t.state,i=$e(t,_P,e.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&a(vn(i)),{...r,get state(){return{numberOfResults:n().pagination.numberOfResults}},set(s){a(Fn(s))},isSetTo(s){return s===this.state.numberOfResults}}}function $P(t){return t.addReducers({pagination:zt,configuration:G}),!0}function JS(t,e={}){if(!HP(t))throw O;let r=lp(t,e),{dispatch:a}=t;return{...r,get state(){return{...r.state}},set(n){r.set(n),a(X()).then(()=>a(Qn()))}}}function HP(t){return t.addReducers({pagination:zt,configuration:G}),!0}function zP(t,e){if(!e)return;let r=new B({criterion:xh});$e(t,r,e,"buildSort")}function XS(t,e={}){var i;if(!GP(t))throw O;let{dispatch:r}=t,a=J(t),n=()=>t.state;zP(t,e.initialState);let o=(i=e.initialState)==null?void 0:i.criterion;return o&&r(jn(o)),{...a,sortBy(s){r(Un(s)),r(at(1)),r(X())},isSortedBy(s){return this.state.sort===s},get state(){return{sort:n().sort}}}}function GP(t){return t.addReducers({configuration:G,sort:ec}),!0}function ZS(t){if(!WP(t))throw O;let e=J(t),r=()=>t.state;return{...e,sort(a){return sa(a,this.state.facetIds)},get state(){return{facetIds:r().productListing.facets.results.map(o=>o.facetId)}}}}function WP(t){return t.addReducers({productListing:Mt,facetOptions:Ve}),!0}function mc(t,e,r){let{facetId:a}=e;if(t[a])return;let n=!1,o={...Rt,...e},i=r();t[a]={options:o,isLoading:n,response:i,initialNumberOfValues:o.numberOfValues,requestId:""}}function gc(t,e){let{facetId:r,...a}=e,n=t[r];!n||(n.options={...n.options,...a})}function hc(t,e,r){let a=t[e];!a||(a.requestId=r,a.isLoading=!0)}function Sc(t,e){let r=t[e];!r||(r.isLoading=!1)}function yc(t,e,r){let{facetId:a,response:n}=e,o=t[a];!o||o.requestId===r&&(o.isLoading=!1,o.response=n)}function oi(t,e,r){let{facetId:a}=e,n=t[a];!n||(n.requestId="",n.isLoading=!1,n.response=r(),n.options.numberOfValues=n.initialNumberOfValues,n.options.query=Rt.query)}function Cc(t,e){Object.keys(t).forEach(r=>oi(t,{facetId:r},e))}var Rt={captions:{},numberOfValues:10,query:""};var ey=async(t,e,r)=>{let a=e.categoryFacetSearchSet[t].options,n=e.categoryFacetSet[t].request,{captions:o,query:i,numberOfValues:s}=a,{field:u,delimitingCharacter:c,basePath:l,filterFacetCount:d}=n,m=YP(n),p=m.length?[m]:[],f=`*${i}*`;return{url:e.configuration.search.apiBaseUrl,accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")},basePath:l,captions:o,numberOfValues:s,query:f,field:u,delimitingCharacter:c,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await ke(e)).request}}},YP=t=>{let e=[],r=t.currentValues[0];for(;r;)e.push(r.value),r=r.children[0];return e};var ty=async(t,e,r)=>{let{captions:a,query:n,numberOfValues:o}=e.facetSearchSet[t].options,{field:i,currentValues:s,filterFacetCount:u}=e.facetSet[t].request,c=s.filter(d=>d.state!=="idle").map(d=>d.value),l=`*${n}*`;return{url:e.configuration.search.apiBaseUrl,accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,...e.configuration.search.authenticationProviders&&{authentication:e.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:o,query:l,field:i,ignoreValues:c,filterFacetCount:u,type:"specific",...r?{}:{searchContext:(await ke(e)).request}}};var ry=t=>async(e,{getState:r,extra:{apiClient:a,validatePayload:n}})=>{let o=r(),i;n(e,E),KP(o,e)?i=await ty(e,o,t):i=await ey(e,o,t);let s=await a.facetSearch(i);return{facetId:e,response:s}},bt=ee("facetSearch/executeSearch",ry(!1)),dp=ee("facetSearch/executeSearch",ry(!0)),Hn=S("facetSearch/clearResults",t=>C(t,{facetId:_})),KP=(t,e)=>t.facetSearchSet!==void 0&&t.facetSet!==void 0&&t.facetSet[e]!==void 0;function ii(){return{}}var zn=k(ii(),t=>{t.addCase(xs,(e,r)=>{let a=r.payload;mc(e,a,pp)}).addCase(Hr,(e,r)=>{gc(e,r.payload)}).addCase(bt.pending,(e,r)=>{let a=r.meta.arg;hc(e,a,r.meta.requestId)}).addCase(bt.rejected,(e,r)=>{let a=r.meta.arg;Sc(e,a)}).addCase(bt.fulfilled,(e,r)=>{yc(e,r.payload,r.meta.requestId)}).addCase(Hn,(e,{payload:r})=>{oi(e,r,pp)}).addCase(W.fulfilled,e=>{Cc(e,pp)})});function pp(){return{moreValuesAvailable:!1,values:[]}}var JP=t=>t.state==="selected",XP=t=>t.state==="excluded",ay=(t,e)=>{let r={facetId:t,facetValue:e.value};return JP(e)?ha(r):Ke(r)},ny=(t,e)=>{let r={facetId:t,facetValue:e.value};return XP(e)?ha(r):ys(r)};function _a(t,e){let r=t.dispatch,{options:a,getFacetSearch:n}=e,{facetId:o}=a;return{updateText(i){r(Hr({facetId:o,query:i,numberOfValues:n().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:i,options:s}=n();r(Hr({facetId:o,numberOfValues:s.numberOfValues+i})),r(e.isForFieldSuggestions?dp(o):bt(o))},search(){r(e.isForFieldSuggestions?dp(o):bt(o))},clear(){r(Hn({facetId:o}))},updateCaptions(i){r(Hr({facetId:o,captions:i}))},get state(){let{response:i,isLoading:s,options:u}=n(),{query:c}=u,l=i.values;return{...i,values:l,isLoading:s,query:c}}}}function xc(t,e){let{dispatch:r}=t,{options:a,select:n,exclude:o,isForFieldSuggestions:i}=e,{facetId:s}=a,u=()=>t.state.facetSearchSet[s];r(xs(a));let c=_a(t,{options:a,getFacetSearch:u,isForFieldSuggestions:i});return{...c,select(l){r(va({facetId:s,value:l})),n(l)},exclude(l){r($o({facetId:s,value:l})),o(l)},singleSelect(l){r(ye(s)),r(va({facetId:s,value:l})),n(l)},singleExclude(l){r(ye(s)),r($o({facetId:s,value:l})),o(l)},get state(){let{values:l}=c.state;return{...c.state,values:l.map(({count:d,displayValue:m,rawValue:p})=>({count:d,displayValue:m,rawValue:p}))}}}}var Yt=(t,e)=>{var r,a;return(a=(r=t.facetOptions.facets[e])==null?void 0:r.enabled)!=null?a:!0};var oy={facetId:_,selection:new I({values:ya})},iy=ee("facet/executeToggleSelect",({facetId:t,selection:e},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:t,selection:e},oy),a(Cr({facetId:t,selection:e})),a(ae())}),sy=ee("facet/executeToggleExclude",({facetId:t,selection:e},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:t,selection:e},oy),a(Fa({facetId:t,selection:e})),a(ae())});var cy=t=>t.state==="selected",uy=t=>t.state==="excluded";function ly(t,e){let{field:r,state:a}=t;if(!ZP(t))return r;let n=`${r}_`,o=ew(n,a);return rw(r,e),`${n}${o}`}function ZP(t){let{field:e,state:r}=t;return dy(r).some(n=>n&&e in n)}function ew(t,e){let a=dy(e).map(n=>Object.keys(n||{})).reduce((n,o)=>n.concat(o),[]);return tw(a,t)+1}function dy(t){let{facetSet:e,numericFacetSet:r,dateFacetSet:a,categoryFacetSet:n}=t;return[e,r,a,n]}function tw(t,e){let r=0,n=t.map(o=>{let i=o.split(e)[1],s=parseInt(i,10);return Number.isNaN(s)?r:s}).sort().pop();return n!=null?n:r}function rw(t,e){let r=`A facet with field "${t}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;e.warn(r)}function Je(t,e){let{state:r,logger:a}=t,{field:n,facetId:o}=e;return o||ly({field:n,state:r},a)}var Gn=["allValues","atLeastOneValue"];var Fc=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var py=new B({facetId:Qt,field:Bt,filterFacetCount:jt,injectionDepth:Ut,numberOfValues:vt,sortCriteria:new w({constrainTo:Fc}),resultsMustMatch:new w({constrainTo:Gn}),facetSearch:Sn});function fp(t,e,r=py){if(!aw(t))throw O;let{dispatch:a}=t,n=J(t),o=Je(t,e.options),i={...ac,...bi("facetSearch",e.options),field:e.options.field,facetId:o},s={facetSearch:{...Rt,...e.options.facetSearch},...i};be(t,r,s,"buildFacet");let u=()=>Dl(t.state,o),c=()=>Vl(t.state,o),l=()=>Vt(t.state),d=()=>Yt(t.state,o),m=()=>{let{currentValues:f}=u();return f.filter(g=>g.state!=="idle").length},p=()=>{let{currentValues:f}=u(),g=s.numberOfValues,x=!!f.find(R=>R.state==="idle");return g<f.length&&x};return a(yr(i)),{...n,toggleSelect:f=>a(iy({facetId:s.facetId,selection:f})),toggleExclude:f=>a(sy({facetId:s.facetId,selection:f})),toggleSingleSelect:function(f){f.state==="idle"&&a(ye(o)),this.toggleSelect(f)},toggleSingleExclude:function(f){f.state==="idle"&&a(ye(o)),this.toggleExclude(f)},isValueSelected:cy,isValueExcluded:uy,deselectAll(){a(ye(o)),a(ae())},sortBy(f){a(yn({facetId:o,criterion:f})),a(ae())},isSortedBy(f){return this.state.sortCriterion===f},showMoreValues(){let f=u().numberOfValues,g=s.numberOfValues,x=g-f%g,R=f+x;a(Ra({facetId:o,numberOfValues:R})),a(ba({facetId:o,isFieldExpanded:!0})),a(ae())},showLessValues(){let f=s.numberOfValues,g=Math.max(f,m());a(Ra({facetId:o,numberOfValues:g})),a(ba({facetId:o,isFieldExpanded:!1})),a(ae())},enable(){a(He(o))},disable(){a(ve(o))},get state(){let f=u(),g=c(),x=l(),R=d(),F;typeof f.sortCriteria=="object"?F=f.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":F=f.sortCriteria;let A=g?g.values:[],P=A.some(te=>te.state!=="idle"),N=g?g.moreValuesAvailable:!1,K=f.resultsMustMatch;return{facetId:o,values:A,sortCriterion:F,resultsMustMatch:K,isLoading:x,hasActiveValues:P,canShowMoreValues:N,canShowLessValues:p(),enabled:R}}}}function aw(t){return t.addReducers({facetSet:Pr,facetOptions:Ve,configuration:G,facetSearchSet:zn}),!0}function fy(t,e){if(!nw(t))throw O;let{dispatch:r}=t,a=fp(t,e),n=()=>a.state.facetId,i=(()=>{let{facetSearch:c}=e.options;return xc(t,{options:{facetId:n(),...c},select:l=>{r(ae()),r(X()).then(()=>Ke({facetId:n(),facetValue:l.rawValue}))},exclude:l=>{r(ae()),r(X()).then(()=>ys({facetId:n(),facetValue:l.rawValue}))},isForFieldSuggestions:!1})})(),{state:s,...u}=i;return{...a,facetSearch:u,toggleSelect:c=>{a.toggleSelect(c),r(X()),r(ay(n(),c))},toggleExclude:c=>{a.toggleExclude(c),r(X()),r(ny(n(),c))},deselectAll(){a.deselectAll(),r(X()),r(Ye(n()))},sortBy(c){a.sortBy(c),r(X()),r(Nt({facetId:n(),criterion:c}))},showMoreValues(){a.showMoreValues(),r(X()).then(()=>r(ln(n())))},showLessValues(){a.showLessValues(),r(X()).then(()=>r(dn(n())))},get state(){return{...a.state,facetSearch:i.state}}}}function nw(t){return t.addReducers({facetSet:Pr,configuration:G,facetSearchSet:zn}),!0}function Rc(){return{}}var Wn=k(Rc(),t=>{t.addCase(xa,(e,r)=>{let a=r.payload;mc(e,a,mp)}).addCase(Hr,(e,r)=>{gc(e,r.payload)}).addCase(bt.pending,(e,r)=>{let a=r.meta.arg;hc(e,a,r.meta.requestId)}).addCase(bt.rejected,(e,r)=>{let a=r.meta.arg;Sc(e,a)}).addCase(bt.fulfilled,(e,r)=>{yc(e,r.payload,r.meta.requestId)}).addCase(Hn,(e,{payload:{facetId:r}})=>{oi(e,{facetId:r},mp)}).addCase(W.fulfilled,e=>{Cc(e,mp)})});function mp(){return{moreValuesAvailable:!1,values:[]}}function gp(t,e){var a;let r=(a=e.payload)!=null?a:null;r&&(t.response=De().response,t.results=[],t.questionAnswer=Wa()),t.error=r,t.isLoading=!1}function hp(t,e){t.error=null,t.response=e.payload.response,t.queryExecuted=e.payload.queryExecuted,t.duration=e.payload.duration,t.isLoading=!1}function ow(t,e){hp(t,e),t.results=e.payload.response.results,t.searchResponseId=e.payload.response.searchUid,t.questionAnswer=e.payload.response.questionAnswer,t.extendedResults=e.payload.response.extendedResults}function Sp(t,e){t.isLoading=!0,t.requestId=e.meta.requestId}var ne=k(De(),t=>{t.addCase(Ko.rejected,(e,r)=>gp(e,r)),t.addCase(Xo.rejected,(e,r)=>gp(e,r)),t.addCase(Jo.rejected,(e,r)=>gp(e,r)),t.addCase(Ko.fulfilled,(e,r)=>{ow(e,r)}),t.addCase(Xo.fulfilled,(e,r)=>{hp(e,r),e.results=[...e.results,...r.payload.response.results]}),t.addCase(Jo.fulfilled,(e,r)=>{hp(e,r),e.results=r.payload.response.results}),t.addCase(Ld.fulfilled,(e,r)=>{e.response.facets=r.payload.response.facets,e.response.searchUid=r.payload.response.searchUid}),t.addCase(Ko.pending,Sp),t.addCase(Xo.pending,Sp),t.addCase(Jo.pending,Sp)});var my=["alphanumeric","occurrences"];var gy=new B({field:Bt,basePath:aS,delimitingCharacter:nS,facetId:Qt,facetSearch:Sn,filterByBasePath:oS,filterFacetCount:jt,injectionDepth:Ut,numberOfValues:vt,sortCriteria:new w({constrainTo:my})});function yp(t,e){if(!iw(t))throw O;let r=J(t),{dispatch:a}=t,n=Je(t,e.options),o={...oc,...bi("facetSearch",e.options),field:e.options.field,facetId:n},i={facetSearch:{...Rt,...e.options.facetSearch},...o};be(t,gy,i,"buildCategoryFacet");let s=()=>Ll(t.state,n),u=()=>Jg(t.state,n),c=()=>Vt(t.state),l=()=>Yt(t.state,n);return a(mr(o)),{...r,toggleSelect(d){let m=i.numberOfValues;a($r({facetId:n,selection:d,retrieveCount:m})),a(ae())},deselectAll(){a(gr(n)),a(ae())},sortBy(d){a(mn({facetId:n,criterion:d})),a(ae())},isSortedBy(d){return s().sortCriteria===d},showMoreValues(){var g;let{numberOfValues:d}=i,{activeValue:m,valuesAsTrees:p}=this.state,f=((g=m==null?void 0:m.children.length)!=null?g:p.length)+d;a(Ca({facetId:n,numberOfValues:f})),a(ae())},showLessValues(){let{numberOfValues:d}=i;a(Ca({facetId:n,numberOfValues:d})),a(ae())},enable(){a(He(n))},disable(){a(ve(n))},get state(){var Y,j,ge,Ce;let d=s(),m=u(),p=c(),f=l(),g=(Y=m==null?void 0:m.values)!=null?Y:[],x=(j=g.some(Q=>Q.children.length>0))!=null?j:!1,{parents:R,values:F}=Kg(m==null?void 0:m.values),A=yt(g),P=A.length?A[A.length-1]:void 0,N=!!P,K=(Ce=(ge=P==null?void 0:P.moreValuesAvailable)!=null?ge:m==null?void 0:m.moreValuesAvailable)!=null?Ce:!1,te=P?P.children.length>i.numberOfValues:g.length>i.numberOfValues;return{facetId:n,parents:R,selectedValueAncestry:A,values:F,isHierarchical:x,valuesAsTrees:g,activeValue:P,isLoading:p,hasActiveValues:N,canShowMoreValues:K,canShowLessValues:te,sortCriteria:d.sortCriteria,enabled:f}}}}function iw(t){return t.addReducers({categoryFacetSet:wr,categoryFacetSearchSet:Wn,facetOptions:Ve,configuration:G,search:ne}),!0}function Cp(t,e){let{dispatch:r}=t,a={...Rt,...e.options},{facetId:n}=a,o=()=>t.state.categoryFacetSearchSet[n];r(xa(a));let i=_a(t,{options:a,getFacetSearch:o,isForFieldSuggestions:e.isForFieldSuggestions});return{...i,select(s){r(gn({facetId:n,value:s}))},get state(){return i.state}}}function hy(t,e){let{dispatch:r}=t,a={...Rt,...e.options},{facetId:n}=a,o=()=>t.state.categoryFacetSearchSet[n],i=Cp(t,{options:{...a},isForFieldSuggestions:!1});r(xa(a));let s=_a(t,{options:a,getFacetSearch:o,isForFieldSuggestions:!1});return{...s,...i,select:u=>{i.select(u),r(ae()),r(X()).then(()=>Ke({facetId:n,facetValue:u.rawValue}))},get state(){return{...s.state,...i.state}}}}function Sy(t,e){if(!sw(t))throw O;let r=yp(t,e),{dispatch:a}=t,n=()=>r.state.facetId,o=hy(t,{options:{facetId:n(),...e.options.facetSearch},isForFieldSuggestions:!1}),{state:i,...s}=o;return{...r,facetSearch:s,toggleSelect:u=>{r.toggleSelect(u),a(X()),a(cw(n(),u))},deselectAll:()=>{r.deselectAll(),a(X()).then(()=>a(Ye(n())))},sortBy(u){r.sortBy(u),a(X()).then(()=>a(Nt({facetId:n(),criterion:u})))},showMoreValues(){r.showMoreValues(),a(X()).then(()=>a(ln(n())))},showLessValues(){r.showLessValues(),a(X()).then(()=>a(dn(n())))},get state(){return{...r.state,facetSearch:o.state}}}}function sw(t){return t.addReducers({categoryFacetSet:wr,categoryFacetSearchSet:Wn,configuration:G,productListing:Mt}),!0}function cw(t,e){let r={facetId:t,facetValue:e.value};return e.state==="selected"?ha(r):Ke(r)}var xp=t=>t.state==="selected",yy=t=>t.state==="excluded",Yn=(t,e)=>{let r=`${e.start}..${e.end}`,a={facetId:t,facetValue:r};return xp(e)?Ma(a):ft(a)};var bc=S("rangeFacet/executeToggleSelect",t=>C(t,wa(t.selection))),Ac=S("rangeFacet/executeToggleExclude",t=>C(t,wa(t.selection)));var Cy={facetId:_,selection:new I({values:Pa})},xy=ee("dateFacet/executeToggleSelect",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,Cy),e(xr(t)),e(bc(t)),e(ae())}),vy=ee("dateFacet/executeToggleExclude",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,Cy),e(Ea(t)),e(Ac(t)),e(ae())});function Pc(t,e){let{facetId:r,getRequest:a}=e,n=J(t),o=t.dispatch,i=()=>Yt(t.state,r);return{...n,isValueSelected:xp,isValueExcluded:yy,deselectAll(){o(ye(r)),o(ae())},sortBy(s){o(xn({facetId:r,criterion:s})),o(ae())},isSortedBy(s){return this.state.sortCriterion===s},enable(){o(He(r))},disable(){o(ve(r))},get state(){let s=a(),u=Dt(t.state,r),c=s.sortCriteria,l=s.resultsMustMatch,d=u?u.values:[],m=Vt(t.state),p=i(),f=d.some(g=>g.state!=="idle");return{facetId:r,values:d,sortCriterion:c,resultsMustMatch:l,hasActiveValues:f,isLoading:m,enabled:p}}}}function wc(t,e){if(!t.generateAutomaticRanges&&t.currentValues===void 0){let r=`currentValues should be specified for ${e} when generateAutomaticRanges is false.`;throw new Error(r)}}var Ec=["idle","selected","excluded"];var Ic=["ascending","descending"],kc=["even","equiprobable"];var uw={start:new w,end:new w,endInclusive:new H,state:new w({constrainTo:Ec})},lw=new B({facetId:Qt,field:Bt,generateAutomaticRanges:bs,filterFacetCount:jt,injectionDepth:Ut,numberOfValues:vt,currentValues:new z({each:new I({values:uw})}),sortCriteria:new w({constrainTo:Ic}),rangeAlgorithm:new w({constrainTo:kc})});function Oc(t,e){be(t,lw,e,"buildDateFacet"),ws(e)}function vp(t,e){if(!dw(t))throw O;wc(e.options,"buildDateFacet");let r=t.dispatch,a=Je(t,e.options),n={currentValues:[],...e.options,facetId:a};Oc(t,n),r(_t(n));let o=Pc(t,{facetId:a,getRequest:()=>t.state.dateFacetSet[a].request});return{...o,toggleSelect:i=>r(xy({facetId:a,selection:i})),toggleSingleSelect:function(i){i.state==="idle"&&r(ye(a)),this.toggleSelect(i)},toggleExclude:i=>r(vy({facetId:a,selection:i})),toggleSingleExclude:function(i){i.state==="idle"&&r(ye(a)),this.toggleExclude(i)},get state(){return o.state}}}function dw(t){return t.addReducers({configuration:G,search:ne,dateFacetSet:Wt,facetOptions:Ve}),!0}function Fy(t,e){let r=vp(t,e),a=t.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(X()).then(()=>a(Ye(n())))},sortBy(o){r.sortBy(o),a(X()).then(()=>a(Nt({facetId:n(),criterion:o})))},toggleSelect:o=>{r.toggleSelect(o),a(X()).then(()=>a(Yn(n(),o)))},get state(){return r.state}}}function pw(t,e){return!!e&&e.facetId in t.dateFacetSet}var fw=(t,e)=>{let r=Dt(t,e);if(pw(t,r))return r},Ry=(t,e)=>(fw(t,e)||{values:[]}).values.filter(a=>a.state==="selected");function Fp(t,e){var u;if(!mw(t))throw O;let r=J(t),{dispatch:a}=t,n=()=>t.state,o=Je(t,e.options),i={...e.options,currentValues:((u=e.initialState)==null?void 0:u.range)?[{...e.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Oc(t,i),a(_t(i));let s=()=>Yt(t.state,o);return{...r,clear:()=>{a(vr({facetId:o,values:[]})),a(ae())},setRange:c=>{let l={...c,state:"selected",numberOfResults:0,endInclusive:!0},d=vr({facetId:o,values:[l]});return d.error?!1:(a(d),a(ae()),!0)},enable(){a(He(o))},disable(){a(ve(o))},get state(){let c=Vt(n()),l=s(),d=Ry(n(),o),m=d.length?d[0]:void 0;return{facetId:o,isLoading:c,range:m,enabled:l}}}}function mw(t){return t.addReducers({dateFacetSet:Wt,facetOptions:Ve,configuration:G,search:ne}),!0}function by(t,e){if(!gw(t))throw O;let r=Fp(t,e),{dispatch:a}=t,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(X()).then(()=>a(Ye(n())))},setRange:o=>{let i=r.setRange(o);return i&&a(X()).then(()=>a(Ke({facetId:n(),facetValue:`${o.start}..${o.end}`}))),i},get state(){return{...r.state}}}}function gw(t){return t.addReducers({dateFacetSet:Wt,configuration:G,search:ne}),!0}var Ay={facetId:_,selection:new I({values:Aa})},Py=ee("numericFacet/executeToggleSelect",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,Ay),e(Fr(t)),e(bc(t)),e(ae())}),t3=ee("numericFacet/executeToggleExclude",(t,{dispatch:e,extra:{validatePayload:r}})=>{r(t,Ay),e(Ia(t)),e(Ac(t)),e(ae())});var hw={start:new q,end:new q,endInclusive:new H,state:new w({constrainTo:Ec})},Sw=new B({facetId:Qt,field:Bt,generateAutomaticRanges:bs,filterFacetCount:jt,injectionDepth:Ut,numberOfValues:vt,currentValues:new z({each:new I({values:hw})}),sortCriteria:new w({constrainTo:Ic}),resultsMustMatch:new w({constrainTo:Gn}),rangeAlgorithm:new w({constrainTo:kc})});function qc(t,e){be(t,Sw,e,"buildNumericFacet"),ks(e)}function $a(t){return{endInclusive:!1,state:"idle",...t}}function Rp(t,e){if(!yw(t))throw O;wc(e.options,"buildNumericFacet");let r=t.dispatch,a=Je(t,e.options),n={currentValues:[],...e.options,facetId:a};qc(t,n),r($t(n));let o=Pc(t,{facetId:a,getRequest:()=>t.state.numericFacetSet[a].request});return{...o,toggleSelect:i=>r(Py({facetId:a,selection:i})),toggleSingleSelect(i){i.state==="idle"&&r(ye(a)),this.toggleSelect(i)},get state(){return o.state}}}function yw(t){return t.addReducers({numericFacetSet:it,facetOptions:Ve,configuration:G,search:ne}),!0}function wy(t,e){if(!Cw(t))throw O;let r=Rp(t,e),a=t.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(X()).then(()=>a(Ye(n())))},sortBy(o){r.sortBy(o),a(X()).then(()=>a(Nt({facetId:n(),criterion:o})))},toggleSelect:o=>{r.toggleSelect(o),a(X()).then(()=>a(Yn(n(),o)))},get state(){return{...r.state}}}}function Cw(t){return t.addReducers({numericFacetSet:it,configuration:G,search:ne}),!0}function xw(t,e){return!!e&&e.facetId in t.numericFacetSet}var vw=(t,e)=>{let r=Dt(t,e);if(xw(t,r))return r};var Ey=(t,e)=>(vw(t,e)||{values:[]}).values.filter(a=>a.state==="selected");function bp(t,e){var u;if(!Fw(t))throw O;let r=J(t),{dispatch:a}=t,n=()=>t.state,o=Je(t,e.options),i={...e.options,currentValues:((u=e.initialState)==null?void 0:u.range)?[{...e.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};qc(t,i),a($t(i));let s=()=>Yt(t.state,o);return{...r,clear:()=>{a(Rr({facetId:o,values:[]})),a(ae())},setRange:c=>{let l={...c,state:"selected",numberOfResults:0,endInclusive:!0},d=Rr({facetId:o,values:[l]});return d.error?!1:(a(d),a(ae()),!0)},enable(){a(He(o))},disable(){a(ve(o))},get state(){let c=Vt(n()),l=s(),d=Ey(n(),o),m=d.length?d[0]:void 0;return{facetId:o,isLoading:c,range:m,enabled:l}}}}function Fw(t){return t.addReducers({numericFacetSet:it,facetOptions:Ve,configuration:G,search:ne}),!0}function Iy(t,e){if(!Rw(t))throw O;let r=bp(t,e),{dispatch:a}=t,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(X()).then(()=>a(Ye(n())))},setRange:o=>{let i=r.setRange(o);return i&&a(X()).then(()=>a(Ke({facetId:n(),facetValue:`${o.start}..${o.end}`}))),i},get state(){return{...r.state}}}}function Rw(t){return t.addReducers({numericFacetSet:it,configuration:G,search:ne}),!0}var bw=["caseId","caseNumber"],Aw={caseId:"caseContext",caseNumber:"caseContext"},Tc=class extends Error{constructor(e){super(`The key "${e}" is reserved for internal use. Use ${Aw[e]} to set this value.}`)}};function Ap(t){return bw.includes(t)}var Pw=new B({values:new I({options:{required:!1}})});function ky(t,e={}){if(!Iw(t))throw O;let r=J(t),{dispatch:a}=t,n=()=>t.state,o=$e(t,Pw,e.initialState,"buildContext");return o.values&&a(Ba(o.values)),{...r,get state(){return{values:n().context.contextValues}},set(i){a(Ba(i))},...n().configuration.analytics.analyticsMode==="legacy"?ww(a):Ew(a)}}var ww=t=>({add(e,r){t(ja({contextKey:e,contextValue:r}))},remove(e){t(Ua(e))}}),Ew=t=>({add(e,r){if(Ap(e))throw new Tc(e);t(ja({contextKey:e,contextValue:r}))},remove(e){if(Ap(e))throw new Tc(e);t(Ua(e))}});function Iw(t){return t.addReducers({context:fc}),!0}function Pp(t,e){return ky(t,e)}var Zw=Pe(Uo()),eE=Pe(Vy());function Kn(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var S4=new I({options:{required:!1},values:{by:new Ze({enum:Ue,required:!0}),fields:new z({each:new I({values:{field:new w({required:!0}),direction:new Ze({enum:da}),displayName:new w}})})}});var Gw=Pe(Uo());var Dc=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function Vc(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Dc(),originalQuery:"",automaticallyCorrectQuery:!0}}var Ip=["author","language","urihash","objecttype","collection","source","permanentid"],My=[...Ip,"date","filetype","parents"],Ww=[...My,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],si=()=>({fieldsToInclude:Ip,fetchAllFields:!1,fieldsDescription:[]});var Jn=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function ci(){return{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1,feedbackSubmitted:!1}}var kp=()=>({});var ui=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var Yw=Pe(Uo());var Op=t=>({past:[],present:t,future:[]}),Kw=t=>{let{past:e,present:r,future:a}=t;if(!r||e.length===0)return t;let n=e[e.length-1];return{past:e.slice(0,e.length-1),present:n,future:[r,...a]}},Jw=t=>{let{past:e,present:r,future:a}=t;if(!r||a.length===0)return t;let n=a[0],o=a.slice(1);return{past:[...e,r],present:n,future:o}},Xw=t=>{let{action:e,state:r,reducer:a}=t,{past:n,present:o}=r,i=a(o,e);return o?o===i?r:{past:[...n,o],present:i,future:[]}:Op(i)},Ny=t=>{let{actionTypes:e,reducer:r}=t,a=Op();return(n=a,o)=>{switch(o.type){case e.undo:return Kw(n);case e.redo:return Jw(n);case e.snapshot:return Xw({state:n,reducer:r,action:o});default:return n}}};function qp(){return{length:void 0}}function Tp(){return{queries:[],maxLength:10}}function Dp(){return{results:[],maxLength:10}}function Vp(){return{}}var Lp=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});function Lc(t={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...t}}var s8={title:"example documentTitle",uri:"example documentUri",printableUri:"printable-uri",clickUri:"example documentUrl",uniqueId:"unique-id",excerpt:"excerpt",firstSentences:"first-sentences",flags:"flags",rankingModifier:"example rankingModifier",raw:Lc({urihash:"example documentUriHash",source:"example sourceName",collection:"example collectionName",permanentid:"example contentIDValue"})};var By=1;var Mc=S("debug/enable"),Nc=S("debug/disable");var Mp=k(br(),t=>{t.addCase(Mc,()=>!0).addCase(Nc,()=>!1).addCase(le,(e,r)=>{var a;return(a=r.payload.debug)!=null?a:e})});var Qc=S("pipeline/set",t=>C(t,new w({required:!0,emptyAllowed:!0})));var Np=k(Br(),t=>{t.addCase(Qc,(e,r)=>r.payload).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.pipeline)!=null?n:e}).addCase(pr,(e,r)=>r.payload.pipeline||e)});var Bc=S("searchHub/set",t=>C(t,new w({required:!0,emptyAllowed:!0})));var Qp=k(We(),t=>{t.addCase(Bc,(e,r)=>r.payload).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.searchHub)!=null?n:e}).addCase(pr,(e,r)=>r.payload.searchHub||e)});var nE=Pe(Lu());var oE=new B({...Ss,search:new I({options:{required:!1},values:{pipeline:new w({required:!1,emptyAllowed:!0}),searchHub:Se,locale:Se,timezone:Se,authenticationProviders:new z({required:!1,each:E})}})});var cE=new z({each:E,required:!0}),li=S("fields/registerFieldsToInclude",t=>C(t,cE)),jc=S("fields/fetchall/enable"),Uc=S("fields/fetchall/disable"),_c=ee("fields/fetchDescription",async(t,{extra:e,getState:r,rejectWithValue:a})=>{let n=r(),{accessToken:o,organizationId:i}=n.configuration,{apiBaseUrl:s}=n.configuration.search,u=await e.apiClient.fieldDescriptions({accessToken:o,organizationId:i,url:s});return Fe(u)?a(u.error):u.success.fields});var Bp={collectionField:new w({emptyAllowed:!1,required:!1}),parentField:new w({emptyAllowed:!1,required:!1}),childField:new w({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new q({min:0,required:!1})},Xn=S("folding/register",t=>C(t,Bp)),Zn=ee("folding/loadCollection",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:a}})=>{let n=e(),o=await Gr(n),i=await a.search({...o,q:uE(n),enableQuerySyntax:!0,cq:`@${n.folding.fields.collection}="${t}"`,filterField:n.folding.fields.collection,childField:n.folding.fields.parent,parentField:n.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Fe(i)?r(i.error):{collectionId:t,results:i.success.results,rootResult:n.folding.collections[t].result}});function uE(t){return t.query.q===""?"":t.query.enableQuerySyntax?`${t.query.q} OR @uri`:`( <@- ${t.query.q} -@> ) OR @uri`}var $c=k(si(),t=>t.addCase(li,(e,r)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(r.payload))]}).addCase(jc,e=>{e.fetchAllFields=!0}).addCase(Uc,e=>{e.fetchAllFields=!1}).addCase(_c.fulfilled,(e,{payload:r})=>{e.fieldsDescription=r}).addCase(Xn,(e,{payload:r})=>{var n,o,i;let a=Jn().fields;e.fieldsToInclude.push((n=r.collectionField)!=null?n:a.collection,(o=r.parentField)!=null?o:a.parent,(i=r.childField)!=null?i:a.child)}));var AX=new B({enabled:new H({default:!1})});var Hc=S("dictionaryFieldContext/set",t=>{let e=new I({options:{required:!0}}),r=C(t,e).error;if(r)return{payload:t,error:r};let a=Object.values(t),n=new z({each:me}),o=C(a,n).error;return o?{payload:t,error:o}:{payload:t}}),zc=S("dictionaryFieldContext/add",t=>{let e=new I({options:{required:!0},values:{field:me,key:me}});return C(t,e)}),Gc=S("dictionaryFieldContext/remove",t=>C(t,me));var jy=k(Oa(),t=>{t.addCase(Hc,(e,r)=>{e.contextValues=r.payload}).addCase(zc,(e,r)=>{let{field:a,key:n}=r.payload;e.contextValues[a]=n}).addCase(Gc,(e,r)=>{delete e.contextValues[r.payload]}).addCase(se.fulfilled,(e,r)=>{!r.payload||(e.contextValues=r.payload.dictionaryFieldContext.contextValues)})});var Uy=k(Vc(),t=>{t.addCase(Ms,e=>{e.enableDidYouMean=!0}).addCase(wd,e=>{e.enableDidYouMean=!1}).addCase(Ed,e=>{e.automaticallyCorrectQuery=!0}).addCase(Ns,e=>{e.automaticallyCorrectQuery=!1}).addCase(W.pending,e=>{e.queryCorrection=Dc(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""}).addCase(W.fulfilled,(e,r)=>{e.queryCorrection=r.payload.response.queryCorrections[0]||Dc(),e.originalQuery=r.payload.originalQuery,e.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(Ht,(e,r)=>{e.wasCorrectedTo=r.payload})});var dE=new B({facetId:Qt,field:Bt,filterFacetCount:jt,injectionDepth:Ut,numberOfValues:vt,sortCriteria:new w({constrainTo:Fc}),resultsMustMatch:new w({constrainTo:Gn}),facetSearch:Sn,allowedValues:As,hasBreadcrumbs:iS,customSort:Ps});var _y=t=>{let e=gE(t),{view:r,user:a,...n}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,...n,context:{user:a,view:r,cart:t.cart.cartItems.map(o=>t.cart.cart[o])},facets:e,...t.commercePagination&&{page:t.commercePagination.page},...t.commerceSort&&{sort:hE(t.commerceSort.appliedSort)}}};function gE(t){return!t.facetOrder||!t.commerceFacetSet?[]:t.facetOrder.map(e=>t.commerceFacetSet[e].request).filter(e=>e.values.length>0)}function hE(t){if(!!t)return t.by===Ue.Relevance?{sortCriteria:Ue.Relevance}:{sortCriteria:Ue.Fields,fields:t.fields.map(({name:e,direction:r})=>({field:e,direction:r}))}}var $y=()=>Sh("analytics/commerce/productListing/load",t=>t.makeInterfaceLoad(),t=>new nn(t));var Hy=ee("commerce/productListing/fetch",async(t,{getState:e,dispatch:r,rejectWithValue:a,extra:n})=>{let o=e(),{apiClient:i}=n,s=await i.getProductListing(_y(o));return Fe(s)?(r(lt(s.error)),a(s.error)):{response:s.success,analyticsAction:$y()}});var zy=k(Ta(),t=>{t.addCase(W.fulfilled,(e,r)=>r.payload.response.facets.map(a=>a.facetId)).addCase(Hy.fulfilled,(e,r)=>{let a=n=>{var o;return(o=n.facetId)!=null?o:n.field};return r.payload.response.facets.map(a)}).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOrder)!=null?n:e})});var SE=Object.getOwnPropertyNames,yE=Object.getOwnPropertySymbols,CE=Object.prototype.hasOwnProperty;function Gy(t,e){return function(a,n,o){return t(a,n,o)&&e(a,n,o)}}function Wc(t){return function(r,a,n){if(!r||!a||typeof r!="object"||typeof a!="object")return t(r,a,n);var o=n.cache,i=o.get(r),s=o.get(a);if(i&&s)return i===a&&s===r;o.set(r,a),o.set(a,r);var u=t(r,a,n);return o.delete(r),o.delete(a),u}}function Wy(t){return SE(t).concat(yE(t))}var Yy=Object.hasOwn||function(t,e){return CE.call(t,e)};function eo(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var Ky="_owner",Jy=Object.getOwnPropertyDescriptor,Xy=Object.keys;function xE(t,e,r){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(!r.equals(t[a],e[a],a,a,t,e,r))return!1;return!0}function vE(t,e){return eo(t.getTime(),e.getTime())}function Zy(t,e,r){if(t.size!==e.size)return!1;for(var a={},n=t.entries(),o=0,i,s;(i=n.next())&&!i.done;){for(var u=e.entries(),c=!1,l=0;(s=u.next())&&!s.done;){var d=i.value,m=d[0],p=d[1],f=s.value,g=f[0],x=f[1];!c&&!a[l]&&(c=r.equals(m,g,o,l,t,e,r)&&r.equals(p,x,m,g,t,e,r))&&(a[l]=!0),l++}if(!c)return!1;o++}return!0}function FE(t,e,r){var a=Xy(t),n=a.length;if(Xy(e).length!==n)return!1;for(var o;n-- >0;)if(o=a[n],o===Ky&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Yy(e,o)||!r.equals(t[o],e[o],o,o,t,e,r))return!1;return!0}function di(t,e,r){var a=Wy(t),n=a.length;if(Wy(e).length!==n)return!1;for(var o,i,s;n-- >0;)if(o=a[n],o===Ky&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Yy(e,o)||!r.equals(t[o],e[o],o,o,t,e,r)||(i=Jy(t,o),s=Jy(e,o),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function RE(t,e){return eo(t.valueOf(),e.valueOf())}function bE(t,e){return t.source===e.source&&t.flags===e.flags}function eC(t,e,r){if(t.size!==e.size)return!1;for(var a={},n=t.values(),o,i;(o=n.next())&&!o.done;){for(var s=e.values(),u=!1,c=0;(i=s.next())&&!i.done;)!u&&!a[c]&&(u=r.equals(o.value,i.value,o.value,i.value,t,e,r))&&(a[c]=!0),c++;if(!u)return!1}return!0}function AE(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var PE="[object Arguments]",wE="[object Boolean]",EE="[object Date]",IE="[object Map]",kE="[object Number]",OE="[object Object]",qE="[object RegExp]",TE="[object Set]",DE="[object String]",VE=Array.isArray,tC=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,rC=Object.assign,LE=Object.prototype.toString.call.bind(Object.prototype.toString);function ME(t){var e=t.areArraysEqual,r=t.areDatesEqual,a=t.areMapsEqual,n=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,i=t.areRegExpsEqual,s=t.areSetsEqual,u=t.areTypedArraysEqual;return function(l,d,m){if(l===d)return!0;if(l==null||d==null||typeof l!="object"||typeof d!="object")return l!==l&&d!==d;var p=l.constructor;if(p!==d.constructor)return!1;if(p===Object)return n(l,d,m);if(VE(l))return e(l,d,m);if(tC!=null&&tC(l))return u(l,d,m);if(p===Date)return r(l,d,m);if(p===RegExp)return i(l,d,m);if(p===Map)return a(l,d,m);if(p===Set)return s(l,d,m);var f=LE(l);return f===EE?r(l,d,m):f===qE?i(l,d,m):f===IE?a(l,d,m):f===TE?s(l,d,m):f===OE?typeof l.then!="function"&&typeof d.then!="function"&&n(l,d,m):f===PE?n(l,d,m):f===wE||f===kE||f===DE?o(l,d,m):!1}}function NE(t){var e=t.circular,r=t.createCustomConfig,a=t.strict,n={areArraysEqual:a?di:xE,areDatesEqual:vE,areMapsEqual:a?Gy(Zy,di):Zy,areObjectsEqual:a?di:FE,arePrimitiveWrappersEqual:RE,areRegExpsEqual:bE,areSetsEqual:a?Gy(eC,di):eC,areTypedArraysEqual:a?di:AE};if(r&&(n=rC({},n,r(n))),e){var o=Wc(n.areArraysEqual),i=Wc(n.areMapsEqual),s=Wc(n.areObjectsEqual),u=Wc(n.areSetsEqual);n=rC({},n,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:u})}return n}function QE(t){return function(e,r,a,n,o,i,s){return t(e,r,s)}}function BE(t){var e=t.circular,r=t.comparator,a=t.createState,n=t.equals,o=t.strict;if(a)return function(u,c){var l=a(),d=l.cache,m=d===void 0?e?new WeakMap:void 0:d,p=l.meta;return r(u,c,{cache:m,equals:n,meta:p,strict:o})};if(e)return function(u,c){return r(u,c,{cache:new WeakMap,equals:n,meta:void 0,strict:o})};var i={cache:void 0,equals:n,meta:void 0,strict:o};return function(u,c){return r(u,c,i)}}var Kee=Kt(),Jee=Kt({strict:!0}),Xee=Kt({circular:!0}),Zee=Kt({circular:!0,strict:!0}),ete=Kt({createInternalComparator:function(){return eo}}),tte=Kt({strict:!0,createInternalComparator:function(){return eo}}),rte=Kt({circular:!0,createInternalComparator:function(){return eo}}),ate=Kt({circular:!0,createInternalComparator:function(){return eo},strict:!0});function Kt(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,a=t.createInternalComparator,n=t.createState,o=t.strict,i=o===void 0?!1:o,s=NE(t),u=ME(s),c=a?a(u):QE(u);return BE({circular:r,comparator:u,createState:n,equals:c,strict:i})}function Yc(t,e,r=(a,n)=>a===n){return t.length===e.length&&t.findIndex((a,n)=>!r(e[n],a))===-1}function jE(t,e){return t.length!==e.length?!1:t.every(r=>e.findIndex(a=>jp(r,a))!==-1)}var jp=Kt({createCustomConfig:t=>({...t,areArraysEqual:jE})});var UE=k(Od(),t=>{t.addCase(Ft,(e,r)=>_E(e,r.payload)?void 0:r.payload)}),_E=(t,e)=>$E(t.context,e.context)&&HE(t.dictionaryFieldContext,e.dictionaryFieldContext)&&XE(t.advancedSearchQueries,e.advancedSearchQueries)&&zE(t.tabSet,e.tabSet)&&GE(t.staticFilterSet,e.staticFilterSet)&&Up(t.facetSet,e.facetSet)&&Up(t.dateFacetSet,e.dateFacetSet)&&Up(t.numericFacetSet,e.numericFacetSet)&&YE(t.automaticFacetSet,e.automaticFacetSet)&&WE(t.categoryFacetSet,e.categoryFacetSet)&&KE(t.pagination,e.pagination)&&JE(t.query,e.query)&&ZE(t,e)&&eI(t.pipeline,e.pipeline)&&tI(t.searchHub,e.searchHub)&&rI(t.facetOrder,e.facetOrder)&&aI(t.debug,e.debug),$E=(t,e)=>JSON.stringify(t.contextValues)===JSON.stringify(e.contextValues),HE=(t,e)=>JSON.stringify(t.contextValues)===JSON.stringify(e.contextValues),zE=(t,e)=>{let r=aC(t),a=aC(e);return(r==null?void 0:r.id)===(a==null?void 0:a.id)},aC=t=>Object.values(t).find(e=>e.isActive),GE=(t,e)=>{for(let[r,a]of Object.entries(e)){if(!t[r])return!1;let n=nC(t[r]),o=nC(a);if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},nC=t=>t.values.filter(e=>e.state!=="idle"),Up=(t,e)=>{for(let[r,a]of Object.entries(e)){if(!t[r])return!1;let n=t[r].request.currentValues.filter(i=>i.state!=="idle"),o=a.request.currentValues.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},WE=(t,e)=>{var r;for(let[a,n]of Object.entries(e)){if(!t[a])return!1;let o=yt((r=t[a])==null?void 0:r.request.currentValues).map(({value:s})=>s),i=yt(n==null?void 0:n.request.currentValues).map(({value:s})=>s);if(JSON.stringify(o)!==JSON.stringify(i))return!1}return!0},YE=(t,e)=>{for(let[r,a]of Object.entries(e.set)){if(!t.set[r])return!1;let n=t.set[r].response.values.filter(i=>i.state!=="idle"),o=a.response.values.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},KE=(t,e)=>t.firstResult===e.firstResult&&t.numberOfResults===e.numberOfResults,JE=(t,e)=>JSON.stringify(t)===JSON.stringify(e),XE=(t,e)=>JSON.stringify(t)===JSON.stringify(e),ZE=(t,e)=>t.sortCriteria===e.sortCriteria,eI=(t,e)=>t===e,tI=(t,e)=>t===e,rI=(t,e)=>Yc(t,e),aI=(t,e)=>t===e,oC=Ny({actionTypes:{redo:bd.type,undo:Rd.type,snapshot:Ft.type},reducer:UE});var Rre=new B({fieldsToInclude:new z({required:!1,each:new w({required:!0,emptyAllowed:!1})})});var oI={results:new z({required:!0,each:new I({values:jr})}),maxLength:new q({required:!0,min:1,default:10})},Kc=S("recentResults/registerRecentResults",t=>C(t,oI)),Ha=S("recentResults/pushRecentResult",t=>(Ur(t),{payload:t})),Jc=S("recentResults/clearRecentResults");function Er(t,e,r){if(!iI(t))throw O;let a=1e3,n={selectionDelay:a,debounceWait:a,...e.options},o;return{select:ps(r,n.debounceWait,{isImmediate:!0}),beginDelayedSelect(){o=setTimeout(r,n.selectionDelay)},cancelPendingSelect(){o&&clearTimeout(o)}}}function iI(t){return t.addReducers({configuration:G}),!0}var pi={id:E},Xc=S("querySuggest/register",t=>C(t,{...pi,count:new q({min:0})})),sC=S("querySuggest/unregister",t=>C(t,pi)),za=S("querySuggest/selectSuggestion",t=>C(t,{...pi,expression:me})),Zc=S("querySuggest/clear",t=>C(t,pi)),to=ee("querySuggest/fetch",async(t,{getState:e,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(t,pi);let o=t.id,i=await cI(o,e()),s=await a.querySuggest(i);return Fe(s)?r(s.error):{id:o,q:i.q,...s.success}}),cI=async(t,e)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,count:e.querySuggest[t].count,q:e.querySet[t],locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,actionsHistory:e.configuration.analytics.enabled?Ot.getHistory():[],...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await ct(e.configuration.analytics),...e.configuration.analytics.enabled&&await Pn(e.configuration.analytics)},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var cC={id:E,query:me},eu=S("querySet/register",t=>C(t,cC)),tu=S("querySet/update",t=>C(t,cC));var _p=k(On(),t=>{t.addCase(eu,(e,r)=>{let{id:a,query:n}=r.payload;a in e||(e[a]=n)}).addCase(tu,(e,r)=>{let{id:a,query:n}=r.payload;$p(e,a,n)}).addCase(za,(e,r)=>{let{id:a,expression:n}=r.payload;$p(e,a,n)}).addCase(W.fulfilled,(e,r)=>{let{queryExecuted:a}=r.payload;uC(e,a)}).addCase(le,(e,r)=>{ie(r.payload.q)||uC(e,r.payload.q)}).addCase(se.fulfilled,(e,r)=>{if(!!r.payload)for(let[a,n]of Object.entries(r.payload.querySet))$p(e,a,n)})});function uC(t,e){Object.keys(t).forEach(r=>t[r]=e)}var $p=(t,e,r)=>{e in t&&(t[e]=r)};var Hp=k(kp(),t=>t.addCase(Xc,(e,r)=>{let a=r.payload.id;a in e||(e[a]=uI(r.payload))}).addCase(sC,(e,r)=>{delete e[r.payload.id]}).addCase(to.pending,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.currentRequestId=r.meta.requestId,a.isLoading=!0)}).addCase(to.fulfilled,(e,r)=>{let a=e[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{q:n}=r.payload;n&&a.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions,a.isLoading=!1,a.error=null}).addCase(to.rejected,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.error=r.payload||null,a.isLoading=!1)}).addCase(Zc,(e,r)=>{let a=e[r.payload.id];!a||(a.responseId="",a.completions=[],a.partialQueries=[])}));function uI(t){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...t}}var ro=k(Oe(),t=>t.addCase(nt,(e,r)=>({...e,...r.payload})).addCase(Ht,(e,r)=>{e.q=r.payload}).addCase(za,(e,r)=>{e.q=r.payload.expression}).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.query)!=null?n:e}).addCase(le,(e,r)=>{var a,n;e.q=(a=r.payload.q)!=null?a:e.q,e.enableQuerySyntax=(n=r.payload.enableQuerySyntax)!=null?n:e.enableQuerySyntax}));var zp={open:new w,close:new w},Gp={id:E,numberOfSuggestions:new q({min:0}),enableQuerySyntax:new H,highlightOptions:new I({values:{notMatchDelimiters:new I({values:zp}),exactMatchDelimiters:new I({values:zp}),correctionDelimiters:new I({values:zp})}}),clearFilters:new H},lI=new B(Gp);var dC=k(Yo(),t=>{t.addCase(Ts,(e,r)=>{let{id:a}=r.payload;e[a]||(e[a]={q:"",cache:{}})}),t.addCase(zr,(e,r)=>{let{q:a,id:n}=r.payload;!a||(e[n].q=a)}),t.addCase(Ds,(e,r)=>{let{id:a}=r.payload;Object.entries(e[a].cache).forEach(([n,o])=>{kd(o)&&delete e[a].cache[n]})}),t.addCase(Zo.pending,(e,r)=>{for(let n in e)for(let o in e[n].cache)e[n].cache[o].isActive=!1;if(!ru(e,r.meta)){pI(e,r.meta);return}let a=ru(e,r.meta);a.isLoading=!0,a.isActive=!0,a.error=null}),t.addCase(Zo.fulfilled,(e,r)=>{let{results:a,searchUid:n,totalCountFiltered:o,duration:i}=r.payload,{cacheTimeout:s}=r.meta.arg,u=ru(e,r.meta);u.isActive=!0,u.searchUid=n,u.isLoading=!1,u.error=null,u.results=a,u.expiresAt=s?s+Date.now():0,u.totalCountFiltered=o,u.duration=i}),t.addCase(Zo.rejected,(e,r)=>{let a=ru(e,r.meta);a.error=r.error||null,a.isLoading=!1,a.isActive=!1})}),pI=(t,e)=>{let{q:r,id:a}=e.arg;t[a].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},ru=(t,e)=>{let{q:r,id:a}=e.arg;return t[a].cache[r]||null};var fI={searchBoxId:Se,maxResultsPerQuery:new q({required:!0,min:1}),cacheTimeout:new q},mI=new B(fI);var pC={by:new Ze({enum:on,required:!0})},au=S("sortCriteria/register",t=>fC(t)),nu=S("sortCriteria/update",t=>fC(t)),fC=t=>po(t)?(t.forEach(e=>C(e,pC)),{payload:t}):C(t,pC);var mC=k(ut(),t=>{t.addCase(au,(e,r)=>Qr(r.payload)).addCase(nu,(e,r)=>Qr(r.payload)).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.sortCriteria)!=null?n:e}).addCase(le,(e,r)=>{var a;return(a=r.payload.sortCriteria)!=null?a:e})});var gC=k(qn(),t=>t.addCase(Ks,(e,r)=>{let a=r.payload,{id:n}=a;n in e||(e[n]=a)}).addCase(ri,(e,r)=>{let{id:a,value:n}=r.payload,o=e[a];if(!o)return;let i=o.values.find(u=>u.caption===n.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(ai,(e,r)=>{let{id:a,value:n}=r.payload,o=e[a];if(!o)return;let i=o.values.find(u=>u.caption===n.caption);if(!i)return;let s=i.state==="excluded";i.state=s?"idle":"excluded"}).addCase(Js,(e,r)=>{let a=r.payload,n=e[a];!n||n.values.forEach(o=>o.state="idle")}).addCase(Ie,e=>{Object.values(e).forEach(r=>{r.values.forEach(a=>a.state="idle")})}).addCase(le,(e,r)=>{let a=r.payload.sf||{};Object.entries(e).forEach(([n,o])=>{let i=a[n]||[];o.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));var nie=new B({id:Qa,values:Ys});var hC=k(Tn(),t=>{t.addCase(us,(e,r)=>{let a=r.payload,{id:n}=a;n in e||(e[n]={...a,isActive:!1})}).addCase(_r,(e,r)=>{let a=r.payload;SC(e,a)}).addCase(le,(e,r)=>{let a=r.payload.tab||"";SC(e,a)}).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.tabSet)!=null?n:e})});function SC(t,e){e in t&&Object.keys(t).forEach(a=>{t[a].isActive=a===e})}var Fie=new B({expression:me,id:E}),Rie=new B({isActive:new H});function yC(t){return t.type==="redirect"}var Wp=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(yC);return e.length?e[0].content:null}};var ou=S("standaloneSearchBox/register",t=>C(t,{id:E,redirectionUrl:E})),iu=S("standaloneSearchBox/reset",t=>C(t,{id:E})),su=S("standaloneSearchBox/updateAnalyticsToSearchFromLink",t=>C(t,{id:E})),cu=S("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),ao=ee("standaloneSearchBox/fetchRedirect",async(t,{dispatch:e,getState:r,rejectWithValue:a,extra:{apiClient:n,validatePayload:o}})=>{o(t,{id:new w({emptyAllowed:!1})});let i=await SI(r()),s=await n.plan(i);if(Fe(s))return a(s.error);let{redirectionUrl:u}=new Wp(s.success);return u&&e(hI(u)),u||""}),hI=t=>V("analytics/standaloneSearchBox/redirect",e=>e.makeTriggerRedirect({redirectedTo:t})),SI=async t=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,q:t.query.q,...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await ct(t.configuration.analytics)},...t.configuration.analytics.enabled&&await Pn(t.configuration.analytics),...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var CC=k(Vp(),t=>t.addCase(ou,(e,r)=>{let{id:a,redirectionUrl:n}=r.payload;a in e||(e[a]=xC(n))}).addCase(iu,(e,r)=>{let{id:a}=r.payload,n=e[a];if(n){e[a]=xC(n.defaultRedirectionUrl);return}}).addCase(ao.pending,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.isLoading=!0)}).addCase(ao.fulfilled,(e,r)=>{let a=r.payload,n=e[r.meta.arg.id];!n||(n.redirectTo=a||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(ao.rejected,(e,r)=>{let a=e[r.meta.arg.id];!a||(a.isLoading=!1)}).addCase(su,(e,r)=>{let a=e[r.payload.id];!a||(a.analytics.cause="searchFromLink")}).addCase(cu,(e,r)=>{let a=e[r.payload.id];!a||(a.analytics.cause="omniboxFromLink",a.analytics.metadata=r.payload.metadata)}));function xC(t){return{defaultRedirectionUrl:t,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var yI=new B({...Gp,redirectionUrl:new w({required:!0,emptyAllowed:!1})});var tue=new B({parameters:new I({options:{required:!0},values:cs})});var Lue=new B({fragment:new w});async function Yp(t,e){var s;let{search:r,accessToken:a,organizationId:n,analytics:o}=t.configuration,i=((s=t.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:a,organizationId:n,enableNavigation:!1,...o.enabled&&{visitorId:await ct(t.configuration.analytics)},q:i,...e,requestedOutputSize:e.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var fi=ee("resultPreview/fetchResultContent",async(t,{extra:e,getState:r,rejectWithValue:a})=>{let n=r(),o=await Yp(n,t),i=await e.apiClient.html(o);return Fe(i)?a(i.error):{content:i.success,uniqueId:t.uniqueId}}),uu=S("resultPreview/next"),lu=S("resultPreview/previous"),du=S("resultPreview/prepare",t=>C(t,{results:new z({required:!0})})),vC=2048,pu=ee("resultPreview/updateContentURL",async(t,{getState:e,extra:r})=>{let a=e(),n=Kf(await t.buildResultPreviewRequest(a,{uniqueId:t.uniqueId,requestedOutputSize:t.requestedOutputSize}),t.path);return(n==null?void 0:n.length)>vC&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${vC} characters.`),{contentURL:n}});var Kp=t=>{let{content:e,isLoading:r,uniqueId:a,contentURL:n}=Kn();t.content=e,t.isLoading=r,t.uniqueId=a,t.contentURL=n},Jp=t=>t.filter(e=>e.hasHtmlVersion).map(e=>e.uniqueId),FC=k(Kn(),t=>{t.addCase(fi.pending,e=>{e.isLoading=!0}).addCase(fi.fulfilled,(e,r)=>{let{content:a,uniqueId:n}=r.payload;e.position=e.resultsWithPreview.indexOf(n),e.content=a,e.uniqueId=n,e.isLoading=!1}).addCase(W.fulfilled,(e,r)=>{Kp(e),e.resultsWithPreview=Jp(r.payload.response.results)}).addCase(Ln.fulfilled,(e,r)=>{Kp(e),e.resultsWithPreview=e.resultsWithPreview.concat(Jp(r.payload.response.results))}).addCase(Vn.fulfilled,Kp).addCase(du,(e,r)=>{e.resultsWithPreview=Jp(r.payload.results)}).addCase(uu,e=>{if(e.isLoading)return;let r=e.position+1;r>e.resultsWithPreview.length-1&&(r=0),e.position=r}).addCase(lu,e=>{if(e.isLoading)return;let r=e.position-1;r<0&&(r=e.resultsWithPreview.length-1),e.position=r}).addCase(pu.fulfilled,(e,r)=>{e.contentURL=r.payload.contentURL})});function FI(t,e){return t.raw[e.collection]}function Xp(t,e){return t.raw[e.parent]}function mi(t,e){let r=t.raw[e.child];return Ri(r)?r[0]:r}function RI(t,e){return(t||e)!==void 0&&t===e}function RC(t,e,r,a=[]){let n=mi(t,r);return n?a.indexOf(n)!==-1?[]:e.filter(o=>{let i=mi(o,r)===mi(t,r);return Xp(o,r)===n&&!i}).map(o=>({result:o,children:RC(o,e,r,[...a,n])})):[]}function bI(t,e){return t.find(r=>{let a=Xp(r,e)===void 0,n=RI(Xp(r,e),mi(r,e));return a||n})}function bC(t){return t.parentResult?bC(t.parentResult):t}function AI(t,e,r){var o;let a=Ul(t),n=(o=r!=null?r:bI(a,e))!=null?o:bC(t);return{result:n,children:RC(n,a,e),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function fu(t,e,r){let a={};return t.forEach(n=>{let o=FI(n,e);!o||!mi(n,e)&&!n.parentResult||(a[o]=AI(n,e,r))}),a}function AC(t,e){if(!t.collections[e])throw new Error(`Missing collection ${e} from ${Object.keys(t.collections)}: Folding most probably in an invalid state...`);return t.collections[e]}var PC=k(Jn(),t=>t.addCase(W.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?fu(r.response.results,e.fields):{}}).addCase(Vn.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?fu(r.response.results,e.fields):{}}).addCase(Ln.fulfilled,(e,{payload:r})=>{e.collections=e.enabled?{...e.collections,...fu(r.response.results,e.fields)}:{}}).addCase(Xn,(e,{payload:r})=>{var a,n,o,i;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:(a=r.collectionField)!=null?a:e.fields.collection,parent:(n=r.parentField)!=null?n:e.fields.parent,child:(o=r.childField)!=null?o:e.fields.child},filterFieldRange:(i=r.numberOfFoldedResults)!=null?i:e.filterFieldRange}}).addCase(Zn.pending,(e,{meta:r})=>{let a=r.arg;AC(e,a).isLoadingMoreResults=!0}).addCase(Zn.rejected,(e,{meta:r})=>{let a=r.arg;AC(e,a).isLoadingMoreResults=!1}).addCase(Zn.fulfilled,(e,{payload:{collectionId:r,results:a,rootResult:n}})=>{let o=fu(a,e.fields,n);if(!o||!o[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(a)}. Folding most probably in an invalid state... `);e.collections[r]=o[r],e.collections[r].moreResultsAvailable=!1}));var tde=new B(Bp);var mu=k(Lp(),t=>t.addCase(W.pending,e=>{e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore}}).addCase(W.fulfilled,(e,r)=>{var s;let a=[],n=[],o=[],i=[];r.payload.response.triggers.forEach(u=>{switch(u.type){case"redirect":a.push(u.content);break;case"query":n.push(u.content);break;case"execute":o.push({functionName:u.content.name,params:u.content.params});break;case"notify":i.push(u.content);break}}),e.redirectTo=(s=a[0])!=null?s:"",e.query=e.queryModification.newQuery,e.executions=o,e.notifications=i}).addCase(Dn,(e,r)=>{e.queryModification={...r.payload,queryToIgnore:""}}).addCase(Da,(e,r)=>{e.queryModification.queryToIgnore=r.payload}));var gu=S("smartSnippet/expand"),hu=S("smartSnippet/collapse"),Su=S("smartSnippet/like"),yu=S("smartSnippet/dislike"),Cu=S("smartSnippet/feedbackModal/open"),xu=S("smartSnippet/feedbackModal/close"),vu=S("smartSnippet/related/expand",t=>Bn(t)),Fu=S("smartSnippet/related/collapse",t=>Bn(t));var wC=(t,e)=>t.findIndex(r=>r.questionAnswerId===e.questionAnswerId);function EC({question:t,answerSnippet:e,documentId:{contentIdKey:r,contentIdValue:a}}){return Ai({question:t,answerSnippet:e,contentIdKey:r,contentIdValue:a})}function PI(t,e){let r=EC(t);return e&&r===e.questionAnswerId?e:{contentIdKey:t.documentId.contentIdKey,contentIdValue:t.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var gi=k(ui(),t=>t.addCase(gu,e=>{e.expanded=!0}).addCase(hu,e=>{e.expanded=!1}).addCase(Su,e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1}).addCase(yu,e=>{e.liked=!1,e.disliked=!0}).addCase(Cu,e=>{e.feedbackModalOpen=!0}).addCase(xu,e=>{e.feedbackModalOpen=!1}).addCase(W.fulfilled,(e,r)=>{let a=r.payload.response.questionAnswer.relatedQuestions.map((o,i)=>PI(o,e.relatedQuestions[i])),n=EC(r.payload.response.questionAnswer);return e.questionAnswerId===n?{...e,relatedQuestions:a}:{...ui(),relatedQuestions:a,questionAnswerId:n}}).addCase(vu,(e,r)=>{let a=wC(e.relatedQuestions,r.payload);a!==-1&&(e.relatedQuestions[a].expanded=!0)}).addCase(Fu,(e,r)=>{let a=wC(e.relatedQuestions,r.payload);a!==-1&&(e.relatedQuestions[a].expanded=!1)}));var qI={queries:new z({required:!0,each:new w({emptyAllowed:!1})}),maxLength:new q({required:!0,min:1,default:10})},Ru=S("recentQueries/registerRecentQueries",t=>C(t,qI)),bu=S("recentQueries/clearRecentQueries");var IC=k(Tp(),t=>{t.addCase(Ru,(e,r)=>{e.queries=r.payload.queries.slice(0,r.payload.maxLength),e.maxLength=r.payload.maxLength}).addCase(bu,e=>{e.queries=[]}).addCase(W.fulfilled,(e,r)=>{let a=r.payload.queryExecuted.trim(),n=r.payload.response.results;if(!a.length||!n.length)return;e.queries=e.queries.filter(i=>i!==a);let o=e.queries.slice(0,e.maxLength-1);e.queries=[a,...o]})});var Bfe=new B({queries:new z({required:!0})}),jfe=new B({maxLength:new q({required:!0,min:1}),clearFilters:new H});var kC=k(Dp(),t=>{t.addCase(Kc,(e,r)=>{e.results=r.payload.results.slice(0,r.payload.maxLength),e.maxLength=r.payload.maxLength}).addCase(Jc,e=>{e.results=[]}).addCase(Ha,(e,r)=>{let a=r.payload;e.results=e.results.filter(o=>o.uniqueId!==a.uniqueId);let n=e.results.slice(0,e.maxLength-1);e.results=[a,...n]})});var ome=new B({results:new z({required:!0})}),ime=new B({maxLength:new q({required:!0,min:1})});var TI=k(ua(),t=>{t.addCase(W.fulfilled,(e,r)=>{var n;e.set={};let a=(n=r.payload.response.generateAutomaticFacets)==null?void 0:n.facets;a==null||a.forEach(o=>{e.set[o.field]={response:o}})}).addCase(md,(e,r)=>{r.payload.desiredCount&&(e.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(e.numberOfValues=r.payload.numberOfValues)}).addCase(pn,(e,r)=>{var u;let{field:a,selection:n}=r.payload,o=(u=e.set[a])==null?void 0:u.response;if(!o)return;let i=o.values.find(c=>c.value===n.value);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(gd,(e,r)=>{var o;let a=r.payload,n=(o=e.set[a])==null?void 0:o.response;if(!!n)for(let i of n.values)i.state="idle"}).addCase(le,(e,r)=>{var o,i,s;let a=(o=r.payload.af)!=null?o:{},n=Object.keys(e.set);for(let u in a)if(!e.set[u]){let c=DI(u),l=a[u].map(d=>VI(d));c.values.push(...l),e.set[u]={response:c}}for(let u of n)if(!(u in a)){let c=(i=e.set[u])==null?void 0:i.response;for(let l of c.values)l.state="idle"}for(let u in a){let c=(s=e.set[u])==null?void 0:s.response;if(c){let l=c.values;for(let d of l)a[u].includes(d.value)?d.state==="idle"&&(d.state="selected"):d.state="idle"}}}).addCase(se.fulfilled,(e,r)=>{if(!!r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(Ie,e=>{Object.values(e.set).forEach(({response:r})=>{r.values.forEach(a=>a.state="idle")})})});function DI(t){return{field:t,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function VI(t){return{value:t,state:"selected",numberOfResults:0}}function OC(t){var e,r,a;return(a=(r=(e=t.search)==null?void 0:e.response)==null?void 0:r.extendedResults)==null?void 0:a.generativeQuestionAnsweringId}var qC=t=>V("analytics/generatedAnswer/streamEnd",(e,r)=>{let a=OC(r);return a?e.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:a,answerGenerated:t}):null});var TC=async t=>{var e;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.platformUrl,streamId:(e=t.search.extendedResults)==null?void 0:e.generativeQuestionAnsweringId}};var DC=["default","bullet","step","concise"];var hi=new w({required:!0}),VC=new w,Zp=new H({required:!0}),LI={id:hi,title:hi,uri:hi,permanentid:hi,clickUri:VC},ef=S("generatedAnswer/setIsVisible",t=>C(t,Zp)),tf=S("generatedAnswer/updateMessage",t=>C(t,{textDelta:hi})),rf=S("generatedAnswer/updateCitations",t=>C(t,{citations:new z({required:!0,each:new I({values:LI})})})),af=S("generatedAnswer/updateError",t=>C(t,{message:VC,code:new q({min:0})})),Si=S("generatedAnswer/resetAnswer"),nf=S("generatedAnswer/like"),of=S("generatedAnswer/dislike"),sf=S("generatedAnswer/feedbackModal/open"),cf=S("generatedAnswer/feedbackModal/close"),uf=S("generatedAnswer/sendFeedback"),yi=S("generatedAnswer/setIsLoading",t=>C(t,Zp)),Au=S("generatedAnswer/setIsStreaming",t=>C(t,Zp)),lf=S("generatedAnswer/updateResponseFormat",t=>C(t,{answerStyle:new w({required:!0,constrainTo:DC})})),MI=ee("generatedAnswer/streamAnswer",async(t,e)=>{var l;let r=e.getState(),{dispatch:a,extra:n}=e,{setAbortControllerRef:o}=t,i=await TC(r),s=(d,m)=>{switch(d){case"genqa.messageType":a(tf(JSON.parse(m)));break;case"genqa.citationsType":a(rf(JSON.parse(m)));break;case"genqa.endOfStreamType":a(Au(!1)),a(qC(JSON.parse(m).answerGenerated));break;default:r.debug&&n.logger.warn(`Unknown payloadType: "${d}"`)}};a(yi(!0));let u=d=>d.streamId===e.getState().search.extendedResults.generativeQuestionAnsweringId,c=(l=n.streamingClient)==null?void 0:l.streamGeneratedAnswer(i,{write:d=>{u(i)&&(a(yi(!1)),d.payload&&d.payloadType&&s(d.payloadType,d.payload))},abort:d=>{u(i)&&a(af(d))},close:()=>{u(i)&&a(Au(!1))},resetAnswer:()=>{u(i)&&a(Si())}});c?o(c):a(yi(!1))});var LC=k(ci(),t=>t.addCase(ef,(e,{payload:r})=>{e.isVisible=r}).addCase(tf,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=r.textDelta,delete e.error}).addCase(rf,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!0,e.citations=e.citations.concat(r.citations),delete e.error}).addCase(af,(e,{payload:r})=>{e.isLoading=!1,e.isStreaming=!1,e.error={...r,isRetryable:r.code===By},e.citations=[],delete e.answer}).addCase(nf,e=>{e.liked=!0,e.disliked=!1}).addCase(of,e=>{e.liked=!1,e.disliked=!0}).addCase(sf,e=>{e.feedbackModalOpen=!0}).addCase(cf,e=>{e.feedbackModalOpen=!1}).addCase(uf,e=>{e.feedbackSubmitted=!0}).addCase(Si,e=>({...ci(),responseFormat:e.responseFormat,isVisible:e.isVisible})).addCase(yi,(e,{payload:r})=>{e.isLoading=r}).addCase(Au,(e,{payload:r})=>{e.isStreaming=r}).addCase(lf,(e,{payload:r})=>{e.responseFormat=r}));var Jr=()=>new w({required:!1,emptyAllowed:!0}),df=S("advancedSearchQueries/update",t=>C(t,{aq:Jr(),cq:Jr(),lq:Jr(),dq:Jr()})),pf=S("advancedSearchQueries/register",t=>C(t,{aq:Jr(),cq:Jr(),lq:Jr(),dq:Jr()}));var QI=k(St(),t=>{t.addCase(df,(e,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;we(a)||(e.aq=a,e.aqWasSet=!0),we(n)||(e.cq=n,e.cqWasSet=!0),we(o)||(e.lq=o,e.lqWasSet=!0),we(i)||(e.dq=i,e.dqWasSet=!0)}).addCase(pf,(e,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;we(a)||(e.defaultFilters.aq=a,e.aqWasSet||(e.aq=a)),we(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),we(o)||(e.defaultFilters.lq=o,e.lqWasSet||(e.lq=o)),we(i)||(e.defaultFilters.dq=i,e.dqWasSet||(e.dq=i))}).addCase(se.fulfilled,(e,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.advancedSearchQueries)!=null?n:e}).addCase(le,(e,r)=>{let{aq:a,cq:n}=r.payload;we(a)||(e.aq=a,e.aqWasSet=!0),we(n)||(e.cq=n,e.cqWasSet=!0)})});var ff=S("excerptLength/set",t=>C(t,new q({min:0,required:!0})));var BI=k(qp(),t=>{t.addCase(ff,(e,r)=>{e.length=r.payload})});var Qxe=new B({content:new ue({required:!0}),conditions:new ue({required:!0}),priority:new q({required:!1,default:0,min:0}),fields:new z({required:!1,each:E})});var MC;(o=>{o.getResultProperty=Na,o.fieldsMustBeDefined=RS,o.fieldsMustNotBeDefined=bS,o.fieldMustMatch=AS,o.fieldMustNotMatch=PS})(MC||(MC={}));vi();var NC=S("recentResults/pushRecentResult",t=>(Ch(t),{payload:t}));function QC(t,e){let r=!1,a=()=>{r||(r=!0,t.dispatch(os(e.options.result)))};return Er(t,e,()=>{a(),t.dispatch(NC(e.options.result))})}vi();
/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
}));
//# sourceMappingURL=headless.js.map
